/*! For license information please see main.da79753e.js.LICENSE.txt */
(()=>{var __webpack_modules__={9813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,I(S);else{var t=r(u);null!==t&&B(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(C),C=-1),f=!0;var a=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!k());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&B(w,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,A=!1,E=null,C=-1,M=5,T=-1;function k(){return!(t.unstable_now()-T<M)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?_():(A=!1,E=null)}}else A=!1}if("function"===typeof x)_=function(){x(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=P,_=function(){D.postMessage(null)}}else _=function(){v(P,0)};function I(e){E=e,A||(A=!0,_())}function B(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,B(w,a-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,I(S))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8784:(e,t,n)=>{"use strict";e.exports=n(9813)},638:(e,t,n)=>{e.exports={default:n(7478),__esModule:!0}},7151:(e,t,n)=>{e.exports={default:n(327),__esModule:!0}},5560:(e,t,n)=>{e.exports={default:n(6896),__esModule:!0}},7360:(e,t,n)=>{e.exports={default:n(9368),__esModule:!0}},1164:(e,t,n)=>{e.exports={default:n(1956),__esModule:!0}},6247:(e,t,n)=>{e.exports={default:n(4232),__esModule:!0}},4716:(e,t,n)=>{e.exports={default:n(7044),__esModule:!0}},6731:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},2239:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(5560),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},4414:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(638),a=(r=i)&&r.__esModule?r:{default:r};t.default=a.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},6835:(e,t,n)=>{"use strict";t.__esModule=!0;var r=s(n(1164)),i=s(n(7151)),a=s(n(6926));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,a.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},1912:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(6926),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,a.default)(t))&&"function"!==typeof t?e:t}},6926:(e,t,n)=>{"use strict";t.__esModule=!0;var r=s(n(4716)),i=s(n(6247)),a="function"===typeof i.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===a(r.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},7478:(e,t,n)=>{n(3430),e.exports=n(2206).Object.assign},327:(e,t,n)=>{n(6279);var r=n(2206).Object;e.exports=function(e,t){return r.create(e,t)}},6896:(e,t,n)=>{n(4752);var r=n(2206).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},9368:(e,t,n)=>{n(2408),e.exports=n(2206).Object.getPrototypeOf},1956:(e,t,n)=>{n(4996),e.exports=n(2206).Object.setPrototypeOf},4232:(e,t,n)=>{n(5842),n(6010),n(9380),n(9444),e.exports=n(2206).Symbol},7044:(e,t,n)=>{n(8271),n(4098),e.exports=n(5624).f("iterator")},9147:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},5048:e=>{e.exports=function(){}},1908:(e,t,n)=>{var r=n(9785);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},3176:(e,t,n)=>{var r=n(8021),i=n(621),a=n(8749);e.exports=function(e){return function(t,n,s){var o,l=r(t),c=i(l.length),u=a(s,c);if(e&&n!=n){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},2929:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},2206:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},4892:(e,t,n)=>{var r=n(9147);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},2112:e=>{e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},1843:(e,t,n)=>{e.exports=!n(5912)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},2770:(e,t,n)=>{var r=n(9785),i=n(86).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},8620:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},8657:(e,t,n)=>{var r=n(847),i=n(6164),a=n(5425);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,o=n(e),l=a.f,c=0;o.length>c;)l.call(e,s=o[c++])&&t.push(s);return t}},7503:(e,t,n)=>{var r=n(86),i=n(2206),a=n(4892),s=n(1773),o=n(685),l="prototype",c=function(e,t,n){var u,d,h,p=e&c.F,f=e&c.G,m=e&c.S,g=e&c.P,v=e&c.B,y=e&c.W,x=f?i:i[t]||(i[t]={}),b=x[l],w=f?r:m?r[t]:(r[t]||{})[l];for(u in f&&(n=t),n)(d=!p&&w&&void 0!==w[u])&&o(x,u)||(h=d?w[u]:n[u],x[u]=f&&"function"!=typeof w[u]?n[u]:v&&d?a(h,r):y&&w[u]==h?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[l]=e[l],t}(h):g&&"function"==typeof h?a(Function.call,h):h,g&&((x.virtual||(x.virtual={}))[u]=h,e&c.R&&b&&!b[u]&&s(b,u,h)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},5912:e=>{e.exports=function(e){try{return!!e()}catch(t){return!0}}},86:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},685:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},1773:(e,t,n)=>{var r=n(7087),i=n(7228);e.exports=n(1843)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},9628:(e,t,n)=>{var r=n(86).document;e.exports=r&&r.documentElement},2700:(e,t,n)=>{e.exports=!n(1843)&&!n(5912)((function(){return 7!=Object.defineProperty(n(2770)("div"),"a",{get:function(){return 7}}).a}))},9809:(e,t,n)=>{var r=n(2929);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},1037:(e,t,n)=>{var r=n(2929);e.exports=Array.isArray||function(e){return"Array"==r(e)}},9785:e=>{e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},7872:(e,t,n)=>{"use strict";var r=n(399),i=n(7228),a=n(9108),s={};n(1773)(s,n(4038)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),a(e,t+" Iterator")}},8655:(e,t,n)=>{"use strict";var r=n(4510),i=n(7503),a=n(2779),s=n(1773),o=n(7018),l=n(7872),c=n(9108),u=n(755),d=n(4038)("iterator"),h=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};e.exports=function(e,t,n,g,v,y,x){l(n,t,g);var b,w,S,_=function(e){if(!h&&e in M)return M[e];switch(e){case p:case f:return function(){return new n(this,e)}}return function(){return new n(this,e)}},A=t+" Iterator",E=v==f,C=!1,M=e.prototype,T=M[d]||M["@@iterator"]||v&&M[v],k=T||_(v),P=v?E?_("entries"):k:void 0,R="Array"==t&&M.entries||T;if(R&&(S=u(R.call(new e)))!==Object.prototype&&S.next&&(c(S,A,!0),r||"function"==typeof S[d]||s(S,d,m)),E&&T&&T.name!==f&&(C=!0,k=function(){return T.call(this)}),r&&!x||!h&&!C&&M[d]||s(M,d,k),o[t]=k,o[A]=m,v)if(b={values:E?k:_(f),keys:y?k:_(p),entries:P},x)for(w in b)w in M||a(M,w,b[w]);else i(i.P+i.F*(h||C),t,b);return b}},8762:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},7018:e=>{e.exports={}},4510:e=>{e.exports=!0},7388:(e,t,n)=>{var r=n(6559)("meta"),i=n(9785),a=n(685),s=n(7087).f,o=0,l=Object.isExtensible||function(){return!0},c=!n(5912)((function(){return l(Object.preventExtensions({}))})),u=function(e){s(e,r,{value:{i:"O"+ ++o,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!a(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!a(e,r)&&u(e),e}}},2430:(e,t,n)=>{"use strict";var r=n(1843),i=n(847),a=n(6164),s=n(5425),o=n(862),l=n(9809),c=Object.assign;e.exports=!c||n(5912)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=o(e),c=arguments.length,u=1,d=a.f,h=s.f;c>u;)for(var p,f=l(arguments[u++]),m=d?i(f).concat(d(f)):i(f),g=m.length,v=0;g>v;)p=m[v++],r&&!h.call(f,p)||(n[p]=f[p]);return n}:c},399:(e,t,n)=>{var r=n(1908),i=n(9802),a=n(8620),s=n(254)("IE_PROTO"),o=function(){},l="prototype",c=function(){var e,t=n(2770)("iframe"),r=a.length;for(t.style.display="none",n(9628).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c[l][a[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(o[l]=r(e),n=new o,o[l]=null,n[s]=e):n=c(),void 0===t?n:i(n,t)}},7087:(e,t,n)=>{var r=n(1908),i=n(2700),a=n(6888),s=Object.defineProperty;t.f=n(1843)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return s(e,t,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},9802:(e,t,n)=>{var r=n(7087),i=n(1908),a=n(847);e.exports=n(1843)?Object.defineProperties:function(e,t){i(e);for(var n,s=a(t),o=s.length,l=0;o>l;)r.f(e,n=s[l++],t[n]);return e}},8929:(e,t,n)=>{var r=n(5425),i=n(7228),a=n(8021),s=n(6888),o=n(685),l=n(2700),c=Object.getOwnPropertyDescriptor;t.f=n(1843)?c:function(e,t){if(e=a(e),t=s(t,!0),l)try{return c(e,t)}catch(n){}if(o(e,t))return i(!r.f.call(e,t),e[t])}},5706:(e,t,n)=>{var r=n(8021),i=n(6855).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(t){return s.slice()}}(e):i(r(e))}},6855:(e,t,n)=>{var r=n(1441),i=n(8620).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},6164:(e,t)=>{t.f=Object.getOwnPropertySymbols},755:(e,t,n)=>{var r=n(685),i=n(862),a=n(254)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},1441:(e,t,n)=>{var r=n(685),i=n(8021),a=n(3176)(!1),s=n(254)("IE_PROTO");e.exports=function(e,t){var n,o=i(e),l=0,c=[];for(n in o)n!=s&&r(o,n)&&c.push(n);for(;t.length>l;)r(o,n=t[l++])&&(~a(c,n)||c.push(n));return c}},847:(e,t,n)=>{var r=n(1441),i=n(8620);e.exports=Object.keys||function(e){return r(e,i)}},5425:(e,t)=>{t.f={}.propertyIsEnumerable},9387:(e,t,n)=>{var r=n(7503),i=n(2206),a=n(5912);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*a((function(){n(1)})),"Object",s)}},7228:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2779:(e,t,n)=>{e.exports=n(1773)},6290:(e,t,n)=>{var r=n(9785),i=n(1908),a=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(4892)(Function.call,n(8929).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},9108:(e,t,n)=>{var r=n(7087).f,i=n(685),a=n(4038)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},254:(e,t,n)=>{var r=n(7740)("keys"),i=n(6559);e.exports=function(e){return r[e]||(r[e]=i(e))}},7740:(e,t,n)=>{var r=n(2206),i=n(86),a="__core-js_shared__",s=i[a]||(i[a]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(4510)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},924:(e,t,n)=>{var r=n(4751),i=n(2112);e.exports=function(e){return function(t,n){var a,s,o=String(i(t)),l=r(n),c=o.length;return l<0||l>=c?e?"":void 0:(a=o.charCodeAt(l))<55296||a>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?e?o.charAt(l):a:e?o.slice(l,l+2):s-56320+(a-55296<<10)+65536}}},8749:(e,t,n)=>{var r=n(4751),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):a(e,t)}},4751:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},8021:(e,t,n)=>{var r=n(9809),i=n(2112);e.exports=function(e){return r(i(e))}},621:(e,t,n)=>{var r=n(4751),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},862:(e,t,n)=>{var r=n(2112);e.exports=function(e){return Object(r(e))}},6888:(e,t,n)=>{var r=n(9785);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},6559:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},2288:(e,t,n)=>{var r=n(86),i=n(2206),a=n(4510),s=n(5624),o=n(7087).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},5624:(e,t,n)=>{t.f=n(4038)},4038:(e,t,n)=>{var r=n(7740)("wks"),i=n(6559),a=n(86).Symbol,s="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=s&&a[e]||(s?a:i)("Symbol."+e))}).store=r},3325:(e,t,n)=>{"use strict";var r=n(5048),i=n(8762),a=n(7018),s=n(8021);e.exports=n(8655)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},3430:(e,t,n)=>{var r=n(7503);r(r.S+r.F,"Object",{assign:n(2430)})},6279:(e,t,n)=>{var r=n(7503);r(r.S,"Object",{create:n(399)})},4752:(e,t,n)=>{var r=n(7503);r(r.S+r.F*!n(1843),"Object",{defineProperty:n(7087).f})},2408:(e,t,n)=>{var r=n(862),i=n(755);n(9387)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},4996:(e,t,n)=>{var r=n(7503);r(r.S,"Object",{setPrototypeOf:n(6290).set})},6010:()=>{},8271:(e,t,n)=>{"use strict";var r=n(924)(!0);n(8655)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},5842:(e,t,n)=>{"use strict";var r=n(86),i=n(685),a=n(1843),s=n(7503),o=n(2779),l=n(7388).KEY,c=n(5912),u=n(7740),d=n(9108),h=n(6559),p=n(4038),f=n(5624),m=n(2288),g=n(8657),v=n(1037),y=n(1908),x=n(9785),b=n(862),w=n(8021),S=n(6888),_=n(7228),A=n(399),E=n(5706),C=n(8929),M=n(6164),T=n(7087),k=n(847),P=C.f,R=T.f,D=E.f,I=r.Symbol,B=r.JSON,j=B&&B.stringify,F="prototype",L=p("_hidden"),O=p("toPrimitive"),N={}.propertyIsEnumerable,z=u("symbol-registry"),U=u("symbols"),H=u("op-symbols"),G=Object[F],V="function"==typeof I&&!!M.f,W=r.QObject,q=!W||!W[F]||!W[F].findChild,X=a&&c((function(){return 7!=A(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=P(G,t);r&&delete G[t],R(e,t,n),r&&e!==G&&R(G,t,r)}:R,J=function(e){var t=U[e]=A(I[F]);return t._k=e,t},Y=V&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},K=function(e,t,n){return e===G&&K(H,t,n),y(e),t=S(t,!0),y(n),i(U,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=A(n,{enumerable:_(0,!1)})):(i(e,L)||R(e,L,_(1,{})),e[L][t]=!0),X(e,t,n)):R(e,t,n)},Z=function(e,t){y(e);for(var n,r=g(t=w(t)),i=0,a=r.length;a>i;)K(e,n=r[i++],t[n]);return e},Q=function(e){var t=N.call(this,e=S(e,!0));return!(this===G&&i(U,e)&&!i(H,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,L)&&this[L][e])||t)},$=function(e,t){if(e=w(e),t=S(t,!0),e!==G||!i(U,t)||i(H,t)){var n=P(e,t);return!n||!i(U,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=D(w(e)),r=[],a=0;n.length>a;)i(U,t=n[a++])||t==L||t==l||r.push(t);return r},te=function(e){for(var t,n=e===G,r=D(n?H:w(e)),a=[],s=0;r.length>s;)!i(U,t=r[s++])||n&&!i(G,t)||a.push(U[t]);return a};V||(o((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(H,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),X(this,e,_(1,n))};return a&&q&&X(G,e,{configurable:!0,set:t}),J(e)})[F],"toString",(function(){return this._k})),C.f=$,T.f=K,n(6855).f=E.f=ee,n(5425).f=Q,M.f=te,a&&!n(4510)&&o(G,"propertyIsEnumerable",Q,!0),f.f=function(e){return J(p(e))}),s(s.G+s.W+s.F*!V,{Symbol:I});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)p(ne[re++]);for(var ie=k(p.store),ae=0;ie.length>ae;)m(ie[ae++]);s(s.S+s.F*!V,"Symbol",{for:function(e){return i(z,e+="")?z[e]:z[e]=I(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),s(s.S+s.F*!V,"Object",{create:function(e,t){return void 0===t?A(e):Z(A(e),t)},defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:$,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var se=c((function(){M.f(1)}));s(s.S+s.F*se,"Object",{getOwnPropertySymbols:function(e){return M.f(b(e))}}),B&&s(s.S+s.F*(!V||c((function(){var e=I();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(x(t)||void 0!==e)&&!Y(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,j.apply(B,r)}}),I[F][O]||n(1773)(I[F],O,I[F].valueOf),d(I,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},9380:(e,t,n)=>{n(2288)("asyncIterator")},9444:(e,t,n)=>{n(2288)("observable")},4098:(e,t,n)=>{n(3325);for(var r=n(86),i=n(1773),a=n(7018),s=n(4038)("toStringTag"),o="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<o.length;l++){var c=o[l],u=r[c],d=u&&u.prototype;d&&!d[s]&&i(d,s,c),a[c]=a.Array}},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?s:o[e.$$typeof]||i}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var o=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!a[v]&&(!r||!r[v])&&(!m||!m[v])&&(!o||!o[v])){var y=h(n,v);try{c(t,v,y)}catch(x){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case a:case o:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=o,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||w(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===o},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===o||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===x||e.$$typeof===b||e.$$typeof===v)},t.typeOf=w},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},9611:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object AsyncFunction]",o="[object Function]",l="[object GeneratorFunction]",c="[object Null]",u="[object Object]",d="[object Proxy]",h="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m[a]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m[o]=m["[object Map]"]=m["[object Number]"]=m[u]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1;var g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,v="object"==typeof self&&self&&self.Object===Object&&self,y=g||v||Function("return this")(),x=t&&!t.nodeType&&t,b=x&&e&&!e.nodeType&&e,w=b&&b.exports===x,S=w&&g.process,_=function(){try{var e=b&&b.require&&b.require("util").types;return e||S&&S.binding&&S.binding("util")}catch(t){}}(),A=_&&_.isTypedArray;var E,C,M=Array.prototype,T=Function.prototype,k=Object.prototype,P=y["__core-js_shared__"],R=T.toString,D=k.hasOwnProperty,I=function(){var e=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),B=k.toString,j=R.call(Object),F=RegExp("^"+R.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=w?y.Buffer:void 0,O=y.Symbol,N=y.Uint8Array,z=L?L.allocUnsafe:void 0,U=(E=Object.getPrototypeOf,C=Object,function(e){return E(C(e))}),H=Object.create,G=k.propertyIsEnumerable,V=M.splice,W=O?O.toStringTag:void 0,q=function(){try{var e=ye(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),X=L?L.isBuffer:void 0,J=Math.max,Y=Date.now,K=ye(y,"Map"),Z=ye(Object,"create"),Q=function(){function e(){}return function(t){if(!Pe(t))return{};if(H)return H(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ne(e){var t=this.__data__=new ee(e);this.size=t.size}function re(e,t){var n=Ee(e),r=!n&&Ae(e),i=!n&&!r&&Me(e),a=!n&&!r&&!i&&De(e),s=n||r||i||a,o=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=o.length;for(var c in e)!t&&!D.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||xe(c,l))||o.push(c);return o}function ie(e,t,n){(void 0!==n&&!_e(e[t],n)||void 0===n&&!(t in e))&&oe(e,t,n)}function ae(e,t,n){var r=e[t];D.call(e,t)&&_e(r,n)&&(void 0!==n||t in e)||oe(e,t,n)}function se(e,t){for(var n=e.length;n--;)if(_e(e[n][0],t))return n;return-1}function oe(e,t,n){"__proto__"==t&&q?q(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}$.prototype.clear=function(){this.__data__=Z?Z(null):{},this.size=0},$.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$.prototype.get=function(e){var t=this.__data__;if(Z){var n=t[e];return n===r?void 0:n}return D.call(t,e)?t[e]:void 0},$.prototype.has=function(e){var t=this.__data__;return Z?void 0!==t[e]:D.call(t,e)},$.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Z&&void 0===t?r:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,n=se(t,e);return!(n<0)&&(n==t.length-1?t.pop():V.call(t,n,1),--this.size,!0)},ee.prototype.get=function(e){var t=this.__data__,n=se(t,e);return n<0?void 0:t[n][1]},ee.prototype.has=function(e){return se(this.__data__,e)>-1},ee.prototype.set=function(e,t){var n=this.__data__,r=se(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new $,map:new(K||ee),string:new $}},te.prototype.delete=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return ve(this,e).get(e)},te.prototype.has=function(e){return ve(this,e).has(e)},te.prototype.set=function(e,t){var n=ve(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ne.prototype.clear=function(){this.__data__=new ee,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ee){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};var le,ce=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),s=a.length;s--;){var o=a[le?s:++r];if(!1===t(i[o],o,i))break}return e};function ue(e){return null==e?void 0===e?h:c:W&&W in Object(e)?function(e){var t=D.call(e,W),n=e[W];try{e[W]=void 0;var r=!0}catch(a){}var i=B.call(e);r&&(t?e[W]=n:delete e[W]);return i}(e):function(e){return B.call(e)}(e)}function de(e){return Re(e)&&ue(e)==a}function he(e){return!(!Pe(e)||function(e){return!!I&&I in e}(e))&&(Te(e)?F:p).test(function(e){if(null!=e){try{return R.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function pe(e){if(!Pe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=be(e),n=[];for(var r in e)("constructor"!=r||!t&&D.call(e,r))&&n.push(r);return n}function fe(e,t,n,r,i){e!==t&&ce(t,(function(a,s){if(i||(i=new ne),Pe(a))!function(e,t,n,r,i,a,s){var o=we(e,n),l=we(t,n),c=s.get(l);if(c)return void ie(e,n,c);var d=a?a(o,l,n+"",e,t,s):void 0,h=void 0===d;if(h){var p=Ee(l),f=!p&&Me(l),m=!p&&!f&&De(l);d=l,p||f||m?Ee(o)?d=o:Re(g=o)&&Ce(g)?d=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(o):f?(h=!1,d=function(e,t){if(t)return e.slice();var n=e.length,r=z?z(n):new e.constructor(n);return e.copy(r),r}(l,!0)):m?(h=!1,d=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new N(t).set(new N(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(l,!0)):d=[]:function(e){if(!Re(e)||ue(e)!=u)return!1;var t=U(e);if(null===t)return!0;var n=D.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&R.call(n)==j}(l)||Ae(l)?(d=o,Ae(o)?d=function(e){return function(e,t,n,r){var i=!n;n||(n={});var a=-1,s=t.length;for(;++a<s;){var o=t[a],l=r?r(n[o],e[o],o,n,e):void 0;void 0===l&&(l=e[o]),i?oe(n,o,l):ae(n,o,l)}return n}(e,Ie(e))}(o):Pe(o)&&!Te(o)||(d=function(e){return"function"!=typeof e.constructor||be(e)?{}:Q(U(e))}(l))):h=!1}var g;h&&(s.set(l,d),i(d,l,r,a,s),s.delete(l));ie(e,n,d)}(e,t,s,n,fe,r,i);else{var o=r?r(we(e,s),a,s+"",e,t,i):void 0;void 0===o&&(o=a),ie(e,s,o)}}),Ie)}function me(e,t){return Se(function(e,t,n){return t=J(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=J(r.length-t,0),s=Array(a);++i<a;)s[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,o)}}(e,t,Fe),e+"")}var ge=q?function(e,t){return q(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Fe;function ve(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ye(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return he(n)?n:void 0}function xe(e,t){var n=typeof e;return!!(t=null==t?i:t)&&("number"==n||"symbol"!=n&&f.test(e))&&e>-1&&e%1==0&&e<t}function be(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||k)}function we(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Se=function(e){var t=0,n=0;return function(){var r=Y(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ge);function _e(e,t){return e===t||e!==e&&t!==t}var Ae=de(function(){return arguments}())?de:function(e){return Re(e)&&D.call(e,"callee")&&!G.call(e,"callee")},Ee=Array.isArray;function Ce(e){return null!=e&&ke(e.length)&&!Te(e)}var Me=X||function(){return!1};function Te(e){if(!Pe(e))return!1;var t=ue(e);return t==o||t==l||t==s||t==d}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Pe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Re(e){return null!=e&&"object"==typeof e}var De=A?function(e){return function(t){return e(t)}}(A):function(e){return Re(e)&&ke(e.length)&&!!m[ue(e)]};function Ie(e){return Ce(e)?re(e,!0):pe(e)}var Be,je=(Be=function(e,t,n,r){fe(e,t,n,r)},me((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=Be.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!Pe(n))return!1;var r=typeof t;return!!("number"==r?Ce(n)&&xe(t,n.length):"string"==r&&t in n)&&_e(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var s=t[n];s&&Be(e,s,n,i)}return e})));function Fe(e){return e}e.exports=je},1302:function(module,exports,__webpack_require__){var factory;"undefined"!==typeof navigator&&(factory=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,t){var n,r,i=e.length;for(n=0;n<i;n+=1)for(var a in r=e[n].prototype)Object.prototype.hasOwnProperty.call(r,a)&&(t.prototype[a]=r[a])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}var audioControllerFactory=function(){function e(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(e,t){var n,r=0,i=[];switch(e){case"int16":case"uint8c":n=1;break;default:n=1.1}for(r=0;r<t;r+=1)i.push(n);return i}return"function"===typeof Uint8ClampedArray&&"function"===typeof Float32Array?function(t,n){return"float32"===t?new Float32Array(n):"int16"===t?new Int16Array(n):"uint8c"===t?new Uint8ClampedArray(n):e(t,n)}:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){return _typeof$6="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=t.length;for(e=0;e<n;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"===_typeof$6(e)&&e.length){var t,n=createSizedArray(e.length),r=e.length;for(t=0;t<r;t+=1)n[t]=Math.abs(e[t]);return n}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(e){_shouldRoundValues=!!e}function bmRnd(e){return _shouldRoundValues?Math.round(e):e}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,n,r){this.type=e,this.currentTime=t,this.totalTime=n,this.direction=r<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,n,r){this.type=e,this.currentLoop=n,this.totalLoops=t,this.direction=r<0?-1:1}function BMSegmentStartEvent(e,t,n){this.type=e,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}function BMAnimationConfigErrorEvent(e,t){this.type=e,this.nativeError=t}var createElementID=function(){var e=0;return function(){return idPrefix$1+"__lottie_element_"+(e+=1)}}();function HSVtoRGB(e,t,n){var r,i,a,s,o,l,c,u;switch(l=n*(1-t),c=n*(1-(o=6*e-(s=Math.floor(6*e)))*t),u=n*(1-(1-o)*t),s%6){case 0:r=n,i=u,a=l;break;case 1:r=c,i=n,a=l;break;case 2:r=l,i=n,a=u;break;case 3:r=l,i=c,a=n;break;case 4:r=u,i=l,a=n;break;case 5:r=n,i=l,a=c}return[r,i,a]}function RGBtoHSV(e,t,n){var r,i=Math.max(e,t,n),a=Math.min(e,t,n),s=i-a,o=0===i?0:s/i,l=i/255;switch(i){case a:r=0;break;case e:r=t-n+s*(t<n?6:0),r/=6*s;break;case t:r=n-e+2*s,r/=6*s;break;case n:r=e-t+4*s,r/=6*s}return[r,o,l]}function addSaturationToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var e,t,n=[];for(e=0;e<256;e+=1)t=e.toString(16),n[e]=1===t.length?"0"+t:t;return function(e,t,r){return e<0&&(e=0),t<0&&(t=0),r<0&&(r=0),"#"+n[e]+n[t]+n[r]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e},getIdPrefix=function(){return idPrefix$1};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){return _typeof$5="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(e)}var dataManager=function(){var e,t,n=1,r=[],i={onmessage:function(){},postMessage:function(t){e({data:t})}},a={postMessage:function(e){i.onmessage({data:e})}};function s(){t||(t=function(t){if(window.Worker&&window.Blob&&getWebWorker()){var n=new Blob(["var _workerSelf = self; self.onmessage = ",t.toString()],{type:"text/javascript"}),r=URL.createObjectURL(n);return new Worker(r)}return e=t,i}((function(e){if(a.dataManager||(a.dataManager=function(){function e(i,a){var s,o,l,c,d,h,p=i.length;for(o=0;o<p;o+=1)if("ks"in(s=i[o])&&!s.completed){if(s.completed=!0,s.hasMask){var f=s.masksProperties;for(c=f.length,l=0;l<c;l+=1)if(f[l].pt.k.i)r(f[l].pt.k);else for(h=f[l].pt.k.length,d=0;d<h;d+=1)f[l].pt.k[d].s&&r(f[l].pt.k[d].s[0]),f[l].pt.k[d].e&&r(f[l].pt.k[d].e[0])}0===s.ty?(s.layers=t(s.refId,a),e(s.layers,a)):4===s.ty?n(s.shapes):5===s.ty&&u(s)}}function t(e,t){var n=function(e,t){for(var n=0,r=t.length;n<r;){if(t[n].id===e)return t[n];n+=1}return null}(e,t);return n?n.layers.__used?JSON.parse(JSON.stringify(n.layers)):(n.layers.__used=!0,n.layers):null}function n(e){var t,i,a;for(t=e.length-1;t>=0;t-=1)if("sh"===e[t].ty)if(e[t].ks.k.i)r(e[t].ks.k);else for(a=e[t].ks.k.length,i=0;i<a;i+=1)e[t].ks.k[i].s&&r(e[t].ks.k[i].s[0]),e[t].ks.k[i].e&&r(e[t].ks.k[i].e[0]);else"gr"===e[t].ty&&n(e[t].it)}function r(e){var t,n=e.i.length;for(t=0;t<n;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function i(e,t){var n=t?t.split("."):[100,100,100];return e[0]>n[0]||!(n[0]>e[0])&&(e[1]>n[1]||!(n[1]>e[1])&&(e[2]>n[2]||!(n[2]>e[2])&&null))}var a=function(){var e=[4,4,14];function t(e){var t=e.t.d;e.t.d={k:[{s:t,t:0}]}}function n(e){var n,r=e.length;for(n=0;n<r;n+=1)5===e[n].ty&&t(e[n])}return function(t){if(i(e,t.v)&&(n(t.layers),t.assets)){var r,a=t.assets.length;for(r=0;r<a;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}(),s=function(){var e=[4,7,99];return function(t){if(t.chars&&!i(e,t.v)){var r,a=t.chars.length;for(r=0;r<a;r+=1){var s=t.chars[r];s.data&&s.data.shapes&&(n(s.data.shapes),s.data.ip=0,s.data.op=99999,s.data.st=0,s.data.sr=1,s.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[r].t||(s.data.shapes.push({ty:"no"}),s.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),o=function(){var e=[5,7,15];function t(e){var t=e.t.p;"number"===typeof t.a&&(t.a={a:0,k:t.a}),"number"===typeof t.p&&(t.p={a:0,k:t.p}),"number"===typeof t.r&&(t.r={a:0,k:t.r})}function n(e){var n,r=e.length;for(n=0;n<r;n+=1)5===e[n].ty&&t(e[n])}return function(t){if(i(e,t.v)&&(n(t.layers),t.assets)){var r,a=t.assets.length;for(r=0;r<a;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}(),l=function(){var e=[4,1,9];function t(e){var n,r,i,a=e.length;for(n=0;n<a;n+=1)if("gr"===e[n].ty)t(e[n].it);else if("fl"===e[n].ty||"st"===e[n].ty)if(e[n].c.k&&e[n].c.k[0].i)for(i=e[n].c.k.length,r=0;r<i;r+=1)e[n].c.k[r].s&&(e[n].c.k[r].s[0]/=255,e[n].c.k[r].s[1]/=255,e[n].c.k[r].s[2]/=255,e[n].c.k[r].s[3]/=255),e[n].c.k[r].e&&(e[n].c.k[r].e[0]/=255,e[n].c.k[r].e[1]/=255,e[n].c.k[r].e[2]/=255,e[n].c.k[r].e[3]/=255);else e[n].c.k[0]/=255,e[n].c.k[1]/=255,e[n].c.k[2]/=255,e[n].c.k[3]/=255}function n(e){var n,r=e.length;for(n=0;n<r;n+=1)4===e[n].ty&&t(e[n].shapes)}return function(t){if(i(e,t.v)&&(n(t.layers),t.assets)){var r,a=t.assets.length;for(r=0;r<a;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}(),c=function(){var e=[4,4,18];function t(e){var n,r,i;for(n=e.length-1;n>=0;n-=1)if("sh"===e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(i=e[n].ks.k.length,r=0;r<i;r+=1)e[n].ks.k[r].s&&(e[n].ks.k[r].s[0].c=e[n].closed),e[n].ks.k[r].e&&(e[n].ks.k[r].e[0].c=e[n].closed);else"gr"===e[n].ty&&t(e[n].it)}function n(e){var n,r,i,a,s,o,l=e.length;for(r=0;r<l;r+=1){if((n=e[r]).hasMask){var c=n.masksProperties;for(a=c.length,i=0;i<a;i+=1)if(c[i].pt.k.i)c[i].pt.k.c=c[i].cl;else for(o=c[i].pt.k.length,s=0;s<o;s+=1)c[i].pt.k[s].s&&(c[i].pt.k[s].s[0].c=c[i].cl),c[i].pt.k[s].e&&(c[i].pt.k[s].e[0].c=c[i].cl)}4===n.ty&&t(n.shapes)}}return function(t){if(i(e,t.v)&&(n(t.layers),t.assets)){var r,a=t.assets.length;for(r=0;r<a;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}();function u(e){0===e.t.a.length&&e.t.p}var d={completeData:function(n){n.__complete||(l(n),a(n),s(n),o(n),c(n),e(n.layers,n.assets),function(n,r){if(n){var i=0,a=n.length;for(i=0;i<a;i+=1)1===n[i].t&&(n[i].data.layers=t(n[i].data.refId,r),e(n[i].data.layers,r))}}(n.chars,n.assets),n.__complete=!0)}};return d.checkColors=l,d.checkChars=s,d.checkPathProperties=o,d.checkShapes=c,d.completeLayers=e,d}()),a.assetLoader||(a.assetLoader=function(){function e(e){var t=e.getResponseHeader("content-type");return t&&"json"===e.responseType&&-1!==t.indexOf("json")||e.response&&"object"===_typeof$5(e.response)?e.response:e.response&&"string"===typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}return{load:function(t,n,r,i){var a,s=new XMLHttpRequest;try{s.responseType="json"}catch(o){}s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)a=e(s),r(a);else try{a=e(s),r(a)}catch(o){i&&i(o)}};try{s.open(["G","E","T"].join(""),t,!0)}catch(l){s.open(["G","E","T"].join(""),n+"/"+t,!0)}s.send()}}}()),"loadAnimation"===e.data.type)a.assetLoader.load(e.data.path,e.data.fullPath,(function(t){a.dataManager.completeData(t),a.postMessage({id:e.data.id,payload:t,status:"success"})}),(function(){a.postMessage({id:e.data.id,status:"error"})}));else if("complete"===e.data.type){var t=e.data.animation;a.dataManager.completeData(t),a.postMessage({id:e.data.id,payload:t,status:"success"})}else"loadData"===e.data.type&&a.assetLoader.load(e.data.path,e.data.fullPath,(function(t){a.postMessage({id:e.data.id,payload:t,status:"success"})}),(function(){a.postMessage({id:e.data.id,status:"error"})}))})),t.onmessage=function(e){var t=e.data,n=t.id,i=r[n];r[n]=null,"success"===t.status?i.onComplete(t.payload):i.onError&&i.onError()})}function o(e,t){var i="processId_"+(n+=1);return r[i]={onComplete:e,onError:t},i}return{loadAnimation:function(e,n,r){s();var i=o(n,r);t.postMessage({type:"loadAnimation",path:e,fullPath:window.location.origin+window.location.pathname,id:i})},loadData:function(e,n,r){s();var i=o(n,r);t.postMessage({type:"loadData",path:e,fullPath:window.location.origin+window.location.pathname,id:i})},completeAnimation:function(e,n,r){s();var i=o(n,r);t.postMessage({type:"complete",animation:e,id:i})}}}(),ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(e,t,n){var r="";if(e.e)r=e.p;else if(t){var i=e.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),r=t+i}else r=n,r+=e.u?e.u:"",r+=e.p;return r}function i(e){var t=0,n=setInterval(function(){(e.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(n)),t+=1}.bind(this),50)}function a(e){var t={assetData:e},n=r(e,this.assetsPath,this.path);return dataManager.loadData(n,function(e){t.img=e,this._footageLoaded()}.bind(this),function(){t.img={},this._footageLoaded()}.bind(this)),t}function s(){this._imageLoaded=t.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=i.bind(this),this.createFootageData=a.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return s.prototype={loadAssets:function(e,t){var n;this.imagesLoadedCb=t;var r=e.length;for(n=0;n<r;n+=1)e[n].layers||(e[n].t&&"seq"!==e[n].t?3===e[n].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[n]))):(this.totalImages+=1,this.images.push(this._createImageData(e[n]))))},setAssetsPath:function(e){this.assetsPath=e||""},setPath:function(e){this.path=e||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,n=this.images.length;t<n;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(t){var n=r(t,this.assetsPath,this.path),i=createTag("img");i.crossOrigin="anonymous",i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",function(){a.img=e,this._imageLoaded()}.bind(this),!1),i.src=n;var a={img:i,assetData:t};return a},createImageData:function(t){var n=r(t,this.assetsPath,this.path),i=createNS("image");isSafari?this.testImageLoaded(i):i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",function(){a.img=e,this._imageLoaded()}.bind(this),!1),i.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this._elementHelper.append?this._elementHelper.append(i):this._elementHelper.appendChild(i);var a={img:i,assetData:t};return a},imageLoaded:t,footageLoaded:n,setCacheType:function(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},s}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var n=this._cbs[e],r=0;r<n.length;r+=1)n[r](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var n=0,r=this._cbs[e].length;n<r;)this._cbs[e][n]===t&&(this._cbs[e].splice(n,1),n-=1,r-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var markerParser=function(){function e(e){for(var t,n=e.split("\r\n"),r={},i=0,a=0;a<n.length;a+=1)2===(t=n[a].split(":")).length&&(r[t[0]]=t[1].trim(),i+=1);if(0===i)throw new Error;return r}return function(t){for(var n=[],r=0;r<t.length;r+=1){var i=t[r],a={time:i.tm,duration:i.dr};try{a.payload=JSON.parse(t[r].cm)}catch(s){try{a.payload=e(t[r].cm)}catch(o){a.payload={name:t[r].cm}}}n.push(a)}return n}}(),ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,n=this.compositions.length;t<n;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),renderers={},registerRenderer=function(e,t){renderers[e]=t};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){return _typeof$4="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";e.animType?t=e.animType:e.renderer&&(t=e.renderer);var n=getRenderer(t);this.renderer=new n(this,e.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,t){t&&"object"!==_typeof$4(t)&&(t=JSON.parse(t));var n={wrapper:e,animationData:t},r=e.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var i=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===i?n.loop=!1:"true"===i?n.loop=!0:""!==i&&(n.loop=parseInt(i,10));var a=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;n.autoplay="false"!==a,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,n,r=this.animationData.layers,i=r.length,a=e.layers,s=a.length;for(n=0;n<s;n+=1)for(t=0;t<i;){if(r[t].id===a[n].id){r[t]=a[n];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(i=e.assets.length,t=0;t<i;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,t){var n="number"===typeof e?e:void 0,r="number"===typeof t?t:void 0;this.renderer.updateContainerSize(n,r)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,n=0;n<this.markers.length;n+=1)if((t=this.markers[n]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,n){if(!n||this.name===n){var r=Number(e);if(isNaN(r)){var i=this.getMarkerData(e);i&&this.goToAndStop(i.time,!0)}else t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,n){if(!n||this.name===n){var r=Number(e);if(isNaN(r)){var i=this.getMarkerData(e);i&&(i.duration?this.playSegments([i.time,i.time+i.duration],!0):this.goToAndStop(i.time,!0))}else this.goToAndStop(r,t,n);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,n=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(n=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),n&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?n=e:this.currentRawFrame+this.firstFrame>t&&(n=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"===_typeof$4(e[0])){var n,r=e.length;for(n=0;n<r;n+=1)this.segments.push(e[n])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,n=this.assets.length;t<n;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,t,n){try{this.renderer.getElementByPath(e).updateDocumentData(t,n)}catch(r){}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var e={},t=[],n=0,r=0,i=0,a=!0,s=!1;function o(e){for(var n=0,i=e.target;n<r;)t[n].animation===i&&(t.splice(n,1),n-=1,r-=1,i.isPaused||u()),n+=1}function l(e,n){if(!e)return null;for(var i=0;i<r;){if(t[i].elem===e&&null!==t[i].elem)return t[i].animation;i+=1}var a=new AnimationItem;return d(a,e),a.setData(e,n),a}function c(){i+=1,f()}function u(){i-=1}function d(e,n){e.addEventListener("destroy",o),e.addEventListener("_active",c),e.addEventListener("_idle",u),t.push({elem:n,animation:e}),r+=1}function h(e){var o,l=e-n;for(o=0;o<r;o+=1)t[o].animation.advanceTime(l);n=e,i&&!s?window.requestAnimationFrame(h):a=!0}function p(e){n=e,window.requestAnimationFrame(h)}function f(){!s&&i&&a&&(window.requestAnimationFrame(p),a=!1)}return e.registerAnimation=l,e.loadAnimation=function(e){var t=new AnimationItem;return d(t,null),t.setParams(e),t},e.setSpeed=function(e,n){var i;for(i=0;i<r;i+=1)t[i].animation.setSpeed(e,n)},e.setDirection=function(e,n){var i;for(i=0;i<r;i+=1)t[i].animation.setDirection(e,n)},e.play=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.play(e)},e.pause=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.pause(e)},e.stop=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.stop(e)},e.togglePause=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.togglePause(e)},e.searchAnimations=function(e,t,n){var r,i=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),a=i.length;for(r=0;r<a;r+=1)n&&i[r].setAttribute("data-bm-type",n),l(i[r],e);if(t&&0===a){n||(n="svg");var s=document.getElementsByTagName("body")[0];s.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",n),s.appendChild(o),l(o,e)}},e.resize=function(){var e;for(e=0;e<r;e+=1)t[e].animation.resize()},e.goToAndStop=function(e,n,i){var a;for(a=0;a<r;a+=1)t[a].animation.goToAndStop(e,n,i)},e.destroy=function(e){var n;for(n=r-1;n>=0;n-=1)t[n].animation.destroy(e)},e.freeze=function(){s=!0},e.unfreeze=function(){s=!1,f()},e.setVolume=function(e,n){var i;for(i=0;i<r;i+=1)t[i].animation.setVolume(e,n)},e.mute=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.mute(e)},e.unmute=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.unmute(e)},e.getRegisteredAnimations=function(){var e,n=t.length,r=[];for(e=0;e<n;e+=1)r.push(t[e].animation);return r},e}(),BezierFactory=function(){var e={getBezierEasing:function(e,n,r,i,a){var s=a||("bez_"+e+"_"+n+"_"+r+"_"+i).replace(/\./g,"p");if(t[s])return t[s];var o=new u([e,n,r,i]);return t[s]=o,o}},t={},n=11,r=1/(n-1),i="function"===typeof Float32Array;function a(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function o(e){return 3*e}function l(e,t,n){return((a(t,n)*e+s(t,n))*e+o(t))*e}function c(e,t,n){return 3*a(t,n)*e*e+2*s(t,n)*e+o(t)}function u(e){this._p=e,this._mSampleValues=i?new Float32Array(n):new Array(n),this._precomputed=!1,this.get=this.get.bind(this)}return u.prototype={get:function(e){var t=this._p[0],n=this._p[1],r=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),t===n&&r===i?e:0===e?0:1===e?1:l(this._getTForX(e),n,i)},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,e===t&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],i=0;i<n;++i)this._mSampleValues[i]=l(i*r,e,t)},_getTForX:function(e){for(var t=this._p[0],i=this._p[2],a=this._mSampleValues,s=0,o=1,u=n-1;o!==u&&a[o]<=e;++o)s+=r;var d=s+(e-a[--o])/(a[o+1]-a[o])*r,h=c(d,t,i);return h>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var a=c(t,n,r);if(0===a)return t;t-=(l(t,n,r)-e)/a}return t}(e,d,t,i):0===h?d:function(e,t,n,r,i){var a,s,o=0;do{(a=l(s=t+(n-t)/2,r,i)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++o<10);return s}(e,s,s+r,t,i)}},e}(),pooling={double:function(e){return e.concat(createSizedArray(e.length))}},poolFactory=function(e,t,n){var r=0,i=e,a=createSizedArray(i);return{newElement:function(){return r?a[r-=1]:t()},release:function(e){r===i&&(a=pooling.double(a),i*=2),n&&n(e),a[r]=e,r+=1}}},bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(e){var t,n=e.lengths.length;for(t=0;t<n;t+=1)bezierLengthPool.release(e.lengths[t]);e.lengths.length=0}));function bezFunction(){var e=Math;function t(e,t,n,r,i,a){var s=e*r+t*i+n*a-i*r-a*e-n*t;return s>-.001&&s<.001}var n=function(e,t,n,r){var i,a,s,o,l,c,u=getDefaultCurveSegments(),d=0,h=[],p=[],f=bezierLengthPool.newElement();for(s=n.length,i=0;i<u;i+=1){for(l=i/(u-1),c=0,a=0;a<s;a+=1)o=bmPow(1-l,3)*e[a]+3*bmPow(1-l,2)*l*n[a]+3*(1-l)*bmPow(l,2)*r[a]+bmPow(l,3)*t[a],h[a]=o,null!==p[a]&&(c+=bmPow(h[a]-p[a],2)),p[a]=h[a];c&&(d+=c=bmSqrt(c)),f.percents[i]=l,f.lengths[i]=d}return f.addedLength=d,f};function r(e){this.segmentLength=0,this.points=new Array(e)}function i(e,t){this.partialLength=e,this.point=t}var a=function(){var e={};return function(n,a,s,o){var l=(n[0]+"_"+n[1]+"_"+a[0]+"_"+a[1]+"_"+s[0]+"_"+s[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!e[l]){var c,u,d,h,p,f,m,g=getDefaultCurveSegments(),v=0,y=null;2===n.length&&(n[0]!==a[0]||n[1]!==a[1])&&t(n[0],n[1],a[0],a[1],n[0]+s[0],n[1]+s[1])&&t(n[0],n[1],a[0],a[1],a[0]+o[0],a[1]+o[1])&&(g=2);var x=new r(g);for(d=s.length,c=0;c<g;c+=1){for(m=createSizedArray(d),p=c/(g-1),f=0,u=0;u<d;u+=1)h=bmPow(1-p,3)*n[u]+3*bmPow(1-p,2)*p*(n[u]+s[u])+3*(1-p)*bmPow(p,2)*(a[u]+o[u])+bmPow(p,3)*a[u],m[u]=h,null!==y&&(f+=bmPow(m[u]-y[u],2));v+=f=bmSqrt(f),x.points[c]=new i(f,m),y=m}x.segmentLength=v,e[l]=x}return e[l]}}();function s(e,t){var n=t.percents,r=t.lengths,i=n.length,a=bmFloor((i-1)*e),s=e*t.addedLength,o=0;if(a===i-1||0===a||s===r[a])return n[a];for(var l=r[a]>s?-1:1,c=!0;c;)if(r[a]<=s&&r[a+1]>s?(o=(s-r[a])/(r[a+1]-r[a]),c=!1):a+=l,a<0||a>=i-1){if(a===i-1)return n[a];c=!1}return n[a]+(n[a+1]-n[a])*o}var o=createTypedArray("float32",8);return{getSegmentsLength:function(e){var t,r=segmentsLengthPool.newElement(),i=e.c,a=e.v,s=e.o,o=e.i,l=e._length,c=r.lengths,u=0;for(t=0;t<l-1;t+=1)c[t]=n(a[t],a[t+1],s[t],o[t+1]),u+=c[t].addedLength;return i&&l&&(c[t]=n(a[t],a[0],s[t],o[0]),u+=c[t].addedLength),r.totalLength=u,r},getNewSegment:function(t,n,r,i,a,l,c){a<0?a=0:a>1&&(a=1);var u,d=s(a,c),h=s(l=l>1?1:l,c),p=t.length,f=1-d,m=1-h,g=f*f*f,v=d*f*f*3,y=d*d*f*3,x=d*d*d,b=f*f*m,w=d*f*m+f*d*m+f*f*h,S=d*d*m+f*d*h+d*f*h,_=d*d*h,A=f*m*m,E=d*m*m+f*h*m+f*m*h,C=d*h*m+f*h*h+d*m*h,M=d*h*h,T=m*m*m,k=h*m*m+m*h*m+m*m*h,P=h*h*m+m*h*h+h*m*h,R=h*h*h;for(u=0;u<p;u+=1)o[4*u]=e.round(1e3*(g*t[u]+v*r[u]+y*i[u]+x*n[u]))/1e3,o[4*u+1]=e.round(1e3*(b*t[u]+w*r[u]+S*i[u]+_*n[u]))/1e3,o[4*u+2]=e.round(1e3*(A*t[u]+E*r[u]+C*i[u]+M*n[u]))/1e3,o[4*u+3]=e.round(1e3*(T*t[u]+k*r[u]+P*i[u]+R*n[u]))/1e3;return o},getPointInSegment:function(t,n,r,i,a,o){var l=s(a,o),c=1-l;return[e.round(1e3*(c*c*c*t[0]+(l*c*c+c*l*c+c*c*l)*r[0]+(l*l*c+c*l*l+l*c*l)*i[0]+l*l*l*n[0]))/1e3,e.round(1e3*(c*c*c*t[1]+(l*c*c+c*l*c+c*c*l)*r[1]+(l*l*c+c*l*l+l*c*l)*i[1]+l*l*l*n[1]))/1e3]},buildBezierData:a,pointOnLine2D:t,pointOnLine3D:function(n,r,i,a,s,o,l,c,u){if(0===i&&0===o&&0===u)return t(n,r,a,s,l,c);var d,h=e.sqrt(e.pow(a-n,2)+e.pow(s-r,2)+e.pow(o-i,2)),p=e.sqrt(e.pow(l-n,2)+e.pow(c-r,2)+e.pow(u-i,2)),f=e.sqrt(e.pow(l-a,2)+e.pow(c-s,2)+e.pow(u-o,2));return(d=h>p?h>f?h-p-f:f-p-h:f>p?f-p-h:p-h-f)>-1e-4&&d<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,t){var n,r=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var i,a,s,o,l,c,u,d,h,p=t.lastIndex,f=p,m=this.keyframes.length-1,g=!0;g;){if(i=this.keyframes[f],a=this.keyframes[f+1],f===m-1&&e>=a.t-r){i.h&&(i=a),p=0;break}if(a.t-r>e){p=f;break}f<m-1?f+=1:(p=0,g=!1)}s=this.keyframesMetadata[f]||{};var v,y=a.t-r,x=i.t-r;if(i.to){s.bezierData||(s.bezierData=bez.buildBezierData(i.s,a.s||i.e,i.to,i.ti));var b=s.bezierData;if(e>=y||e<x){var w=e>=y?b.points.length-1:0;for(l=b.points[w].point.length,o=0;o<l;o+=1)n[o]=b.points[w].point[o]}else{s.__fnct?h=s.__fnct:(h=BezierFactory.getBezierEasing(i.o.x,i.o.y,i.i.x,i.i.y,i.n).get,s.__fnct=h),c=h((e-x)/(y-x));var S,_=b.segmentLength*c,A=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastAddedLength:0;for(d=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastPoint:0,g=!0,u=b.points.length;g;){if(A+=b.points[d].partialLength,0===_||0===c||d===b.points.length-1){for(l=b.points[d].point.length,o=0;o<l;o+=1)n[o]=b.points[d].point[o];break}if(_>=A&&_<A+b.points[d+1].partialLength){for(S=(_-A)/b.points[d+1].partialLength,l=b.points[d].point.length,o=0;o<l;o+=1)n[o]=b.points[d].point[o]+(b.points[d+1].point[o]-b.points[d].point[o])*S;break}d<u-1?d+=1:g=!1}t._lastPoint=d,t._lastAddedLength=A-b.points[d].partialLength,t._lastKeyframeIndex=f}}else{var E,C,M,T,k;if(m=i.s.length,v=a.s||i.e,this.sh&&1!==i.h)e>=y?(n[0]=v[0],n[1]=v[1],n[2]=v[2]):e<=x?(n[0]=i.s[0],n[1]=i.s[1],n[2]=i.s[2]):quaternionToEuler(n,slerp(createQuaternion(i.s),createQuaternion(v),(e-x)/(y-x)));else for(f=0;f<m;f+=1)1!==i.h&&(e>=y?c=1:e<x?c=0:(i.o.x.constructor===Array?(s.__fnct||(s.__fnct=[]),s.__fnct[f]?h=s.__fnct[f]:(E=void 0===i.o.x[f]?i.o.x[0]:i.o.x[f],C=void 0===i.o.y[f]?i.o.y[0]:i.o.y[f],M=void 0===i.i.x[f]?i.i.x[0]:i.i.x[f],T=void 0===i.i.y[f]?i.i.y[0]:i.i.y[f],h=BezierFactory.getBezierEasing(E,C,M,T).get,s.__fnct[f]=h)):s.__fnct?h=s.__fnct:(E=i.o.x,C=i.o.y,M=i.i.x,T=i.i.y,h=BezierFactory.getBezierEasing(E,C,M,T).get,i.keyframeMetadata=h),c=h((e-x)/(y-x)))),v=a.s||i.e,k=1===i.h?i.s[f]:i.s[f]+(v[f]-i.s[f])*c,"multidimensional"===this.propType?n[f]=k:n=k}return t.lastIndex=p,n}function slerp(e,t,n){var r,i,a,s,o,l=[],c=e[0],u=e[1],d=e[2],h=e[3],p=t[0],f=t[1],m=t[2],g=t[3];return(i=c*p+u*f+d*m+h*g)<0&&(i=-i,p=-p,f=-f,m=-m,g=-g),1-i>1e-6?(r=Math.acos(i),a=Math.sin(r),s=Math.sin((1-n)*r)/a,o=Math.sin(n*r)/a):(s=1-n,o=n),l[0]=s*c+o*p,l[1]=s*u+o*f,l[2]=s*d+o*m,l[3]=s*h+o*g,l}function quaternionToEuler(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=Math.atan2(2*r*a-2*n*i,1-2*r*r-2*i*i),o=Math.asin(2*n*r+2*i*a),l=Math.atan2(2*n*a-2*r*i,1-2*n*n-2*i*i);e[0]=s/degToRads,e[1]=o/degToRads,e[2]=l/degToRads}function createQuaternion(e){var t=e[0]*degToRads,n=e[1]*degToRads,r=e[2]*degToRads,i=Math.cos(t/2),a=Math.cos(n/2),s=Math.cos(r/2),o=Math.sin(t/2),l=Math.sin(n/2),c=Math.sin(r/2);return[o*l*s+i*a*c,o*a*s+i*l*c,i*l*s-o*a*c,i*a*s-o*l*c]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&e>=n||this._caching.lastFrame<t&&e<t))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var r=this.interpolateValue(e,this._caching);this.pv=r}return this._caching.lastFrame=e,this.pv}function setVValue(e){var t;if("unidimensional"===this.propType)t=e*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var n=0,r=this.v.length;n<r;)t=e[n]*this.mult,mathAbs(this.v[n]-t)>1e-5&&(this.v[n]=t,this._mdf=!0),n+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)n=this.effectsSequence[e](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,t,n,r){this.propType="unidimensional",this.mult=n||1,this.data=t,this.v=n?t.k*n:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,t,n,r){var i;this.propType="multidimensional",this.mult=n||1,this.data=t,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var a=t.k.length;for(this.v=createTypedArray("float32",a),this.pv=createTypedArray("float32",a),this.vel=createTypedArray("float32",a),i=0;i<a;i+=1)this.v[i]=t.k[i]*this.mult,this.pv[i]=t.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,t,n,r){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=n||1,this.elem=e,this.container=r,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,t,n,r){var i;this.propType="multidimensional";var a,s,o,l,c=t.k.length;for(i=0;i<c-1;i+=1)t.k[i].to&&t.k[i].s&&t.k[i+1]&&t.k[i+1].s&&(a=t.k[i].s,s=t.k[i+1].s,o=t.k[i].to,l=t.k[i].ti,(2===a.length&&(a[0]!==s[0]||a[1]!==s[1])&&bez.pointOnLine2D(a[0],a[1],s[0],s[1],a[0]+o[0],a[1]+o[1])&&bez.pointOnLine2D(a[0],a[1],s[0],s[1],s[0]+l[0],s[1]+l[1])||3===a.length&&(a[0]!==s[0]||a[1]!==s[1]||a[2]!==s[2])&&bez.pointOnLine3D(a[0],a[1],a[2],s[0],s[1],s[2],a[0]+o[0],a[1]+o[1],a[2]+o[2])&&bez.pointOnLine3D(a[0],a[1],a[2],s[0],s[1],s[2],s[0]+l[0],s[1]+l[1],s[2]+l[2]))&&(t.k[i].to=null,t.k[i].ti=null),a[0]===s[0]&&a[1]===s[1]&&0===o[0]&&0===o[1]&&0===l[0]&&0===l[1]&&(2===a.length||a[2]===s[2]&&0===o[2]&&0===l[2])&&(t.k[i].to=null,t.k[i].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=e,this.container=r,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var u=t.k[0].s.length;for(this.v=createTypedArray("float32",u),this.pv=createTypedArray("float32",u),i=0;i<u;i+=1)this.v[i]=initFrame,this.pv[i]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",u)},this.addEffect=addEffect}var PropertyFactory={getProp:function(e,t,n,r,i){var a;if(t.sid&&(t=e.globalData.slotManager.getProp(t)),t.k.length)if("number"===typeof t.k[0])a=new MultiDimensionalProperty(e,t,r,i);else switch(n){case 0:a=new KeyframedValueProperty(e,t,r,i);break;case 1:a=new KeyframedMultidimensionalProperty(e,t,r,i)}else a=new ValueProperty(e,t,r,i);return a.effectsSequence.length&&i.addDynamicProperty(a),a}};function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var e;this._mdf=!1;var t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)}));function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var n=0;n<t;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,n,r,i){var a;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break;default:a=[]}(!a[r]||a[r]&&!i)&&(a[r]=pointPool.newElement()),a[r][0]=e,a[r][1]=t},ShapePath.prototype.setTripleAt=function(e,t,n,r,i,a,s,o){this.setXYAt(e,t,"v",s,o),this.setXYAt(n,r,"o",s,o),this.setXYAt(i,a,"i",s,o)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,n=this.o,r=this.i,i=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),i=1);var a,s=this._length-1,o=this._length;for(a=i;a<o;a+=1)e.setTripleAt(t[s][0],t[s][1],r[s][0],r[s][1],n[s][0],n[s][1],a,!1),s-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){var e=poolFactory(4,(function(){return new ShapePath}),(function(e){var t,n=e._length;for(t=0;t<n;t+=1)pointPool.release(e.v[t]),pointPool.release(e.i[t]),pointPool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1}));return e.clone=function(t){var n,r=e.newElement(),i=void 0===t._length?t.v.length:t._length;for(r.setLength(i),r.c=t.c,n=0;n<i;n+=1)r.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],n);return r},e}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=function(){var e={newShapeCollection:function(){return t?r[t-=1]:new ShapeCollection},release:function(e){var i,a=e._length;for(i=0;i<a;i+=1)shapePool.release(e.shapes[i]);e._length=0,t===n&&(r=pooling.double(r),n*=2),r[t]=e,t+=1}},t=0,n=4,r=createSizedArray(n);return e}(),ShapePropertyFactory=function(){var e=-999999;function t(e,t,n){var r,i,a,s,o,l,c,u,d,h=n.lastIndex,p=this.keyframes;if(e<p[0].t-this.offsetTime)r=p[0].s[0],a=!0,h=0;else if(e>=p[p.length-1].t-this.offsetTime)r=p[p.length-1].s?p[p.length-1].s[0]:p[p.length-2].e[0],a=!0;else{for(var f,m,g,v=h,y=p.length-1,x=!0;x&&(f=p[v],!((m=p[v+1]).t-this.offsetTime>e));)v<y-1?v+=1:x=!1;if(g=this.keyframesMetadata[v]||{},h=v,!(a=1===f.h)){if(e>=m.t-this.offsetTime)u=1;else if(e<f.t-this.offsetTime)u=0;else{var b;g.__fnct?b=g.__fnct:(b=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,g.__fnct=b),u=b((e-(f.t-this.offsetTime))/(m.t-this.offsetTime-(f.t-this.offsetTime)))}i=m.s?m.s[0]:f.e[0]}r=f.s[0]}for(l=t._length,c=r.i[0].length,n.lastIndex=h,s=0;s<l;s+=1)for(o=0;o<c;o+=1)d=a?r.i[s][o]:r.i[s][o]+(i.i[s][o]-r.i[s][o])*u,t.i[s][o]=d,d=a?r.o[s][o]:r.o[s][o]+(i.o[s][o]-r.o[s][o])*u,t.o[s][o]=d,d=a?r.v[s][o]:r.v[s][o]+(i.v[s][o]-r.v[s][o])*u,t.v[s][o]=d}function n(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=this._caching.lastFrame;return i!==e&&(i<n&&t<n||i>r&&t>r)||(this._caching.lastIndex=i<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function r(){this.paths=this.localShapeCollection}function i(e){(function(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var n,r=e._length;for(n=0;n<r;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return!1;return!0})(this.v,e)||(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function a(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e,t;this.lock=!0,this._mdf=!1,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var n=this.effectsSequence.length;for(t=0;t<n;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function s(e,t,n){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var i=3===n?t.pt.k:t.ks.k;this.v=shapePool.clone(i),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function o(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function l(t,i,a){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===a?i.pt.k:i.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var s=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,s),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=r,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[n.bind(this)]}s.prototype.interpolateShape=t,s.prototype.getValue=a,s.prototype.setVValue=i,s.prototype.addEffect=o,l.prototype.getValue=a,l.prototype.interpolateShape=t,l.prototype.setVValue=i,l.prototype.addEffect=o;var c=function(){var e=roundCorner;function t(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,a=3!==this.d,s=this.v;s.v[0][0]=t,s.v[0][1]=n-i,s.v[1][0]=a?t+r:t-r,s.v[1][1]=n,s.v[2][0]=t,s.v[2][1]=n+i,s.v[3][0]=a?t-r:t+r,s.v[3][1]=n,s.i[0][0]=a?t-r*e:t+r*e,s.i[0][1]=n-i,s.i[1][0]=a?t+r:t-r,s.i[1][1]=n-i*e,s.i[2][0]=a?t+r*e:t-r*e,s.i[2][1]=n+i,s.i[3][0]=a?t-r:t+r,s.i[3][1]=n+i*e,s.o[0][0]=a?t+r*e:t-r*e,s.o[0][1]=n-i,s.o[1][0]=a?t+r:t-r,s.o[1][1]=n+i*e,s.o[2][0]=a?t-r*e:t+r*e,s.o[2][1]=n+i,s.o[3][0]=a?t-r:t+r,s.o[3][1]=n-i*e}},extendPrototype([DynamicPropertyContainer],t),t}(),u=function(){function e(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,n,r,i=2*Math.floor(this.pt.v),a=2*Math.PI/i,s=!0,o=this.or.v,l=this.ir.v,c=this.os.v,u=this.is.v,d=2*Math.PI*o/(2*i),h=2*Math.PI*l/(2*i),p=-Math.PI/2;p+=this.r.v;var f=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<i;e+=1){n=s?c:u,r=s?d:h;var m=(t=s?o:l)*Math.cos(p),g=t*Math.sin(p),v=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),y=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(m,g,m-v*r*n*f,g-y*r*n*f,m+v*r*n*f,g+y*r*n*f,e,!0),s=!s,p+=a*f}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),n=2*Math.PI/t,r=this.or.v,i=this.os.v,a=2*Math.PI*r/(4*t),s=.5*-Math.PI,o=3===this.data.d?-1:1;for(s+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var l=r*Math.cos(s),c=r*Math.sin(s),u=0===l&&0===c?0:c/Math.sqrt(l*l+c*c),d=0===l&&0===c?0:-l/Math.sqrt(l*l+c*c);l+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(l,c,l-u*a*i*o,c-d*a*i*o,l+u*a*i*o,c+d*a*i*o,e,!0),s+=n*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),d=function(){function e(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,i=bmMin(n,r,this.r.v),a=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+n,t-r+i,e+n,t-r+i,e+n,t-r+a,0,!0),this.v.setTripleAt(e+n,t+r-i,e+n,t+r-a,e+n,t+r-i,1,!0),0!==i?(this.v.setTripleAt(e+n-i,t+r,e+n-i,t+r,e+n-a,t+r,2,!0),this.v.setTripleAt(e-n+i,t+r,e-n+a,t+r,e-n+i,t+r,3,!0),this.v.setTripleAt(e-n,t+r-i,e-n,t+r-i,e-n,t+r-a,4,!0),this.v.setTripleAt(e-n,t-r+i,e-n,t-r+a,e-n,t-r+i,5,!0),this.v.setTripleAt(e-n+i,t-r,e-n+i,t-r,e-n+a,t-r,6,!0),this.v.setTripleAt(e+n-i,t-r,e+n-a,t-r,e+n-i,t-r,7,!0)):(this.v.setTripleAt(e-n,t+r,e-n+a,t+r,e-n,t+r,2),this.v.setTripleAt(e-n,t-r,e-n,t-r+a,e-n,t-r,3))):(this.v.setTripleAt(e+n,t-r+i,e+n,t-r+a,e+n,t-r+i,0,!0),0!==i?(this.v.setTripleAt(e+n-i,t-r,e+n-i,t-r,e+n-a,t-r,1,!0),this.v.setTripleAt(e-n+i,t-r,e-n+a,t-r,e-n+i,t-r,2,!0),this.v.setTripleAt(e-n,t-r+i,e-n,t-r+i,e-n,t-r+a,3,!0),this.v.setTripleAt(e-n,t+r-i,e-n,t+r-a,e-n,t+r-i,4,!0),this.v.setTripleAt(e-n+i,t+r,e-n+i,t+r,e-n+a,t+r,5,!0),this.v.setTripleAt(e+n-i,t+r,e+n-a,t+r,e+n-i,t+r,6,!0),this.v.setTripleAt(e+n,t+r-i,e+n,t+r-i,e+n,t+r-a,7,!0)):(this.v.setTripleAt(e-n,t-r,e-n+a,t-r,e-n,t-r,1,!0),this.v.setTripleAt(e-n,t+r,e-n,t+r-a,e-n,t+r,2,!0),this.v.setTripleAt(e+n,t+r,e+n-a,t+r,e+n,t+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],e),e}(),h={getShapeProp:function(e,t,n){var r;return 3===n||4===n?r=(3===n?t.pt:t.ks).k.length?new l(e,t,n):new s(e,t,n):5===n?r=new d(e,t):6===n?r=new c(e,t):7===n&&(r=new u(e,t)),r.k&&e.addDynamicProperty(r),r},getConstructorFunction:function(){return s},getKeyframedConstructorFunction:function(){return l}};return h}(),Matrix=function(){var e=Math.cos,t=Math.sin,n=Math.tan,r=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function a(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function s(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1)}function o(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1)}function l(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function c(e,t){return this._t(1,t,e,1,0,0)}function u(e,t){return this.shear(n(e),n(t))}function d(r,i){var a=e(i),s=t(i);return this._t(a,s,0,0,-s,a,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(a,-s,0,0,s,a,0,0,0,0,1,0,0,0,0,1)}function h(e,t,n){return n||0===n||(n=1),1===e&&1===t&&1===n?this:this._t(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)}function p(e,t,n,r,i,a,s,o,l,c,u,d,h,p,f,m){return this.props[0]=e,this.props[1]=t,this.props[2]=n,this.props[3]=r,this.props[4]=i,this.props[5]=a,this.props[6]=s,this.props[7]=o,this.props[8]=l,this.props[9]=c,this.props[10]=u,this.props[11]=d,this.props[12]=h,this.props[13]=p,this.props[14]=f,this.props[15]=m,this}function f(e,t,n){return n=n||0,0!==e||0!==t||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1):this}function m(e,t,n,r,i,a,s,o,l,c,u,d,h,p,f,m){var g=this.props;if(1===e&&0===t&&0===n&&0===r&&0===i&&1===a&&0===s&&0===o&&0===l&&0===c&&1===u&&0===d)return g[12]=g[12]*e+g[15]*h,g[13]=g[13]*a+g[15]*p,g[14]=g[14]*u+g[15]*f,g[15]*=m,this._identityCalculated=!1,this;var v=g[0],y=g[1],x=g[2],b=g[3],w=g[4],S=g[5],_=g[6],A=g[7],E=g[8],C=g[9],M=g[10],T=g[11],k=g[12],P=g[13],R=g[14],D=g[15];return g[0]=v*e+y*i+x*l+b*h,g[1]=v*t+y*a+x*c+b*p,g[2]=v*n+y*s+x*u+b*f,g[3]=v*r+y*o+x*d+b*m,g[4]=w*e+S*i+_*l+A*h,g[5]=w*t+S*a+_*c+A*p,g[6]=w*n+S*s+_*u+A*f,g[7]=w*r+S*o+_*d+A*m,g[8]=E*e+C*i+M*l+T*h,g[9]=E*t+C*a+M*c+T*p,g[10]=E*n+C*s+M*u+T*f,g[11]=E*r+C*o+M*d+T*m,g[12]=k*e+P*i+R*l+D*h,g[13]=k*t+P*a+R*c+D*p,g[14]=k*n+P*s+R*u+D*f,g[15]=k*r+P*o+R*d+D*m,this._identityCalculated=!1,this}function g(e){var t=e.props;return this.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function v(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function y(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function x(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function b(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function w(e,t,n){return{x:e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}}function S(e,t,n){return e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12]}function _(e,t,n){return e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13]}function A(e,t,n){return e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}function E(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,n=-this.props[1]/e,r=-this.props[4]/e,i=this.props[0]/e,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,s=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,o=new Matrix;return o.props[0]=t,o.props[1]=n,o.props[4]=r,o.props[5]=i,o.props[12]=a,o.props[13]=s,o}function C(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function M(e){var t,n=e.length,r=[];for(t=0;t<n;t+=1)r[t]=C(e[t]);return r}function T(e,t,n){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=e[0],r[1]=e[1],r[2]=t[0],r[3]=t[1],r[4]=n[0],r[5]=n[1];else{var i=this.props[0],a=this.props[1],s=this.props[4],o=this.props[5],l=this.props[12],c=this.props[13];r[0]=e[0]*i+e[1]*s+l,r[1]=e[0]*a+e[1]*o+c,r[2]=t[0]*i+t[1]*s+l,r[3]=t[0]*a+t[1]*o+c,r[4]=n[0]*i+n[1]*s+l,r[5]=n[0]*a+n[1]*o+c}return r}function k(e,t,n){return this.isIdentity()?[e,t,n]:[e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]]}function P(e,t){if(this.isIdentity())return e+","+t;var n=this.props;return Math.round(100*(e*n[0]+t*n[4]+n[12]))/100+","+Math.round(100*(e*n[1]+t*n[5]+n[13]))/100}function R(){for(var e=0,t=this.props,n="matrix3d(";e<16;)n+=r(1e4*t[e])/1e4,n+=15===e?")":",",e+=1;return n}function D(e){return e<1e-6&&e>0||e>-1e-6&&e<0?r(1e4*e)/1e4:e}function I(){var e=this.props;return"matrix("+D(e[0])+","+D(e[1])+","+D(e[4])+","+D(e[5])+","+D(e[12])+","+D(e[13])+")"}return function(){this.reset=i,this.rotate=a,this.rotateX=s,this.rotateY=o,this.rotateZ=l,this.skew=u,this.skewFromAxis=d,this.shear=c,this.scale=h,this.setTransform=p,this.translate=f,this.transform=m,this.multiply=g,this.applyToPoint=w,this.applyToX=S,this.applyToY=_,this.applyToZ=A,this.applyToPointArray=k,this.applyToTriplePoints=T,this.applyToPointStringified=P,this.toCSS=R,this.to2dCSS=I,this.clone=x,this.cloneFromProps=b,this.equals=y,this.inversePoints=M,this.inversePoint=C,this.getInverseMatrix=E,this._t=this.transform,this.isIdentity=v,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){return _typeof$3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(e)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(e){setLocationHref(e)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function setQuality(e){if("string"===typeof e)switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!==typeof navigator}function installPlugin(e,t){"expressions"===e&&setExpressionsPlugin(t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),n=0;n<t.length;n+=1){var r=t[n].split("=");if(decodeURIComponent(r[0])==e)return decodeURIComponent(r[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&__webpack_require__.amdO}catch(err){}var ShapeModifiers=function(){var e={},t={};return e.registerModifier=function(e,n){t[e]||(t[e]=n)},e.getModifier=function(e,n,r){return new t[e](n,r)},e}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,n,r,i){var a=[];t<=1?a.push({s:e,e:t}):e>=1?a.push({s:e-1,e:t-1}):(a.push({s:e,e:1}),a.push({s:0,e:t-1}));var s,o,l=[],c=a.length;for(s=0;s<c;s+=1){var u,d;(o=a[s]).e*i<r||o.s*i>r+n||(u=o.s*i<=r?0:(o.s*i-r)/n,d=o.e*i>=r+n?1:(o.e*i-r)/n,l.push([u,d]))}return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(e){var t,n=e.length;for(t=0;t<n;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,n,r,i;if(this._mdf||e){var a=this.o.v%360/360;if(a<0&&(a+=1),(t=this.s.v>1?1+a:this.s.v<0?0+a:this.s.v+a)>(n=this.e.v>1?1+a:this.e.v<0?0+a:this.e.v+a)){var s=t;t=n,n=s}t=1e-4*Math.round(1e4*t),n=1e-4*Math.round(1e4*n),this.sValue=t,this.eValue=n}else t=this.sValue,n=this.eValue;var o,l,c,u,d,h=this.shapes.length,p=0;if(n===t)for(i=0;i<h;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape._mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection,this._mdf&&(this.shapes[i].pathsData.length=0);else if(1===n&&0===t||0===n&&1===t){if(this._mdf)for(i=0;i<h;i+=1)this.shapes[i].pathsData.length=0,this.shapes[i].shape._mdf=!0}else{var f,m,g=[];for(i=0;i<h;i+=1)if((f=this.shapes[i]).shape._mdf||this._mdf||e||2===this.m){if(l=(r=f.shape.paths)._length,d=0,!f.shape._mdf&&f.pathsData.length)d=f.totalShapeLength;else{for(c=this.releasePathsData(f.pathsData),o=0;o<l;o+=1)u=bez.getSegmentsLength(r.shapes[o]),c.push(u),d+=u.totalLength;f.totalShapeLength=d,f.pathsData=c}p+=d,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var v,y=t,x=n,b=0;for(i=h-1;i>=0;i-=1)if((f=this.shapes[i]).shape._mdf){for((m=f.localShapeCollection).releaseShapes(),2===this.m&&h>1?(v=this.calculateShapeEdges(t,n,f.totalShapeLength,b,p),b+=f.totalShapeLength):v=[[y,x]],l=v.length,o=0;o<l;o+=1){y=v[o][0],x=v[o][1],g.length=0,x<=1?g.push({s:f.totalShapeLength*y,e:f.totalShapeLength*x}):y>=1?g.push({s:f.totalShapeLength*(y-1),e:f.totalShapeLength*(x-1)}):(g.push({s:f.totalShapeLength*y,e:f.totalShapeLength}),g.push({s:0,e:f.totalShapeLength*(x-1)}));var w=this.addShapes(f,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(f.shape.paths.shapes[f.shape.paths._length-1].c){var S=w.pop();this.addPaths(w,m),w=this.addShapes(f,g[1],S)}else this.addPaths(w,m),w=this.addShapes(f,g[1]);this.addPaths(w,m)}}f.shape.paths=m}}},TrimModifier.prototype.addPaths=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,n,r,i,a,s){i.setXYAt(t[0],t[1],"o",a),i.setXYAt(n[0],n[1],"i",a+1),s&&i.setXYAt(e[0],e[1],"v",a),i.setXYAt(r[0],r[1],"v",a+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,n,r){t.setXYAt(e[1],e[5],"o",n),t.setXYAt(e[2],e[6],"i",n+1),r&&t.setXYAt(e[0],e[4],"v",n),t.setXYAt(e[3],e[7],"v",n+1)},TrimModifier.prototype.addShapes=function(e,t,n){var r,i,a,s,o,l,c,u,d=e.pathsData,h=e.shape.paths.shapes,p=e.shape.paths._length,f=0,m=[],g=!0;for(n?(o=n._length,u=n._length):(n=shapePool.newElement(),o=0,u=0),m.push(n),r=0;r<p;r+=1){for(l=d[r].lengths,n.c=h[r].c,a=h[r].c?l.length:l.length+1,i=1;i<a;i+=1)if(f+(s=l[i-1]).addedLength<t.s)f+=s.addedLength,n.c=!1;else{if(f>t.e){n.c=!1;break}t.s<=f&&t.e>=f+s.addedLength?(this.addSegment(h[r].v[i-1],h[r].o[i-1],h[r].i[i],h[r].v[i],n,o,g),g=!1):(c=bez.getNewSegment(h[r].v[i-1],h[r].v[i],h[r].o[i-1],h[r].i[i],(t.s-f)/s.addedLength,(t.e-f)/s.addedLength,l[i-1]),this.addSegmentFromArray(c,n,o,g),g=!1,n.c=!1),f+=s.addedLength,o+=1}if(h[r].c&&l.length){if(s=l[i-1],f<=t.e){var v=l[i-1].addedLength;t.s<=f&&t.e>=f+v?(this.addSegment(h[r].v[i-1],h[r].o[i-1],h[r].i[0],h[r].v[0],n,o,g),g=!1):(c=bez.getNewSegment(h[r].v[i-1],h[r].v[0],h[r].o[i-1],h[r].i[0],(t.s-f)/v,(t.e-f)/v,l[i-1]),this.addSegmentFromArray(c,n,o,g),g=!1,n.c=!1)}else n.c=!1;f+=s.addedLength,o+=1}if(n._length&&(n.setXYAt(n.v[u][0],n.v[u][1],"i",u),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),f>t.e)break;r<p-1&&(n=shapePool.newElement(),g=!0,m.push(n),o=0)}return m},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var n=t/100,r=[0,0],i=e._length,a=0;for(a=0;a<i;a+=1)r[0]+=e.v[a][0],r[1]+=e.v[a][1];r[0]/=i,r[1]/=i;var s,o,l,c,u,d,h=shapePool.newElement();for(h.c=e.c,a=0;a<i;a+=1)s=e.v[a][0]+(r[0]-e.v[a][0])*n,o=e.v[a][1]+(r[1]-e.v[a][1])*n,l=e.o[a][0]+(r[0]-e.o[a][0])*-n,c=e.o[a][1]+(r[1]-e.o[a][1])*-n,u=e.i[a][0]+(r[0]-e.i[a][0])*-n,d=e.i[a][1]+(r[1]-e.i[a][1])*-n,h.setTripleAt(s,o,l,c,u,d,a);return h},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,n,r,i,a,s,o=this.shapes.length,l=this.amount.v;if(0!==l)for(n=0;n<o;n+=1){if(s=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(s.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,i=a.shape.paths._length,r=0;r<i;r+=1)s.addShape(this.processPath(t[r],l));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function t(e,t,n){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var r,i=t.or.k.length;for(r=0;r<i;r+=1)t.or.k[r].to=null,t.or.k[r].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var n;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,i;if(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),i=this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),i=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(r=this.p.pv,i=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],i=[];var a=this.px,s=this.py;a._caching.lastFrame+a.offsetTime<=a.keyframes[0].t?(r[0]=a.getValueAtTime((a.keyframes[0].t+.01)/n,0),r[1]=s.getValueAtTime((s.keyframes[0].t+.01)/n,0),i[0]=a.getValueAtTime(a.keyframes[0].t/n,0),i[1]=s.getValueAtTime(s.keyframes[0].t/n,0)):a._caching.lastFrame+a.offsetTime>=a.keyframes[a.keyframes.length-1].t?(r[0]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/n,0),r[1]=s.getValueAtTime(s.keyframes[s.keyframes.length-1].t/n,0),i[0]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/n,0),i[1]=s.getValueAtTime((s.keyframes[s.keyframes.length-1].t-.01)/n,0)):(r=[a.pv,s.pv],i[0]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/n,a.offsetTime),i[1]=s.getValueAtTime((s._caching.lastFrame+s.offsetTime-.01)/n,s.offsetTime))}else r=i=e;this.v.rotate(-Math.atan2(r[1]-i[1],r[0]-i[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,n,r){return new t(e,n,r)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(e,t){return 1e5*Math.abs(e-t)<=Math.min(Math.abs(e),Math.abs(t))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,t,n){return e*(1-n)+t*n}function lerpPoint(e,t,n){return[lerp(e[0],t[0],n),lerp(e[1],t[1],n)]}function quadRoots(e,t,n){if(0===e)return[];var r=t*t-4*e*n;if(r<0)return[];var i=-t/(2*e);if(0===r)return[i];var a=Math.sqrt(r)/(2*e);return[i-a,i+a]}function polynomialCoefficients(e,t,n,r){return[3*t-e-3*n+r,3*e-6*t+3*n,-3*e+3*t,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,t,n,r,i){i&&pointEqual(e,t)&&(t=lerpPoint(e,r,1/3)),i&&pointEqual(n,r)&&(n=lerpPoint(e,r,2/3));var a=polynomialCoefficients(e[0],t[0],n[0],r[0]),s=polynomialCoefficients(e[1],t[1],n[1],r[1]);this.a=[a[0],s[0]],this.b=[a[1],s[1]],this.c=[a[2],s[2]],this.d=[a[3],s[3]],this.points=[e,t,n,r]}function extrema(e,t){var n=e.points[0][t],r=e.points[e.points.length-1][t];if(n>r){var i=r;r=n,n=i}for(var a=quadRoots(3*e.a[t],2*e.b[t],e.c[t]),s=0;s<a.length;s+=1)if(a[s]>0&&a[s]<1){var o=e.point(a[s])[t];o<n?n=o:o>r&&(r=o)}return{min:n,max:r}}function intersectData(e,t,n){var r=e.boundingBox();return{cx:r.cx,cy:r.cy,width:r.width,height:r.height,bez:e,t:(t+n)/2,t1:t,t2:n}}function splitData(e){var t=e.bez.split(.5);return[intersectData(t[0],e.t1,e.t),intersectData(t[1],e.t,e.t2)]}function boxIntersect(e,t){return 2*Math.abs(e.cx-t.cx)<e.width+t.width&&2*Math.abs(e.cy-t.cy)<e.height+t.height}function intersectsImpl(e,t,n,r,i,a){if(boxIntersect(e,t))if(n>=a||e.width<=r&&e.height<=r&&t.width<=r&&t.height<=r)i.push([e.t,t.t]);else{var s=splitData(e),o=splitData(t);intersectsImpl(s[0],o[0],n+1,r,i,a),intersectsImpl(s[0],o[1],n+1,r,i,a),intersectsImpl(s[1],o[0],n+1,r,i,a),intersectsImpl(s[1],o[1],n+1,r,i,a)}}function crossProduct(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function lineIntersection(e,t,n,r){var i=[e[0],e[1],1],a=[t[0],t[1],1],s=[n[0],n[1],1],o=[r[0],r[1],1],l=crossProduct(crossProduct(i,a),crossProduct(s,o));return floatZero(l[2])?null:[l[0]/l[2],l[1]/l[2]]}function polarOffset(e,t,n){return[e[0]+Math.cos(t)*n,e[1]-Math.sin(t)*n]}function pointDistance(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function pointEqual(e,t){return floatEqual(e[0],t[0])&&floatEqual(e[1],t[1])}function ZigZagModifier(){}function setPoint(e,t,n,r,i,a,s){var o=n-Math.PI/2,l=n+Math.PI/2,c=t[0]+Math.cos(n)*r*i,u=t[1]-Math.sin(n)*r*i;e.setTripleAt(c,u,c+Math.cos(o)*a,u-Math.sin(o)*a,c+Math.cos(l)*s,u-Math.sin(l)*s,e.length())}function getPerpendicularVector(e,t){var n=[t[0]-e[0],t[1]-e[1]],r=.5*-Math.PI;return[Math.cos(r)*n[0]-Math.sin(r)*n[1],Math.sin(r)*n[0]+Math.cos(r)*n[1]]}function getProjectingAngle(e,t){var n=0===t?e.length()-1:t-1,r=(t+1)%e.length(),i=getPerpendicularVector(e.v[n],e.v[r]);return Math.atan2(0,1)-Math.atan2(i[1],i[0])}function zigZagCorner(e,t,n,r,i,a,s){var o=getProjectingAngle(t,n),l=t.v[n%t._length],c=t.v[0===n?t._length-1:n-1],u=t.v[(n+1)%t._length],d=2===a?Math.sqrt(Math.pow(l[0]-c[0],2)+Math.pow(l[1]-c[1],2)):0,h=2===a?Math.sqrt(Math.pow(l[0]-u[0],2)+Math.pow(l[1]-u[1],2)):0;setPoint(e,t.v[n%t._length],o,s,r,h/(2*(i+1)),d/(2*(i+1)),a)}function zigZagSegment(e,t,n,r,i,a){for(var s=0;s<r;s+=1){var o=(s+1)/(r+1),l=2===i?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,c=t.normalAngle(o);setPoint(e,t.point(o),c,a,n,l/(2*(r+1)),l/(2*(r+1)),i),a=-a}return a}function linearOffset(e,t,n){var r=Math.atan2(t[0]-e[0],t[1]-e[1]);return[polarOffset(e,r,n),polarOffset(t,r,n)]}function offsetSegment(e,t){var n,r,i,a,s,o,l;n=(l=linearOffset(e.points[0],e.points[1],t))[0],r=l[1],i=(l=linearOffset(e.points[1],e.points[2],t))[0],a=l[1],s=(l=linearOffset(e.points[2],e.points[3],t))[0],o=l[1];var c=lineIntersection(n,r,i,a);null===c&&(c=r);var u=lineIntersection(s,o,i,a);return null===u&&(u=s),new PolynomialBezier(n,c,u,o)}function joinLines(e,t,n,r,i){var a=t.points[3],s=n.points[0];if(3===r)return a;if(pointEqual(a,s))return a;if(2===r){var o=-t.tangentAngle(1),l=-n.tangentAngle(0)+Math.PI,c=lineIntersection(a,polarOffset(a,o+Math.PI/2,100),s,polarOffset(s,o+Math.PI/2,100)),u=c?pointDistance(c,a):pointDistance(a,s)/2,d=polarOffset(a,o,2*u*roundCorner);return e.setXYAt(d[0],d[1],"o",e.length()-1),d=polarOffset(s,l,2*u*roundCorner),e.setTripleAt(s[0],s[1],s[0],s[1],d[0],d[1],e.length()),s}var h=lineIntersection(pointEqual(a,t.points[2])?t.points[0]:t.points[2],a,s,pointEqual(s,n.points[1])?n.points[3]:n.points[1]);return h&&pointDistance(h,a)<i?(e.setTripleAt(h[0],h[1],h[0],h[1],h[0],h[1],e.length()),h):a}function getIntersection(e,t){var n=e.intersections(t);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(e,t){var n=e.slice(),r=t.slice(),i=getIntersection(e[e.length-1],t[0]);return i&&(n[e.length-1]=e[e.length-1].split(i[0])[0],r[0]=t[0].split(i[1])[1]),e.length>1&&t.length>1&&(i=getIntersection(e[0],t[t.length-1]))?[[e[0].split(i[0])[0]],[t[t.length-1].split(i[1])[1]]]:[n,r]}function pruneIntersections(e){for(var t,n=1;n<e.length;n+=1)t=pruneSegmentIntersection(e[n-1],e[n]),e[n-1]=t[0],e[n]=t[1];return e.length>1&&(t=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=t[0],e[0]=t[1]),e}function offsetSegmentSplit(e,t){var n,r,i,a,s=e.inflectionPoints();if(0===s.length)return[offsetSegment(e,t)];if(1===s.length||floatEqual(s[1],1))return n=(i=e.split(s[0]))[0],r=i[1],[offsetSegment(n,t),offsetSegment(r,t)];n=(i=e.split(s[0]))[0];var o=(s[1]-s[0])/(1-s[0]);return a=(i=i[1].split(o))[0],r=i[1],[offsetSegment(n,t),offsetSegment(a,t),offsetSegment(r,t)]}function OffsetPathModifier(){}function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],n="normal",r="normal",i=t.length,a=0;a<i;a+=1)switch(t[a].toLowerCase()){case"italic":r="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:r,weight:e.fWeight||n}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,n,r,i,a){var s=a?-1:1,o=r.s.v[0]+(1-r.s.v[0])*(1-i),l=r.s.v[1]+(1-r.s.v[1])*(1-i);e.translate(r.p.v[0]*s*i,r.p.v[1]*s*i,r.p.v[2]),t.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),t.rotate(-r.r.v*s*i),t.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(a?1/o:o,a?1/l:l),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(e,t,n,r){for(this.elem=e,this.arr=t,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[n]);n>0;)n-=1,this._elements.unshift(t[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)e[n]._render=t,"gr"===e[n].ty&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,n,r,i,a,s=!1;if(this._mdf||e){var o,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),s=!0}for(a=0,r=0;r<=this._groups.length-1;r+=1){if(o=a<l,this._groups[r]._render=o,this.changeGroupRender(this._groups[r].it,o),!o){var u=this.elemsData[r].it,d=u[u.length-1];0!==d.transform.op.v?(d.transform.op._mdf=!0,d.transform.op.v=0):d.transform.op._mdf=!1}a+=1}this._currentCopies=l;var h=this.o.v,p=h%1,f=h>0?Math.floor(h):Math.ceil(h),m=this.pMatrix.props,g=this.rMatrix.props,v=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y,x,b=0;if(h>0){for(;b<f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),b+=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,p,!1),b+=p)}else if(h<0){for(;b>f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),b-=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-p,!0),b-=p)}for(r=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,a=this._currentCopies;a;){if(x=(n=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==b){for((0!==r&&1===i||r!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),y=0;y<x;y+=1)n[y]=this.matrix.props[y];this.matrix.reset()}else for(this.matrix.reset(),y=0;y<x;y+=1)n[y]=this.matrix.props[y];b+=1,a-=1,r+=i}}else for(a=this._currentCopies,r=0,i=1;a;)n=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,a-=1,r+=i;return s},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var n,r=shapePool.newElement();r.c=e.c;var i,a,s,o,l,c,u,d,h,p,f,m,g=e._length,v=0;for(n=0;n<g;n+=1)i=e.v[n],s=e.o[n],a=e.i[n],i[0]===s[0]&&i[1]===s[1]&&i[0]===a[0]&&i[1]===a[1]?0!==n&&n!==g-1||e.c?(o=0===n?e.v[g-1]:e.v[n-1],c=(l=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)))?Math.min(l/2,t)/l:0,u=f=i[0]+(o[0]-i[0])*c,d=m=i[1]-(i[1]-o[1])*c,h=u-(u-i[0])*roundCorner,p=d-(d-i[1])*roundCorner,r.setTripleAt(u,d,h,p,f,m,v),v+=1,o=n===g-1?e.v[0]:e.v[n+1],c=(l=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)))?Math.min(l/2,t)/l:0,u=h=i[0]+(o[0]-i[0])*c,d=p=i[1]+(o[1]-i[1])*c,f=u-(u-i[0])*roundCorner,m=d-(d-i[1])*roundCorner,r.setTripleAt(u,d,h,p,f,m,v),v+=1):(r.setTripleAt(i[0],i[1],s[0],s[1],a[0],a[1],v),v+=1):(r.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],v),v+=1);return r},RoundCornersModifier.prototype.processShapes=function(e){var t,n,r,i,a,s,o=this.shapes.length,l=this.rd.v;if(0!==l)for(n=0;n<o;n+=1){if(s=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(s.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,i=a.shape.paths._length,r=0;r<i;r+=1)s.addShape(this.processPath(t[r],l));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var t=this.derivative(e);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(e){var t=this.derivative(e);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,n=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(n<0)return[];var r=Math.sqrt(n);return floatZero(r)?r>0&&r<1?[t]:[]:[t-r,t+r].filter((function(e){return e>0&&e<1}))},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],e),n=lerpPoint(this.points[1],this.points[2],e),r=lerpPoint(this.points[2],this.points[3],e),i=lerpPoint(t,n,e),a=lerpPoint(n,r,e),s=lerpPoint(i,a,e);return[new PolynomialBezier(this.points[0],t,i,s,!0),new PolynomialBezier(s,a,r,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}},PolynomialBezier.prototype.intersections=function(e,t,n){void 0===t&&(t=2),void 0===n&&(n=7);var r=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,t,r,n),r},PolynomialBezier.shapeSegment=function(e,t){var n=(t+1)%e.length();return new PolynomialBezier(e.v[t],e.o[t],e.i[n],e.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(e,t){var n=(t+1)%e.length();return new PolynomialBezier(e.v[n],e.i[n],e.o[t],e.v[t],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,t.s,0,null,this),this.frequency=PropertyFactory.getProp(e,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,t.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(e,t,n,r){var i=e._length,a=shapePool.newElement();if(a.c=e.c,e.c||(i-=1),0===i)return a;var s=-1,o=PolynomialBezier.shapeSegment(e,0);zigZagCorner(a,e,0,t,n,r,s);for(var l=0;l<i;l+=1)s=zigZagSegment(a,o,t,n,r,-s),o=l!==i-1||e.c?PolynomialBezier.shapeSegment(e,(l+1)%i):null,zigZagCorner(a,e,l+1,t,n,r,s);return a},ZigZagModifier.prototype.processShapes=function(e){var t,n,r,i,a,s,o=this.shapes.length,l=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),u=this.pointsType.v;if(0!==l)for(n=0;n<o;n+=1){if(s=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(s.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,i=a.shape.paths._length,r=0;r<i;r+=1)s.addShape(this.processPath(t[r],l,c,u));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(e,t,n,r){var i=shapePool.newElement();i.c=e.c;var a,s,o,l=e.length();e.c||(l-=1);var c=[];for(a=0;a<l;a+=1)o=PolynomialBezier.shapeSegment(e,a),c.push(offsetSegmentSplit(o,t));if(!e.c)for(a=l-1;a>=0;a-=1)o=PolynomialBezier.shapeSegmentInverted(e,a),c.push(offsetSegmentSplit(o,t));c=pruneIntersections(c);var u=null,d=null;for(a=0;a<c.length;a+=1){var h=c[a];for(d&&(u=joinLines(i,d,h[0],n,r)),d=h[h.length-1],s=0;s<h.length;s+=1)o=h[s],u&&pointEqual(o.points[0],u)?i.setXYAt(o.points[1][0],o.points[1][1],"o",i.length()-1):i.setTripleAt(o.points[0][0],o.points[0][1],o.points[1][0],o.points[1][1],o.points[0][0],o.points[0][1],i.length()),i.setTripleAt(o.points[3][0],o.points[3][1],o.points[3][0],o.points[3][1],o.points[2][0],o.points[2][1],i.length()),u=o.points[3]}return c.length&&joinLines(i,d,c[0][0],n,r),i},OffsetPathModifier.prototype.processShapes=function(e){var t,n,r,i,a,s,o=this.shapes.length,l=this.amount.v,c=this.miterLimit.v,u=this.lineJoin;if(0!==l)for(n=0;n<o;n+=1){if(s=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(s.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,i=a.shape.paths._length,r=0;r<i;r+=1)s.addShape(this.processPath(t[r],l,u,c));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var e={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=127988,r=127462,i=127487,a=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function s(e,t){var n=createTag("span");n.setAttribute("aria-hidden",!0),n.style.fontFamily=t;var r=createTag("span");r.innerText="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var i=r.offsetWidth;return r.style.fontFamily=function(e){var t,n=e.split(","),r=n.length,i=[];for(t=0;t<r;t+=1)"sans-serif"!==n[t]&&"monospace"!==n[t]&&i.push(n[t]);return i.join(",")}(e)+", "+t,{node:r,w:i,parent:n}}function o(e,t){var n,r=document.body&&t?"svg":"canvas",i=getFontProperties(e);if("svg"===r){var a=createNS("text");a.style.fontSize="100px",a.setAttribute("font-family",e.fFamily),a.setAttribute("font-style",i.style),a.setAttribute("font-weight",i.weight),a.textContent="1",e.fClass?(a.style.fontFamily="inherit",a.setAttribute("class",e.fClass)):a.style.fontFamily=e.fFamily,t.appendChild(a),n=a}else{var s=new OffscreenCanvas(500,500).getContext("2d");s.font=i.style+" "+i.weight+" 100px "+e.fFamily,n=s}return{measureText:function(e){return"svg"===r?(n.textContent=e,n.getComputedTextLength()):n.measureText(e).width}}}function l(e){var t=0,n=e.charCodeAt(0);if(n>=55296&&n<=56319){var r=e.charCodeAt(1);r>=56320&&r<=57343&&(t=1024*(n-55296)+r-56320+65536)}return t}function c(e){var t=l(e);return t>=r&&t<=i}var u=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};u.isModifier=function(e,t){var n=e.toString(16)+t.toString(16);return-1!==a.indexOf(n)},u.isZeroWidthJoiner=function(e){return 8205===e},u.isFlagEmoji=function(e){return c(e.substr(0,2))&&c(e.substr(2,2))},u.isRegionalCode=c,u.isCombinedCharacter=function(e){return-1!==t.indexOf(e)},u.isRegionalFlag=function(e,t){var r=l(e.substr(t,2));if(r!==n)return!1;var i=0;for(t+=2;i<5;){if((r=l(e.substr(t,2)))<917601||r>917626)return!1;i+=1,t+=2}return 917631===l(e.substr(t,2))},u.isVariationSelector=function(e){return 65039===e},u.BLACK_FLAG_CODE_POINT=n;var d={addChars:function(e){if(e){var t;this.chars||(this.chars=[]);var n,r,i=e.length,a=this.chars.length;for(t=0;t<i;t+=1){for(n=0,r=!1;n<a;)this.chars[n].style===e[t].style&&this.chars[n].fFamily===e[t].fFamily&&this.chars[n].ch===e[t].ch&&(r=!0),n+=1;r||(this.chars.push(e[t]),a+=1)}}},addFonts:function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);if(!document.body)return this.isLoaded=!0,e.list.forEach((function(e){e.helper=o(e),e.cache={}})),void(this.fonts=e.list);var n,r=e.list,i=r.length,a=i;for(n=0;n<i;n+=1){var l,c,u=!0;if(r[n].loaded=!1,r[n].monoCase=s(r[n].fFamily,"monospace"),r[n].sansCase=s(r[n].fFamily,"sans-serif"),r[n].fPath){if("p"===r[n].fOrigin||3===r[n].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+r[n].fFamily+'"], style[f-origin="3"][f-family="'+r[n].fFamily+'"]')).length>0&&(u=!1),u){var d=createTag("style");d.setAttribute("f-forigin",r[n].fOrigin),d.setAttribute("f-origin",r[n].origin),d.setAttribute("f-family",r[n].fFamily),d.type="text/css",d.innerText="@font-face {font-family: "+r[n].fFamily+"; font-style: normal; src: url('"+r[n].fPath+"');}",t.appendChild(d)}}else if("g"===r[n].fOrigin||1===r[n].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),c=0;c<l.length;c+=1)-1!==l[c].href.indexOf(r[n].fPath)&&(u=!1);if(u){var h=createTag("link");h.setAttribute("f-forigin",r[n].fOrigin),h.setAttribute("f-origin",r[n].origin),h.type="text/css",h.rel="stylesheet",h.href=r[n].fPath,document.body.appendChild(h)}}else if("t"===r[n].fOrigin||2===r[n].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),c=0;c<l.length;c+=1)r[n].fPath===l[c].src&&(u=!1);if(u){var p=createTag("link");p.setAttribute("f-forigin",r[n].fOrigin),p.setAttribute("f-origin",r[n].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",r[n].fPath),t.appendChild(p)}}}else r[n].loaded=!0,a-=1;r[n].helper=o(r[n],t),r[n].cache={},this.fonts.push(r[n])}0===a?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(t,n,r){for(var i=0,a=this.chars.length;i<a;){if(this.chars[i].ch===t&&this.chars[i].style===n&&this.chars[i].fFamily===r)return this.chars[i];i+=1}return("string"===typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,n,r)),e},getFontByName:function(e){for(var t=0,n=this.fonts.length;t<n;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,n){var r=this.getFontByName(t),i=e;if(!r.cache[i]){var a=r.helper;if(" "===e){var s=a.measureText("|"+e+"|"),o=a.measureText("||");r.cache[i]=(s-o)/100}else r.cache[i]=a.measureText(e)/100}return r.cache[i]*n},checkLoadedFonts:function(){var e,t,n,r=this.fonts.length,i=r;for(e=0;e<r;e+=1)this.fonts[e].loaded?i-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(t=this.fonts[e].monoCase.node,n=this.fonts[e].monoCase.w,t.offsetWidth!==n?(i-=1,this.fonts[e].loaded=!0):(t=this.fonts[e].sansCase.node,n=this.fonts[e].sansCase.w,t.offsetWidth!==n&&(i-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==i&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return u.prototype=d,u}();function SlotManager(e){this.animationData=e}function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(t){return e[t]||""}}();function SliderEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function AngleEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function ColorEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function PointEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function LayerIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function MaskIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function CheckboxEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var n,r=e.ef||[];this.effectElements=[];var i,a=r.length;for(n=0;n<a;n+=1)i=new GroupEffect(r[n],t),this.effectElements.push(i)}function GroupEffect(e,t){this.init(e,t)}function BaseElement(){}function FrameElement(){}function FootageElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,n)}function AudioElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,n),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){var n;this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var r,i=this.data.ef.length,a=this.data.ef;for(n=0;n<i;n+=1){switch(r=null,a[n].ty){case 0:r=new SliderEffect(a[n],t,this);break;case 1:r=new AngleEffect(a[n],t,this);break;case 2:r=new ColorEffect(a[n],t,this);break;case 3:r=new PointEffect(a[n],t,this);break;case 4:case 7:r=new CheckboxEffect(a[n],t,this);break;case 10:r=new LayerIndexEffect(a[n],t,this);break;case 11:r=new MaskIndexEffect(a[n],t,this);break;case 5:r=new EffectsManager(a[n],t,this);break;default:r=new NoValueEffect(a[n],t,this)}r&&this.effectElements.push(r)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var t=e("layer"),n=e("effects"),r=e("shape"),i=e("text"),a=e("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var s=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(s),0===this.data.ty||this.data.xt?this.compInterface=a(this):4===this.data.ty?(this.layerInterface.shapeInterface=r(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=i(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,n){this.globalData=t,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var n,r=this.dynamicProperties.length;for(n=0;n<r;n+=1)(t||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var t=e("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(e){var t,n,r=this.layers.length;for(this.completeLayers=!0,t=r-1;t>=0;t-=1)this.elements[t]||(n=this.layers[t]).ip-n.st<=e-this.layers[t].st&&n.op-n.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:default:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){var t;this.completeLayers=!1;var n,r=e.length,i=this.layers.length;for(t=0;t<r;t+=1)for(n=0;n<i;){if(this.layers[n].id===e[t].id){this.layers[n]=e[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,n){for(var r=this.elements,i=this.layers,a=0,s=i.length;a<s;)i[a].ind==t&&(r[a]&&!0!==r[a]?(n.push(r[a]),r[a].setAsParent(),void 0!==i[a].parent?this.buildElementParenting(e,i[a].parent,n):e.setHierarchy(n)):(this.buildItem(a),this.addPendingElement(e))),a+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length;for(t=0;t<n;t+=1)if(e[t].xt){var r=this.createComp(e[t]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.getElementById=function(e){var t,n=this.elements.length;for(t=0;t<n;t+=1)if(this.elements[t].data.ind===e)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(e){var t,n=e.shift();if("number"===typeof n)t=this.elements[n];else{var r,i=this.elements.length;for(r=0;r<i;r+=1)if(this.elements[r].data.nm===n){t=this.elements[r];break}}return 0===e.length?t:t.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(e,t,n){this.data=e,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,i,a=this.globalData.defs,s=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(s),this.solidPath="";var o,l,c,u,d,h,p=this.masksProperties,f=0,m=[],g=createElementID(),v="clipPath",y="clip-path";for(r=0;r<s;r+=1)if(("a"!==p[r].mode&&"n"!==p[r].mode||p[r].inv||100!==p[r].o.k||p[r].o.x)&&(v="mask",y="mask"),"s"!==p[r].mode&&"i"!==p[r].mode||0!==f?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),m.push(c)),i=createNS("path"),"n"===p[r].mode)this.viewData[r]={op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),elem:i,lastPath:""},a.appendChild(i);else{var x;if(f+=1,i.setAttribute("fill","s"===p[r].mode?"#000000":"#ffffff"),i.setAttribute("clip-rule","nonzero"),0!==p[r].x.k?(v="mask",y="mask",h=PropertyFactory.getProp(this.element,p[r].x,0,null,this.element),x=createElementID(),(u=createNS("filter")).setAttribute("id",x),(d=createNS("feMorphology")).setAttribute("operator","erode"),d.setAttribute("in","SourceGraphic"),d.setAttribute("radius","0"),u.appendChild(d),a.appendChild(u),i.setAttribute("stroke","s"===p[r].mode?"#000000":"#ffffff")):(d=null,h=null),this.storedData[r]={elem:i,x:h,expan:d,lastPath:"",lastOperator:"",filterId:x,lastRadius:0},"i"===p[r].mode){l=m.length;var b=createNS("g");for(o=0;o<l;o+=1)b.appendChild(m[o]);var w=createNS("mask");w.setAttribute("mask-type","alpha"),w.setAttribute("id",g+"_"+f),w.appendChild(i),a.appendChild(w),b.setAttribute("mask","url("+getLocationHref()+"#"+g+"_"+f+")"),m.length=0,m.push(b)}else m.push(i);p[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:i,lastPath:"",op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),invRect:c},this.viewData[r].prop.k||this.drawPath(p[r],this.viewData[r].prop.v,this.viewData[r])}for(this.maskElement=createNS(v),s=m.length,r=0;r<s;r+=1)this.maskElement.appendChild(m[r]);f>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(y,"url("+getLocationHref()+"#"+g+")"),a.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,n=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),n=0;n<r;n+=1)t.multiply(this.hierarchy[n].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<t;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var n=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(n),e=1;e<t;e+=1){var r=this.localTransforms[e].matrix;n.multiply(r)}n.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var i=this.finalTransform.localOpacity;for(e=0;e<t;e+=1)i*=.01*this.localTransforms[e].opacity;this.finalTransform.localOpacity=i}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,n=e.length;for(t=0;t<n;t+=1)this.localTransforms.push(e[t])}}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var n,r=!0,i=this.comp;r;)i.finalTransform?(i.data.hasMask&&t.splice(0,0,i.finalTransform),i=i.comp):r=!1;var a,s=t.length;for(n=0;n<s;n+=1)a=t[n].mat.applyToPointArray(0,0,0),e=[e[0]-a[0],e[1]-a[1],0];return e},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,n=this.element.finalTransform.mat,r=this.masksProperties.length;for(t=0;t<r;t+=1)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var i=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),i.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,n){var r,i,a=" M"+t.v[0][0]+","+t.v[0][1];for(i=t._length,r=1;r<i;r+=1)a+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[r][0]+","+t.i[r][1]+" "+t.v[r][0]+","+t.v[r][1];if(t.c&&i>1&&(a+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),n.lastPath!==a){var s="";n.elem&&(t.c&&(s=e.inv?this.solidPath+a:a),n.elem.setAttribute("d",s)),n.lastPath=a}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={createFilter:function(e,t){var n=createNS("filter");return n.setAttribute("id",e),!0!==t&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}};return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!==typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var t,n,r="SourceGraphic",i=e.data.ef?e.data.ef.length:0,a=createElementID(),s=filtersFactory.createFilter(a,!0),o=0;for(this.filters=[],t=0;t<i;t+=1){n=null;var l=e.data.ef[t].ty;registeredEffects$1[l]&&(n=new(0,registeredEffects$1[l].effect)(s,e.effectsManager.effectElements[t],e,idPrefix+o,r),r=idPrefix+o,registeredEffects$1[l].countsAsEffect&&(o+=1)),n&&this.filters.push(n)}o&&(e.globalData.defs.appendChild(s),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+a+")")),this.filters.length&&e.addRenderableComponent(this)}function registerEffect$1(e,t,n){registeredEffects$1[e]={effect:t,countsAsEffect:n}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(e,t,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(e,t){this.elem=e,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var t,n=this.filters.length,r=[];for(t=0;t<n;t+=1)this.filters[t].type===e&&r.push(this.filters[t]);return r},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var n=createNS("clipPath"),r=createNS("path");r.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var i=createElementID();if(n.setAttribute("id",i),n.appendChild(r),this.globalData.defs.appendChild(n),this.checkMasks()){var a=createNS("g");a.setAttribute("clip-path","url("+getLocationHref()+"#"+i+")"),a.appendChild(this.layerElement),this.transformedElement=a,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+i+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var t,n,r,i,a=this.layerId+"_"+e;if(1===e||3===e){var s=createNS("mask");s.setAttribute("id",a),s.setAttribute("mask-type",3===e?"luminance":"alpha"),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),s.appendChild(r),this.globalData.defs.appendChild(s),featureSupport.maskType||1!==e||(s.setAttribute("mask-type","luminance"),t=createElementID(),n=filtersFactory.createFilter(t),this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(i=createNS("g")).appendChild(r),s.appendChild(i),i.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(2===e){var o=createNS("mask");o.setAttribute("id",a),o.setAttribute("mask-type","alpha");var l=createNS("g");o.appendChild(l),t=createElementID(),n=filtersFactory.createFilter(t);var c=createNS("feComponentTransfer");c.setAttribute("in","SourceGraphic"),n.appendChild(c);var u=createNS("feFuncA");u.setAttribute("type","table"),u.setAttribute("tableValues","1.0 0.0"),c.appendChild(u),this.globalData.defs.appendChild(n);var d=createNS("rect");d.setAttribute("width",this.comp.data.w),d.setAttribute("height",this.comp.data.h),d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("fill","#ffffff"),d.setAttribute("opacity","0"),l.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),l.appendChild(d),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(r),featureSupport.maskType||(o.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),i=createNS("g"),l.appendChild(d),i.appendChild(this.layerElement),l.appendChild(i)),this.globalData.defs.appendChild(o)}this.matteMasks[e]=a}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(e){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,n=0,r=t.length;n<r;){if(t[n].elem===e)return t[n].pos;n+=1}return 0},addProcessedElement:function(e,t){for(var n=this.processedElements,r=n.length;r;)if(n[r-=1].elem===e)return void(n[r].pos=t);n.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,t,n){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=n,this.lvl=t,this._isAnimated=!!n.k;for(var r=0,i=e.length;r<i;){if(e[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(e,t,n,r){var i;this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var a,s=t.length||0;for(i=0;i<s;i+=1)a=PropertyFactory.getProp(e,t[i].v,0,0,this),this.k=a.k||this.k,this.dataProps[i]={n:t[i].n,p:a};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n}function SVGNoStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=n}function GradientProperty(e,t,n){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var r=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,n)}function SVGGradientStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,t,n){this.transform={mProps:e,op:t,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<n;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(e,t){for(var n=0,r=this.o.length/2;n<r;){if(Math.abs(e[4*n]-e[4*t+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,n,r,i=4*this.data.p;for(t=0;t<i;t+=1)n=t%4===0?100:255,r=Math.round(this.prop.v[t]*n),this.c[t]!==r&&(this.c[t]=r,this._cmdf=!e);if(this.o.length)for(i=this.prop.v.length,t=4*this.data.p;t<i;t+=1)n=t%2===0?100:1,r=t%2===0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==r&&(this.o[t-4*this.data.p]=r,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,n){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,t),this.setGradientOpacity(t,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var n=createElementID(),r=createNS(1===t.t?"linearGradient":"radialGradient");r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var i,a,s,o=[];for(s=4*t.g.p,a=0;a<s;a+=4)i=createNS("stop"),r.appendChild(i),o.push(i);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=r,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var n,r,i,a=createNS("mask"),s=createNS("path");a.appendChild(s);var o=createElementID(),l=createElementID();a.setAttribute("id",l);var c=createNS(1===e.t?"linearGradient":"radialGradient");c.setAttribute("id",o),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),i=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var u=this.stops;for(r=4*e.g.p;r<i;r+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(n),u.push(n);s.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),"gs"===e.ty&&(s.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),s.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),1===e.lj&&s.setAttribute("stroke-miterlimit",e.ml)),this.of=c,this.ms=a,this.ost=u,this.maskId=l,t.msElem=s}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(e,t,n,r){if(0===t)return"";var i,a=e.o,s=e.i,o=e.v,l=" M"+r.applyToPointStringified(o[0][0],o[0][1]);for(i=1;i<t;i+=1)l+=" C"+r.applyToPointStringified(a[i-1][0],a[i-1][1])+" "+r.applyToPointStringified(s[i][0],s[i][1])+" "+r.applyToPointStringified(o[i][0],o[i][1]);return n&&t&&(l+=" C"+r.applyToPointStringified(a[i-1][0],a[i-1][1])+" "+r.applyToPointStringified(s[0][0],s[0][1])+" "+r.applyToPointStringified(o[0][0],o[0][1]),l+="z"),l},SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function n(e,t,n){(n||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(n||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function r(){}function i(n,r,i){var a,s,o,l,c,u,d,h,p,f,m=r.styles.length,g=r.lvl;for(u=0;u<m;u+=1){if(l=r.sh._mdf||i,r.styles[u].lvl<g){for(h=t.reset(),p=g-r.styles[u].lvl,f=r.transformers.length-1;!l&&p>0;)l=r.transformers[f].mProps._mdf||l,p-=1,f-=1;if(l)for(p=g-r.styles[u].lvl,f=r.transformers.length-1;p>0;)h.multiply(r.transformers[f].mProps.v),p-=1,f-=1}else h=e;if(s=(d=r.sh.paths)._length,l){for(o="",a=0;a<s;a+=1)(c=d.shapes[a])&&c._length&&(o+=buildShapeString(c,c._length,c.c,h));r.caches[u]=o}else o=r.caches[u];r.styles[u].d+=!0===n.hd?"":o,r.styles[u]._mdf=l||r.styles[u]._mdf}}function a(e,t,n){var r=t.style;(t.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",t.o.v)}function s(e,t,n){o(e,t,n),l(0,t,n)}function o(e,t,n){var r,i,a,s,o,l=t.gf,c=t.g._hasOpacity,u=t.s.v,d=t.e.v;if(t.o._mdf||n){var h="gf"===e.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(h,t.o.v)}if(t.s._mdf||n){var p=1===e.t?"x1":"cx",f="x1"===p?"y1":"cy";l.setAttribute(p,u[0]),l.setAttribute(f,u[1]),c&&!t.g._collapsable&&(t.of.setAttribute(p,u[0]),t.of.setAttribute(f,u[1]))}if(t.g._cmdf||n){r=t.cst;var m=t.g.c;for(a=r.length,i=0;i<a;i+=1)(s=r[i]).setAttribute("offset",m[4*i]+"%"),s.setAttribute("stop-color","rgb("+m[4*i+1]+","+m[4*i+2]+","+m[4*i+3]+")")}if(c&&(t.g._omdf||n)){var g=t.g.o;for(a=(r=t.g._collapsable?t.cst:t.ost).length,i=0;i<a;i+=1)s=r[i],t.g._collapsable||s.setAttribute("offset",g[2*i]+"%"),s.setAttribute("stop-opacity",g[2*i+1])}if(1===e.t)(t.e._mdf||n)&&(l.setAttribute("x2",d[0]),l.setAttribute("y2",d[1]),c&&!t.g._collapsable&&(t.of.setAttribute("x2",d[0]),t.of.setAttribute("y2",d[1])));else if((t.s._mdf||t.e._mdf||n)&&(o=Math.sqrt(Math.pow(u[0]-d[0],2)+Math.pow(u[1]-d[1],2)),l.setAttribute("r",o),c&&!t.g._collapsable&&t.of.setAttribute("r",o)),t.e._mdf||t.h._mdf||t.a._mdf||n){o||(o=Math.sqrt(Math.pow(u[0]-d[0],2)+Math.pow(u[1]-d[1],2)));var v=Math.atan2(d[1]-u[1],d[0]-u[0]),y=t.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var x=o*y,b=Math.cos(v+t.a.v)*x+u[0],w=Math.sin(v+t.a.v)*x+u[1];l.setAttribute("fx",b),l.setAttribute("fy",w),c&&!t.g._collapsable&&(t.of.setAttribute("fx",b),t.of.setAttribute("fy",w))}}function l(e,t,n){var r=t.style,i=t.d;i&&(i._mdf||n)&&i.dashStr&&(r.pElem.setAttribute("stroke-dasharray",i.dashStr),r.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),t.c&&(t.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",t.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty){case"fl":return a;case"gf":return o;case"gs":return s;case"st":return l;case"sh":case"el":case"rc":case"sr":return i;case"tr":return n;case"no":return r;default:return null}}}}();function SVGShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,n),this.prevViewData=[]}function LetterProps(e,t,n,r,i,a){this.o=e,this.sw=t,this.sc=n,this.fc=r,this.m=i,this.p=a,this._mdf={o:!0,sw:!!t,sc:!!n,fc:!!r,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=e.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,n,r,i=this.shapes.length,a=this.stylesList.length,s=[],o=!1;for(n=0;n<a;n+=1){for(r=this.stylesList[n],o=!1,s.length=0,e=0;e<i;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(r)&&(s.push(t),o=t._isAnimated||o);s.length>1&&o&&this.setShapesAsAnimated(s)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var n,r=new SVGStyleData(e,t),i=r.pElem;return"st"===e.ty?n=new SVGStrokeStyleData(this,e,r):"fl"===e.ty?n=new SVGFillStyleData(this,e,r):"gf"===e.ty||"gs"===e.ty?(n=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,r),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),i.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))):"no"===e.ty&&(n=new SVGNoStyleData(this,e,r)),"st"!==e.ty&&"gs"!==e.ty||(i.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),i.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),i.setAttribute("fill-opacity","0"),1===e.lj&&i.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&i.setAttribute("fill-rule","evenodd"),e.ln&&i.setAttribute("id",e.ln),e.cl&&i.setAttribute("class",e.cl),e.bm&&(i.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(r),this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var n=TransformPropertyFactory.getTransformProperty(this,e,this),r=new SVGTransformData(n,n.o,t);return this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createShapeElement=function(e,t,n){var r=4;"rc"===e.ty?r=5:"el"===e.ty?r=6:"sr"===e.ty&&(r=7);var i=new SVGShapeData(t,n,ShapePropertyFactory.getShapeProp(this,e,r,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var n=0,r=this.animatedContents.length;n<r;){if(this.animatedContents[n].element===t)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,n=e.styles,r=this.stylesList.length;for(t=0;t<r;t+=1)this.stylesList[t].closed||n.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,n,r,i,a,s){var o,l,c,u,d,h,p=[].concat(a),f=e.length-1,m=[],g=[];for(o=f;o>=0;o-=1){if((h=this.searchProcessedElement(e[o]))?t[o]=n[h-1]:e[o]._render=s,"fl"===e[o].ty||"st"===e[o].ty||"gf"===e[o].ty||"gs"===e[o].ty||"no"===e[o].ty)h?t[o].style.closed=!1:t[o]=this.createStyleElement(e[o],i),e[o]._render&&t[o].style.pElem.parentNode!==r&&r.appendChild(t[o].style.pElem),m.push(t[o].style);else if("gr"===e[o].ty){if(h)for(c=t[o].it.length,l=0;l<c;l+=1)t[o].prevViewData[l]=t[o].it[l];else t[o]=this.createGroupElement(e[o]);this.searchShapes(e[o].it,t[o].it,t[o].prevViewData,t[o].gr,i+1,p,s),e[o]._render&&t[o].gr.parentNode!==r&&r.appendChild(t[o].gr)}else"tr"===e[o].ty?(h||(t[o]=this.createTransformElement(e[o],r)),u=t[o].transform,p.push(u)):"sh"===e[o].ty||"rc"===e[o].ty||"el"===e[o].ty||"sr"===e[o].ty?(h||(t[o]=this.createShapeElement(e[o],p,i)),this.setElementStyles(t[o])):"tm"===e[o].ty||"rd"===e[o].ty||"ms"===e[o].ty||"pb"===e[o].ty||"zz"===e[o].ty||"op"===e[o].ty?(h?(d=t[o]).closed=!1:((d=ShapeModifiers.getModifier(e[o].ty)).init(this,e[o]),t[o]=d,this.shapeModifiers.push(d)),g.push(d)):"rp"===e[o].ty&&(h?(d=t[o]).closed=!0:(d=ShapeModifiers.getModifier(e[o].ty),t[o]=d,d.init(this,e,o,t),this.shapeModifiers.push(d),s=!1),g.push(d));this.addProcessedElement(e[o],o+1)}for(f=m.length,o=0;o<f;o+=1)m[o].closed=!0;for(f=g.length,o=0;o<f;o+=1)g[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var e;this.renderModifiers();var t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,n=this.animatedContents.length;for(e=0;e<n;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(e,t,n,r,i,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var s=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,s=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,s=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,s=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,s=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,s=!0),!a.length||this.p[0]===a[0]&&this.p[1]===a[1]&&this.p[4]===a[4]&&this.p[5]===a[5]&&this.p[12]===a[12]&&this.p[13]===a[13]||(this.p=a,this._mdf.p=!0,s=!0),s},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var r;this.lock=!0,this._mdf=!1;var i=this.effectsSequence.length,a=e||this.data.d.k[this.keysIndex].s;for(r=0;r<i;r+=1)a=n!==this.keysIndex?this.effectsSequence[r](a,a.t):this.effectsSequence[r](this.currentData,a.t);t!==a&&this.setCurrentData(a),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,n=0,r=e.length;n<=r-1&&!(n===r-1||e[n+1].t>t);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,n,r=[],i=0,a=e.length,s=!1,o=!1,l="";i<a;)s=o,o=!1,t=e.charCodeAt(i),l=e.charAt(i),FontManager.isCombinedCharacter(t)?s=!0:t>=55296&&t<=56319?FontManager.isRegionalFlag(e,i)?l=e.substr(i,14):(n=e.charCodeAt(i+1))>=56320&&n<=57343&&(FontManager.isModifier(t,n)?(l=e.substr(i,2),s=!0):l=FontManager.isFlagEmoji(e.substr(i,4))?e.substr(i,4):e.substr(i,2)):t>56319?(n=e.charCodeAt(i+1),FontManager.isVariationSelector(t)&&(s=!0)):FontManager.isZeroWidthJoiner(t)&&(s=!0,o=!0),s?(r[r.length-1]+=l,s=!1):r.push(l),i+=l.length;return r},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,n,r,i,a,s,o,l=this.elem.globalData.fontManager,c=this.data,u=[],d=0,h=c.m.g,p=0,f=0,m=0,g=[],v=0,y=0,x=l.getFontByName(e.f),b=0,w=getFontProperties(x);e.fWeight=w.weight,e.fStyle=w.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),n=e.finalText.length,e.finalLineHeight=e.lh;var S,_=e.tr/1e3*e.finalSize;if(e.sz)for(var A,E,C=!0,M=e.sz[0],T=e.sz[1];C;){A=0,v=0,n=(E=this.buildFinalText(e.t)).length,_=e.tr/1e3*e.finalSize;var k=-1;for(t=0;t<n;t+=1)S=E[t].charCodeAt(0),r=!1," "===E[t]?k=t:13!==S&&3!==S||(v=0,r=!0,A+=e.finalLineHeight||1.2*e.finalSize),l.chars?(o=l.getCharData(E[t],x.fStyle,x.fFamily),b=r?0:o.w*e.finalSize/100):b=l.measureText(E[t],e.f,e.finalSize),v+b>M&&" "!==E[t]?(-1===k?n+=1:t=k,A+=e.finalLineHeight||1.2*e.finalSize,E.splice(t,k===t?1:0,"\r"),k=-1,v=0):(v+=b,v+=_);A+=x.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&T<A?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=E,n=e.finalText.length,C=!1)}v=-_,b=0;var P,R=0;for(t=0;t<n;t+=1)if(r=!1,13===(S=(P=e.finalText[t]).charCodeAt(0))||3===S?(R=0,g.push(v),y=v>y?v:y,v=-2*_,i="",r=!0,m+=1):i=P,l.chars?(o=l.getCharData(P,x.fStyle,l.getFontByName(e.f).fFamily),b=r?0:o.w*e.finalSize/100):b=l.measureText(i,e.f,e.finalSize)," "===P?R+=b+_:(v+=b+_+R,R=0),u.push({l:b,an:b,add:p,n:r,anIndexes:[],val:i,line:m,animatorJustifyOffset:0}),2==h){if(p+=b,""===i||" "===i||t===n-1){for(""!==i&&" "!==i||(p-=b);f<=t;)u[f].an=p,u[f].ind=d,u[f].extra=b,f+=1;d+=1,p=0}}else if(3==h){if(p+=b,""===i||t===n-1){for(""===i&&(p-=b);f<=t;)u[f].an=p,u[f].ind=d,u[f].extra=b,f+=1;p=0,d+=1}}else u[d].ind=d,u[d].extra=0,d+=1;if(e.l=u,y=v>y?v:y,g.push(v),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=y,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=g;var D,I,B,j,F=c.a;s=F.length;var L=[];for(a=0;a<s;a+=1){for((D=F[a]).a.sc&&(e.strokeColorAnim=!0),D.a.sw&&(e.strokeWidthAnim=!0),(D.a.fc||D.a.fh||D.a.fs||D.a.fb)&&(e.fillColorAnim=!0),j=0,B=D.s.b,t=0;t<n;t+=1)(I=u[t]).anIndexes[a]=j,(1==B&&""!==I.val||2==B&&""!==I.val&&" "!==I.val||3==B&&(I.n||" "==I.val||t==n-1)||4==B&&(I.n||t==n-1))&&(1===D.s.rn&&L.push(j),j+=1);c.a[a].s.totalChars=j;var O,N=-1;if(1===D.s.rn)for(t=0;t<n;t+=1)N!=(I=u[t]).anIndexes[a]&&(N=I.anIndexes[a],O=L.splice(Math.floor(Math.random()*L.length),1)[0]),I.anIndexes[a]=O}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=x.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var n=this.copyData({},this.data.d.k[t].s);n=this.copyData(n,e),this.data.d.k[t].s=n,this.recalculate(t),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,n=Math.floor;function r(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(e,t.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var i=0,a=0,s=1,o=1;this.ne.v>0?i=this.ne.v/100:a=-this.ne.v/100,this.xe.v>0?s=1-this.xe.v/100:o=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(i,a,s,o).get,c=0,u=this.finalS,d=this.finalE,h=this.data.sh;if(2===h)c=l(c=d===u?r>=d?1:0:e(0,t(.5/(d-u)+(r-u)/(d-u),1)));else if(3===h)c=l(c=d===u?r>=d?0:1:1-e(0,t(.5/(d-u)+(r-u)/(d-u),1)));else if(4===h)d===u?c=0:(c=e(0,t(.5/(d-u)+(r-u)/(d-u),1)))<.5?c*=2:c=1-2*(c-.5),c=l(c);else if(5===h){if(d===u)c=0;else{var p=d-u,f=-p/2+(r=t(e(0,r+.5-u),d-u)),m=p/2;c=Math.sqrt(1-f*f/(m*m))}c=l(c)}else 6===h?(d===u?c=0:(r=t(e(0,r+.5-u),d-u),c=(1+Math.cos(Math.PI+2*Math.PI*r/(d-u)))/2),c=l(c)):(r>=n(u)&&(c=e(0,t(r-u<0?t(d,1)-(u-r):d-r,1))),c=l(c));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var v=.5-.5*g;c<v?c=0:(c=(c-v)/g)>1&&(c=1)}return c*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/t,r=this.s.v/t+n,i=this.e.v/t+n;if(r>i){var a=r;r=i,i=a}this.finalS=r,this.finalE=i}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(e,t,n){return new r(e,t,n)}}}();function TextAnimatorDataProperty(e,t,n){var r={propType:!1},i=PropertyFactory.getProp,a=t.a;this.a={r:a.r?i(e,a.r,0,degToRads,n):r,rx:a.rx?i(e,a.rx,0,degToRads,n):r,ry:a.ry?i(e,a.ry,0,degToRads,n):r,sk:a.sk?i(e,a.sk,0,degToRads,n):r,sa:a.sa?i(e,a.sa,0,degToRads,n):r,s:a.s?i(e,a.s,1,.01,n):r,a:a.a?i(e,a.a,1,0,n):r,o:a.o?i(e,a.o,0,.01,n):r,p:a.p?i(e,a.p,1,0,n):r,sw:a.sw?i(e,a.sw,0,0,n):r,sc:a.sc?i(e,a.sc,1,0,n):r,fc:a.fc?i(e,a.fc,1,0,n):r,fh:a.fh?i(e,a.fh,0,0,n):r,fs:a.fs?i(e,a.fs,0,.01,n):r,fb:a.fb?i(e,a.fb,0,.01,n):r,t:a.t?i(e,a.t,0,0,n):r},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,n),this.s.t=t.s.t}function TextAnimatorProperty(e,t,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var e,t,n=this._textData.a.length,r=PropertyFactory.getProp;for(e=0;e<n;e+=1)t=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:r(this._elem,this._textData.p.a,0,0,this),f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:r(this._elem,this._textData.p.r,0,0,this),p:r(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,r,i,a,s,o,l,c,u,d,h,p,f,m,g,v,y,x,b,w=this._moreOptions.alignment.v,S=this._animatorsData,_=this._textData,A=this.mHelper,E=this._renderType,C=this.renderedLetters.length,M=e.l;if(this._hasMaskedPath){if(b=this._pathData.m,!this._pathData.n||this._pathData._mdf){var T,k=b.v;for(this._pathData.r.v&&(k=k.reverse()),s={tLength:0,segments:[]},a=k._length-1,v=0,i=0;i<a;i+=1)T=bez.buildBezierData(k.v[i],k.v[i+1],[k.o[i][0]-k.v[i][0],k.o[i][1]-k.v[i][1]],[k.i[i+1][0]-k.v[i+1][0],k.i[i+1][1]-k.v[i+1][1]]),s.tLength+=T.segmentLength,s.segments.push(T),v+=T.segmentLength;i=a,b.v.c&&(T=bez.buildBezierData(k.v[i],k.v[0],[k.o[i][0]-k.v[i][0],k.o[i][1]-k.v[i][1]],[k.i[0][0]-k.v[0][0],k.i[0][1]-k.v[0][1]]),s.tLength+=T.segmentLength,s.segments.push(T),v+=T.segmentLength),this._pathData.pi=s}if(s=this._pathData.pi,o=this._pathData.f.v,h=0,d=1,c=0,u=!0,m=s.segments,o<0&&b.v.c)for(s.tLength<Math.abs(o)&&(o=-Math.abs(o)%s.tLength),d=(f=m[h=m.length-1].points).length-1;o<0;)o+=f[d].partialLength,(d-=1)<0&&(d=(f=m[h-=1].points).length-1);p=(f=m[h].points)[d-1],g=(l=f[d]).partialLength}a=M.length,n=0,r=0;var P,R,D,I,B,j=1.2*e.finalSize*.714,F=!0;D=S.length;var L,O,N,z,U,H,G,V,W,q,X,J,Y=-1,K=o,Z=h,Q=d,$=-1,ee="",te=this.defaultPropsArray;if(2===e.j||1===e.j){var ne=0,re=0,ie=2===e.j?-.5:-1,ae=0,se=!0;for(i=0;i<a;i+=1)if(M[i].n){for(ne&&(ne+=re);ae<i;)M[ae].animatorJustifyOffset=ne,ae+=1;ne=0,se=!0}else{for(R=0;R<D;R+=1)(P=S[R].a).t.propType&&(se&&2===e.j&&(re+=P.t.v*ie),(B=S[R].s.getMult(M[i].anIndexes[R],_.a[R].s.totalChars)).length?ne+=P.t.v*B[0]*ie:ne+=P.t.v*B*ie);se=!1}for(ne&&(ne+=re);ae<i;)M[ae].animatorJustifyOffset=ne,ae+=1}for(i=0;i<a;i+=1){if(A.reset(),z=1,M[i].n)n=0,r+=e.yOffset,r+=F?1:0,o=K,F=!1,this._hasMaskedPath&&(d=Q,p=(f=m[h=Z].points)[d-1],g=(l=f[d]).partialLength,c=0),ee="",X="",W="",J="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if($!==M[i].line){switch(e.j){case 1:o+=v-e.lineWidths[M[i].line];break;case 2:o+=(v-e.lineWidths[M[i].line])/2}$=M[i].line}Y!==M[i].ind&&(M[Y]&&(o+=M[Y].extra),o+=M[i].an/2,Y=M[i].ind),o+=w[0]*M[i].an*.005;var oe=0;for(R=0;R<D;R+=1)(P=S[R].a).p.propType&&((B=S[R].s.getMult(M[i].anIndexes[R],_.a[R].s.totalChars)).length?oe+=P.p.v[0]*B[0]:oe+=P.p.v[0]*B),P.a.propType&&((B=S[R].s.getMult(M[i].anIndexes[R],_.a[R].s.totalChars)).length?oe+=P.a.v[0]*B[0]:oe+=P.a.v[0]*B);for(u=!0,this._pathData.a.v&&(o=.5*M[0].an+(v-this._pathData.f.v-.5*M[0].an-.5*M[M.length-1].an)*Y/(a-1),o+=this._pathData.f.v);u;)c+g>=o+oe||!f?(y=(o+oe-c)/l.partialLength,O=p.point[0]+(l.point[0]-p.point[0])*y,N=p.point[1]+(l.point[1]-p.point[1])*y,A.translate(-w[0]*M[i].an*.005,-w[1]*j*.01),u=!1):f&&(c+=l.partialLength,(d+=1)>=f.length&&(d=0,m[h+=1]?f=m[h].points:b.v.c?(d=0,f=m[h=0].points):(c-=l.partialLength,f=null)),f&&(p=l,g=(l=f[d]).partialLength));L=M[i].an/2-M[i].add,A.translate(-L,0,0)}else L=M[i].an/2-M[i].add,A.translate(-L,0,0),A.translate(-w[0]*M[i].an*.005,-w[1]*j*.01,0);for(R=0;R<D;R+=1)(P=S[R].a).t.propType&&(B=S[R].s.getMult(M[i].anIndexes[R],_.a[R].s.totalChars),0===n&&0===e.j||(this._hasMaskedPath?B.length?o+=P.t.v*B[0]:o+=P.t.v*B:B.length?n+=P.t.v*B[0]:n+=P.t.v*B));for(e.strokeWidthAnim&&(H=e.sw||0),e.strokeColorAnim&&(U=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(G=[e.fc[0],e.fc[1],e.fc[2]]),R=0;R<D;R+=1)(P=S[R].a).a.propType&&((B=S[R].s.getMult(M[i].anIndexes[R],_.a[R].s.totalChars)).length?A.translate(-P.a.v[0]*B[0],-P.a.v[1]*B[1],P.a.v[2]*B[2]):A.translate(-P.a.v[0]*B,-P.a.v[1]*B,P.a.v[2]*B));for(R=0;R<D;R+=1)(P=S[R].a).s.propType&&((B=S[R].s.getMult(M[i].anIndexes[R],_.a[R].s.totalChars)).length?A.scale(1+(P.s.v[0]-1)*B[0],1+(P.s.v[1]-1)*B[1],1):A.scale(1+(P.s.v[0]-1)*B,1+(P.s.v[1]-1)*B,1));for(R=0;R<D;R+=1){if(P=S[R].a,B=S[R].s.getMult(M[i].anIndexes[R],_.a[R].s.totalChars),P.sk.propType&&(B.length?A.skewFromAxis(-P.sk.v*B[0],P.sa.v*B[1]):A.skewFromAxis(-P.sk.v*B,P.sa.v*B)),P.r.propType&&(B.length?A.rotateZ(-P.r.v*B[2]):A.rotateZ(-P.r.v*B)),P.ry.propType&&(B.length?A.rotateY(P.ry.v*B[1]):A.rotateY(P.ry.v*B)),P.rx.propType&&(B.length?A.rotateX(P.rx.v*B[0]):A.rotateX(P.rx.v*B)),P.o.propType&&(B.length?z+=(P.o.v*B[0]-z)*B[0]:z+=(P.o.v*B-z)*B),e.strokeWidthAnim&&P.sw.propType&&(B.length?H+=P.sw.v*B[0]:H+=P.sw.v*B),e.strokeColorAnim&&P.sc.propType)for(V=0;V<3;V+=1)B.length?U[V]+=(P.sc.v[V]-U[V])*B[0]:U[V]+=(P.sc.v[V]-U[V])*B;if(e.fillColorAnim&&e.fc){if(P.fc.propType)for(V=0;V<3;V+=1)B.length?G[V]+=(P.fc.v[V]-G[V])*B[0]:G[V]+=(P.fc.v[V]-G[V])*B;P.fh.propType&&(G=B.length?addHueToRGB(G,P.fh.v*B[0]):addHueToRGB(G,P.fh.v*B)),P.fs.propType&&(G=B.length?addSaturationToRGB(G,P.fs.v*B[0]):addSaturationToRGB(G,P.fs.v*B)),P.fb.propType&&(G=B.length?addBrightnessToRGB(G,P.fb.v*B[0]):addBrightnessToRGB(G,P.fb.v*B))}}for(R=0;R<D;R+=1)(P=S[R].a).p.propType&&(B=S[R].s.getMult(M[i].anIndexes[R],_.a[R].s.totalChars),this._hasMaskedPath?B.length?A.translate(0,P.p.v[1]*B[0],-P.p.v[2]*B[1]):A.translate(0,P.p.v[1]*B,-P.p.v[2]*B):B.length?A.translate(P.p.v[0]*B[0],P.p.v[1]*B[1],-P.p.v[2]*B[2]):A.translate(P.p.v[0]*B,P.p.v[1]*B,-P.p.v[2]*B));if(e.strokeWidthAnim&&(W=H<0?0:H),e.strokeColorAnim&&(q="rgb("+Math.round(255*U[0])+","+Math.round(255*U[1])+","+Math.round(255*U[2])+")"),e.fillColorAnim&&e.fc&&(X="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),this._hasMaskedPath){if(A.translate(0,-e.ls),A.translate(0,w[1]*j*.01+r,0),this._pathData.p.v){x=(l.point[1]-p.point[1])/(l.point[0]-p.point[0]);var le=180*Math.atan(x)/Math.PI;l.point[0]<p.point[0]&&(le+=180),A.rotate(-le*Math.PI/180)}A.translate(O,N,0),o-=w[0]*M[i].an*.005,M[i+1]&&Y!==M[i+1].ind&&(o+=M[i].an/2,o+=.001*e.tr*e.finalSize)}else{switch(A.translate(n,r,0),e.ps&&A.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:A.translate(M[i].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[M[i].line]),0,0);break;case 2:A.translate(M[i].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[M[i].line])/2,0,0)}A.translate(0,-e.ls),A.translate(L,0,0),A.translate(w[0]*M[i].an*.005,w[1]*j*.01,0),n+=M[i].l+.001*e.tr*e.finalSize}"html"===E?ee=A.toCSS():"svg"===E?ee=A.to2dCSS():te=[A.props[0],A.props[1],A.props[2],A.props[3],A.props[4],A.props[5],A.props[6],A.props[7],A.props[8],A.props[9],A.props[10],A.props[11],A.props[12],A.props[13],A.props[14],A.props[15]],J=z}C<=i?(I=new LetterProps(J,W,q,X,ee,te),this.renderedLetters.push(I),C+=1,this.lettersChangedFlag=!0):(I=this.renderedLetters[i],this.lettersChangedFlag=I.update(J,W,q,X,ee,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(e,t,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,n),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,t){var n,r,i=t.length,a="";for(n=0;n<i;n+=1)"sh"===t[n].ty&&(r=t[n].ks.k,a+=buildShapeString(r,r.i.length,!0,e));return a},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,n,r,i){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n])/2,0,0)}t.translate(r,i,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,t,n){this.textSpans=[],this.renderType="svg",this.initElement(e,t,n)}function ISolidElement(e,t,n){this.initElement(e,t,n)}function NullElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initFrame(),this.initTransform(e,t,n),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(e,t,n){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(t&&t.title){var r=createNS("title"),i=createElementID();r.setAttribute("id",i),r.textContent=t.title,this.svgElement.appendChild(r),n+=i}if(t&&t.description){var a=createNS("desc"),s=createElementID();a.setAttribute("id",s),a.textContent=t.description,this.svgElement.appendChild(a),n+=" "+s}n&&this.svgElement.setAttribute("aria-labelledby",n);var o=createNS("defs");this.svgElement.appendChild(o);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,n=e.length,r=[],i="";t<n;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(r.push(i),i=""):i+=e[t],t+=1;return r.push(i),r},SVGTextLottieElement.prototype.buildShapeData=function(e,t){if(e.shapes&&e.shapes.length){var n=e.shapes[0];if(n.it){var r=n.it[n.it.length-1];r.s&&(r.s.k[0]=t,r.s.k[1]=t)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){var e,t;this.addDynamicProperty(this);var n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var r=this.globalData.fontManager.getFontByName(n.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var i=n.fWeight,a=n.fStyle;this.layerElement.setAttribute("font-style",a),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",n.t);var s,o=n.l||[],l=!!this.globalData.fontManager.chars;t=o.length;var c=this.mHelper,u=this.data.singleShape,d=0,h=0,p=!0,f=.001*n.tr*n.finalSize;if(!u||l||n.sz){var m,g=this.textSpans.length;for(e=0;e<t;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!l||!u||0===e){if(s=g>e?this.textSpans[e].span:createNS(l?"g":"text"),g<=e){if(s.setAttribute("stroke-linecap","butt"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=s,l){var v=createNS("g");s.appendChild(v),this.textSpans[e].childSpan=v}this.textSpans[e].span=s,this.layerElement.appendChild(s)}s.style.display="inherit"}if(c.reset(),u&&(o[e].n&&(d=-f,h+=n.yOffset,h+=p?1:0,p=!1),this.applyTextPropertiesToMatrix(n,c,o[e].line,d,h),d+=o[e].l||0,d+=f),l){var y;if(1===(m=this.globalData.fontManager.getCharData(n.finalText[e],r.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily)).t)y=new SVGCompElement(m.data,this.globalData,this);else{var x=emptyShapeData;m.data&&m.data.shapes&&(x=this.buildShapeData(m.data,n.finalSize)),y=new SVGShapeElement(x,this.globalData,this)}if(this.textSpans[e].glyph){var b=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(b.layerElement),b.destroy()}this.textSpans[e].glyph=y,y._debug=!0,y.prepareFrame(0),y.renderFrame(),this.textSpans[e].childSpan.appendChild(y.layerElement),1===m.t&&this.textSpans[e].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else u&&s.setAttribute("transform","translate("+c.props[12]+","+c.props[13]+")"),s.textContent=o[e].val,s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}u&&s&&s.setAttribute("d","")}else{var w=this.textContainer,S="start";switch(n.j){case 1:S="end";break;case 2:S="middle";break;default:S="start"}w.setAttribute("text-anchor",S),w.setAttribute("letter-spacing",f);var _=this.buildTextContents(n.finalText);for(t=_.length,h=n.ps?n.ps[1]+n.ascent:0,e=0;e<t;e+=1)(s=this.textSpans[e].span||createNS("tspan")).textContent=_[e],s.setAttribute("x",0),s.setAttribute("y",h),s.style.display="inherit",w.appendChild(s),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=s,h+=n.finalLineHeight;this.layerElement.appendChild(w)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,t,n=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<n;e+=1)(t=this.textSpans[e].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var n,r,i,a=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;for(t=s.length,e=0;e<t;e+=1)s[e].n||(n=a[e],r=this.textSpans[e].span,(i=this.textSpans[e].glyph)&&i.renderFrame(),n._mdf.m&&r.setAttribute("transform",n.m),n._mdf.o&&r.setAttribute("opacity",n.o),n._mdf.sw&&r.setAttribute("stroke-width",n.sw),n._mdf.sc&&r.setAttribute("stroke",n.sc),n._mdf.fc&&r.setAttribute("fill",n.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var n=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",e.w),r.setAttribute("height",e.h),r.setAttribute("x",0),r.setAttribute("y",0);var i=createElementID();n.setAttribute("id",i),n.appendChild(r),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+i+")"),t.appendChild(n),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var t=0,n=this.layers.length;for(t=0;t<n;t+=1)if(this.layers[t].ind===e)return t;return-1},SVGRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){t[e]=!0;var n=this.createItem(this.layers[e]);if(t[e]=n,getExpressionsPlugin()&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,e),this.layers[e].tt){var r="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(-1===r)return;if(this.elements[r]&&!0!==this.elements[r]){var i=t[r].getMatte(this.layers[e].tt);n.setMatte(i)}else this.buildItem(r),this.addPendingElement(n)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===e){var r="tp"in e.data?this.findIndexByInd(e.data.tp):t-1,i=this.elements[r].getMatte(this.layers[t].tt);e.setMatte(i);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){var t;null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<n;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){for(var r,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(n,r):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var n,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(e){var t,n=e.length,r="_";for(t=0;t<n;t+=1)r+=e[t].transform.key+"_";var i=this.sequences[r];return i||(i={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=i,this.sequenceList.push(i)),i},processSequence:function(e,t){for(var n=0,r=e.transforms.length,i=t;n<r&&!t;){if(e.transforms[n].transform.mProps._mdf){i=!0;break}n+=1}if(i)for(e.finalTransform.reset(),n=r-1;n>=0;n-=1)e.finalTransform.multiply(e.transforms[n].transform.mProps.v);e._mdf=i},processSequences:function(e){var t,n=this.sequenceList.length;for(t=0;t<n;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",t=null,n=null,r=null;function i(){t||(r=function(){var t=createNS("svg"),n=createNS("filter"),r=createNS("feColorMatrix");return n.setAttribute("id",e),r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),n.appendChild(r),t.appendChild(n),t.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(t.style.display="none"),t}(),document.body.appendChild(r),t=createTag("canvas"),(n=t.getContext("2d")).filter="url(#"+e+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}return{load:i,get:function(r){return t||i(),t.width=r.width,t.height=r.height,n.filter="url(#"+e+")",t}}};function createCanvas(e,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,t);var n=createTag("canvas");return n.width=e,n.height=t,n}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas},registeredEffects={};function CVEffects(e){var t,n,r=e.data.ef?e.data.ef.length:0;for(this.filters=[],t=0;t<r;t+=1){n=null;var i=e.data.ef[t].ty;registeredEffects[i]&&(n=new(0,registeredEffects[i].effect)(e.effectsManager.effectElements[t],e)),n&&this.filters.push(n)}this.filters.length&&e.addRenderableComponent(this)}function registerEffect(e,t){registeredEffects[e]={effect:t}}function CVMaskElement(e,t){var n;this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r=this.masksProperties.length,i=!1;for(n=0;n<r;n+=1)"n"!==this.masksProperties[n].mode&&(i=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var t,n=this.filters.length,r=[];for(t=0;t<n;t+=1)this.filters[t].type===e&&r.push(this.filters[t]);return r},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,n,r,i=this.element.finalTransform.mat,a=this.element.canvasContext,s=this.masksProperties.length;for(a.beginPath(),e=0;e<s;e+=1)if("n"!==this.masksProperties[e].mode){var o;this.masksProperties[e].inv&&(a.moveTo(0,0),a.lineTo(this.element.globalData.compSize.w,0),a.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),a.lineTo(0,this.element.globalData.compSize.h),a.lineTo(0,0)),r=this.viewData[e].v,t=i.applyToPointArray(r.v[0][0],r.v[0][1],0),a.moveTo(t[0],t[1]);var l=r._length;for(o=1;o<l;o+=1)n=i.applyToTriplePoints(r.o[o-1],r.i[o],r.v[o]),a.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=i.applyToTriplePoints(r.o[o-1],r.i[0],r.v[0]),a.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),a.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(e,t,n,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i,a=4;"rc"===t.ty?a=5:"el"===t.ty?a=6:"sr"===t.ty&&(a=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,a,e);var s,o=n.length;for(i=0;i<o;i+=1)n[i].closed||(s={transforms:r.addTransformSequence(n[i].transforms),trNodes:[]},this.styledShapes.push(s),n[i].elements.push(s))}function CVShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,n)}function CVTextElement(e,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,n)}function CVImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,n)}function CVSolidElement(e,t,n){this.initElement(e,t,n)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var e;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,e=0;e<15;e+=1){var t=new CanvasContext;this.stack[e]=t}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(e,t,n){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(e,t,n){this.initElement(e,t,n)}function HShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,n)}function HCameraElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,e.pe,0,0,this),e.ks.p.s?(this.px=r(this,e.ks.p.x,1,0,this),this.py=r(this,e.ks.p.y,1,0,this),this.pz=r(this,e.ks.p.z,1,0,this)):this.p=r(this,e.ks.p,1,0,this),e.ks.a&&(this.a=r(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var i,a=e.ks.or.k.length;for(i=0;i<a;i+=1)e.ks.or.k[i].to=null,e.ks.or.k[i].ti=null}this.or=r(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,e.ks.rx,0,degToRads,this),this.ry=r(this,e.ks.ry,0,degToRads,this),this.rz=r(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n)}function HybridRendererBase(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(e,t,n){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,t=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(t);var n=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0].getContext("2d");this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],t=e.getContext("2d");if(this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var n=assetLoader.getLumaCanvas(this.canvasContext.canvas);n.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(n,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var n={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},r={};if("fl"===e.ty||"st"===e.ty?(r.c=PropertyFactory.getProp(this,e.c,1,255,this),r.c.k||(n.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(r.s=PropertyFactory.getProp(this,e.s,1,null,this),r.e=PropertyFactory.getProp(this,e.e,1,null,this),r.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,e.g,this)),r.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty){if(n.lc=lineCapEnum[e.lc||2],n.lj=lineJoinEnum[e.lj||2],1==e.lj&&(n.ml=e.ml),r.w=PropertyFactory.getProp(this,e.w,0,null,this),r.w.k||(n.wi=r.w.v),e.d){var i=new DashProperty(this,e.d,"canvas",this);r.d=i,r.d.k||(n.da=r.d.dashArray,n.do=r.d.dashoffset[0])}}else n.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(n),r.style=n,r},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,n,r,i){var a,s,o,l,c,u,d=e.length-1,h=[],p=[],f=[].concat(i);for(a=d;a>=0;a-=1){if((l=this.searchProcessedElement(e[a]))?t[a]=n[l-1]:e[a]._shouldRender=r,"fl"===e[a].ty||"st"===e[a].ty||"gf"===e[a].ty||"gs"===e[a].ty)l?t[a].style.closed=!1:t[a]=this.createStyleElement(e[a],f),h.push(t[a].style);else if("gr"===e[a].ty){if(l)for(o=t[a].it.length,s=0;s<o;s+=1)t[a].prevViewData[s]=t[a].it[s];else t[a]=this.createGroupElement(e[a]);this.searchShapes(e[a].it,t[a].it,t[a].prevViewData,r,f)}else"tr"===e[a].ty?(l||(u=this.createTransformElement(e[a]),t[a]=u),f.push(t[a]),this.addTransformToStyleList(t[a])):"sh"===e[a].ty||"rc"===e[a].ty||"el"===e[a].ty||"sr"===e[a].ty?l||(t[a]=this.createShapeElement(e[a])):"tm"===e[a].ty||"rd"===e[a].ty||"pb"===e[a].ty||"zz"===e[a].ty||"op"===e[a].ty?(l?(c=t[a]).closed=!1:((c=ShapeModifiers.getModifier(e[a].ty)).init(this,e[a]),t[a]=c,this.shapeModifiers.push(c)),p.push(c)):"rp"===e[a].ty&&(l?(c=t[a]).closed=!0:(c=ShapeModifiers.getModifier(e[a].ty),t[a]=c,c.init(this,e,a,t),this.shapeModifiers.push(c),r=!1),p.push(c));this.addProcessedElement(e[a],a+1)}for(this.removeTransformFromStyleList(),this.closeStyles(h),d=p.length,a=0;a<d;a+=1)p[a].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,n,r,i,a,s,o,l,c=this.stylesList.length,u=this.globalData.renderer,d=this.globalData.canvasContext;for(e=0;e<c;e+=1)if(("st"!==(o=(l=this.stylesList[e]).type)&&"gs"!==o||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(u.save(),a=l.elements,"st"===o||"gs"===o?(u.ctxStrokeStyle("st"===o?l.co:l.grd),u.ctxLineWidth(l.wi),u.ctxLineCap(l.lc),u.ctxLineJoin(l.lj),u.ctxMiterLimit(l.ml||0)):u.ctxFillStyle("fl"===o?l.co:l.grd),u.ctxOpacity(l.coOp),"st"!==o&&"gs"!==o&&d.beginPath(),u.ctxTransform(l.preTransforms.finalTransform.props),n=a.length,t=0;t<n;t+=1){for("st"!==o&&"gs"!==o||(d.beginPath(),l.da&&(d.setLineDash(l.da),d.lineDashOffset=l.do)),i=(s=a[t].trNodes).length,r=0;r<i;r+=1)"m"===s[r].t?d.moveTo(s[r].p[0],s[r].p[1]):"c"===s[r].t?d.bezierCurveTo(s[r].pts[0],s[r].pts[1],s[r].pts[2],s[r].pts[3],s[r].pts[4],s[r].pts[5]):d.closePath();"st"!==o&&"gs"!==o||(u.ctxStroke(),l.da&&d.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&this.globalData.renderer.ctxFill(l.r),u.restore()}},CVShapeElement.prototype.renderShape=function(e,t,n,r){var i,a;for(a=e,i=t.length-1;i>=0;i-=1)"tr"===t[i].ty?(a=n[i].transform,this.renderShapeTransform(e,a)):"sh"===t[i].ty||"el"===t[i].ty||"rc"===t[i].ty||"sr"===t[i].ty?this.renderPath(t[i],n[i]):"fl"===t[i].ty?this.renderFill(t[i],n[i],a):"st"===t[i].ty?this.renderStroke(t[i],n[i],a):"gf"===t[i].ty||"gs"===t[i].ty?this.renderGradientFill(t[i],n[i],a):"gr"===t[i].ty?this.renderShape(a,t[i].it,n[i].it):t[i].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var n,r,i,a=e.trNodes,s=t.paths,o=s._length;a.length=0;var l=e.transforms.finalTransform;for(i=0;i<o;i+=1){var c=s.shapes[i];if(c&&c.v){for(r=c._length,n=1;n<r;n+=1)1===n&&a.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),a.push({t:"c",pts:l.applyToTriplePoints(c.o[n-1],c.i[n],c.v[n])});1===r&&a.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&r&&(a.push({t:"c",pts:l.applyToTriplePoints(c.o[n-1],c.i[0],c.v[0])}),a.push({t:"z"}))}}e.trNodes=a}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var n,r=t.styledShapes.length;for(n=0;n<r;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,n){var r=t.style;(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,n){var r,i=t.style;if(!i.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var a,s=this.globalData.canvasContext,o=t.s.v,l=t.e.v;if(1===e.t)r=s.createLinearGradient(o[0],o[1],l[0],l[1]);else{var c=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),u=Math.atan2(l[1]-o[1],l[0]-o[0]),d=t.h.v;d>=1?d=.99:d<=-1&&(d=-.99);var h=c*d,p=Math.cos(u+t.a.v)*h+o[0],f=Math.sin(u+t.a.v)*h+o[1];r=s.createRadialGradient(p,f,0,o[0],o[1],c)}var m=e.g.p,g=t.g.c,v=1;for(a=0;a<m;a+=1)t.g._hasOpacity&&t.g._collapsable&&(v=t.g.o[2*a+1]),r.addColorStop(g[4*a]/100,"rgba("+g[4*a+1]+","+g[4*a+2]+","+g[4*a+3]+","+v+")");i.grd=r}i.coOp=t.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(e,t,n){var r=t.style,i=t.d;i&&(i._mdf||this._isFirstFrame)&&(r.da=i.dashArray,r.do=i.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*n.opacity),(t.w._mdf||this._isFirstFrame)&&(r.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;e.sc&&(n=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var r,i,a,s,o,l,c,u,d,h,p,f,m=this.globalData.fontManager.getFontByName(e.f),g=e.l,v=this.mHelper;this.stroke=n,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,i=e.finalText.length;var y=this.data.singleShape,x=.001*e.tr*e.finalSize,b=0,w=0,S=!0,_=0;for(r=0;r<i;r+=1){s=(a=this.globalData.fontManager.getCharData(e.finalText[r],m.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&a.data||{},v.reset(),y&&g[r].n&&(b=-x,w+=e.yOffset,w+=S?1:0,S=!1),d=(c=s.shapes?s.shapes[0].it:[]).length,v.scale(e.finalSize/100,e.finalSize/100),y&&this.applyTextPropertiesToMatrix(e,v,g[r].line,b,w),p=createSizedArray(d-1);var A=0;for(u=0;u<d;u+=1)if("sh"===c[u].ty){for(l=c[u].ks.k.i.length,h=c[u].ks.k,f=[],o=1;o<l;o+=1)1===o&&f.push(v.applyToX(h.v[0][0],h.v[0][1],0),v.applyToY(h.v[0][0],h.v[0][1],0)),f.push(v.applyToX(h.o[o-1][0],h.o[o-1][1],0),v.applyToY(h.o[o-1][0],h.o[o-1][1],0),v.applyToX(h.i[o][0],h.i[o][1],0),v.applyToY(h.i[o][0],h.i[o][1],0),v.applyToX(h.v[o][0],h.v[o][1],0),v.applyToY(h.v[o][0],h.v[o][1],0));f.push(v.applyToX(h.o[o-1][0],h.o[o-1][1],0),v.applyToY(h.o[o-1][0],h.o[o-1][1],0),v.applyToX(h.i[0][0],h.i[0][1],0),v.applyToY(h.i[0][0],h.i[0][1],0),v.applyToX(h.v[0][0],h.v[0][1],0),v.applyToY(h.v[0][0],h.v[0][1],0)),p[A]=f,A+=1}y&&(b+=g[r].l,b+=x),this.textSpans[_]?this.textSpans[_].elem=p:this.textSpans[_]={elem:p},_+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,n,r,i,a;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var s,o=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;t=l.length;var c,u,d=null,h=null,p=null,f=this.globalData.renderer;for(e=0;e<t;e+=1)if(!l[e].n){if((s=o[e])&&(f.save(),f.ctxTransform(s.p),f.ctxOpacity(s.o)),this.fill){for(s&&s.fc?d!==s.fc&&(f.ctxFillStyle(s.fc),d=s.fc):d!==this.values.fill&&(d=this.values.fill,f.ctxFillStyle(this.values.fill)),r=(c=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(a=(u=c[n]).length,this.globalData.canvasContext.moveTo(u[0],u[1]),i=2;i<a;i+=6)this.globalData.canvasContext.bezierCurveTo(u[i],u[i+1],u[i+2],u[i+3],u[i+4],u[i+5]);this.globalData.canvasContext.closePath(),f.ctxFill()}if(this.stroke){for(s&&s.sw?p!==s.sw&&(p=s.sw,f.ctxLineWidth(s.sw)):p!==this.values.sWidth&&(p=this.values.sWidth,f.ctxLineWidth(this.values.sWidth)),s&&s.sc?h!==s.sc&&(h=s.sc,f.ctxStrokeStyle(s.sc)):h!==this.values.stroke&&(h=this.values.stroke,f.ctxStrokeStyle(this.values.stroke)),r=(c=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(a=(u=c[n]).length,this.globalData.canvasContext.moveTo(u[0],u[1]),i=2;i<a;i+=6)this.globalData.canvasContext.bezierCurveTo(u[i],u[i+1],u[i+2],u[i+3],u[i+4],u[i+5]);this.globalData.canvasContext.closePath(),f.ctxStroke()}s&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,n,r=e.getContext("2d"),i=this.img.width,a=this.img.height,s=i/a,o=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;s>o&&"xMidYMid slice"===l||s<o&&"xMidYMid slice"!==l?t=(n=a)*o:n=(t=i)/o,r.drawImage(this.img,(i-t)/2,(a-n)/2,t,n,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){1===e[0]&&0===e[1]&&0===e[4]&&1===e[5]&&0===e[12]&&0===e[13]||this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,t,n,r){this.canvasContext.fillRect(e,t,n,r)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){this.renderConfig.clearCanvas?(e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var n="0px 0px 0px";t.transformOrigin=n,t.mozTransformOrigin=n,t.webkitTransformOrigin=n,t["-webkit-transform"]=n,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,t){var n,r,i,a;if(this.reset(),e?(n=e,r=t,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=r):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,r=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=r*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var s=this.renderConfig.preserveAspectRatio.split(" "),o=s[1]||"meet",l=s[0]||"xMidYMid",c=l.substr(0,4),u=l.substr(4);i=n/r,(a=this.transformCanvas.w/this.transformCanvas.h)>i&&"meet"===o||a<i&&"slice"===o?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===c&&(a<i&&"meet"===o||a>i&&"slice"===o)?(n-this.transformCanvas.w*(r/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===c&&(a<i&&"meet"===o||a>i&&"slice"===o)?(n-this.transformCanvas.w*(r/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===u&&(a>i&&"meet"===o||a<i&&"slice"===o)?(r-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===u&&(a>i&&"meet"===o||a<i&&"slice"===o)?(r-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){var n;this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var r=this.layers.length;for(this.completeLayers||this.checkLayers(e),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(e-this.layers[n].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){var n=this.createItem(this.layers[e],this,this.globalData);t[e]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=0;for(t=this._length;t<e;t+=1)this.stack[t]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var t,n=this.stack[this.cArrPos],r=n.transform,i=this.cTr.props;for(t=0;t<16;t+=1)i[t]=r[t];if(e){this.nativeContext.restore();var a=this.stack[this.cArrPos+1];this.appliedFillStyle=a.fillStyle,this.appliedStrokeStyle=a.strokeStyle,this.appliedLineWidth=a.lineWidth,this.appliedLineCap=a.lineCap,this.appliedLineJoin=a.lineJoin,this.appliedMiterLimit=a.miterLimit}this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),(e||-1!==n.opacity&&this.currentOpacity!==n.opacity)&&(this.nativeContext.globalAlpha=n.opacity,this.currentOpacity=n.opacity),this.currentFillStyle=n.fillStyle,this.currentStrokeStyle=n.strokeStyle,this.currentLineWidth=n.lineWidth,this.currentLineCap=n.lineCap,this.currentLineJoin=n.lineJoin,this.currentMiterLimit=n.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n,r=this.stack[this.cArrPos];for(n=0;n<16;n+=1)r.transform[n]=t[n];this.cArrPos+=1;var i=this.stack[this.cArrPos];i.opacity=r.opacity,i.fillStyle=r.fillStyle,i.strokeStyle=r.strokeStyle,i.lineWidth=r.lineWidth,i.lineCap=r.lineCap,i.lineJoin=r.lineJoin,i.miterLimit=r.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var n=t.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(e){var t=this.stack[this.cArrPos].opacity;t*=e<0?0:e,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,t,n,r){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,t,n,r)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)t=e[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var n,r,i,a,s,o=e.sh.v,l=e.transformers,c=o._length;if(!(c<=1)){for(n=0;n<c-1;n+=1)r=this.getTransformedPoint(l,o.v[n]),i=this.getTransformedPoint(l,o.o[n]),a=this.getTransformedPoint(l,o.i[n+1]),s=this.getTransformedPoint(l,o.v[n+1]),this.checkBounds(r,i,a,s,t);o.c&&(r=this.getTransformedPoint(l,o.v[n]),i=this.getTransformedPoint(l,o.o[n]),a=this.getTransformedPoint(l,o.i[0]),s=this.getTransformedPoint(l,o.v[0]),this.checkBounds(r,i,a,s,t))}},HShapeElement.prototype.checkBounds=function(e,t,n,r,i){this.getBoundsOfCurve(e,t,n,r);var a=this.shapeBoundingBox;i.x=bmMin(a.left,i.x),i.xMax=bmMax(a.right,i.xMax),i.y=bmMin(a.top,i.y),i.yMax=bmMax(a.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,n,r){for(var i,a,s,o,l,c,u,d=[[e[0],r[0]],[e[1],r[1]]],h=0;h<2;++h)a=6*e[h]-12*t[h]+6*n[h],i=-3*e[h]+9*t[h]-9*n[h]+3*r[h],s=3*t[h]-3*e[h],a|=0,s|=0,0===(i|=0)&&0===a||(0===i?(o=-s/a)>0&&o<1&&d[h].push(this.calculateF(o,e,t,n,r,h)):(l=a*a-4*s*i)>=0&&((c=(-a+bmSqrt(l))/(2*i))>0&&c<1&&d[h].push(this.calculateF(c,e,t,n,r,h)),(u=(-a-bmSqrt(l))/(2*i))>0&&u<1&&d[h].push(this.calculateF(u,e,t,n,r,h))));this.shapeBoundingBox.left=bmMin.apply(null,d[0]),this.shapeBoundingBox.top=bmMin.apply(null,d[1]),this.shapeBoundingBox.right=bmMax.apply(null,d[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,d[1])},HShapeElement.prototype.calculateF=function(e,t,n,r,i,a){return bmPow(1-e,3)*t[a]+3*bmPow(1-e,2)*e*n[a]+3*(1-e)*bmPow(e,2)*r[a]+bmPow(e,3)*i[a]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)e[n]&&e[n].sh?this.calculateShapeBoundingBox(e[n],t):e[n]&&e[n].it?this.calculateBoundingBox(e[n].it,t):e[n]&&e[n].style&&e[n].w&&this.expandStrokeBoundingBox(e[n].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,t){var n=0;if(e.keyframes){for(var r=0;r<e.keyframes.length;r+=1){var i=e.keyframes[r].s;i>n&&(n=i)}n*=e.mult}else n=e.v*e.mult;t.x-=n,t.xMax+=n,t.y-=n,t.yMax+=n},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var n=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),n=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),n=!0),n||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,i="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=i,r.webkitTransform=i}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,n=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=n,t.color=n,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var r,i,a=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",a.fClass)this.innerElem.className=a.fClass;else{t.fontFamily=a.fFamily;var s=e.fWeight,o=e.fStyle;t.fontStyle=o,t.fontWeight=s}var l,c,u,d=e.l;i=d.length;var h,p=this.mHelper,f="",m=0;for(r=0;r<i;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[m]?l=this.textPaths[m]:((l=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),l.setAttribute("stroke-linejoin",lineJoinEnum[2]),l.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[m]?u=(c=this.textSpans[m]).children[0]:((c=createTag("div")).style.lineHeight=0,(u=createNS("svg")).appendChild(l),styleDiv(c)))):this.isMasked?l=this.textPaths[m]?this.textPaths[m]:createNS("text"):this.textSpans[m]?(c=this.textSpans[m],l=this.textPaths[m]):(styleDiv(c=createTag("span")),styleDiv(l=createTag("span")),c.appendChild(l)),this.globalData.fontManager.chars){var g,v=this.globalData.fontManager.getCharData(e.finalText[r],a.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(g=v?v.data:null,p.reset(),g&&g.shapes&&g.shapes.length&&(h=g.shapes[0].it,p.scale(e.finalSize/100,e.finalSize/100),f=this.createPathShape(p,h),l.setAttribute("d",f)),this.isMasked)this.innerElem.appendChild(l);else{if(this.innerElem.appendChild(c),g&&g.shapes){document.body.appendChild(u);var y=u.getBBox();u.setAttribute("width",y.width+2),u.setAttribute("height",y.height+2),u.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2));var x=u.style,b="translate("+(y.x-1)+"px,"+(y.y-1)+"px)";x.transform=b,x.webkitTransform=b,d[r].yOffset=y.y-1}else u.setAttribute("width",1),u.setAttribute("height",1);c.appendChild(u)}}else if(l.textContent=d[r].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(l);else{this.innerElem.appendChild(c);var w=l.style,S="translate3d(0,"+-e.finalSize/1.2+"px,0)";w.transform=S,w.webkitTransform=S}this.isMasked?this.textSpans[m]=l:this.textSpans[m]=c,this.textSpans[m].style.display="block",this.textPaths[m]=l,m+=1}for(;m<this.textSpans.length;)this.textSpans[m].style.display="none",m+=1},HTextElement.prototype.renderInnerContent=function(){var e;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=t,e.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var n,r,i,a,s,o=0,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;for(r=c.length,n=0;n<r;n+=1)c[n].n?o+=1:(a=this.textSpans[n],s=this.textPaths[n],i=l[o],o+=1,i._mdf.m&&(this.isMasked?a.setAttribute("transform",i.m):(a.style.webkitTransform=i.m,a.style.transform=i.m)),a.style.opacity=i.o,i.sw&&i._mdf.sw&&s.setAttribute("stroke-width",i.sw),i.sc&&i._mdf.sc&&s.setAttribute("stroke",i.sc),i.fc&&i._mdf.fc&&(s.setAttribute("fill",i.fc),s.style.color=i.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.innerElem.getBBox();if(this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.svgElement.setAttribute("width",u.width)),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.svgElement.setAttribute("height",u.height)),this.currentBBox.w!==u.width+2||this.currentBBox.h!==u.height+2||this.currentBBox.x!==u.x-1||this.currentBBox.y!==u.y-1){this.currentBBox.w=u.width+2,this.currentBBox.h=u.height+2,this.currentBBox.x=u.x-1,this.currentBBox.y=u.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var d="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=d,e.webkitTransform=d}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,n,r,i=this.comp.threeDElements.length;for(e=0;e<i;e+=1)if("3d"===(t=this.comp.threeDElements[e]).type){n=t.perspectiveElem.style,r=t.container.style;var a=this.pe.v+"px",s="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=a,n.webkitPerspective=a,r.transformOrigin=s,r.mozTransformOrigin=s,r.webkitTransformOrigin=s,n.transform=o,n.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,n=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)n=this.hierarchy[e].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=t=this.hierarchy.length-1;e>=0;e-=1){var r=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i;i=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var a=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),s=[i[0]/a,i[1]/a,i[2]/a],o=Math.sqrt(s[2]*s[2]+s[0]*s[0]),l=Math.atan2(s[1],o),c=Math.atan2(s[0],-s[2]);this.mat.rotateY(c).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var u=!this._prevMat.equals(this.mat);if((u||this.pe._mdf)&&this.comp.threeDElements){var d,h,p;for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)if("3d"===(d=this.comp.threeDElements[e]).type){if(u){var f=this.mat.toCSS();(p=d.container.style).transform=f,p.webkitTransform=f}this.pe._mdf&&((h=d.perspectiveElem.style).perspective=this.pe.v+"px",h.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){var r=this.layers[t];if(r.ddd&&this.supports3d)this.addTo3dContainer(n,t);else if(this.threeDElements)this.addTo3dContainer(n,t);else{for(var i,a,s=0;s<t;)this.elements[s]&&!0!==this.elements[s]&&this.elements[s].getBaseElement&&(a=this.elements[s],i=(this.layers[s].ddd?this.getThreeDContainerByPos(s):a.getBaseElement())||i),s+=1;i?r.ddd&&this.supports3d||this.layerElement.insertBefore(n,i):r.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,t){var n,r,i=createTag("div");styleDiv(i);var a=createTag("div");if(styleDiv(a),"3d"===t){(n=i.style).width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var s="50% 50%";n.webkitTransformOrigin=s,n.mozTransformOrigin=s,n.transformOrigin=s;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(r=a.style).transform=o,r.webkitTransform=o}i.appendChild(a);var l={container:a,perspectiveElem:i,startPos:e,endPos:e,type:t};return this.threeDElements.push(l),l},HybridRendererBase.prototype.build3dContainers=function(){var e,t,n=this.layers.length,r="";for(e=0;e<n;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?("3d"!==r&&(r="3d",t=this.createThreeDContainer(e,"3d")),t.endPos=Math.max(t.endPos,e)):("2d"!==r&&(r="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e));for(e=(n=this.threeDElements.length)-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,t){for(var n=0,r=this.threeDElements.length;n<r;){if(t<=this.threeDElements[n].endPos){for(var i,a=this.threeDElements[n].startPos;a<t;)this.elements[a]&&this.elements[a].getBaseElement&&(i=this.elements[a].getBaseElement()),a+=1;i?this.threeDElements[n].container.insertBefore(e,i):this.threeDElements[n].container.appendChild(e);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(e){var t=createTag("div"),n=this.animationItem.wrapper,r=t.style;r.width=e.w+"px",r.height=e.h+"px",this.resizerElem=t,styleDiv(t),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),n.appendChild(t),r.overflow="hidden";var i=createNS("svg");i.setAttribute("width","1"),i.setAttribute("height","1"),styleDiv(i),this.resizerElem.appendChild(i);var a=createNS("defs");i.appendChild(a),this.data=e,this.setupGlobalData(e,i),this.globalData.defs=a,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e,t,n,r,i=this.animationItem.wrapper.offsetWidth,a=this.animationItem.wrapper.offsetHeight,s=i/a;this.globalData.compSize.w/this.globalData.compSize.h>s?(e=i/this.globalData.compSize.w,t=i/this.globalData.compSize.w,n=0,r=(a-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(e=a/this.globalData.compSize.h,t=a/this.globalData.compSize.h,n=(i-this.globalData.compSize.w*(a/this.globalData.compSize.h))/2,r=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+n+","+r+",0,1)",o.transform=o.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,n=this.globalData.compSize.h,r=this.threeDElements.length;for(e=0;e<r;e+=1){var i=this.threeDElements[e].perspectiveElem.style;i.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(n,2))+"px",i.perspective=i.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var t,n=e.length,r=createTag("div");for(t=0;t<n;t+=1)if(e[t].xt){var i=this.createComp(e[t],r,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var n,r=0;r<t;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(e,n):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(e){function t(t){for(var n=0,r=e.layers.length;n<r;){if(e.layers[n].nm===t||e.layers[n].ind===t)return e.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t};function _typeof$2(e){return _typeof$2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(e)}function seedRandom(e,t){var n,r=this,i=256,a="random",s=t.pow(i,6),o=t.pow(2,52),l=2*o,c=i-1;function u(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<i;)o[a]=a++;for(a=0;a<i;a++)o[a]=o[s=c&s+e[a%n]+(t=o[a])],o[s]=t;r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=c&a+1],n=n*i+o[c&(o[a]=o[s=c&s+t])+(o[s]=t)];return r.i=a,r.j=s,n}}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){var n,r=[],i=_typeof$2(e);if(t&&"object"==i)for(n in e)try{r.push(h(e[n],t-1))}catch(a){}return r.length?r:"string"==i?e:e+"\0"}function p(e,t){for(var n,r=e+"",i=0;i<r.length;)t[c&i]=c&(n^=19*t[c&i])+r.charCodeAt(i++);return f(t)}function f(e){return String.fromCharCode.apply(0,e)}t["seed"+a]=function(c,m,g){var v=[],y=p(h((m=!0===m?{entropy:!0}:m||{}).entropy?[c,f(e)]:null===c?function(){try{if(n)return f(n.randomBytes(i));var t=new Uint8Array(i);return(r.crypto||r.msCrypto).getRandomValues(t),f(t)}catch(o){var a=r.navigator,s=a&&a.plugins;return[+new Date,r,s,r.screen,f(e)]}}():c,3),v),x=new u(v),b=function(){for(var e=x.g(6),t=s,n=0;e<o;)e=(e+n)*i,t*=i,n=x.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|x.g(4)},b.quick=function(){return x.g(4)/4294967296},b.double=b,p(f(x.S),e),(m.pass||g||function(e,n,r,i){return i&&(i.S&&d(i,x),e.state=function(){return d(x,{})}),r?(t[a]=e,n):e})(b,y,"global"in m?m.global:this==t,m.state)},p(t.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){return _typeof$1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||t instanceof Number||"boolean"===e||"string"===e}function $bm_neg(e){var t=_typeof$1(e);if("number"===t||e instanceof Number||"boolean"===t)return-e;if($bm_isInstanceOfArray(e)){var n,r=e.length,i=[];for(n=0;n<r;n+=1)i[n]=-e[n];return i}return e.propType?e.v:-e}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var n=_typeof$1(e),r=_typeof$1(t);if(isNumerable(n,e)&&isNumerable(r,t)||"string"===n||"string"===r)return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]+=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var i=0,a=e.length,s=t.length,o=[];i<a||i<s;)("number"===typeof e[i]||e[i]instanceof Number)&&("number"===typeof t[i]||t[i]instanceof Number)?o[i]=e[i]+t[i]:o[i]=void 0===t[i]?e[i]:e[i]||t[i],i+=1;return o}return 0}var add=sum;function sub(e,t){var n=_typeof$1(e),r=_typeof$1(t);if(isNumerable(n,e)&&isNumerable(r,t))return"string"===n&&(e=parseInt(e,10)),"string"===r&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]-=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var i=0,a=e.length,s=t.length,o=[];i<a||i<s;)("number"===typeof e[i]||e[i]instanceof Number)&&("number"===typeof t[i]||t[i]instanceof Number)?o[i]=e[i]-t[i]:o[i]=void 0===t[i]?e[i]:e[i]||t[i],i+=1;return o}return 0}function mul(e,t){var n,r,i,a=_typeof$1(e),s=_typeof$1(t);if(isNumerable(a,e)&&isNumerable(s,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(s,t)){for(i=e.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e[r]*t;return n}if(isNumerable(a,e)&&$bm_isInstanceOfArray(t)){for(i=t.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e*t[r];return n}return 0}function div(e,t){var n,r,i,a=_typeof$1(e),s=_typeof$1(t);if(isNumerable(a,e)&&isNumerable(s,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(s,t)){for(i=e.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e[r]/t;return n}if(isNumerable(a,e)&&$bm_isInstanceOfArray(t)){for(i=t.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e/t[r];return n}return 0}function mod(e,t){return"string"===typeof e&&(e=parseInt(e,10)),"string"===typeof t&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,n){if(t>n){var r=n;n=t,t=r}return Math.min(Math.max(e,t),n)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"===typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);var n;t||(t=helperLengthArray);var r=Math.min(e.length,t.length),i=0;for(n=0;n<r;n+=1)i+=Math.pow(t[n]-e[n],2);return Math.sqrt(i)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,n,r=e[0],i=e[1],a=e[2],s=Math.max(r,i,a),o=Math.min(r,i,a),l=(s+o)/2;if(s===o)t=0,n=0;else{var c=s-o;switch(n=l>.5?c/(2-s-o):c/(s+o),s){case r:t=(i-a)/c+(i<a?6:0);break;case i:t=(a-r)/c+2;break;case a:t=(r-i)/c+4}t/=6}return[t,n,l,e[3]]}function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslToRgb(e){var t,n,r,i=e[0],a=e[1],s=e[2];if(0===a)t=s,r=s,n=s;else{var o=s<.5?s*(1+a):s+a-s*a,l=2*s-o;t=hue2rgb(l,o,i+1/3),n=hue2rgb(l,o,i),r=hue2rgb(l,o,i-1/3)}return[t,n,r,e[3]]}function linear(e,t,n,r,i){if(void 0!==r&&void 0!==i||(r=t,i=n,t=0,n=1),n<t){var a=n;n=t,t=a}if(e<=t)return r;if(e>=n)return i;var s,o=n===t?0:(e-t)/(n-t);if(!r.length)return r+(i-r)*o;var l=r.length,c=createTypedArray("float32",l);for(s=0;s<l;s+=1)c[s]=r[s]+(i[s]-r[s])*o;return c}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var n,r=t.length;e||(e=createTypedArray("float32",r));var i=createTypedArray("float32",r),a=BMMath.random();for(n=0;n<r;n+=1)i[n]=e[n]+a*(t[n]-e[n]);return i}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,n,r){var i,a=e.length,s=shapePool.newElement();s.setPathData(!!r,a);var o,l,c=[0,0];for(i=0;i<a;i+=1)o=t&&t[i]?t[i]:c,l=n&&n[i]?n[i]:c,s.setTripleAt(e[i][0],e[i][1],l[0]+e[i][0],l[1]+e[i][1],o[0]+e[i][0],o[1]+e[i][1],i,!0);return s}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(e,t){var n,r,i=this.pv.length?this.pv.length:1,a=createTypedArray("float32",i),s=Math.floor(5*time);for(n=0,r=0;n<s;){for(r=0;r<i;r+=1)a[r]+=-t+2*t*BMMath.random();n+=1}var o=5*time,l=o-Math.floor(o),c=createTypedArray("float32",i);if(i>1){for(r=0;r<i;r+=1)c[r]=this.pv[r]+a[r]+(-t+2*t*BMMath.random())*l;return c}return this.pv+a[0]+(-t+2*t*BMMath.random())*l}.bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],r=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,r,0]}function easeOut(e,t,n,r,i){return applyEase(easeOutBez,e,t,n,r,i)}function easeIn(e,t,n,r,i){return applyEase(easeInBez,e,t,n,r,i)}function ease(e,t,n,r,i){return applyEase(easeInOutBez,e,t,n,r,i)}function applyEase(e,t,n,r,i,a){void 0===i?(i=n,a=r):t=(t-n)/(r-n),t>1?t=1:t<0&&(t=0);var s=e(t);if($bm_isInstanceOfArray(i)){var o,l=i.length,c=createTypedArray("float32",l);for(o=0;o<l;o+=1)c[o]=(a[o]-i[o])*s+i[o];return c}return(a-i)*s+i}function nearestKey(e){var t,n,r,i=data.k.length;if(data.k.length&&"number"!==typeof data.k[0])if(n=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,r=data.k[0].t;else{for(t=0;t<i-1;t+=1){if(e===data.k[t].t){n=t+1,r=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(n=t+2,r=data.k[t+1].t):(n=t+1,r=data.k[t].t);break}}-1===n&&(n=t+1,r=data.k[t].t)}else n=0,r=0;var a={};return a.index=n,a.time=r/elem.comp.globalData.frameRate,a}function key(e){var t,n,r;if(!data.k.length||"number"===typeof data.k[0])throw new Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var i=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(r=i.length,n=0;n<r;n+=1)t[n]=i[n],t.value[n]=i[n];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"===typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"===typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={initExpressions:function(e){var t=0,n=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0===(t-=1)&&function(){var e,t=n.length;for(e=0;e<t;e+=1)n[e].release();n.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===n.indexOf(e)&&n.push(e)}}};return e.resetFrame=ExpressionManager.resetFrame,e}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var n,r=createSizedArray(t.viewData.length),i=t.viewData.length;for(n=0;n<i;n+=1)r[n]=new e(t.viewData[n],t.masksProperties[n]);return function(e){for(n=0;n<i;){if(t.masksProperties[n].nm===e)return r[n];n+=1}return null}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function n(e,t,n){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(r){if(!e.numKeys)return 0;var i="";i="s"in t.keyframes[r-1]?t.keyframes[r-1].s:"e"in t.keyframes[r-2]?t.keyframes[r-2].e:t.keyframes[r-2].s;var a="unidimensional"===n?new Number(i):Object.assign({},i);return a.time=t.keyframes[r-1].t/t.elem.comp.globalData.frameRate,a.value="unidimensional"===n?i[0]:i,a},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function r(){return e}return function(i){return i?"unidimensional"===i.propType?function(t){t&&"pv"in t||(t=e);var r=1/t.mult,i=t.pv*r,a=new Number(i);return a.value=i,n(a,t,"unidimensional"),function(){return t.k&&t.getValue(),i=t.v*r,a.value!==i&&((a=new Number(i)).value=i,n(a,t,"unidimensional")),a}}(i):function(e){e&&"pv"in e||(e=t);var r=1/e.mult,i=e.data&&e.data.l||e.pv.length,a=createTypedArray("float32",i),s=createTypedArray("float32",i);return a.value=s,n(a,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<i;t+=1)s[t]=e.v[t]*r,a[t]=s[t];return a}}(i):r}}(),TransformExpressionInterface=function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var n,r,i,a;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?a=ExpressionPropertyInterface(e.p):(n=ExpressionPropertyInterface(e.px),r=ExpressionPropertyInterface(e.py),e.pz&&(i=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?a():[n(),r(),i?i():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t},LayerExpressionInterface=function(){function e(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function t(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.applyPoint(n,e)}function n(e,t){var n=this.getMatrix(t);return this.applyPoint(n,e)}function r(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.invertPoint(n,e)}function i(e,t){var n=this.getMatrix(t);return this.invertPoint(n,e)}function a(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.applyToPointArray(t[0],t[1],t[2]||0)}function s(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.inversePoint(t)}function o(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function l(){return[1,1,1,1]}return function(c){var u;function d(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return d.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return u;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return d.effect;case"ADBE Text Properties":return d.textInterface;default:return null}}d.getMatrix=e,d.invertPoint=s,d.applyPoint=a,d.toWorld=n,d.toWorldVec=t,d.fromWorld=i,d.fromWorldVec=r,d.toComp=n,d.fromComp=o,d.sampleImage=l,d.sourceRectAtTime=c.sourceRectAtTime.bind(c),d._elem=c;var h=getDescriptor(u=TransformExpressionInterface(c.finalTransform.mProp),"anchorPoint");return Object.defineProperties(d,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(u,"rotation"),scale:getDescriptor(u,"scale"),position:getDescriptor(u,"position"),opacity:getDescriptor(u,"opacity"),anchorPoint:h,anchor_point:h,transform:{get:function(){return u}},active:{get:function(){return c.isInRange}}}),d.startTime=c.data.st,d.index=c.data.ind,d.source=c.data.refId,d.height=0===c.data.ty?c.data.h:100,d.width=0===c.data.ty?c.data.w:100,d.inPoint=c.data.ip/c.comp.globalData.frameRate,d.outPoint=c.data.op/c.comp.globalData.frameRate,d._name=c.data.nm,d.registerMaskInterface=function(e){d.mask=new MaskManagerInterface(e,c)},d.registerEffectsInterface=function(e){d.effect=e},d}}(),propertyGroupFactory=function(e,t){return function(n){return(n=void 0===n?1:n)<=0?e:t(n-1)}},PropertyInterface=function(e,t){var n={_name:e};return function(e){return(e=void 0===e?1:e)<=0?n:t(e-1)}},EffectsExpressionInterface=function(){function e(n,r,i,a){function s(e){for(var t=n.ef,r=0,i=t.length;r<i;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return 5===t[r].ty?c[r]:c[r]();r+=1}throw new Error}var o,l=propertyGroupFactory(s,i),c=[],u=n.ef.length;for(o=0;o<u;o+=1)5===n.ef[o].ty?c.push(e(n.ef[o],r.effectElements[o],r.effectElements[o].propertyGroup,a)):c.push(t(r.effectElements[o],n.ef[o].ty,a,l));return"ADBE Color Control"===n.mn&&Object.defineProperty(s,"color",{get:function(){return c[0]()}}),Object.defineProperties(s,{numProperties:{get:function(){return n.np}},_name:{value:n.nm},propertyGroup:{value:l}}),s.enabled=0!==n.en,s.active=s.enabled,s}function t(e,t,n,r){var i=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",r)),function(){return 10===t?n.comp.compInterface(e.p.v):i()}}return{createEffectsInterface:function(t,n){if(t.effectsManager){var r,i=[],a=t.data.ef,s=t.effectsManager.effectElements.length;for(r=0;r<s;r+=1)i.push(e(a[r],t.effectsManager.effectElements[r],n,t));var o=t.data.ef||[],l=function(e){for(r=0,s=o.length;r<s;){if(e===o[r].nm||e===o[r].mn||e===o[r].ix)return i[r];r+=1}return null};return Object.defineProperty(l,"numProperties",{get:function(){return o.length}}),l}return null}}}(),ShapePathInterface=function(e,t,n){var r=t.sh;function i(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?i.path:null}var a=propertyGroupFactory(i,n);return r.setGroupProperty(PropertyInterface("Path",a)),Object.defineProperties(i,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:n}}),i},ShapeExpressionInterface=function(){function e(e,s,h){var p,f=[],m=e?e.length:0;for(p=0;p<m;p+=1)"gr"===e[p].ty?f.push(t(e[p],s[p],h)):"fl"===e[p].ty?f.push(n(e[p],s[p],h)):"st"===e[p].ty?f.push(i(e[p],s[p],h)):"tm"===e[p].ty?f.push(a(e[p],s[p],h)):"tr"===e[p].ty||("el"===e[p].ty?f.push(o(e[p],s[p],h)):"sr"===e[p].ty?f.push(l(e[p],s[p],h)):"sh"===e[p].ty?f.push(ShapePathInterface(e[p],s[p],h)):"rc"===e[p].ty?f.push(c(e[p],s[p],h)):"rd"===e[p].ty?f.push(u(e[p],s[p],h)):"rp"===e[p].ty?f.push(d(e[p],s[p],h)):"gf"===e[p].ty?f.push(r(e[p],s[p],h)):f.push((e[p],s[p],function(){return null})));return f}function t(t,n,r){var i=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return i.content;default:return i.transform}};i.propertyGroup=propertyGroupFactory(i,r);var a=function(t,n,r){var i,a=function(e){for(var t=0,n=i.length;t<n;){if(i[t]._name===e||i[t].mn===e||i[t].propertyIndex===e||i[t].ix===e||i[t].ind===e)return i[t];t+=1}return"number"===typeof e?i[e-1]:null};a.propertyGroup=propertyGroupFactory(a,r),i=e(t.it,n.it,a.propertyGroup),a.numProperties=i.length;var o=s(t.it[t.it.length-1],n.it[n.it.length-1],a.propertyGroup);return a.transform=o,a.propertyIndex=t.cix,a._name=t.nm,a}(t,n,i.propertyGroup),o=s(t.it[t.it.length-1],n.it[n.it.length-1],i.propertyGroup);return i.content=a,i.transform=o,Object.defineProperty(i,"_name",{get:function(){return t.nm}}),i.numProperties=t.np,i.propertyIndex=t.ix,i.nm=t.nm,i.mn=t.mn,i}function n(e,t,n){function r(e){return"Color"===e||"color"===e?r.color:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),r}function r(e,t,n){function r(e){return"Start Point"===e||"start point"===e?r.startPoint:"End Point"===e||"end point"===e?r.endPoint:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",n)),t.e.setGroupProperty(PropertyInterface("End Point",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),r}function i(e,t,n){var r,i=propertyGroupFactory(c,n),a=propertyGroupFactory(l,i);function s(n){Object.defineProperty(l,e.d[n].nm,{get:ExpressionPropertyInterface(t.d.dataProps[n].p)})}var o=e.d?e.d.length:0,l={};for(r=0;r<o;r+=1)s(r),t.d.dataProps[r].p.setGroupProperty(a);function c(e){return"Color"===e||"color"===e?c.color:"Opacity"===e||"opacity"===e?c.opacity:"Stroke Width"===e||"stroke width"===e?c.strokeWidth:null}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return l}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",i)),t.o.setGroupProperty(PropertyInterface("Opacity",i)),t.w.setGroupProperty(PropertyInterface("Stroke Width",i)),c}function a(e,t,n){function r(t){return t===e.e.ix||"End"===t||"end"===t?r.end:t===e.s.ix?r.start:t===e.o.ix?r.offset:null}var i=propertyGroupFactory(r,n);return r.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",i)),t.e.setGroupProperty(PropertyInterface("End",i)),t.o.setGroupProperty(PropertyInterface("Offset",i)),r.propertyIndex=e.ix,r.propertyGroup=n,Object.defineProperties(r,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),r.mn=e.mn,r}function s(e,t,n){function r(t){return e.a.ix===t||"Anchor Point"===t?r.anchorPoint:e.o.ix===t||"Opacity"===t?r.opacity:e.p.ix===t||"Position"===t?r.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?r.rotation:e.s.ix===t||"Scale"===t?r.scale:e.sk&&e.sk.ix===t||"Skew"===t?r.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?r.skewAxis:null}var i=propertyGroupFactory(r,n);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",i)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",i)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",i)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",i)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",i)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",i)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",i))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",i)),Object.defineProperties(r,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),r.ty="tr",r.mn=e.mn,r.propertyGroup=n,r}function o(e,t,n){function r(t){return e.p.ix===t?r.position:e.s.ix===t?r.size:null}var i=propertyGroupFactory(r,n);r.propertyIndex=e.ix;var a="tm"===t.sh.ty?t.sh.prop:t.sh;return a.s.setGroupProperty(PropertyInterface("Size",i)),a.p.setGroupProperty(PropertyInterface("Position",i)),Object.defineProperties(r,{size:{get:ExpressionPropertyInterface(a.s)},position:{get:ExpressionPropertyInterface(a.p)},_name:{value:e.nm}}),r.mn=e.mn,r}function l(e,t,n){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.rotation:e.pt.ix===t?r.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?r.outerRadius:e.os.ix===t?r.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?r.innerRoundness:null:r.innerRadius}var i=propertyGroupFactory(r,n),a="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,a.or.setGroupProperty(PropertyInterface("Outer Radius",i)),a.os.setGroupProperty(PropertyInterface("Outer Roundness",i)),a.pt.setGroupProperty(PropertyInterface("Points",i)),a.p.setGroupProperty(PropertyInterface("Position",i)),a.r.setGroupProperty(PropertyInterface("Rotation",i)),e.ir&&(a.ir.setGroupProperty(PropertyInterface("Inner Radius",i)),a.is.setGroupProperty(PropertyInterface("Inner Roundness",i))),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(a.p)},rotation:{get:ExpressionPropertyInterface(a.r)},points:{get:ExpressionPropertyInterface(a.pt)},outerRadius:{get:ExpressionPropertyInterface(a.or)},outerRoundness:{get:ExpressionPropertyInterface(a.os)},innerRadius:{get:ExpressionPropertyInterface(a.ir)},innerRoundness:{get:ExpressionPropertyInterface(a.is)},_name:{value:e.nm}}),r.mn=e.mn,r}function c(e,t,n){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?r.size:null}var i=propertyGroupFactory(r,n),a="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,a.p.setGroupProperty(PropertyInterface("Position",i)),a.s.setGroupProperty(PropertyInterface("Size",i)),a.r.setGroupProperty(PropertyInterface("Rotation",i)),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(a.p)},roundness:{get:ExpressionPropertyInterface(a.r)},size:{get:ExpressionPropertyInterface(a.s)},_name:{value:e.nm}}),r.mn=e.mn,r}function u(e,t,n){function r(t){return e.r.ix===t||"Round Corners 1"===t?r.radius:null}var i=propertyGroupFactory(r,n),a=t;return r.propertyIndex=e.ix,a.rd.setGroupProperty(PropertyInterface("Radius",i)),Object.defineProperties(r,{radius:{get:ExpressionPropertyInterface(a.rd)},_name:{value:e.nm}}),r.mn=e.mn,r}function d(e,t,n){function r(t){return e.c.ix===t||"Copies"===t?r.copies:e.o.ix===t||"Offset"===t?r.offset:null}var i=propertyGroupFactory(r,n),a=t;return r.propertyIndex=e.ix,a.c.setGroupProperty(PropertyInterface("Copies",i)),a.o.setGroupProperty(PropertyInterface("Offset",i)),Object.defineProperties(r,{copies:{get:ExpressionPropertyInterface(a.c)},offset:{get:ExpressionPropertyInterface(a.o)},_name:{value:e.nm}}),r.mn=e.mn,r}return function(t,n,r){var i;function a(e){if("number"===typeof e)return 0===(e=void 0===e?1:e)?r:i[e-1];for(var t=0,n=i.length;t<n;){if(i[t]._name===e)return i[t];t+=1}return null}return a.propertyGroup=propertyGroupFactory(a,(function(){return r})),i=e(t,n,a.propertyGroup),a.numProperties=i.length,a._name="Contents",a}}(),TextExpressionInterface=function(e){var t;function n(e){return"ADBE Text Document"===e?n.sourceText:null}return Object.defineProperty(n,"sourceText",{get:function(){e.textProperty.getValue();var n=e.textProperty.currentData.t;return t&&n===t.value||((t=new String(n)).value=n||new String(n),Object.defineProperty(t,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),t}}),n};function _typeof(e){return _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var FootageInterface=function(){var e=function(e){function t(e){return"Outline"===e?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=function(e){var t="",n=e.getFootageData();function r(e){if(n[e])return t=e,"object"===_typeof(n=n[e])?r:n;var i=e.indexOf(t);if(-1!==i){var a=parseInt(e.substr(i+t.length),10);return"object"===_typeof(n=n[a])?r:n}return""}return function(){return t="",n=e.getFootageData(),r}}(e),t};return function(t){function n(e){return"Data"===e?n.dataInterface:null}return n._name="Data",n.dataInterface=e(t),n}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers={searchExpressions:function(e,t,n){t.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(e,t,n).bind(n)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),n=this.getValueAtTime(e+-.01),r=0;if(t.length){var i;for(i=0;i<t.length;i+=1)r+=Math.pow(n[i]-t[i],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,n,r=-.001,i=this.getValueAtTime(e),a=this.getValueAtTime(e+r);if(i.length)for(t=createTypedArray("float32",i.length),n=0;n<i.length;n+=1)t[n]=(a[n]-i[n])/r;else t=(a-i)/r;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};function addPropertyDecorator(){function e(e,t,n){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var r,i,a,s,o,l=this.comp.renderedFrame,c=this.keyframes,u=c[c.length-1].t;if(l<=u)return this.pv;if(n?i=u-(r=t?Math.abs(u-this.elem.comp.globalData.frameRate*t):Math.max(0,u-this.elem.data.ip)):((!t||t>c.length-1)&&(t=c.length-1),r=u-(i=c[c.length-1-t].t)),"pingpong"===e){if(Math.floor((l-i)/r)%2!==0)return this.getValueAtTime((r-(l-i)%r+i)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var d=this.getValueAtTime(i/this.comp.globalData.frameRate,0),h=this.getValueAtTime(u/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((l-i)%r+i)/this.comp.globalData.frameRate,0),f=Math.floor((l-i)/r);if(this.pv.length){for(s=(o=new Array(d.length)).length,a=0;a<s;a+=1)o[a]=(h[a]-d[a])*f+p[a];return o}return(h-d)*f+p}if("continue"===e){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),g=this.getValueAtTime((u-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(s=(o=new Array(m.length)).length,a=0;a<s;a+=1)o[a]=m[a]+(m[a]-g[a])*((l-u)/this.comp.globalData.frameRate)/5e-4;return o}return m+(l-u)/.001*(m-g)}}return this.getValueAtTime(((l-i)%r+i)/this.comp.globalData.frameRate,0)}function t(e,t,n){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var r,i,a,s,o,l=this.comp.renderedFrame,c=this.keyframes,u=c[0].t;if(l>=u)return this.pv;if(n?i=u+(r=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-u)):((!t||t>c.length-1)&&(t=c.length-1),r=(i=c[t].t)-u),"pingpong"===e){if(Math.floor((u-l)/r)%2===0)return this.getValueAtTime(((u-l)%r+u)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var d=this.getValueAtTime(u/this.comp.globalData.frameRate,0),h=this.getValueAtTime(i/this.comp.globalData.frameRate,0),p=this.getValueAtTime((r-(u-l)%r+u)/this.comp.globalData.frameRate,0),f=Math.floor((u-l)/r)+1;if(this.pv.length){for(s=(o=new Array(d.length)).length,a=0;a<s;a+=1)o[a]=p[a]-(h[a]-d[a])*f;return o}return p-(h-d)*f}if("continue"===e){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),g=this.getValueAtTime((u+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(s=(o=new Array(m.length)).length,a=0;a<s;a+=1)o[a]=m[a]+(m[a]-g[a])*(u-l)/.001;return o}return m+(m-g)*(u-l)/.001}}return this.getValueAtTime((r-((u-l)%r+u))/this.comp.globalData.frameRate,0)}function n(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;var n,r,i=this.comp.renderedFrame/this.comp.globalData.frameRate,a=i-e,s=t>1?(i+e-a)/(t-1):1,o=0,l=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;o<t;){if(r=this.getValueAtTime(a+o*s),this.pv.length)for(l=0;l<this.pv.length;l+=1)n[l]+=r[l];else n+=r;o+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)n[l]/=t;else n/=t;return n}function r(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var n=this.a.getValueAtTime(e);t.translate(-n[0]*this.a.mult,-n[1]*this.a.mult,n[2]*this.a.mult)}if(this.appliedTransformations<2){var r=this.s.getValueAtTime(e);t.scale(r[0]*this.s.mult,r[1]*this.s.mult,r[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var i=this.sk.getValueAtTime(e),a=this.sa.getValueAtTime(e);t.skewFromAxis(-i*this.sk.mult,a*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var s=this.r.getValueAtTime(e);t.rotate(-s*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(e),l=this.ry.getValueAtTime(e),c=this.rx.getValueAtTime(e),u=this.or.getValueAtTime(e);t.rotateZ(-o*this.rz.mult).rotateY(l*this.ry.mult).rotateX(c*this.rx.mult).rotateZ(-u[2]*this.or.mult).rotateY(u[1]*this.or.mult).rotateX(u[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var d=this.px.getValueAtTime(e),h=this.py.getValueAtTime(e);if(this.data.p.z){var p=this.pz.getValueAtTime(e);t.translate(d*this.px.mult,h*this.py.mult,-p*this.pz.mult)}else t.translate(d*this.px.mult,h*this.py.mult,0)}else{var f=this.p.getValueAtTime(e);t.translate(f[0]*this.p.mult,f[1]*this.p.mult,-f[2]*this.p.mult)}return t}function i(){return this.v.clone(new Matrix)}var a=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,n){var s=a(e,t,n);return s.dynamicProperties.length?s.getValueAtTime=r.bind(s):s.getValueAtTime=i.bind(s),s.setGroupProperty=expressionHelpers.setGroupProperty,s};var s=PropertyFactory.getProp;PropertyFactory.getProp=function(r,i,a,o,l){var c=s(r,i,a,o,l);c.kf?c.getValueAtTime=expressionHelpers.getValueAtTime.bind(c):c.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(c),c.setGroupProperty=expressionHelpers.setGroupProperty,c.loopOut=e,c.loopIn=t,c.smooth=n,c.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(c),c.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(c),c.numKeys=1===i.a?i.k.length:0,c.propertyIndex=i.ix;var u=0;return 0!==a&&(u=createTypedArray("float32",1===i.a?i.k[0].s.length:i.k.length)),c._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:u},expressionHelpers.searchExpressions(r,i,c),c.k&&l.addDynamicProperty(c),c};var o=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function c(){}c.prototype={vertices:function(e,t){this.k&&this.getValue();var n,r=this.v;void 0!==t&&(r=this.getValueAtTime(t,0));var i=r._length,a=r[e],s=r.v,o=createSizedArray(i);for(n=0;n<i;n+=1)o[n]="i"===e||"o"===e?[a[n][0]-s[n][0],a[n][1]-s[n][1]]:[a[n][0],a[n][1]];return o},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var r,i=this._segmentsLength,a=i.lengths,s=i.totalLength*e,o=0,l=a.length,c=0;o<l;){if(c+a[o].addedLength>s){var u=o,d=n.c&&o===l-1?0:o+1,h=(s-c)/a[o].addedLength;r=bez.getPointInSegment(n.v[u],n.v[d],n.o[u],n.i[d],h,a[o]);break}c+=a[o].addedLength,o+=1}return r||(r=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),r},vectorOnPath:function(e,t,n){1==e?e=this.v.c:0==e&&(e=.999);var r=this.pointOnPath(e,t),i=this.pointOnPath(e+.001,t),a=i[0]-r[0],s=i[1]-r[1],o=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));return 0===o?[0,0]:"tangent"===n?[a/o,s/o]:[-s/o,a/o]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([c],o),extendPrototype([c],l),l.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var u=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,n,r,i){var a=u(e,t,n,r,i);return a.propertyIndex=t.ix,a.lock=!1,3===n?expressionHelpers.searchExpressions(e,t.pt,a):4===n&&expressionHelpers.searchExpressions(e,t.ks,a),a.k&&e.addDynamicProperty(a),a}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(e,t){var n=this.calculateExpression(t);if(e.t!==n){var r={};return this.copyData(r,e),r.t=n.toString(),r.__complete=!1,r}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(e,t){var n,r,i=createNS("feMerge");for(i.setAttribute("result",e),r=0;r<t.length;r+=1)(n=createNS("feMergeNode")).setAttribute("in",t[r]),i.appendChild(n),i.appendChild(n);return i}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,t,n,r,i){this.filterManager=t;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=a,a.setAttribute("result",r+"_tint_1"),e.appendChild(a),(a=createNS("feColorMatrix")).setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",r+"_tint_2"),e.appendChild(a),this.matrixFilter=a;var s=this.createMergeNode(r,[i,r+"_tint_1",r+"_tint_2"]);e.appendChild(s)}function SVGFillFilter(e,t,n,r){this.filterManager=t;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result",r),e.appendChild(i),this.matrixFilter=i}function SVGStrokeEffect(e,t,n){this.initialized=!1,this.filterManager=t,this.elem=n,this.paths=[]}function SVGTritoneFilter(e,t,n,r){this.filterManager=t;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(i);var a=createNS("feComponentTransfer");a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("result",r),this.matrixFilter=a;var s=createNS("feFuncR");s.setAttribute("type","table"),a.appendChild(s),this.feFuncR=s;var o=createNS("feFuncG");o.setAttribute("type","table"),a.appendChild(o),this.feFuncG=o;var l=createNS("feFuncB");l.setAttribute("type","table"),a.appendChild(l),this.feFuncB=l,e.appendChild(a)}function SVGProLevelsFilter(e,t,n,r){this.filterManager=t;var i=this.filterManager.effectElements,a=createNS("feComponentTransfer");(i[10].p.k||0!==i[10].p.v||i[11].p.k||1!==i[11].p.v||i[12].p.k||1!==i[12].p.v||i[13].p.k||0!==i[13].p.v||i[14].p.k||1!==i[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",a)),(i[17].p.k||0!==i[17].p.v||i[18].p.k||1!==i[18].p.v||i[19].p.k||1!==i[19].p.v||i[20].p.k||0!==i[20].p.v||i[21].p.k||1!==i[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",a)),(i[24].p.k||0!==i[24].p.v||i[25].p.k||1!==i[25].p.v||i[26].p.k||1!==i[26].p.v||i[27].p.k||0!==i[27].p.v||i[28].p.k||1!==i[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",a)),(i[31].p.k||0!==i[31].p.v||i[32].p.k||1!==i[32].p.v||i[33].p.k||1!==i[33].p.v||i[34].p.k||0!==i[34].p.v||i[35].p.k||1!==i[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",a)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(a.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(a)),(i[3].p.k||0!==i[3].p.v||i[4].p.k||1!==i[4].p.v||i[5].p.k||1!==i[5].p.v||i[6].p.k||0!==i[6].p.v||i[7].p.k||1!==i[7].p.v)&&((a=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("result",r),e.appendChild(a),this.feFuncRComposed=this.createFeFunc("feFuncR",a),this.feFuncGComposed=this.createFeFunc("feFuncG",a),this.feFuncBComposed=this.createFeFunc("feFuncB",a))}function SVGDropShadowEffect(e,t,n,r,i){var a=t.container.globalData.renderConfig.filterSize,s=t.data.fs||a;e.setAttribute("x",s.x||a.x),e.setAttribute("y",s.y||a.y),e.setAttribute("width",s.width||a.width),e.setAttribute("height",s.height||a.height),this.filterManager=t;var o=createNS("feGaussianBlur");o.setAttribute("in","SourceAlpha"),o.setAttribute("result",r+"_drop_shadow_1"),o.setAttribute("stdDeviation","0"),this.feGaussianBlur=o,e.appendChild(o);var l=createNS("feOffset");l.setAttribute("dx","25"),l.setAttribute("dy","0"),l.setAttribute("in",r+"_drop_shadow_1"),l.setAttribute("result",r+"_drop_shadow_2"),this.feOffset=l,e.appendChild(l);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",r+"_drop_shadow_3"),this.feFlood=c,e.appendChild(c);var u=createNS("feComposite");u.setAttribute("in",r+"_drop_shadow_3"),u.setAttribute("in2",r+"_drop_shadow_2"),u.setAttribute("operator","in"),u.setAttribute("result",r+"_drop_shadow_4"),e.appendChild(u);var d=this.createMergeNode(r,[r+"_drop_shadow_4",i]);e.appendChild(d)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+r+" 0"),this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+n+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,n,r,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,n=0):r=1+(n=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);n<r;n+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:n});if(3===this.filterManager.effectElements[10].p.v){var a=createNS("mask"),s=createElementID();a.setAttribute("id",s),a.setAttribute("mask-type","alpha"),a.appendChild(t),this.elem.globalData.defs.appendChild(a);var o=createNS("g");for(o.setAttribute("mask","url("+getLocationHref()+"#"+s+")");i[0];)o.appendChild(i[0]);this.elem.layerElement.appendChild(o),this.masker=a,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){var t;this.initialized||this.initialize();var n,r,i=this.paths.length;for(t=0;t<i;t+=1)if(-1!==this.paths[t].m&&(n=this.elem.maskManager.viewData[this.paths[t].m],r=this.paths[t].p,(e||this.filterManager._mdf||n.prop._mdf)&&r.setAttribute("d",n.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var a;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var s=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),l=r.getTotalLength();a="0 0 0 "+l*s+" ";var c,u=l*(o-s),d=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,h=Math.floor(u/d);for(c=0;c<h;c+=1)a+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";a+="0 "+10*l+" 0 0"}else a="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;r.setAttribute("stroke-dasharray",a)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var p=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*p[0])+","+bmFloor(255*p[1])+","+bmFloor(255*p[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,i=r[0]+" "+n[0]+" "+t[0],a=r[1]+" "+n[1]+" "+t[1],s=r[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",a),this.feFuncB.setAttribute("tableValues",s)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var n=createNS(e);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(e,t,n,r,i){for(var a,s,o=0,l=Math.min(e,t),c=Math.max(e,t),u=Array.call(null,{length:256}),d=0,h=i-r,p=t-e;o<=256;)s=(a=o/256)<=l?p<0?i:r:a>=c?p<0?r:i:r+h*Math.pow((a-e)/p,1/n),u[d]=s,d+=1,o+=256/255;return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(e||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(t=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(t=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(t=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(t=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(t=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=n*Math.cos(r),a=n*Math.sin(r);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",a)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGGaussianBlurEffect(e,t,n,r){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var i=createNS("feGaussianBlur");i.setAttribute("result",r),e.appendChild(i),this.feGaussianBlur=i}function TransformEffect(){}function SVGTransformEffect(e,t){this.init(t)}function CVTransformEffect(e){this.init(e)}return SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,n=_svgMatteSymbols.length;t<n;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var n=e.layerElement.parentNode;if(n){for(var r,i=n.children,a=0,s=i.length;a<s&&i[a]!==e.layerElement;)a+=1;a<=s-2&&(r=i[a+1]);var o=createNS("use");o.setAttribute("href","#"+t),r?n.insertBefore(o,r):n.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var n=createElementID(),r=createNS("mask");r.setAttribute("id",t.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var i=e.globalData.defs;i.appendChild(r);var a=createNS("symbol");a.setAttribute("id",n),this.replaceInParent(t,n),a.appendChild(t.layerElement),i.appendChild(a);var s=createNS("use");s.setAttribute("href","#"+n),r.appendChild(s),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,n=0,r=t.length;n<r;)t[n]&&t[n].data.ind===e&&this.setElementAsMask(this.elem,t[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=3==n?0:t,i=2==n?0:t;this.feGaussianBlur.setAttribute("stdDeviation",r+" "+i);var a=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",a)}},TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var t=this.effectsManager.effectElements,n=t[0].p.v,r=t[1].p.v,i=1===t[2].p.v,a=t[3].p.v,s=i?a:t[4].p.v,o=t[5].p.v,l=t[6].p.v,c=t[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(.01*s,.01*a,1),this.matrix.rotate(-c*degToRads),this.matrix.skewFromAxis(-o*degToRads,(l+90)*degToRads),this.matrix.translate(r[0],r[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),M=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var B=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}var F,L=Object.assign;function O(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var N=!1;function z(e,t){if(!e||N)return"";N=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{N=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function U(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case E:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ae(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Ae=null;function Ee(e){if(e=xi(e)){if("function"!==typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Ce(e){_e?Ae?Ae.push(e):Ae=[e]:_e=e}function Me(){if(_e){var e=_e,t=Ae;if(Ae=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function ke(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==_e||null!==Ae)&&(ke(),Me())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ie=!1;if(u)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ue){Ie=!1}function je(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Le=null,Oe=!1,Ne=null,ze={onError:function(e){Fe=!0,Le=e}};function Ue(e,t,n,r,i,a,s,o,l){Fe=!1,Le=null,je.apply(ze,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ve(i),e;if(s===r)return Ve(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Je=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Ze=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=dt(o):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~i)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,_t,At,Et,Ct=!1,Mt=[],Tt=null,kt=null,Pt=null,Rt=new Map,Dt=new Map,It=[],Bt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Nt(e,t,n){Ot(e)&&n.delete(t)}function zt(){Ct=!1,null!==Tt&&Ot(Tt)&&(Tt=null),null!==kt&&Ot(kt)&&(kt=null),null!==Pt&&Ot(Pt)&&(Pt=null),Rt.forEach(Nt),Dt.forEach(Nt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<Mt.length){Ut(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==kt&&Ut(kt,e),null!==Pt&&Ut(Pt,e),Rt.forEach(t),Dt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Lt(n),null===n.blockedOn&&It.shift()}var Gt=b.ReactCurrentBatchConfig,Vt=!0;function Wt(e,t,n,r){var i=xt,a=Gt.transition;Gt.transition=null;try{xt=1,Xt(e,t,n,r)}finally{xt=i,Gt.transition=a}}function qt(e,t,n,r){var i=xt,a=Gt.transition;Gt.transition=null;try{xt=4,Xt(e,t,n,r)}finally{xt=i,Gt.transition=a}}function Xt(e,t,n,r){if(Vt){var i=Yt(e,t,n,r);if(null===i)Vr(e,t,r,Jt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Ft(Tt,e,t,n,r,i),!0;case"dragenter":return kt=Ft(kt,e,t,n,r,i),!0;case"mouseover":return Pt=Ft(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Ft(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Ft(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Bt.indexOf(e)){for(;null!==i;){var a=xi(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Vr(e,t,r,Jt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Jt=null;function Yt(e,t,n,r){if(Jt=null,null!==(e=yi(e=we(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=L({},cn,{view:0,detail:0}),hn=an(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=an(pn),mn=an(L({},pn,{dataTransfer:0})),gn=an(L({},dn,{relatedTarget:0})),vn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=an(yn),bn=an(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return An}var Cn=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=an(Cn),Tn=an(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=an(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),In=[9,13,27,32],Bn=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Fn=u&&"TextEvent"in window&&!jn,Ln=u&&(!Bn||jn&&8<jn&&11>=jn),On=String.fromCharCode(32),Nn=!1;function zn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Jn(e){Or(e,0)}function Yn(e){if(X(bi(e)))return e}function Kn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Qn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];Wn(t,Xn,e,we(e)),Re(Jn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function ar(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==J(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ar={};function Er(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return _r[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=Er("animationend"),Mr=Er("animationiteration"),Tr=Er("animationstart"),kr=Er("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Rr.length;Ir++){var Br=Rr[Ir];Dr(Br.toLowerCase(),"on"+(Br[0].toUpperCase()+Br.slice(1)))}Dr(Cr,"onAnimationEnd"),Dr(Mr,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(kr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,l,c){if(Ue.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var u=Le;Fe=!1,Le=null,Oe||(Oe=!0,Ne=u)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Lr(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Lr(i,o,c),a=l}}}if(Oe)throw e=Ne,Oe=!1,Ne=null,e}function Nr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Ur]){e[Ur]=!0,s.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Kt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=yi(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),s=[];e:{var o=Pr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case Cr:case Mr:case Tr:l=vn;break;case kr:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=De(f,h))&&u.push(Wr(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:bi(l),p=null==c?o:bi(c),(o=new u(m,f+"leave",l,n,i)).target=d,o.relatedTarget=p,m=null,yi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Xr(p))f++;for(p=0,m=h;m;m=Xr(m))p++;for(;0<f-p;)u=Xr(u),f--;for(;0<p-f;)h=Xr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Xr(u),h=Xr(h)}u=null}else u=null;null!==l&&Jr(s,o,l,u,!1),null!==c&&null!==d&&Jr(s,d,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Kn;else if(Vn(o))if(Zn)g=sr;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Bn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Hn?zn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ln&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Hn&&(y=en()):(Qt="value"in(Zt=i)?Zt.value:Zt.textContent,Hn=!0)),0<(v=qr(r,x)).length&&(x=new bn(x,e,null,n,i),s.push({event:x,listeners:v}),y?x.data=y:null!==(y=Un(n))&&(x.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Nn=!0,On);case"textInput":return(e=t.data)===On&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Bn&&zn(e,t)?(e=en(),$t=Qt=Zt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Or(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=De(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=De(n,a))&&s.unshift(Wr(n,l,o)):i||null!=(l=De(n,a))&&s.push(Wr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[pi]||null}var Si=[],_i=-1;function Ai(e){return{current:e}}function Ei(e){0>_i||(e.current=Si[_i],Si[_i]=null,_i--)}function Ci(e,t){_i++,Si[_i]=e.current,e.current=t}var Mi={},Ti=Ai(Mi),ki=Ai(!1),Pi=Mi;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){Ei(ki),Ei(Ti)}function Bi(e,t,n){if(Ti.current!==Mi)throw Error(a(168));Ci(Ti,t),Ci(ki,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,G(e)||"Unknown",i));return L({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mi,Pi=Ti.current,Ci(Ti,e),Ci(ki,ki.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=ji(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(ki),Ei(Ti),Ci(Ti,e)):Ei(ki),Ci(ki,n)}var Oi=null,Ni=!1,zi=!1;function Ui(e){null===Oi?Oi=[e]:Oi.push(e)}function Hi(){if(!zi&&null!==Oi){zi=!0;var e=0,t=xt;try{var n=Oi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oi=null,Ni=!1}catch(i){throw null!==Oi&&(Oi=Oi.slice(e+1)),Xe($e,Hi),i}finally{xt=t,zi=!1}}return null}var Gi=[],Vi=0,Wi=null,qi=0,Xi=[],Ji=0,Yi=null,Ki=1,Zi="";function Qi(e,t){Gi[Vi++]=qi,Gi[Vi++]=Wi,Wi=e,qi=t}function $i(e,t,n){Xi[Ji++]=Ki,Xi[Ji++]=Zi,Xi[Ji++]=Yi,Yi=e;var r=Ki;e=Zi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ki=1<<32-st(t)+i|n<<i|r,Zi=a+e}else Ki=1<<a|n<<i|r,Zi=e}function ea(e){null!==e.return&&(Qi(e,1),$i(e,1,0))}function ta(e){for(;e===Wi;)Wi=Gi[--Vi],Gi[Vi]=null,qi=Gi[--Vi],Gi[Vi]=null;for(;e===Yi;)Yi=Xi[--Ji],Xi[Ji]=null,Zi=Xi[--Ji],Xi[Ji]=null,Ki=Xi[--Ji],Xi[Ji]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ki,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function ga(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var va=Ai(null),ya=null,xa=null,ba=null;function wa(){ba=xa=ya=null}function Sa(e){var t=va.current;Ei(va),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Aa(e,t){ya=e,ba=xa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===xa){if(null===ya)throw Error(a(308));xa=e,ya.dependencies={lanes:0,firstContext:e}}else xa=xa.next=e;return t}var Ca=null;function Ma(e){null===Ca?Ca=[e]:Ca.push(e)}function Ta(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ma(t)):(n.next=i.next,i.next=n),t.interleaved=n,ka(e,r)}function ka(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ka(e,n)}return null===(i=r.interleaved)?(t.next=t,Ma(r)):(t.next=i.next,i.next=t),r.interleaved=t,ka(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function La(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:Pa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ll|=s,e.lanes=s,e.memoizedState=d}}function Oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Na=(new r.Component).refs;function za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,i))&&(rc(t,e,i,r),ja(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,i))&&(rc(t,e,i,r),ja(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ba(e,i,r))&&(rc(t,e,r,n),ja(t,e,r))}};function Ha(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Ga(e,t,n){var r=!1,i=Mi,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Di(t)?Pi:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Mi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Na,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Di(t)?Pi:Ti.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ua.enqueueReplaceState(i,i.state,null),La(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Na&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ja(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Bc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Ja(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case S:return(t=Nc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Xa(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case D:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:d(e,t,n,r,null);Xa(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return d(t,e=e.get(n)||null,r,i,null);Xa(t,r)}return null}function m(i,a,o,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=s(v,a,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),ia&&Qi(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(a=s(d,a,m),null===u?c=d:u.sibling=d,u=d);return ia&&Qi(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=f(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),ia&&Qi(i,m),c}function g(i,o,l,c){var u=j(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=p(i,m,y.value,c);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(i,m),o=s(x,o,g),null===d?u=x:d.sibling=x,d=x,m=v}if(y.done)return n(i,m),ia&&Qi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=s(y,o,g),null===d?u=y:d.sibling=y,d=y);return ia&&Qi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=s(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Qi(i,g),u}return function e(r,a,s,l){if("object"===typeof s&&null!==s&&s.type===_&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=a;null!==u;){if(u.key===c){if((c=s.type)===_){if(7===u.tag){n(r,u.sibling),(a=i(u,s.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Ja(c)===u.type){n(r,u.sibling),(a=i(u,s.props)).ref=qa(r,u,s),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===_?((a=Fc(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=jc(s.type,s.key,s.props,null,r.mode,l)).ref=qa(r,a,s),l.return=r,r=l)}return o(r);case S:e:{for(u=s.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Nc(s,r.mode,l)).return=r,r=a}return o(r);case D:return e(r,a,(u=s._init)(s._payload),l)}if(te(s))return m(r,a,s,l);if(j(s))return g(r,a,s,l);Xa(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Oc(s,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var Ka=Ya(!0),Za=Ya(!1),Qa={},$a=Ai(Qa),es=Ai(Qa),ts=Ai(Qa);function ns(e){if(e===Qa)throw Error(a(174));return e}function rs(e,t){switch(Ci(ts,t),Ci(es,e),Ci($a,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Ci($a,t)}function is(){Ei($a),Ei(es),Ei(ts)}function as(e){ns(ts.current);var t=ns($a.current),n=le(t,e.type);t!==n&&(Ci(es,e),Ci($a,n))}function ss(e){es.current===e&&(Ei($a),Ei(es))}var os=Ai(0);function ls(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cs=[];function us(){for(var e=0;e<cs.length;e++)cs[e]._workInProgressVersionPrimary=null;cs.length=0}var ds=b.ReactCurrentDispatcher,hs=b.ReactCurrentBatchConfig,ps=0,fs=null,ms=null,gs=null,vs=!1,ys=!1,xs=0,bs=0;function ws(){throw Error(a(321))}function Ss(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function _s(e,t,n,r,i,s){if(ps=s,fs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?so:oo,e=n(r,i),ys){s=0;do{if(ys=!1,xs=0,25<=s)throw Error(a(301));s+=1,gs=ms=null,t.updateQueue=null,ds.current=lo,e=n(r,i)}while(ys)}if(ds.current=ao,t=null!==ms&&null!==ms.next,ps=0,gs=ms=fs=null,vs=!1,t)throw Error(a(300));return e}function As(){var e=0!==xs;return xs=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gs?fs.memoizedState=gs=e:gs=gs.next=e,gs}function Cs(){if(null===ms){var e=fs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===gs?fs.memoizedState:gs.next;if(null!==t)gs=t,ms=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===gs?fs.memoizedState=gs=e:gs=gs.next=e}return gs}function Ms(e,t){return"function"===typeof t?t(e):t}function Ts(e){var t=Cs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ms,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((ps&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,fs.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,fs.lanes|=s,Ll|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ks(e){var t=Cs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(bo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ps(){}function Rs(e,t){var n=fs,r=Cs(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,bo=!0),r=r.queue,Gs(Bs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==gs&&1&gs.memoizedState.tag){if(n.flags|=2048,Os(9,Is.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ps)||Ds(n,t,i)}return i}function Ds(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=fs.updateQueue)?(t={lastEffect:null,stores:null},fs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Is(e,t,n,r){t.value=n,t.getSnapshot=r,js(t)&&Fs(e)}function Bs(e,t,n){return n((function(){js(t)&&Fs(e)}))}function js(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Fs(e){var t=ka(e,1);null!==t&&rc(t,e,1,-1)}function Ls(e){var t=Es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,fs,e),[t.memoizedState,e]}function Os(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=fs.updateQueue)?(t={lastEffect:null,stores:null},fs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ns(){return Cs().memoizedState}function zs(e,t,n,r){var i=Es();fs.flags|=e,i.memoizedState=Os(1|t,n,void 0,void 0===r?null:r)}function Us(e,t,n,r){var i=Cs();r=void 0===r?null:r;var a=void 0;if(null!==ms){var s=ms.memoizedState;if(a=s.destroy,null!==r&&Ss(r,s.deps))return void(i.memoizedState=Os(t,n,a,r))}fs.flags|=e,i.memoizedState=Os(1|t,n,a,r)}function Hs(e,t){return zs(8390656,8,e,t)}function Gs(e,t){return Us(2048,8,e,t)}function Vs(e,t){return Us(4,2,e,t)}function Ws(e,t){return Us(4,4,e,t)}function qs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4,4,qs.bind(null,t,e),n)}function Js(){}function Ys(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ss(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ks(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ss(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zs(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),fs.lanes|=n,Ll|=n,e.baseState=!0),t)}function Qs(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=hs.transition;hs.transition={};try{e(!1),t()}finally{xt=n,hs.transition=r}}function $s(){return Cs().memoizedState}function eo(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=Ta(e,t,n,r))){rc(n,e,r,tc()),io(n,t,r)}}function to(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(i.next=i,Ma(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ta(e,t,i,r))&&(rc(n,e,r,i=tc()),io(n,t,r))}}function no(e){var t=e.alternate;return e===fs||null!==t&&t===fs}function ro(e,t){ys=vs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ao={readContext:Ea,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},so={readContext:Ea,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zs(4194308,4,qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return zs(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Es();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,fs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ls,useDebugValue:Js,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ls(!1),t=e[0];return e=Qs.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fs,i=Es();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&ps)||Ds(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Hs(Bs.bind(null,r,s,e),[e]),r.flags|=2048,Os(9,Is.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Es(),t=Pl.identifierPrefix;if(ia){var n=Zi;t=":"+t+"R"+(n=(Ki&~(1<<32-st(Ki)-1)).toString(32)+n),0<(n=xs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Ea,useCallback:Ys,useContext:Ea,useEffect:Gs,useImperativeHandle:Xs,useInsertionEffect:Vs,useLayoutEffect:Ws,useMemo:Ks,useReducer:Ts,useRef:Ns,useState:function(){return Ts(Ms)},useDebugValue:Js,useDeferredValue:function(e){return Zs(Cs(),ms.memoizedState,e)},useTransition:function(){return[Ts(Ms)[0],Cs().memoizedState]},useMutableSource:Ps,useSyncExternalStore:Rs,useId:$s,unstable_isNewReconciler:!1},lo={readContext:Ea,useCallback:Ys,useContext:Ea,useEffect:Gs,useImperativeHandle:Xs,useInsertionEffect:Vs,useLayoutEffect:Ws,useMemo:Ks,useReducer:ks,useRef:Ns,useState:function(){return ks(Ms)},useDebugValue:Js,useDeferredValue:function(e){var t=Cs();return null===ms?t.memoizedState=e:Zs(t,ms.memoizedState,e)},useTransition:function(){return[ks(Ms)[0],Cs().memoizedState]},useMutableSource:Ps,useSyncExternalStore:Rs,useId:$s,unstable_isNewReconciler:!1};function co(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var po="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),ho(0,t)},n}function mo(e,t,n){(n=Ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ia(-1,1)).tag=2,Ba(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xo=b.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?Za(t,null,n,r):Ka(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var a=t.ref;return Aa(t,i),r=_s(e,t,n,r,a,i),n=As(),null===e||bo?(ia&&n&&ea(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wo(e,t,i))}function _o(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ic(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ao(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wo(e,t,i)}return t.flags|=1,(e=Bc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ao(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return Mo(e,t,n,r,i)}function Eo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Bl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Bl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Bl,Il),Il|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Bl,Il),Il|=r;return wo(e,t,i,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Mo(e,t,n,r,i){var a=Di(n)?Pi:Ti.current;return a=Ri(t,a),Aa(t,i),n=_s(e,t,n,r,a,i),r=As(),null===e||bo?(ia&&r&&ea(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wo(e,t,i))}function To(e,t,n,r,i){if(Di(n)){var a=!0;Fi(t)}else a=!1;if(Aa(t,i),null===t.stateNode)Vo(e,t),Ga(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ri(t,c=Di(n)?Pi:Ti.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&Va(t,s,r,c),Pa=!1;var h=t.memoizedState;s.state=h,La(t,r,s,i),l=t.memoizedState,o!==r||h!==l||ki.current||Pa?("function"===typeof u&&(za(t,n,u,r),l=t.memoizedState),(o=Pa||Ha(t,n,o,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Da(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ga(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ea(l):l=Ri(t,l=Di(n)?Pi:Ti.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&Va(t,s,r,l),Pa=!1,h=t.memoizedState,s.state=h,La(t,r,s,i);var f=t.memoizedState;o!==d||h!==f||ki.current||Pa?("function"===typeof p&&(za(t,n,p,r),f=t.memoizedState),(c=Pa||Ha(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ko(e,t,n,r,a,i)}function ko(e,t,n,r,i,a){Co(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Wo(e,t,a);r=t.stateNode,xo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Ka(t,e.child,null,a),t.child=Ka(t,null,o,a)):wo(e,t,o,a),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Bi(0,t.context,!1),rs(e,t.containerInfo)}function Ro(e,t,n,r,i){return pa(),fa(i),t.flags|=256,wo(e,t,n,r),t.child}var Do,Io,Bo,jo,Fo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var r,i=t.pendingProps,s=os.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(os,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Fc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Fo,e):No(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=uo(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(s=Fc(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Ka(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Fo,s);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=uo(s=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Pl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,ka(e,i),rc(r,e,i,-1))}return gc(),zo(e,t,o,r=uo(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Xi[Ji++]=Ki,Xi[Ji++]=Zi,Xi[Ji++]=Yi,Ki=e.id,Zi=e.overflow,Yi=t),t=No(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(o){o=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Bc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Bc(r,o):(o=Fc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Fo,i}return e=(o=e.child).sibling,i=Bc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function No(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&fa(r),Ka(t,e.child,null,n),(e=No(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Ho(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Go(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=os.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(os,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ls(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ho(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ls(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ho(t,!0,n,null,a);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Bc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jo(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(t),null;case 1:case 17:return Di(t.type)&&Ii(),Xo(t),null;case 3:return r=t.stateNode,is(),Ei(ki),Ei(Ti),us(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Io(e,t),Xo(t),null;case 5:ss(t);var i=ns(ts.current);if(n=t.type,null!==e&&null!=t.stateNode)Bo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Xo(t),null}if(e=ns($a.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Nr(jr[i],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":K(r,s),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nr("invalid",r);break;case"textarea":ie(r,s),Nr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Nr("scroll",r)}switch(n){case"input":q(r),$(r,s,!0);break;case"textarea":q(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Do(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),i=r;break;case"iframe":case"object":case"embed":Nr("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Nr(jr[i],e);i=r;break;case"source":Nr("error",e),i=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),i=r;break;case"details":Nr("toggle",e),i=r;break;case"input":K(e,r),i=Y(e,r),Nr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Nr("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Nr("scroll",e):null!=u&&x(e,s,u,l))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xo(t),null;case 6:if(e&&null!=t.stateNode)jo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ns(ts.current),ns($a.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Xo(t),null;case 13:if(Ei(os),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xo(t),s=!1}else null!==aa&&(oc(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&os.current)?0===jl&&(jl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Xo(t),null);case 4:return is(),Io(e,t),null===e&&Hr(t.stateNode.containerInfo),Xo(t),null;case 10:return Sa(t.type._context),Xo(t),null;case 19:if(Ei(os),null===(s=t.memoizedState))return Xo(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)qo(s,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ls(e))){for(t.flags|=128,qo(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(os,1&os.current|2),t.child}e=e.sibling}null!==s.tail&&Ze()>Gl&&(t.flags|=128,r=!0,qo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ls(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ia)return Xo(t),null}else 2*Ze()-s.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,qo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=os.current,Ci(os,r?1&n|2:1&n),t):(Xo(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Xo(t),6&t.subtreeFlags&&(t.flags|=8192)):Xo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yo(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return is(),Ei(ki),Ei(Ti),us(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ss(t),null;case 13:if(Ei(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(os),null;case 4:return is(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Io=function(){},Bo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ns($a.current);var a,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Nr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Zo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,$o=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tl(t,n,a)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Zo||el(n,t);case 6:var r=dl,i=hl;dl=null,pl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&tl(n,t,s),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Zo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Zo=(r=Zo)||null!==n.memoizedState,pl(e,t,n),Zo=r):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach((function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));fl(s,o,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Ec(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(i,s),xe(l,o);var u=xe(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):x(i,d,h,u)}switch(l){case"input":Q(i,s);break;case"textarea":ae(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){Ec(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ec(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Ze())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Zo=(u=Zo)||d,gl(t,e),Zo=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($o=e,d=e.child;null!==d;){for(h=$o=d;null!==$o;){switch(f=(p=$o).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Sl(h);continue}}null!==f?(f.return=p,$o=f):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(a(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){$o=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var i=$o,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ko;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=Ko;var c=Zo;if(Ko=s,(Zo=l)&&!c)for($o=i;null!==$o;)l=(s=$o).child,22===s.tag&&null!==s.memoizedState?_l(i):null!==l?(l.return=s,$o=l):_l(i);for(;null!==a;)$o=a,bl(a,t,n),a=a.sibling;$o=i,Ko=o,Zo=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$o=a):wl(e)}}function wl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ga(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Oa(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Oa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Zo||512&t.flags&&al(t)}catch(p){Ec(t,t.return,p)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function Sl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function _l(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var a=t.return;try{al(t)}catch(l){Ec(t,a,l)}break;case 5:var s=t.return;try{al(t)}catch(l){Ec(t,s,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var Al,El=Math.ceil,Cl=b.ReactCurrentDispatcher,Ml=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,kl=0,Pl=null,Rl=null,Dl=0,Il=0,Bl=Ai(0),jl=0,Fl=null,Ll=0,Ol=0,Nl=0,zl=null,Ul=null,Hl=0,Gl=1/0,Vl=null,Wl=!1,ql=null,Xl=null,Jl=!1,Yl=null,Kl=0,Zl=0,Ql=null,$l=-1,ec=0;function tc(){return 0!==(6&kl)?Ze():-1!==$l?$l:$l=Ze()}function nc(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Dl?Dl&-Dl:null!==ma.transition?(0===ec&&(ec=mt()),ec):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rc(e,t,n,r){if(50<Zl)throw Zl=0,Ql=null,Error(a(185));vt(e,n,r),0!==(2&kl)&&e===Pl||(e===Pl&&(0===(2&kl)&&(Ol|=n),4===jl&&lc(e,Dl)),ic(e,r),1===n&&0===kl&&0===(1&t.mode)&&(Gl=Ze()+500,Ni&&Hi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Pl?Dl:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Ni=!0,Ui(e)}(cc.bind(null,e)):Ui(cc.bind(null,e)),si((function(){0===(6&kl)&&Hi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($l=-1,ec=0,0!==(6&kl))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=kl;kl|=2;var s=mc();for(Pl===e&&Dl===t||(Vl=null,Gl=Ze()+500,pc(e,t));;)try{xc();break}catch(l){fc(e,l)}wa(),Cl.current=s,kl=i,null!==Rl?t=0:(Pl=null,Dl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=sc(e,i))),1===t)throw n=Fl,pc(e,0),lc(e,r),ic(e,Ze()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(s=ft(e))&&(r=s,t=sc(e,s))),1===t))throw n=Fl,pc(e,0),lc(e,r),ic(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Sc(e,Ul,Vl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Hl+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Ul,Vl),t);break}Sc(e,Ul,Vl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Ul,Vl),r);break}Sc(e,Ul,Vl);break;default:throw Error(a(329))}}}return ic(e,Ze()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Ul,Ul=n,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~Nl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&kl))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Ze()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Fl,pc(e,0),lc(e,t),ic(e,Ze()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Ul,Vl),ic(e,Ze()),null}function uc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(Gl=Ze()+500,Ni&&Hi())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&kl)&&_c();var t=kl;kl|=1;var n=Tl.transition,r=xt;try{if(Tl.transition=null,xt=1,e)return e()}finally{xt=r,Tl.transition=n,0===(6&(kl=t))&&Hi()}}function hc(){Il=Bl.current,Ei(Bl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:is(),Ei(ki),Ei(Ti),us();break;case 5:ss(r);break;case 4:is();break;case 13:case 19:Ei(os);break;case 10:Sa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=e,Rl=e=Bc(e.current,null),Dl=Il=t,jl=0,Fl=null,Nl=Ol=Ll=0,Ul=zl=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Ca=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(wa(),ds.current=ao,vs){for(var r=fs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vs=!1}if(ps=0,gs=ms=fs=null,ys=!1,xs=0,Ml.current=null,null===n||null===n.return){jl=1,Fl=t,Rl=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=vo(o);if(null!==f){f.flags&=-257,yo(f,o,l,0,t),1&f.mode&&go(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(s,u,t),gc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var v=vo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),yo(v,o,l,0,t),fa(co(c,l));break e}}s=c=co(c,l),4!==jl&&(jl=2),null===zl?zl=[s]:zl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fa(s,fo(0,c,t));break e;case 1:l=c;var y=s.type,x=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xl||!Xl.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t,Fa(s,mo(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=ao,null===e?ao:e}function gc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Pl||0===(268435455&Ll)&&0===(268435455&Ol)||lc(Pl,Dl)}function vc(e,t){var n=kl;kl|=2;var r=mc();for(Pl===e&&Dl===t||(Vl=null,pc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(wa(),kl=n,Cl.current=r,null!==Rl)throw Error(a(261));return Pl=null,Dl=0,jl}function yc(){for(;null!==Rl;)bc(Rl)}function xc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Al(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,Ml.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Jo(n,t,Il)))return void(Rl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return jl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===jl&&(jl=5)}function Sc(e,t,n){var r=xt,i=Tl.transition;try{Tl.transition=null,xt=1,function(e,t,n,r){do{_c()}while(null!==Yl);if(0!==(6&kl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Pl&&(Rl=Pl=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Pc(tt,(function(){return _c(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Tl.transition,Tl.transition=null;var o=xt;xt=1;var l=kl;kl|=4,Ml.current=null,function(e,t){if(ei=Vt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=o),p===s&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ga(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}m=nl,nl=!1}(e,n),vl(n,e),fr(ti),Vt=!!ei,ti=ei=null,e.current=n,xl(n,e,i),Ke(),kl=l,xt=o,Tl.transition=s}else e.current=n;if(Jl&&(Jl=!1,Yl=e,Kl=i),s=e.pendingLanes,0===s&&(Xl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&Kl)&&0!==e.tag&&_c(),s=e.pendingLanes,0!==(1&s)?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,Hi()}(e,t,n,r)}finally{Tl.transition=i,xt=r}return null}function _c(){if(null!==Yl){var e=bt(Kl),t=Tl.transition,n=xt;try{if(Tl.transition=null,xt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Kl=0,0!==(6&kl))throw Error(a(331));var i=kl;for(kl|=4,$o=e.current;null!==$o;){var s=$o,o=s.child;if(0!==(16&$o.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($o=u;null!==$o;){var d=$o;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var h=d.child;if(null!==h)h.return=d,$o=h;else for(;null!==$o;){var p=(d=$o).sibling,f=d.return;if(sl(d),d===u){$o=null;break}if(null!==p){p.return=f,$o=p;break}$o=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$o=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,$o=o;else e:for(;null!==$o;){if(0!==(2048&(s=$o).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,$o=y;break e}$o=s.return}}var x=e.current;for($o=x;null!==$o;){var b=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,$o=b;else e:for(o=x;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Ec(l,l.return,S)}if(l===o){$o=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$o=w;break e}$o=l.return}}if(kl=i,Hi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{xt=n,Tl.transition=t}}return!1}function Ac(e,t,n){e=Ba(e,t=fo(0,t=co(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=Ba(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Dl&n)===n&&(4===jl||3===jl&&(130023424&Dl)===Dl&&500>Ze()-Hl?pc(e,0):Nl|=n),ic(e,t)}function Mc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=ka(e,t))&&(vt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Mc(e,n)}function Pc(e,t){return Xe(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Fc(n.children,i,s,t);case A:o=8,i|=8;break;case E:return(e=Dc(12,n,t,2|i)).elementType=E,e.lanes=s,e;case k:return(e=Dc(13,n,t,i)).elementType=k,e.lanes=s,e;case P:return(e=Dc(19,n,t,i)).elementType=P,e.lanes=s,e;case I:return Lc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case M:o=9;break e;case T:o=11;break e;case R:o=14;break e;case D:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Fc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Nc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,s,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Hc(e){if(!e)return Mi;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return ji(e,n,t)}return t}function Gc(e,t,n,r,i,a,s,o,l){return(e=Uc(n,r,!0,e,0,a,0,o,l)).context=Hc(null),n=e.current,(a=Ia(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ba(n,a,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Vc(e,t,n,r){var i=t.current,a=tc(),s=nc(i);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ia(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ba(i,t,s))&&(rc(e,i,s,a),ja(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ki.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),pa();break;case 5:as(t);break;case 1:Di(t.type)&&Fi(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(va,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(os,1&os.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(Ci(os,1&os.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ci(os,1&os.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Go(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(os,os.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Wo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,ia&&0!==(1048576&t.flags)&&$i(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var i=Ri(t,Ti.current);Aa(t,n),i=_s(null,t,r,e,i,n);var s=As();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(s=!0,Fi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Ua,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=ko(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(r),e=ga(r,e),i){case 0:t=Mo(null,t,r,e,n);break e;case 1:t=To(null,t,r,e,n);break e;case 11:t=So(null,t,r,e,n);break e;case 14:t=_o(null,t,r,ga(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Mo(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 1:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 3:e:{if(Po(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Da(e,t),La(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ro(e,t,r,n,i=co(Error(a(423)),t));break e}if(r!==i){t=Ro(e,t,r,n,i=co(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Za(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Wo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return as(t),null===e&&ca(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),Co(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Oo(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ka(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ci(va,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!ki.current){t=Wo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ia(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),_a(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),_a(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Aa(t,n),r=r(i=Ea(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=ga(r=t.type,t.pendingProps),_o(e,t,r,i=ga(r.type,i),n);case 15:return Ao(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ga(r,i),Vo(e,t),t.tag=1,Di(r)?(e=!0,Fi(t)):e=!1,Aa(t,n),Ga(t,r,i),Wa(t,r,i,n),ko(null,t,r,!0,e,n);case 19:return Go(e,t,n);case 22:return Eo(e,t,n)}throw Error(a(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=Wc(s);o.call(e)}}Vc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(s);a.call(e)}}var s=Gc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[fi]=s.current,Hr(8===e.nodeType?e.parentNode:e),dc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[fi]=l.current,Hr(8===e.nodeType?e.parentNode:e),dc((function(){Vc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Vc(null,e,null,null)})),t[fi]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Ze()),0===(6&kl)&&(Gl=Ze()+500,Hi()))}break;case 13:dc((function(){var t=ka(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Xc(e,1)}},St=function(e){if(13===e.tag){var t=ka(e,134217728);if(null!==t)rc(t,e,134217728,tc());Xc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=ka(e,t);if(null!==n)rc(n,e,t,tc());Xc(e,t)}},At=function(){return xt},Et=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Se=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));X(r),Q(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,ke=dc;var tu={usingClientEntryPoint:!1,Events:[xi,bi,wi,Ce,Me,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),at=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(a(299));var n=!1,r="",i=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(a(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,s,o),e[fi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(a(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},6366:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var o,l,c,u;if(Array.isArray(e)){if((o=e.length)!=s.length)return!1;for(l=o;0!==l--;)if(!a(e[l],s[l]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!a(l.value[1],s.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((o=e.length)!=s.length)return!1;for(l=o;0!==l--;)if(e[l]!==s[l])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof s.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof s.toString)return e.toString()===s.toString();if((o=(c=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(l=o;0!==l--;)if(!Object.prototype.hasOwnProperty.call(s,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=o;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!a(e[c[l]],s[c[l]]))return!1;return!0}return e!==e&&s!==s}e.exports=function(e,t){try{return a(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},5226:(e,t,n)=>{"use strict";var r=h(n(4414)),i=h(n(7360)),a=h(n(6731)),s=h(n(2239)),o=h(n(1912)),l=h(n(6835)),c=h(n(5043)),u=h(n(5173)),d=h(n(1302));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){var e,n,r,s;(0,a.default)(this,t);for(var l=arguments.length,c=Array(l),u=0;u<l;u++)c[u]=arguments[u];return n=r=(0,o.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(c))),r.handleClickToPause=function(){r.anim.isPaused?r.anim.play():r.anim.pause()},s=n,(0,o.default)(r,s)}return(0,l.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.options,n=e.eventListeners,i=t.loop,a=t.autoplay,s=t.animationData,o=t.rendererSettings,l=t.segments;this.options={container:this.el,renderer:"svg",loop:!1!==i,autoplay:!1!==a,segments:!1!==l,animationData:s,rendererSettings:o},this.options=(0,r.default)({},this.options,t),this.anim=d.default.loadAnimation(this.options),this.registerEvents(n)}},{key:"componentWillUpdate",value:function(e){this.options.animationData!==e.options.animationData&&(this.deRegisterEvents(this.props.eventListeners),this.destroy(),this.options=(0,r.default)({},this.options,e.options),this.anim=d.default.loadAnimation(this.options),this.registerEvents(e.eventListeners))}},{key:"componentDidUpdate",value:function(){this.props.isStopped?this.stop():this.props.segments?this.playSegments():this.play(),this.pause(),this.setSpeed(),this.setDirection()}},{key:"componentWillUnmount",value:function(){this.deRegisterEvents(this.props.eventListeners),this.destroy(),this.options.animationData=null,this.anim=null}},{key:"setSpeed",value:function(){this.anim.setSpeed(this.props.speed)}},{key:"setDirection",value:function(){this.anim.setDirection(this.props.direction)}},{key:"play",value:function(){this.anim.play()}},{key:"playSegments",value:function(){this.anim.playSegments(this.props.segments)}},{key:"stop",value:function(){this.anim.stop()}},{key:"pause",value:function(){(this.props.isPaused&&!this.anim.isPaused||!this.props.isPaused&&this.anim.isPaused)&&this.anim.pause()}},{key:"destroy",value:function(){this.anim.destroy()}},{key:"registerEvents",value:function(e){var t=this;e.forEach((function(e){t.anim.addEventListener(e.eventName,e.callback)}))}},{key:"deRegisterEvents",value:function(e){var t=this;e.forEach((function(e){t.anim.removeEventListener(e.eventName,e.callback)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,i=t.height,a=t.ariaRole,s=t.ariaLabel,o=t.isClickToPauseDisabled,l=t.title,u=function(e){return"number"===typeof e?e+"px":e||"100%"},d=(0,r.default)({width:u(n),height:u(i),overflow:"hidden",margin:"0 auto",outline:"none"},this.props.style),h=o?function(){return null}:this.handleClickToPause;return c.default.createElement("div",{ref:function(t){e.el=t},style:d,onClick:h,title:l,role:a,"aria-label":s,tabIndex:"0"})}}]),t}(c.default.Component);t.A=p,p.propTypes={eventListeners:u.default.arrayOf(u.default.object),options:u.default.object.isRequired,height:u.default.oneOfType([u.default.string,u.default.number]),width:u.default.oneOfType([u.default.string,u.default.number]),isStopped:u.default.bool,isPaused:u.default.bool,speed:u.default.number,segments:u.default.arrayOf(u.default.number),direction:u.default.number,ariaRole:u.default.string,ariaLabel:u.default.string,isClickToPauseDisabled:u.default.bool,title:u.default.string,style:u.default.string},p.defaultProps={eventListeners:[],isStopped:!1,isPaused:!1,speed:1,ariaRole:"button",ariaLabel:"animation",isClickToPauseDisabled:!1,title:""}},7302:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},6958:(e,t,n)=>{e.exports=function(e){var t={},r=n(5043),i=n(8513),a=Object.assign;function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var w=Symbol.iterator;function S(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=w&&e[w]||e["@@iterator"])?e:null}function _(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case d:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:_(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return _(e(t))}catch(n){}}return null}function A(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function E(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function C(e){if(E(e)!==e)throw Error(s(188))}function M(e){var t=e.alternate;if(!t){if(null===(t=E(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return C(i),e;if(a===r)return C(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}function T(e){return null!==(e=M(e))?k(e):null}function k(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=k(e);if(null!==t)return t;e=e.sibling}return null}function P(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=P(e);if(null!==t)return t}e=e.sibling}return null}var R,D=Array.isArray,I=e.getPublicInstance,B=e.getRootHostContext,j=e.getChildHostContext,F=e.prepareForCommit,L=e.resetAfterCommit,O=e.createInstance,N=e.appendInitialChild,z=e.finalizeInitialChildren,U=e.prepareUpdate,H=e.shouldSetTextContent,G=e.createTextInstance,V=e.scheduleTimeout,W=e.cancelTimeout,q=e.noTimeout,X=e.isPrimaryRenderer,J=e.supportsMutation,Y=e.supportsPersistence,K=e.supportsHydration,Z=e.getInstanceFromNode,Q=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,ae=e.getBoundingRect,se=e.getTextContent,oe=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,de=e.appendChild,he=e.appendChildToContainer,pe=e.commitTextUpdate,fe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,xe=e.removeChildFromContainer,be=e.resetTextContent,we=e.hideInstance,Se=e.hideTextInstance,_e=e.unhideInstance,Ae=e.unhideTextInstance,Ee=e.clearContainer,Ce=e.cloneInstance,Me=e.createContainerChildSet,Te=e.appendChildToContainerChildSet,ke=e.finalizeContainerChildren,Pe=e.replaceContainerChildren,Re=e.cloneHiddenInstance,De=e.cloneHiddenTextInstance,Ie=e.canHydrateInstance,Be=e.canHydrateTextInstance,je=e.canHydrateSuspenseInstance,Fe=e.isSuspenseInstancePending,Le=e.isSuspenseInstanceFallback,Oe=e.registerSuspenseInstanceRetry,Ne=e.getNextHydratableSibling,ze=e.getFirstHydratableChild,Ue=e.getFirstHydratableChildWithinContainer,He=e.getFirstHydratableChildWithinSuspenseInstance,Ge=e.hydrateInstance,Ve=e.hydrateTextInstance,We=e.hydrateSuspenseInstance,qe=e.getNextHydratableInstanceAfterSuspenseInstance,Xe=e.commitHydratedContainer,Je=e.commitHydratedSuspenseInstance,Ye=e.clearSuspenseBoundary,Ke=e.clearSuspenseBoundaryFromContainer,Ze=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],at=-1;function st(e){return{current:e}}function ot(e){0>at||(e.current=it[at],it[at]=null,at--)}function lt(e,t){at++,it[at]=e.current,e.current=t}var ct={},ut=st(ct),dt=st(!1),ht=ct;function pt(e,t){var n=e.type.contextTypes;if(!n)return ct;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ft(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mt(){ot(dt),ot(ut)}function gt(e,t,n){if(ut.current!==ct)throw Error(s(168));lt(ut,t),lt(dt,n)}function vt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,A(e)||"Unknown",i));return a({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,ht=ut.current,lt(ut,e),lt(dt,dt.current),!0}function xt(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=vt(e,t,ht),r.__reactInternalMemoizedMergedChildContext=e,ot(dt),ot(ut),lt(ut,e)):ot(dt),lt(dt,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(wt(e)/St|0)|0},wt=Math.log,St=Math.LN2;var _t=64,At=4194304;function Et(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=Et(o):0!==(a&=s)&&(r=Et(a))}else 0!==(s=n&~i)?r=Et(s):0!==a&&(r=Et(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-bt(t)),r|=e[n],t&=~i;return r}function Mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Tt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function kt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Dt=0;function It(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Bt=i.unstable_scheduleCallback,jt=i.unstable_cancelCallback,Ft=i.unstable_shouldYield,Lt=i.unstable_requestPaint,Ot=i.unstable_now,Nt=i.unstable_ImmediatePriority,zt=i.unstable_UserBlockingPriority,Ut=i.unstable_NormalPriority,Ht=i.unstable_IdlePriority,Gt=null,Vt=null;var Wt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},qt=null,Xt=!1,Jt=!1;function Yt(e){null===qt?qt=[e]:qt.push(e)}function Kt(){if(!Jt&&null!==qt){Jt=!0;var e=0,t=Dt;try{var n=qt;for(Dt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}qt=null,Xt=!1}catch(i){throw null!==qt&&(qt=qt.slice(e+1)),Bt(Nt,Kt),i}finally{Dt=t,Jt=!1}}return null}var Zt=o.ReactCurrentBatchConfig;function Qt(e,t){if(Wt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Wt(e[i],t[i]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=st(null),nn=null,rn=null,an=null;function sn(){an=rn=nn=null}function on(e,t,n){X?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;ot(tn),X?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fi=!0),e.firstContext=null)}function dn(e){var t=X?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(s(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,pn=!1;function fn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ja&&0!==(1&e.mode)&&0===(2&Xa)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Rt(e,n)}}function xn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var i=e.updateQueue;pn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?s=u:o.next=u,o=c;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===l?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,d=u=c=null,l=s;;){var p=l.lane,f=l.eventTime;if((r&p)===p){null!==d&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(p=t,f=n,g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(f,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(f,h,p):m)||void 0===p)break e;h=a({},h,p);break e;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(u=d=f,c=h):d=d.next=f,o|=p;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(p=l).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===d&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);ts|=o,e.lanes=o,e.memoizedState=h}}function wn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Sn=(new r.Component).refs;function _n(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var An={isMounted:function(e){return!!(e=e._reactInternals)&&E(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=bs(),i=ws(e),a=gn(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),vn(e,a),null!==(t=Ss(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=bs(),i=ws(e),a=gn(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),vn(e,a),null!==(t=Ss(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bs(),r=ws(e),i=gn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),vn(e,i),null!==(t=Ss(e,r,n))&&yn(t,e,r)}};function En(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Qt(n,r)||!Qt(i,a))}function Cn(e,t,n){var r=!1,i=ct,a=t.contextType;return"object"===typeof a&&null!==a?a=dn(a):(i=ft(t)?ht:ut.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?pt(e,i):ct),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=An,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Mn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&An.enqueueReplaceState(t,t.state,null)}function Tn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Sn,fn(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=dn(a):(a=ft(t)?ht:ut.current,i.context=pt(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(_n(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&An.enqueueReplaceState(i,i.state,null),bn(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var kn=[],Pn=0,Rn=null,Dn=0,In=[],Bn=0,jn=null,Fn=1,Ln="";function On(e,t){kn[Pn++]=Dn,kn[Pn++]=Rn,Rn=e,Dn=t}function Nn(e,t,n){In[Bn++]=Fn,In[Bn++]=Ln,In[Bn++]=jn,jn=e;var r=Fn;e=Ln;var i=32-bt(r)-1;r&=~(1<<i),n+=1;var a=32-bt(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Fn=1<<32-bt(t)+i|n<<i|r,Ln=a+e}else Fn=1<<a|n<<i|r,Ln=e}function zn(e){null!==e.return&&(On(e,1),Nn(e,1,0))}function Un(e){for(;e===Rn;)Rn=kn[--Pn],kn[Pn]=null,Dn=kn[--Pn],kn[Pn]=null;for(;e===jn;)jn=In[--Bn],In[Bn]=null,Ln=In[--Bn],In[Bn]=null,Fn=In[--Bn],In[Bn]=null}var Hn=null,Gn=null,Vn=!1,Wn=!1,qn=null;function Xn(e,t){var n=Zs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Jn(e,t){switch(e.tag){case 5:return null!==(t=Ie(t,e.type,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=ze(t),!0);case 6:return null!==(t=Be(t,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=null,!0);case 13:if(null!==(t=je(t))){var n=null!==jn?{id:Fn,overflow:Ln}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Zs(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Hn=e,Gn=null,!0}return!1;default:return!1}}function Yn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Kn(e){if(Vn){var t=Gn;if(t){var n=t;if(!Jn(e,t)){if(Yn(e))throw Error(s(418));t=Ne(n);var r=Hn;t&&Jn(e,t)?Xn(r,n):(e.flags=-4097&e.flags|2,Vn=!1,Hn=e)}}else{if(Yn(e))throw Error(s(418));e.flags=-4097&e.flags|2,Vn=!1,Hn=e}}}function Zn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function Qn(e){if(!K||e!==Hn)return!1;if(!Vn)return Zn(e),Vn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ze(e.type)&&!H(e.type,e.memoizedProps))){var t=Gn;if(t){if(Yn(e)){for(e=Gn;e;)e=Ne(e);throw Error(s(418))}for(;t;)Xn(e,t),t=Ne(t)}}if(Zn(e),13===e.tag){if(!K)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));Gn=qe(e)}else Gn=Hn?Ne(e.stateNode):null;return!0}function $n(){K&&(Gn=Hn=null,Wn=Vn=!1)}function er(e){null===qn?qn=[e]:qn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Sn&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=$s(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function d(e,t,n,r){return null===t||6!==t.tag?((t=ro(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n,r){var a=n.type;return a===u?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===x&&rr(a)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=eo(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=io(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=to(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ro(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=eo(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case c:return(t=io(t,e.mode,n)).return=e,t;case x:return m(e,(0,t._init)(t._payload),n)}if(D(t)||S(t))return(t=to(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:d(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?h(e,t,n,r):null;case c:return n.key===i?p(e,t,n,r):null;case x:return g(e,t,(i=n._init)(n._payload),r)}if(D(n)||S(n))return null!==i?null:f(e,t,n,r,null);nr(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return d(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case c:return p(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return v(e,t,n,(0,r._init)(r._payload),i)}if(D(r)||S(r))return f(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,s,o,l){for(var c=null,u=null,d=s,h=s=0,p=null;null!==d&&h<o.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var f=g(i,d,o[h],l);if(null===f){null===d&&(d=p);break}e&&d&&null===f.alternate&&t(i,d),s=a(f,s,h),null===u?c=f:u.sibling=f,u=f,d=p}if(h===o.length)return n(i,d),Vn&&On(i,h),c;if(null===d){for(;h<o.length;h++)null!==(d=m(i,o[h],l))&&(s=a(d,s,h),null===u?c=d:u.sibling=d,u=d);return Vn&&On(i,h),c}for(d=r(i,d);h<o.length;h++)null!==(p=v(d,i,h,o[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),s=a(p,s,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach((function(e){return t(i,e)})),Vn&&On(i,h),c}function b(i,o,l,c){var u=S(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,h=o,p=o=0,f=null,y=l.next();null!==h&&!y.done;p++,y=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var x=g(i,h,y.value,c);if(null===x){null===h&&(h=f);break}e&&h&&null===x.alternate&&t(i,h),o=a(x,o,p),null===d?u=x:d.sibling=x,d=x,h=f}if(y.done)return n(i,h),Vn&&On(i,p),u;if(null===h){for(;!y.done;p++,y=l.next())null!==(y=m(i,y.value,c))&&(o=a(y,o,p),null===d?u=y:d.sibling=y,d=y);return Vn&&On(i,p),u}for(h=r(i,h);!y.done;p++,y=l.next())null!==(y=v(h,i,p,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?p:y.key),o=a(y,o,p),null===d?u=y:d.sibling=y,d=y);return e&&h.forEach((function(e){return t(i,e)})),Vn&&On(i,p),u}return function e(r,a,s,d){if("object"===typeof s&&null!==s&&s.type===u&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case l:e:{for(var h=s.key,p=a;null!==p;){if(p.key===h){if((h=s.type)===u){if(7===p.tag){n(r,p.sibling),(a=i(p,s.props.children)).return=r,r=a;break e}}else if(p.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===x&&rr(h)===p.type){n(r,p.sibling),(a=i(p,s.props)).ref=tr(r,p,s),a.return=r,r=a;break e}n(r,p);break}t(r,p),p=p.sibling}s.type===u?((a=to(s.props.children,r.mode,d,s.key)).return=r,r=a):((d=eo(s.type,s.key,s.props,null,r.mode,d)).ref=tr(r,a,s),d.return=r,r=d)}return o(r);case c:e:{for(p=s.key;null!==a;){if(a.key===p){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=io(s,r.mode,d)).return=r,r=a}return o(r);case x:return e(r,a,(p=s._init)(s._payload),d)}if(D(s))return y(r,a,s,d);if(S(s))return b(r,a,s,d);nr(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=ro(s,r.mode,d)).return=r,r=a),o(r)):n(r,a)}}var ar=ir(!0),sr=ir(!1),or={},lr=st(or),cr=st(or),ur=st(or);function dr(e){if(e===or)throw Error(s(174));return e}function hr(e,t){lt(ur,t),lt(cr,e),lt(lr,or),e=B(t),ot(lr),lt(lr,e)}function pr(){ot(lr),ot(cr),ot(ur)}function fr(e){var t=dr(ur.current),n=dr(lr.current);n!==(t=j(n,e.type,t))&&(lt(cr,e),lt(lr,t))}function mr(e){cr.current===e&&(ot(lr),ot(cr))}var gr=st(0);function vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Fe(n)||Le(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function xr(){for(var e=0;e<yr.length;e++){var t=yr[e];X?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var br=o.ReactCurrentDispatcher,wr=o.ReactCurrentBatchConfig,Sr=0,_r=null,Ar=null,Er=null,Cr=!1,Mr=!1,Tr=0,kr=0;function Pr(){throw Error(s(321))}function Rr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function Dr(e,t,n,r,i,a){if(Sr=a,_r=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,br.current=null===e||null===e.memoizedState?fi:mi,e=n(r,i),Mr){a=0;do{if(Mr=!1,Tr=0,25<=a)throw Error(s(301));a+=1,Er=Ar=null,t.updateQueue=null,br.current=gi,e=n(r,i)}while(Mr)}if(br.current=pi,t=null!==Ar&&null!==Ar.next,Sr=0,Er=Ar=_r=null,Cr=!1,t)throw Error(s(300));return e}function Ir(){var e=0!==Tr;return Tr=0,e}function Br(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Er?_r.memoizedState=Er=e:Er=Er.next=e,Er}function jr(){if(null===Ar){var e=_r.alternate;e=null!==e?e.memoizedState:null}else e=Ar.next;var t=null===Er?_r.memoizedState:Er.next;if(null!==t)Er=t,Ar=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Ar=e).memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},null===Er?_r.memoizedState=Er=e:Er=Er.next=e}return Er}function Fr(e,t){return"function"===typeof t?t(e):t}function Lr(e){var t=jr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Ar,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Sr&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,_r.lanes|=d,ts|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,Wt(r,t.memoizedState)||(Fi=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,_r.lanes|=a,ts|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Or(e){var t=jr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Wt(a,t.memoizedState)||(Fi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Nr(){}function zr(e,t){var n=_r,r=jr(),i=t(),a=!Wt(r.memoizedState,i);if(a&&(r.memoizedState=i,Fi=!0),r=r.queue,Zr(Gr.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Er&&1&Er.memoizedState.tag){if(n.flags|=2048,qr(9,Hr.bind(null,n,r,i,t),void 0,null),null===Ja)throw Error(s(349));0!==(30&Sr)||Ur(n,t,i)}return i}function Ur(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_r.updateQueue)?(t={lastEffect:null,stores:null},_r.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Hr(e,t,n,r){t.value=n,t.getSnapshot=r,Vr(t)&&Ss(e,1,-1)}function Gr(e,t,n){return n((function(){Vr(t)&&Ss(e,1,-1)}))}function Vr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch(r){return!0}}function Wr(e){var t=Br();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fr,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,_r,e),[t.memoizedState,e]}function qr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=_r.updateQueue)?(t={lastEffect:null,stores:null},_r.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Xr(){return jr().memoizedState}function Jr(e,t,n,r){var i=Br();_r.flags|=e,i.memoizedState=qr(1|t,n,void 0,void 0===r?null:r)}function Yr(e,t,n,r){var i=jr();r=void 0===r?null:r;var a=void 0;if(null!==Ar){var s=Ar.memoizedState;if(a=s.destroy,null!==r&&Rr(r,s.deps))return void(i.memoizedState=qr(t,n,a,r))}_r.flags|=e,i.memoizedState=qr(1|t,n,a,r)}function Kr(e,t){return Jr(8390656,8,e,t)}function Zr(e,t){return Yr(2048,8,e,t)}function Qr(e,t){return Yr(4,2,e,t)}function $r(e,t){return Yr(4,4,e,t)}function ei(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=jr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Rr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=jr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Rr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=Dt;Dt=0!==n&&4>n?n:4,e(!0);var r=wr.transition;wr.transition={};try{e(!1),t()}finally{Dt=n,wr.transition=r}}function si(){return jr().memoizedState}function oi(e,t,n){var r=ws(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ci(e)?ui(t,n):(di(e,t,n),null!==(e=Ss(e,r,n=bs()))&&hi(e,t,r))}function li(e,t,n){var r=ws(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ci(e))ui(t,i);else{di(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Wt(o,s))return}catch(l){}null!==(e=Ss(e,r,n=bs()))&&hi(e,t,r)}}function ci(e){var t=e.alternate;return e===_r||null!==t&&t===_r}function ui(e,t){Mr=Cr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function di(e,t,n){null!==Ja&&0!==(1&e.mode)&&0===(2&Xa)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Rt(e,n)}}var pi={readContext:dn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},fi={readContext:dn,useCallback:function(e,t){return Br().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:Kr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Jr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jr(4,2,e,t)},useMemo:function(e,t){var n=Br();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Br();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=oi.bind(null,_r,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Br().memoizedState=e},useState:Wr,useDebugValue:ni,useDeferredValue:function(e){var t=Wr(e),n=t[0],r=t[1];return Kr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){var e=Wr(!1),t=e[0];return e=ai.bind(null,e[1]),Br().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_r,i=Br();if(Vn){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ja)throw Error(s(349));0!==(30&Sr)||Ur(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Kr(Gr.bind(null,r,a,e),[e]),r.flags|=2048,qr(9,Hr.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Br(),t=Ja.identifierPrefix;if(Vn){var n=Ln;t=":"+t+"R"+(n=(Fn&~(1<<32-bt(Fn)-1)).toString(32)+n),0<(n=Tr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=kr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mi={readContext:dn,useCallback:ri,useContext:dn,useEffect:Zr,useImperativeHandle:ti,useInsertionEffect:Qr,useLayoutEffect:$r,useMemo:ii,useReducer:Lr,useRef:Xr,useState:function(){return Lr(Fr)},useDebugValue:ni,useDeferredValue:function(e){var t=Lr(Fr),n=t[0],r=t[1];return Zr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){return[Lr(Fr)[0],jr().memoizedState]},useMutableSource:Nr,useSyncExternalStore:zr,useId:si,unstable_isNewReconciler:!1},gi={readContext:dn,useCallback:ri,useContext:dn,useEffect:Zr,useImperativeHandle:ti,useInsertionEffect:Qr,useLayoutEffect:$r,useMemo:ii,useReducer:Or,useRef:Xr,useState:function(){return Or(Fr)},useDebugValue:ni,useDeferredValue:function(e){var t=Or(Fr),n=t[0],r=t[1];return Zr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){return[Or(Fr)[0],jr().memoizedState]},useMutableSource:Nr,useSyncExternalStore:zr,useId:si,unstable_isNewReconciler:!1};function vi(e,t){try{var n="",r=t;do{n+=$t(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var xi,bi,wi,Si,_i="function"===typeof WeakMap?WeakMap:Map;function Ai(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){us||(us=!0,ds=r),yi(0,t)},n}function Ei(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!==typeof r&&(null===hs?hs=new Set([this]):hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ci(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new _i;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ws.bind(null,e,t,n),t.then(e,e))}function Mi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ti(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function ki(e){e.flags|=4}function Pi(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(J)xi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)N(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},bi=function(){},wi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var a=t.stateNode,s=dr(lr.current);n=U(a,n,e,r,i,s),(t.updateQueue=n)&&ki(t)}},Si=function(e,t,n,r){n!==r&&ki(t)};else if(Y){xi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Re(a,i.type,i.memoizedProps,i)),N(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=De(a,i.memoizedProps,i)),N(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),xi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Ri=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Re(a,i.type,i.memoizedProps,i)),Te(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=De(a,i.memoizedProps,i)),Te(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Ri(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};bi=function(e,t){var n=t.stateNode;if(!Pi(e,t)){e=n.containerInfo;var r=Me(e);Ri(r,t,!1,!1),n.pendingChildren=r,ki(t),ke(e,r)}},wi=function(e,t,n,r,i){var a=e.stateNode,s=e.memoizedProps;if((e=Pi(e,t))&&s===r)t.stateNode=a;else{var o=t.stateNode,l=dr(lr.current),c=null;s!==r&&(c=U(o,n,s,r,i,l)),e&&null===c?t.stateNode=a:(a=Ce(a,c,n,s,r,t,e,o),z(a,n,r,i,l)&&ki(t),t.stateNode=a,e?ki(t):xi(a,t,!1,!1))}},Si=function(e,t,n,r){n!==r?(e=dr(ur.current),n=dr(lr.current),t.stateNode=G(r,e,n,t),ki(t)):t.stateNode=e.stateNode}}else bi=function(){},wi=function(){},Si=function(){};function Di(e,t){if(!Vn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ii(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Bi(e,t,n){var r=t.pendingProps;switch(Un(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(t),null;case 1:case 17:return ft(t.type)&&mt(),Ii(t),null;case 3:return r=t.stateNode,pr(),ot(dt),ot(ut),xr(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Qn(t)?ki(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==qn&&(Ms(qn),qn=null))),bi(e,t),Ii(t),null;case 5:mr(t),n=dr(ur.current);var i=t.type;if(null!==e&&null!=t.stateNode)wi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ii(t),null}if(e=dr(lr.current),Qn(t)){if(!K)throw Error(s(175));e=Ge(t.stateNode,t.type,t.memoizedProps,n,e,t,!Wn),t.updateQueue=e,null!==e&&ki(t)}else{var a=O(i,r,n,e,t);xi(a,t,!1,!1),t.stateNode=a,z(a,i,r,n,e)&&ki(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ii(t),null;case 6:if(e&&null!=t.stateNode)Si(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=dr(ur.current),n=dr(lr.current),Qn(t)){if(!K)throw Error(s(176));if(e=t.stateNode,r=t.memoizedProps,(n=Ve(e,r,t,!Wn))&&null!==(i=Hn))switch(a=0!==(1&i.mode),i.tag){case 3:Qe(i.stateNode.containerInfo,e,r,a);break;case 5:$e(i.type,i.memoizedProps,i.stateNode,e,r,a)}n&&ki(t)}else t.stateNode=G(r,e,n,t)}return Ii(t),null;case 13:if(ot(gr),r=t.memoizedState,Vn&&null!==Gn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Gn;e;)e=Ne(e);return $n(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Qn(t),null===e){if(!r)throw Error(s(318));if(!K)throw Error(s(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(317));We(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ii(t),null}return null!==qn&&(Ms(qn),qn=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Qn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gr.current)?0===$a&&($a=3):js())),null!==t.updateQueue&&(t.flags|=4),Ii(t),null);case 4:return pr(),bi(e,t),null===e&&Q(t.stateNode.containerInfo),Ii(t),null;case 10:return ln(t.type._context),Ii(t),null;case 19:if(ot(gr),null===(i=t.memoizedState))return Ii(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)Di(i,!1);else{if(0!==$a||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=vr(e))){for(t.flags|=128,Di(i,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(gr,1&gr.current|2),t.child}e=e.sibling}null!==i.tail&&Ot()>os&&(t.flags|=128,r=!0,Di(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=vr(a))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Di(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Vn)return Ii(t),null}else 2*Ot()-i.renderingStartTime>os&&1073741824!==n&&(t.flags|=128,r=!0,Di(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ot(),t.sibling=null,e=gr.current,lt(gr,r?1&e|2:1&e),t):(Ii(t),null);case 22:case 23:return Rs(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Za)&&(Ii(t),J&&6&t.subtreeFlags&&(t.flags|=8192)):Ii(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}var ji=o.ReactCurrentOwner,Fi=!1;function Li(e,t,n,r){t.child=null===e?sr(t,null,n,r):ar(t,e.child,n,r)}function Oi(e,t,n,r,i){n=n.render;var a=t.ref;return un(t,i),r=Dr(e,t,n,r,a,i),n=Ir(),null===e||Fi?(Vn&&n&&zn(t),t.flags|=1,Li(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Ni(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Qs(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=eo(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,zi(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Qt)(s,r)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,(e=$s(a,r)).ref=t.ref,e.return=t,t.child=e}function zi(e,t,n,r,i){if(null!==e&&Qt(e.memoizedProps,r)&&e.ref===t.ref){if(Fi=!1,0===(e.lanes&i))return t.lanes=e.lanes,ia(e,t,i);0!==(131072&e.flags)&&(Fi=!0)}return Gi(e,t,n,r,i)}function Ui(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Qa,Za),Za|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Qa,Za),Za|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,lt(Qa,Za),Za|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,lt(Qa,Za),Za|=r;return Li(e,t,i,n),t.child}function Hi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gi(e,t,n,r,i){var a=ft(n)?ht:ut.current;return a=pt(t,a),un(t,i),n=Dr(e,t,n,r,a,i),r=Ir(),null===e||Fi?(Vn&&r&&zn(t),t.flags|=1,Li(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Vi(e,t,n,r,i){if(ft(n)){var a=!0;yt(t)}else a=!1;if(un(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Cn(t,n,r),Tn(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=dn(c):c=pt(t,c=ft(n)?ht:ut.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&Mn(t,s,r,c),pn=!1;var h=t.memoizedState;s.state=h,bn(t,r,s,i),l=t.memoizedState,o!==r||h!==l||dt.current||pn?("function"===typeof u&&(_n(t,n,u,r),l=t.memoizedState),(o=pn||En(t,n,o,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,mn(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:en(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=dn(l):l=pt(t,l=ft(n)?ht:ut.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&Mn(t,s,r,l),pn=!1,h=t.memoizedState,s.state=h,bn(t,r,s,i);var f=t.memoizedState;o!==d||h!==f||dt.current||pn?("function"===typeof p&&(_n(t,n,p,r),f=t.memoizedState),(c=pn||En(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Wi(e,t,n,r,a,i)}function Wi(e,t,n,r,i,a){Hi(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&xt(t,n,!1),ia(e,t,a);r=t.stateNode,ji.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=ar(t,e.child,null,a),t.child=ar(t,null,o,a)):Li(e,t,o,a),t.memoizedState=r.state,i&&xt(t,n,!0),t.child}function qi(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),hr(e,t.containerInfo)}function Xi(e,t,n,r,i){return $n(),er(i),t.flags|=256,Li(e,t,n,r),t.child}var Ji={dehydrated:null,treeContext:null,retryLane:0};function Yi(e){return{baseLanes:e,cachePool:null}}function Ki(e,t,n){var r,i=t.pendingProps,a=gr.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),lt(gr,1&a),null===e)return Kn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Le(e)?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=a):o=no(a,i,0,null),e=to(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Yi(n),t.memoizedState=Ji,e):Zi(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(s(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,a=t.mode,i=no({mode:"visible",children:i.children},a,0,null),(o=to(o,a,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=Yi(n),t.memoizedState=Ji,o);if(0===(1&t.mode))t=ea(e,t,n,null);else if(Le(r))t=ea(e,t,n,Error(s(419)));else if(i=0!==(n&e.childLanes),Fi||i){if(null!==(i=Ja)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(i=0!==(o&(i.suspendedLanes|n))?0:o)&&i!==a.retryLane&&(a.retryLane=i,Ss(e,i,-1))}js(),t=ea(e,t,n,Error(s(421)))}else Fe(r)?(t.flags|=128,t.child=e.child,t=Xs.bind(null,e),Oe(r,t),t=null):(n=a.treeContext,K&&(Gn=He(r),Hn=t,Vn=!0,qn=null,Wn=!1,null!==n&&(In[Bn++]=Fn,In[Bn++]=Ln,In[Bn++]=jn,Fn=n.id,Ln=n.overflow,jn=t)),(t=Zi(t,t.pendingProps.children)).flags|=4096);return t}return o?(i=$i(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?Yi(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Ji,i):(n=Qi(e,t,i.children,n),t.memoizedState=null,n)}return o?(i=$i(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?Yi(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Ji,i):(n=Qi(e,t,i.children,n),t.memoizedState=null,n)}function Zi(e,t){return(t=no({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qi(e,t,n,r){var i=e.child;return e=i.sibling,n=$s(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function $i(e,t,n,r,i){var a=t.mode,s=(e=e.child).sibling,o={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null):(n=$s(e,o)).subtreeFlags=14680064&e.subtreeFlags,null!==s?r=$s(s,r):(r=to(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ea(e,t,n,r){return null!==r&&er(r),ar(t,e.child,null,n),(e=Zi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),cn(e.return,t,n)}function na(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ra(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Li(e,t,r.children,n),0!==(2&(r=gr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(gr,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===vr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),na(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===vr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ts|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=$s(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$s(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Un(t),t.tag){case 1:return ft(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pr(),ot(dt),ot(ut),xr(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mr(t),null;case 13:if(ot(gr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ot(gr),null;case 4:return pr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Rs(),null;default:return null}}var sa=!1,oa=!1,la="function"===typeof WeakSet?WeakSet:Set,ca=null;function ua(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Vs(e,t,r)}else n.current=null}function da(e,t,n){try{n()}catch(r){Vs(e,t,r)}}var ha=!1;function pa(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&da(t,n,a)}i=i.next}while(i!==r)}}function fa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ma(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=I(n);else e=n;"function"===typeof t?t(e):t.current=e}}function ga(e,t,n){if(Vt&&"function"===typeof Vt.onCommitFiberUnmount)try{Vt.onCommitFiberUnmount(Gt,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&da(t,n,a),r=r.next}while(r!==e)}break;case 1:if(ua(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Vs(t,n,s)}break;case 5:ua(t,n);break;case 4:J?Aa(e,t,n):Y&&Y&&(t=t.stateNode.containerInfo,n=Me(t),Pe(t,n))}}function va(e,t,n){for(var r=t;;)if(ga(e,r,n),null===r.child||J&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function ya(e){var t=e.alternate;null!==t&&(e.alternate=null,ya(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xa(e){return 5===e.tag||3===e.tag||4===e.tag}function ba(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function wa(e){if(J){e:{for(var t=e.return;null!==t;){if(xa(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),_a(e,n=ba(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,Sa(e,n=ba(e),t);break;default:throw Error(s(161))}}}function Sa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function _a(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(_a(e,t,n),e=e.sibling;null!==e;)_a(e,t,n),e=e.sibling}function Aa(e,t,n){for(var r,i,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(s(160));switch(r=o.stateNode,o.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag)va(e,a,n),i?xe(r,a.stateNode):ye(r,a.stateNode);else if(18===a.tag)i?Ke(r,a.stateNode):Ye(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ga(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function Ea(e,t){if(J){switch(t.tag){case 0:case 11:case 14:case 15:return pa(3,t,t.return),fa(3,t),void pa(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&me(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(s(162));return n=t.memoizedProps,void pe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(K&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo));case 13:case 19:return void Ca(t)}throw Error(s(163))}switch(t.tag){case 0:case 11:case 14:case 15:return pa(3,t,t.return),fa(3,t),void pa(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Ca(t);case 3:K&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo)}e:if(Y){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Pe(t.containerInfo,t.pendingChildren);break e}throw Error(s(163))}}function Ca(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new la),t.forEach((function(t){var r=Js.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ma(e,t,n){ca=e,Ta(e,t,n)}function Ta(e,t,n){for(var r=0!==(1&e.mode);null!==ca;){var i=ca,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||sa;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||oa;o=sa;var c=oa;if(sa=s,(oa=l)&&!c)for(ca=i;null!==ca;)l=(s=ca).child,22===s.tag&&null!==s.memoizedState?Ra(i):null!==l?(l.return=s,ca=l):Ra(i);for(;null!==a;)ca=a,Ta(a,t,n),a=a.sibling;ca=i,sa=o,oa=c}ka(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,ca=a):ka(e)}}function ka(e){for(;null!==ca;){var t=ca;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:oa||fa(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!oa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&wn(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=I(t.child.stateNode);break;case 1:n=t.child.stateNode}wn(t,o,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&fe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(K&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Je(d)}}}break;default:throw Error(s(163))}oa||512&t.flags&&ma(t)}catch(h){Vs(t,t.return,h)}}if(t===e){ca=null;break}if(null!==(n=t.sibling)){n.return=t.return,ca=n;break}ca=t.return}}function Pa(e){for(;null!==ca;){var t=ca;if(t===e){ca=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ca=n;break}ca=t.return}}function Ra(e){for(;null!==ca;){var t=ca;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fa(4,t)}catch(l){Vs(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Vs(t,i,l)}}var a=t.return;try{ma(t)}catch(l){Vs(t,a,l)}break;case 5:var s=t.return;try{ma(t)}catch(l){Vs(t,s,l)}}}catch(l){Vs(t,t.return,l)}if(t===e){ca=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ca=o;break}ca=t.return}}var Da=0,Ia=1,Ba=2,ja=3,Fa=4;if("function"===typeof Symbol&&Symbol.for){var La=Symbol.for;Da=La("selector.component"),Ia=La("selector.has_pseudo_class"),Ba=La("selector.role"),ja=La("selector.test_id"),Fa=La("selector.text")}function Oa(e){var t=Z(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=ie(e)))throw Error(s(362));return e.stateNode.current}function Na(e,t){switch(t.$$typeof){case Da:if(e.type===t.value)return!0;break;case Ia:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!oe(r)){for(;null!=a&&Na(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Ba:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Fa:if((5===e.tag||6===e.tag)&&(null!==(e=se(e))&&0<=e.indexOf(t.value)))return!0;break;case ja:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function za(e){switch(e.$$typeof){case Da:return"<"+(_(e.value)||"Unknown")+">";case Ia:return":has("+(za(e)||"")+")";case Ba:return'[role="'+e.value+'"]';case Fa:return'"'+e.value+'"';case ja:return'[data-testname="'+e.value+'"]';default:throw Error(s(365))}}function Ua(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],s=t[a];if(5!==i.tag||!oe(i)){for(;null!=s&&Na(i,s);)s=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function Ha(e,t){if(!re)throw Error(s(363));e=Ua(e=Oa(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)oe(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Ga=Math.ceil,Va=o.ReactCurrentDispatcher,Wa=o.ReactCurrentOwner,qa=o.ReactCurrentBatchConfig,Xa=0,Ja=null,Ya=null,Ka=0,Za=0,Qa=st(0),$a=0,es=null,ts=0,ns=0,rs=0,is=null,as=null,ss=0,os=1/0;function ls(){os=Ot()+500}var cs,us=!1,ds=null,hs=null,ps=!1,fs=null,ms=0,gs=0,vs=null,ys=-1,xs=0;function bs(){return 0!==(6&Xa)?Ot():-1!==ys?ys:ys=Ot()}function ws(e){return 0===(1&e.mode)?1:0!==(2&Xa)&&0!==Ka?Ka&-Ka:null!==Zt.transition?(0===xs&&(e=_t,0===(4194240&(_t<<=1))&&(_t=64),xs=e),xs):0!==(e=Dt)?e:$()}function Ss(e,t,n){if(50<gs)throw gs=0,vs=null,Error(s(185));var r=_s(e,t);return null===r?null:(Pt(r,t,n),0!==(2&Xa)&&r===Ja||(r===Ja&&(0===(2&Xa)&&(ns|=t),4===$a&&Ts(r,Ka)),As(r,n),1===t&&0===Xa&&0===(1&e.mode)&&(ls(),Xt&&Kt())),r)}function _s(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function As(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-bt(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=Mt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=Ct(e,e===Ja?Ka:0);if(0===r)null!==n&&jt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&jt(n),1===t)0===e.tag?function(e){Xt=!0,Yt(e)}(ks.bind(null,e)):Yt(ks.bind(null,e)),te?ne((function(){0===Xa&&Kt()})):Bt(Nt,Kt),n=null;else{switch(It(r)){case 1:n=Nt;break;case 4:n=zt;break;case 16:default:n=Ut;break;case 536870912:n=Ht}n=Ys(n,Es.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Es(e,t){if(ys=-1,xs=0,0!==(6&Xa))throw Error(s(327));var n=e.callbackNode;if(Hs()&&e.callbackNode!==n)return null;var r=Ct(e,e===Ja?Ka:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Fs(e,r);else{t=r;var i=Xa;Xa|=2;var a=Bs();for(Ja===e&&Ka===t||(ls(),Ds(e,t));;)try{Os();break}catch(l){Is(e,l)}sn(),Va.current=a,Xa=i,null!==Ya?t=0:(Ja=null,Ka=0,t=$a)}if(0!==t){if(2===t&&(0!==(i=Tt(e))&&(r=i,t=Cs(e,i))),1===t)throw n=es,Ds(e,0),Ts(e,r),As(e,Ot()),n;if(6===t)Ts(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Wt(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Fs(e,r))&&(0!==(a=Tt(e))&&(r=a,t=Cs(e,a))),1===t))throw n=es,Ds(e,0),Ts(e,r),As(e,Ot()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Us(e,as);break;case 3:if(Ts(e,r),(130023424&r)===r&&10<(t=ss+500-Ot())){if(0!==Ct(e,0))break;if(((i=e.suspendedLanes)&r)!==r){bs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=V(Us.bind(null,e,as),t);break}Us(e,as);break;case 4:if(Ts(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-bt(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Ot()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ga(r/1960))-r)){e.timeoutHandle=V(Us.bind(null,e,as),r);break}Us(e,as);break;default:throw Error(s(329))}}}return As(e,Ot()),e.callbackNode===n?Es.bind(null,e):null}function Cs(e,t){var n=is;return e.current.memoizedState.isDehydrated&&(Ds(e,t).flags|=256),2!==(e=Fs(e,t))&&(t=as,as=n,null!==t&&Ms(t)),e}function Ms(e){null===as?as=e:as.push.apply(as,e)}function Ts(e,t){for(t&=~rs,t&=~ns,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(6&Xa))throw Error(s(327));Hs();var t=Ct(e,0);if(0===(1&t))return As(e,Ot()),null;var n=Fs(e,t);if(0!==e.tag&&2===n){var r=Tt(e);0!==r&&(t=r,n=Cs(e,r))}if(1===n)throw n=es,Ds(e,0),Ts(e,t),As(e,Ot()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Us(e,as),As(e,Ot()),null}function Ps(e){null!==fs&&0===fs.tag&&0===(6&Xa)&&Hs();var t=Xa;Xa|=1;var n=qa.transition,r=Dt;try{if(qa.transition=null,Dt=1,e)return e()}finally{Dt=r,qa.transition=n,0===(6&(Xa=t))&&Kt()}}function Rs(){Za=Qa.current,ot(Qa)}function Ds(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==q&&(e.timeoutHandle=q,W(n)),null!==Ya)for(n=Ya.return;null!==n;){var r=n;switch(Un(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mt();break;case 3:pr(),ot(dt),ot(ut),xr();break;case 5:mr(r);break;case 4:pr();break;case 13:case 19:ot(gr);break;case 10:ln(r.type._context);break;case 22:case 23:Rs()}n=n.return}if(Ja=e,Ya=e=$s(e.current,null),Ka=Za=t,$a=0,es=null,rs=ns=ts=0,as=is=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(r=(n=hn[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}hn=null}return e}function Is(e,t){for(;;){var n=Ya;try{if(sn(),br.current=pi,Cr){for(var r=_r.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Cr=!1}if(Sr=0,Er=Ar=_r=null,Mr=!1,Tr=0,Wa.current=null,null===n||null===n.return){$a=1,es=t,Ya=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ka,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Mi(o);if(null!==f){f.flags&=-257,Ti(f,o,l,0,t),1&f.mode&&Ci(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){Ci(a,u,t),js();break e}c=Error(s(426))}else if(Vn&&1&l.mode){var v=Mi(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ti(v,o,l,0,t),er(c);break e}}a=c,4!==$a&&($a=2),null===is?is=[a]:is.push(a),c=vi(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,xn(l,Ai(0,c,t));break e;case 1:a=c;var y=l.type,x=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===hs||!hs.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t,xn(l,Ei(l,a,t));break e}}l=l.return}while(null!==l)}zs(n)}catch(b){t=b,Ya===n&&null!==n&&(Ya=n=n.return);continue}break}}function Bs(){var e=Va.current;return Va.current=pi,null===e?pi:e}function js(){0!==$a&&3!==$a&&2!==$a||($a=4),null===Ja||0===(268435455&ts)&&0===(268435455&ns)||Ts(Ja,Ka)}function Fs(e,t){var n=Xa;Xa|=2;var r=Bs();for(Ja===e&&Ka===t||Ds(e,t);;)try{Ls();break}catch(i){Is(e,i)}if(sn(),Xa=n,Va.current=r,null!==Ya)throw Error(s(261));return Ja=null,Ka=0,$a}function Ls(){for(;null!==Ya;)Ns(Ya)}function Os(){for(;null!==Ya&&!Ft();)Ns(Ya)}function Ns(e){var t=cs(e.alternate,e,Za);e.memoizedProps=e.pendingProps,null===t?zs(e):Ya=t,Wa.current=null}function zs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Bi(n,t,Za)))return void(Ya=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Ya=n);if(null===e)return $a=6,void(Ya=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ya=t);Ya=t=e}while(null!==t);0===$a&&($a=5)}function Us(e,t){var n=Dt,r=qa.transition;try{qa.transition=null,Dt=1,function(e,t,n){do{Hs()}while(null!==fs);if(0!==(6&Xa))throw Error(s(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-bt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===Ja&&(Ya=Ja=null,Ka=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||ps||(ps=!0,Ys(Ut,(function(){return Hs(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=qa.transition,qa.transition=null;var o=Dt;Dt=1;var l=Xa;Xa|=4,Wa.current=null,function(e,t){for(F(e.containerInfo),ca=t;null!==ca;)if(t=(e=ca).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,ca=t;else for(;null!==ca;){e=ca;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,o=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=o}break;case 3:J&&Ee(e.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(l){Vs(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,ca=t;break}ca=e.return}n=ha,ha=!1}(e,r),function(e,t){for(ca=t;null!==ca;){var n=(t=ca).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;J?Aa(a,i,t):va(a,i,t);var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(w){Vs(i,t,w)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,ca=n;else for(;null!==ca;){t=ca;try{var o=t.flags;if(32&o&&J&&be(t.stateNode),512&o){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(ss=Ot())}break;case 22:var d=null!==t.memoizedState,h=t.alternate,p=null!==h&&null!==h.memoizedState;if(n=t,J)e:if(r=n,i=d,a=null,J)for(var f=r;;){if(5===f.tag){if(null===a){a=f;var m=f.stateNode;i?we(m):_e(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===a){var g=f.stateNode;i?Se(g):Ae(g,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===r)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===r)break;for(;null===f.sibling;){if(null===f.return||f.return===r)break e;a===f&&(a=null),f=f.return}a===f&&(a=null),f.sibling.return=f.return,f=f.sibling}if(d&&!p&&0!==(1&n.mode)){ca=n;for(var v=n.child;null!==v;){for(n=ca=v;null!==ca;){var y=(r=ca).child;switch(r.tag){case 0:case 11:case 14:case 15:pa(4,r,r.return);break;case 1:ua(r,r.return);var x=r.stateNode;if("function"===typeof x.componentWillUnmount){var b=r.return;try{x.props=r.memoizedProps,x.state=r.memoizedState,x.componentWillUnmount()}catch(w){Vs(r,b,w)}}break;case 5:ua(r,r.return);break;case 22:if(null!==r.memoizedState){Pa(n);continue}}null!==y?(y.return=r,ca=y):Pa(n)}v=v.sibling}}}switch(4102&o){case 2:wa(t),t.flags&=-3;break;case 6:wa(t),t.flags&=-3,Ea(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ea(t.alternate,t);break;case 4:Ea(t.alternate,t)}}catch(w){Vs(t,t.return,w)}if(null!==(n=t.sibling)){n.return=t.return,ca=n;break}ca=t.return}}}(e,r),L(e.containerInfo),e.current=r,Ma(r,e,i),Lt(),Xa=l,Dt=o,qa.transition=a}else e.current=r;if(ps&&(ps=!1,fs=e,ms=i),a=e.pendingLanes,0===a&&(hs=null),function(e){if(Vt&&"function"===typeof Vt.onCommitFiberRoot)try{Vt.onCommitFiberRoot(Gt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),As(e,Ot()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(us)throw us=!1,e=ds,ds=null,e;0!==(1&ms)&&0!==e.tag&&Hs(),a=e.pendingLanes,0!==(1&a)?e===vs?gs++:(gs=0,vs=e):gs=0,Kt()}(e,t,n)}finally{qa.transition=r,Dt=n}return null}function Hs(){if(null!==fs){var e=It(ms),t=qa.transition,n=Dt;try{if(qa.transition=null,Dt=16>e?16:e,null===fs)var r=!1;else{if(e=fs,fs=null,ms=0,0!==(6&Xa))throw Error(s(331));var i=Xa;for(Xa|=4,ca=e.current;null!==ca;){var a=ca,o=a.child;if(0!==(16&ca.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ca=u;null!==ca;){var d=ca;switch(d.tag){case 0:case 11:case 15:pa(8,d,a)}var h=d.child;if(null!==h)h.return=d,ca=h;else for(;null!==ca;){var p=(d=ca).sibling,f=d.return;if(ya(d),d===u){ca=null;break}if(null!==p){p.return=f,ca=p;break}ca=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}ca=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,ca=o;else e:for(;null!==ca;){if(0!==(2048&(a=ca).flags))switch(a.tag){case 0:case 11:case 15:pa(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,ca=y;break e}ca=a.return}}var x=e.current;for(ca=x;null!==ca;){var b=(o=ca).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,ca=b;else e:for(o=x;null!==ca;){if(0!==(2048&(l=ca).flags))try{switch(l.tag){case 0:case 11:case 15:fa(9,l)}}catch(S){Vs(l,l.return,S)}if(l===o){ca=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,ca=w;break e}ca=l.return}}if(Xa=i,Kt(),Vt&&"function"===typeof Vt.onPostCommitFiberRoot)try{Vt.onPostCommitFiberRoot(Gt,e)}catch(S){}r=!0}return r}finally{Dt=n,qa.transition=t}}return!1}function Gs(e,t,n){vn(e,t=Ai(0,t=vi(n,t),1)),t=bs(),null!==(e=_s(e,1))&&(Pt(e,1,t),As(e,t))}function Vs(e,t,n){if(3===e.tag)Gs(e,e,n);else for(;null!==t;){if(3===t.tag){Gs(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===hs||!hs.has(r))){vn(t,e=Ei(t,e=vi(n,e),1)),e=bs(),null!==(t=_s(t,1))&&(Pt(t,1,e),As(t,e));break}}t=t.return}}function Ws(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=bs(),e.pingedLanes|=e.suspendedLanes&n,Ja===e&&(Ka&n)===n&&(4===$a||3===$a&&(130023424&Ka)===Ka&&500>Ot()-ss?Ds(e,0):rs|=n),As(e,t)}function qs(e,t){0===t&&(0===(1&e.mode)?t=1:(t=At,0===(130023424&(At<<=1))&&(At=4194304)));var n=bs();null!==(e=_s(e,t))&&(Pt(e,t,n),As(e,n))}function Xs(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),qs(e,n)}function Js(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),qs(e,n)}function Ys(e,t){return Bt(e,t)}function Ks(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(e,t,n,r){return new Ks(e,t,n,r)}function Qs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $s(e,t){var n=e.alternate;return null===n?((n=Zs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Qs(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case u:return to(n.children,i,a,t);case d:o=8,i|=8;break;case h:return(e=Zs(12,n,t,2|i)).elementType=h,e.lanes=a,e;case g:return(e=Zs(13,n,t,i)).elementType=g,e.lanes=a,e;case v:return(e=Zs(19,n,t,i)).elementType=v,e.lanes=a,e;case b:return no(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:o=10;break e;case f:o=9;break e;case m:o=11;break e;case y:o=14;break e;case x:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Zs(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function to(e,t,n,r){return(e=Zs(7,e,r,t)).lanes=n,e}function no(e,t,n,r){return(e=Zs(22,e,r,t)).elementType=b,e.lanes=n,e.stateNode={},e}function ro(e,t,n){return(e=Zs(6,e,null,t)).lanes=n,e}function io(e,t,n){return(t=Zs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ao(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kt(0),this.expirationTimes=kt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.identifierPrefix=r,this.onRecoverableError=i,K&&(this.mutableSourceEagerHydrationData=null)}function so(e,t,n,r,i,a,s,o,l){return e=new ao(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Zs(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},fn(a),e}function oo(e){if(!e)return ct;e:{if(E(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ft(n))return vt(e,n,t)}return t}function lo(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=T(t))?null:e.stateNode}function co(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function uo(e,t){co(e,t),(e=e.alternate)&&co(e,t)}function ho(e){return null===(e=T(e))?null:e.stateNode}function po(){return null}return cs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||dt.current)Fi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Fi=!1,function(e,t,n){switch(t.tag){case 3:qi(t),$n();break;case 5:fr(t);break;case 1:ft(t.type)&&yt(t);break;case 4:hr(t,t.stateNode.containerInfo);break;case 10:on(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(gr,1&gr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ki(e,t,n):(lt(gr,1&gr.current),null!==(e=ia(e,t,n))?e.sibling:null);lt(gr,1&gr.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ra(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,Ui(e,t,n)}return ia(e,t,n)}(e,t,n);Fi=0!==(131072&e.flags)}else Fi=!1,Vn&&0!==(1048576&t.flags)&&Nn(t,Dn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=pt(t,ut.current);un(t,n),i=Dr(null,t,r,e,i,n);var a=Ir();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(r)?(a=!0,yt(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,fn(t),i.updater=An,t.stateNode=i,i._reactInternals=t,Tn(t,r,e,n),t=Wi(null,t,r,!0,a,n)):(t.tag=0,Vn&&a&&zn(t),Li(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Qs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Gi(null,t,r,e,n);break e;case 1:t=Vi(null,t,r,e,n);break e;case 11:t=Oi(null,t,r,e,n);break e;case 14:t=Ni(null,t,r,en(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Gi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Vi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(qi(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,mn(e,t),bn(t,r,null,n);var o=t.memoizedState;if(r=o.element,K&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Xi(e,t,r,n,i=Error(s(423)));break e}if(r!==i){t=Xi(e,t,r,n,i=Error(s(424)));break e}for(K&&(Gn=Ue(t.stateNode.containerInfo),Hn=t,Vn=!0,qn=null,Wn=!1),n=sr(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),r===i){t=ia(e,t,n);break e}Li(e,t,r,n)}t=t.child}return t;case 5:return fr(t),null===e&&Kn(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,H(r,i)?o=null:null!==a&&H(r,a)&&(t.flags|=32),Hi(e,t),Li(e,t,o,n),t.child;case 6:return null===e&&Kn(t),null;case 13:return Ki(e,t,n);case 4:return hr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):Li(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Oi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Li(e,t,t.pendingProps,n),t.child;case 8:case 12:return Li(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,on(0,r,o=i.value),null!==a)if(Wt(a.value,o)){if(a.children===i.children&&!dt.current){t=ia(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=gn(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),cn(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),cn(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Li(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,un(t,n),r=r(i=dn(i)),t.flags|=1,Li(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),Ni(e,t,r,i=en(r.type,i),n);case 15:return zi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(r)?(e=!0,yt(t)):e=!1,un(t,n),Cn(t,r,i),Tn(t,r,i,n),Wi(null,t,r,!0,e,n);case 19:return ra(e,t,n);case 22:return Ui(e,t,n)}throw Error(s(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(Ss(e,134217728,bs()),uo(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=bs(),n=ws(e);Ss(e,n,t),uo(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Et(t.pendingLanes);0!==n&&(Rt(t,1|n),As(t,Ot()),0===(6&Xa)&&(ls(),Kt()))}break;case 13:var r=bs();Ps((function(){return Ss(e,1,r)})),uo(e,1)}},t.batchedUpdates=function(e,t){var n=Xa;Xa|=1;try{return e(t)}finally{0===(Xa=n)&&(ls(),Xt&&Kt())}},t.createComponentSelector=function(e){return{$$typeof:Da,value:e}},t.createContainer=function(e,t,n,r,i,a,s){return so(e,t,!1,null,0,r,0,a,s)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Ia,value:e}},t.createHydrationContainer=function(e,t,n,r,i,a,s,o,l){return(e=so(n,r,!0,e,0,a,0,o,l)).context=oo(null),n=e.current,(a=gn(r=bs(),i=ws(n))).callback=void 0!==t&&null!==t?t:null,vn(n,a),e.current.lanes=i,Pt(e,i,r),As(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Ba,value:e}},t.createTestNameSelector=function(e){return{$$typeof:ja,value:e}},t.createTextSelector=function(e){return{$$typeof:Fa,value:e}},t.deferredUpdates=function(e){var t=Dt,n=qa.transition;try{return qa.transition=null,Dt=16,e()}finally{Dt=t,qa.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var a=Dt,s=qa.transition;try{return qa.transition=null,Dt=1,e(t,n,r,i)}finally{Dt=a,qa.transition=s,0===Xa&&ls()}},t.findAllNodes=Ha,t.findBoundingRects=function(e,t){if(!re)throw Error(s(363));t=Ha(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,a=n.y,o=a+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,d=u+c.width,h=c.y,p=h+c.height;if(r>=u&&a>=h&&i<=d&&o<=p){e.splice(t,1);break}if(!(r!==u||n.width!==c.width||p<a||h>o)){h>a&&(c.height+=h-a,c.y=a),p<o&&(c.height=o-h),e.splice(t,1);break}if(!(a!==h||n.height!==c.height||d<r||u>i)){u>r&&(c.width+=u-r,c.x=r),d<i&&(c.width=i-u),e.splice(t,1);break}}return e},t.findHostInstance=lo,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=M(e))?P(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return lo(e)},t.flushControlled=function(e){var t=Xa;Xa|=1;var n=qa.transition,r=Dt;try{qa.transition=null,Dt=1,e()}finally{Dt=r,qa.transition=n,0===(Xa=t)&&(ls(),Kt())}},t.flushPassiveEffects=Hs,t.flushSync=Ps,t.focusWithin=function(e,t){if(!re)throw Error(s(363));for(t=Ua(e=Oa(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!oe(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Dt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(s(363));var n=0,r=[];e=[Oa(e),0];for(var i=0;i<e.length;){var a=e[i++],o=e[i++],l=t[o];if((5!==a.tag||!oe(a))&&(Na(a,l)&&(r.push(za(l)),++o>n&&(n=o)),o<t.length))for(a=a.child;null!==a;)e.push(a,o),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(za(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?I(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ho,findFiberByHostInstance:e.findFiberByHostInstance||po,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Gt=t.inject(e),Vt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(s(363));e=Ha(e,t);var i=ue(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,a=bs(),s=ws(i);return n=oo(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),null!==(e=Ss(i,s,a))&&yn(e,i,s),s},t}},7205:(e,t,n)=>{"use strict";e.exports=n(7302)},2016:(e,t,n)=>{"use strict";e.exports=n(6958)},2062:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,I(S);else{var t=r(u);null!==t&&B(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(C),C=-1),f=!0;var a=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!k());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&B(w,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,A=!1,E=null,C=-1,M=5,T=-1;function k(){return!(t.unstable_now()-T<M)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?_():(A=!1,E=null)}}else A=!1}if("function"===typeof x)_=function(){x(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=P,_=function(){D.postMessage(null)}}else _=function(){v(P,0)};function I(e){E=e,A||(A=!0,_())}function B(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,B(w,a-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,I(S))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8513:(e,t,n)=>{"use strict";e.exports=n(2062)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!A.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:_.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+T(l,0):a,w(s)?(i="",null!=e&&(i=e.replace(M,"$&/")+"/"),k(s,t,i,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(M,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var u=a+T(o=e[c],c);l+=k(o,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=k(o=o.value,t,i,u=a+T(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},I={transition:null},B={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:I,ReactCurrentOwner:_};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=x,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,I(S);else{var t=r(u);null!==t&&B(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(C),C=-1),f=!0;var a=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!k());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&B(w,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,A=!1,E=null,C=-1,M=5,T=-1;function k(){return!(t.unstable_now()-T<M)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?_():(A=!1,E=null)}}else A=!1}if("function"===typeof x)_=function(){x(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=P,_=function(){D.postMessage(null)}}else _=function(){v(P,0)};function I(e){E=e,A||(A=!0,_())}function B(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,B(w,a-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,I(S))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4705:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>a})},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(4705);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},7528:(e,t,n)=>{"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{A:()=>r})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,__webpack_require__.d(i,a),i}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>"static/js/"+e+"."+{212:"b7ee5290",277:"015a944e",453:"29469fb7",610:"d2cc4ea8"}[e]+".chunk.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="conversa-frontend:";__webpack_require__.l=(n,r,i,a)=>{if(e[n])e[n].push(r);else{var s,o;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+i){s=u;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[r];var d=(t,r)=>{s.onerror=s.onload=null,clearTimeout(h);var i=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(r))),t)return t(r)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),o&&document.head.appendChild(s)}}})(),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/",(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={792:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var a=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(a,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,a=n[0],s=n[1],o=n[2],l=0;if(a.some((t=>0!==e[t]))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);if(o)o(__webpack_require__)}for(t&&t(n);l<a.length;l++)i=a[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkconversa_frontend=self.webpackChunkconversa_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{hasBrowserEnv:()=>Gj,hasStandardBrowserEnv:()=>Wj,hasStandardBrowserWebWorkerEnv:()=>qj,navigator:()=>Vj,origin:()=>Xj});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{Decoder:()=>TG,Encoder:()=>CG,PacketType:()=>EG,protocol:()=>AG});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{ACESFilmicToneMapping:()=>Bq,AddEquation:()=>$W,AddOperation:()=>kq,AdditiveAnimationBlendMode:()=>fJ,AdditiveBlending:()=>YW,AgXToneMapping:()=>Fq,AlphaFormat:()=>mX,AlwaysCompare:()=>nY,AlwaysDepth:()=>bq,AlwaysStencilFunc:()=>JJ,AmbientLight:()=>F4,AnimationAction:()=>E6,AnimationClip:()=>s4,AnimationLoader:()=>m4,AnimationMixer:()=>M6,AnimationObjectGroup:()=>A6,AnimationUtils:()=>X5,ArcCurve:()=>d3,ArrayCamera:()=>y1,ArrowHelper:()=>y8,AttachedBindMode:()=>Lq,Audio:()=>c6,AudioAnalyser:()=>m6,AudioContext:()=>K4,AudioListener:()=>l6,AudioLoader:()=>Z4,AxesHelper:()=>x8,BackSide:()=>VW,BasicDepthPacking:()=>bJ,BasicShadowMap:()=>NW,BatchedMesh:()=>O2,Bone:()=>l2,BooleanKeyframeTrack:()=>$5,Box2:()=>N6,Box3:()=>pK,Box3Helper:()=>p8,BoxGeometry:()=>AQ,BoxHelper:()=>h8,BufferAttribute:()=>zZ,BufferGeometry:()=>iQ,BufferGeometryLoader:()=>G4,ByteType:()=>aX,Cache:()=>l4,Camera:()=>PQ,CameraHelper:()=>c8,CanvasTexture:()=>l3,CapsuleGeometry:()=>D3,CatmullRomCurve3:()=>v3,CineonToneMapping:()=>Iq,CircleGeometry:()=>I3,ClampToEdgeWrapping:()=>qq,Clock:()=>n6,Color:()=>TZ,ColorKeyframeTrack:()=>e4,ColorManagement:()=>WY,CompressedArrayTexture:()=>s3,CompressedCubeTexture:()=>o3,CompressedTexture:()=>a3,CompressedTextureLoader:()=>g4,ConeGeometry:()=>j3,ConstantAlphaFactor:()=>vq,ConstantColorFactor:()=>mq,CubeCamera:()=>IQ,CubeReflectionMapping:()=>zq,CubeRefractionMapping:()=>Uq,CubeTexture:()=>BQ,CubeTextureLoader:()=>y4,CubeUVReflectionMapping:()=>Vq,CubicBezierCurve:()=>w3,CubicBezierCurve3:()=>S3,CubicInterpolant:()=>Y5,CullFaceBack:()=>FW,CullFaceFront:()=>LW,CullFaceFrontBack:()=>OW,CullFaceNone:()=>jW,Curve:()=>c3,CurvePath:()=>k3,CustomBlending:()=>QW,CustomToneMapping:()=>jq,CylinderGeometry:()=>B3,Cylindrical:()=>L6,Data3DTexture:()=>sK,DataArrayTexture:()=>iK,DataTexture:()=>c2,DataTextureLoader:()=>x4,DataUtils:()=>LZ,DecrementStencilOp:()=>LJ,DecrementWrapStencilOp:()=>NJ,DefaultLoadingManager:()=>u4,DepthFormat:()=>xX,DepthStencilFormat:()=>bX,DepthTexture:()=>M$,DetachedBindMode:()=>Oq,DirectionalLight:()=>j4,DirectionalLightHelper:()=>s8,DiscreteInterpolant:()=>Z5,DisplayP3ColorSpace:()=>MJ,DodecahedronGeometry:()=>L3,DoubleSide:()=>WW,DstAlphaFactor:()=>uq,DstColorFactor:()=>hq,DynamicCopyUsage:()=>uY,DynamicDrawUsage:()=>iY,DynamicReadUsage:()=>oY,EdgesGeometry:()=>H3,EllipseCurve:()=>u3,EqualCompare:()=>ZJ,EqualDepth:()=>_q,EqualStencilFunc:()=>GJ,EquirectangularReflectionMapping:()=>Hq,EquirectangularRefractionMapping:()=>Gq,Euler:()=>KK,EventDispatcher:()=>vY,ExtrudeGeometry:()=>y5,FileLoader:()=>f4,Float16BufferAttribute:()=>JZ,Float32BufferAttribute:()=>YZ,Float64BufferAttribute:()=>KZ,FloatType:()=>uX,Fog:()=>T1,FogExp2:()=>M1,FramebufferTexture:()=>i3,FrontSide:()=>GW,Frustum:()=>HQ,GLBufferAttribute:()=>D6,GLSL1:()=>hY,GLSL3:()=>pY,GreaterCompare:()=>$J,GreaterDepth:()=>Eq,GreaterEqualCompare:()=>tY,GreaterEqualDepth:()=>Aq,GreaterEqualStencilFunc:()=>XJ,GreaterStencilFunc:()=>WJ,GridHelper:()=>t8,Group:()=>x1,HalfFloatType:()=>dX,HemisphereLight:()=>S4,HemisphereLightHelper:()=>e8,IcosahedronGeometry:()=>b5,ImageBitmapLoader:()=>J4,ImageLoader:()=>v4,ImageUtils:()=>YY,IncrementStencilOp:()=>FJ,IncrementWrapStencilOp:()=>OJ,InstancedBufferAttribute:()=>p2,InstancedBufferGeometry:()=>H4,InstancedInterleavedBuffer:()=>R6,InstancedMesh:()=>w2,Int16BufferAttribute:()=>VZ,Int32BufferAttribute:()=>qZ,Int8BufferAttribute:()=>UZ,IntType:()=>lX,InterleavedBuffer:()=>P1,InterleavedBufferAttribute:()=>D1,Interpolant:()=>J5,InterpolateDiscrete:()=>oJ,InterpolateLinear:()=>lJ,InterpolateSmooth:()=>cJ,InvertStencilOp:()=>zJ,KeepStencilOp:()=>BJ,KeyframeTrack:()=>Q5,LOD:()=>Z1,LatheGeometry:()=>R3,Layers:()=>ZK,LessCompare:()=>KJ,LessDepth:()=>wq,LessEqualCompare:()=>QJ,LessEqualDepth:()=>Sq,LessEqualStencilFunc:()=>VJ,LessStencilFunc:()=>HJ,Light:()=>w4,LightProbe:()=>N4,Line:()=>W2,Line3:()=>H6,LineBasicMaterial:()=>N2,LineCurve:()=>_3,LineCurve3:()=>A3,LineDashedMaterial:()=>U5,LineLoop:()=>Y2,LineSegments:()=>J2,LinearDisplayP3ColorSpace:()=>TJ,LinearEncoding:()=>yJ,LinearFilter:()=>$q,LinearInterpolant:()=>K5,LinearMipMapLinearFilter:()=>rX,LinearMipMapNearestFilter:()=>tX,LinearMipmapLinearFilter:()=>nX,LinearMipmapNearestFilter:()=>eX,LinearSRGBColorSpace:()=>CJ,LinearToneMapping:()=>Rq,LinearTransfer:()=>kJ,Loader:()=>d4,LoaderUtils:()=>U4,LoadingManager:()=>c4,LoopOnce:()=>iJ,LoopPingPong:()=>sJ,LoopRepeat:()=>aJ,LuminanceAlphaFormat:()=>yX,LuminanceFormat:()=>vX,MOUSE:()=>IW,Material:()=>RZ,MaterialLoader:()=>z4,MathUtils:()=>PY,Matrix3:()=>DY,Matrix4:()=>zK,MaxEquation:()=>rq,Mesh:()=>SQ,MeshBasicMaterial:()=>DZ,MeshDepthMaterial:()=>h1,MeshDistanceMaterial:()=>p1,MeshLambertMaterial:()=>N5,MeshMatcapMaterial:()=>z5,MeshNormalMaterial:()=>O5,MeshPhongMaterial:()=>F5,MeshPhysicalMaterial:()=>j5,MeshStandardMaterial:()=>B5,MeshToonMaterial:()=>L5,MinEquation:()=>nq,MirroredRepeatWrapping:()=>Xq,MixOperation:()=>Tq,MultiplyBlending:()=>ZW,MultiplyOperation:()=>Mq,NearestFilter:()=>Jq,NearestMipMapLinearFilter:()=>Qq,NearestMipMapNearestFilter:()=>Kq,NearestMipmapLinearFilter:()=>Zq,NearestMipmapNearestFilter:()=>Yq,NeverCompare:()=>YJ,NeverDepth:()=>xq,NeverStencilFunc:()=>UJ,NoBlending:()=>XW,NoColorSpace:()=>AJ,NoToneMapping:()=>Pq,NormalAnimationBlendMode:()=>pJ,NormalBlending:()=>JW,NotEqualCompare:()=>eY,NotEqualDepth:()=>Cq,NotEqualStencilFunc:()=>qJ,NumberKeyframeTrack:()=>t4,Object3D:()=>dZ,ObjectLoader:()=>V4,ObjectSpaceNormalMap:()=>_J,OctahedronGeometry:()=>w5,OneFactor:()=>aq,OneMinusConstantAlphaFactor:()=>yq,OneMinusConstantColorFactor:()=>gq,OneMinusDstAlphaFactor:()=>dq,OneMinusDstColorFactor:()=>pq,OneMinusSrcAlphaFactor:()=>cq,OneMinusSrcColorFactor:()=>oq,OrthographicCamera:()=>n$,P3Primaries:()=>DJ,PCFShadowMap:()=>zW,PCFSoftShadowMap:()=>UW,PMREMGenerator:()=>p$,Path:()=>P3,PerspectiveCamera:()=>RQ,Plane:()=>NQ,PlaneGeometry:()=>WQ,PlaneHelper:()=>f8,PointLight:()=>I4,PointLightHelper:()=>K6,Points:()=>t3,PointsMaterial:()=>K2,PolarGridHelper:()=>n8,PolyhedronGeometry:()=>F3,PositionalAudio:()=>f6,PropertyBinding:()=>_6,PropertyMixer:()=>g6,QuadraticBezierCurve:()=>E3,QuadraticBezierCurve3:()=>C3,Quaternion:()=>cK,QuaternionKeyframeTrack:()=>r4,QuaternionLinearInterpolant:()=>n4,RED_GREEN_RGTC2_Format:()=>nJ,RED_RGTC1_Format:()=>eJ,REVISION:()=>DW,RGBADepthPacking:()=>wJ,RGBAFormat:()=>gX,RGBAIntegerFormat:()=>EX,RGBA_ASTC_10x10_Format:()=>JX,RGBA_ASTC_10x5_Format:()=>WX,RGBA_ASTC_10x6_Format:()=>qX,RGBA_ASTC_10x8_Format:()=>XX,RGBA_ASTC_12x10_Format:()=>YX,RGBA_ASTC_12x12_Format:()=>KX,RGBA_ASTC_4x4_Format:()=>LX,RGBA_ASTC_5x4_Format:()=>OX,RGBA_ASTC_5x5_Format:()=>NX,RGBA_ASTC_6x5_Format:()=>zX,RGBA_ASTC_6x6_Format:()=>UX,RGBA_ASTC_8x5_Format:()=>HX,RGBA_ASTC_8x6_Format:()=>GX,RGBA_ASTC_8x8_Format:()=>VX,RGBA_BPTC_Format:()=>ZX,RGBA_ETC2_EAC_Format:()=>FX,RGBA_PVRTC_2BPPV1_Format:()=>IX,RGBA_PVRTC_4BPPV1_Format:()=>DX,RGBA_S3TC_DXT1_Format:()=>MX,RGBA_S3TC_DXT3_Format:()=>TX,RGBA_S3TC_DXT5_Format:()=>kX,RGB_BPTC_SIGNED_Format:()=>QX,RGB_BPTC_UNSIGNED_Format:()=>$X,RGB_ETC1_Format:()=>BX,RGB_ETC2_Format:()=>jX,RGB_PVRTC_2BPPV1_Format:()=>RX,RGB_PVRTC_4BPPV1_Format:()=>PX,RGB_S3TC_DXT1_Format:()=>CX,RGFormat:()=>_X,RGIntegerFormat:()=>AX,RawShaderMaterial:()=>I5,Ray:()=>NK,Raycaster:()=>I6,Rec709Primaries:()=>RJ,RectAreaLight:()=>L4,RedFormat:()=>wX,RedIntegerFormat:()=>SX,ReinhardToneMapping:()=>Dq,RenderTarget:()=>nK,RepeatWrapping:()=>Wq,ReplaceStencilOp:()=>jJ,ReverseSubtractEquation:()=>tq,RingGeometry:()=>S5,SIGNED_RED_GREEN_RGTC2_Format:()=>rJ,SIGNED_RED_RGTC1_Format:()=>tJ,SRGBColorSpace:()=>EJ,SRGBTransfer:()=>PJ,Scene:()=>k1,ShaderChunk:()=>qQ,ShaderLib:()=>JQ,ShaderMaterial:()=>kQ,ShadowMaterial:()=>D5,Shape:()=>G3,ShapeGeometry:()=>_5,ShapePath:()=>b8,ShapeUtils:()=>m5,ShortType:()=>sX,Skeleton:()=>h2,SkeletonHelper:()=>J6,SkinnedMesh:()=>o2,Source:()=>ZY,Sphere:()=>RK,SphereGeometry:()=>A5,Spherical:()=>F6,SphericalHarmonics3:()=>O4,SplineCurve:()=>M3,SpotLight:()=>T4,SpotLightHelper:()=>V6,Sprite:()=>X1,SpriteMaterial:()=>I1,SrcAlphaFactor:()=>lq,SrcAlphaSaturateFactor:()=>fq,SrcColorFactor:()=>sq,StaticCopyUsage:()=>cY,StaticDrawUsage:()=>rY,StaticReadUsage:()=>sY,StereoCamera:()=>t6,StreamCopyUsage:()=>dY,StreamDrawUsage:()=>aY,StreamReadUsage:()=>lY,StringKeyframeTrack:()=>i4,SubtractEquation:()=>eq,SubtractiveBlending:()=>KW,TOUCH:()=>BW,TangentSpaceNormalMap:()=>SJ,TetrahedronGeometry:()=>E5,Texture:()=>eK,TextureLoader:()=>b4,TorusGeometry:()=>C5,TorusKnotGeometry:()=>M5,Triangle:()=>_Z,TriangleFanDrawMode:()=>vJ,TriangleStripDrawMode:()=>gJ,TrianglesDrawMode:()=>mJ,TubeGeometry:()=>T5,TwoPassDoubleSide:()=>qW,UVMapping:()=>Nq,Uint16BufferAttribute:()=>WZ,Uint32BufferAttribute:()=>XZ,Uint8BufferAttribute:()=>HZ,Uint8ClampedBufferAttribute:()=>GZ,Uniform:()=>T6,UniformsGroup:()=>P6,UniformsLib:()=>XQ,UniformsUtils:()=>TQ,UnsignedByteType:()=>iX,UnsignedInt248Type:()=>fX,UnsignedIntType:()=>cX,UnsignedShort4444Type:()=>hX,UnsignedShort5551Type:()=>pX,UnsignedShortType:()=>oX,VSMShadowMap:()=>HW,Vector2:()=>RY,Vector3:()=>uK,Vector4:()=>tK,VectorKeyframeTrack:()=>a4,VideoTexture:()=>r3,WebGL1Renderer:()=>C1,WebGL3DRenderTarget:()=>oK,WebGLArrayRenderTarget:()=>aK,WebGLCoordinateSystem:()=>mY,WebGLCubeRenderTarget:()=>jQ,WebGLMultipleRenderTargets:()=>lK,WebGLRenderTarget:()=>rK,WebGLRenderer:()=>E1,WebGLUtils:()=>v1,WebGPUCoordinateSystem:()=>gY,WireframeGeometry:()=>k5,WrapAroundEnding:()=>hJ,ZeroCurvatureEnding:()=>uJ,ZeroFactor:()=>iq,ZeroSlopeEnding:()=>dJ,ZeroStencilOp:()=>IJ,_SRGBAFormat:()=>fY,createCanvasElement:()=>OY,sRGBEncoding:()=>xJ});var r=__webpack_require__(5043),i=__webpack_require__.t(r,2),a=__webpack_require__(4391),s=(0,r.createContext)({});function o(){const e=(0,r.useContext)(s);if(void 0===e)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function l(e,t){const{colorMode:n}=o();return"dark"===n?t:e}s.displayName="ColorModeContext";var c=__webpack_require__(9379);function u(e,t){const n=(0,r.useId)();return(0,r.useMemo)((()=>e||[t,n].filter(Boolean).join("-")),[e,t,n])}function d(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}var h=d()?r.useLayoutEffect:r.useEffect;function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,r.useRef)(e);return h((()=>{n.current=e})),(0,r.useCallback)((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null==(e=n.current)?void 0:e.call(n,...r)}),t)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(e){return"function"===typeof e}(e)?e(...n):e}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.some((t=>(null==t||t(e),null==e?void 0:e.defaultPrevented)))}}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClose:t,onOpen:n,isOpen:i,id:a}=e,s=p(n),o=p(t),[l,d]=(0,r.useState)(e.defaultIsOpen||!1),[h,f]=function(e,t){const n=void 0!==e;return[n,n&&"undefined"!==typeof e?e:t]}(i,l),g=u(a,"disclosure"),v=(0,r.useCallback)((()=>{h||d(!1),null==o||o()}),[h,o]),y=(0,r.useCallback)((()=>{h||d(!0),null==s||s()}),[h,s]),x=(0,r.useCallback)((()=>{(f?v:y)()}),[f,y,v]);return{isOpen:!!f,onOpen:y,onClose:v,onToggle:x,isControlled:h,getButtonProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.A)((0,c.A)({},e),{},{"aria-expanded":f,"aria-controls":g,onClick:m(e.onClick,x)})},getDisclosureProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.A)((0,c.A)({},e),{},{hidden:!f,id:g})}}}function v(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function y(e,t){if(null==e)return{};var n,r,i=v(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")};function b(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)&&!Array.isArray(e)}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return S(e)?e(...n):e}var S=e=>"function"===typeof e,_=e=>e?"":void 0,A=e=>!!e||void 0;function E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.some((t=>(null==t||t(e),null==e?void 0:e.defaultPrevented)))}}function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((t=>{null==t||t(e)}))}}var M=__webpack_require__(9611);const T=["__cssMap","__cssVars","__breakpoints"];var k=e=>"string"===typeof e?e.replace(/!(important)?$/,"").trim():e,P=(e,t)=>n=>{const r=String(t),i=(e=>/!(important)?$/.test(e))(r),a=k(r),s=e?"".concat(e,".").concat(a):a;let o=b(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:t;return o=k(o),i?"".concat(o," !important"):o};function R(e){const{scale:t,transform:n,compose:r}=e;return(e,i)=>{var a;const s=P(t,e)(i);let o=null!=(a=null==n?void 0:n(s,i))?a:s;return r&&(o=r(o,i)),o}}var D=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)};function I(e,t){return n=>{const r={property:n,scale:e};return r.transform=R({scale:e,transform:t}),r}}var B=e=>{let{rtl:t,ltr:n}=e;return e=>"rtl"===e.direction?t:n};var j=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];var F={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},L={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};var O={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},N={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},z=new Set(Object.values(N)),U=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),H=e=>e.trim();var G=e=>"string"===typeof e&&e.includes("(")&&e.includes(")");var V=e=>t=>"".concat(e,"(").concat(t,")"),W={filter:e=>"auto"!==e?e:F,backdropFilter:e=>"auto"!==e?e:L,ring:e=>function(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(W.px(e)),bgClip:e=>"text"===e?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e},transform:e=>"auto"===e?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...j].join(" "):"auto-gpu"===e?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...j].join(" "):e,vh:e=>"$100vh"===e?"var(--chakra-vh)":e,px(e){if(null==e)return e;const{unitless:t}=(e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}})(e);return t||"number"===typeof e?"".concat(e,"px"):e},fraction:e=>"number"!==typeof e||e>1?e:"".concat(100*e,"%"),float:(e,t)=>"rtl"===t.direction?{left:"right",right:"left"}[e]:e,degree(e){if(function(e){return/^var\(--.+\)$/.test(e)}(e)||null==e)return e;const t="string"===typeof e&&!e.endsWith("deg");return"number"===typeof e||t?"".concat(e,"deg"):e},gradient:(e,t)=>function(e,t){if(null==e||U.has(e))return e;if(!G(e)&&!U.has(e))return"url('".concat(e,"')");const n=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),r=null==n?void 0:n[1],i=null==n?void 0:n[2];if(!r||!i)return e;const a=r.includes("-gradient")?r:"".concat(r,"-gradient"),[s,...o]=i.split(",").map(H).filter(Boolean);if(0===(null==o?void 0:o.length))return e;const l=s in N?N[s]:s;o.unshift(l);const c=o.map((e=>{if(z.has(e))return e;const n=e.indexOf(" "),[r,i]=-1!==n?[e.substr(0,n),e.substr(n+1)]:[e],a=G(i)?i:i&&i.split(" "),s="colors.".concat(r),o=s in t.__cssMap?t.__cssMap[s].varRef:r;return a?[o,...Array.isArray(a)?a:[a]].join(" "):o}));return"".concat(a,"(").concat(c.join(", "),")")}(e,null!=t?t:{}),blur:V("blur"),opacity:V("opacity"),brightness:V("brightness"),contrast:V("contrast"),dropShadow:V("drop-shadow"),grayscale:V("grayscale"),hueRotate:e=>V("hue-rotate")(W.degree(e)),invert:V("invert"),saturate:V("saturate"),sepia:V("sepia"),bgImage(e){if(null==e)return e;return G(e)||U.has(e)?e:"url(".concat(e,")")},outline(e){const t="0"===String(e)||"none"===String(e);return null!==e&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=null!=(t=O[e])?t:{},i={flexDirection:e};return n&&(i[n]=1),r&&(i[r]=1),i}},q={borderWidths:I("borderWidths"),borderStyles:I("borderStyles"),colors:I("colors"),borders:I("borders"),gradients:I("gradients",W.gradient),radii:I("radii",W.px),space:I("space",D(W.vh,W.px)),spaceT:I("space",D(W.vh,W.px)),degreeT:e=>({property:e,transform:W.degree}),prop:(e,t,n)=>(0,c.A)({property:e,scale:t},t&&{transform:R({scale:t,transform:n})}),propT:(e,t)=>({property:e,transform:t}),sizes:I("sizes",D(W.vh,W.px)),sizesT:I("sizes",D(W.vh,W.fraction)),shadows:I("shadows"),logical:function(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:B(t),transform:n?R({scale:n,compose:r}):r}},blur:I("blur",W.blur)},X={background:q.colors("background"),backgroundColor:q.colors("backgroundColor"),backgroundImage:q.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:W.bgClip},bgSize:q.prop("backgroundSize"),bgPosition:q.prop("backgroundPosition"),bg:q.colors("background"),bgColor:q.colors("backgroundColor"),bgPos:q.prop("backgroundPosition"),bgRepeat:q.prop("backgroundRepeat"),bgAttachment:q.prop("backgroundAttachment"),bgGradient:q.gradients("backgroundImage"),bgClip:{transform:W.bgClip}};Object.assign(X,{bgImage:X.backgroundImage,bgImg:X.backgroundImage});var J={border:q.borders("border"),borderWidth:q.borderWidths("borderWidth"),borderStyle:q.borderStyles("borderStyle"),borderColor:q.colors("borderColor"),borderRadius:q.radii("borderRadius"),borderTop:q.borders("borderTop"),borderBlockStart:q.borders("borderBlockStart"),borderTopLeftRadius:q.radii("borderTopLeftRadius"),borderStartStartRadius:q.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:q.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:q.radii("borderTopRightRadius"),borderStartEndRadius:q.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:q.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:q.borders("borderRight"),borderInlineEnd:q.borders("borderInlineEnd"),borderBottom:q.borders("borderBottom"),borderBlockEnd:q.borders("borderBlockEnd"),borderBottomLeftRadius:q.radii("borderBottomLeftRadius"),borderBottomRightRadius:q.radii("borderBottomRightRadius"),borderLeft:q.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:q.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:q.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:q.borders(["borderLeft","borderRight"]),borderInline:q.borders("borderInline"),borderY:q.borders(["borderTop","borderBottom"]),borderBlock:q.borders("borderBlock"),borderTopWidth:q.borderWidths("borderTopWidth"),borderBlockStartWidth:q.borderWidths("borderBlockStartWidth"),borderTopColor:q.colors("borderTopColor"),borderBlockStartColor:q.colors("borderBlockStartColor"),borderTopStyle:q.borderStyles("borderTopStyle"),borderBlockStartStyle:q.borderStyles("borderBlockStartStyle"),borderBottomWidth:q.borderWidths("borderBottomWidth"),borderBlockEndWidth:q.borderWidths("borderBlockEndWidth"),borderBottomColor:q.colors("borderBottomColor"),borderBlockEndColor:q.colors("borderBlockEndColor"),borderBottomStyle:q.borderStyles("borderBottomStyle"),borderBlockEndStyle:q.borderStyles("borderBlockEndStyle"),borderLeftWidth:q.borderWidths("borderLeftWidth"),borderInlineStartWidth:q.borderWidths("borderInlineStartWidth"),borderLeftColor:q.colors("borderLeftColor"),borderInlineStartColor:q.colors("borderInlineStartColor"),borderLeftStyle:q.borderStyles("borderLeftStyle"),borderInlineStartStyle:q.borderStyles("borderInlineStartStyle"),borderRightWidth:q.borderWidths("borderRightWidth"),borderInlineEndWidth:q.borderWidths("borderInlineEndWidth"),borderRightColor:q.colors("borderRightColor"),borderInlineEndColor:q.colors("borderInlineEndColor"),borderRightStyle:q.borderStyles("borderRightStyle"),borderInlineEndStyle:q.borderStyles("borderInlineEndStyle"),borderTopRadius:q.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:q.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:q.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:q.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(J,{rounded:J.borderRadius,roundedTop:J.borderTopRadius,roundedTopLeft:J.borderTopLeftRadius,roundedTopRight:J.borderTopRightRadius,roundedTopStart:J.borderStartStartRadius,roundedTopEnd:J.borderStartEndRadius,roundedBottom:J.borderBottomRadius,roundedBottomLeft:J.borderBottomLeftRadius,roundedBottomRight:J.borderBottomRightRadius,roundedBottomStart:J.borderEndStartRadius,roundedBottomEnd:J.borderEndEndRadius,roundedLeft:J.borderLeftRadius,roundedRight:J.borderRightRadius,roundedStart:J.borderInlineStartRadius,roundedEnd:J.borderInlineEndRadius,borderStart:J.borderInlineStart,borderEnd:J.borderInlineEnd,borderTopStartRadius:J.borderStartStartRadius,borderTopEndRadius:J.borderStartEndRadius,borderBottomStartRadius:J.borderEndStartRadius,borderBottomEndRadius:J.borderEndEndRadius,borderStartRadius:J.borderInlineStartRadius,borderEndRadius:J.borderInlineEndRadius,borderStartWidth:J.borderInlineStartWidth,borderEndWidth:J.borderInlineEndWidth,borderStartColor:J.borderInlineStartColor,borderEndColor:J.borderInlineEndColor,borderStartStyle:J.borderInlineStartStyle,borderEndStyle:J.borderInlineEndStyle});var Y={color:q.colors("color"),textColor:q.colors("color"),fill:q.colors("fill"),stroke:q.colors("stroke")},K={boxShadow:q.shadows("boxShadow"),mixBlendMode:!0,blendMode:q.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:q.prop("backgroundBlendMode"),opacity:!0};Object.assign(K,{shadow:K.boxShadow});var Z={filter:{transform:W.filter},blur:q.blur("--chakra-blur"),brightness:q.propT("--chakra-brightness",W.brightness),contrast:q.propT("--chakra-contrast",W.contrast),hueRotate:q.propT("--chakra-hue-rotate",W.hueRotate),invert:q.propT("--chakra-invert",W.invert),saturate:q.propT("--chakra-saturate",W.saturate),dropShadow:q.propT("--chakra-drop-shadow",W.dropShadow),backdropFilter:{transform:W.backdropFilter},backdropBlur:q.blur("--chakra-backdrop-blur"),backdropBrightness:q.propT("--chakra-backdrop-brightness",W.brightness),backdropContrast:q.propT("--chakra-backdrop-contrast",W.contrast),backdropHueRotate:q.propT("--chakra-backdrop-hue-rotate",W.hueRotate),backdropInvert:q.propT("--chakra-backdrop-invert",W.invert),backdropSaturate:q.propT("--chakra-backdrop-saturate",W.saturate)},Q={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:W.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:q.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:q.space("gap"),rowGap:q.space("rowGap"),columnGap:q.space("columnGap")};Object.assign(Q,{flexDir:Q.flexDirection});var $={gridGap:q.space("gridGap"),gridColumnGap:q.space("gridColumnGap"),gridRowGap:q.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},ee={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:W.outline},outlineOffset:!0,outlineColor:q.colors("outlineColor")},te={width:q.sizesT("width"),inlineSize:q.sizesT("inlineSize"),height:q.sizes("height"),blockSize:q.sizes("blockSize"),boxSize:q.sizes(["width","height"]),minWidth:q.sizes("minWidth"),minInlineSize:q.sizes("minInlineSize"),minHeight:q.sizes("minHeight"),minBlockSize:q.sizes("minBlockSize"),maxWidth:q.sizes("maxWidth"),maxInlineSize:q.sizes("maxInlineSize"),maxHeight:q.sizes("maxHeight"),maxBlockSize:q.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;const a=null!=(i=null==(r=null==(n=t.__breakpoints)?void 0:n.get(e))?void 0:r.minW)?i:e;return{["@media screen and (min-width: ".concat(a,")")]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;const a=null!=(i=null==(r=null==(n=t.__breakpoints)?void 0:n.get(e))?void 0:r._minW)?i:e;return{["@media screen and (max-width: ".concat(a,")")]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:q.propT("float",W.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(te,{w:te.width,h:te.height,minW:te.minWidth,maxW:te.maxWidth,minH:te.minHeight,maxH:te.maxHeight,overscroll:te.overscrollBehavior,overscrollX:te.overscrollBehaviorX,overscrollY:te.overscrollBehaviorY});var ne={listStyleType:!0,listStylePosition:!0,listStylePos:q.prop("listStylePosition"),listStyleImage:!0,listStyleImg:q.prop("listStyleImage")};var re=(e=>{const t=new WeakMap;return(n,r,i,a)=>{if("undefined"===typeof n)return e(n,r,i);t.has(n)||t.set(n,new Map);const s=t.get(n);if(s.has(r))return s.get(r);const o=e(n,r,i,a);return s.set(r,o),o}})((function(e,t,n,r){const i="string"===typeof t?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return void 0===e?n:e})),ie={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},ae={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},se=(e,t,n)=>{const r={},i=re(e,t,{});for(const a in i){a in n&&null!=n[a]||(r[a]=i[a])}return r},oe={srOnly:{transform:e=>!0===e?ie:"focusable"===e?ae:{}},layerStyle:{processResult:!0,transform:(e,t,n)=>se(t,"layerStyles.".concat(e),n)},textStyle:{processResult:!0,transform:(e,t,n)=>se(t,"textStyles.".concat(e),n)},apply:{processResult:!0,transform:(e,t,n)=>se(t,e,n)}},le={position:!0,pos:q.prop("position"),zIndex:q.prop("zIndex","zIndices"),inset:q.spaceT("inset"),insetX:q.spaceT(["left","right"]),insetInline:q.spaceT("insetInline"),insetY:q.spaceT(["top","bottom"]),insetBlock:q.spaceT("insetBlock"),top:q.spaceT("top"),insetBlockStart:q.spaceT("insetBlockStart"),bottom:q.spaceT("bottom"),insetBlockEnd:q.spaceT("insetBlockEnd"),left:q.spaceT("left"),insetInlineStart:q.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:q.spaceT("right"),insetInlineEnd:q.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(le,{insetStart:le.insetInlineStart,insetEnd:le.insetInlineEnd});var ce={ring:{transform:W.ring},ringColor:q.colors("--chakra-ring-color"),ringOffset:q.prop("--chakra-ring-offset-width"),ringOffsetColor:q.colors("--chakra-ring-offset-color"),ringInset:q.prop("--chakra-ring-inset")},ue={margin:q.spaceT("margin"),marginTop:q.spaceT("marginTop"),marginBlockStart:q.spaceT("marginBlockStart"),marginRight:q.spaceT("marginRight"),marginInlineEnd:q.spaceT("marginInlineEnd"),marginBottom:q.spaceT("marginBottom"),marginBlockEnd:q.spaceT("marginBlockEnd"),marginLeft:q.spaceT("marginLeft"),marginInlineStart:q.spaceT("marginInlineStart"),marginX:q.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:q.spaceT("marginInline"),marginY:q.spaceT(["marginTop","marginBottom"]),marginBlock:q.spaceT("marginBlock"),padding:q.space("padding"),paddingTop:q.space("paddingTop"),paddingBlockStart:q.space("paddingBlockStart"),paddingRight:q.space("paddingRight"),paddingBottom:q.space("paddingBottom"),paddingBlockEnd:q.space("paddingBlockEnd"),paddingLeft:q.space("paddingLeft"),paddingInlineStart:q.space("paddingInlineStart"),paddingInlineEnd:q.space("paddingInlineEnd"),paddingX:q.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:q.space("paddingInline"),paddingY:q.space(["paddingTop","paddingBottom"]),paddingBlock:q.space("paddingBlock")};Object.assign(ue,{m:ue.margin,mt:ue.marginTop,mr:ue.marginRight,me:ue.marginInlineEnd,marginEnd:ue.marginInlineEnd,mb:ue.marginBottom,ml:ue.marginLeft,ms:ue.marginInlineStart,marginStart:ue.marginInlineStart,mx:ue.marginX,my:ue.marginY,p:ue.padding,pt:ue.paddingTop,py:ue.paddingY,px:ue.paddingX,pb:ue.paddingBottom,pl:ue.paddingLeft,ps:ue.paddingInlineStart,paddingStart:ue.paddingInlineStart,pr:ue.paddingRight,pe:ue.paddingInlineEnd,paddingEnd:ue.paddingInlineEnd});var de={textDecorationColor:q.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:q.shadows("textShadow")},he={clipPath:!0,transform:q.propT("transform",W.transform),transformOrigin:!0,translateX:q.spaceT("--chakra-translate-x"),translateY:q.spaceT("--chakra-translate-y"),skewX:q.degreeT("--chakra-skew-x"),skewY:q.degreeT("--chakra-skew-y"),scaleX:q.prop("--chakra-scale-x"),scaleY:q.prop("--chakra-scale-y"),scale:q.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:q.degreeT("--chakra-rotate")},pe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:q.prop("transitionDuration","transition.duration"),transitionProperty:q.prop("transitionProperty","transition.property"),transitionTimingFunction:q.prop("transitionTimingFunction","transition.easing")},fe={fontFamily:q.prop("fontFamily","fonts"),fontSize:q.prop("fontSize","fontSizes",W.px),fontWeight:q.prop("fontWeight","fontWeights"),lineHeight:q.prop("lineHeight","lineHeights"),letterSpacing:q.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(!0===e)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},me={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:q.spaceT("scrollMargin"),scrollMarginTop:q.spaceT("scrollMarginTop"),scrollMarginBottom:q.spaceT("scrollMarginBottom"),scrollMarginLeft:q.spaceT("scrollMarginLeft"),scrollMarginRight:q.spaceT("scrollMarginRight"),scrollMarginX:q.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:q.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:q.spaceT("scrollPadding"),scrollPaddingTop:q.spaceT("scrollPaddingTop"),scrollPaddingBottom:q.spaceT("scrollPaddingBottom"),scrollPaddingLeft:q.spaceT("scrollPaddingLeft"),scrollPaddingRight:q.spaceT("scrollPaddingRight"),scrollPaddingX:q.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:q.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function ge(e){return b(e)&&e.reference?e.reference:String(e)}var ve=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.map(ge).join(" ".concat(e," ")).replace(/calc/g,"")},ye=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(ve("+",...t),")")},xe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(ve("-",...t),")")},be=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(ve("*",...t),")")},we=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(ve("/",...t),")")},Se=e=>{const t=ge(e);return null==t||Number.isNaN(parseFloat(t))?be(t,-1):String(t).startsWith("-")?String(t).slice(1):"-".concat(t)},_e=Object.assign((e=>({add:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(ye(e,...n))},subtract:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(xe(e,...n))},multiply:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(be(e,...n))},divide:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(we(e,...n))},negate:()=>_e(Se(e)),toString:()=>e.toString()})),{add:ye,subtract:xe,multiply:be,divide:we,negate:Se});function Ae(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/\s+/g,t)}(e.toString());return function(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(function(e){if(e.includes("\\."))return e;const t=!Number.isInteger(parseFloat(e.toString()));return t?e.replace(".","\\."):e}(t))}function Ee(e,t){return"var(".concat(e).concat(t?", ".concat(t):"",")")}function Ce(e){return Ae("--".concat(function(e){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e].filter(Boolean).join("-")}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")))}function Me(e,t,n){const r=Ce(e,n);return{variable:r,reference:Ee(r,t)}}function Te(e){const t=null==e?0:e.length;return t?e[t-1]:void 0}function ke(e){if(null==e)return e;const{unitless:t}=function(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}(e);return t||"number"===typeof e?"".concat(e,"px"):e}var Pe=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,Re=e=>Object.fromEntries(Object.entries(e).sort(Pe));function De(e){const t=Re(e);return Object.assign(Object.values(t),t)}function Ie(e){var t;if(!e)return e;e=null!=(t=ke(e))?t:e;return"number"===typeof e?"".concat(e+-.02):e.replace(/([0-9]+\.?[0-9]*)/,(e=>"".concat(parseFloat(e)+-.02)))}function Be(e,t){const n=["@media screen"];return e&&n.push("and","(min-width: ".concat(ke(e),")")),t&&n.push("and","(max-width: ".concat(ke(t),")")),n.join(" ")}function je(e){var t;if(!e)return null;e.base=null!=(t=e.base)?t:"0px";const n=De(e),r=Object.entries(e).sort(Pe).map(((e,t,n)=>{let[r,i]=e;var a;let[,s]=null!=(a=n[t+1])?a:[];return s=parseFloat(s)>0?Ie(s):void 0,{_minW:Ie(i),breakpoint:r,minW:i,maxW:s,maxWQuery:Be(null,s),minWQuery:Be(i),minMaxQuery:Be(i,s)}})),i=function(e){const t=Object.keys(Re(e));return new Set(t)}(e),a=Array.from(i.values());return{keys:i,normalized:n,isResponsive(e){const t=Object.keys(e);return t.length>0&&t.every((e=>i.has(e)))},asObject:Re(e),asArray:De(e),details:r,get:e=>r.find((t=>t.breakpoint===e)),media:[null,...n.map((e=>Be(e))).slice(1)],toArrayValue(e){if(!b(e))throw new Error("toArrayValue: value must be an object");const t=a.map((t=>{var n;return null!=(n=e[t])?n:null}));for(;null===Te(t);)t.pop();return t},toObjectValue(e){if(!Array.isArray(e))throw new Error("toObjectValue: value must be an array");return e.reduce(((e,t,n)=>{const r=a[n];return null!=r&&null!=t&&(e[r]=t),e}),{})}}}var Fe=(e,t)=>"".concat(e,":hover ").concat(t,", ").concat(e,"[data-hover] ").concat(t),Le=(e,t)=>"".concat(e,":focus ").concat(t,", ").concat(e,"[data-focus] ").concat(t),Oe=(e,t)=>"".concat(e,":focus-visible ").concat(t),Ne=(e,t)=>"".concat(e,":focus-within ").concat(t),ze=(e,t)=>"".concat(e,":active ").concat(t,", ").concat(e,"[data-active] ").concat(t),Ue=(e,t)=>"".concat(e,":disabled ").concat(t,", ").concat(e,"[data-disabled] ").concat(t),He=(e,t)=>"".concat(e,":invalid ").concat(t,", ").concat(e,"[data-invalid] ").concat(t),Ge=(e,t)=>"".concat(e,":checked ").concat(t,", ").concat(e,"[data-checked] ").concat(t),Ve=(e,t)=>"".concat(e,":placeholder-shown ").concat(t),We=e=>Xe((t=>e(t,"&")),"[role=group]","[data-group]",".group"),qe=e=>Xe((t=>e(t,"~ &")),"[data-peer]",".peer"),Xe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.map(e).join(", ")},Je={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:We(Fe),_peerHover:qe(Fe),_groupFocus:We(Le),_peerFocus:qe(Le),_groupFocusVisible:We(Oe),_peerFocusVisible:qe(Oe),_groupActive:We(ze),_peerActive:qe(ze),_groupDisabled:We(Ue),_peerDisabled:qe(Ue),_groupInvalid:We(He),_peerInvalid:qe(He),_groupChecked:We(Ge),_peerChecked:qe(Ge),_groupFocusWithin:We(Ne),_peerFocusWithin:qe(Ne),_peerPlaceholderShown:qe(Ve),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},Ye=Object.keys(Je);function Ke(e,t){return Me(String(e).replace(/\./g,"-"),void 0,t)}function Ze(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{stop:r,getKey:i}=n;return function e(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var s;if(function(e){return"object"===typeof e&&null!=e&&!Array.isArray(e)}(n)||Array.isArray(n)){const o={};for(const[l,c]of Object.entries(n)){const u=null!=(s=null==i?void 0:i(l))?s:l,d=[...a,u];if(null==r?void 0:r(n,d))return t(n,a);o[u]=e(c,d)}return o}return t(n,a)}(e)}var Qe=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];var $e=e=>Ye.includes(e)||"default"===e;function et(e){var t;const n=function(e){const{__cssMap:t,__cssVars:n,__breakpoints:r}=e;return y(e,T)}(e),r=function(e){return function(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}(e,Qe)}(n),i=function(e){return e.semanticTokens}(n),a=function(e){let{tokens:t,semanticTokens:n}=e;const r={};return Ze(t,((e,t)=>{null!=e&&(r[t.join(".")]={isSemantic:!1,value:e})})),Ze(n,((e,t)=>{null!=e&&(r[t.join(".")]={isSemantic:!0,value:e})}),{stop:e=>Object.keys(e).every($e)}),r}({tokens:r,semanticTokens:i}),s=null==(t=n.config)?void 0:t.cssVarPrefix,{cssMap:o,cssVars:l}=function(e,t){let n={};const r={};for(const[i,a]of Object.entries(e)){const{isSemantic:s,value:o}=a,{variable:l,reference:c}=Ke(i,null==t?void 0:t.cssVarPrefix);if(!s){if(i.startsWith("space")){const e=i.split("."),[t,...n]=e,a="".concat(t,".-").concat(n.join(".")),s=_e.negate(o),u=_e.negate(c);r[a]={value:s,var:l,varRef:u}}n[l]=o,r[i]={value:o,var:l,varRef:c};continue}const u=n=>{const r=[String(i).split(".")[0],n].join(".");if(!e[r])return n;const{reference:a}=Ke(r,null==t?void 0:t.cssVarPrefix);return a},d=b(o)?o:{default:o};n=M(n,Object.entries(d).reduce(((e,t)=>{let[n,r]=t;var i,a;if(!r)return e;const s=u("".concat(r));return"default"===n?(e[l]=s,e):(e[null!=(a=null==(i=Je)?void 0:i[n])?a:n]={[l]:s},e)}),{})),r[i]={value:c,var:l,varRef:c}}return{cssVars:n,cssMap:r}}(a,{cssVarPrefix:s});return Object.assign(n,{__cssVars:(0,c.A)((0,c.A)({},{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"}),l),__cssMap:o,__breakpoints:je(n.breakpoints)}),n}var tt=M({},X,J,Y,Q,te,Z,ce,ee,$,oe,le,K,ue,me,fe,de,he,ne,pe),nt=Object.assign({},ue,te,Q,$,le),rt=Object.keys(nt),it=[...Object.keys(tt),...Ye],at=(0,c.A)((0,c.A)({},tt),Je),st=e=>e in at;var ot=(e,t)=>e.startsWith("--")&&"string"===typeof t&&!function(e){return/^var\(--.+\)$/.test(e)}(t),lt=(e,t)=>{var n,r;if(null==t)return t;const i=t=>{var n,r;return null==(r=null==(n=e.__cssMap)?void 0:n[t])?void 0:r.varRef},a=e=>{var t;return null!=(t=i(e))?t:e},[s,o]=function(e){const t=[];let n="",r=!1;for(let i=0;i<e.length;i++){const a=e[i];"("===a?(r=!0,n+=a):")"===a?(r=!1,n+=a):","!==a||r?n+=a:(t.push(n),n="")}return n=n.trim(),n&&t.push(n),t}(t);return t=null!=(r=null!=(n=i(s))?n:a(o))?r:a(t)};function ct(e){const{configs:t={},pseudos:n={},theme:r}=e,i=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var s,o,l;const c=w(e,r),u=(e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,a={};for(const s in e){let o=w(e[s],t);if(null==o)continue;if(o=b(o)&&n(o)?r(o):o,!Array.isArray(o)){a[s]=o;continue}const l=o.slice(0,i.length).length;for(let e=0;e<l;e+=1){const t=null==i?void 0:i[e];t?(a[t]=a[t]||{},null!=o[e]&&(a[t][s]=o[e])):a[s]=o[e]}}return a})(c)(r);let d={};for(let h in u){let e=w(u[h],r);h in n&&(h=n[h]),ot(h,e)&&(e=lt(r,e));let p=t[h];if(!0===p&&(p={property:h}),b(e)){d[h]=null!=(s=d[h])?s:{},d[h]=M({},d[h],i(e,!0));continue}let f=null!=(l=null==(o=null==p?void 0:p.transform)?void 0:o.call(p,e,r,c))?l:e;f=(null==p?void 0:p.processResult)?i(f,!0):f;const m=w(null==p?void 0:p.property,r);if(!a&&(null==p?void 0:p.static)){const e=w(p.static,r);d=M({},d,e)}if(m&&Array.isArray(m))for(const t of m)d[t]=f;else m?"&"===m&&b(f)?d=M({},d,f):d[m]=f:b(f)?d=M({},d,f):d[h]=f}return d};return i}var ut=e=>t=>ct({theme:t,pseudos:Je,configs:tt})(e);function dt(e){return{definePartsStyle:e=>e,defineMultiStyleConfig:t=>(0,c.A)({parts:e},t)}}function ht(e,t){for(let n=t+1;n<e.length;n++)if(null!=e[n])return n;return-1}function pt(e){const t=e.__breakpoints;return function(e,n,r,i){var a,s;if(!t)return;const o={},l=function(e,t){return Array.isArray(e)?e:b(e)?t(e):null!=e?[e]:void 0}(r,t.toArrayValue);if(!l)return o;const c=l.length,u=1===c,d=!!e.parts;for(let h=0;h<c;h++){const r=t.details[h],c=t.details[ht(l,h)],p=Be(r.minW,null==c?void 0:c._minW),f=w(null==(a=e[n])?void 0:a[l[h]],i);f&&(d?null==(s=e.parts)||s.forEach((e=>{M(o,{[e]:u?f[e]:{[p]:f[e]}})})):d?o[p]=f:u?M(o,f):o[p]=f)}return o}}function ft(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}(e,["styleConfig","size","variant","colorScheme"])}var mt=new Set([...it,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),gt=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function vt(e){return gt.has(e)||!mt.has(e)}var yt=(e=>{const t=new WeakMap;return(n,r,i,a)=>{if("undefined"===typeof n)return e(n,r,i);t.has(n)||t.set(n,new Map);const s=t.get(n);if(s.has(r))return s.get(r);const o=e(n,r,i,a);return s.set(r,o),o}})((function(e,t,n,r){const i="string"===typeof t?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return void 0===e?n:e}));function xt(e,t){const n={};return Object.keys(e).forEach((r=>{const i=e[r];t(i,r,e)&&(n[r]=i)})),n}var bt=e=>xt(e,(e=>null!==e&&void 0!==e));function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wt.apply(null,arguments)}function St(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var _t=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,At=St((function(e){return _t.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var Et=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Ct=Math.abs,Mt=String.fromCharCode,Tt=Object.assign;function kt(e){return e.trim()}function Pt(e,t,n){return e.replace(t,n)}function Rt(e,t){return e.indexOf(t)}function Dt(e,t){return 0|e.charCodeAt(t)}function It(e,t,n){return e.slice(t,n)}function Bt(e){return e.length}function jt(e){return e.length}function Ft(e,t){return t.push(e),e}var Lt=1,Ot=1,Nt=0,zt=0,Ut=0,Ht="";function Gt(e,t,n,r,i,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:Lt,column:Ot,length:s,return:""}}function Vt(e,t){return Tt(Gt("",null,null,"",null,null,0),e,{length:-e.length},t)}function Wt(){return Ut=zt>0?Dt(Ht,--zt):0,Ot--,10===Ut&&(Ot=1,Lt--),Ut}function qt(){return Ut=zt<Nt?Dt(Ht,zt++):0,Ot++,10===Ut&&(Ot=1,Lt++),Ut}function Xt(){return Dt(Ht,zt)}function Jt(){return zt}function Yt(e,t){return It(Ht,e,t)}function Kt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zt(e){return Lt=Ot=1,Nt=Bt(Ht=e),zt=0,[]}function Qt(e){return Ht="",e}function $t(e){return kt(Yt(zt-1,nn(91===e?e+2:40===e?e+1:e)))}function en(e){for(;(Ut=Xt())&&Ut<33;)qt();return Kt(e)>2||Kt(Ut)>3?"":" "}function tn(e,t){for(;--t&&qt()&&!(Ut<48||Ut>102||Ut>57&&Ut<65||Ut>70&&Ut<97););return Yt(e,Jt()+(t<6&&32==Xt()&&32==qt()))}function nn(e){for(;qt();)switch(Ut){case e:return zt;case 34:case 39:34!==e&&39!==e&&nn(Ut);break;case 40:41===e&&nn(e);break;case 92:qt()}return zt}function rn(e,t){for(;qt()&&e+Ut!==57&&(e+Ut!==84||47!==Xt()););return"/*"+Yt(t,zt-1)+"*"+Mt(47===e?e:qt())}function an(e){for(;!Kt(Xt());)qt();return Yt(e,zt)}var sn="-ms-",on="-moz-",ln="-webkit-",cn="comm",un="rule",dn="decl",hn="@keyframes";function pn(e,t){for(var n="",r=jt(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function fn(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case dn:return e.return=e.return||e.value;case cn:return"";case hn:return e.return=e.value+"{"+pn(e.children,r)+"}";case un:e.value=e.props.join(",")}return Bt(n=pn(e.children,r))?e.return=e.value+"{"+n+"}":""}function mn(e){return Qt(gn("",null,null,null,[""],e=Zt(e),0,[0],e))}function gn(e,t,n,r,i,a,s,o,l){for(var c=0,u=0,d=s,h=0,p=0,f=0,m=1,g=1,v=1,y=0,x="",b=i,w=a,S=r,_=x;g;)switch(f=y,y=qt()){case 40:if(108!=f&&58==Dt(_,d-1)){-1!=Rt(_+=Pt($t(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:_+=$t(y);break;case 9:case 10:case 13:case 32:_+=en(f);break;case 92:_+=tn(Jt()-1,7);continue;case 47:switch(Xt()){case 42:case 47:Ft(yn(rn(qt(),Jt()),t,n),l);break;default:_+="/"}break;case 123*m:o[c++]=Bt(_)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(_=Pt(_,/\f/g,"")),p>0&&Bt(_)-d&&Ft(p>32?xn(_+";",r,n,d-1):xn(Pt(_," ","")+";",r,n,d-2),l);break;case 59:_+=";";default:if(Ft(S=vn(_,t,n,c,u,i,o,x,b=[],w=[],d),a),123===y)if(0===u)gn(_,t,S,S,b,a,d,o,w);else switch(99===h&&110===Dt(_,3)?100:h){case 100:case 108:case 109:case 115:gn(e,S,S,r&&Ft(vn(e,S,S,0,0,i,o,x,i,b=[],d),w),i,w,d,o,r?b:w);break;default:gn(_,S,S,S,[""],w,0,o,w)}}c=u=p=0,m=v=1,x=_="",d=s;break;case 58:d=1+Bt(_),p=f;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==Wt())continue;switch(_+=Mt(y),y*m){case 38:v=u>0?1:(_+="\f",-1);break;case 44:o[c++]=(Bt(_)-1)*v,v=1;break;case 64:45===Xt()&&(_+=$t(qt())),h=Xt(),u=d=Bt(x=_+=an(Jt())),y++;break;case 45:45===f&&2==Bt(_)&&(m=0)}}return a}function vn(e,t,n,r,i,a,s,o,l,c,u){for(var d=i-1,h=0===i?a:[""],p=jt(h),f=0,m=0,g=0;f<r;++f)for(var v=0,y=It(e,d+1,d=Ct(m=s[f])),x=e;v<p;++v)(x=kt(m>0?h[v]+" "+y:Pt(y,/&\f/g,h[v])))&&(l[g++]=x);return Gt(e,t,n,0===i?un:o,l,c,u)}function yn(e,t,n){return Gt(e,t,n,cn,Mt(Ut),It(e,2,-2),0)}function xn(e,t,n,r){return Gt(e,t,n,dn,It(e,0,r),It(e,r+1,-1),r)}var bn=function(e,t,n){for(var r=0,i=0;r=i,i=Xt(),38===r&&12===i&&(t[n]=1),!Kt(i);)qt();return Yt(e,zt)},wn=function(e,t){return Qt(function(e,t){var n=-1,r=44;do{switch(Kt(r)){case 0:38===r&&12===Xt()&&(t[n]=1),e[n]+=bn(zt-1,t,n);break;case 2:e[n]+=$t(r);break;case 4:if(44===r){e[++n]=58===Xt()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Mt(r)}}while(r=qt());return e}(Zt(e),t))},Sn=new WeakMap,_n=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Sn.get(n))&&!r){Sn.set(e,!0);for(var i=[],a=wn(t,i),s=n.props,o=0,l=0;o<a.length;o++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[o]?a[o].replace(/&\f/g,s[c]):s[c]+" "+a[o]}}},An=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function En(e,t){switch(function(e,t){return 45^Dt(e,0)?(((t<<2^Dt(e,0))<<2^Dt(e,1))<<2^Dt(e,2))<<2^Dt(e,3):0}(e,t)){case 5103:return ln+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ln+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ln+e+on+e+sn+e+e;case 6828:case 4268:return ln+e+sn+e+e;case 6165:return ln+e+sn+"flex-"+e+e;case 5187:return ln+e+Pt(e,/(\w+).+(:[^]+)/,ln+"box-$1$2"+sn+"flex-$1$2")+e;case 5443:return ln+e+sn+"flex-item-"+Pt(e,/flex-|-self/,"")+e;case 4675:return ln+e+sn+"flex-line-pack"+Pt(e,/align-content|flex-|-self/,"")+e;case 5548:return ln+e+sn+Pt(e,"shrink","negative")+e;case 5292:return ln+e+sn+Pt(e,"basis","preferred-size")+e;case 6060:return ln+"box-"+Pt(e,"-grow","")+ln+e+sn+Pt(e,"grow","positive")+e;case 4554:return ln+Pt(e,/([^-])(transform)/g,"$1"+ln+"$2")+e;case 6187:return Pt(Pt(Pt(e,/(zoom-|grab)/,ln+"$1"),/(image-set)/,ln+"$1"),e,"")+e;case 5495:case 3959:return Pt(e,/(image-set\([^]*)/,ln+"$1$`$1");case 4968:return Pt(Pt(e,/(.+:)(flex-)?(.*)/,ln+"box-pack:$3"+sn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ln+e+e;case 4095:case 3583:case 4068:case 2532:return Pt(e,/(.+)-inline(.+)/,ln+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bt(e)-1-t>6)switch(Dt(e,t+1)){case 109:if(45!==Dt(e,t+4))break;case 102:return Pt(e,/(.+:)(.+)-([^]+)/,"$1"+ln+"$2-$3$1"+on+(108==Dt(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Rt(e,"stretch")?En(Pt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Dt(e,t+1))break;case 6444:switch(Dt(e,Bt(e)-3-(~Rt(e,"!important")&&10))){case 107:return Pt(e,":",":"+ln)+e;case 101:return Pt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ln+(45===Dt(e,14)?"inline-":"")+"box$3$1"+ln+"$2$3$1"+sn+"$2box$3")+e}break;case 5936:switch(Dt(e,t+11)){case 114:return ln+e+sn+Pt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ln+e+sn+Pt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ln+e+sn+Pt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ln+e+sn+e+e}return e}var Cn=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case dn:e.return=En(e.value,e.length);break;case hn:return pn([Vt(e,{value:Pt(e.value,"@","@"+ln)})],r);case un:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pn([Vt(e,{props:[Pt(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return pn([Vt(e,{props:[Pt(t,/:(plac\w+)/,":"+ln+"input-$1")]}),Vt(e,{props:[Pt(t,/:(plac\w+)/,":-moz-$1")]}),Vt(e,{props:[Pt(t,/:(plac\w+)/,sn+"input-$1")]})],r)}return""}))}}],Mn=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Cn;var i,a,s={},o=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;o.push(e)}));var l,c,u=[fn,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=jt(e);return function(n,r,i,a){for(var s="",o=0;o<t;o++)s+=e[o](n,r,i,a)||"";return s}}([_n,An].concat(r,u));a=function(e,t,n,r){l=n,function(e){pn(mn(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new Et({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return h.sheet.hydrate(o),h},Tn=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}};var kn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Pn=/[A-Z]|^ms/g,Rn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Dn=function(e){return 45===e.charCodeAt(1)},In=function(e){return null!=e&&"boolean"!==typeof e},Bn=St((function(e){return Dn(e)?e:e.replace(Pn,"-$&").toLowerCase()})),jn=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Rn,(function(e,t,n){return Ln={name:t,styles:n,next:Ln},t}))}return 1===kn[e]||Dn(e)||"number"!==typeof t||0===t?t:t+"px"};function Fn(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ln={name:n.name,styles:n.styles,next:Ln},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Ln={name:r.name,styles:r.styles,next:Ln},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Fn(e,t,n[i])+";";else for(var a in n){var s=n[a];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=a+"{"+t[s]+"}":In(s)&&(r+=Bn(a)+":"+jn(a,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var o=Fn(e,t,s);switch(a){case"animation":case"animationName":r+=Bn(a)+":"+o+";";break;default:r+=a+"{"+o+"}"}}else for(var l=0;l<s.length;l++)In(s[l])&&(r+=Bn(a)+":"+jn(a,s[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Ln,a=n(e);return Ln=i,Fn(e,t,a)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var Ln,On=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Nn=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Ln=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=Fn(n,t,a)):i+=a[0];for(var s=1;s<e.length;s++)i+=Fn(n,t,e[s]),r&&(i+=a[s]);On.lastIndex=0;for(var o,l="";null!==(o=On.exec(i));)l+="-"+o[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Ln}},zn=!!i.useInsertionEffect&&i.useInsertionEffect,Un=zn||function(e){return e()},Hn=zn||r.useLayoutEffect,Gn=r.createContext("undefined"!==typeof HTMLElement?Mn({key:"css"}):null);Gn.Provider;var Vn=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(Gn);return e(t,i,n)}))};var Wn=r.createContext({});var qn=Tn((function(e){return Tn((function(t){return function(e,t){return"function"===typeof t?t(e):wt({},e,t)}(e,t)}))})),Xn=function(e){var t=r.useContext(Wn);return e.theme!==t&&(t=qn(t)(e.theme)),r.createElement(Wn.Provider,{value:t},e.children)};var Jn=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Yn=function(e,t,n){Jn(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},Kn=At,Zn=function(e){return"theme"!==e},Qn=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Kn:Zn},$n=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},er=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Jn(t,n,r),Un((function(){return Yn(t,n,r)})),null},tr=function e(t,n){var i,a,s=t.__emotion_real===t,o=s&&t.__emotion_base||t;void 0!==n&&(i=n.label,a=n.target);var l=$n(t,n,s),c=l||Qn(o),u=!c("as");return function(){var d=arguments,h=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&h.push("label:"+i+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{0,h.push(d[0][0]);for(var p=d.length,f=1;f<p;f++)h.push(d[f],d[0][f])}var m=Vn((function(e,t,n){var i=u&&e.as||o,s="",d=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=r.useContext(Wn)}"string"===typeof e.className?s=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(t.registered,d,e.className):null!=e.className&&(s=e.className+" ");var m=Nn(h.concat(d),t.registered,p);s+=t.key+"-"+m.name,void 0!==a&&(s+=" "+a);var g=u&&void 0===l?Qn(i):c,v={};for(var y in e)u&&"as"===y||g(y)&&(v[y]=e[y]);return v.className=s,v.ref=n,r.createElement(r.Fragment,null,r.createElement(er,{cache:t,serialized:m,isStringTag:"string"===typeof i}),r.createElement(i,v))}));return m.displayName=void 0!==i?i:"Styled("+("string"===typeof o?o:o.displayName||o.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=o,m.__emotion_styles=h,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(t,r){return e(t,wt({},n,r,{shouldForwardProp:$n(m,r,!0)})).apply(void 0,h)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){tr[e]=tr(e)}));const nr=["theme","css","__css","sx"],rr=["baseStyle"];var ir,ar=null!=(ir=tr.default)?ir:tr,sr=e=>{let{baseStyle:t}=e;return e=>{const{theme:n,css:r,__css:i,sx:a}=e,s=xt(y(e,nr),((e,t)=>st(t))),o=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=(0,c.A)({},e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const a of r)if(null!=a)for(const e in a)Object.prototype.hasOwnProperty.call(a,e)&&(e in t&&delete t[e],t[e]=a[e]);return t}({},i,f(t,e),bt(s),a),l=ut(o)(e.theme);return r?[l,r]:l}};function or(e,t){const n=null!=t?t:{},{baseStyle:i}=n,a=y(n,rr);a.shouldForwardProp||(a.shouldForwardProp=vt);const s=sr({baseStyle:i}),l=ar(e,a)(s);return r.forwardRef((function(e,t){const{colorMode:n,forced:i}=o();return r.createElement(l,(0,c.A)({ref:t,"data-theme":i?n:void 0},e))}))}var lr=function(){const e=new Map;return new Proxy(or,{apply:(e,t,n)=>or(...n),get:(t,n)=>(e.has(n)||e.set(n,or(n)),e.get(n))})}();function cr(e){return(0,r.forwardRef)(e)}var ur=__webpack_require__(579);const dr=["size","centerContent"],hr=["size"];var pr=lr("div");pr.displayName="Box";var fr=cr((function(e,t){const{size:n,centerContent:r=!0}=e,i=y(e,dr),a=r?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return(0,ur.jsx)(pr,(0,c.A)({ref:t,boxSize:n,__css:(0,c.A)((0,c.A)({},a),{},{flexShrink:0,flexGrow:0})},i))}));fr.displayName="Square";var mr=cr((function(e,t){const{size:n}=e,r=y(e,hr);return(0,ur.jsx)(fr,(0,c.A)({size:n,ref:t,borderRadius:"9999px"},r))}));function gr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:t,strict:n=!0,hookName:i="useContext",providerName:a="Provider",errorMessage:s,defaultValue:o}=e,l=(0,r.createContext)(o);return l.displayName=t,[l.Provider,function e(){var t;const o=(0,r.useContext)(l);if(!o&&n){const n=new Error(null!=s?s:(c=a,"".concat(i," returned `undefined`. Seems you forgot to wrap component within ").concat(c)));throw n.name="ContextError",null==(t=Error.captureStackTrace)||t.call(Error,n,e),n}var c;return o},l]}mr.displayName="Circle";var[vr,yr]=gr({strict:!1,name:"ButtonGroupContext"});const xr=["children","className"];function br(e){const{children:t,className:n}=e,i=y(e,xr),a=(0,r.isValidElement)(t)?(0,r.cloneElement)(t,{"aria-hidden":!0,focusable:!1}):t,s=x("chakra-button__icon",n);return(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({display:"inline-flex",alignSelf:"center",flexShrink:0},i),{},{className:s,children:a}))}br.displayName="ButtonIcon";__webpack_require__(219);var wr=Vn((function(e,t){var n=e.styles,i=Nn([n],void 0,r.useContext(Wn)),a=r.useRef();return Hn((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,s=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==s&&(r=!0,s.setAttribute("data-emotion",e),n.hydrate([s])),a.current=[n,r],function(){n.flush()}}),[t]),Hn((function(){var e=a.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&Yn(t,i.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",i,n,!1)}}),[t,i.name]),null}));function Sr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Nn(t)}var _r=function(){var e=Sr.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Ar(){const e=(0,r.useContext)(Wn);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}function Er(){const e=o(),t=Ar();return(0,c.A)((0,c.A)({},e),{},{theme:t})}function Cr(e,t,n){const r=Array.isArray(t)?t:[t],i=Array.isArray(n)?n:[n];return n=>{const a=i.filter(Boolean),s=r.map(((t,r)=>{var i,s;if("breakpoints"===e)return function(e,t,n){var r,i;if(null==t)return t;const a=t=>{var n,r;return null==(r=null==(n=e.__breakpoints)?void 0:n.asArray)?void 0:r[t]};return null!=(i=null!=(r=a(t))?r:a(n))?i:n}(n,t,null!=(i=a[r])?i:t);const o="".concat(e,".").concat(t);return function(e,t,n){var r,i;if(null==t)return t;const a=t=>{var n,r;return null==(r=null==(n=e.__cssMap)?void 0:n[t])?void 0:r.value};return null!=(i=null!=(r=a(t))?r:a(n))?i:n}(n,o,null!=(s=a[r])?s:t)}));return Array.isArray(t)?s:s[0]}}var Mr=__webpack_require__(6366);const Tr=["styleConfig"];function kr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{styleConfig:i}=t,a=y(t,Tr),{theme:s,colorMode:o}=Er(),l=e?yt(s,"components.".concat(e)):void 0,c=i||l,u=M({theme:s,colorMode:o},null!=(n=null==c?void 0:c.defaultProps)?n:{},bt(function(e,t){const n={};return Object.keys(e).forEach((r=>{t.includes(r)||(n[r]=e[r])})),n}(a,["children"]))),d=(0,r.useRef)({});if(c){const e=function(e){return t=>{var n;const{variant:r,size:i,theme:a}=t,s=pt(a);return M({},w(null!=(n=e.baseStyle)?n:{},t),s(e,"sizes",i,t),s(e,"variants",r,t))}}(c),t=e(u);Mr(d.current,t)||(d.current=t)}return d.current}function Pr(e){return kr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Rr(e){return kr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Dr=["label","thickness","speed","emptyColor","className"];var Ir=_r({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Br=cr(((e,t)=>{const n=Pr("Spinner",e),r=ft(e),{label:i="Loading...",thickness:a="2px",speed:s="0.45s",emptyColor:o="transparent",className:l}=r,u=y(r,Dr),d=x("chakra-spinner",l),h=(0,c.A)({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:a,borderBottomColor:o,borderLeftColor:o,animation:"".concat(Ir," ").concat(s," linear infinite")},n);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t,__css:h,className:d},u),{},{children:i&&(0,ur.jsx)(lr.span,{srOnly:!0,children:i})}))}));Br.displayName="Spinner";const jr=["label","placement","spacing","children","className","__css"];function Fr(e){const{label:t,placement:n,spacing:i="0.5rem",children:a=(0,ur.jsx)(Br,{color:"currentColor",width:"1em",height:"1em"}),className:s,__css:o}=e,l=y(e,jr),u=x("chakra-button__spinner",s),d="start"===n?"marginEnd":"marginStart",h=(0,r.useMemo)((()=>(0,c.A)({display:"flex",alignItems:"center",position:t?"relative":"absolute",[d]:t?i:0,fontSize:"1em",lineHeight:"normal"},o)),[o,t,d,i]);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({className:u},l),{},{__css:h,children:a}))}function Lr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{!function(e,t){if(null!=e)if("function"!==typeof e)try{e.current=t}catch(n){throw new Error("Cannot assign value '".concat(t,"' to ref '").concat(e,"'"))}else e(t)}(t,e)}))}}function Or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)((()=>Lr(...t)),t)}Fr.displayName="ButtonSpinner";const Nr=["isDisabled","isLoading","isActive","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"];var zr=cr(((e,t)=>{const n=yr(),i=Pr("Button",(0,c.A)((0,c.A)({},n),e)),a=ft(e),{isDisabled:s=(null==n?void 0:n.isDisabled),isLoading:o,isActive:l,children:u,leftIcon:d,rightIcon:h,loadingText:p,iconSpacing:f="0.5rem",type:m,spinner:g,spinnerPlacement:v="start",className:b,as:w}=a,S=y(a,Nr),A=(0,r.useMemo)((()=>{const e=(0,c.A)((0,c.A)({},null==i?void 0:i._focus),{},{zIndex:1});return(0,c.A)((0,c.A)({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none"},i),!!n&&{_focus:e})}),[i,n]),{ref:E,type:C}=function(e){const[t,n]=(0,r.useState)(!e),i=(0,r.useCallback)((e=>{e&&n("BUTTON"===e.tagName)}),[]);return{ref:i,type:t?"button":void 0}}(w),M={rightIcon:h,leftIcon:d,iconSpacing:f,children:u};return(0,ur.jsxs)(lr.button,(0,c.A)((0,c.A)({ref:Or(t,E),as:w,type:null!=m?m:C,"data-active":_(l),"data-loading":_(o),__css:A,className:x("chakra-button",b)},S),{},{disabled:s||o,children:[o&&"start"===v&&(0,ur.jsx)(Fr,{className:"chakra-button__spinner--start",label:p,placement:"start",spacing:f,children:g}),o?p||(0,ur.jsx)(lr.span,{opacity:0,children:(0,ur.jsx)(Ur,(0,c.A)({},M))}):(0,ur.jsx)(Ur,(0,c.A)({},M)),o&&"end"===v&&(0,ur.jsx)(Fr,{className:"chakra-button__spinner--end",label:p,placement:"end",spacing:f,children:g})]}))}));function Ur(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:i}=e;return(0,ur.jsxs)(ur.Fragment,{children:[t&&(0,ur.jsx)(br,{marginEnd:i,children:t}),r,n&&(0,ur.jsx)(br,{marginStart:i,children:n})]})}zr.displayName="Button";const Hr=["className","isExternal"];var Gr=cr((function(e,t){const n=Pr("Link",e),r=ft(e),{className:i,isExternal:a}=r,s=y(r,Hr);return(0,ur.jsx)(lr.a,(0,c.A)((0,c.A)({target:a?"_blank":void 0,rel:a?"noopener":void 0,ref:t,className:x("chakra-link",i)},s),{},{__css:n}))}));Gr.displayName="Link";const Vr=["direction","align","justify","wrap","basis","grow","shrink"];var Wr=cr((function(e,t){const{direction:n,align:r,justify:i,wrap:a,basis:s,grow:o,shrink:l}=e,u=y(e,Vr),d={display:"flex",flexDirection:n,alignItems:r,justifyContent:i,flexWrap:a,flexBasis:s,flexGrow:o,flexShrink:l};return(0,ur.jsx)(lr.div,(0,c.A)({ref:t,__css:d},u))}));function qr(e){const t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}Wr.displayName="Flex";const Xr=["className","align","decoration","casing"];var Jr=cr((function(e,t){const n=Pr("Text",e),r=ft(e),{className:i,align:a,decoration:s,casing:o}=r,l=y(r,Xr),u=qr({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,ur.jsx)(lr.p,(0,c.A)((0,c.A)((0,c.A)({ref:t,className:x("chakra-text",e.className)},u),l),{},{__css:n}))}));Jr.displayName="Text";const Yr=["children","placeholder","className"];var Kr=cr((function(e,t){const{children:n,placeholder:r,className:i}=e,a=y(e,Yr);return(0,ur.jsxs)(lr.select,(0,c.A)((0,c.A)({},a),{},{ref:t,className:x("chakra-select",i),children:[r&&(0,ur.jsx)("option",{value:"",children:r}),n]}))}));Kr.displayName="SelectField";const Zr=["id","isRequired","isInvalid","isDisabled","isReadOnly"],Qr=["getRootProps","htmlProps"];var[$r,ei]=gr({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[ti,ni]=gr({strict:!1,name:"FormControlContext"});var ri=cr((function(e,t){const n=Rr("Form",e),i=function(e){const{id:t,isRequired:n,isInvalid:i,isDisabled:a,isReadOnly:s}=e,o=y(e,Zr),l=(0,r.useId)(),u=t||"field-".concat(l),d="".concat(u,"-label"),h="".concat(u,"-feedback"),p="".concat(u,"-helptext"),[f,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),w=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({id:p},e),{},{ref:Lr(t,(e=>{e&&v(!0)}))})}),[p]),S=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:t,"data-focus":_(x),"data-disabled":_(a),"data-invalid":_(i),"data-readonly":_(s),id:void 0!==e.id?e.id:d,htmlFor:void 0!==e.htmlFor?e.htmlFor:u})}),[u,a,x,i,s,d]),A=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({id:h},e),{},{ref:Lr(t,(e=>{e&&m(!0)})),"aria-live":"polite"})}),[h]),E=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)((0,c.A)({},e),o),{},{ref:t,role:"group","data-focus":_(x),"data-disabled":_(a),"data-invalid":_(i),"data-readonly":_(s)})}),[o,a,x,i,s]),C=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"})}),[]);return{isRequired:!!n,isInvalid:!!i,isReadOnly:!!s,isDisabled:!!a,isFocused:!!x,onFocus:()=>b(!0),onBlur:()=>b(!1),hasFeedbackText:f,setHasFeedbackText:m,hasHelpText:g,setHasHelpText:v,id:u,labelId:d,feedbackId:h,helpTextId:p,htmlProps:o,getHelpTextProps:w,getErrorMessageProps:A,getRootProps:E,getLabelProps:S,getRequiredIndicatorProps:C}}(ft(e)),{getRootProps:a,htmlProps:s}=i,o=y(i,Qr),l=x("chakra-form-control",e.className);return(0,ur.jsx)(ti,{value:o,children:(0,ur.jsx)($r,{value:n,children:(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},a({},t)),{},{className:l,__css:n.container}))})})}));ri.displayName="FormControl";var ii=cr((function(e,t){const n=ni(),r=ei(),i=x("chakra-form__helper-text",e.className);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},null==n?void 0:n.getHelpTextProps(e,t)),{},{__css:r.helperText,className:i}))}));ii.displayName="FormHelperText";const ai=["isDisabled","isInvalid","isReadOnly","isRequired"],si=["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"];function oi(e){const t=li(e),{isDisabled:n,isInvalid:r,isReadOnly:i,isRequired:a}=t,s=y(t,ai);return(0,c.A)((0,c.A)({},s),{},{disabled:n,readOnly:i,required:a,"aria-invalid":A(r),"aria-required":A(a),"aria-readonly":A(i)})}function li(e){var t,n,r;const i=ni(),{id:a,disabled:s,readOnly:o,required:l,isRequired:u,isInvalid:d,isReadOnly:h,isDisabled:p,onFocus:f,onBlur:m}=e,g=y(e,si),v=e["aria-describedby"]?[e["aria-describedby"]]:[];return(null==i?void 0:i.hasFeedbackText)&&(null==i?void 0:i.isInvalid)&&v.push(i.feedbackId),(null==i?void 0:i.hasHelpText)&&v.push(i.helpTextId),(0,c.A)((0,c.A)({},g),{},{"aria-describedby":v.join(" ")||void 0,id:null!=a?a:null==i?void 0:i.id,isDisabled:null!=(t=null!=s?s:p)?t:null==i?void 0:i.isDisabled,isReadOnly:null!=(n=null!=o?o:h)?n:null==i?void 0:i.isReadOnly,isRequired:null!=(r=null!=l?l:u)?r:null==i?void 0:i.isRequired,isInvalid:null!=d?d:null==i?void 0:i.isInvalid,onFocus:E(null==i?void 0:i.onFocus,f),onBlur:E(null==i?void 0:i.onBlur,m)})}const ci=["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize"],ui=["children"];var di=cr(((e,t)=>{var n;const r=Rr("Select",e),i=ft(e),{rootProps:a,placeholder:s,icon:o,color:l,height:u,h:d,minH:h,minHeight:p,iconColor:f,iconSize:m}=i,g=y(i,ci),[v,x]=function(e,t){const n={},r={};for(const[i,a]of Object.entries(e))t.includes(i)?n[i]=a:r[i]=a;return[n,r]}(g,rt),b=oi(x),w={width:"100%",height:"fit-content",position:"relative",color:l},S=(0,c.A)((0,c.A)({paddingEnd:"2rem"},r.field),{},{_focus:(0,c.A)({zIndex:"unset"},null==(n=r.field)?void 0:n._focus)});return(0,ur.jsxs)(lr.div,(0,c.A)((0,c.A)((0,c.A)({className:"chakra-select__wrapper",__css:w},v),a),{},{children:[(0,ur.jsx)(Kr,(0,c.A)((0,c.A)({ref:t,height:null!=d?d:u,minH:null!=h?h:p,placeholder:s},b),{},{__css:S,children:e.children})),(0,ur.jsx)(fi,(0,c.A)((0,c.A)((0,c.A)({"data-disabled":_(b.disabled)},(f||l)&&{color:f||l}),{},{__css:r.icon},m&&{fontSize:m}),{},{children:o}))]}))}));di.displayName="Select";var hi=e=>(0,ur.jsx)("svg",(0,c.A)((0,c.A)({viewBox:"0 0 24 24"},e),{},{children:(0,ur.jsx)("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})),pi=lr("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),fi=e=>{const{children:t=(0,ur.jsx)(hi,{})}=e,n=y(e,ui),i=(0,r.cloneElement)(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return(0,ur.jsx)(pi,(0,c.A)((0,c.A)({},n),{},{className:"chakra-select__icon-wrapper",children:(0,r.isValidElement)(t)?i:null}))};function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{timeout:t=300,preventDefault:n=(()=>!0)}=e,[i,a]=(0,r.useState)([]),s=(0,r.useRef)(),o=()=>{s.current&&(clearTimeout(s.current),s.current=null)};return(0,r.useEffect)((()=>o),[]),function(e){return r=>{if("Backspace"===r.key){const e=[...i];return e.pop(),void a(e)}if(function(e){const{key:t}=e;return 1===t.length||t.length>1&&/[^a-zA-Z0-9]/.test(t)}(r)){const l=i.concat(r.key);n(r)&&(r.preventDefault(),r.stopPropagation()),a(l),e(l.join("")),o(),s.current=setTimeout((()=>{a([]),s.current=null}),t)}}}}fi.displayName="SelectIcon";const gi=["ref","isDisabled","isFocusable","clickOnEnter","clickOnSpace","onMouseDown","onMouseUp","onClick","onKeyDown","onKeyUp","tabIndex","onMouseOver","onMouseLeave"];function vi(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return"INPUT"!==n&&"TEXTAREA"!==n&&!0!==r}function yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ref:t,isDisabled:n,isFocusable:i,clickOnEnter:a=!0,clickOnSpace:s=!0,onMouseDown:o,onMouseUp:l,onClick:u,onKeyDown:d,onKeyUp:h,tabIndex:p,onMouseOver:f,onMouseLeave:m}=e,g=y(e,gi),[v,x]=(0,r.useState)(!0),[b,w]=(0,r.useState)(!1),S=function(){const e=(0,r.useRef)(new Map),t=e.current,n=(0,r.useCallback)(((t,n,r,i)=>{e.current.set(r,{type:n,el:t,options:i}),t.addEventListener(n,r,i)}),[]),i=(0,r.useCallback)(((t,n,r,i)=>{t.removeEventListener(n,r,i),e.current.delete(r)}),[]);return(0,r.useEffect)((()=>()=>{t.forEach(((e,t)=>{i(e.el,e.type,t,e.options)}))}),[i,t]),{add:n,remove:i}}(),A=v?p:p||0,E=n&&!i,C=(0,r.useCallback)((e=>{if(n)return e.stopPropagation(),void e.preventDefault();e.currentTarget.focus(),null==u||u(e)}),[n,u]),M=(0,r.useCallback)((e=>{b&&vi(e)&&(e.preventDefault(),e.stopPropagation(),w(!1),S.remove(document,"keyup",M,!1))}),[b,S]),T=(0,r.useCallback)((e=>{if(null==d||d(e),n||e.defaultPrevented||e.metaKey)return;if(!vi(e.nativeEvent)||v)return;const t=a&&"Enter"===e.key;if(s&&" "===e.key&&(e.preventDefault(),w(!0)),t){e.preventDefault();e.currentTarget.click()}S.add(document,"keyup",M,!1)}),[n,v,d,a,s,S,M]),k=(0,r.useCallback)((e=>{if(null==h||h(e),n||e.defaultPrevented||e.metaKey)return;if(!vi(e.nativeEvent)||v)return;if(s&&" "===e.key){e.preventDefault(),w(!1);e.currentTarget.click()}}),[s,v,n,h]),P=(0,r.useCallback)((e=>{0===e.button&&(w(!1),S.remove(document,"mouseup",P,!1))}),[S]),R=(0,r.useCallback)((e=>{if(0!==e.button)return;if(n)return e.stopPropagation(),void e.preventDefault();v||w(!0);e.currentTarget.focus({preventScroll:!0}),S.add(document,"mouseup",P,!1),null==o||o(e)}),[n,v,o,S,P]),D=(0,r.useCallback)((e=>{0===e.button&&(v||w(!1),null==l||l(e))}),[l,v]),I=(0,r.useCallback)((e=>{n?e.preventDefault():null==f||f(e)}),[n,f]),B=(0,r.useCallback)((e=>{b&&(e.preventDefault(),w(!1)),null==m||m(e)}),[b,m]),j=Lr(t,(e=>{e&&"BUTTON"!==e.tagName&&x(!1)}));return v?(0,c.A)((0,c.A)({},g),{},{ref:j,type:"button","aria-disabled":E?void 0:n,disabled:E,onClick:C,onMouseDown:o,onMouseUp:l,onKeyUp:h,onKeyDown:d,onMouseOver:f,onMouseLeave:m}):(0,c.A)((0,c.A)({},g),{},{ref:j,role:"button","data-active":_(b),"aria-disabled":n?"true":void 0,tabIndex:E?void 0:A,onClick:C,onMouseDown:R,onMouseUp:D,onKeyUp:k,onKeyDown:T,onMouseOver:I,onMouseLeave:B})}var xi=Object.defineProperty,bi=(e,t,n)=>(((e,t,n)=>{t in e?xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);function wi(e){return e.sort(((e,t)=>{const n=e.compareDocumentPosition(t);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}))}function Si(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function _i(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var Ai="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,Ei=e=>e,Ci=class{constructor(){var e=this;bi(this,"descendants",new Map),bi(this,"register",(e=>{var t;if(null!=e)return"object"==typeof(t=e)&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE?this.registerNode(e):t=>{this.registerNode(t,e)}})),bi(this,"unregister",(e=>{this.descendants.delete(e);const t=wi(Array.from(this.descendants.keys()));this.assignIndex(t)})),bi(this,"destroy",(()=>{this.descendants.clear()})),bi(this,"assignIndex",(e=>{this.descendants.forEach((t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()}))})),bi(this,"count",(()=>this.descendants.size)),bi(this,"enabledCount",(()=>this.enabledValues().length)),bi(this,"values",(()=>Array.from(this.descendants.values()).sort(((e,t)=>e.index-t.index)))),bi(this,"enabledValues",(()=>this.values().filter((e=>!e.disabled)))),bi(this,"item",(e=>{if(0!==this.count())return this.values()[e]})),bi(this,"enabledItem",(e=>{if(0!==this.enabledCount())return this.enabledValues()[e]})),bi(this,"first",(()=>this.item(0))),bi(this,"firstEnabled",(()=>this.enabledItem(0))),bi(this,"last",(()=>this.item(this.descendants.size-1))),bi(this,"lastEnabled",(()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)})),bi(this,"indexOf",(e=>{var t,n;return e&&null!=(n=null==(t=this.descendants.get(e))?void 0:t.index)?n:-1})),bi(this,"enabledIndexOf",(e=>null==e?-1:this.enabledValues().findIndex((t=>t.node.isSameNode(e))))),bi(this,"next",(function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=Si(t,e.count(),n);return e.item(r)})),bi(this,"nextEnabled",(function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=e.item(t);if(!r)return;const i=Si(e.enabledIndexOf(r.node),e.enabledCount(),n);return e.enabledItem(i)})),bi(this,"prev",(function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=_i(t,e.count()-1,n);return e.item(r)})),bi(this,"prevEnabled",(function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=e.item(t);if(!r)return;const i=_i(e.enabledIndexOf(r.node),e.enabledCount()-1,n);return e.enabledItem(i)})),bi(this,"registerNode",((e,t)=>{if(!e||this.descendants.has(e))return;const n=wi(Array.from(this.descendants.keys()).concat(e));(null==t?void 0:t.disabled)&&(t.disabled=!!t.disabled);const r=(0,c.A)({node:e,index:-1},t);this.descendants.set(e,r),this.assignIndex(n)}))}};var[Mi,Ti]=gr({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function ki(){return[Ei(Mi),()=>Ei(Ti()),()=>function(){const e=(0,r.useRef)(new Ci);return Ai((()=>()=>e.current.destroy())),e.current}(),e=>function(e){const t=Ti(),[n,i]=(0,r.useState)(-1),a=(0,r.useRef)(null);Ai((()=>()=>{a.current&&t.unregister(a.current)}),[]),Ai((()=>{if(!a.current)return;const e=Number(a.current.dataset.index);n==e||Number.isNaN(e)||i(e)}));const s=Ei(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(a.current),register:Lr(s,a)}}(e)]}function Pi(e){return null!=e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function Ri(e){var t;if(!Pi(e))return!1;return e instanceof(null!=(t=e.ownerDocument.defaultView)?t:window).HTMLElement}function Di(e){return Pi(e)?e.ownerDocument:document}var Ii=e=>e.hasAttribute("tabindex"),Bi=e=>Ii(e)&&-1===e.tabIndex;function ji(e){return!(!e.parentElement||!ji(e.parentElement))||e.hidden}function Fi(e){if(!Ri(e)||ji(e)||function(e){return!0===Boolean(e.getAttribute("disabled"))||!0===Boolean(e.getAttribute("aria-disabled"))}(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const n={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in n?n[t]():!!function(e){const t=e.getAttribute("contenteditable");return"false"!==t&&null!=t}(e)||Ii(e)}function Li(e,t){const n=(0,r.useRef)(!1),i=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(n.current&&i.current)return e();i.current=!0}),t),(0,r.useEffect)((()=>(n.current=!0,()=>{n.current=!1})),[])}function Oi(e){const t=e.current;if(!t)return!1;const n=function(e){return Di(e).activeElement}(t);return!!n&&(!t.contains(n)&&!(!((r=n)&&Ri(r)&&Fi(r))||Bi(r)));var r}var Ni=(e,t)=>({var:e,varRef:t?"var(".concat(e,", ").concat(t,")"):"var(".concat(e,")")}),zi={arrowShadowColor:Ni("--popper-arrow-shadow-color"),arrowSize:Ni("--popper-arrow-size","8px"),arrowSizeHalf:Ni("--popper-arrow-size-half"),arrowBg:Ni("--popper-arrow-bg"),transformOrigin:Ni("--popper-transform-origin"),arrowOffset:Ni("--popper-arrow-offset")};var Ui={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},Hi={scroll:!0,resize:!0};function Gi(e){let t;return t="object"===typeof e?{enabled:!0,options:(0,c.A)((0,c.A)({},Hi),e)}:{enabled:e,options:Hi},t}var Vi={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{let{state:t}=e;t.styles.popper.width="".concat(t.rects.reference.width,"px")},effect:e=>{let{state:t}=e;return()=>{const e=t.elements.reference;t.elements.popper.style.width="".concat(e.offsetWidth,"px")}}},Wi={name:"transformOrigin",enabled:!0,phase:"write",fn:e=>{let{state:t}=e;qi(t)},effect:e=>{let{state:t}=e;return()=>{qi(t)}}},qi=e=>{var t;e.elements.popper.style.setProperty(zi.transformOrigin.var,(t=e.placement,Ui[t]))},Xi={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;Ji(t)}},Ji=e=>{var t;if(!e.placement)return;const n=Yi(e.placement);if((null==(t=e.elements)?void 0:t.arrow)&&n){Object.assign(e.elements.arrow.style,{[n.property]:n.value,width:zi.arrowSize.varRef,height:zi.arrowSize.varRef,zIndex:-1});const t={[zi.arrowSizeHalf.var]:"calc(".concat(zi.arrowSize.varRef," / 2 - 1px)"),[zi.arrowOffset.var]:"calc(".concat(zi.arrowSizeHalf.varRef," * -1)")};for(const n in t)e.elements.arrow.style.setProperty(n,t[n])}},Yi=e=>e.startsWith("top")?{property:"bottom",value:zi.arrowOffset.varRef}:e.startsWith("bottom")?{property:"top",value:zi.arrowOffset.varRef}:e.startsWith("left")?{property:"right",value:zi.arrowOffset.varRef}:e.startsWith("right")?{property:"left",value:zi.arrowOffset.varRef}:void 0,Ki={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:e=>{let{state:t}=e;Zi(t)},effect:e=>{let{state:t}=e;return()=>{Zi(t)}}},Zi=e=>{if(!e.elements.arrow)return;const t=e.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!t)return;const n=(r=e.placement).includes("top")?"1px 1px 0px 0 var(--popper-arrow-shadow-color)":r.includes("bottom")?"-1px -1px 0px 0 var(--popper-arrow-shadow-color)":r.includes("right")?"-1px 1px 0px 0 var(--popper-arrow-shadow-color)":r.includes("left")?"1px -1px 0px 0 var(--popper-arrow-shadow-color)":void 0;var r;n&&t.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(t.style,{transform:"rotate(45deg)",background:zi.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},Qi={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},$i={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function ea(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ta(e){return e instanceof ea(e).Element||e instanceof Element}function na(e){return e instanceof ea(e).HTMLElement||e instanceof HTMLElement}function ra(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ea(e).ShadowRoot||e instanceof ShadowRoot)}var ia=Math.max,aa=Math.min,sa=Math.round;function oa(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function la(){return!/^((?!chrome|android).)*safari/i.test(oa())}function ca(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&na(e)&&(i=e.offsetWidth>0&&sa(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&sa(r.height)/e.offsetHeight||1);var s=(ta(e)?ea(e):window).visualViewport,o=!la()&&n,l=(r.left+(o&&s?s.offsetLeft:0))/i,c=(r.top+(o&&s?s.offsetTop:0))/a,u=r.width/i,d=r.height/a;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function ua(e){var t=ea(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function da(e){return e?(e.nodeName||"").toLowerCase():null}function ha(e){return((ta(e)?e.ownerDocument:e.document)||window.document).documentElement}function pa(e){return ca(ha(e)).left+ua(e).scrollLeft}function fa(e){return ea(e).getComputedStyle(e)}function ma(e){var t=fa(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ga(e,t,n){void 0===n&&(n=!1);var r=na(t),i=na(t)&&function(e){var t=e.getBoundingClientRect(),n=sa(t.width)/e.offsetWidth||1,r=sa(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=ha(t),s=ca(e,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==da(t)||ma(a))&&(o=function(e){return e!==ea(e)&&na(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:ua(e);var t}(t)),na(t)?((l=ca(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=pa(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function va(e){var t=ca(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ya(e){return"html"===da(e)?e:e.assignedSlot||e.parentNode||(ra(e)?e.host:null)||ha(e)}function xa(e){return["html","body","#document"].indexOf(da(e))>=0?e.ownerDocument.body:na(e)&&ma(e)?e:xa(ya(e))}function ba(e,t){var n;void 0===t&&(t=[]);var r=xa(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=ea(r),s=i?[a].concat(a.visualViewport||[],ma(r)?r:[]):r,o=t.concat(s);return i?o:o.concat(ba(ya(s)))}function wa(e){return["table","td","th"].indexOf(da(e))>=0}function Sa(e){return na(e)&&"fixed"!==fa(e).position?e.offsetParent:null}function _a(e){for(var t=ea(e),n=Sa(e);n&&wa(n)&&"static"===fa(n).position;)n=Sa(n);return n&&("html"===da(n)||"body"===da(n)&&"static"===fa(n).position)?t:n||function(e){var t=/firefox/i.test(oa());if(/Trident/i.test(oa())&&na(e)&&"fixed"===fa(e).position)return null;var n=ya(e);for(ra(n)&&(n=n.host);na(n)&&["html","body"].indexOf(da(n))<0;){var r=fa(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var Aa="top",Ea="bottom",Ca="right",Ma="left",Ta="auto",ka=[Aa,Ea,Ca,Ma],Pa="start",Ra="end",Da="clippingParents",Ia="viewport",Ba="popper",ja="reference",Fa=ka.reduce((function(e,t){return e.concat([t+"-"+Pa,t+"-"+Ra])}),[]),La=[].concat(ka,[Ta]).reduce((function(e,t){return e.concat([t,t+"-"+Pa,t+"-"+Ra])}),[]),Oa=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Na(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function za(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Ua={placement:"bottom",modifiers:[],strategy:"absolute"};function Ha(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Ga(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?Ua:i;return function(e,t,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ua,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],o=!1,l={state:i,setOptions:function(n){var o="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},a,i.options,o),i.scrollParents={reference:ta(e)?ba(e):e.contextElement?ba(e.contextElement):[],popper:ba(t)};var u=function(e){var t=Na(e);return Oa.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var o=a({state:i,name:t,instance:l,options:r}),c=function(){};s.push(o||c)}})),l.update()},forceUpdate:function(){if(!o){var e=i.elements,t=e.reference,n=e.popper;if(Ha(t,n)){i.rects={reference:ga(t,_a(n),"fixed"===i.options.strategy),popper:va(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var a=i.orderedModifiers[r],s=a.fn,c=a.options,u=void 0===c?{}:c,d=a.name;"function"===typeof s&&(i=s({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:za((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),o=!0}};if(!Ha(e,t))return l;function c(){s.forEach((function(e){return e()})),s=[]}return l.setOptions(n).then((function(e){!o&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var Va={passive:!0};const Wa={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,s=r.resize,o=void 0===s||s,l=ea(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,Va)})),o&&l.addEventListener("resize",n.update,Va),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Va)})),o&&l.removeEventListener("resize",n.update,Va)}},data:{}};function qa(e){return e.split("-")[0]}function Xa(e){return e.split("-")[1]}function Ja(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ya(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?qa(i):null,s=i?Xa(i):null,o=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case Aa:t={x:o,y:n.y-r.height};break;case Ea:t={x:o,y:n.y+n.height};break;case Ca:t={x:n.x+n.width,y:l};break;case Ma:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?Ja(a):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case Pa:t[c]=t[c]-(n[u]/2-r[u]/2);break;case Ra:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}const Ka={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Ya({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var Za={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qa(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=s.x,p=void 0===h?0:h,f=s.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),x=Ma,b=Aa,w=window;if(c){var S=_a(n),_="clientHeight",A="clientWidth";if(S===ea(n)&&"static"!==fa(S=ha(n)).position&&"absolute"===o&&(_="scrollHeight",A="scrollWidth"),i===Aa||(i===Ma||i===Ca)&&a===Ra)b=Ea,m-=(d&&S===w&&w.visualViewport?w.visualViewport.height:S[_])-r.height,m*=l?1:-1;if(i===Ma||(i===Aa||i===Ea)&&a===Ra)x=Ca,p-=(d&&S===w&&w.visualViewport?w.visualViewport.width:S[A])-r.width,p*=l?1:-1}var E,C=Object.assign({position:o},c&&Za),M=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:sa(n*i)/i||0,y:sa(r*i)/i||0}}({x:p,y:m},ea(n)):{x:p,y:m};return p=M.x,m=M.y,l?Object.assign({},C,((E={})[b]=y?"0":"",E[x]=v?"0":"",E.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",E)):Object.assign({},C,((t={})[b]=y?m+"px":"",t[x]=v?p+"px":"",t.transform="",t))}const $a={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,s=void 0===a||a,o=n.roundOffsets,l=void 0===o||o,c={placement:qa(t.placement),variation:Xa(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Qa(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Qa(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};const es={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];na(i)&&da(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});na(r)&&da(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const ts={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,s=La.reduce((function(e,n){return e[n]=function(e,t,n){var r=qa(e),i=[Ma,Aa].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=a[0],o=a[1];return s=s||0,o=(o||0)*i,[Ma,Ca].indexOf(r)>=0?{x:o,y:s}:{x:s,y:o}}(n,t.rects,a),e}),{}),o=s[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}};var ns={left:"right",right:"left",bottom:"top",top:"bottom"};function rs(e){return e.replace(/left|right|bottom|top/g,(function(e){return ns[e]}))}var is={start:"end",end:"start"};function as(e){return e.replace(/start|end/g,(function(e){return is[e]}))}function ss(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ra(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function os(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ls(e,t,n){return t===Ia?os(function(e,t){var n=ea(e),r=ha(e),i=n.visualViewport,a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;var c=la();(c||!c&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o+pa(e),y:l}}(e,n)):ta(t)?function(e,t){var n=ca(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):os(function(e){var t,n=ha(e),r=ua(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=ia(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=ia(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+pa(e),l=-r.scrollTop;return"rtl"===fa(i||n).direction&&(o+=ia(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}(ha(e)))}function cs(e,t,n,r){var i="clippingParents"===t?function(e){var t=ba(ya(e)),n=["absolute","fixed"].indexOf(fa(e).position)>=0&&na(e)?_a(e):e;return ta(n)?t.filter((function(e){return ta(e)&&ss(e,n)&&"body"!==da(e)})):[]}(e):[].concat(t),a=[].concat(i,[n]),s=a[0],o=a.reduce((function(t,n){var i=ls(e,n,r);return t.top=ia(i.top,t.top),t.right=aa(i.right,t.right),t.bottom=aa(i.bottom,t.bottom),t.left=ia(i.left,t.left),t}),ls(e,s,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function us(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ds(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function hs(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,s=void 0===a?e.strategy:a,o=n.boundary,l=void 0===o?Da:o,c=n.rootBoundary,u=void 0===c?Ia:c,d=n.elementContext,h=void 0===d?Ba:d,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=us("number"!==typeof g?g:ds(g,ka)),y=h===Ba?ja:Ba,x=e.rects.popper,b=e.elements[f?y:h],w=cs(ta(b)?b:b.contextElement||ha(e.elements.popper),l,u,s),S=ca(e.elements.reference),_=Ya({reference:S,element:x,strategy:"absolute",placement:i}),A=os(Object.assign({},x,_)),E=h===Ba?A:S,C={top:w.top-E.top+v.top,bottom:E.bottom-w.bottom+v.bottom,left:w.left-E.left+v.left,right:E.right-w.right+v.right},M=e.modifiersData.offset;if(h===Ba&&M){var T=M[i];Object.keys(C).forEach((function(e){var t=[Ca,Ea].indexOf(e)>=0?1:-1,n=[Aa,Ea].indexOf(e)>=0?"y":"x";C[e]+=T[n]*t}))}return C}const ps={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,s=n.altAxis,o=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=qa(g),y=l||(v===g||!f?[rs(g)]:function(e){if(qa(e)===Ta)return[];var t=rs(e);return[as(e),t,as(t)]}(g)),x=[g].concat(y).reduce((function(e,n){return e.concat(qa(n)===Ta?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,s=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?La:l,u=Xa(r),d=u?o?Fa:Fa.filter((function(e){return Xa(e)===u})):ka,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=hs(e,{placement:n,boundary:i,rootBoundary:a,padding:s})[qa(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),b=t.rects.reference,w=t.rects.popper,S=new Map,_=!0,A=x[0],E=0;E<x.length;E++){var C=x[E],M=qa(C),T=Xa(C)===Pa,k=[Aa,Ea].indexOf(M)>=0,P=k?"width":"height",R=hs(t,{placement:C,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),D=k?T?Ca:Ma:T?Ea:Aa;b[P]>w[P]&&(D=rs(D));var I=rs(D),B=[];if(a&&B.push(R[M]<=0),o&&B.push(R[D]<=0,R[I]<=0),B.every((function(e){return e}))){A=C,_=!1;break}S.set(C,B)}if(_)for(var j=function(e){var t=x.find((function(t){var n=S.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},F=f?3:1;F>0;F--){if("break"===j(F))break}t.placement!==A&&(t.modifiersData[r]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function fs(e,t,n){return ia(e,aa(t,n))}const ms={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,s=n.altAxis,o=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=hs(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=qa(t.placement),y=Xa(t.placement),x=!y,b=Ja(v),w="x"===b?"y":"x",S=t.modifiersData.popperOffsets,_=t.rects.reference,A=t.rects.popper,E="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,C="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),M=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(S){if(a){var k,P="y"===b?Aa:Ma,R="y"===b?Ea:Ca,D="y"===b?"height":"width",I=S[b],B=I+g[P],j=I-g[R],F=p?-A[D]/2:0,L=y===Pa?_[D]:A[D],O=y===Pa?-A[D]:-_[D],N=t.elements.arrow,z=p&&N?va(N):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=U[P],G=U[R],V=fs(0,_[D],z[D]),W=x?_[D]/2-F-V-H-C.mainAxis:L-V-H-C.mainAxis,q=x?-_[D]/2+F+V+G+C.mainAxis:O+V+G+C.mainAxis,X=t.elements.arrow&&_a(t.elements.arrow),J=X?"y"===b?X.clientTop||0:X.clientLeft||0:0,Y=null!=(k=null==M?void 0:M[b])?k:0,K=I+q-Y,Z=fs(p?aa(B,I+W-Y-J):B,I,p?ia(j,K):j);S[b]=Z,T[b]=Z-I}if(o){var Q,$="x"===b?Aa:Ma,ee="x"===b?Ea:Ca,te=S[w],ne="y"===w?"height":"width",re=te+g[$],ie=te-g[ee],ae=-1!==[Aa,Ma].indexOf(v),se=null!=(Q=null==M?void 0:M[w])?Q:0,oe=ae?re:te-_[ne]-A[ne]-se+C.altAxis,le=ae?te+_[ne]+A[ne]-se-C.altAxis:ie,ce=p&&ae?function(e,t,n){var r=fs(e,t,n);return r>n?n:r}(oe,te,le):fs(p?oe:re,te,p?le:ie);S[w]=ce,T[w]=ce-te}t.modifiersData[r]=T}},requiresIfExists:["offset"]};const gs={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,s=n.modifiersData.popperOffsets,o=qa(n.placement),l=Ja(o),c=[Ma,Ca].indexOf(o)>=0?"height":"width";if(a&&s){var u=function(e,t){return us("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ds(e,ka))}(i.padding,n),d=va(a),h="y"===l?Aa:Ma,p="y"===l?Ea:Ca,f=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=_a(a),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,x=u[h],b=v-d[c]-u[p],w=v/2-d[c]/2+y,S=fs(x,w,b),_=l;n.modifiersData[r]=((t={})[_]=S,t.centerOffset=S-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&ss(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vs(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ys(e){return[Aa,Ca,Ea,Ma].some((function(t){return e[t]>=0}))}const xs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,s=hs(t,{elementContext:"reference"}),o=hs(t,{altBoundary:!0}),l=vs(s,r),c=vs(o,i,a),u=ys(l),d=ys(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}};var bs=Ga({defaultModifiers:[Wa,Ka,$a,es,ts,ps,ms,gs,xs]});const ws=["size","shadowColor","bg","style"];function Ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{enabled:t=!0,modifiers:n,placement:i="bottom",strategy:a="absolute",arrowPadding:s=8,eventListeners:o=!0,offset:l,gutter:u=8,flip:d=!0,boundary:h="clippingParents",preventOverflow:p=!0,matchWidth:f,direction:m="ltr"}=e,g=(0,r.useRef)(null),v=(0,r.useRef)(null),x=(0,r.useRef)(null),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ltr";var n,r;const i=(null==(n=Qi[e])?void 0:n[t])||e;return"ltr"===t?i:null!=(r=$i[e])?r:i}(i,m),w=(0,r.useRef)((()=>{})),S=(0,r.useCallback)((()=>{var e;t&&g.current&&v.current&&(null==(e=w.current)||e.call(w),x.current=bs(g.current,v.current,{placement:b,modifiers:[Ki,Xi,Wi,(0,c.A)((0,c.A)({},Vi),{},{enabled:!!f}),(0,c.A)({name:"eventListeners"},Gi(o)),{name:"arrow",options:{padding:s}},{name:"offset",options:{offset:null!=l?l:[0,u]}},{name:"flip",enabled:!!d,options:{padding:8}},{name:"preventOverflow",enabled:!!p,options:{boundary:h}},...null!=n?n:[]],strategy:a}),x.current.forceUpdate(),w.current=x.current.destroy)}),[b,t,n,f,o,s,l,u,d,p,h,a]);(0,r.useEffect)((()=>()=>{var e;g.current||v.current||(null==(e=x.current)||e.destroy(),x.current=null)}),[]);const _=(0,r.useCallback)((e=>{g.current=e,S()}),[S]),A=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:Lr(_,t)})}),[_]),E=(0,r.useCallback)((e=>{v.current=e,S()}),[S]),C=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:Lr(E,t),style:(0,c.A)((0,c.A)({},e.style),{},{position:a,minWidth:f?void 0:"max-content",inset:"0 auto auto 0"})})}),[a,E,f]),M=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{size:n,shadowColor:r,bg:i,style:a}=e,s=y(e,ws);return(0,c.A)((0,c.A)({},s),{},{ref:t,"data-popper-arrow":"",style:_s(e)})}),[]),T=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:t,"data-popper-arrow-inner":""})}),[]);return{update(){var e;null==(e=x.current)||e.update()},forceUpdate(){var e;null==(e=x.current)||e.forceUpdate()},transformOrigin:zi.transformOrigin.varRef,referenceRef:_,popperRef:E,getPopperProps:C,getArrowProps:M,getArrowInnerProps:T,getReferenceProps:A}}function _s(e){const{size:t,shadowColor:n,bg:r,style:i}=e,a=(0,c.A)((0,c.A)({},i),{},{position:"absolute"});return t&&(a["--popper-arrow-size"]=t),n&&(a["--popper-arrow-shadow-color"]=n),r&&(a["--popper-arrow-bg"]=r),a}function As(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,r.useRef)(e);return(0,r.useEffect)((()=>{n.current=e})),(0,r.useCallback)((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null==(e=n.current)?void 0:e.call(n,...r)}),t)}function Es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClose:t,onOpen:n,isOpen:i,id:a}=e,s=As(n),o=As(t),[l,u]=(0,r.useState)(e.defaultIsOpen||!1),d=void 0!==i?i:l,h=void 0!==i,p=(0,r.useId)(),f=null!=a?a:"disclosure-".concat(p),m=(0,r.useCallback)((()=>{h||u(!1),null==o||o()}),[h,o]),g=(0,r.useCallback)((()=>{h||u(!0),null==s||s()}),[h,s]),v=(0,r.useCallback)((()=>{d?m():g()}),[d,g,m]);return{isOpen:d,onOpen:g,onClose:m,onToggle:v,isControlled:h,getButtonProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.A)((0,c.A)({},e),{},{"aria-expanded":d,"aria-controls":f,onClick(t){var n;null==(n=e.onClick)||n.call(e,t),v()}})},getDisclosureProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.A)((0,c.A)({},e),{},{hidden:!d,id:f})}}}function Cs(e,t){var n;const r=e.target;if(r){if(!Ms(r).contains(r))return!1}return!(null==(n=t.current)?void 0:n.contains(r))}function Ms(e){var t;return null!=(t=null==e?void 0:e.ownerDocument)?t:document}function Ts(e,t,n,i){const a=As(n);return(0,r.useEffect)((()=>{const r="function"===typeof e?e():null!=e?e:document;if(n&&r)return r.addEventListener(t,a,i),()=>{r.removeEventListener(t,a,i)}}),[t,e,i,a,n]),()=>{const n="function"===typeof e?e():null!=e?e:document;null==n||n.removeEventListener(t,a,i)}}function ks(e){const{isOpen:t,ref:n}=e,[i,a]=(0,r.useState)(t),[s,o]=(0,r.useState)(!1);(0,r.useEffect)((()=>{s||(a(t),o(!0))}),[t,s,i]),Ts((()=>n.current),"animationend",(()=>{a(t)}));return{present:!(!t&&!i),onComplete(){var e;const t=function(e){var t,n;return null!=(n=null==(t=Di(e))?void 0:t.defaultView)?n:window}(n.current),r=new t.CustomEvent("animationend",{bubbles:!0});null==(e=n.current)||e.dispatchEvent(r)}}}function Ps(e){const{wasSelected:t,enabled:n,isSelected:r,mode:i="unmount"}=e;return!n||(!!r||!("keepMounted"!==i||!t))}const Rs=["id","closeOnSelect","closeOnBlur","initialFocusRef","autoSelect","isLazy","isOpen","defaultIsOpen","onClose","onOpen","placement","lazyBehavior","direction","computePositionOnMount"],Ds=["onMouseEnter","onMouseMove","onMouseLeave","onClick","onFocus","isDisabled","isFocusable","closeOnSelect","type"];var[Is,Bs,js,Fs]=ki(),[Ls,Os]=gr({strict:!1,name:"MenuContext"});function Ns(e){var t;return null!=(t=null==e?void 0:e.ownerDocument)?t:document}function zs(e){return Ns(e).activeElement===e}function Us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t,closeOnSelect:n=!0,closeOnBlur:i=!0,initialFocusRef:a,autoSelect:s=!0,isLazy:o,isOpen:l,defaultIsOpen:u,onClose:d,onOpen:h,placement:p="bottom-start",lazyBehavior:f="unmount",direction:m,computePositionOnMount:g=!1}=e,v=y(e,Rs),x=(0,r.useRef)(null),b=(0,r.useRef)(null),w=js(),S=(0,r.useCallback)((()=>{requestAnimationFrame((()=>{var e;null==(e=x.current)||e.focus({preventScroll:!1})}))}),[]),_=(0,r.useCallback)((()=>{const e=setTimeout((()=>{var e;if(a)null==(e=a.current)||e.focus();else{const e=w.firstEnabled();e&&D(e.index)}}));L.current.add(e)}),[w,a]),A=(0,r.useCallback)((()=>{const e=setTimeout((()=>{const e=w.lastEnabled();e&&D(e.index)}));L.current.add(e)}),[w]),E=(0,r.useCallback)((()=>{null==h||h(),s?_():S()}),[s,_,S,h]),{isOpen:C,onOpen:M,onClose:T,onToggle:k}=Es({isOpen:l,defaultIsOpen:u,onClose:d,onOpen:E});!function(e){const{ref:t,handler:n,enabled:i=!0}=e,a=As(n),s=(0,r.useRef)({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;(0,r.useEffect)((()=>{if(!i)return;const e=e=>{Cs(e,t)&&(s.isPointerDown=!0)},r=e=>{s.ignoreEmulatedMouseEvents?s.ignoreEmulatedMouseEvents=!1:s.isPointerDown&&n&&Cs(e,t)&&(s.isPointerDown=!1,a(e))},o=e=>{s.ignoreEmulatedMouseEvents=!0,n&&s.isPointerDown&&Cs(e,t)&&(s.isPointerDown=!1,a(e))},l=Ms(t.current);return l.addEventListener("mousedown",e,!0),l.addEventListener("mouseup",r,!0),l.addEventListener("touchstart",e,!0),l.addEventListener("touchend",o,!0),()=>{l.removeEventListener("mousedown",e,!0),l.removeEventListener("mouseup",r,!0),l.removeEventListener("touchstart",e,!0),l.removeEventListener("touchend",o,!0)}}),[n,t,a,s,i])}({enabled:C&&i,ref:x,handler:e=>{var t;(null==(t=b.current)?void 0:t.contains(e.target))||T()}});const P=Ss((0,c.A)((0,c.A)({},v),{},{enabled:C||g,placement:p,direction:m})),[R,D]=(0,r.useState)(-1);Li((()=>{C||D(-1)}),[C]),function(e,t){const{shouldFocus:n,visible:r,focusRef:i}=t,a=n&&!r;Li((()=>{if(!a)return;if(Oi(e))return;const t=(null==i?void 0:i.current)||e.current;let n;return t?(n=requestAnimationFrame((()=>{t.focus({preventScroll:!0})})),()=>{cancelAnimationFrame(n)}):void 0}),[a,e,i])}(x,{focusRef:b,visible:C,shouldFocus:!0});const I=ks({isOpen:C,ref:x}),[B,j]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const a=(0,r.useId)(),s=e||a;return(0,r.useMemo)((()=>n.map((e=>"".concat(e,"-").concat(s)))),[s,n])}(t,"menu-button","menu-list"),F=(0,r.useCallback)((()=>{M(),S()}),[M,S]),L=(0,r.useRef)(new Set([]));(0,r.useEffect)((()=>{const e=L.current;return()=>{e.forEach((e=>clearTimeout(e))),e.clear()}}),[]);const O=(0,r.useCallback)((()=>{M(),_()}),[_,M]),N=(0,r.useCallback)((()=>{M(),A()}),[M,A]),z=(0,r.useCallback)((()=>{var e,t;const n=Ns(x.current),r=null==(e=x.current)?void 0:e.contains(n.activeElement);if(!(C&&!r))return;const i=null==(t=w.item(R))?void 0:t.node;null==i||i.focus({preventScroll:!0})}),[C,R,w]),U=(0,r.useRef)(null);return{openAndFocusMenu:F,openAndFocusFirstItem:O,openAndFocusLastItem:N,onTransitionEnd:z,unstable__animationState:I,descendants:w,popper:P,buttonId:B,menuId:j,forceUpdate:P.forceUpdate,orientation:"vertical",isOpen:C,onToggle:k,onOpen:M,onClose:T,menuRef:x,buttonRef:b,focusedIndex:R,closeOnSelect:n,closeOnBlur:i,autoSelect:s,setFocusedIndex:D,isLazy:o,lazyBehavior:f,initialFocusRef:a,rafId:U}}function Hs(e){var t;return function(e){var t;if(!function(e){return null!=e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}(e))return!1;const n=null!=(t=e.ownerDocument.defaultView)?t:window;return e instanceof n.HTMLElement}(e)&&!!(null==(t=null==e?void 0:e.getAttribute("role"))?void 0:t.startsWith("menuitem"))}function Gs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{onMouseEnter:n,onMouseMove:i,onMouseLeave:a,onClick:s,onFocus:o,isDisabled:l,isFocusable:u,closeOnSelect:d,type:h}=e,p=y(e,Ds),f=Os(),{setFocusedIndex:m,focusedIndex:g,closeOnSelect:v,onClose:x,menuRef:b,isOpen:w,menuId:S,rafId:_}=f,A=(0,r.useRef)(null),E="".concat(S,"-menuitem-").concat((0,r.useId)()),{index:C,register:M}=Fs({disabled:l&&!u}),T=(0,r.useCallback)((e=>{null==n||n(e),l||m(C)}),[m,C,l,n]),k=(0,r.useCallback)((e=>{null==i||i(e),A.current&&!zs(A.current)&&T(e)}),[T,i]),P=(0,r.useCallback)((e=>{null==a||a(e),l||m(-1)}),[m,l,a]),R=(0,r.useCallback)((e=>{null==s||s(e),Hs(e.currentTarget)&&(null!=d?d:v)&&x()}),[x,s,v,d]),D=(0,r.useCallback)((e=>{null==o||o(e),m(C)}),[m,o,C]),I=C===g,B=l&&!u;Li((()=>{if(w)return I&&!B&&A.current?(_.current&&cancelAnimationFrame(_.current),_.current=requestAnimationFrame((()=>{var e;null==(e=A.current)||e.focus({preventScroll:!0}),_.current=null}))):b.current&&!zs(b.current)&&b.current.focus({preventScroll:!0}),()=>{_.current&&cancelAnimationFrame(_.current)}}),[I,B,b,w]);const j=yi({onClick:R,onFocus:D,onMouseEnter:T,onMouseMove:k,onMouseLeave:P,ref:Lr(M,A,t),isDisabled:l,isFocusable:u});return(0,c.A)((0,c.A)((0,c.A)({},p),j),{},{type:null!=h?h:j.type,id:E,role:"menuitem",tabIndex:I?0:-1})}const Vs=["descendants"];var[Ws,qs]=gr({name:"MenuStylesContext",errorMessage:"useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Menu />\" "}),Xs=e=>{const{children:t}=e,n=Rr("Menu",e),i=ft(e),{direction:a}=Ar(),s=Us((0,c.A)((0,c.A)({},i),{},{direction:a})),{descendants:o}=s,l=y(s,Vs),u=(0,r.useMemo)((()=>l),[l]),{isOpen:d,onClose:h,forceUpdate:p}=u;return(0,ur.jsx)(Is,{value:o,children:(0,ur.jsx)(Ls,{value:u,children:(0,ur.jsx)(Ws,{value:n,children:w(t,{isOpen:d,onClose:h,forceUpdate:p})})})})};Xs.displayName="Menu";const Js=["children","as"];var Ys=cr(((e,t)=>{const n=qs();return(0,ur.jsx)(lr.button,(0,c.A)((0,c.A)({ref:t},e),{},{__css:(0,c.A)({display:"inline-flex",appearance:"none",alignItems:"center",outline:0},n.button)}))})),Ks=cr(((e,t)=>{const{children:n,as:i}=e,a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Os(),{onToggle:i,popper:a,openAndFocusFirstItem:s,openAndFocusLastItem:o}=n,l=(0,r.useCallback)((e=>{const t=e.key,n={Enter:s,ArrowDown:s,ArrowUp:o}[t];n&&(e.preventDefault(),e.stopPropagation(),n(e))}),[s,o]);return(0,c.A)((0,c.A)({},e),{},{ref:Lr(n.buttonRef,t,a.referenceRef),id:n.buttonId,"data-active":_(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:E(e.onClick,i),onKeyDown:E(e.onKeyDown,l)})}(y(e,Js),t),s=i||Ys;return(0,ur.jsx)(s,(0,c.A)((0,c.A)({},a),{},{className:x("chakra-menu__menu-button",e.className),children:(0,ur.jsx)(lr.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:e.children})}))}));Ks.displayName="MenuButton";const Zs=["icon","children","isRound","aria-label"];var Qs=cr(((e,t)=>{const{icon:n,children:i,isRound:a,"aria-label":s}=e,o=y(e,Zs),l=n||i,u=(0,r.isValidElement)(l)?(0,r.cloneElement)(l,{"aria-hidden":!0,focusable:!1}):null;return(0,ur.jsx)(zr,(0,c.A)((0,c.A)({padding:"0",borderRadius:a?"full":void 0,ref:t,"aria-label":s},o),{},{children:u}))}));Qs.displayName="IconButton";var $s=e=>(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({className:"chakra-stack__item"},e),{},{__css:(0,c.A)({display:"inline-block",flex:"0 0 auto",minWidth:0},e.__css)}));$s.displayName="StackItem";var eo=Object.freeze(["base","sm","md","lg","xl","2xl"]);function to(e,t){return Array.isArray(e)?e.map((e=>null===e?null:t(e))):b(e)?Object.keys(e).reduce(((n,r)=>(n[r]=t(e[r]),n)),{}):null!=e?t(e):null}function no(e){return r.Children.toArray(e).filter((e=>(0,r.isValidElement)(e)))}const ro=["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"];var io=cr(((e,t)=>{const{isInline:n,direction:i,align:a,justify:s,spacing:o="0.5rem",wrap:l,children:u,divider:d,className:h,shouldWrapChildren:p}=e,f=y(e,ro),m=n?"row":null!=i?i:"column",g=(0,r.useMemo)((()=>function(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":to(n,(e=>r[e]))}}({spacing:o,direction:m})),[o,m]),v=!!d,b=!p&&!v,w=(0,r.useMemo)((()=>{const e=no(u);return b?e:e.map(((t,n)=>{const i="undefined"!==typeof t.key?t.key:n,a=n+1===e.length,s=p?(0,ur.jsx)($s,{children:t},i):t;if(!v)return s;const o=(0,r.cloneElement)(d,{__css:g}),l=a?null:o;return(0,ur.jsxs)(r.Fragment,{children:[s,l]},i)}))}),[d,g,v,b,p,u]),S=x("chakra-stack",h);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t,display:"flex",alignItems:a,justifyContent:s,flexDirection:m,flexWrap:l,gap:v?void 0:o,className:S},f),{},{children:w}))}));io.displayName="Stack";var ao=cr(((e,t)=>(0,ur.jsx)(io,(0,c.A)((0,c.A)({align:"center"},e),{},{direction:"row",ref:t}))));ao.displayName="HStack";const so=["className"];var oo=cr((function(e,t){const n=Pr("Badge",e),r=ft(e),{className:i}=r,a=y(r,so);return(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({ref:t,className:x("chakra-badge",e.className)},a),{},{__css:(0,c.A)({display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle"},n)}))}));oo.displayName="Badge";const lo=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),co=(0,r.createContext)({}),uo=(0,r.createContext)(null),ho="undefined"!==typeof document,po=ho?r.useLayoutEffect:r.useEffect,fo=(0,r.createContext)({strict:!1}),mo=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),go="data-"+mo("framerAppearId"),vo=!1,yo=!1;class xo{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const bo=["prepare","read","update","preRender","render","postRender"];function wo(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=bo.reduce(((e,t)=>(e[t]=function(e){let t=new xo,n=new xo,r=0,i=!1,a=!1;const s=new WeakSet,o={schedule:function(e){const a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,o=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),o.add(e)&&a&&i&&(r=t.order.length),e},cancel:e=>{n.remove(e),s.delete(e)},process:l=>{if(i)a=!0;else{if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];s.has(r)&&(o.schedule(r),e()),r(l)}i=!1,a&&(a=!1,o.process(l))}}};return o}((()=>n=!0)),e)),{}),s=e=>{a[e].process(i)},o=()=>{const a=yo?i.timestamp:performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(a-i.timestamp,40),1),i.timestamp=a,i.isProcessing=!0,bo.forEach(s),i.isProcessing=!1,n&&t&&(r=!1,e(o))},l=bo.reduce(((t,s)=>{const l=a[s];return t[s]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(o)),l.schedule(t,a,s)},t}),{});return{schedule:l,cancel:e=>bo.forEach((t=>a[t].cancel(e))),state:i,steps:a}}const{schedule:So,cancel:_o}=wo(queueMicrotask,!1);function Ao(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Eo(e){return"string"===typeof e||Array.isArray(e)}function Co(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const Mo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],To=["initial",...Mo];function ko(e){return Co(e.animate)||To.some((t=>Eo(e[t])))}function Po(e){return Boolean(ko(e)||e.variants)}function Ro(e){const{initial:t,animate:n}=function(e,t){if(ko(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Eo(t)?t:void 0,animate:Eo(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(co));return(0,r.useMemo)((()=>({initial:t,animate:n})),[Do(t),Do(n)])}function Do(e){return Array.isArray(e)?e.join(" "):e}const Io={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const Qie in Io)Bo[Qie]={isEnabled:e=>Io[Qie].some((t=>!!e[t]))};const jo=(0,r.createContext)({}),Fo=(0,r.createContext)({}),Lo=Symbol.for("motionComponentSymbol");function Oo(e){let{preloadedFeatures:t,createVisualElement:n,useRender:i,useVisualState:a,Component:s}=e;t&&function(e){for(const t in e)Bo[t]=(0,c.A)((0,c.A)({},Bo[t]),e[t])}(t);const o=(0,r.forwardRef)((function(e,o){let l;const u=(0,c.A)((0,c.A)((0,c.A)({},(0,r.useContext)(lo)),e),{},{layoutId:No(e)}),{isStatic:d}=u,h=Ro(e),p=a(e,d);if(!d&&ho){h.visualElement=function(e,t,n,i){const{visualElement:a}=(0,r.useContext)(co),s=(0,r.useContext)(fo),o=(0,r.useContext)(uo),l=(0,r.useContext)(lo).reducedMotion,c=(0,r.useRef)();i=i||s.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:a,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const u=c.current;(0,r.useInsertionEffect)((()=>{u&&u.update(n,o)}));const d=(0,r.useRef)(Boolean(n[go]&&!window.HandoffComplete));return po((()=>{u&&(So.postRender(u.render),d.current&&u.animationState&&u.animationState.animateChanges())})),(0,r.useEffect)((()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))})),u}(s,p,u,n);const e=(0,r.useContext)(Fo),i=(0,r.useContext)(fo).strict;h.visualElement&&(l=h.visualElement.loadFeatures(u,i,t,e))}return r.createElement(co.Provider,{value:h},l&&h.visualElement?r.createElement(l,(0,c.A)({visualElement:h.visualElement},u)):null,i(s,e,function(e,t,n){return(0,r.useCallback)((r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):Ao(n)&&(n.current=r))}),[t])}(p,h.visualElement,o),p,d,h.visualElement))}));return o[Lo]=s,o}function No(e){let{layoutId:t}=e;const n=(0,r.useContext)(jo).id;return n&&void 0!==t?n+"-"+t:t}function zo(e){function t(t){return Oo(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const Uo=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ho(e){return"string"===typeof e&&!e.includes("-")&&!!(Uo.indexOf(e)>-1||/[A-Z]/.test(e))}const Go={};const Vo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wo=new Set(Vo);function qo(e,t){let{layout:n,layoutId:r}=t;return Wo.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Go[e]||"opacity"===e)}const Xo=e=>Boolean(e&&e.getVelocity),Jo={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Yo=Vo.length;const Ko=e=>t=>"string"===typeof t&&t.startsWith(e),Zo=Ko("--"),Qo=Ko("var(--"),$o=e=>Qo(e)&&el.test(e),el=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)$/i,tl=(e,t)=>t&&"number"===typeof e?t.transform(e):e,nl=(e,t,n)=>n>t?t:n<e?e:n,rl={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},il=(0,c.A)((0,c.A)({},rl),{},{transform:e=>nl(0,1,e)}),al=(0,c.A)((0,c.A)({},rl),{},{default:1}),sl=e=>Math.round(1e5*e)/1e5,ol=/(-)?([\d]*\.?[\d])+/g,ll=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,cl=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ul(e){return"string"===typeof e}const dl=e=>({test:t=>ul(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),hl=dl("deg"),pl=dl("%"),fl=dl("px"),ml=dl("vh"),gl=dl("vw"),vl=(0,c.A)((0,c.A)({},pl),{},{parse:e=>pl.parse(e)/100,transform:e=>pl.transform(100*e)}),yl=(0,c.A)((0,c.A)({},rl),{},{transform:Math.round}),xl={borderWidth:fl,borderTopWidth:fl,borderRightWidth:fl,borderBottomWidth:fl,borderLeftWidth:fl,borderRadius:fl,radius:fl,borderTopLeftRadius:fl,borderTopRightRadius:fl,borderBottomRightRadius:fl,borderBottomLeftRadius:fl,width:fl,maxWidth:fl,height:fl,maxHeight:fl,size:fl,top:fl,right:fl,bottom:fl,left:fl,padding:fl,paddingTop:fl,paddingRight:fl,paddingBottom:fl,paddingLeft:fl,margin:fl,marginTop:fl,marginRight:fl,marginBottom:fl,marginLeft:fl,rotate:hl,rotateX:hl,rotateY:hl,rotateZ:hl,scale:al,scaleX:al,scaleY:al,scaleZ:al,skew:hl,skewX:hl,skewY:hl,distance:fl,translateX:fl,translateY:fl,translateZ:fl,x:fl,y:fl,z:fl,perspective:fl,transformPerspective:fl,opacity:il,originX:vl,originY:vl,originZ:fl,zIndex:yl,fillOpacity:il,strokeOpacity:il,numOctaves:yl};function bl(e,t,n,r){const{style:i,vars:a,transform:s,transformOrigin:o}=e;let l=!1,c=!1,u=!0;for(const d in t){const e=t[d];if(Zo(d)){a[d]=e;continue}const n=xl[d],r=tl(e,n);if(Wo.has(d)){if(l=!0,s[d]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,o[d]=r):i[d]=r}if(t.transform||(l||r?i.transform=function(e,t,n,r){let{enableHardwareAcceleration:i=!0,allowTransformNone:a=!0}=t,s="";for(let o=0;o<Yo;o++){const t=Vo[o];if(void 0!==e[t]){const n=Jo[t]||t;s+="".concat(n,"(").concat(e[t],") ")}}return i&&!e.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(e,n?"":s):a&&n&&(s="none"),s}(e.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;i.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const wl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Sl(e,t,n){for(const r in t)Xo(t[r])||qo(r,n)||(e[r]=t[r])}function _l(e,t,n){const i={};return Sl(i,e.style||{},e),Object.assign(i,function(e,t,n){let{transformTemplate:i}=e;return(0,r.useMemo)((()=>{const e=wl();return bl(e,t,{enableHardwareAcceleration:!n},i),Object.assign({},e.vars,e.style)}),[t])}(e,t,n)),i}function Al(e,t,n){const r={},i=_l(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const El=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cl(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||El.has(e)}let Ml=e=>!Cl(e);try{(Tl=require("@emotion/is-prop-valid").default)&&(Ml=e=>e.startsWith("on")?!Cl(e):Tl(e))}catch(ir){}var Tl;function kl(e,t,n){return"string"===typeof e?e:fl.transform(t+n*e)}const Pl={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rl={offset:"strokeDashoffset",array:"strokeDasharray"};const Dl=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function Il(e,t,n,r,i){let{attrX:a,attrY:s,attrScale:o,originX:l,originY:c,pathLength:u,pathSpacing:d=1,pathOffset:h=0}=t;if(bl(e,y(t,Dl),n,i),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:f,dimensions:m}=e;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==l||void 0!==c||f.transform)&&(f.transformOrigin=function(e,t,n){const r=kl(t,e.x,e.width),i=kl(n,e.y,e.height);return"".concat(r," ").concat(i)}(m,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==a&&(p.x=a),void 0!==s&&(p.y=s),void 0!==o&&(p.scale=o),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=i?Pl:Rl;e[a.offset]=fl.transform(-r);const s=fl.transform(t),o=fl.transform(n);e[a.array]="".concat(s," ").concat(o)}(p,u,d,h,!1)}const Bl=()=>(0,c.A)((0,c.A)({},wl()),{},{attrs:{}}),jl=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Fl(e,t,n,i){const a=(0,r.useMemo)((()=>{const n=Bl();return Il(n,t,{enableHardwareAcceleration:!1},jl(i),e.transformTemplate),(0,c.A)((0,c.A)({},n.attrs),{},{style:(0,c.A)({},n.style)})}),[t]);if(e.style){const t={};Sl(t,e.style,e),a.style=(0,c.A)((0,c.A)({},t),a.style)}return a}function Ll(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,i,a,s)=>{let{latestValues:o}=a;const l=(Ho(t)?Fl:Al)(n,o,s,t),u=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(Ml(i)||!0===n&&Cl(i)||!t&&!Cl(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),d=(0,c.A)((0,c.A)((0,c.A)({},u),l),{},{ref:i}),{children:h}=n,p=(0,r.useMemo)((()=>Xo(h)?h.get():h),[h]);return(0,r.createElement)(t,(0,c.A)((0,c.A)({},d),{},{children:p}))}}function Ol(e,t,n,r){let{style:i,vars:a}=t;Object.assign(e.style,i,r&&r.getProjectionStyles(n));for(const s in a)e.style.setProperty(s,a[s])}const Nl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zl(e,t,n,r){Ol(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Nl.has(i)?i:mo(i),t.attrs[i])}function Ul(e,t){const{style:n}=e,r={};for(const i in n)(Xo(n[i])||t.style&&Xo(t.style[i])||qo(i,e))&&(r[i]=n[i]);return r}function Hl(e,t){const n=Ul(e,t);for(const r in e)if(Xo(e[r])||Xo(t[r])){n[-1!==Vo.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function Gl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}function Vl(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const Wl=e=>Array.isArray(e),ql=e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue),Xl=e=>Wl(e)?e[e.length-1]||0:e;function Jl(e){const t=Xo(e)?e.get():e;return ql(t)?t.toValue():t}const Yl=["transitionEnd","transition"];const Kl=e=>(t,n)=>{const i=(0,r.useContext)(co),a=(0,r.useContext)(uo),s=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:a,onMount:s}=e;const o={latestValues:Zl(t,n,r,i),renderState:a()};return s&&(o.mount=e=>s(t,e,o)),o}(e,t,i,a);return n?s():Vl(s)};function Zl(e,t,n,r){const i={},a=r(e,{});for(const h in a)i[h]=Jl(a[h]);let{initial:s,animate:o}=e;const l=ko(e),c=Po(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const d=u?o:s;if(d&&"boolean"!==typeof d&&!Co(d)){(Array.isArray(d)?d:[d]).forEach((t=>{const n=Gl(e,t);if(!n)return;const{transitionEnd:r,transition:a}=n,s=y(n,Yl);for(const e in s){let t=s[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(i[e]=t)}for(const e in r)i[e]=r[e]}))}return i}const Ql=e=>e,{schedule:$l,cancel:ec,state:tc,steps:nc}=wo("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Ql,!0),rc={useVisualState:Kl({scrapeMotionValuesFromProps:Hl,createRenderState:Bl,onMount:(e,t,n)=>{let{renderState:r,latestValues:i}=n;$l.read((()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}})),$l.render((()=>{Il(r,i,{enableHardwareAcceleration:!1},jl(t.tagName),e.transformTemplate),zl(t,r)}))}})},ic={useVisualState:Kl({scrapeMotionValuesFromProps:Ul,createRenderState:wl})};function ac(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const sc=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function oc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const lc=e=>t=>sc(t)&&e(t,oc(t));function cc(e,t,n,r){return ac(e,t,lc(n),r)}const uc=(e,t)=>n=>t(e(n)),dc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(uc)};function hc(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const pc=hc("dragHorizontal"),fc=hc("dragVertical");function mc(e){let t=!1;if("y"===e)t=fc();else if("x"===e)t=pc();else{const e=pc(),n=fc();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function gc(){const e=mc(!0);return!e||(e(),!1)}class vc{constructor(e){this.isMounted=!1,this.node=e}update(){}}function yc(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return cc(e.current,n,((n,i)=>{if("touch"===n.pointerType||gc())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&$l.update((()=>a[r](n,i)))}),{passive:!e.getProps()[r]})}const xc=(e,t)=>!!t&&(e===t||xc(e,t.parentElement));function bc(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,oc(n))}const wc=["root"],Sc=new WeakMap,_c=new WeakMap,Ac=e=>{const t=Sc.get(e.target);t&&t(e)},Ec=e=>{e.forEach(Ac)};function Cc(e,t,n){const r=function(e){let{root:t}=e,n=y(e,wc);const r=t||document;_c.has(r)||_c.set(r,{});const i=_c.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(Ec,(0,c.A)({root:t},n))),i[a]}(t);return Sc.set(e,n),r.observe(e),()=>{Sc.delete(e),r.unobserve(e)}}const Mc={some:0,all:1};const Tc={inView:{Feature:class extends vc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Mc[r]};return Cc(this.node.current,a,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends vc{constructor(){super(...arguments),this.removeStartListeners=Ql,this.removeEndListeners=Ql,this.removeAccessibleListeners=Ql,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=cc(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps();$l.update((()=>{i||xc(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)}))}),{passive:!(n.onTap||n.onPointerUp)}),i=cc(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=dc(r,i),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=ac(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=ac(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&bc("up",((e,t)=>{const{onTap:n}=this.node.getProps();n&&$l.update((()=>n(e,t)))}))})),bc("down",((e,t)=>{this.startPress(e,t)}))})),t=ac(this.node.current,"blur",(()=>{this.isPressing&&bc("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=dc(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&$l.update((()=>n(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!gc()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&$l.update((()=>n(e,t)))}mount(){const e=this.node.getProps(),t=cc(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=ac(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=dc(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends vc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dc(ac(this.node.current,"focus",(()=>this.onFocus())),ac(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends vc{mount(){this.unmount=dc(yc(this.node,!0),yc(this.node,!1))}unmount(){}}}};function kc(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Pc(e,t,n){const r=e.getProps();return Gl(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.get())),t}(e),function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.getVelocity())),t}(e))}let Rc=Ql,Dc=Ql;const Ic=e=>1e3*e,Bc=e=>e/1e3,jc=!1,Fc=e=>Array.isArray(e)&&"number"===typeof e[0];function Lc(e){return Boolean(!e||"string"===typeof e&&Nc[e]||Fc(e)||Array.isArray(e)&&e.every(Lc))}const Oc=e=>{let[t,n,r,i]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(i,")")},Nc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Oc([0,.65,.55,1]),circOut:Oc([.55,0,1,.45]),backIn:Oc([.31,.01,.66,-.59]),backOut:Oc([.33,1.53,.69,.99])};function zc(e){if(e)return Fc(e)?Oc(e):Array.isArray(e)?e.map(zc):Nc[e]}const Uc=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Hc=1e-7,Gc=12;function Vc(e,t,n,r){if(e===t&&n===r)return Ql;const i=t=>function(e,t,n,r,i){let a,s,o=0;do{s=t+(n-t)/2,a=Uc(s,r,i)-e,a>0?n=s:t=s}while(Math.abs(a)>Hc&&++o<Gc);return s}(t,0,1,e,n);return e=>0===e||1===e?e:Uc(i(e),t,r)}const Wc=Vc(.42,0,1,1),qc=Vc(0,0,.58,1),Xc=Vc(.42,0,.58,1),Jc=e=>Array.isArray(e)&&"number"!==typeof e[0],Yc=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Kc=e=>t=>1-e(1-t),Zc=e=>1-Math.sin(Math.acos(e)),Qc=Kc(Zc),$c=Yc(Zc),eu=Vc(.33,1.53,.69,.99),tu=Kc(eu),nu=Yc(tu),ru={linear:Ql,easeIn:Wc,easeInOut:Xc,easeOut:qc,circIn:Zc,circInOut:$c,circOut:Qc,backIn:tu,backInOut:nu,backOut:eu,anticipate:e=>(e*=2)<1?.5*tu(e):.5*(2-Math.pow(2,-10*(e-1)))},iu=e=>{if(Array.isArray(e)){Dc(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,i]=e;return Vc(t,n,r,i)}return"string"===typeof e?(Dc(void 0!==ru[e],"Invalid easing type '".concat(e,"'")),ru[e]):e},au=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},su=(e,t,n)=>e+(t-e)*n;function ou(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const lu=(e,t)=>n=>Boolean(ul(n)&&cl.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),cu=(e,t,n)=>r=>{if(!ul(r))return r;const[i,a,s,o]=r.match(ol);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(s),alpha:void 0!==o?parseFloat(o):1}},uu=(0,c.A)((0,c.A)({},rl),{},{transform:e=>Math.round((e=>nl(0,255,e))(e))}),du={test:lu("rgb","red"),parse:cu("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+uu.transform(t)+", "+uu.transform(n)+", "+uu.transform(r)+", "+sl(il.transform(i))+")"}};const hu={test:lu("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:du.transform},pu={test:lu("hsl","hue"),parse:cu("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+pl.transform(sl(n))+", "+pl.transform(sl(r))+", "+sl(il.transform(i))+")"}},fu=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},mu=[hu,du,pu];function gu(e){const t=(e=>mu.find((t=>t.test(e))))(e);Dc(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let n=t.parse(e);return t===pu&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let a=0,s=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;a=ou(i,e,t+1/3),s=ou(i,e,t),o=ou(i,e,t-1/3)}else a=s=o=r;return{red:Math.round(255*a),green:Math.round(255*s),blue:Math.round(255*o),alpha:i}}(n)),n}const vu=(e,t)=>{const n=gu(e),r=gu(t),i=(0,c.A)({},n);return e=>(i.red=fu(n.red,r.red,e),i.green=fu(n.green,r.green,e),i.blue=fu(n.blue,r.blue,e),i.alpha=su(n.alpha,r.alpha,e),du.transform(i))},yu={test:e=>du.test(e)||hu.test(e)||pu.test(e),parse:e=>du.test(e)?du.parse(e):pu.test(e)?pu.parse(e):hu.parse(e),transform:e=>ul(e)?e:e.hasOwnProperty("red")?du.transform(e):pu.transform(e)};const xu="number",bu="color",wu="var",Su="var(",_u="${}",Au=/(var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\))|(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))|((-)?([\d]*\.?[\d])+)/gi;function Eu(e){const t=e.toString(),n=t.match(Au)||[],r=[],i={color:[],number:[],var:[]},a=[];for(let s=0;s<n.length;s++){const e=n[s];yu.test(e)?(i.color.push(s),a.push(bu),r.push(yu.parse(e))):e.startsWith(Su)?(i.var.push(s),a.push(wu),r.push(e)):(i.number.push(s),a.push(xu),r.push(parseFloat(e)))}return{values:r,split:t.replace(Au,_u).split(_u),indexes:i,types:a}}function Cu(e){return Eu(e).values}function Mu(e){const{split:t,types:n}=Eu(e),r=t.length;return e=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],void 0!==e[a]){const t=n[a];i+=t===xu?sl(e[a]):t===bu?yu.transform(e[a]):e[a]}return i}}const Tu=e=>"number"===typeof e?0:e;const ku={test:function(e){var t,n;return isNaN(e)&&ul(e)&&((null===(t=e.match(ol))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(ll))||void 0===n?void 0:n.length)||0)>0},parse:Cu,createTransformer:Mu,getAnimatableNone:function(e){const t=Cu(e);return Mu(e)(t.map(Tu))}};function Pu(e,t){return n=>n>0?t:e}function Ru(e,t){return n=>su(e,t,n)}function Du(e){return"number"===typeof e?Ru:"string"===typeof e?$o(e)?Pu:yu.test(e)?vu:ju:Array.isArray(e)?Iu:"object"===typeof e?yu.test(e)?vu:Bu:Pu}function Iu(e,t){const n=[...e],r=n.length,i=e.map(((e,n)=>Du(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Bu(e,t){const n=(0,c.A)((0,c.A)({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Du(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const ju=(e,t)=>{const n=ku.createTransformer(t),r=Eu(e),i=Eu(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?dc(Iu(function(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=e.indexes[s][i[s]],l=null!==(n=e.values[o])&&void 0!==n?n:0;r[a]=l,i[s]++}return r}(r,i),i.values),n):(Rc(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Pu(e,t))};function Fu(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return su(e,t,n);return Du(e)(e,t)}function Lu(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(Dc(a===t.length,"Both input and output ranges must be the same length"),1===a)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=function(e,t,n){const r=[],i=n||Fu,a=e.length-1;for(let s=0;s<a;s++){let n=i(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||Ql:t;n=dc(e,n)}r.push(n)}return r}(t,r,i),o=s.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=au(e[n],e[n+1],t);return s[n](r)};return n?t=>l(nl(e[0],e[a-1],t)):l}function Ou(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=au(0,t,r);e.push(su(n,1,i))}}(t,e.length-1),t}function Nu(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const a=Jc(i)?i.map(iu):iu(i),s={done:!1,value:n[0]},o=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:Ou(n),t),l=Lu(o,n,{ease:Array.isArray(a)?a:(c=n,u=a,c.map((()=>u||Xc)).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}function zu(e,t){return t?e*(1e3/t):0}const Uu=5;function Hu(e,t,n){const r=Math.max(t-Uu,0);return zu(n-e(r),t-r)}const Gu=.001,Vu=.01,Wu=10,qu=.05,Xu=1;function Ju(e){let t,n,{duration:r=800,bounce:i=.25,velocity:a=0,mass:s=1}=e;Rc(r<=Ic(Wu),"Spring duration must be 10 seconds or less");let o=1-i;o=nl(qu,Xu,o),r=nl(Vu,Wu,Bc(r)),o<1?(t=e=>{const t=e*o,n=t*r,i=t-a,s=Ku(e,o),l=Math.exp(-n);return Gu-i/s*l},n=e=>{const n=e*o*r,i=n*a+a,s=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=Ku(Math.pow(e,2),o);return(-t(e)+Gu>0?-1:1)*((i-s)*l)/c}):(t=e=>Math.exp(-e*r)*((e-a)*r+1)-Gu,n=e=>Math.exp(-e*r)*(r*r*(a-e)));const l=function(e,t,n){let r=n;for(let i=1;i<Yu;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=Ic(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*o*Math.sqrt(s*e),duration:r}}}const Yu=12;function Ku(e,t){return e*Math.sqrt(1-t*t)}const Zu=["keyframes","restDelta","restSpeed"],Qu=["duration","bounce"],$u=["stiffness","damping","mass"];function ed(e,t){return t.some((t=>void 0!==e[t]))}function td(e){let{keyframes:t,restDelta:n,restSpeed:r}=e,i=y(e,Zu);const a=t[0],s=t[t.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:f}=function(e){let t=(0,c.A)({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!ed(e,$u)&&ed(e,Qu)){const n=Ju(e);t=(0,c.A)((0,c.A)((0,c.A)({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}((0,c.A)((0,c.A)({},i),{},{velocity:-Bc(i.velocity||0)})),m=p||0,g=u/(2*Math.sqrt(l*d)),v=s-a,x=Bc(Math.sqrt(l/d)),b=Math.abs(v)<5;let w;if(r||(r=b?.01:2),n||(n=b?.005:.5),g<1){const e=Ku(x,g);w=t=>{const n=Math.exp(-g*x*t);return s-n*((m+g*x*v)/e*Math.sin(e*t)+v*Math.cos(e*t))}}else if(1===g)w=e=>s-Math.exp(-x*e)*(v+(m+x*v)*e);else{const e=x*Math.sqrt(g*g-1);w=t=>{const n=Math.exp(-g*x*t),r=Math.min(e*t,300);return s-n*((m+g*x*v)*Math.sinh(r)+e*v*Math.cosh(r))/e}}return{calculatedDuration:f&&h||null,next:e=>{const t=w(e);if(f)o.done=e>=h;else{let i=m;0!==e&&(i=g<1?Hu(w,e,t):0);const a=Math.abs(i)<=r,l=Math.abs(s-t)<=n;o.done=a&&l}return o.value=o.done?s:t,o}}}function nd(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,v=void 0===o?g:o(g);v!==g&&(m=v-h);const y=e=>-m*Math.exp(-e/i),x=e=>v+y(e),b=e=>{const t=y(e),n=x(e);p.done=Math.abs(t)<=u,p.value=p.done?v:n};let w,S;const _=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(p.value)&&(w=e,S=td({keyframes:[p.value,f(p.value)],velocity:Hu(x,e,p.value),damping:a,stiffness:s,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==w||(t=!0,b(e),_(e)),void 0!==w&&e>w?S.next(e-w):(!t&&b(e),p)}}}let rd;function id(){rd=void 0}const ad={now:()=>(void 0===rd&&ad.set(tc.isProcessing||yo?tc.timestamp:performance.now()),rd),set:e=>{rd=e,queueMicrotask(id)}},sd=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>$l.update(t,!0),stop:()=>ec(t),now:()=>tc.isProcessing?tc.timestamp:ad.now()}},od=2e4;function ld(e){let t=0;let n=e.next(t);for(;!n.done&&t<od;)t+=50,n=e.next(t);return t>=od?1/0:t}const cd=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],ud={decay:nd,inertia:nd,tween:Nu,keyframes:Nu,spring:td},dd=e=>e/100;function hd(e){let t,n,{autoplay:r=!0,delay:i=0,driver:a=sd,keyframes:s,type:o="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:d="loop",onPlay:h,onStop:p,onComplete:f,onUpdate:m}=e,g=y(e,cd),v=1,x=!1;const b=()=>{n=new Promise((e=>{t=e}))};let w;b();const S=ud[o]||Nu;let _;S!==Nu&&"number"!==typeof s[0]&&(_=dc(dd,Fu(s[0],s[1])),s=[0,100]);const A=S((0,c.A)((0,c.A)({},g),{},{keyframes:s}));let E;"mirror"===d&&(E=S((0,c.A)((0,c.A)({},g),{},{keyframes:[...s].reverse(),velocity:-(g.velocity||0)})));let C="idle",M=null,T=null,k=null;null===A.calculatedDuration&&l&&(A.calculatedDuration=ld(A));const{calculatedDuration:P}=A;let R=1/0,D=1/0;null!==P&&(R=P+u,D=R*(l+1)-u);let I=0;const B=e=>{if(null===T)return;v>0&&(T=Math.min(T,e)),v<0&&(T=Math.min(e-D/v,T)),I=null!==M?M:Math.round(e-T)*v;const t=I-i*(v>=0?1:-1),n=v>=0?t<0:t>D;I=Math.max(t,0),"finished"===C&&null===M&&(I=D);let r=I,a=A;if(l){const e=Math.min(I,D)/R;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===d?(n=1-n,u&&(n-=u/R)):"mirror"===d&&(a=E)),r=nl(0,1,n)*R}const o=n?{done:!1,value:s[0]}:a.next(r);_&&(o.value=_(o.value));let{done:c}=o;n||null===P||(c=v>=0?I>=D:I<=0);const h=null===M&&("finished"===C||"running"===C&&c);return m&&m(o.value),h&&L(),o},j=()=>{w&&w.stop(),w=void 0},F=()=>{C="idle",j(),t(),b(),T=k=null},L=()=>{C="finished",f&&f(),j(),t()},O=()=>{if(x)return;w||(w=a(B));const e=w.now();h&&h(),null!==M?T=e-M:T&&"finished"!==C||(T=e),"finished"===C&&b(),k=T,M=null,C="running",w.start()};r&&O();const N={then:(e,t)=>n.then(e,t),get time(){return Bc(I)},set time(e){e=Ic(e),I=e,null===M&&w&&0!==v?T=w.now()-e/v:M=e},get duration(){const e=null===A.calculatedDuration?ld(A):A.calculatedDuration;return Bc(e)},get speed(){return v},set speed(e){e!==v&&w&&(v=e,N.time=Bc(I))},get state(){return C},play:O,pause:()=>{C="paused",M=I},stop:()=>{x=!0,"idle"!==C&&(C="idle",p&&p(),F())},cancel:()=>{null!==k&&B(k),F()},complete:()=>{C="finished"},sample:e=>(T=0,B(e))};return N}const pd=["onUpdate","onComplete"],fd=function(e){let t;return()=>(void 0===t&&(t=e()),t)}((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),md=new Set(["opacity","clipPath","filter","transform"]);function gd(e,t,n){let{onUpdate:r,onComplete:i}=n,a=y(n,pd);if(!(fd()&&md.has(t)&&!a.repeatDelay&&"mirror"!==a.repeatType&&0!==a.damping&&"inertia"!==a.type))return!1;let s,o,l=!1,u=!1;const d=()=>{o=new Promise((e=>{s=e}))};d();let{keyframes:h,duration:p=300,ease:f,times:m}=a;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!Lc(t.ease))(t,a)){const e=hd((0,c.A)((0,c.A)({},a),{},{repeat:0,delay:0}));let t={done:!1,value:h[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;m=void 0,h=n,p=r-10,f="linear"}const g=function(e,t,n){let{delay:r=0,duration:i,repeat:a=0,repeatType:s="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=zc(o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===s?"alternate":"normal"})}(e.owner.current,t,h,(0,c.A)((0,c.A)({},a),{},{duration:p,ease:f,times:m})),v=()=>{u=!1,g.cancel()},x=()=>{u=!0,$l.update(v),s(),d()};g.onfinish=()=>{u||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(h,a)),i&&i(),x())};const b={then:(e,t)=>o.then(e,t),attachTimeline:e=>(g.timeline=e,g.onfinish=null,Ql),get time(){return Bc(g.currentTime||0)},set time(e){g.currentTime=Ic(e)},get speed(){return g.playbackRate},set speed(e){g.playbackRate=e},get duration(){return Bc(p)},play:()=>{l||(g.play(),ec(v))},pause:()=>g.pause(),stop:()=>{if(l=!0,"idle"===g.playState)return;const{currentTime:t}=g;if(t){const n=hd((0,c.A)((0,c.A)({},a),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}x()},complete:()=>{u||g.finish()},cancel:x};return b}const vd={type:"spring",stiffness:500,damping:25,restSpeed:10},yd={type:"keyframes",duration:.8},xd={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bd=(e,t)=>{let{keyframes:n}=t;return n.length>2?yd:Wo.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:vd:xd},wd=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!ku.test(t)&&"0"!==t||t.startsWith("url("))),Sd=new Set(["brightness","contrast","saturate","opacity"]);function _d(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(ol)||[];if(!r)return e;const i=n.replace(r,"");let a=Sd.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const Ad=/([a-z-]*)\(.*?\)/g,Ed=(0,c.A)((0,c.A)({},ku),{},{getAnimatableNone:e=>{const t=e.match(Ad);return t?t.map(_d).join(" "):e}}),Cd=(0,c.A)((0,c.A)({},xl),{},{color:yu,backgroundColor:yu,outlineColor:yu,fill:yu,stroke:yu,borderColor:yu,borderTopColor:yu,borderRightColor:yu,borderBottomColor:yu,borderLeftColor:yu,filter:Ed,WebkitFilter:Ed}),Md=e=>Cd[e];function Td(e,t){let n=Md(e);return n!==Ed&&(n=ku),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const kd=e=>/^0[^.\s]+$/.test(e);function Pd(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||kd(e):void 0}const Rd=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function Dd(e,t){return e[t]||e.default||e}const Id=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{const a=Dd(r,e)||{},s=a.delay||r.delay||0;let{elapsed:o=0}=r;o-=Ic(s);const l=function(e,t,n,r){const i=wd(t,n);let a;a=Array.isArray(n)?[...n]:[null,n];const s=void 0!==r.from?r.from:e.get();let o;const l=[];for(let c=0;c<a.length;c++)null===a[c]&&(a[c]=0===c?s:a[c-1]),Pd(a[c])&&l.push(c),"string"===typeof a[c]&&"none"!==a[c]&&"0"!==a[c]&&(o=a[c]);if(i&&l.length&&o)for(let c=0;c<l.length;c++)a[l[c]]=Td(t,o);return a}(t,e,n,a),u=l[0],d=l[l.length-1],h=wd(e,u),p=wd(e,d);Rc(h===p,"You are trying to animate ".concat(e,' from "').concat(u,'" to "').concat(d,'". ').concat(u," is not an animatable value - to enable this animation set ").concat(u," to a value animatable to ").concat(d," via the `style` property."));let f=(0,c.A)((0,c.A)({keyframes:l,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-o,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{i(),a.onComplete&&a.onComplete()}});if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:u}=e,d=y(e,Rd);return!!Object.keys(d).length}(a)||(f=(0,c.A)((0,c.A)({},f),bd(e,f))),f.duration&&(f.duration=Ic(f.duration)),f.repeatDelay&&(f.repeatDelay=Ic(f.repeatDelay)),!h||!p||jc||!1===a.type||vo)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:i}=e;const a=()=>(r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Ql,pause:Ql,stop:Ql,then:e=>(e(),Promise.resolve()),cancel:Ql,complete:Ql});return n?hd({keyframes:[0,1],duration:0,delay:n,onComplete:a}):a()}(jc?(0,c.A)((0,c.A)({},f),{},{delay:0}):f);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=gd(t,e,f);if(n)return n}return hd(f)}};function Bd(e){return Boolean(Xo(e)&&e.add)}const jd=e=>/^\-?\d*\.?\d+$/.test(e);function Fd(e,t){-1===e.indexOf(t)&&e.push(t)}function Ld(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Od{constructor(){this.subscriptions=[]}add(e){return Fd(this.subscriptions,e),()=>Ld(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nd={current:void 0};class zd{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.0.5",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=ad.now();t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ad.now()}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Od);const n=this.events[e].add(t);return"change"===e?()=>{n(),$l.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Nd.current&&Nd.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ad.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return zu(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ud(e,t){return new zd(e,t)}const Hd=e=>t=>t.test(e),Gd=[rl,fl,pl,hl,gl,ml,{test:e=>"auto"===e,parse:e=>e}],Vd=e=>Gd.find(Hd(e)),Wd=[...Gd,yu,ku],qd=e=>Wd.find(Hd(e)),Xd=["transitionEnd","transition"];function Jd(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ud(n))}function Yd(e,t){const n=Pc(e,t);let r=n?e.makeTargetAnimatable(n,!1):{},{transitionEnd:i={},transition:a={}}=r,s=y(r,Xd);s=(0,c.A)((0,c.A)({},s),i);for(const o in s){Jd(e,o,Xl(s[o]))}}function Kd(e,t){if(!t)return;return(t[e]||t.default||t).from}const Zd=["transition","transitionEnd"];function Qd(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function $d(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function eh(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.makeTargetAnimatable(t),{transition:s=e.getDefaultTransition(),transitionEnd:o}=a,l=y(a,Zd);const u=e.getValue("willChange");r&&(s=r);const d=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const p in l){const t=e.getValue(p),r=l[p];if(!t||void 0===r||h&&Qd(h,p))continue;const i=(0,c.A)({delay:n,elapsed:0},Dd(s||{},p));if(window.HandoffAppearAnimations){const n=e.getProps()[go];if(n){const e=window.HandoffAppearAnimations(n,p,t,$l);null!==e&&(i.elapsed=e,i.isHandoff=!0)}}let a=!i.isHandoff&&!$d(t,r);if("spring"===i.type&&(t.getVelocity()||i.velocity)&&(a=!1),t.animation&&(a=!1),a)continue;t.start(Id(p,t,r,e.shouldReduceMotion&&Wo.has(p)?{type:!1}:i));const o=t.animation;Bd(u)&&(u.add(p),o.then((()=>u.remove(p)))),d.push(o)}return o&&Promise.all(d).then((()=>{o&&Yd(e,o)})),d}function th(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Pc(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(eh(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:s,staggerDirection:o}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0;const s=[],o=(e.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(nh).forEach(((e,r)=>{e.notify("AnimationStart",t),s.push(th(e,t,(0,c.A)((0,c.A)({},a),{},{delay:n+l(r)})).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(s)}(e,t,a+r,s,o,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[e,t]="beforeChildren"===o?[a,s]:[s,a];return e().then((()=>t()))}return Promise.all([a(),s(n.delay)])}function nh(e,t){return e.sortNodePosition(t)}const rh=["transition","transitionEnd"],ih=[...Mo].reverse(),ah=Mo.length;function sh(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map((t=>th(e,t,r)));n=Promise.all(i)}else if("string"===typeof t)n=th(e,t,r);else{const i="function"===typeof t?Pc(e,t,r.custom):t;n=Promise.all(eh(e,i,r))}return n.then((()=>e.notify("AnimationComplete",t)))}(e,n,r)})))}function oh(e){let t=sh(e);const n={animate:ch(!0),whileInView:ch(),whileHover:ch(),whileTap:ch(),whileDrag:ch(),whileFocus:ch(),exit:ch()};let r=!0;const i=(t,n)=>{const r=Pc(e,n);if(r){const{transition:e,transitionEnd:n}=r,i=y(r,rh);t=(0,c.A)((0,c.A)((0,c.A)({},t),i),n)}return t};function a(a,s){const o=e.getProps(),l=e.getVariantContext(!0)||{},u=[],d=new Set;let h={},p=1/0;for(let t=0;t<ah;t++){const f=ih[t],m=n[f],g=void 0!==o[f]?o[f]:l[f],v=Eo(g),y=f===s?m.isActive:null;!1===y&&(p=t);let x=g===l[f]&&g!==o[f]&&v;if(x&&r&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys=(0,c.A)({},h),!m.isActive&&null===y||!g&&!m.prevProp||Co(g)||"boolean"===typeof g)continue;let b=lh(m.prevProp,g)||f===s&&m.isActive&&!x&&v||t>p&&v,w=!1;const S=Array.isArray(g)?g:[g];let _=S.reduce(i,{});!1===y&&(_={});const{prevResolvedValues:A={}}=m,E=(0,c.A)((0,c.A)({},A),_),C=e=>{b=!0,d.has(e)&&(w=!0,d.delete(e)),m.needsAnimating[e]=!0};for(const e in E){const t=_[e],n=A[e];if(h.hasOwnProperty(e))continue;let r=!1;r=Wl(t)&&Wl(n)?!kc(t,n):t!==n,r?void 0!==t?C(e):d.add(e):void 0!==t&&d.has(e)?C(e):m.protectedKeys[e]=!0}m.prevProp=g,m.prevResolvedValues=_,m.isActive&&(h=(0,c.A)((0,c.A)({},h),_)),r&&e.blockInitialAnimation&&(b=!1),!b||x&&!w||u.push(...S.map((e=>({animation:e,options:(0,c.A)({type:f},a)}))))}if(d.size){const t={};d.forEach((n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)})),u.push({animation:t})}let f=Boolean(u.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(u):Promise.resolve()}return{animateChanges:a,setActive:function(t,r,i){var s;if(n[t].isActive===r)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const o=a(i,t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function lh(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!kc(t,e)}function ch(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let uh=0;const dh={animation:{Feature:class extends vc{constructor(e){super(e),e.animationState||(e.animationState=oh(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Co(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends vc{constructor(){super(...arguments),this.id=uh++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&i.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},hh=(e,t)=>Math.abs(e-t);class ph{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=gh(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=hh(e.x,t.x),r=hh(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=tc;this.history.push((0,c.A)((0,c.A)({},r),{},{timestamp:i}));const{onStart:a,onMove:s}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=fh(t,this.transformPagePoint),$l.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=gh("pointercancel"===e.type?this.lastMoveEventInfo:fh(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!sc(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const a=fh(oc(e),this.transformPagePoint),{point:s}=a,{timestamp:o}=tc;this.history=[(0,c.A)((0,c.A)({},s),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,gh(a,this.history)),this.removeListeners=dc(cc(this.contextWindow,"pointermove",this.handlePointerMove),cc(this.contextWindow,"pointerup",this.handlePointerUp),cc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ec(this.updatePoint)}}function fh(e,t){return t?{point:t(e.point)}:e}function mh(e,t){return{x:e.x-t.x,y:e.y-t.y}}function gh(e,t){let{point:n}=e;return{point:n,delta:mh(n,yh(t)),offset:mh(n,vh(t)),velocity:xh(t,.1)}}function vh(e){return e[0]}function yh(e){return e[e.length-1]}function xh(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=yh(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Ic(t)));)n--;if(!r)return{x:0,y:0};const a=Bc(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function bh(e){return e.max-e.min}function wh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function Sh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=su(t.min,t.max,e.origin),e.scale=bh(n)/bh(t),(wh(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=su(n.min,n.max,e.origin)-e.originPoint,(wh(e.translate)||isNaN(e.translate))&&(e.translate=0)}function _h(e,t,n,r){Sh(e.x,t.x,n.x,r?r.originX:void 0),Sh(e.y,t.y,n.y,r?r.originY:void 0)}function Ah(e,t,n){e.min=n.min+t.min,e.max=e.min+bh(t)}function Eh(e,t,n){e.min=t.min-n.min,e.max=e.min+bh(t)}function Ch(e,t,n){Eh(e.x,t.x,n.x),Eh(e.y,t.y,n.y)}function Mh(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Th(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const kh=.35;function Ph(e,t,n){return{min:Rh(e,t),max:Rh(e,n)}}function Rh(e,t){return"number"===typeof e?e:e[t]||0}const Dh=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),Ih=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Bh(e){return[e("x"),e("y")]}function jh(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function Fh(e){return void 0===e||1===e}function Lh(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Fh(t)||!Fh(n)||!Fh(r)}function Oh(e){return Lh(e)||Nh(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Nh(e){return zh(e.x)||zh(e.y)}function zh(e){return e&&"0%"!==e}function Uh(e,t,n){return n+t*(e-n)}function Hh(e,t,n,r,i){return void 0!==i&&(e=Uh(e,i,r)),Uh(e,n,r)+t}function Gh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=Hh(e.min,t,n,r,i),e.max=Hh(e.max,t,n,r,i)}function Vh(e,t){let{x:n,y:r}=t;Gh(e.x,n.translate,n.scale,n.originPoint),Gh(e.y,r.translate,r.scale,r.originPoint)}function Wh(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function qh(e,t){e.min=e.min+t,e.max=e.max+t}function Xh(e,t,n){let[r,i,a]=n;const s=void 0!==t[a]?t[a]:.5,o=su(e.min,e.max,s);Gh(e,t[r],t[i],o,t.scale)}const Jh=["x","scaleX","originX"],Yh=["y","scaleY","originY"];function Kh(e,t){Xh(e.x,t,Jh),Xh(e.y,t,Yh)}function Zh(e,t){return jh(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Qh=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},$h=new WeakMap;class ep{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ih(),this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new ph(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(oc(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=mc(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bh((e=>{let t=this.getAxisMotionValue(e).get()||0;if(pl.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=bh(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),i&&$l.update((()=>i(e,t)),!1,!0);const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:s}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Bh((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:Qh(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&$l.update((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!tp(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?su(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?su(i,e,n.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&Ao(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:a}=t;return{x:Mh(e.x,r,a),y:Mh(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kh;return!1===e?e=0:!0===e&&(e=kh),{x:Ph(e,"left","right"),y:Ph(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Bh((e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ao(e))return!1;const n=e.current;Dc(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=Zh(e,n),{scroll:i}=t;return i&&(qh(r.x,i.offset.x),qh(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:Th(e.x,t.x),y:Th(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=jh(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),o=this.constraints||{},l=Bh((s=>{if(!tp(s,t,this.currentDirection))return;let l=o&&o[s]||{};a&&(l={min:0,max:0});const u=r?200:1e6,d=r?40:1e7,h=(0,c.A)((0,c.A)({type:"inertia",velocity:n?e[s]:0,bounceStiffness:u,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},i),l);return this.startAxisValueAnimation(s,h)}));return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(Id(e,n,0,t))}stopAnimation(){Bh((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){Bh((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Bh((t=>{const{drag:n}=this.getProps();if(!tp(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];i.set(e[t]-su(n,a,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Ao(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Bh((e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=bh(e),i=bh(t);return i>r?n=au(t.min,t.max-r,e.min):r>i&&(n=au(e.min,e.max-i,t.min)),nl(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Bh((t=>{if(!tp(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:a}=this.constraints[t];n.set(su(i,a,r[t]))}))}addListeners(){if(!this.visualElement.current)return;$h.set(this.visualElement,this);const e=cc(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();Ao(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const i=ac(window,"resize",(()=>this.scalePositionWithinConstraints())),a=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Bh((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{i(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=kh,dragMomentum:s=!0}=e;return(0,c.A)((0,c.A)({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:s})}}function tp(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const np=e=>(t,n)=>{e&&$l.update((()=>e(t,n)))};function rp(){const e=(0,r.useContext)(uo);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,a=(0,r.useId)();(0,r.useEffect)((()=>i(a)),[]);return!t&&n?[!1,()=>n&&n(a)]:[!0]}function ip(){return function(e){return null===e||e.isPresent}((0,r.useContext)(uo))}const ap={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sp(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const op={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!fl.test(e))return e;e=parseFloat(e)}const n=sp(e,t.target.x),r=sp(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},lp={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,a=ku.parse(e);if(a.length>5)return i;const s=ku.createTransformer(e),o="number"!==typeof a[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;a[0+o]/=l,a[1+o]/=c;const u=su(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=u),"number"===typeof a[3+o]&&(a[3+o]/=u),s(a)}};class cp extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var a;a=dp,Object.assign(Go,a),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions((0,c.A)((0,c.A)({},i.options),{},{onExitComplete:()=>this.safeToRemove()}))),ap.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,a=n.projection;return a?(a.isPresent=i,r||e.layoutDependency!==t||void 0===t?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||$l.postRender((()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),So.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function up(e){const[t,n]=rp(),i=(0,r.useContext)(jo);return r.createElement(cp,(0,c.A)((0,c.A)({},e),{},{layoutGroup:i,switchLayoutGroup:(0,r.useContext)(Fo),isPresent:t,safeToRemove:n}))}const dp={borderRadius:(0,c.A)((0,c.A)({},op),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:op,borderTopRightRadius:op,borderBottomLeftRadius:op,borderBottomRightRadius:op,boxShadow:lp},hp=["TopLeft","TopRight","BottomLeft","BottomRight"],pp=hp.length,fp=e=>"string"===typeof e?parseFloat(e):e,mp=e=>"number"===typeof e||fl.test(e);function gp(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const vp=xp(0,.5,Qc),yp=xp(.5,.95,Ql);function xp(e,t,n){return r=>r<e?0:r>t?1:n(au(e,t,r))}function bp(e,t){e.min=t.min,e.max=t.max}function wp(e,t){bp(e.x,t.x),bp(e.y,t.y)}function Sp(e,t,n,r,i){return e=Uh(e-=t,1/n,r),void 0!==i&&(e=Uh(e,1/i,r)),e}function _p(e,t,n,r,i){let[a,s,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;pl.test(t)&&(t=parseFloat(t),t=su(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let o=su(a.min,a.max,r);e===a&&(o-=t),e.min=Sp(e.min,t,n,o,i),e.max=Sp(e.max,t,n,o,i)}(e,t[a],t[s],t[o],t.scale,r,i)}const Ap=["x","scaleX","originX"],Ep=["y","scaleY","originY"];function Cp(e,t,n,r){_p(e.x,t,Ap,n?n.x:void 0,r?r.x:void 0),_p(e.y,t,Ep,n?n.y:void 0,r?r.y:void 0)}function Mp(e){return 0===e.translate&&1===e.scale}function Tp(e){return Mp(e.x)&&Mp(e.y)}function kp(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Pp(e){return bh(e.x)/bh(e.y)}class Rp{constructor(){this.members=[]}add(e){Fd(this.members,e),e.scheduleRender()}remove(e){if(Ld(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Dp(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(r="translate3d(".concat(i,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:i}=n;e&&(r+="rotate(".concat(e,"deg) ")),t&&(r+="rotateX(".concat(t,"deg) ")),i&&(r+="rotateY(".concat(i,"deg) "))}const s=e.x.scale*t.x,o=e.y.scale*t.y;return 1===s&&1===o||(r+="scale(".concat(s,", ").concat(o,")")),r||"none"}const Ip=(e,t)=>e.depth-t.depth;class Bp{constructor(){this.children=[],this.isDirty=!1}add(e){Fd(this.children,e),this.isDirty=!0}remove(e){Ld(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ip),this.isDirty=!1,this.children.forEach(e)}}const jp=["","X","Y","Z"],Fp={visibility:"hidden"};let Lp=0;const Op={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Np(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Lp++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,Op.totalNodes=Op.resolvedTargetDeltas=Op.recalculatedProjection=0,this.nodes.forEach(Hp),this.nodes.forEach(Yp),this.nodes.forEach(Kp),this.nodes.forEach(Gp),e=Op,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Bp)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Od),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:i,layout:a,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(a||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=ad.now(),r=i=>{let{timestamp:a}=i;const s=a-n;s>=t&&(ec(r),e(s-t))};return $l.read(r,!0),()=>ec(r)}(r,250),ap.hasAnimatedSinceResize&&(ap.hasAnimatedSinceResize=!1,this.nodes.forEach(Jp))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&s&&(i||a)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||s.getDefaultTransition()||nf,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=s.getProps(),u=!this.targetLayout||!kp(this.targetLayout,i)||r,d=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e=(0,c.A)((0,c.A)({},Dd(a,"layout")),{},{onPlay:o,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||Jp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ec(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zp),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Wp);this.isUpdating||this.nodes.forEach(qp),this.isUpdating=!1,this.nodes.forEach(Xp),this.nodes.forEach(zp),this.nodes.forEach(Up),this.clearAllSnapshots();const e=ad.now();tc.delta=nl(0,1e3/60,e-tc.timestamp),tc.timestamp=e,tc.isProcessing=!0,nc.update.process(tc),nc.preRender.process(tc),nc.render.process(tc),tc.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,So.read((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(Vp),this.sharedNodes.forEach(Qp)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$l.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$l.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ih(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!Tp(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||Oh(this.latestValues)||i)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),sf((r=n).x),sf(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return Ih();const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(qh(t.x,n.offset.x),qh(t.y,n.offset.y)),t}removeElementScroll(e){const t=Ih();wp(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:a}=r;if(r!==this.root&&i&&a.layoutScroll){if(i.isRoot){wp(t,e);const{scroll:n}=this.root;n&&(qh(t.x,-n.offset.x),qh(t.y,-n.offset.y))}qh(t.x,i.offset.x),qh(t.y,i.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ih();wp(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Kh(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Oh(e.latestValues)&&Kh(n,e.latestValues)}return Oh(this.latestValues)&&Kh(n,this.latestValues),n}removeTransform(e){const t=Ih();wp(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Oh(e.latestValues))continue;Lh(e.latestValues)&&e.updateSnapshot();const r=Ih();wp(r,e.measurePageBox()),Cp(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Oh(this.latestValues)&&Cp(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,c.A)((0,c.A)((0,c.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tc.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:a}=this.options;if(this.layout&&(i||a)){if(this.resolvedRelativeTargetAt=tc.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ih(),this.relativeTargetOrigin=Ih(),Ch(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),wp(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,o,l;if(this.target||(this.target=Ih(),this.targetWithTransforms=Ih()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,o=this.relativeTarget,l=this.relativeParent.target,Ah(s.x,o.x,l.x),Ah(s.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):wp(this.target,this.layout.layoutBox),Vh(this.target,this.targetDelta)):wp(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ih(),this.relativeTargetOrigin=Ih(),Ch(this.relativeTargetOrigin,this.target,e.target),wp(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Op.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Lh(this.parent.latestValues)&&!Nh(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===tc.timestamp&&(r=!1),r)return;const{layout:i,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!a)return;wp(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let a,s;t.x=t.y=1;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const i=a.instance;i&&i.style&&"contents"===i.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Kh(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,Vh(e,s)),r&&Oh(a.latestValues)&&Kh(e,a.latestValues))}t.x=Wh(t.x),t.y=Wh(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms=Ih());const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta=Dh(),this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta=Dh(),this.projectionDeltaWithTransform=Dh());const c=this.projectionTransform;_h(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Dp(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===s&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Op.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i=(0,c.A)({},this.latestValues),a=Dh();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s=Ih(),o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,d=Boolean(o&&!u&&!0===this.options.crossfade&&!this.path.some(tf));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,c;$p(a.x,e.x,n),$p(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ch(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){ef(e.x,t.x,n.x,r),ef(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,s,n),h&&(l=this.relativeTarget,c=h,l.x.min===c.x.min&&l.x.max===c.x.max&&l.y.min===c.y.min&&l.y.max===c.y.max)&&(this.isProjectionDirty=!1),h||(h=Ih()),wp(h,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,n,r,i,a){i?(e.opacity=su(0,void 0!==n.opacity?n.opacity:1,vp(r)),e.opacityExit=su(void 0!==t.opacity?t.opacity:1,0,yp(r))):a&&(e.opacity=su(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let s=0;s<pp;s++){const i="border".concat(hp[s],"Radius");let a=gp(t,i),o=gp(n,i);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||mp(a)===mp(o)?(e[i]=Math.max(su(fp(a),fp(o),r),0),(pl.test(o)||pl.test(a))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=su(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,d,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ec(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$l.update((()=>{ap.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=Xo(e)?e:Ud(e);return r.start(Id("",r,t,n)),r.animation}(0,1e3,(0,c.A)((0,c.A)({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&of(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||Ih();const t=bh(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=bh(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}wp(t,n),Kh(t,i),_h(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Rp);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let i=0;i<jp.length;i++){const t="rotate"+jp[i];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const i in r)e.setStaticValue(i,r[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Fp;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Jl(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Jl(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Oh(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const s=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=Dp(this.projectionDeltaWithTransform,this.treeScale,s),i&&(r.transform=i(s,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),a.animationValues?r.opacity=a===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=a===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const c in Go){if(void 0===s[c])continue;const{correct:e,applyTo:t}=Go[c],n="none"===r.transform?s[c]:e(s[c],a);if(t){const e=t.length;for(let i=0;i<e;i++)r[t[i]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=a===this?Jl(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Wp),this.root.sharedNodes.clear()}}}function zp(e){e.updateLayout()}function Up(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;"size"===i?Bh((e=>{const r=a?n.measuredBox[e]:n.layoutBox[e],i=bh(r);r.min=t[e].min,r.max=r.min+i})):of(i,n.layoutBox,t)&&Bh((r=>{const i=a?n.measuredBox[r]:n.layoutBox[r],s=bh(t[r]);i.max=i.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)}));const s=Dh();_h(s,t,n.layoutBox);const o=Dh();a?_h(o,e.applyTransform(r,!0),n.measuredBox):_h(o,t,n.layoutBox);const l=!Tp(s);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:a}=r;if(i&&a){const s=Ih();Ch(s,n.layoutBox,i.layoutBox);const o=Ih();Ch(o,t,a.layoutBox),kp(s,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Hp(e){Op.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Gp(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Vp(e){e.clearSnapshot()}function Wp(e){e.clearMeasurements()}function qp(e){e.isLayoutDirty=!1}function Xp(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Jp(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Yp(e){e.resolveTargetDelta()}function Kp(e){e.calcProjection()}function Zp(e){e.resetRotation()}function Qp(e){e.removeLeadSnapshot()}function $p(e,t,n){e.translate=su(t.translate,0,n),e.scale=su(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ef(e,t,n,r){e.min=su(t.min,n.min,r),e.max=su(t.max,n.max,r)}function tf(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const nf={duration:.45,ease:[.4,0,.1,1]},rf=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),af=rf("applewebkit/")&&!rf("chrome/")?Math.round:Ql;function sf(e){e.min=af(e.min),e.max=af(e.max)}function of(e,t,n){return"position"===e||"preserve-aspect"===e&&!wh(Pp(t),Pp(n),.2)}const lf=Np({attachResizeListener:(e,t)=>ac(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cf={current:void 0},uf=Np({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!cf.current){const e=new lf({});e.mount(window),e.setOptions({layoutScroll:!0}),cf.current=e}return cf.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),df={pan:{Feature:class extends vc{constructor(){super(...arguments),this.removePointerDownListener=Ql}onPointerDown(e){this.session=new ph(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qh(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:np(e),onStart:np(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&$l.update((()=>r(e,t)))}}}mount(){this.removePointerDownListener=cc(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends vc{constructor(e){super(e),this.removeGroupControls=Ql,this.removeListeners=Ql,this.controls=new ep(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ql}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:uf,MeasureLayout:up}};const hf=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;const pf=4;function ff(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Dc(n<=pf,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[r,i]=function(e){const t=hf.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return jd(e)?parseFloat(e):e}return $o(i)?ff(i,t,n+1):i}function mf(e,t,n){let r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};n&&(n=(0,c.A)({},n)),e.values.forEach((e=>{const t=e.get();if(!$o(t))return;const n=ff(t,i);n&&e.set(n)}));for(const a in r){const e=r[a];if(!$o(e))continue;const t=ff(e,i);t&&(r[a]=t,n||(n={}),void 0===n[a]&&(n[a]=e))}return{target:r,transitionEnd:n}}const gf=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),vf=e=>gf.has(e),yf=e=>e===rl||e===fl,xf=(e,t)=>parseFloat(e.split(", ")[t]),bf=(e,t)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const a=i.match(/^matrix3d\((.+)\)$/);if(a)return xf(a[1],t);{const t=i.match(/^matrix\((.+)\)$/);return t?xf(t[1],e):0}},wf=new Set(["x","y","z"]),Sf=Vo.filter((e=>!wf.has(e)));const _f={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:bf(4,13),y:bf(5,14)};_f.translateX=_f.x,_f.translateY=_f.y;const Af=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=(0,c.A)({},t),r=(0,c.A)({},r);const i=Object.keys(t).filter(vf);let a=[],s=!1;const o=[];if(i.forEach((i=>{const l=e.getValue(i);if(!e.hasValue(i))return;let c=n[i],u=Vd(c);const d=t[i];let h;if(Wl(d)){const e=d.length,t=null===d[0]?1:0;c=d[t],u=Vd(c);for(let n=t;n<e&&null!==d[n];n++)h?Dc(Vd(d[n])===h,"All keyframes must be of the same type"):(h=Vd(d[n]),Dc(h===u||yf(u)&&yf(h),"Keyframes must be of the same dimension as the current value"))}else h=Vd(d);if(u!==h)if(yf(u)&&yf(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof d?t[i]=parseFloat(d):Array.isArray(d)&&h===fl&&(t[i]=d.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===d)?0===c?l.set(h.transform(c)):t[i]=u.transform(d):(s||(a=function(e){const t=[];return Sf.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),s=!0),o.push(i),r[i]=void 0!==r[i]?r[i]:t[i],l.jump(d))})),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,i=((e,t,n)=>{const r=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),{display:s}=a,o={};"none"===s&&t.setStaticValue("display",e.display||"block"),n.forEach((e=>{o[e]=_f[e](r,a)})),t.render();const l=t.measureViewportBox();return n.forEach((n=>{const r=t.getValue(n);r&&r.jump(o[n]),e[n]=_f[n](l,a)})),e})(t,e,o);return a.length&&a.forEach((t=>{let[n,r]=t;e.getValue(n).set(r)})),e.render(),ho&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:t,transitionEnd:r}};function Ef(e,t,n,r){return(e=>Object.keys(e).some(vf))(t)?Af(e,t,n,r):{target:t,transitionEnd:r}}const Cf={current:null},Mf={current:!1};const Tf=new WeakMap,kf=["willChange"],Pf=["children"],Rf=Object.keys(Bo),Df=Rf.length,If=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Bf=To.length;class jf{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:a}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>$l.render(this.render,!1,!0);const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget=(0,c.A)({},o),this.initialValues=n.initial?(0,c.A)({},o):{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=ko(n),this.isVariantNode=Po(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const u=this.scrapeMotionValuesFromProps(n,{}),{willChange:d}=u,h=y(u,kf);for(const c in h){const e=h[c];void 0!==o[c]&&Xo(e)&&(e.set(o[c],!1),Bd(d)&&d.add(c))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Tf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),Mf.current||function(){if(Mf.current=!0,ho)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Cf.current=e.matches;e.addListener(t),t()}else Cf.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Cf.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Tf.delete(this.current),this.projection&&this.projection.unmount(),ec(this.notifyUpdate),ec(this.render),this.valueSubscriptions.forEach((e=>e())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=Wo.has(e),r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&$l.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(()=>{r(),i()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let i,a,{children:s}=e,o=y(e,Pf);for(let l=0;l<Df;l++){const e=Rf[l],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:s}=Bo[e];r&&(i=r),t(o)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),s&&(a=s))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:a,layoutScroll:s,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||a&&Ao(a),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:s,layoutRoot:l})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ih()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<If.length;n++){const t=If[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const i in t){const a=t[i],s=n[i];if(Xo(a))e.addValue(i,a),Bd(r)&&r.add(i);else if(Xo(s))e.addValue(i,Ud(a,{owner:e})),Bd(r)&&r.remove(i);else if(s!==a)if(e.hasValue(i)){const t=e.getValue(i);!t.hasAnimated&&t.set(a)}else{const t=e.getStaticValue(i);e.addValue(i,Ud(void 0!==t?t:a,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<Bf;t++){const n=To[t],r=this.props[n];(Eo(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Ud(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=Gl(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Xo(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new Od),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}const Ff=["transition","transitionEnd"];class Lf extends jf{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t){let{transition:n,transitionEnd:r}=e,i=y(e,Ff);const a=function(e,t,n){const r={};for(const i in e){const e=Kd(i,t);if(void 0!==e)r[i]=e;else{const e=n.getValue(i);e&&(r[i]=e.get())}}return r}(i,n||{},this);if(t){!function(e,t,n){var r,i;const a=Object.keys(t).filter((t=>!e.hasValue(t))),s=a.length;if(s)for(let o=0;o<s;o++){const s=a[o],l=t[s];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(i=null!==(r=n[s])&&void 0!==r?r:e.readValue(s))&&void 0!==i?i:t[s]),void 0!==c&&null!==c&&("string"===typeof c&&(jd(c)||kd(c))?c=parseFloat(c):!qd(c)&&ku.test(l)&&(c=Td(s,l)),e.addValue(s,Ud(c,{owner:e})),void 0===n[s]&&(n[s]=c),null!==c&&e.setBaseTarget(s,c))}}(this,i,a);const e=((e,t,n,r)=>{const i=mf(e,t,r);return Ef(e,t=i.target,n,r=i.transitionEnd)})(this,i,a,r);r=e.transitionEnd,i=e.target}return(0,c.A)({transition:n,transitionEnd:r},i)}}class Of extends Lf{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Wo.has(t)){const e=Md(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(Zo(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Zh(e,n)}build(e,t,n,r){bl(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Ul(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xo(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent="".concat(e))})))}renderInstance(e,t,n,r){Ol(e,t,n,r)}}class Nf extends Lf{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Wo.has(t)){const e=Md(t);return e&&e.default||0}return t=Nl.has(t)?t:mo(t),e.getAttribute(t)}measureInstanceViewportBox(){return Ih()}scrapeMotionValuesFromProps(e,t){return Hl(e,t)}build(e,t,n,r){Il(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){zl(e,t,0,r)}mount(e){this.isSVGTag=jl(e.tagName),super.mount(e)}}const zf=(e,t)=>Ho(e)?new Nf(t,{enableHardwareAcceleration:!1}):new Of(t,{enableHardwareAcceleration:!0}),Uf={layout:{ProjectionNode:uf,MeasureLayout:up}},Hf=(0,c.A)((0,c.A)((0,c.A)((0,c.A)({},dh),Tc),df),Uf),Gf=zo(((e,t)=>function(e,t,n,r){let{forwardMotionProps:i=!1}=t;const a=Ho(e)?rc:ic;return(0,c.A)((0,c.A)({},a),{},{preloadedFeatures:n,useRender:Ll(i),createVisualElement:r,Component:e})}(e,t,Hf,zf)));const Vf=["rootProps","motionProps"];var Wf={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},qf=lr(Gf.div),Xf=cr((function(e,t){var n,i;const{rootProps:a,motionProps:s}=e,o=y(e,Vf),{isOpen:l,onTransitionEnd:u,unstable__animationState:d}=Os(),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Os();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:i,setFocusedIndex:a,menuRef:s,isOpen:o,onClose:l,menuId:u,isLazy:d,lazyBehavior:h,unstable__animationState:p}=n,f=Bs(),m=mi({preventDefault:e=>" "!==e.key&&Hs(e.target)}),g=(0,r.useCallback)((e=>{if(!e.currentTarget.contains(e.target))return;const t=e.key,n={Tab:e=>e.preventDefault(),Escape:l,ArrowDown:()=>{const e=f.nextEnabled(i);e&&a(e.index)},ArrowUp:()=>{const e=f.prevEnabled(i);e&&a(e.index)}},r=n[t];if(r)return e.preventDefault(),void r(e);const s=m((e=>{const t=function(e,t,n,r){if(null==t)return r;if(!r)return e.find((e=>n(e).toLowerCase().startsWith(t.toLowerCase())));const i=e.filter((e=>n(e).toLowerCase().startsWith(t.toLowerCase())));if(i.length>0){let t;return i.includes(r)?(t=i.indexOf(r)+1,t===i.length&&(t=0),i[t]):(t=e.indexOf(i[0]),e[t])}return r}(f.values(),e,(e=>{var t,n;return null!=(n=null==(t=null==e?void 0:e.node)?void 0:t.textContent)?n:""}),f.item(i));if(t){const e=f.indexOf(t.node);a(e)}}));Hs(e.target)&&s(e)}),[f,i,m,l,a]),v=(0,r.useRef)(!1);o&&(v.current=!0);const y=Ps({wasSelected:v.current,enabled:d,mode:h,isSelected:p.present});return(0,c.A)((0,c.A)({},e),{},{ref:Lr(s,t),children:y?e.children:null,tabIndex:-1,role:"menu",id:u,style:(0,c.A)((0,c.A)({},e.style),{},{transformOrigin:"var(--popper-transform-origin)"}),"aria-orientation":"vertical",onKeyDown:E(e.onKeyDown,g)})}(o,t),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{popper:t,isOpen:n}=Os();return t.getPopperProps((0,c.A)((0,c.A)({},e),{},{style:(0,c.A)({visibility:n?"visible":"hidden"},e.style)}))}(a),f=qs();return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},p),{},{__css:{zIndex:null!=(i=e.zIndex)?i:null==(n=f.list)?void 0:n.zIndex},children:(0,ur.jsx)(qf,(0,c.A)((0,c.A)((0,c.A)({variants:Wf,initial:!1,animate:l?"enter":"exit",__css:(0,c.A)({outline:0},f.list)},s),{},{className:x("chakra-menu__menu-list",h.className)},h),{},{onUpdate:u,onAnimationComplete:C(d.onComplete,h.onAnimationComplete)}))}))}));Xf.displayName="MenuList";var Jf=cr(((e,t)=>{const n=qs();return(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({ref:t},e),{},{__css:n.command,className:"chakra-menu__command"}))}));Jf.displayName="MenuCommand";const Yf=["type"];var Kf=cr(((e,t)=>{const{type:n}=e,i=y(e,Yf),a=qs(),s=i.as||n?null!=n?n:void 0:"button",o=(0,r.useMemo)((()=>(0,c.A)({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0},a.item)),[a.item]);return(0,ur.jsx)(lr.button,(0,c.A)((0,c.A)({ref:t,type:s},i),{},{__css:o}))}));const Zf=["className","children"];var Qf=e=>{const{className:t,children:n}=e,i=y(e,Zf),a=qs(),s=r.Children.only(n),o=(0,r.isValidElement)(s)?(0,r.cloneElement)(s,{focusable:"false","aria-hidden":!0,className:x("chakra-menu__icon",s.props.className)}):null,l=x("chakra-menu__icon-wrapper",t);return(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({className:l},i),{},{__css:a.icon,children:o}))};Qf.displayName="MenuIcon";const $f=["icon","iconSpacing","command","commandSpacing","children"];var em=cr(((e,t)=>{const{icon:n,iconSpacing:r="0.75rem",command:i,commandSpacing:a="0.75rem",children:s}=e,o=Gs(y(e,$f),t),l=n||i?(0,ur.jsx)("span",{style:{pointerEvents:"none",flex:1},children:s}):s;return(0,ur.jsxs)(Kf,(0,c.A)((0,c.A)({},o),{},{className:x("chakra-menu__menuitem",o.className),children:[n&&(0,ur.jsx)(Qf,{fontSize:"0.8em",marginEnd:r,children:n}),l,i&&(0,ur.jsx)(Jf,{marginStart:a,children:i})]}))}));em.displayName="MenuItem";var tm=Object.defineProperty,nm=(e,t,n)=>(((e,t,n)=>{t in e?tm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n),rm=new class{constructor(){nm(this,"modals"),this.modals=new Map}add(e){return this.modals.set(e,this.modals.size+1),this.modals.size}remove(e){this.modals.delete(e)}isTopModal(e){return!!e&&this.modals.get(e)===this.modals.size}};function im(e,t){const[n,i]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const n=e.current;if(n){if(t){const e=rm.add(n);i(e)}return()=>{rm.remove(n),i(0)}}}),[t,e]),n}var am=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},sm=new WeakMap,om=new WeakMap,lm={},cm=0,um=function(e){return e&&(e.host||um(e.parentNode))},dm=function(e,t,n,r){var i=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=um(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);lm[n]||(lm[n]=new WeakMap);var a=lm[n],s=[],o=new Set,l=new Set(i),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(o.has(e))u(e);else{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(sm.get(e)||0)+1,c=(a.get(e)||0)+1;sm.set(e,l),a.set(e,c),s.push(e),1===l&&i&&om.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}}))};return u(t),o.clear(),cm++,function(){s.forEach((function(e){var t=sm.get(e)-1,i=a.get(e)-1;sm.set(e,t),a.set(e,i),t||(om.has(e)||e.removeAttribute(r),om.delete(e)),i||e.removeAttribute(n)})),--cm||(sm=new WeakMap,sm=new WeakMap,om=new WeakMap,lm={})}},hm=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||am(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),dm(r,i,n,"aria-hidden")):function(){return null}};function pm(e){const{isOpen:t,onClose:n,id:i,closeOnOverlayClick:a=!0,closeOnEsc:s=!0,useInert:o=!0,onOverlayClick:l,onEsc:u}=e,d=(0,r.useRef)(null),h=(0,r.useRef)(null),[p,f,m]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const a=(0,r.useId)(),s=e||a;return(0,r.useMemo)((()=>n.map((e=>"".concat(e,"-").concat(s)))),[s,n])}(i,"chakra-modal","chakra-modal--header","chakra-modal--body");!function(e,t){const n=e.current;(0,r.useEffect)((()=>{if(e.current&&t)return hm(e.current)}),[t,e,n])}(d,t&&o);const g=im(d,t),v=(0,r.useRef)(null),y=(0,r.useCallback)((e=>{v.current=e.target}),[]),x=(0,r.useCallback)((e=>{"Escape"===e.key&&(e.stopPropagation(),s&&(null==n||n()),null==u||u())}),[s,n,u]),[b,w]=(0,r.useState)(!1),[S,_]=(0,r.useState)(!1),A=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({role:"dialog"},e),{},{ref:Lr(t,d),id:p,tabIndex:-1,"aria-modal":!0,"aria-labelledby":b?f:void 0,"aria-describedby":S?m:void 0,onClick:E(e.onClick,(e=>e.stopPropagation()))})}),[m,S,p,f,b]),C=(0,r.useCallback)((e=>{e.stopPropagation(),v.current===e.target&&rm.isTopModal(d.current)&&(a&&(null==n||n()),null==l||l())}),[n,a,l]),M=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:Lr(t,h),onClick:E(e.onClick,C),onKeyDown:E(e.onKeyDown,x),onMouseDown:E(e.onMouseDown,y)})}),[x,y,C]);return{isOpen:t,onClose:n,headerId:f,bodyId:m,setBodyMounted:_,setHeaderMounted:w,dialogRef:d,overlayRef:h,getDialogProps:A,getDialogContainerProps:M,index:g}}var[fm,mm]=gr({strict:!1,name:"PortalManagerContext"});function gm(e){const{children:t,zIndex:n}=e;return(0,ur.jsx)(fm,{value:{zIndex:n},children:t})}gm.displayName="PortalManager";var vm=Boolean(null==globalThis?void 0:globalThis.document)?r.useLayoutEffect:r.useEffect,ym=__webpack_require__(7950),xm=__webpack_require__.t(ym,2);const bm=["containerRef"];var[wm,Sm]=gr({strict:!1,name:"PortalContext"}),_m="chakra-portal",Am=e=>(0,ur.jsx)("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),Em=e=>{const{appendToParentPortal:t,children:n}=e,[i,a]=(0,r.useState)(null),s=(0,r.useRef)(null),[,o]=(0,r.useState)({});(0,r.useEffect)((()=>o({})),[]);const l=Sm(),c=mm();vm((()=>{if(!i)return;const e=i.ownerDocument,n=t&&null!=l?l:e.body;if(!n)return;s.current=e.createElement("div"),s.current.className=_m,n.appendChild(s.current),o({});const r=s.current;return()=>{n.contains(r)&&n.removeChild(r)}}),[i]);const u=(null==c?void 0:c.zIndex)?(0,ur.jsx)(Am,{zIndex:null==c?void 0:c.zIndex,children:n}):n;return s.current?(0,ym.createPortal)((0,ur.jsx)(wm,{value:s.current,children:u}),s.current):(0,ur.jsx)("span",{ref:e=>{e&&a(e)}})},Cm=e=>{const{children:t,containerRef:n,appendToParentPortal:i}=e,a=n.current,s=null!=a?a:"undefined"!==typeof window?document.body:void 0,o=(0,r.useMemo)((()=>{const e=null==a?void 0:a.ownerDocument.createElement("div");return e&&(e.className=_m),e}),[a]),[,l]=(0,r.useState)({});return vm((()=>l({})),[]),vm((()=>{if(o&&s)return s.appendChild(o),()=>{s.removeChild(o)}}),[o,s]),s&&o?(0,ym.createPortal)((0,ur.jsx)(wm,{value:i?o:null,children:t}),o):null};function Mm(e){const t=(0,c.A)({appendToParentPortal:!0},e),{containerRef:n}=t,r=y(t,bm);return n?(0,ur.jsx)(Cm,(0,c.A)({containerRef:n},r)):(0,ur.jsx)(Em,(0,c.A)({},r))}function Tm(){const e=(0,r.useRef)(!1);return po((()=>(e.current=!0,()=>{e.current=!1})),[]),e}Mm.className=_m,Mm.selector=".chakra-portal",Mm.displayName="Portal";class km extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Pm(e){let{children:t,isPresent:n}=e;const i=(0,r.useId)(),a=(0,r.useRef)(null),s=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:e,height:t,top:r,left:o}=s.current;if(n||!a.current||!e||!t)return;a.current.dataset.motionPopId=i;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(o,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}}),[n]),r.createElement(km,{isPresent:n,childRef:a,sizeRef:s},r.cloneElement(t,{ref:a}))}const Rm=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:a,custom:s,presenceAffectsLayout:o,mode:l}=e;const c=Vl(Dm),u=(0,r.useId)(),d=(0,r.useMemo)((()=>({id:u,initial:n,isPresent:i,custom:s,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;a&&a()},register:e=>(c.set(e,!1),()=>c.delete(e))})),o?void 0:[i]);return(0,r.useMemo)((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[i]),r.useEffect((()=>{!i&&!c.size&&a&&a()}),[i]),"popLayout"===l&&(t=r.createElement(Pm,{isPresent:i},t)),r.createElement(uo.Provider,{value:d},t)};function Dm(){return new Map}const Im=e=>e.key||"";const Bm=e=>{let{children:t,custom:n,initial:i=!0,onExitComplete:a,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:l="sync"}=e;Dc(!s,"Replace exitBeforeEnter with mode='wait'");const c=(0,r.useContext)(jo).forceRender||function(){const e=Tm(),[t,n]=(0,r.useState)(0),i=(0,r.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,r.useCallback)((()=>$l.postRender(i)),[i]),t]}()[0],u=Tm(),d=function(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}(t);let h=d;const p=(0,r.useRef)(new Map).current,f=(0,r.useRef)(h),m=(0,r.useRef)(new Map).current,g=(0,r.useRef)(!0);var v;if(po((()=>{g.current=!1,function(e,t){e.forEach((e=>{const n=Im(e);t.set(n,e)}))}(d,m),f.current=h})),v=()=>{g.current=!0,m.clear(),p.clear()},(0,r.useEffect)((()=>()=>v()),[]),g.current)return r.createElement(r.Fragment,null,h.map((e=>r.createElement(Rm,{key:Im(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:o,mode:l},e))));h=[...h];const y=f.current.map(Im),x=d.map(Im),b=y.length;for(let r=0;r<b;r++){const e=y[r];-1!==x.indexOf(e)||p.has(e)||p.set(e,void 0)}return"wait"===l&&p.size&&(h=[]),p.forEach(((e,t)=>{if(-1!==x.indexOf(t))return;const i=m.get(t);if(!i)return;const s=y.indexOf(t);let g=e;if(!g){const e=()=>{p.delete(t);const e=Array.from(m.keys()).filter((e=>!x.includes(e)));if(e.forEach((e=>m.delete(e))),f.current=d.filter((n=>{const r=Im(n);return r===t||e.includes(r)})),!p.size){if(!1===u.current)return;c(),a&&a()}};g=r.createElement(Rm,{key:Im(i),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:o,mode:l},i),p.set(t,g)}h.splice(s,0,g)})),h=h.map((e=>{const t=e.key;return p.has(t)?e:r.createElement(Rm,{key:Im(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)})),r.createElement(r.Fragment,null,p.size?h:h.map((e=>(0,r.cloneElement)(e))))};var[jm,Fm]=gr({name:"ModalStylesContext",errorMessage:"useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Modal />\" "}),[Lm,Om]=gr({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),Nm=e=>{const t=(0,c.A)({scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale",lockFocusAcrossFrames:!0},e),{portalProps:n,children:r,autoFocus:i,trapFocus:a,initialFocusRef:s,finalFocusRef:o,returnFocusOnClose:l,blockScrollOnMount:u,allowPinchZoom:d,preserveScrollBarGap:h,motionPreset:p,lockFocusAcrossFrames:f,onCloseComplete:m}=t,g=Rr("Modal",t),v=pm(t),y=(0,c.A)((0,c.A)({},v),{},{autoFocus:i,trapFocus:a,initialFocusRef:s,finalFocusRef:o,returnFocusOnClose:l,blockScrollOnMount:u,allowPinchZoom:d,preserveScrollBarGap:h,motionPreset:p,lockFocusAcrossFrames:f});return(0,ur.jsx)(Lm,{value:y,children:(0,ur.jsx)(jm,{value:g,children:(0,ur.jsx)(Bm,{onExitComplete:m,children:y.isOpen&&(0,ur.jsx)(Mm,(0,c.A)((0,c.A)({},n),{},{children:r}))})})})};Nm.displayName="Modal";var zm={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]};var Um={enter:{duration:.2,ease:zm.easeOut},exit:{duration:.1,ease:zm.easeIn}},Hm=(e,t)=>(0,c.A)((0,c.A)({},e),{},{delay:"number"===typeof t?t:null==t?void 0:t.enter}),Gm=(e,t)=>(0,c.A)((0,c.A)({},e),{},{delay:"number"===typeof t?t:null==t?void 0:t.exit});const Vm=["unmountOnExit","in","className","transition","transitionEnd","delay"];var Wm={enter:function(){let{transition:e,transitionEnd:t,delay:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r;return{opacity:1,transition:null!=(r=null==e?void 0:e.enter)?r:Hm(Um.enter,n),transitionEnd:null==t?void 0:t.enter}},exit:function(){let{transition:e,transitionEnd:t,delay:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r;return{opacity:0,transition:null!=(r=null==e?void 0:e.exit)?r:Gm(Um.exit,n),transitionEnd:null==t?void 0:t.exit}}},qm={initial:"exit",animate:"enter",exit:"exit",variants:Wm},Xm=(0,r.forwardRef)((function(e,t){const{unmountOnExit:n,in:r,className:i,transition:a,transitionEnd:s,delay:o}=e,l=y(e,Vm),u=r||n?"enter":"exit",d=!n||r&&n,h={transition:a,transitionEnd:s,delay:o};return(0,ur.jsx)(Bm,{custom:h,children:d&&(0,ur.jsx)(Gf.div,(0,c.A)((0,c.A)({ref:t,className:x("chakra-fade",i),custom:h},qm),{},{animate:u},l))})}));Xm.displayName="Fade";const Jm=["className","transition","motionProps"];var Ym=lr(Gf.div),Km=cr(((e,t)=>{const{className:n,transition:r,motionProps:i}=e,a=y(e,Jm),s=x("chakra-modal__overlay",n),o=Fm(),l=(0,c.A)({pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh"},o.overlay),{motionPreset:u}=Om(),d=i||("none"===u?{}:qm);return(0,ur.jsx)(Ym,(0,c.A)((0,c.A)({},d),{},{__css:l,ref:t,className:s},a))}));Km.displayName="ModalOverlay";const Zm=["unmountOnExit","in","reverse","className","offsetX","offsetY","transition","transitionEnd","delay"];var Qm={initial:e=>{let{offsetX:t,offsetY:n,transition:r,transitionEnd:i,delay:a}=e;var s;return{opacity:0,x:t,y:n,transition:null!=(s=null==r?void 0:r.exit)?s:Gm(Um.exit,a),transitionEnd:null==i?void 0:i.exit}},enter:e=>{let{transition:t,transitionEnd:n,delay:r}=e;var i;return{opacity:1,x:0,y:0,transition:null!=(i=null==t?void 0:t.enter)?i:Hm(Um.enter,r),transitionEnd:null==n?void 0:n.enter}},exit:e=>{let{offsetY:t,offsetX:n,transition:r,transitionEnd:i,reverse:a,delay:s}=e;var o;const l={x:n,y:t};return(0,c.A)({opacity:0,transition:null!=(o=null==r?void 0:r.exit)?o:Gm(Um.exit,s)},a?(0,c.A)((0,c.A)({},l),{},{transitionEnd:null==i?void 0:i.exit}):{transitionEnd:(0,c.A)((0,c.A)({},l),null==i?void 0:i.exit)})}},$m={initial:"initial",animate:"enter",exit:"exit",variants:Qm},eg=(0,r.forwardRef)((function(e,t){const{unmountOnExit:n,in:r,reverse:i=!0,className:a,offsetX:s=0,offsetY:o=8,transition:l,transitionEnd:u,delay:d}=e,h=y(e,Zm),p=!n||r&&n,f=r||n?"enter":"exit",m={offsetX:s,offsetY:o,reverse:i,transition:l,transitionEnd:u,delay:d};return(0,ur.jsx)(Bm,{custom:m,children:p&&(0,ur.jsx)(Gf.div,(0,c.A)((0,c.A)({ref:t,className:x("chakra-offset-slide",a),custom:m},$m),{},{animate:f},h))})}));eg.displayName="SlideFade";const tg=["unmountOnExit","in","reverse","initialScale","className","transition","transitionEnd","delay"];var ng={exit:e=>{let{reverse:t,initialScale:n,transition:r,transitionEnd:i,delay:a}=e;var s;return(0,c.A)((0,c.A)({opacity:0},t?{scale:n,transitionEnd:null==i?void 0:i.exit}:{transitionEnd:(0,c.A)({scale:n},null==i?void 0:i.exit)}),{},{transition:null!=(s=null==r?void 0:r.exit)?s:Gm(Um.exit,a)})},enter:e=>{let{transitionEnd:t,transition:n,delay:r}=e;var i;return{opacity:1,scale:1,transition:null!=(i=null==n?void 0:n.enter)?i:Hm(Um.enter,r),transitionEnd:null==t?void 0:t.enter}}},rg={initial:"exit",animate:"enter",exit:"exit",variants:ng},ig=(0,r.forwardRef)((function(e,t){const{unmountOnExit:n,in:r,reverse:i=!0,initialScale:a=.95,className:s,transition:o,transitionEnd:l,delay:u}=e,d=y(e,tg),h=!n||r&&n,p=r||n?"enter":"exit",f={initialScale:a,reverse:i,transition:o,transitionEnd:l,delay:u};return(0,ur.jsx)(Bm,{custom:f,children:h&&(0,ur.jsx)(Gf.div,(0,c.A)((0,c.A)({ref:t,className:x("chakra-offset-slide",s)},rg),{},{animate:p,custom:f},d))})}));ig.displayName="ScaleFade";const ag=["preset","motionProps"];var sg={slideInBottom:(0,c.A)((0,c.A)({},$m),{},{custom:{offsetY:16,reverse:!0}}),slideInRight:(0,c.A)((0,c.A)({},$m),{},{custom:{offsetX:16,reverse:!0}}),slideInTop:(0,c.A)((0,c.A)({},$m),{},{custom:{offsetY:-16,reverse:!0}}),slideInLeft:(0,c.A)((0,c.A)({},$m),{},{custom:{offsetX:-16,reverse:!0}}),scale:(0,c.A)((0,c.A)({},rg),{},{custom:{initialScale:.95,reverse:!0}}),none:{}},og=lr(Gf.section),lg=e=>sg[e||"none"],cg=(0,r.forwardRef)(((e,t)=>{const{preset:n,motionProps:r=lg(n)}=e,i=y(e,ag);return(0,ur.jsx)(og,(0,c.A)((0,c.A)({ref:t},r),i))}));cg.displayName="ModalTransition";var ug="data-focus-lock",dg="data-focus-lock-disabled";function hg(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var pg=new WeakMap;function fg(e,t){var n=function(e,t){var n=(0,r.useState)((function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}}))[0];return n.callback=t,n.facade}(t||null,(function(t){return e.forEach((function(e){return hg(e,t)}))}));return r.useLayoutEffect((function(){var t=pg.get(n);if(t){var r=new Set(t),i=new Set(e),a=n.current;r.forEach((function(e){i.has(e)||hg(e,null)})),i.forEach((function(e){r.has(e)||hg(e,a)}))}pg.set(n,e)}),[e]),n}var mg={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},gg=function(e){var t=e.children,n=void 0===t?null:t;return r.createElement(r.Fragment,null,r.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:mg}),n,n&&r.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:mg}))};gg.propTypes={};var vg=function(){return vg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},vg.apply(this,arguments)};function yg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function xg(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function bg(e){return e}function wg(e,t){void 0===t&&(t=bg);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter((function(e){return e!==i}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(a)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}};return i}function Sg(e,t){return void 0===t&&(t=bg),wg(e,t)}function _g(e){void 0===e&&(e={});var t=wg(null);return t.options=vg({async:!0,ssr:!1},e),t}var Ag=Sg({},(function(e){return{target:e.target,currentTarget:e.currentTarget}})),Eg=Sg(),Cg=Sg(),Mg=_g({async:!0,ssr:"undefined"!==typeof document}),Tg=(0,r.createContext)(void 0),kg=[],Pg=r.forwardRef((function(e,t){var n,i=r.useState(),a=i[0],s=i[1],o=r.useRef(),l=r.useRef(!1),c=r.useRef(null),u=r.useState({})[1],d=e.children,h=e.disabled,p=void 0!==h&&h,f=e.noFocusGuards,m=void 0!==f&&f,g=e.persistentFocus,v=void 0!==g&&g,y=e.crossFrame,x=void 0===y||y,b=e.autoFocus,w=void 0===b||b,S=(e.allowTextSelection,e.group),_=e.className,A=e.whiteList,E=e.hasPositiveIndices,C=e.shards,M=void 0===C?kg:C,T=e.as,k=void 0===T?"div":T,P=e.lockProps,R=void 0===P?{}:P,D=e.sideCar,I=e.returnFocus,B=void 0!==I&&I,j=e.focusOptions,F=e.onActivation,L=e.onDeactivation,O=r.useState({})[0],N=r.useCallback((function(e){var t=e.captureFocusRestore;if(!c.current){var n,r=null==(n=document)?void 0:n.activeElement;c.current=r,r!==document.body&&(c.current=t(r))}o.current&&F&&F(o.current),l.current=!0,u()}),[F]),z=r.useCallback((function(){l.current=!1,L&&L(o.current),u()}),[L]),U=r.useCallback((function(e){var t=c.current;if(t){var n=("function"===typeof t?t():t)||document.body,r="function"===typeof B?B(n):B;if(r){var i="object"===typeof r?r:void 0;c.current=null,e?Promise.resolve().then((function(){return n.focus(i)})):n.focus(i)}}}),[B]),H=r.useCallback((function(e){l.current&&Ag.useMedium(e)}),[]),G=Eg.useMedium,V=r.useCallback((function(e){o.current!==e&&(o.current=e,s(e))}),[]);var W=wt(((n={})[dg]=p&&"disabled",n[ug]=S,n),R),q=!0!==m,X=q&&"tail"!==m,J=fg([t,V]),Y=r.useMemo((function(){return{observed:o,shards:M,enabled:!p,active:l.current}}),[p,l.current,M,a]);return r.createElement(r.Fragment,null,q&&[r.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:mg}),E?r.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:mg}):null],!p&&r.createElement(D,{id:O,sideCar:Mg,observed:a,disabled:p,persistentFocus:v,crossFrame:x,autoFocus:w,whiteList:A,shards:M,onActivation:N,onDeactivation:z,returnFocus:U,focusOptions:j}),r.createElement(k,wt({ref:J},W,{className:_,onBlur:G,onFocus:H}),r.createElement(Tg.Provider,{value:Y},d)),X&&r.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:mg}))}));Pg.propTypes={};const Rg=Pg;function Dg(e,t){return Dg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dg(e,t)}var Ig=__webpack_require__(4705);const Bg=function(e,t){return function(n){var i,a=[];function s(){i=e(a.map((function(e){return e.props}))),t(i)}var o=function(e){function t(){return e.apply(this,arguments)||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Dg(e,t)}(t,e),t.peek=function(){return i};var o=t.prototype;return o.componentDidMount=function(){a.push(this),s()},o.componentDidUpdate=function(){s()},o.componentWillUnmount=function(){var e=a.indexOf(this);a.splice(e,1),s()},o.render=function(){return r.createElement(n,this.props)},t}(r.PureComponent);return(0,Ig.A)(o,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),o}};var jg=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},Fg=function(e){return Array.isArray(e)?e:[e]},Lg=function(e){return Array.isArray(e)?e[0]:e},Og=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},Ng=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},zg=function(e,t){return!e||Ng(e)||!function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!(!t||!t.getPropertyValue)&&("none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility"))}(e)&&!function(e){return e.hasAttribute("inert")}(e)&&t(Og(e))},Ug=function(e,t){var n=e.get(t);if(void 0!==n)return n;var r=zg(t,Ug.bind(void 0,e));return e.set(t,r),r},Hg=function(e,t){var n=e.get(t);if(void 0!==n)return n;var r=function(e,t){return!(e&&!Ng(e))||!!qg(e)&&t(Og(e))}(t,Hg.bind(void 0,e));return e.set(t,r),r},Gg=function(e){return e.dataset},Vg=function(e){return"INPUT"===e.tagName},Wg=function(e){return Vg(e)&&"radio"===e.type},qg=function(e){var t=e.getAttribute("data-no-autofocus");return![!0,"true",""].includes(t)},Xg=function(e){var t;return Boolean(e&&(null===(t=Gg(e))||void 0===t?void 0:t.focusGuard))},Jg=function(e){return!Xg(e)},Yg=function(e){return Boolean(e)},Kg=function(e,t){var n=Math.max(0,e.tabIndex),r=Math.max(0,t.tabIndex),i=n-r,a=e.index-t.index;if(i){if(!n)return 1;if(!r)return-1}return i||a},Zg=function(e,t,n){return jg(e).map((function(e,t){var r=function(e){return e.tabIndex<0&&!e.hasAttribute("tabindex")?0:e.tabIndex}(e);return{node:e,index:t,tabIndex:n&&-1===r?(e.dataset||{}).focusGuard?0:-1:r}})).filter((function(e){return!t||e.tabIndex>=0})).sort(Kg)},Qg=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"].join(","),$g="".concat(Qg,", [data-focus-guard]"),ev=function(e,t){return jg((e.shadowRoot||e).children).reduce((function(e,n){return e.concat(n.matches(t?$g:Qg)?[n]:[],ev(n))}),[])},tv=function(e,t){return e.reduce((function(e,n){var r,i=ev(n,t),a=(r=[]).concat.apply(r,i.map((function(e){return function(e,t){var n;return e instanceof HTMLIFrameElement&&(null===(n=e.contentDocument)||void 0===n?void 0:n.body)?tv([e.contentDocument.body],t):[e]}(e,t)})));return e.concat(a,n.parentNode?jg(n.parentNode.querySelectorAll(Qg)).filter((function(e){return e===n})):[])}),[])},nv=function(e,t){return jg(e).filter((function(e){return Ug(t,e)})).filter((function(e){return function(e){return!((Vg(e)||function(e){return"BUTTON"===e.tagName}(e))&&("hidden"===e.type||e.disabled))}(e)}))},rv=function(e,t){return void 0===t&&(t=new Map),jg(e).filter((function(e){return Hg(t,e)}))},iv=function(e,t,n){return Zg(nv(tv(e,n),t),!0,n)},av=function(e,t){return Zg(nv(tv(e),t),!1)},sv=function(e,t){return nv(function(e){var t=e.querySelectorAll("[".concat("data-autofocus-inside","]"));return jg(t).map((function(e){return tv([e])})).reduce((function(e,t){return e.concat(t)}),[])}(e),t)},ov=function(e,t){return e.shadowRoot?ov(e.shadowRoot,t):!(void 0===Object.getPrototypeOf(e).contains||!Object.getPrototypeOf(e).contains.call(e,t))||jg(e.children).some((function(e){var n;if(e instanceof HTMLIFrameElement){var r=null===(n=e.contentDocument)||void 0===n?void 0:n.body;return!!r&&ov(r,t)}return ov(e,t)}))},lv=function(e){if(void 0===e&&(e=document),e&&e.activeElement){var t=e.activeElement;return t.shadowRoot?lv(t.shadowRoot):t instanceof HTMLIFrameElement&&function(e){try{return e()}catch(t){return}}((function(){return t.contentWindow.document}))?lv(t.contentWindow.document):t}},cv=function(e){return e.parentNode?cv(e.parentNode):e},uv=function(e){return Fg(e).filter(Boolean).reduce((function(e,t){var n=t.getAttribute(ug);return e.push.apply(e,n?function(e){for(var t=new Set,n=e.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var a=e[r].compareDocumentPosition(e[i]);(a&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(i),(a&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return e.filter((function(e,n){return!t.has(n)}))}(jg(cv(t).querySelectorAll("[".concat(ug,'="').concat(n,'"]:not([').concat(dg,'="disabled"])')))):[t]),e}),[])},dv=function(e,t){return void 0===t&&(t=lv(Lg(e).ownerDocument)),!(!t||t.dataset&&t.dataset.focusGuard)&&uv(e).some((function(e){return ov(e,t)||function(e,t){return Boolean(jg(e.querySelectorAll("iframe")).some((function(e){return function(e,t){return e===t}(e,t)})))}(e,t)}))},hv=function(e,t){e&&("focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus())},pv=function(e,t){return Wg(e)&&e.name?function(e,t){return t.filter(Wg).filter((function(t){return t.name===e.name})).filter((function(e){return e.checked}))[0]||e}(e,t):e},fv=function(e){return e[0]&&e.length>1?pv(e[0],e):e[0]},mv=function(e,t){return e.indexOf(pv(t,e))},gv="NEW_FOCUS",vv=function(e,t,n,r,i){var a=e.length,s=e[0],o=e[a-1],l=Xg(r);if(!(r&&e.indexOf(r)>=0)){var c=void 0!==r?n.indexOf(r):-1,u=i?n.indexOf(i):c,d=i?e.indexOf(i):-1;if(-1===c)return-1!==d?d:gv;if(-1===d)return gv;var h=c-u,p=n.indexOf(s),f=n.indexOf(o),m=function(e){var t=new Set;return e.forEach((function(n){return t.add(pv(n,e))})),e.filter((function(e){return t.has(e)}))}(n),g=(void 0!==r?m.indexOf(r):-1)-(i?m.indexOf(i):c);if(!h&&d>=0)return d;if(0===t.length)return d;var v=mv(e,t[0]),y=mv(e,t[t.length-1]);return c<=p&&l&&Math.abs(h)>1?y:c>=f&&l&&Math.abs(h)>1?v:h&&Math.abs(g)>1?d:c<=p?y:c>f?v:h?Math.abs(h)>1?d:(a+d+h)%a:void 0}},yv=function(e,t,n){var r,i=e.map((function(e){return e.node})),a=rv(i.filter((r=n,function(e){var t,n=null===(t=Gg(e))||void 0===t?void 0:t.autofocus;return e.autofocus||void 0!==n&&"false"!==n||r.indexOf(e)>=0})));return a&&a.length?fv(a):fv(rv(t))},xv=function(e,t){return void 0===t&&(t=[]),t.push(e),e.parentNode&&xv(e.parentNode.host||e.parentNode,t),t},bv=function(e,t){for(var n=xv(e),r=xv(t),i=0;i<n.length;i+=1){var a=n[i];if(r.indexOf(a)>=0)return a}return!1},wv=function(e,t,n){var r=Fg(e),i=Fg(t),a=r[0],s=!1;return i.filter(Boolean).forEach((function(e){s=bv(s||e,e)||s,n.filter(Boolean).forEach((function(e){var t=bv(a,e);t&&(s=!s||ov(t,s)?t:bv(t,s))}))})),s},Sv=function(e,t){return e.reduce((function(e,n){return e.concat(sv(n,t))}),[])},_v=function(e,t){var n=lv(Fg(e).length>0?document:Lg(e).ownerDocument),r=uv(e).filter(Jg),i=wv(n||e,e,r),a=new Map,s=av(r,a),o=s.filter((function(e){var t=e.node;return Jg(t)}));if(o[0]){var l=av([i],a).map((function(e){return e.node})),c=function(e,t){var n=new Map;return t.forEach((function(e){return n.set(e.node,e)})),e.map((function(e){return n.get(e)})).filter(Yg)}(l,o),u=c.map((function(e){return e.node})),d=c.filter((function(e){return e.tabIndex>=0})).map((function(e){return e.node})),h=vv(u,d,l,n,t);if(h===gv){var p=yv(s,d,Sv(r,a))||yv(s,u,Sv(r,a));return p?{node:p}:void console.warn("focus-lock: cannot find any node to move focus into")}return void 0===h?h:c[h]}},Av=0,Ev=!1,Cv=function(e,t,n){void 0===n&&(n={});var r=_v(e,t);if(!Ev&&r){if(Av>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),Ev=!0,void setTimeout((function(){Ev=!1}),1);Av++,hv(r.node,n.focusOptions),Av--}},Mv=function(e,t,n){void 0===t&&(t={});var r=function(e){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},e)}(t),i=function(e,t,n){if(!e||!t)return console.error("no element or scope given"),{};var r=Fg(t);if(r.every((function(t){return!ov(t,e)})))return console.error("Active element is not contained in the scope"),{};var i=n?iv(r,new Map):av(r,new Map),a=i.findIndex((function(t){return t.node===e}));return-1!==a?{prev:i[a-1],next:i[a+1],first:i[0],last:i[i.length-1]}:void 0}(e,r.scope,r.onlyTabbable);if(i){var a=n(i,r.cycle);a&&hv(a.node,r.focusOptions)}},Tv=function(e,t,n){var r,i=function(e,t){var n=t?iv(Fg(e),new Map):av(Fg(e),new Map);return{first:n[0],last:n[n.length-1]}}(e,null===(r=t.onlyTabbable)||void 0===r||r)[n];i&&hv(i.node,t.focusOptions)};function kv(e){if(!e)return null;var t=e?new WeakRef(e):null;return function(){return(null===t||void 0===t?void 0:t.deref())||null}}function Pv(e){setTimeout(e,1)}var Rv=function(e){return e&&"current"in e?e.current:e},Dv=function(){return document&&document.activeElement===document.body||function(e){void 0===e&&(e=document);var t=lv(e);return!!t&&jg(e.querySelectorAll("[".concat("data-no-focus-lock","]"))).some((function(e){return ov(e,t)}))}()},Iv=null,Bv=null,jv=null,Fv=!1,Lv=function(){return!0};function Ov(e,t,n,r){var i=null,a=e;do{var s=r[a];if(s.guard)s.node.dataset.focusAutoGuard&&(i=s);else{if(!s.lockItem)break;if(a!==e)return;i=null}}while((a+=n)!==t);i&&(i.node.tabIndex=0)}var Nv=function e(t,n,r){return n&&(n.host===t&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,r))},zv=function(){var e,t=!1;if(Iv){var n=Iv,r=n.observed,i=n.persistentFocus,a=n.autoFocus,s=n.shards,o=n.crossFrame,l=n.focusOptions,c=r||jv&&jv.portaledElement,u=document&&document.activeElement;if(c){var d=[c].concat(s.map(Rv).filter(Boolean));if(u&&!function(e){return(Iv.whiteList||Lv)(e)}(u)||(i||(o?Boolean(Fv):"meanwhile"===Fv)||!Dv()||!Bv&&a)&&(c&&!(dv(d)||u&&function(e,t){return t.some((function(t){return Nv(e,t,t)}))}(u,d)||(e=u,jv&&jv.portaledElement===e))&&(document&&!Bv&&u&&!a?(u.blur&&u.blur(),document.body.focus()):(t=Cv(d,Bv,{focusOptions:l}),jv={})),Fv=!1,Bv=document&&document.activeElement),document&&u!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var h=document&&document.activeElement,p=function(e){var t=uv(e).filter(Jg),n=wv(e,e,t),r=Zg(tv([n],!0),!0,!0),i=tv(t,!1);return r.map((function(e){var t=e.node;return{node:t,index:e.index,lockItem:i.indexOf(t)>=0,guard:Xg(t)}}))}(d),f=p.map((function(e){return e.node})).indexOf(h);f>-1&&(p.filter((function(e){var t=e.guard,n=e.node;return t&&n.dataset.focusAutoGuard})).forEach((function(e){return e.node.removeAttribute("tabIndex")})),Ov(f,p.length,1,p),Ov(f,-1,-1,p))}}}return t},Uv=function(e){zv()&&e&&(e.stopPropagation(),e.preventDefault())},Hv=function(){return Pv(zv)},Gv=function(e){var t=e.target,n=e.currentTarget;n.contains(t)||(jv={observerNode:n,portaledElement:t})},Vv=function(){Fv="just",Pv((function(){Fv="meanwhile"}))};var Wv={moveFocusInside:Cv,focusInside:dv,focusNextElement:function(e,t){void 0===t&&(t={}),Mv(e,t,(function(e,t){var n=e.next,r=e.first;return n||t&&r}))},focusPrevElement:function(e,t){void 0===t&&(t={}),Mv(e,t,(function(e,t){var n=e.prev,r=e.last;return n||t&&r}))},focusFirstElement:function(e,t){void 0===t&&(t={}),Tv(e,t,"first")},focusLastElement:function(e,t){void 0===t&&(t={}),Tv(e,t,"last")},captureFocusRestore:function(e){var t=function(e){if(!e)return null;for(var t=[],n=e;n&&n!==document.body;)t.push({current:kv(n),parent:kv(n.parentElement),left:kv(n.previousElementSibling),right:kv(n.nextElementSibling)}),n=n.parentElement;return{element:kv(e),stack:t,ownerDocument:e.ownerDocument}}(e);return function(){return function(e){var t,n,r,i,a;if(e)for(var s=e.stack,o=e.ownerDocument,l=new Map,c=0,u=s;c<u.length;c++){var d=u[c],h=null===(t=d.parent)||void 0===t?void 0:t.call(d);if(h&&o.contains(h)){for(var p=null===(n=d.left)||void 0===n?void 0:n.call(d),f=null===(r=d.right)||void 0===r?void 0:r.call(d),m=iv([h],l),g=null!==(a=null!==(i=null===p||void 0===p?void 0:p.nextElementSibling)&&void 0!==i?i:f)&&void 0!==a?a:p;g;){for(var v=0,y=m;v<y.length;v++){var x=y[v];if(null===g||void 0===g?void 0:g.contains(x.node))return x.node}g=g.nextElementSibling}if(m.length)return m[0].node}}}(t)}}};Ag.assignSyncMedium(Gv),Eg.assignMedium(Hv),Cg.assignMedium((function(e){return e(Wv)}));const qv=Bg((function(e){return e.filter((function(e){return!e.disabled}))}),(function(e){var t=e.slice(-1)[0];t&&!Iv&&(document.addEventListener("focusin",Uv),document.addEventListener("focusout",Hv),window.addEventListener("blur",Vv));var n=Iv,r=n&&t&&t.id===n.id;Iv=t,n&&!r&&(n.onDeactivation(),e.filter((function(e){return e.id===n.id})).length||n.returnFocus(!t)),t?(Bv=null,r&&n.observed===t.observed||t.onActivation(Wv),zv(),Pv(zv)):(document.removeEventListener("focusin",Uv),document.removeEventListener("focusout",Hv),window.removeEventListener("blur",Vv),Bv=null)}))((function(){return null}));var Xv=r.forwardRef((function(e,t){return r.createElement(Rg,wt({sideCar:qv,ref:t},e))})),Jv=Rg.propTypes||{};Jv.sideCar,v(Jv,["sideCar"]);Xv.propTypes={};const Yv=Xv;var Kv,Zv=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"].join(),Qv=e=>e.offsetWidth>0&&e.offsetHeight>0;function $v(e){const t=Array.from(e.querySelectorAll(Zv));return t.unshift(e),t.filter((e=>Fi(e)&&Qv(e)))}var ey=null!=(Kv=Yv.default)?Kv:Yv,ty=e=>{const{initialFocusRef:t,finalFocusRef:n,contentRef:i,restoreFocus:a,children:s,isDisabled:o,autoFocus:l,persistentFocus:c,lockFocusAcrossFrames:u}=e,d=(0,r.useCallback)((()=>{if(null==t?void 0:t.current)t.current.focus();else if(null==i?void 0:i.current){0===$v(i.current).length&&requestAnimationFrame((()=>{var e;null==(e=i.current)||e.focus()}))}}),[t,i]),h=(0,r.useCallback)((()=>{var e;null==(e=null==n?void 0:n.current)||e.focus()}),[n]),p=a&&!n;return(0,ur.jsx)(ey,{crossFrame:u,persistentFocus:c,autoFocus:l,disabled:o,onActivation:d,onDeactivation:h,returnFocus:p,children:s})};ty.displayName="FocusLock";var ny="right-scroll-bar-position",ry="width-before-scroll-bar",iy=_g(),ay=function(){},sy=r.forwardRef((function(e,t){var n=r.useRef(null),i=r.useState({onScrollCapture:ay,onWheelCapture:ay,onTouchMoveCapture:ay}),a=i[0],s=i[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,f=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,x=e.gapMode,b=yg(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,S=fg([n,t]),_=vg(vg({},b),a);return r.createElement(r.Fragment,null,d&&r.createElement(w,{sideCar:iy,removeScrollBar:u,shards:h,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:x}),o?r.cloneElement(r.Children.only(l),vg(vg({},_),{ref:S})):r.createElement(y,vg({},_,{className:c,ref:S}),l))}));sy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},sy.classNames={fullWidth:ry,zeroRight:ny};var oy,ly=function(e){var t=e.sideCar,n=yg(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return r.createElement(i,vg({},n))};ly.isSideCarExport=!0;function cy(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=oy||__webpack_require__.nc;return t&&e.setAttribute("nonce",t),e}var uy=function(){var e=0,t=null;return{add:function(n){0==e&&(t=cy())&&(function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}(t,n),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dy=function(){var e=function(){var e=uy();return function(t,n){r.useEffect((function(){return e.add(t),function(){e.remove()}}),[t&&n])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},hy={left:0,top:0,right:0,gap:0},py=function(e){return parseInt(e||"",10)||0},fy=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return hy;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[py(n),py(r),py(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},my=dy(),gy="data-scroll-locked",vy=function(e,t,n,r){var i=e.left,a=e.top,s=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(gy,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(ny," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(ry," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(ny," .").concat(ny," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(ry," .").concat(ry," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(gy,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},yy=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,a=void 0===i?"margin":i,s=r.useMemo((function(){return fy(a)}),[a]);return r.useEffect((function(){return document.body.setAttribute(gy,""),function(){document.body.removeAttribute(gy)}}),[]),r.createElement(my,{styles:vy(s,!t,a,n?"":"!important")})},xy=!1;if("undefined"!==typeof window)try{var by=Object.defineProperty({},"passive",{get:function(){return xy=!0,!0}});window.addEventListener("test",by,by),window.removeEventListener("test",by,by)}catch(Kie){xy=!1}var wy=!!xy&&{passive:!1},Sy=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},_y=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Ay(e,r)){var i=Ey(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ay=function(e,t){return"v"===e?function(e){return Sy(e,"overflowY")}(t):function(e){return Sy(e,"overflowX")}(t)},Ey=function(e,t){return"v"===e?function(e){return[e.scrollTop,e.scrollHeight,e.clientHeight]}(t):function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t)},Cy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},My=function(e){return[e.deltaX,e.deltaY]},Ty=function(e){return e&&"current"in e?e.current:e},ky=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Py=0,Ry=[];function Dy(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Iy=(By=function(e){var t=r.useRef([]),n=r.useRef([0,0]),i=r.useRef(),a=r.useState(Py++)[0],s=r.useState(dy)[0],o=r.useRef(e);r.useEffect((function(){o.current=e}),[e]),r.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=xg([e.lockRef.current],(e.shards||[]).map(Ty),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(a))})),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(a))}))}}}),[e.inert,e.lockRef.current,e.shards]);var l=r.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!o.current.allowPinchZoom;var r,a=Cy(e),s=n.current,l="deltaX"in e?e.deltaX:s[0]-a[0],c="deltaY"in e?e.deltaY:s[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=_y(d,u);if(!h)return!0;if(h?r=d:(r="v"===d?"h":"v",h=_y(d,u)),!h)return!1;if(!i.current&&"changedTouches"in e&&(l||c)&&(i.current=r),!r)return!0;var p=i.current||r;return function(e,t,n,r,i){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=a*r,o=n.target,l=t.contains(o),c=!1,u=s>0,d=0,h=0;do{var p=Ey(e,o),f=p[0],m=p[1]-p[2]-a*f;(f||m)&&Ay(e,o)&&(d+=m,h+=f),o=o instanceof ShadowRoot?o.host:o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&(i&&Math.abs(d)<1||!i&&s>d)||!u&&(i&&Math.abs(h)<1||!i&&-s>h))&&(c=!0),c}(p,t,e,"h"===p?l:c,!0)}),[]),c=r.useCallback((function(e){var n=e;if(Ry.length&&Ry[Ry.length-1]===s){var r="deltaY"in n?My(n):Cy(n),i=t.current.filter((function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)}))[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var a=(o.current.shards||[]).map(Ty).filter(Boolean).filter((function(e){return e.contains(n.target)}));(a.length>0?l(n,a[0]):!o.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),u=r.useCallback((function(e,n,r,i){var a={name:e,delta:n,target:r,should:i,shadowParent:Dy(r)};t.current.push(a),setTimeout((function(){t.current=t.current.filter((function(e){return e!==a}))}),1)}),[]),d=r.useCallback((function(e){n.current=Cy(e),i.current=void 0}),[]),h=r.useCallback((function(t){u(t.type,My(t),t.target,l(t,e.lockRef.current))}),[]),p=r.useCallback((function(t){u(t.type,Cy(t),t.target,l(t,e.lockRef.current))}),[]);r.useEffect((function(){return Ry.push(s),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,wy),document.addEventListener("touchmove",c,wy),document.addEventListener("touchstart",d,wy),function(){Ry=Ry.filter((function(e){return e!==s})),document.removeEventListener("wheel",c,wy),document.removeEventListener("touchmove",c,wy),document.removeEventListener("touchstart",d,wy)}}),[]);var f=e.removeScrollBar,m=e.inert;return r.createElement(r.Fragment,null,m?r.createElement(s,{styles:ky(a)}):null,f?r.createElement(yy,{gapMode:e.gapMode}):null)},iy.useMedium(By),ly);var By,jy=r.forwardRef((function(e,t){return r.createElement(sy,vg({},e,{ref:t,sideCar:Iy}))}));jy.classNames=sy.classNames;const Fy=jy;function Ly(e){const{autoFocus:t,trapFocus:n,dialogRef:i,initialFocusRef:a,blockScrollOnMount:s,allowPinchZoom:o,finalFocusRef:l,returnFocusOnClose:c,preserveScrollBarGap:u,lockFocusAcrossFrames:d,isOpen:h}=Om(),[p,f]=rp();(0,r.useEffect)((()=>{!p&&f&&setTimeout(f)}),[p,f]);const m=im(i,h);return(0,ur.jsx)(ty,{autoFocus:t,isDisabled:!n,initialFocusRef:a,finalFocusRef:l,restoreFocus:c,contentRef:i,lockFocusAcrossFrames:d,children:(0,ur.jsx)(Fy,{removeScrollBar:!u,allowPinchZoom:o,enabled:1===m&&s,forwardProps:!0,children:e.children})})}const Oy=["className","children","containerProps","motionProps"];var Ny=cr(((e,t)=>{const{className:n,children:r,containerProps:i,motionProps:a}=e,s=y(e,Oy),{getDialogProps:o,getDialogContainerProps:l}=Om(),u=o(s,t),d=l(i),h=x("chakra-modal__content",n),p=Fm(),f=(0,c.A)({display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0},p.dialog),m=(0,c.A)({display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0},p.dialogContainer),{motionPreset:g}=Om();return(0,ur.jsx)(Ly,{children:(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},d),{},{className:"chakra-modal__content-container",tabIndex:-1,__css:m,children:(0,ur.jsx)(cg,(0,c.A)((0,c.A)({preset:g,motionProps:a,className:h},u),{},{__css:f,children:r}))}))})}));Ny.displayName="ModalContent";const zy=["className"];var Uy=cr(((e,t)=>{const{className:n}=e,i=y(e,zy),{headerId:a,setHeaderMounted:s}=Om();(0,r.useEffect)((()=>(s(!0),()=>s(!1))),[s]);const o=x("chakra-modal__header",n),l=Fm(),u=(0,c.A)({flex:0},l.header);return(0,ur.jsx)(lr.header,(0,c.A)((0,c.A)({ref:t,className:o,id:a},i),{},{__css:u}))}));Uy.displayName="ModalHeader";const Hy=["as","viewBox","color","focusable","children","className","__css"];var Gy={path:(0,ur.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,ur.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,ur.jsx)("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,ur.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Vy=cr(((e,t)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:a=!1,children:s,className:o,__css:l}=e,u=y(e,Hy),d=x("chakra-icon",o),h=Pr("Icon",e),p={ref:t,focusable:a,className:d,__css:(0,c.A)((0,c.A)({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i},l),h)},f=null!=r?r:Gy.viewBox;if(n&&"string"!==typeof n)return(0,ur.jsx)(lr.svg,(0,c.A)((0,c.A)({as:n},p),u));const m=null!=s?s:Gy.path;return(0,ur.jsx)(lr.svg,(0,c.A)((0,c.A)((0,c.A)({verticalAlign:"middle",viewBox:f},p),u),{},{children:m}))}));Vy.displayName="Icon";const Wy=["children","isDisabled","__css"];function qy(e){return(0,ur.jsx)(Vy,(0,c.A)((0,c.A)({focusable:"false","aria-hidden":!0},e),{},{children:(0,ur.jsx)("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})}))}var Xy=cr((function(e,t){const n=Pr("CloseButton",e),r=ft(e),{children:i,isDisabled:a,__css:s}=r,o=y(r,Wy);return(0,ur.jsx)(lr.button,(0,c.A)((0,c.A)({type:"button","aria-label":"Close",ref:t,disabled:a,__css:(0,c.A)((0,c.A)((0,c.A)({},{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}),n),s)},o),{},{children:i||(0,ur.jsx)(qy,{width:"1em",height:"1em"})}))}));Xy.displayName="CloseButton";const Jy=["onClick","className"];var Yy=cr(((e,t)=>{const{onClick:n,className:r}=e,i=y(e,Jy),{onClose:a}=Om(),s=x("chakra-modal__close-btn",r),o=Fm();return(0,ur.jsx)(Xy,(0,c.A)({ref:t,__css:o.closeButton,className:s,onClick:E(n,(e=>{e.stopPropagation(),a()}))},i))}));Yy.displayName="ModalCloseButton";const Ky=["className"];var Zy=cr(((e,t)=>{const{className:n}=e,i=y(e,Ky),{bodyId:a,setBodyMounted:s}=Om();(0,r.useEffect)((()=>(s(!0),()=>s(!1))),[s]);const o=x("chakra-modal__body",n),l=Fm();return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t,className:o,id:a},i),{},{__css:l.body}))}));Zy.displayName="ModalBody";const Qy=["htmlSize"];var $y=cr((function(e,t){const{htmlSize:n}=e,r=y(e,Qy),i=Rr("Input",r),a=oi(ft(r)),s=x("chakra-input",e.className);return(0,ur.jsx)(lr.input,(0,c.A)((0,c.A)({size:n},a),{},{__css:i.field,ref:t,className:s}))}));$y.displayName="Input",$y.id="Input";var ex=cr(((e,t)=>(0,ur.jsx)(io,(0,c.A)((0,c.A)({align:"center"},e),{},{direction:"column",ref:t}))));ex.displayName="VStack";const tx=["className"];var nx=cr(((e,t)=>{const{className:n}=e,r=y(e,tx),i=x("chakra-modal__footer",n),a=Fm(),s=(0,c.A)({display:"flex",alignItems:"center",justifyContent:"flex-end"},a.footer);return(0,ur.jsx)(lr.footer,(0,c.A)((0,c.A)({ref:t},r),{},{__css:s,className:i}))}));nx.displayName="ModalFooter";var rx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ix=r.createContext&&r.createContext(rx),ax=["attr","size","title"];function sx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(this,arguments)}function lx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lx(Object(n),!0).forEach((function(t){ux(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ux(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dx(e){return e&&e.map(((e,t)=>r.createElement(e.tag,cx({key:t},e.attr),dx(e.child))))}function hx(e){return t=>r.createElement(px,ox({attr:cx({},e.attr)},t),dx(e.child))}function px(e){var t=t=>{var n,{attr:i,size:a,title:s}=e,o=sx(e,ax),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",ox({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:n,style:cx(cx({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==ix?r.createElement(ix.Consumer,null,(e=>t(e))):t(rx)}function fx(e){return hx({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function mx(e){return hx({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"},child:[]}]})(e)}function gx(e){return hx({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm65.18 216.01H224v80c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-80H94.82c-14.28 0-21.41-17.29-11.27-27.36l96.42-95.7c6.65-6.61 17.39-6.61 24.04 0l96.42 95.7c10.15 10.07 3.03 27.36-11.25 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function vx(e){return hx({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function yx(e){return hx({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(e)}function xx(e){return hx({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(e)}function bx(e){return hx({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(e)}function wx(e){return hx({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(e)}function Sx(e){const{viewBox:t="0 0 24 24",d:n,displayName:i,defaultProps:a={}}=e,s=r.Children.toArray(e.path),o=cr(((e,r)=>(0,ur.jsx)(Vy,(0,c.A)((0,c.A)((0,c.A)({ref:r,viewBox:t},a),e),{},{children:s.length?s:(0,ur.jsx)("path",{fill:"currentColor",d:n})}))));return o.displayName=i,o}var _x=Sx({displayName:"BellIcon",d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"});const Ax=["htmlWidth","htmlHeight","alt"];var Ex=cr((function(e,t){const{htmlWidth:n,htmlHeight:r,alt:i}=e,a=y(e,Ax);return(0,ur.jsx)("img",(0,c.A)({width:n,height:r,ref:t,alt:i},a))}));function Cx(e){const{loading:t,src:n,srcSet:i,onLoad:a,onError:s,crossOrigin:o,sizes:l,ignoreFallback:c}=e,[u,d]=(0,r.useState)("pending");(0,r.useEffect)((()=>{d(n?"loading":"pending")}),[n]);const h=(0,r.useRef)(),p=(0,r.useCallback)((()=>{if(!n)return;f();const e=new Image;e.src=n,o&&(e.crossOrigin=o),i&&(e.srcset=i),l&&(e.sizes=l),t&&(e.loading=t),e.onload=e=>{f(),d("loaded"),null==a||a(e)},e.onerror=e=>{f(),d("failed"),null==s||s(e)},h.current=e}),[n,o,i,l,a,s,t]),f=()=>{h.current&&(h.current.onload=null,h.current.onerror=null,h.current=null)};return vm((()=>{if(!c)return"loading"===u&&p(),()=>{f()}}),[u,p,c]),c?"loaded":u}Ex.displayName="NativeImage";const Mx=["fallbackSrc","fallback","src","srcSet","align","fit","loading","ignoreFallback","crossOrigin","fallbackStrategy","referrerPolicy"];var Tx=cr((function(e,t){const{fallbackSrc:n,fallback:r,src:i,srcSet:a,align:s,fit:o,loading:l,ignoreFallback:u,crossOrigin:d,fallbackStrategy:h="beforeLoadOrError",referrerPolicy:p}=e,f=y(e,Mx),m=null!=l||u||!(void 0!==n||void 0!==r),g=((e,t)=>"loaded"!==e&&"beforeLoadOrError"===t||"failed"===e&&"onError"===t)(Cx((0,c.A)((0,c.A)({},e),{},{crossOrigin:d,ignoreFallback:m})),h),v=(0,c.A)({ref:t,objectFit:o,objectPosition:s},m?f:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}(f,["onError","onLoad"]));return g?r||(0,ur.jsx)(lr.img,(0,c.A)({as:Ex,className:"chakra-image__placeholder",src:n},v)):(0,ur.jsx)(lr.img,(0,c.A)({as:Ex,src:i,srcSet:a,crossOrigin:d,loading:l,referrerPolicy:p,className:"chakra-image"},v))}));Tx.displayName="Image";var kx,Px=Sx({displayName:"ChevronDownIcon",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"});function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rx.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(kx||(kx={}));const Dx="popstate";function Ix(e){return void 0===e&&(e={}),zx((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Lx("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Ox(t)}),null,e)}function Bx(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function jx(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Fx(e,t){return{usr:e.state,key:e.key,idx:t}}function Lx(e,t,n,r){return void 0===n&&(n=null),Rx({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Nx(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Ox(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Nx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function zx(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=kx.Pop,l=null,c=u();function u(){return(s.state||{idx:null}).idx}function d(){o=kx.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function h(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:Ox(e);return n=n.replace(/ $/,"%20"),Bx(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,s.replaceState(Rx({},s.state,{idx:c}),""));let p={get action(){return o},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Dx,d),l=e,()=>{i.removeEventListener(Dx,d),l=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=kx.Push;let r=Lx(p.location,e,t);n&&n(r,e),c=u()+1;let d=Fx(r,c),h=p.createHref(r);try{s.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}a&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o=kx.Replace;let r=Lx(p.location,e,t);n&&n(r,e),c=u();let i=Fx(r,c),d=p.createHref(r);s.replaceState(i,"",d),a&&l&&l({action:o,location:p.location,delta:0})},go:e=>s.go(e)};return p}var Ux;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Ux||(Ux={}));const Hx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Gx(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map(((e,i)=>{let a=[...n,i],s="string"===typeof e.id?e.id:a.join("-");if(Bx(!0!==e.index||!e.children,"Cannot specify children on an index route"),Bx(!r[s],'Found a route id collision on id "'+s+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=Rx({},e,t(e),{id:s});return r[s]=n,n}{let n=Rx({},e,t(e),{id:s,children:void 0});return r[s]=n,e.children&&(n.children=Gx(e.children,t,a,r)),n}}))}function Vx(e,t,n){void 0===n&&(n="/");let r=ib(("string"===typeof t?Nx(t):t).pathname||"/",n);if(null==r)return null;let i=Wx(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=rb(r);a=tb(i[s],e)}return a}function Wx(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(Bx(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=cb([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(Bx(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Wx(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:eb(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of qx(e.path))i(e,t,r);else i(e,t)})),t}function qx(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=qx(r.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),i&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const Xx=/^:[\w-]+$/,Jx=3,Yx=2,Kx=1,Zx=10,Qx=-2,$x=e=>"*"===e;function eb(e,t){let n=e.split("/"),r=n.length;return n.some($x)&&(r+=Qx),t&&(r+=Yx),n.filter((e=>!$x(e))).reduce(((e,t)=>e+(Xx.test(t)?Jx:""===t?Kx:Zx)),r)}function tb(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let s=0;s<n.length;++s){let e=n[s],o=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=nb({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;a.push({params:r,pathname:cb([i,c.pathname]),pathnameBase:ub(cb([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=cb([i,c.pathnameBase]))}return a}function nb(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);jx("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:a,pathnameBase:s,pattern:e}}function rb(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return jx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ib(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ab(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function sb(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function ob(e,t){let n=sb(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function lb(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=Nx(e):(i=Rx({},e),Bx(!i.pathname||!i.pathname.includes("?"),ab("?","pathname","search",i)),Bx(!i.pathname||!i.pathname.includes("#"),ab("#","pathname","hash",i)),Bx(!i.search||!i.search.includes("#"),ab("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?Nx(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:db(r),hash:hb(i)}}(i,a),c=o&&"/"!==o&&o.endsWith("/"),u=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const cb=e=>e.join("/").replace(/\/\/+/g,"/"),ub=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),db=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",hb=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class pb{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function fb(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const mb=["post","put","patch","delete"],gb=new Set(mb),vb=["get",...mb],yb=new Set(vb),xb=new Set([301,302,303,307,308]),bb=new Set([307,308]),wb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Sb={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_b={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eb=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),Cb="remix-router-transitions";function Mb(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement,r=!n;let i;if(Bx(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;i=e=>({hasErrorBoundary:t(e)})}else i=Eb;let a,s,o={},l=Gx(e.routes,i,void 0,o),c=e.basename||"/",u=Rx({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),d=null,h=new Set,p=null,f=null,m=null,g=null!=e.hydrationData,v=Vx(l,e.history.location,c),y=null;if(null==v){let t=Vb(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=Gb(l);v=n,y={[r.id]:t}}let x,b=v.some((e=>e.route.lazy)),w=v.some((e=>e.route.loader));if(b)s=!1;else if(w)if(u.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null;s=v.every((e=>e.route.loader&&!0!==e.route.loader.hydrate&&(t&&void 0!==t[e.route.id]||n&&void 0!==n[e.route.id])))}else s=null!=e.hydrationData;else s=!0;let S,_={historyAction:e.history.action,location:e.history.location,matches:v,initialized:s,navigation:wb,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||y,fetchers:new Map,blockers:new Map},A=kx.Pop,E=!1,C=!1,M=new Map,T=null,k=!1,P=!1,R=[],D=[],I=new Map,B=0,j=-1,F=new Map,L=new Set,O=new Map,N=new Map,z=new Set,U=new Map,H=new Map,G=!1;function V(e,t){void 0===t&&(t={}),_=Rx({},_,e);let n=[],r=[];u.v7_fetcherPersist&&_.fetchers.forEach(((e,t)=>{"idle"===e.state&&(z.has(t)?r.push(t):n.push(t))})),[...h].forEach((e=>e(_,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync}))),u.v7_fetcherPersist&&(n.forEach((e=>_.fetchers.delete(e))),r.forEach((e=>$(e))))}function W(t,n,r){var i,s;let o,{flushSync:c}=void 0===r?{}:r,u=null!=_.actionData&&null!=_.navigation.formMethod&&Qb(_.navigation.formMethod)&&"loading"===_.navigation.state&&!0!==(null==(i=t.state)?void 0:i._isRedirect);o=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:u?_.actionData:null;let d=n.loaderData?Ub(_.loaderData,n.loaderData,n.matches||[],n.errors):_.loaderData,h=_.blockers;h.size>0&&(h=new Map(h),h.forEach(((e,t)=>h.set(t,_b))));let p,f=!0===E||null!=_.navigation.formMethod&&Qb(_.navigation.formMethod)&&!0!==(null==(s=t.state)?void 0:s._isRedirect);if(a&&(l=a,a=void 0),k||A===kx.Pop||(A===kx.Push?e.history.push(t,t.state):A===kx.Replace&&e.history.replace(t,t.state)),A===kx.Pop){let e=M.get(_.location.pathname);e&&e.has(t.pathname)?p={currentLocation:_.location,nextLocation:t}:M.has(t.pathname)&&(p={currentLocation:t,nextLocation:_.location})}else if(C){let e=M.get(_.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),M.set(_.location.pathname,e)),p={currentLocation:_.location,nextLocation:t}}V(Rx({},n,{actionData:o,loaderData:d,historyAction:A,location:t,initialized:!0,navigation:wb,revalidation:"idle",restoreScrollPosition:ce(t,n.matches||_.matches),preventScrollReset:f,blockers:h}),{viewTransitionOpts:p,flushSync:!0===c}),A=kx.Pop,E=!1,C=!1,k=!1,P=!1,R=[],D=[]}async function q(t,n,r){S&&S.abort(),S=null,A=t,k=!0===(r&&r.startUninterruptedRevalidation),function(e,t){if(p&&m){let n=le(e,t);p[n]=m()}}(_.location,_.matches),E=!0===(r&&r.preventScrollReset),C=!0===(r&&r.enableViewTransition);let s=a||l,d=r&&r.overrideNavigation,h=Vx(s,n,c),f=!0===(r&&r.flushSync);if(!h){let e=Vb(404,{pathname:n.pathname}),{matches:t,route:r}=Gb(s);return oe(),void W(n,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:f})}if(_.initialized&&!P&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(_.location,n)&&!(r&&r.submission&&Qb(r.submission.formMethod)))return void W(n,{matches:h},{flushSync:f});S=new AbortController;let g,v,y=Fb(e.history,n,S.signal,r&&r.submission);if(r&&r.pendingError)v={[Hb(h).route.id]:r.pendingError};else if(r&&r.submission&&Qb(r.submission.formMethod)){let e=await async function(e,t,n,r,a){void 0===a&&(a={});Y();let s,l=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(t,n);V({navigation:l},{flushSync:!0===a.flushSync});let d=nw(r,t);if(d.route.action||d.route.lazy){if(s=await jb("action",e,d,r,o,i,c,u.v7_relativeSplatPath),e.signal.aborted)return{shortCircuited:!0}}else s={type:Ux.error,error:Vb(405,{method:e.method,pathname:t.pathname,routeId:d.route.id})};if(Yb(s)){let e;return e=a&&null!=a.replace?a.replace:s.location===_.location.pathname+_.location.search,await X(_,s,{submission:n,replace:e}),{shortCircuited:!0}}if(Jb(s)){let e=Hb(r,d.route.id);return!0!==(a&&a.replace)&&(A=kx.Push),{pendingActionData:{},pendingActionError:{[e.route.id]:s.error}}}if(Xb(s))throw Vb(400,{type:"defer-action"});return{pendingActionData:{[d.route.id]:s.data}}}(y,n,r.submission,h,{replace:r.replace,flushSync:f});if(e.shortCircuited)return;g=e.pendingActionData,v=e.pendingActionError,d=iw(n,r.submission),f=!1,y=new Request(y.url,{signal:y.signal})}let{shortCircuited:x,loaderData:b,errors:w}=await async function(t,n,r,i,s,o,d,h,p,f,m){let g=i||iw(n,s),v=s||o||rw(g),y=a||l,[x,b]=Rb(e.history,_,r,v,n,u.v7_partialHydration&&!0===h,P,R,D,z,O,L,y,c,f,m);if(oe((e=>!(r&&r.some((t=>t.route.id===e)))||x&&x.some((t=>t.route.id===e)))),j=++B,0===x.length&&0===b.length){let e=ne();return W(n,Rx({matches:r,loaderData:{},errors:m||null},f?{actionData:f}:{},e?{fetchers:new Map(_.fetchers)}:{}),{flushSync:p}),{shortCircuited:!0}}if(!k&&(!u.v7_partialHydration||!h)){b.forEach((e=>{let t=_.fetchers.get(e.key),n=aw(void 0,t?t.data:void 0);_.fetchers.set(e.key,n)}));let e=f||_.actionData;V(Rx({navigation:g},e?0===Object.keys(e).length?{actionData:null}:{actionData:e}:{},b.length>0?{fetchers:new Map(_.fetchers)}:{}),{flushSync:p})}b.forEach((e=>{I.has(e.key)&&ee(e.key),e.controller&&I.set(e.key,e.controller)}));let w=()=>b.forEach((e=>ee(e.key)));S&&S.signal.addEventListener("abort",w);let{results:A,loaderResults:E,fetcherResults:C}=await J(_.matches,r,x,b,t);if(t.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",w);b.forEach((e=>I.delete(e.key)));let M=Wb(A);if(M){if(M.idx>=x.length){let e=b[M.idx-x.length].key;L.add(e)}return await X(_,M.result,{replace:d}),{shortCircuited:!0}}let{loaderData:T,errors:F}=zb(_,r,x,E,m,b,C,U);U.forEach(((e,t)=>{e.subscribe((n=>{(n||e.done)&&U.delete(t)}))})),u.v7_partialHydration&&h&&_.errors&&Object.entries(_.errors).filter((e=>{let[t]=e;return!x.some((e=>e.route.id===t))})).forEach((e=>{let[t,n]=e;F=Object.assign(F||{},{[t]:n})}));let N=ne(),H=re(j),G=N||H||b.length>0;return Rx({loaderData:T,errors:F},G?{fetchers:new Map(_.fetchers)}:{})}(y,n,h,d,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,f,g,v);x||(S=null,W(n,Rx({matches:h},g?{actionData:g}:{},{loaderData:b,errors:w})))}async function X(r,i,a){let{submission:s,fetcherSubmission:o,replace:l}=void 0===a?{}:a;i.revalidate&&(P=!0);let u=Lx(r.location,i.location,{_isRedirect:!0});if(Bx(u,"Expected a location on the redirect navigation"),n){let n=!1;if(i.reloadDocument)n=!0;else if(Ab.test(i.location)){const r=e.history.createURL(i.location);n=r.origin!==t.location.origin||null==ib(r.pathname,c)}if(n)return void(l?t.location.replace(i.location):t.location.assign(i.location))}S=null;let d=!0===l?kx.Replace:kx.Push,{formMethod:h,formAction:p,formEncType:f}=r.navigation;!s&&!o&&h&&p&&f&&(s=rw(r.navigation));let m=s||o;if(bb.has(i.status)&&m&&Qb(m.formMethod))await q(d,u,{submission:Rx({},m,{formAction:i.location}),preventScrollReset:E});else{let e=iw(u,s);await q(d,u,{overrideNavigation:e,fetcherSubmission:o,preventScrollReset:E})}}async function J(t,n,r,a,s){let l=await Promise.all([...r.map((e=>jb("loader",s,e,n,o,i,c,u.v7_relativeSplatPath))),...a.map((t=>{if(t.matches&&t.match&&t.controller)return jb("loader",Fb(e.history,t.path,t.controller.signal),t.match,t.matches,o,i,c,u.v7_relativeSplatPath);return{type:Ux.error,error:Vb(404,{pathname:t.path})}}))]),d=l.slice(0,r.length),h=l.slice(r.length);return await Promise.all([$b(t,r,d,d.map((()=>s.signal)),!1,_.loaderData),$b(t,a.map((e=>e.match)),h,a.map((e=>e.controller?e.controller.signal:null)),!0)]),{results:l,loaderResults:d,fetcherResults:h}}function Y(){P=!0,R.push(...oe()),O.forEach(((e,t)=>{I.has(t)&&(D.push(t),ee(t))}))}function K(e,t,n){void 0===n&&(n={}),_.fetchers.set(e,t),V({fetchers:new Map(_.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Z(e,t,n,r){void 0===r&&(r={});let i=Hb(_.matches,t);$(e),V({errors:{[i.route.id]:n},fetchers:new Map(_.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Q(e){return u.v7_fetcherPersist&&(N.set(e,(N.get(e)||0)+1),z.has(e)&&z.delete(e)),_.fetchers.get(e)||Sb}function $(e){let t=_.fetchers.get(e);!I.has(e)||t&&"loading"===t.state&&F.has(e)||ee(e),O.delete(e),F.delete(e),L.delete(e),z.delete(e),_.fetchers.delete(e)}function ee(e){let t=I.get(e);Bx(t,"Expected fetch controller: "+e),t.abort(),I.delete(e)}function te(e){for(let t of e){let e=sw(Q(t).data);_.fetchers.set(t,e)}}function ne(){let e=[],t=!1;for(let n of L){let r=_.fetchers.get(n);Bx(r,"Expected fetcher: "+n),"loading"===r.state&&(L.delete(n),e.push(n),t=!0)}return te(e),t}function re(e){let t=[];for(let[n,r]of F)if(r<e){let e=_.fetchers.get(n);Bx(e,"Expected fetcher: "+n),"loading"===e.state&&(ee(n),F.delete(n),t.push(n))}return te(t),t.length>0}function ie(e){_.blockers.delete(e),H.delete(e)}function ae(e,t){let n=_.blockers.get(e)||_b;Bx("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(_.blockers);r.set(e,t),V({blockers:r})}function se(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===H.size)return;H.size>1&&jx(!1,"A router only supports one blocker at a time");let i=Array.from(H.entries()),[a,s]=i[i.length-1],o=_.blockers.get(a);return o&&"proceeding"===o.state?void 0:s({currentLocation:t,nextLocation:n,historyAction:r})?a:void 0}function oe(e){let t=[];return U.forEach(((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),U.delete(r))})),t}function le(e,t){if(f){let n=f(e,t.map((e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,_.loaderData))));return n||e.key}return e.key}function ce(e,t){if(p){let n=le(e,t),r=p[n];if("number"===typeof r)return r}return null}return x={get basename(){return c},get future(){return u},get state(){return _},get routes(){return l},get window(){return t},initialize:function(){if(d=e.history.listen((t=>{let{action:n,location:r,delta:i}=t;if(G)return void(G=!1);jx(0===H.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a=se({currentLocation:_.location,nextLocation:r,historyAction:n});return a&&null!=i?(G=!0,e.history.go(-1*i),void ae(a,{state:"blocked",location:r,proceed(){ae(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset(){let e=new Map(_.blockers);e.set(a,_b),V({blockers:e})}})):q(n,r)})),n){!function(e,t){try{let n=e.sessionStorage.getItem(Cb);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(n){}}(t,M);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(Cb,JSON.stringify(r))}catch(n){jx(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(t,M);t.addEventListener("pagehide",e),T=()=>t.removeEventListener("pagehide",e)}return _.initialized||q(kx.Pop,_.location,{initialHydration:!0}),x},subscribe:function(e){return h.add(e),()=>h.delete(e)},enableScrollRestoration:function(e,t,n){if(p=e,m=t,f=n||null,!g&&_.navigation===wb){g=!0;let e=ce(_.location,_.matches);null!=e&&V({restoreScrollPosition:e})}return()=>{p=null,m=null,f=null}},navigate:async function t(n,r){if("number"===typeof n)return void e.history.go(n);let i=Tb(_.location,_.matches,c,u.v7_prependBasename,n,u.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:a,submission:s,error:o}=kb(u.v7_normalizeFormMethod,!1,i,r),l=_.location,d=Lx(_.location,a,r&&r.state);d=Rx({},d,e.history.encodeLocation(d));let h=r&&null!=r.replace?r.replace:void 0,p=kx.Push;!0===h?p=kx.Replace:!1===h||null!=s&&Qb(s.formMethod)&&s.formAction===_.location.pathname+_.location.search&&(p=kx.Replace);let f=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,m=!0===(r&&r.unstable_flushSync),g=se({currentLocation:l,nextLocation:d,historyAction:p});if(!g)return await q(p,d,{submission:s,pendingError:o,preventScrollReset:f,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:m});ae(g,{state:"blocked",location:d,proceed(){ae(g,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),t(n,r)},reset(){let e=new Map(_.blockers);e.set(g,_b),V({blockers:e})}})},fetch:function(t,n,s,d){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");I.has(t)&&ee(t);let h=!0===(d&&d.unstable_flushSync),p=a||l,f=Tb(_.location,_.matches,c,u.v7_prependBasename,s,u.v7_relativeSplatPath,n,null==d?void 0:d.relative),m=Vx(p,f,c);if(!m)return void Z(t,n,Vb(404,{pathname:f}),{flushSync:h});let{path:g,submission:v,error:y}=kb(u.v7_normalizeFormMethod,!0,f,d);if(y)return void Z(t,n,y,{flushSync:h});let x=nw(m,g);E=!0===(d&&d.preventScrollReset),v&&Qb(v.formMethod)?async function(t,n,r,s,d,h,p){if(Y(),O.delete(t),!s.route.action&&!s.route.lazy){let e=Vb(405,{method:p.formMethod,pathname:r,routeId:n});return void Z(t,n,e,{flushSync:h})}let f=_.fetchers.get(t);K(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(p,f),{flushSync:h});let m=new AbortController,g=Fb(e.history,r,m.signal,p);I.set(t,m);let v=B,y=await jb("action",g,s,d,o,i,c,u.v7_relativeSplatPath);if(g.signal.aborted)return void(I.get(t)===m&&I.delete(t));if(u.v7_fetcherPersist&&z.has(t)){if(Yb(y)||Jb(y))return void K(t,sw(void 0))}else{if(Yb(y))return I.delete(t),j>v?void K(t,sw(void 0)):(L.add(t),K(t,aw(p)),X(_,y,{fetcherSubmission:p}));if(Jb(y))return void Z(t,n,y.error)}if(Xb(y))throw Vb(400,{type:"defer-action"});let x=_.navigation.location||_.location,b=Fb(e.history,x,m.signal),w=a||l,E="idle"!==_.navigation.state?Vx(w,_.navigation.location,c):_.matches;Bx(E,"Didn't find any matches after fetcher action");let C=++B;F.set(t,C);let M=aw(p,y.data);_.fetchers.set(t,M);let[T,k]=Rb(e.history,_,E,p,x,!1,P,R,D,z,O,L,w,c,{[s.route.id]:y.data},void 0);k.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,n=_.fetchers.get(t),r=aw(void 0,n?n.data:void 0);_.fetchers.set(t,r),I.has(t)&&ee(t),e.controller&&I.set(t,e.controller)})),V({fetchers:new Map(_.fetchers)});let N=()=>k.forEach((e=>ee(e.key)));m.signal.addEventListener("abort",N);let{results:H,loaderResults:G,fetcherResults:q}=await J(_.matches,E,T,k,b);if(m.signal.aborted)return;m.signal.removeEventListener("abort",N),F.delete(t),I.delete(t),k.forEach((e=>I.delete(e.key)));let Q=Wb(H);if(Q){if(Q.idx>=T.length){let e=k[Q.idx-T.length].key;L.add(e)}return X(_,Q.result)}let{loaderData:$,errors:te}=zb(_,_.matches,T,G,void 0,k,q,U);if(_.fetchers.has(t)){let e=sw(y.data);_.fetchers.set(t,e)}re(C),"loading"===_.navigation.state&&C>j?(Bx(A,"Expected pending action"),S&&S.abort(),W(_.navigation.location,{matches:E,loaderData:$,errors:te,fetchers:new Map(_.fetchers)})):(V({errors:te,loaderData:Ub(_.loaderData,$,E,te),fetchers:new Map(_.fetchers)}),P=!1)}(t,n,g,x,m,h,v):(O.set(t,{routeId:n,path:g}),async function(t,n,r,a,s,l,d){let h=_.fetchers.get(t);K(t,aw(d,h?h.data:void 0),{flushSync:l});let p=new AbortController,f=Fb(e.history,r,p.signal);I.set(t,p);let m=B,g=await jb("loader",f,a,s,o,i,c,u.v7_relativeSplatPath);Xb(g)&&(g=await ew(g,f.signal,!0)||g);I.get(t)===p&&I.delete(t);if(f.signal.aborted)return;if(z.has(t))return void K(t,sw(void 0));if(Yb(g))return j>m?void K(t,sw(void 0)):(L.add(t),void await X(_,g));if(Jb(g))return void Z(t,n,g.error);Bx(!Xb(g),"Unhandled fetcher deferred data"),K(t,sw(g.data))}(t,n,g,x,m,h,v))},revalidate:function(){Y(),V({revalidation:"loading"}),"submitting"!==_.navigation.state&&("idle"!==_.navigation.state?q(A||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation}):q(_.historyAction,_.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Q,deleteFetcher:function(e){if(u.v7_fetcherPersist){let t=(N.get(e)||0)-1;t<=0?(N.delete(e),z.add(e)):N.set(e,t)}else $(e);V({fetchers:new Map(_.fetchers)})},dispose:function(){d&&d(),T&&T(),h.clear(),S&&S.abort(),_.fetchers.forEach(((e,t)=>$(t))),_.blockers.forEach(((e,t)=>ie(t)))},getBlocker:function(e,t){let n=_.blockers.get(e)||_b;return H.get(e)!==t&&H.set(e,t),n},deleteBlocker:ie,_internalFetchControllers:I,_internalActiveDeferreds:U,_internalSetRoutes:function(e){o={},a=Gx(e,i,void 0,o)}},x}Symbol("deferred");function Tb(e,t,n,r,i,a,s,o){let l,c;if(s){l=[];for(let e of t)if(l.push(e),e.route.id===s){c=e;break}}else l=t,c=t[t.length-1];let u=lb(i||".",ob(l,a),ib(e.pathname,n)||e.pathname,"path"===o);return null==i&&(u.search=e.search,u.hash=e.hash),null!=i&&""!==i&&"."!==i||!c||!c.route.index||tw(u.search)||(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(u.pathname="/"===u.pathname?n:cb([n,u.pathname])),Ox(u)}function kb(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Zb(r.formMethod))return{path:n,error:Vb(405,{method:r.formMethod})};let i,a,s=()=>({path:n,error:Vb(400,{type:"invalid-body"})}),o=r.formMethod||"get",l=e?o.toUpperCase():o.toLowerCase(),c=qb(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!Qb(l))return s();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!Qb(l))return s();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(h){return s()}}}if(Bx("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=Lb(r.formData),a=r.formData;else if(r.body instanceof FormData)i=Lb(r.body),a=r.body;else if(r.body instanceof URLSearchParams)i=r.body,a=Ob(i);else if(null==r.body)i=new URLSearchParams,a=new FormData;else try{i=new URLSearchParams(r.body),a=Ob(i)}catch(h){return s()}let u={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:a,json:void 0,text:void 0};if(Qb(u.formMethod))return{path:n,submission:u};let d=Nx(n);return t&&d.search&&tw(d.search)&&i.append("index",""),d.search="?"+i,{path:Ox(d),submission:u}}function Pb(e,t){let n=e;if(t){let r=e.findIndex((e=>e.route.id===t));r>=0&&(n=e.slice(0,r))}return n}function Rb(e,t,n,r,i,a,s,o,l,c,u,d,h,p,f,m){let g=m?Object.values(m)[0]:f?Object.values(f)[0]:void 0,v=e.createURL(t.location),y=e.createURL(i),x=m?Object.keys(m)[0]:void 0,b=Pb(n,x).filter(((e,n)=>{let{route:i}=e;if(i.lazy)return!0;if(null==i.loader)return!1;if(a)return!!i.loader.hydrate||void 0===t.loaderData[i.id]&&(!t.errors||void 0===t.errors[i.id]);if(function(e,t,n){let r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||o.some((t=>t===e.route.id)))return!0;let l=t.matches[n],c=e;return Ib(e,Rx({currentUrl:v,currentParams:l.params,nextUrl:y,nextParams:c.params},r,{actionResult:g,defaultShouldRevalidate:s||v.pathname+v.search===y.pathname+y.search||v.search!==y.search||Db(l,c)}))})),w=[];return u.forEach(((e,i)=>{if(a||!n.some((t=>t.route.id===e.routeId))||c.has(i))return;let o=Vx(h,e.path,p);if(!o)return void w.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let u=t.fetchers.get(i),f=nw(o,e.path),m=!1;m=!d.has(i)&&(!!l.includes(i)||(u&&"idle"!==u.state&&void 0===u.data?s:Ib(f,Rx({currentUrl:v,currentParams:t.matches[t.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:g,defaultShouldRevalidate:s})))),m&&w.push({key:i,routeId:e.routeId,path:e.path,matches:o,match:f,controller:new AbortController})})),[b,w]}function Db(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ib(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}async function Bb(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];Bx(i,"No route found in manifest");let a={};for(let s in r){let e=void 0!==i[s]&&"hasErrorBoundary"!==s;jx(!e,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),e||Hx.has(s)||(a[s]=r[s])}Object.assign(i,a),Object.assign(i,Rx({},t(i),{lazy:void 0}))}async function jb(e,t,n,r,i,a,s,o,l){let c,u,d;void 0===l&&(l={});let h=e=>{let r,i=new Promise(((e,t)=>r=t));return d=()=>r(),t.signal.addEventListener("abort",d),Promise.race([e({request:t,params:n.params,context:l.requestContext}),i])};try{let r=n.route[e];if(n.route.lazy)if(r){let e,t=await Promise.all([h(r).catch((t=>{e=t})),Bb(n.route,a,i)]);if(e)throw e;u=t[0]}else{if(await Bb(n.route,a,i),r=n.route[e],!r){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw Vb(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:Ux.data,data:void 0}}u=await h(r)}else{if(!r){let e=new URL(t.url);throw Vb(404,{pathname:e.pathname+e.search})}u=await h(r)}Bx(void 0!==u,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(m){c=Ux.error,u=m}finally{d&&t.signal.removeEventListener("abort",d)}if(Kb(u)){let e,i=u.status;if(xb.has(i)){let e=u.headers.get("Location");if(Bx(e,"Redirects returned/thrown from loaders/actions must have a Location header"),Ab.test(e)){if(!l.isStaticRequest){let n=new URL(t.url),r=e.startsWith("//")?new URL(n.protocol+e):new URL(e),i=null!=ib(r.pathname,s);r.origin===n.origin&&i&&(e=r.pathname+r.search+r.hash)}}else e=Tb(new URL(t.url),r.slice(0,r.indexOf(n)+1),s,!0,e,o);if(l.isStaticRequest)throw u.headers.set("Location",e),u;return{type:Ux.redirect,status:i,location:e,revalidate:null!==u.headers.get("X-Remix-Revalidate"),reloadDocument:null!==u.headers.get("X-Remix-Reload-Document")}}if(l.isRouteRequest){throw{type:c===Ux.error?Ux.error:Ux.data,response:u}}try{let t=u.headers.get("Content-Type");e=t&&/\bapplication\/json\b/.test(t)?null==u.body?null:await u.json():await u.text()}catch(m){return{type:Ux.error,error:m}}return c===Ux.error?{type:c,error:new pb(i,u.statusText,e),headers:u.headers}:{type:Ux.data,data:e,statusCode:u.status,headers:u.headers}}return c===Ux.error?{type:c,error:u}:function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(u)?{type:Ux.deferred,deferredData:u,statusCode:null==(p=u.init)?void 0:p.status,headers:(null==(f=u.init)?void 0:f.headers)&&new Headers(u.init.headers)}:{type:Ux.data,data:u};var p,f}function Fb(e,t,n,r){let i=e.createURL(qb(t)).toString(),a={signal:n};if(r&&Qb(r.formMethod)){let{formMethod:e,formEncType:t}=r;a.method=e.toUpperCase(),"application/json"===t?(a.headers=new Headers({"Content-Type":t}),a.body=JSON.stringify(r.json)):"text/plain"===t?a.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?a.body=Lb(r.formData):a.body=r.formData}return new Request(i,a)}function Lb(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function Ob(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function Nb(e,t,n,r,i){let a,s={},o=null,l=!1,c={};return n.forEach(((n,u)=>{let d=t[u].route.id;if(Bx(!Yb(n),"Cannot handle redirect results in processLoaderData"),Jb(n)){let t=Hb(e,d),i=n.error;r&&(i=Object.values(r)[0],r=void 0),o=o||{},null==o[t.route.id]&&(o[t.route.id]=i),s[d]=void 0,l||(l=!0,a=fb(n.error)?n.error.status:500),n.headers&&(c[d]=n.headers)}else Xb(n)?(i.set(d,n.deferredData),s[d]=n.deferredData.data):s[d]=n.data,null==n.statusCode||200===n.statusCode||l||(a=n.statusCode),n.headers&&(c[d]=n.headers)})),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function zb(e,t,n,r,i,a,s,o){let{loaderData:l,errors:c}=Nb(t,n,r,i,o);for(let u=0;u<a.length;u++){let{key:t,match:n,controller:r}=a[u];Bx(void 0!==s&&void 0!==s[u],"Did not find corresponding fetcher result");let i=s[u];if(!r||!r.signal.aborted)if(Jb(i)){let r=Hb(e.matches,null==n?void 0:n.route.id);c&&c[r.route.id]||(c=Rx({},c,{[r.route.id]:i.error})),e.fetchers.delete(t)}else if(Yb(i))Bx(!1,"Unhandled fetcher revalidation redirect");else if(Xb(i))Bx(!1,"Unhandled fetcher deferred data");else{let n=sw(i.data);e.fetchers.set(t,n)}}return{loaderData:l,errors:c}}function Ub(e,t,n,r){let i=Rx({},t);for(let a of n){let n=a.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(i[n]=t[n]):void 0!==e[n]&&a.route.loader&&(i[n]=e[n]),r&&r.hasOwnProperty(n))break}return i}function Hb(e,t){let n=t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e];return n.reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function Gb(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Vb(e,t){let{pathname:n,routeId:r,method:i,type:a}=void 0===t?{}:t,s="Unknown Server Error",o="Unknown @remix-run/router error";return 400===e?(s="Bad Request",i&&n&&r?o="You made a "+i+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===a?o="defer() is not supported in actions":"invalid-body"===a&&(o="Unable to encode submission body")):403===e?(s="Forbidden",o='Route "'+r+'" does not match URL "'+n+'"'):404===e?(s="Not Found",o='No route matches URL "'+n+'"'):405===e&&(s="Method Not Allowed",i&&n&&r?o="You made a "+i.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':i&&(o='Invalid request method "'+i.toUpperCase()+'"')),new pb(e||500,s,new Error(o),!0)}function Wb(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Yb(n))return{result:n,idx:t}}}function qb(e){return Ox(Rx({},"string"===typeof e?Nx(e):e,{hash:""}))}function Xb(e){return e.type===Ux.deferred}function Jb(e){return e.type===Ux.error}function Yb(e){return(e&&e.type)===Ux.redirect}function Kb(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Zb(e){return yb.has(e.toLowerCase())}function Qb(e){return gb.has(e.toLowerCase())}async function $b(e,t,n,r,i,a){for(let s=0;s<n.length;s++){let o=n[s],l=t[s];if(!l)continue;let c=e.find((e=>e.route.id===l.route.id)),u=null!=c&&!Db(c,l)&&void 0!==(a&&a[l.route.id]);if(Xb(o)&&(i||u)){let e=r[s];Bx(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await ew(o,e,i).then((e=>{e&&(n[s]=e||n[s])}))}}}async function ew(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Ux.data,data:e.deferredData.unwrappedData}}catch(r){return{type:Ux.error,error:r}}return{type:Ux.data,data:e.deferredData.data}}}function tw(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function nw(e,t){let n="string"===typeof t?Nx(t).search:t.search;if(e[e.length-1].route.index&&tw(n||""))return e[e.length-1];let r=sb(e);return r[r.length-1]}function rw(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:a,json:s}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=a?{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==s?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}:void 0}function iw(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function aw(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function sw(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ow(){return ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ow.apply(this,arguments)}const lw=r.createContext(null);const cw=r.createContext(null);const uw=r.createContext(null);const dw=r.createContext(null);const hw=r.createContext({outlet:null,matches:[],isDataRoute:!1});const pw=r.createContext(null);function fw(){return null!=r.useContext(dw)}function mw(){return fw()||Bx(!1),r.useContext(dw).location}function gw(e){r.useContext(uw).static||r.useLayoutEffect(e)}function vw(){let{isDataRoute:e}=r.useContext(hw);return e?function(){let{router:e}=kw(Mw.UseNavigateStable),t=Rw(Tw.UseNavigateStable),n=r.useRef(!1);gw((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,ow({fromRouteId:t},i)))}),[e,t]);return i}():function(){fw()||Bx(!1);let e=r.useContext(lw),{basename:t,future:n,navigator:i}=r.useContext(uw),{matches:a}=r.useContext(hw),{pathname:s}=mw(),o=JSON.stringify(ob(a,n.v7_relativeSplatPath)),l=r.useRef(!1);gw((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let a=lb(n,JSON.parse(o),s,"path"===r.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:cb([t,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}),[t,i,o,s,e]);return c}()}const yw=r.createContext(null);function xw(){let{matches:e}=r.useContext(hw),t=e[e.length-1];return t?t.params:{}}function bw(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(uw),{matches:a}=r.useContext(hw),{pathname:s}=mw(),o=JSON.stringify(ob(a,i.v7_relativeSplatPath));return r.useMemo((()=>lb(e,JSON.parse(o),s,"path"===n)),[e,o,s,n])}function ww(e,t,n,i){fw()||Bx(!1);let{navigator:a}=r.useContext(uw),{matches:s}=r.useContext(hw),o=s[s.length-1],l=o?o.params:{},c=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,d=mw();if(t){var h;let e="string"===typeof t?Nx(t):t;"/"===c||(null==(h=e.pathname)?void 0:h.startsWith(c))||Bx(!1),u=e}else u=d;let p=u.pathname||"/",f=p;if("/"!==c){let e=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=Vx(e,{pathname:f});let g=Cw(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:cb([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:cb([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n,i);return t&&g?r.createElement(dw.Provider,{value:{location:ow({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:kx.Pop}},g):g}function Sw(){let e=function(){var e;let t=r.useContext(pw),n=Pw(Tw.UseRouteError),i=Rw(Tw.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=fb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}const _w=r.createElement(Sw,null);class Aw extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(hw.Provider,{value:this.props.routeContext},r.createElement(pw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ew(e){let{routeContext:t,match:n,children:i}=e,a=r.useContext(lw);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(hw.Provider,{value:t},i)}function Cw(e,t,n,i){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let o=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||Bx(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((e,i,a)=>{let s,d=!1,h=null,p=null;var f;n&&(s=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||_w,c&&(u<0&&0===a?(f="route-fallback",!1||Dw[f]||(Dw[f]=!0),d=!0,p=null):u===a&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,a+1)),g=()=>{let t;return t=s?h:d?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ew,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Aw,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var Mw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Mw||{}),Tw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tw||{});function kw(e){let t=r.useContext(lw);return t||Bx(!1),t}function Pw(e){let t=r.useContext(cw);return t||Bx(!1),t}function Rw(e){let t=function(e){let t=r.useContext(hw);return t||Bx(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||Bx(!1),n.route.id}const Dw={};i.startTransition;function Iw(e){let{to:t,replace:n,state:i,relative:a}=e;fw()||Bx(!1);let{future:s,static:o}=r.useContext(uw),{matches:l}=r.useContext(hw),{pathname:c}=mw(),u=vw(),d=lb(t,ob(l,s.v7_relativeSplatPath),c,"path"===a),h=JSON.stringify(d);return r.useEffect((()=>u(JSON.parse(h),{replace:n,state:i,relative:a})),[u,h,a,n,i]),null}function Bw(e){return function(e){let t=r.useContext(hw).outlet;return t?r.createElement(yw.Provider,{value:e},t):t}(e.context)}function jw(e){let{basename:t="/",children:n=null,location:i,navigationType:a=kx.Pop,navigator:s,static:o=!1,future:l}=e;fw()&&Bx(!1);let c=t.replace(/^\/*/,"/"),u=r.useMemo((()=>({basename:c,navigator:s,static:o,future:ow({v7_relativeSplatPath:!1},l)})),[c,l,s,o]);"string"===typeof i&&(i=Nx(i));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:m="default"}=i,g=r.useMemo((()=>{let e=ib(d,c);return null==e?null:{location:{pathname:e,search:h,hash:p,state:f,key:m},navigationType:a}}),[c,d,h,p,f,m,a]);return null==g?null:r.createElement(uw.Provider,{value:u},r.createElement(dw.Provider,{children:n,value:g}))}new Promise((()=>{}));r.Component;function Fw(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:r.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:r.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:r.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function Lw(e){const{value:t,defaultValue:n,onChange:i,shouldUpdate:a=((e,t)=>e!==t)}=e,s=As(i),o=As(a),[l,c]=(0,r.useState)(n),u=void 0!==t,d=u?t:l,h=As((e=>{const t="function"===typeof e?e(d):e;o(d,t)&&(u||c(t),s(t))}),[u,s,d,o]);return[d,h]}const Ow=["defaultIndex","onChange","index","isManual","isLazy","lazyBehavior","orientation","direction"],Nw=["isDisabled","isFocusable"],zw=["children"];var[Uw,Hw,Gw,Vw]=ki();var[Ww,qw]=gr({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});var[Xw,Jw]=gr({});function Yw(e,t){return"".concat(e,"--tab-").concat(t)}function Kw(e,t){return"".concat(e,"--tabpanel-").concat(t)}const Zw=["children","className"],Qw=["htmlProps","descendants"],$w=["isFitted"];var[eS,tS]=gr({name:"TabsStylesContext",errorMessage:"useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Tabs />\" "}),nS=cr((function(e,t){const n=Rr("Tabs",e),i=ft(e),{children:a,className:s}=i,o=function(e){var t;const{defaultIndex:n,onChange:i,index:a,isManual:s,isLazy:o,lazyBehavior:l="unmount",orientation:c="horizontal",direction:u="ltr"}=e,d=y(e,Ow),[h,p]=(0,r.useState)(null!=n?n:0),[f,m]=Lw({defaultValue:null!=n?n:0,value:a,onChange:i});(0,r.useEffect)((()=>{null!=a&&p(a)}),[a]);const g=Gw(),v=(0,r.useId)(),x=null!=(t=e.id)?t:v;return{id:"tabs-".concat(x),selectedIndex:f,focusedIndex:h,setSelectedIndex:m,setFocusedIndex:p,isManual:s,isLazy:o,lazyBehavior:l,orientation:c,descendants:g,direction:u,htmlProps:d}}(y(i,Zw)),{htmlProps:l,descendants:u}=o,d=y(o,Qw),h=(0,r.useMemo)((()=>d),[d]),{isFitted:p}=l,f=y(l,$w),m=(0,c.A)({position:"relative"},n.root);return(0,ur.jsx)(Uw,{value:u,children:(0,ur.jsx)(Ww,{value:h,children:(0,ur.jsx)(eS,{value:n,children:(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({className:x("chakra-tabs",s),ref:t},f),{},{__css:m,children:a}))})})})}));nS.displayName="Tabs";var rS=cr((function(e,t){const n=function(e){const t=qw(),{id:n,selectedIndex:i}=t,a=no(e.children).map(((e,t)=>(0,r.createElement)(Xw,{key:t,value:{isSelected:t===i,id:Kw(n,t),tabId:Yw(n,t),selectedIndex:i}},e)));return(0,c.A)((0,c.A)({},e),{},{children:a})}(e),i=tS();return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},n),{},{width:"100%",ref:t,className:x("chakra-tabs__tab-panels",e.className),__css:i.tabpanels}))}));rS.displayName="TabPanels";var iS=cr((function(e,t){const n=function(e){const{children:t}=e,n=y(e,zw),{isLazy:i,lazyBehavior:a}=qw(),{isSelected:s,id:o,tabId:l}=Jw(),u=(0,r.useRef)(!1);s&&(u.current=!0);const d=Ps({wasSelected:u.current,isSelected:s,enabled:i,mode:a});return(0,c.A)((0,c.A)({tabIndex:0},n),{},{children:d?t:null,role:"tabpanel","aria-labelledby":l,hidden:!s,id:o})}((0,c.A)((0,c.A)({},e),{},{ref:t})),i=tS();return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({outline:"0"},n),{},{className:x("chakra-tabs__tab-panel",e.className),__css:i.tabpanel}))}));iS.displayName="TabPanel";var[aS,sS]=gr({name:"CheckboxGroupContext",strict:!1});const oS=["isIndeterminate","isChecked"];function lS(e){return(0,ur.jsx)(lr.svg,(0,c.A)((0,c.A)({width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16}},e),{},{children:(0,ur.jsx)("polyline",{points:"1.5 6 4.5 9 10.5 1"})}))}function cS(e){return(0,ur.jsx)(lr.svg,(0,c.A)((0,c.A)({width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4}},e),{},{children:(0,ur.jsx)("line",{x1:"21",x2:"3",y1:"12",y2:"12"})}))}function uS(e){const{isIndeterminate:t,isChecked:n}=e,r=y(e,oS),i=t?cS:lS;return n||t?(0,ur.jsx)(lr.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,ur.jsx)(i,(0,c.A)({},r))}):null}var dS={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};var hS=()=>"undefined"!==typeof document;var pS=!1,fS=null,mS=!1,gS=!1,vS=new Set;function yS(e,t){vS.forEach((n=>n(e,t)))}var xS="undefined"!==typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);function bS(e){var t;mS=!0,(t=e).metaKey||!xS&&t.altKey||t.ctrlKey||"Control"===t.key||"Shift"===t.key||"Meta"===t.key||(fS="keyboard",yS("keyboard",e))}function wS(e){if(fS="pointer","mousedown"===e.type||"pointerdown"===e.type){mS=!0;const n=e.composedPath?e.composedPath()[0]:e.target;let r=!1;try{r=n.matches(":focus-visible")}catch(t){}if(r)return;yS("pointer",e)}}function SS(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||0===t.detail&&!t.pointerType)&&(mS=!0,fS="virtual")}function _S(e){e.target!==window&&e.target!==document&&(mS||gS||(fS="virtual",yS("virtual",e)),mS=!1,gS=!1)}function AS(){mS=!1,gS=!0}function ES(){return"pointer"!==fS}function CS(){if(!hS()||pS)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(){mS=!0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.apply(this,n)},document.addEventListener("keydown",bS,!0),document.addEventListener("keyup",bS,!0),document.addEventListener("click",SS,!0),window.addEventListener("focus",_S,!0),window.addEventListener("blur",AS,!1),"undefined"!==typeof PointerEvent?(document.addEventListener("pointerdown",wS,!0),document.addEventListener("pointermove",wS,!0),document.addEventListener("pointerup",wS,!0)):(document.addEventListener("mousedown",wS,!0),document.addEventListener("mousemove",wS,!0),document.addEventListener("mouseup",wS,!0)),pS=!0}function MS(e){CS(),e(ES());const t=()=>e(ES());return vS.add(t),()=>{vS.delete(t)}}const TS=["defaultChecked","isChecked","isFocusable","onChange","isIndeterminate","name","value","tabIndex","aria-label","aria-labelledby","aria-invalid"];function kS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=li(e),{isDisabled:n,isReadOnly:i,isRequired:a,isInvalid:s,id:o,onBlur:l,onFocus:u,"aria-describedby":d}=t,{defaultChecked:h,isChecked:p,isFocusable:f,onChange:m,isIndeterminate:g,name:v,value:x,tabIndex:b,"aria-label":w,"aria-labelledby":S,"aria-invalid":A}=e,C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}(y(e,TS),["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),M=As(m),T=As(l),k=As(u),[P,R]=(0,r.useState)(!1),[D,I]=(0,r.useState)(!1),[B,j]=(0,r.useState)(!1),[F,L]=(0,r.useState)(!1);(0,r.useEffect)((()=>MS(R)),[]);const O=(0,r.useRef)(null),[N,z]=(0,r.useState)(!0),[U,H]=(0,r.useState)(!!h),G=void 0!==p,V=G?p:U,W=(0,r.useCallback)((e=>{i||n?e.preventDefault():(G||H(V?e.target.checked:!!g||e.target.checked),null==M||M(e))}),[i,n,V,G,g,M]);vm((()=>{O.current&&(O.current.indeterminate=Boolean(g))}),[g]),Li((()=>{n&&I(!1)}),[n,I]),vm((()=>{const e=O.current;if(!(null==e?void 0:e.form))return;const t=()=>{H(!!h)};return e.form.addEventListener("reset",t),()=>{var n;return null==(n=e.form)?void 0:n.removeEventListener("reset",t)}}),[]);const q=n&&!f,X=(0,r.useCallback)((e=>{" "===e.key&&L(!0)}),[L]),J=(0,r.useCallback)((e=>{" "===e.key&&L(!1)}),[L]);vm((()=>{if(!O.current)return;O.current.checked!==V&&H(O.current.checked)}),[O.current]);const Y=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:t,"data-active":_(F),"data-hover":_(B),"data-checked":_(V),"data-focus":_(D),"data-focus-visible":_(D&&P),"data-indeterminate":_(g),"data-disabled":_(n),"data-invalid":_(s),"data-readonly":_(i),"aria-hidden":!0,onMouseDown:E(e.onMouseDown,(e=>{D&&e.preventDefault(),L(!0)})),onMouseUp:E(e.onMouseUp,(()=>L(!1))),onMouseEnter:E(e.onMouseEnter,(()=>j(!0))),onMouseLeave:E(e.onMouseLeave,(()=>j(!1)))})}),[F,V,n,D,P,B,g,s,i]),K=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:t,"data-active":_(F),"data-hover":_(B),"data-checked":_(V),"data-focus":_(D),"data-focus-visible":_(D&&P),"data-indeterminate":_(g),"data-disabled":_(n),"data-invalid":_(s),"data-readonly":_(i)})}),[F,V,n,D,P,B,g,s,i]),Z=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)((0,c.A)({},C),e),{},{ref:Lr(t,(e=>{e&&z("LABEL"===e.tagName)})),onClick:E(e.onClick,(()=>{var e;N||(null==(e=O.current)||e.click(),requestAnimationFrame((()=>{var e;null==(e=O.current)||e.focus({preventScroll:!0})})))})),"data-disabled":_(n),"data-checked":_(V),"data-invalid":_(s)})}),[C,n,V,s,N]),Q=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:Lr(O,t),type:"checkbox",name:v,value:x,id:o,tabIndex:b,onChange:E(e.onChange,W),onBlur:E(e.onBlur,T,(()=>I(!1))),onFocus:E(e.onFocus,k,(()=>I(!0))),onKeyDown:E(e.onKeyDown,X),onKeyUp:E(e.onKeyUp,J),required:a,checked:V,disabled:q,readOnly:i,"aria-label":w,"aria-labelledby":S,"aria-invalid":A?Boolean(A):s,"aria-describedby":d,"aria-disabled":n,style:dS})}),[v,x,o,W,T,k,X,J,a,V,q,i,w,S,A,s,d,n,b]),$=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:t,onMouseDown:E(e.onMouseDown,PS),"data-disabled":_(n),"data-checked":_(V),"data-invalid":_(s)})}),[V,n,s]);return{state:{isInvalid:s,isFocused:D,isChecked:V,isActive:F,isHovered:B,isIndeterminate:g,isDisabled:n,isReadOnly:i,isRequired:a},getRootProps:Z,getCheckboxProps:Y,getIndicatorProps:K,getInputProps:Q,getLabelProps:$,htmlProps:C}}function PS(e){e.preventDefault(),e.stopPropagation()}const RS=["spacing","className","children","iconColor","iconSize","icon","isChecked","isDisabled","onChange","inputProps"];var DS={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},IS={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},BS=_r({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),jS=_r({from:{opacity:0},to:{opacity:1}}),FS=_r({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),LS=cr((function(e,t){const n=sS(),i=Rr("Checkbox",(0,c.A)((0,c.A)({},n),e)),a=ft(e),{spacing:s="0.5rem",className:o,children:l,iconColor:u,iconSize:d,icon:h=(0,ur.jsx)(uS,{}),isChecked:p,isDisabled:f=(null==n?void 0:n.isDisabled),onChange:m,inputProps:g}=a,v=y(a,RS);let b=p;(null==n?void 0:n.value)&&a.value&&(b=n.value.includes(a.value));let w=m;(null==n?void 0:n.onChange)&&a.value&&(w=C(n.onChange,m));const{state:S,getInputProps:_,getCheckboxProps:A,getLabelProps:E,getRootProps:M}=kS((0,c.A)((0,c.A)({},v),{},{isDisabled:f,isChecked:b,onChange:w})),T=function(e){const[t,n]=(0,r.useState)(e),[i,a]=(0,r.useState)(!1);return e!==t&&(a(!0),n(e)),i}(S.isChecked),k=(0,r.useMemo)((()=>(0,c.A)({animation:T?S.isIndeterminate?"".concat(jS," 20ms linear, ").concat(FS," 200ms linear"):"".concat(BS," 200ms linear"):void 0,fontSize:d,color:u},i.icon)),[u,d,T,S.isIndeterminate,i.icon]),P=(0,r.cloneElement)(h,{__css:k,isIndeterminate:S.isIndeterminate,isChecked:S.isChecked});return(0,ur.jsxs)(lr.label,(0,c.A)((0,c.A)({__css:(0,c.A)((0,c.A)({},IS),i.container),className:x("chakra-checkbox",o)},M()),{},{children:[(0,ur.jsx)("input",(0,c.A)({className:"chakra-checkbox__input"},_(g,t))),(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({__css:(0,c.A)((0,c.A)({},DS),i.control),className:"chakra-checkbox__control"},A()),{},{children:P})),l&&(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({className:"chakra-checkbox__label"},E()),{},{__css:(0,c.A)({marginStart:s},i.label),children:l}))]}))}));LS.displayName="Checkbox";const OS=["className","rows"];var NS=["h","minH","height","minHeight"],zS=cr(((e,t)=>{const n=Pr("Textarea",e),r=ft(e),{className:i,rows:a}=r,s=oi(y(r,OS)),o=a?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}(n,NS):n;return(0,ur.jsx)(lr.textarea,(0,c.A)((0,c.A)({ref:t,rows:a},s),{},{className:x("chakra-textarea",i),__css:o}))}));zS.displayName="Textarea";var US=Sx({displayName:"EditIcon",path:(0,ur.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[(0,ur.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,ur.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),HS=Sx({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"});const GS=(0,r.createContext)();var VS=(e,t)=>e.find((e=>e.id===t));function WS(e,t){const n=qS(e,t);return{position:n,index:n?e[n].findIndex((e=>e.id===t)):-1}}function qS(e,t){for(const[n,r]of Object.entries(e))if(VS(r,t))return n}function XS(e){return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===e||"bottom"===e?"0 auto":void 0,top:e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:e.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}}var JS={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return"bottom"===t&&(r=1),{opacity:0,[n]:24*r}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},YS=(0,r.memo)((e=>{const{id:t,message:n,onCloseComplete:i,onRequestRemove:a,requestClose:s=!1,position:o="bottom",duration:l=5e3,containerStyle:u,motionVariants:d=JS,toastSpacing:h="0.5rem"}=e,[p,f]=(0,r.useState)(l),m=ip();Li((()=>{m||null==i||i()}),[m]),Li((()=>{f(l)}),[l]);const g=()=>{m&&a()};(0,r.useEffect)((()=>{m&&s&&a()}),[m,s,a]),function(e,t){const n=As(e);(0,r.useEffect)((()=>{if(null==t)return;let e=null;return e=window.setTimeout((()=>{n()}),t),()=>{e&&window.clearTimeout(e)}}),[t,n])}(g,p);const v=(0,r.useMemo)((()=>(0,c.A)({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:h},u)),[u,h]),y=(0,r.useMemo)((()=>function(e){let t="center";return e.includes("right")&&(t="flex-end"),e.includes("left")&&(t="flex-start"),{display:"flex",flexDirection:"column",alignItems:t}}(o)),[o]);return(0,ur.jsx)(Gf.div,{layout:!0,className:"chakra-toast",variants:d,initial:"initial",animate:"animate",exit:"exit",onHoverStart:()=>f(null),onHoverEnd:()=>f(l),custom:{position:o},style:y,children:(0,ur.jsx)(lr.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:v,children:w(n,{id:t,onClose:g})})})}));function KS(e,t){var n;const r=null!=e?e:"bottom",i={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return null!=(n=null==i?void 0:i[t])?n:r}function ZS(e){return(0,ur.jsx)(Vy,(0,c.A)((0,c.A)({viewBox:"0 0 24 24"},e),{},{children:(0,ur.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})}))}YS.displayName="ToastComponent";var[QS,$S]=gr({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[e_,t_]=gr({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),n_={info:{icon:function(e){return(0,ur.jsx)(Vy,(0,c.A)((0,c.A)({viewBox:"0 0 24 24"},e),{},{children:(0,ur.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})}))},colorScheme:"blue"},warning:{icon:ZS,colorScheme:"orange"},success:{icon:function(e){return(0,ur.jsx)(Vy,(0,c.A)((0,c.A)({viewBox:"0 0 24 24"},e),{},{children:(0,ur.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})}))},colorScheme:"green"},error:{icon:ZS,colorScheme:"red"},loading:{icon:Br,colorScheme:"blue"}};const r_=["status","addRole"];var i_=cr((function(e,t){var n;const r=ft(e),{status:i="info",addRole:a=!0}=r,s=y(r,r_),o=null!=(n=e.colorScheme)?n:function(e){return n_[e].colorScheme}(i),l=Rr("Alert",(0,c.A)((0,c.A)({},e),{},{colorScheme:o})),u=(0,c.A)({width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},l.container);return(0,ur.jsx)(QS,{value:{status:i},children:(0,ur.jsx)(e_,{value:l,children:(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({"data-status":i,role:a?"alert":void 0,ref:t},s),{},{className:x("chakra-alert",e.className),__css:u}))})})}));function a_(e){const{status:t}=$S(),n=function(e){return n_[e].icon}(t),r=t_(),i="loading"===t?r.spinner:r.icon;return(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({display:"inherit","data-status":t},e),{},{className:x("chakra-alert__icon",e.className),__css:i,children:e.children||(0,ur.jsx)(n,{h:"100%",w:"100%"})}))}i_.displayName="Alert",a_.displayName="AlertIcon";var s_=cr((function(e,t){const n=t_(),{status:r}=$S();return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t,"data-status":r},e),{},{className:x("chakra-alert__title",e.className),__css:n.title}))}));s_.displayName="AlertTitle";var o_=cr((function(e,t){const n=t_(),{status:r}=$S(),i=(0,c.A)({display:"inline"},n.description);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t,"data-status":r},e),{},{className:x("chakra-alert__desc",e.className),__css:i}))}));o_.displayName="AlertDescription";var l_=function(e){let t=e;const n=new Set,r=e=>{t=e(t),n.forEach((e=>e()))};return{getState:()=>t,subscribe:t=>(n.add(t),()=>{r((()=>e)),n.delete(t)}),removeToast:(e,t)=>{r((n=>(0,c.A)((0,c.A)({},n),{},{[t]:n[t].filter((t=>t.id!=e))})))},notify:(e,t)=>{const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;c_+=1;const i=null!=(n=t.id)?n:c_,a=null!=(r=t.position)?r:"bottom";return{id:i,message:e,position:a,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>l_.removeToast(String(i),a),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}(e,t),{position:i,id:a}=n;return r((e=>{var t,r;const a=i.includes("top")?[n,...null!=(t=e[i])?t:[]]:[...null!=(r=e[i])?r:[],n];return(0,c.A)((0,c.A)({},e),{},{[i]:a})})),a},update:(e,t)=>{e&&r((n=>{const r=(0,c.A)({},n),{position:i,index:a}=WS(r,e);return i&&-1!==a&&(r[i][a]=(0,c.A)((0,c.A)((0,c.A)({},r[i][a]),t),{},{message:d_(t)})),r}))},closeAll:function(){let{positions:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r((t=>(null!=e?e:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce(((e,n)=>(e[n]=t[n].map((e=>(0,c.A)((0,c.A)({},e),{},{requestClose:!0}))),e)),(0,c.A)({},t))))},close:e=>{r((t=>{const n=qS(t,e);return n?(0,c.A)((0,c.A)({},t),{},{[n]:t[n].map((t=>t.id==e?(0,c.A)((0,c.A)({},t),{},{requestClose:!0}):t))}):t}))},isActive:e=>Boolean(WS(l_.getState(),e).position)}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]});var c_=0;var u_=e=>{const{status:t,variant:n="solid",id:r,title:i,isClosable:a,onClose:s,description:o,colorScheme:l,icon:c}=e,u=r?{root:"toast-".concat(r),title:"toast-".concat(r,"-title"),description:"toast-".concat(r,"-description")}:void 0;return(0,ur.jsxs)(i_,{addRole:!1,status:t,variant:n,id:null==u?void 0:u.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[(0,ur.jsx)(a_,{children:c}),(0,ur.jsxs)(lr.div,{flex:"1",maxWidth:"100%",children:[i&&(0,ur.jsx)(s_,{id:null==u?void 0:u.title,children:i}),o&&(0,ur.jsx)(o_,{id:null==u?void 0:u.description,display:"block",children:o})]}),a&&(0,ur.jsx)(Xy,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function d_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{render:t,toastComponent:n=u_}=e;return r=>"function"===typeof t?t((0,c.A)((0,c.A)({},r),e)):(0,ur.jsx)(n,(0,c.A)((0,c.A)({},r),e))}var[h_,p_]=gr({name:"ToastOptionsContext",strict:!1}),f_=e=>{const t=(0,r.useSyncExternalStore)(l_.subscribe,l_.getState,l_.getState),{motionVariants:n,component:i=YS,portalProps:a}=e,s=Object.keys(t).map((e=>{const r=t[e];return(0,ur.jsx)("div",{role:"region","aria-live":"polite","aria-label":"Notifications-".concat(e),id:"chakra-toast-manager-".concat(e),style:XS(e),children:(0,ur.jsx)(Bm,{initial:!1,children:r.map((e=>(0,ur.jsx)(i,(0,c.A)({motionVariants:n},e),e.id)))})},e)}));return(0,ur.jsx)(Mm,(0,c.A)((0,c.A)({},a),{},{children:s}))};function m_(e){const{theme:t}=Er(),n=p_();return(0,r.useMemo)((()=>function(e,t){const n=n=>{var r;return(0,c.A)((0,c.A)((0,c.A)({},t),n),{},{position:KS(null!=(r=null==n?void 0:n.position)?r:null==t?void 0:t.position,e)})},r=e=>{const t=n(e),r=d_(t);return l_.notify(r,t)};return r.update=(e,t)=>{l_.update(e,n(t))},r.promise=(e,t)=>{const n=r((0,c.A)((0,c.A)({},t.loading),{},{status:"loading",duration:null}));e.then((e=>r.update(n,(0,c.A)({status:"success",duration:5e3},w(t.success,e))))).catch((e=>r.update(n,(0,c.A)({status:"error",duration:5e3},w(t.error,e)))))},r.closeAll=l_.closeAll,r.close=l_.close,r.isActive=l_.isActive,r}(t.direction,(0,c.A)((0,c.A)({},n),e))),[e,t.direction,n])}const g_=e=>{var t,n;let{isOpen:i,onClose:a,user:s,setUser:o}=e;const l=(0,r.useContext)(GS),{hostName:u}=l,[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(s),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),x=r.useRef(null),b=m_();(0,r.useEffect)((()=>{f(s)}),[s]);const w=()=>{h(!0)},S=e=>{const{name:t,value:n}=e.target;f((0,c.A)((0,c.A)({},p),{},{[t]:n}))},_=()=>({"Content-Type":"application/json","auth-token":localStorage.getItem("token")});return(0,ur.jsxs)(Nm,{isOpen:i,onClose:a,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{p:6,borderBottomWidth:"1px",borderColor:"gray.100",children:(0,ur.jsxs)(Wr,{mt:3,justify:"space-between",align:"center",children:[(0,ur.jsx)(Jr,{fontSize:"xl",fontWeight:"bold",children:"Profile"}),(0,ur.jsx)(Qs,{"aria-label":"Edit profile",icon:(0,ur.jsx)(US,{}),variant:"ghost",colorScheme:"purple",display:s._id!==(null===(t=l.user)||void 0===t?void 0:t._id)?"none":"block",onClick:w})]})}),(0,ur.jsx)(Yy,{}),(0,ur.jsx)(Zy,{children:(0,ur.jsx)(nS,{isFitted:!0,variant:"enclosed",index:d?1:0,onChange:e=>h(1===e),children:(0,ur.jsxs)(rS,{children:[(0,ur.jsx)(iS,{children:(0,ur.jsxs)(io,{spacing:2,children:[(0,ur.jsx)(Tx,{borderRadius:"full",boxSize:{base:"100px",md:"150px"},src:s.profilePic,alt:"Dan Abramov",mx:"auto"}),(0,ur.jsx)(Jr,{fontSize:"xx-large",fontWeight:"bold",children:s.name}),(0,ur.jsxs)(Jr,{fontSize:"md",children:["About: ",s.about]}),(0,ur.jsxs)(Jr,{fontSize:"md",children:["email: ",s.email]}),s.headline&&(0,ur.jsxs)(Jr,{fontSize:"md",children:["Headline: ",s.headline]}),s.location&&(0,ur.jsxs)(Jr,{fontSize:"md",children:["Location: ",s.location]}),(0,ur.jsxs)(ao,{mt:2,children:[void 0!==s.openToWork&&(0,ur.jsxs)(Jr,{fontSize:"sm",children:["Open to work: ",s.openToWork?"Yes":"No"]}),void 0!==s.openToHire&&(0,ur.jsxs)(Jr,{fontSize:"sm",children:["Open to hire: ",s.openToHire?"Yes":"No"]})]}),(0,ur.jsxs)(pr,{mt:3,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:"Experience"}),(0,ur.jsx)(ex,{align:"stretch",spacing:2,children:(s.experience||[]).map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(Jr,{fontWeight:"semibold",children:[e.title," @ ",e.company]}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:e.description}),d&&(0,ur.jsxs)(ao,{mt:2,children:[(0,ur.jsx)(zr,{size:"xs",onClick:async()=>{await(async(e,t)=>{await fetch("".concat(u,"/user/experience/").concat(e),{method:"PUT",headers:_(),body:JSON.stringify(t)})})(e._id,{description:(e.description||"")+""}),b({title:"Experience updated",status:"success",duration:1200})},children:"Quick update"}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:async()=>{await(async e=>{await fetch("".concat(u,"/user/experience/").concat(e),{method:"DELETE",headers:_()})})(e._id),b({title:"Experience deleted",status:"info",duration:1200})},children:"Delete"})]})]},e._id)))})]}),(0,ur.jsxs)(pr,{mt:3,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:"Education"}),(0,ur.jsx)(ex,{align:"stretch",spacing:2,children:(s.education||[]).map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(Jr,{fontWeight:"semibold",children:[e.school," \u2022 ",e.degree," ",e.field?"(".concat(e.field,")"):""]}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:e.description}),d&&(0,ur.jsxs)(ao,{mt:2,children:[(0,ur.jsx)(zr,{size:"xs",onClick:async()=>{await(async(e,t)=>{await fetch("".concat(u,"/user/education/").concat(e),{method:"PUT",headers:_(),body:JSON.stringify(t)})})(e._id,{description:(e.description||"")+""}),b({title:"Education updated",status:"success",duration:1200})},children:"Quick update"}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:async()=>{await(async e=>{await fetch("".concat(u,"/user/education/").concat(e),{method:"DELETE",headers:_()})})(e._id),b({title:"Education deleted",status:"info",duration:1200})},children:"Delete"})]})]},e._id)))})]}),(0,ur.jsxs)(pr,{mt:3,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:"Skills"}),(0,ur.jsx)(ao,{wrap:"wrap",children:(s.skills||[]).map((e=>{var t;return(0,ur.jsxs)(ao,{spacing:2,borderWidth:"1px",borderRadius:"full",px:2,py:1,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:e}),s._id!==(null===(t=l.user)||void 0===t?void 0:t._id)&&(0,ur.jsx)(zr,{size:"xs",variant:"ghost",onClick:async()=>{await fetch("".concat(u,"/user/").concat(s._id,"/skills/").concat(encodeURIComponent(e),"/endorse"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),b({title:"Endorsed ".concat(e),status:"success",duration:1200})},children:"Endorse"})]},e)}))})]})]})}),(0,ur.jsx)(iS,{children:(0,ur.jsxs)(io,{spacing:4,children:[(0,ur.jsxs)(mr,{cursor:"pointer",onMouseOver:()=>{g(!0)},onMouseOut:()=>{g(!1)},onClick:()=>{x.current&&x.current.click()},children:[(0,ur.jsx)(Tx,{borderRadius:"full",boxSize:{base:"100px",md:"150px"},src:p.profilePic||s.profilePic,alt:"profile-pic",mx:"auto"}),m&&(0,ur.jsxs)(pr,{textAlign:"center",position:"absolute",top:"auto",left:"auto",children:[(0,ur.jsx)(Qs,{"aria-label":"Edit profile picture",icon:(0,ur.jsx)(US,{})}),(0,ur.jsx)(Jr,{fontSize:"xx-small",children:"click to edit profile"})]})]}),(0,ur.jsx)("input",{type:"file",accept:"image/*",ref:x,style:{display:"none"},onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n)try{const e=new FormData;e.append("file",n);const t=await fetch("".concat(u,"/user/profile-pic"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:e}),r=await t.json();if(!t.ok)throw new Error(r.error||"Upload failed");const i=(0,c.A)((0,c.A)({},p),{},{profilePic:r.profilePic});f(i),o&&o(i),l.setUser(i),b({title:"Profile picture updated",status:"success",duration:2e3})}catch(Kie){console.error(Kie),b({title:"Avatar upload failed",description:String(Kie.message||Kie),status:"error",duration:3e3})}finally{x.current&&(x.current.value="")}}}),(0,ur.jsx)($y,{name:"name",placeholder:"Name",value:p.name,onChange:S}),(0,ur.jsx)($y,{name:"about",placeholder:"about",value:p.about,onChange:S}),(0,ur.jsx)($y,{name:"headline",placeholder:"headline",value:p.headline||"",onChange:S}),(0,ur.jsx)($y,{name:"location",placeholder:"location",value:p.location||"",onChange:S}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(LS,{isChecked:!!p.openToWork,onChange:e=>f((0,c.A)((0,c.A)({},p),{},{openToWork:e.target.checked})),children:"Open to work"}),(0,ur.jsx)(LS,{isChecked:!!p.openToHire,onChange:e=>f((0,c.A)((0,c.A)({},p),{},{openToHire:e.target.checked})),children:"Open to hire"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>(async(e,t)=>{await fetch("".concat(u,"/user/open"),{method:"POST",headers:_(),body:JSON.stringify({openToWork:e,openToHire:t})})})(!!p.openToWork,!!p.openToHire),children:"Update availability"})]}),(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Add experience"}),(0,ur.jsx)($y,{placeholder:"Title",id:"exp-title",mb:2}),(0,ur.jsx)($y,{placeholder:"Company",id:"exp-company",mb:2}),(0,ur.jsx)(zS,{placeholder:"Description",id:"exp-desc",mb:2}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{const e=document.getElementById("exp-title").value,t=document.getElementById("exp-company").value,n=document.getElementById("exp-desc").value;await(async e=>{await fetch("".concat(u,"/user/experience"),{method:"POST",headers:_(),body:JSON.stringify(e)})})({title:e,company:t,description:n}),b({title:"Experience added",status:"success",duration:1500})},children:"Add"})]}),(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Add education"}),(0,ur.jsx)($y,{placeholder:"School",id:"edu-school",mb:2}),(0,ur.jsx)($y,{placeholder:"Degree",id:"edu-degree",mb:2}),(0,ur.jsx)($y,{placeholder:"Field",id:"edu-field",mb:2}),(0,ur.jsx)(zS,{placeholder:"Description",id:"edu-desc",mb:2}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{const e=document.getElementById("edu-school").value,t=document.getElementById("edu-degree").value,n=document.getElementById("edu-field").value,r=document.getElementById("edu-desc").value;await(async e=>{await fetch("".concat(u,"/user/education"),{method:"POST",headers:_(),body:JSON.stringify(e)})})({school:e,degree:t,field:n,description:r}),b({title:"Education added",status:"success",duration:1500})},children:"Add"})]}),(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Skills"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Add a skill",id:"skill-input"}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{const e=document.getElementById("skill-input").value.trim();e&&(await(async e=>{await fetch("".concat(u,"/user/skills"),{method:"POST",headers:_(),body:JSON.stringify({skill:e})})})(e),b({title:"Skill added",status:"success",duration:1500}))},children:"Add"})]}),(0,ur.jsx)(ao,{wrap:"wrap",mt:2,children:(s.skills||[]).map((e=>(0,ur.jsxs)(zr,{size:"xs",variant:"outline",onClick:async()=>{await(async e=>{await fetch("".concat(u,"/user/skills/").concat(encodeURIComponent(e)),{method:"DELETE",headers:_()})})(e),b({title:"Skill removed",status:"info",duration:1500})},children:[e," \u2715"]},e)))})]}),(0,ur.jsxs)(zr,{onClick:()=>y(!v),children:["change my password"," ",v?(0,ur.jsx)(HS,{}):(0,ur.jsx)(Px,{})]}),v&&(0,ur.jsxs)(pr,{children:[(0,ur.jsx)($y,{name:"oldpassword",placeholder:"old password",type:"password",onChange:S,mb:2}),(0,ur.jsx)($y,{name:"newpassword",placeholder:"new password",type:"password",onChange:S})]})]})})]})})}),(0,ur.jsxs)(nx,{children:[d?(0,ur.jsx)(zr,{colorScheme:"purple",mr:3,onClick:async()=>{try{o(p)}catch(e){}l.setUser(p);try{const e=await fetch("".concat(u,"/user/update"),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(p)}),t=await e.json();200!==e.status?b({title:"An error occurred.",description:t.error,status:"error",duration:5e3,isClosable:!0}):(b({title:"User updated",description:"User updated successfully",status:"success",duration:5e3,isClosable:!0}),h(!1))}catch(e){console.log(e)}},children:"Save"}):(0,ur.jsx)(zr,{colorScheme:"purple",display:s._id!==(null===(n=l.user)||void 0===n?void 0:n._id)?"none":"block",mr:3,onClick:w,children:"Edit"}),d&&(0,ur.jsx)(zr,{onClick:()=>h(!1),children:"Back"})]})]})]})},v_=e=>{const{toggleColorMode:t}=o(),n=(0,r.useContext)(GS),{user:i,setUser:a,setIsAuthenticated:s,setActiveChatId:l,setMessageList:c,setReceiver:u}=n,d=vw();return(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(Xs,{children:(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(Ks,{isActive:e.isOpen,as:zr,rightIcon:(0,ur.jsx)(Px,{}),leftIcon:(0,ur.jsx)(Tx,{boxSize:"26px",borderRadius:"full",src:i.profilePic,alt:"profile-pic"}),children:(0,ur.jsx)(Jr,{display:{base:"none",md:"block"},fontSize:"13px",children:i.name})}),(0,ur.jsxs)(Xf,{children:[(0,ur.jsx)(em,{onClick:e.onOpen,children:"MyProfile"}),(0,ur.jsx)(em,{display:{base:"block",md:"none"},onClick:t,children:"light"===localStorage.getItem("chakra-ui-color-mode")?"Dark Mode":"Light Mode"}),(0,ur.jsx)(em,{color:"red",onClick:async e=>{e.preventDefault(),a({}),c([]),l(""),u({}),localStorage.removeItem("user"),localStorage.removeItem("token"),s(!1),console.log("logout"),d("/")},children:"Logout"})]})]})}),(0,ur.jsx)(g_,{isOpen:e.isOpen,onClose:e.onClose,user:i,setUser:a})]})},y_=["children"],x_=Gf(zr);function b_(e){let{children:t}=e,n=y(e,y_);return(0,ur.jsx)(x_,(0,c.A)((0,c.A)({whileHover:{y:-2,scale:1.02},whileTap:{scale:.98},initial:{y:6,opacity:0},animate:{y:0,opacity:1},transition:{duration:.35,ease:[.2,.8,.2,1]}},n),{},{children:t}))}const w_=e=>{const t=(0,r.useContext)(GS),{isAuthenticated:n,hostName:i}=t,{isOpen:a,onOpen:s,onClose:l}=g(),{colorMode:u,toggleColorMode:d}=o(),[h,p]=(0,r.useState)("dark"===u?(0,ur.jsx)(xx,{}):(0,ur.jsx)(yx,{})),[f,m]=(0,r.useState)([]),v=f.filter((e=>!e.read)).length,[y,x]=(0,r.useState)(localStorage.getItem("flair")||"anime"),b=g(),[w,S]=(0,r.useState)(""),[_,A]=(0,r.useState)((()=>{try{const e=localStorage.getItem("animeImages"),t=e?JSON.parse(e):[];return Array.isArray(t)?t:[]}catch(e){return[]}})),E=window.location.pathname,C=()=>{p("dark"===("dark"===u?"light":"dark")?(0,ur.jsx)(xx,{}):(0,ur.jsx)(yx,{})),d()};(0,r.useEffect)((()=>{n&&(async()=>{try{const e=await fetch("".concat(i,"/notifications"),{headers:{"auth-token":localStorage.getItem("token")}}),t=await e.json();m(Array.isArray(t)?t:[])}catch(e){}})()}),[i,n]),(0,r.useEffect)((()=>{if(!n)return;const e=e=>{m((t=>[{_id:"".concat(Date.now()),type:(null===e||void 0===e?void 0:e.type)||"notification",data:(null===e||void 0===e?void 0:e.data)||{},read:!1,createdAt:(new Date).toISOString()},...t].slice(0,50)))};try{const t=window.__appSocket;if(t)return t.on("notification",e),()=>t.off("notification",e)}catch(t){}}),[n]);(0,r.useEffect)((()=>{localStorage.setItem("flair",y),document.body.classList.remove("flair-anime","flair-neon","flair-minimal"),document.body.classList.add("flair-".concat(y))}),[y]);const M=e=>{localStorage.setItem("animeImages",JSON.stringify(e)),A(e),window.dispatchEvent(new Event("anime-images-change"))};return(0,ur.jsxs)(ur.Fragment,{children:[!E.includes("dashboard")&&(0,ur.jsxs)(pr,{position:"absolute",top:5,left:5,display:{md:"none",base:"flex"},children:[(0,ur.jsx)(zr,{p:3,borderRadius:"full",borderWidth:1,fontSize:"small",backgroundColor:"transparent",onClick:C,mx:1,children:h}),(0,ur.jsx)(Gr,{p:3,borderRadius:"full",borderWidth:1,fontSize:"small",backgroundColor:"transparent",href:"https://github.com/Sarthak-Developer-Coder",mx:1,children:(0,ur.jsx)(fx,{})})]}),(0,ur.jsx)(pr,{position:"sticky",top:0,zIndex:10,p:3,w:{base:"94vw",md:"99vw"},m:2,borderRadius:"2xl",bgGradient:"dark"===u?"linear(to-r, blackAlpha.400, whiteAlpha.100)":"linear(to-r, whiteAlpha.800, whiteAlpha.500)",backdropFilter:"blur(10px)",borderWidth:"1px",borderColor:"dark"===u?"whiteAlpha.300":"blackAlpha.200",display:{base:"none",md:"block"},boxShadow:"lg",children:(0,ur.jsxs)(Wr,{justify:"space-between",align:"center",children:[(0,ur.jsx)(Gf.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"extrabold",bgGradient:"linear(to-r, brand.400, cyan.300)",bgClip:"text",children:"Allify"})}),(0,ur.jsxs)(pr,{display:{base:"none",md:"block"},justifyContent:"space-between",alignItems:"center",children:[(0,ur.jsxs)(di,{size:"sm",value:y,onChange:e=>x(e.target.value),w:"36",mr:2,variant:"filled",children:[(0,ur.jsx)("option",{value:"anime",children:"Anime"}),(0,ur.jsx)("option",{value:"neon",children:"Neon"}),(0,ur.jsx)("option",{value:"minimal",children:"Minimal"})]}),(0,ur.jsx)(b_,{size:"sm",variant:"outline",mr:2,onClick:b.onOpen,children:"Anime images"}),(0,ur.jsx)(zr,{onClick:C,mr:2,borderRadius:"full",fontSize:"sm",variant:"ghost",_hover:{bg:"dark"===u?"whiteAlpha.200":"blackAlpha.100"},p:3,children:h}),n&&(0,ur.jsxs)(Xs,{children:[(0,ur.jsx)(Ks,{as:Qs,variant:"ghost",borderRadius:"full",mr:2,icon:(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(_x,{}),v>0&&(0,ur.jsx)(oo,{colorScheme:"red",borderRadius:"full",children:v})]})}),(0,ur.jsxs)(Xf,{maxW:"sm",children:[(0,ur.jsx)(em,{onClick:async()=>{try{await fetch("".concat(i,"/notifications/read"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),m((e=>e.map((e=>(0,c.A)((0,c.A)({},e),{},{read:!0})))))}catch(e){}},children:"Mark all as read"}),0===f.length&&(0,ur.jsx)(em,{isDisabled:!0,children:"No notifications"}),f.map((e=>(0,ur.jsx)(em,{children:(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",fontWeight:e.read?"normal":"semibold",children:e.type}),e.data&&e.data.text&&(0,ur.jsx)(Jr,{fontSize:"xs",color:"gray.500",children:e.data.text})]})},e._id)))]})]}),(0,ur.jsx)(zr,{borderRadius:"full",fontSize:"sm",variant:"ghost",p:3,mr:2,_hover:{bg:"dark"===u?"whiteAlpha.200":"blackAlpha.100"},onClick:()=>{window.open("https://github.com/Sarthak-Developer-Coder")},children:(0,ur.jsx)(fx,{})}),n&&(0,ur.jsx)(v_,{isOpen:a,onOpen:s,onClose:l}),n&&(0,ur.jsx)(b_,{size:"sm",ml:2,onClick:()=>{window.location.href="/portfolio"},children:"Portfolio"}),(0,ur.jsx)(b_,{size:"sm",ml:2,onClick:()=>{window.location.href="/paint"},children:"Paint"}),(0,ur.jsx)(b_,{size:"sm",ml:2,onClick:()=>{window.location.href="/meet"},children:"Meet"}),(0,ur.jsx)(b_,{size:"sm",ml:2,onClick:()=>{window.location.href="/snaps"},children:"Snaps"}),(0,ur.jsx)(b_,{size:"sm",ml:2,onClick:()=>{window.location.href="/music"},children:"Music"}),(0,ur.jsx)(b_,{size:"sm",ml:2,onClick:()=>{window.location.href="/assistant"},children:"Assistant"})]})]})}),(0,ur.jsxs)(Nm,{isOpen:b.isOpen,onClose:b.onClose,size:"lg",children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"Anime Background Images"}),(0,ur.jsx)(Yy,{}),(0,ur.jsxs)(Zy,{children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Paste image URL",value:w,onChange:e=>S(e.target.value)}),(0,ur.jsx)(zr,{onClick:()=>{const e=w.trim();if(!e)return;if(_.includes(e))return;const t=[..._,e];M(t),S("")},children:"Add"})]}),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,mt:3,maxH:"40vh",overflowY:"auto",children:[0===_.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No images added yet."}),_.map((e=>(0,ur.jsxs)(ao,{justify:"space-between",borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{noOfLines:1,maxW:"80%",children:e}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>(e=>{const t=_.filter((t=>t!==e));M(t)})(e),children:"Remove"})]},e)))]})]}),(0,ur.jsx)(nx,{children:(0,ur.jsx)(zr,{onClick:b.onClose,children:"Close"})})]})]})]})};var S_,__,A_,E_=__webpack_require__(7528);const C_=_r(S_||(S_=(0,E_.A)(["\n  0% { transform: translateY(0px) translateX(0px) scale(1); }\n  50% { transform: translateY(-20px) translateX(10px) scale(1.05); }\n  100% { transform: translateY(0px) translateX(0px) scale(1); }\n"]))),M_=_r(__||(__=(0,E_.A)(["\n  0% { transform: translateY(0px) translateX(0px) scale(1); }\n  50% { transform: translateY(15px) translateX(-10px) scale(1.03); }\n  100% { transform: translateY(0px) translateX(0px) scale(1); }\n"]))),T_=_r(A_||(A_=(0,E_.A)(["\n  0%, 100% { opacity: 0.2; transform: scale(1); }\n  50% { opacity: 0.9; transform: scale(1.3); }\n"])));function k_(){return(0,ur.jsxs)(pr,{position:"fixed",inset:0,zIndex:0,pointerEvents:"none",overflow:"hidden",children:[(0,ur.jsx)(pr,{position:"absolute",top:"-10%",left:"-10%",w:"45vw",h:"45vw",borderRadius:"full",filter:"blur(60px)",opacity:.35,bgGradient:"radial(brand.400, transparent 60%)",animation:"".concat(C_," 12s ease-in-out infinite")}),(0,ur.jsx)(pr,{position:"absolute",bottom:"-12%",right:"-8%",w:"50vw",h:"50vw",borderRadius:"full",filter:"blur(70px)",opacity:.3,bgGradient:"radial(cyan.300, transparent 60%)",animation:"".concat(M_," 16s ease-in-out infinite")}),[...Array(20)].map(((e,t)=>(0,ur.jsx)(pr,{position:"absolute",top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%"),w:"6px",h:"6px",borderRadius:"full",bg:"whiteAlpha.800",boxShadow:"0 0 12px rgba(255,255,255,0.8)",opacity:.5,animation:"".concat(T_," ").concat(6+6*Math.random(),"s ease-in-out ").concat(3*Math.random(),"s infinite")},t)))]})}const P_=Gf(pr);function R_(){const e=function(){const[e,t]=(0,r.useState)((()=>{try{const e=localStorage.getItem("animeImages"),t=e?JSON.parse(e):[];return Array.isArray(t)?t:[]}catch(e){return[]}}));return(0,r.useEffect)((()=>{const e=()=>{try{const e=localStorage.getItem("animeImages"),n=e?JSON.parse(e):[];t(Array.isArray(n)?n:[])}catch(e){}};return window.addEventListener("anime-images-change",e),()=>window.removeEventListener("anime-images-change",e)}),[]),e.filter(Boolean)}(),t=e.length>0,[n,i]=(0,r.useState)(0);(0,r.useEffect)((()=>{if(!t)return;const n=setInterval((()=>i((t=>(t+1)%e.length))),15e3);return()=>clearInterval(n)}),[t,e.length]),(0,r.useEffect)((()=>{e.forEach((e=>{(new Image).src=e}))}),[e]);const a=(0,r.useMemo)((()=>e[n]),[e,n]);return t?(0,ur.jsxs)(pr,{position:"fixed",inset:0,zIndex:0,pointerEvents:"none",overflow:"hidden",children:[(0,ur.jsx)(Bm,{mode:"wait",children:(0,ur.jsx)(P_,{position:"absolute",inset:0,bgImage:"url('".concat(a,"')"),bgPos:"center",bgSize:"cover",bgRepeat:"no-repeat",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.2},filter:"brightness(0.9)"},a)}),(0,ur.jsx)(pr,{position:"absolute",inset:0,bgGradient:"linear(to-b, blackAlpha.300, transparent 20%, transparent 70%, blackAlpha.300)"})]}):null}const D_=function(e){const{toggleColorMode:t}=o(),n=(0,r.useContext)(GS);return(0,ur.jsxs)("div",{className:"App",style:{position:"relative"},children:[(0,ur.jsx)(k_,{}),(0,ur.jsx)(R_,{}),(0,ur.jsx)(w_,{toggleColorMode:t,context:n})]})},I_=e=>{e&&e instanceof Function&&__webpack_require__.e(453).then(__webpack_require__.bind(__webpack_require__,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:s}=t;n(e),r(e),i(e),a(e),s(e)}))};var B_,j_,F_=String.raw,L_=F_(B_||(B_=(0,E_.A)(["\n  :root,\n  :host {\n    --chakra-vh: 100vh;\n  }\n\n  @supports (height: -webkit-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -webkit-fill-available;\n    }\n  }\n\n  @supports (height: -moz-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -moz-fill-available;\n    }\n  }\n\n  @supports (height: 100dvh) {\n    :root,\n    :host {\n      --chakra-vh: 100dvh;\n    }\n  }\n"]))),O_=()=>(0,ur.jsx)(wr,{styles:L_}),N_=e=>{let{scope:t=""}=e;return(0,ur.jsx)(wr,{styles:F_(j_||(j_=(0,E_.A)(['\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        margin: 0;\n        font-feature-settings: "kern";\n      }\n\n      '," :where(*, *::before, *::after) {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n        word-wrap: break-word;\n      }\n\n      main {\n        display: block;\n      }\n\n      "," hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      "," :where(pre, code, kbd,samp) {\n        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      "," a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      "," abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      "," :where(b, strong) {\n        font-weight: bold;\n      }\n\n      "," small {\n        font-size: 80%;\n      }\n\n      "," :where(sub,sup) {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      "," sub {\n        bottom: -0.25em;\n      }\n\n      "," sup {\n        top: -0.5em;\n      }\n\n      "," img {\n        border-style: none;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      "," :where(button, input) {\n        overflow: visible;\n      }\n\n      "," :where(button, select) {\n        text-transform: none;\n      }\n\n      ",' :where(\n          button::-moz-focus-inner,\n          [type="button"]::-moz-focus-inner,\n          [type="reset"]::-moz-focus-inner,\n          [type="submit"]::-moz-focus-inner\n        ) {\n        border-style: none;\n        padding: 0;\n      }\n\n      '," fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      "," legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      "," progress {\n        vertical-align: baseline;\n      }\n\n      "," textarea {\n        overflow: auto;\n      }\n\n      ",' :where([type="checkbox"], [type="radio"]) {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      ',' input[type="number"]::-webkit-inner-spin-button,\n      ',' input[type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      ',' input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      ',' input[type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      ',' input[type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      '," ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      "," details {\n        display: block;\n      }\n\n      "," summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      "," :where(\n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre\n        ) {\n        margin: 0;\n      }\n\n      "," button {\n        background: transparent;\n        padding: 0;\n      }\n\n      "," fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," :where(ol, ul) {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," textarea {\n        resize: vertical;\n      }\n\n      ",' :where(button, [role="button"]) {\n        cursor: pointer;\n      }\n\n      '," button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      "," table {\n        border-collapse: collapse;\n      }\n\n      "," :where(h1, h2, h3, h4, h5, h6) {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      "," :where(img, svg, video, canvas, audio, iframe, embed, object) {\n        display: block;\n      }\n\n      "," :where(img, video) {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible]\n        :focus:not([data-focus-visible-added]):not(\n          [data-focus-visible-disabled]\n        ) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      "," select::-ms-expand {\n        display: none;\n      }\n\n      ","\n    "])),t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,L_)})};function z_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=e,a=(0,r.createContext)(void 0);return a.displayName=i,[a.Provider,function e(){var i;const s=(0,r.useContext)(a);if(!s&&t){const t=new Error(n);throw t.name="ContextError",null==(i=Error.captureStackTrace)||i.call(Error,t,e),t}return s},a]}function U_(e){const{cssVarsRoot:t,theme:n,children:i}=e,a=(0,r.useMemo)((()=>et(n)),[n]);return(0,ur.jsxs)(Xn,{theme:a,children:[(0,ur.jsx)(H_,{root:t}),i]})}function H_(e){let{root:t=":host, :root"}=e;const n=[t,"[data-theme]"].join(",");return(0,ur.jsx)(wr,{styles:e=>({[n]:e.__cssVars})})}var[G_,V_]=z_({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function W_(){const{colorMode:e}=o();return(0,ur.jsx)(wr,{styles:t=>{const n=f(yt(t,"styles.global"),{theme:t,colorMode:e});if(!n)return;return ut(n)(t)}})}var q_={light:"chakra-ui-light",dark:"chakra-ui-dark"};var X_="chakra-ui-color-mode";var J_,Y_=(J_=X_,{ssr:!1,type:"localStorage",get(e){if(!(null==globalThis?void 0:globalThis.document))return e;let t;try{t=localStorage.getItem(J_)||e}catch(n){}return t||e},set(e){try{localStorage.setItem(J_,e)}catch(t){}}});function K_(e,t){const n=e.match(new RegExp("(^| )".concat(t,"=([^;]+)")));return null==n?void 0:n[2]}function Z_(e,t){return{ssr:!!t,type:"cookie",get:n=>t?K_(t,e):(null==globalThis?void 0:globalThis.document)&&K_(document.cookie,e)||n,set(t){document.cookie="".concat(e,"=").concat(t,"; max-age=31536000; path=/")}}}Z_(X_);var Q_=()=>{};function $_(e,t){return"cookie"===e.type&&e.ssr?e.get(t):t}function eA(e){const{value:t,children:n,options:{useSystemColorMode:i,initialColorMode:a,disableTransitionOnChange:o}={},colorModeManager:l=Y_}=e,c="dark"===a?"dark":"light",[u,d]=(0,r.useState)((()=>$_(l,c))),[h,p]=(0,r.useState)((()=>$_(l))),{getSystemTheme:f,setClassName:m,setDataset:g,addListener:v}=(0,r.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{preventTransition:t=!0}=e,n={setDataset:e=>{const r=t?n.preventTransition():void 0;document.documentElement.dataset.theme=e,document.documentElement.style.colorScheme=e,null==r||r()},setClassName(e){document.body.classList.add(e?q_.dark:q_.light),document.body.classList.remove(e?q_.light:q_.dark)},query:()=>window.matchMedia("(prefers-color-scheme: dark)"),getSystemTheme(e){var t;return(null!=(t=n.query().matches)?t:"dark"===e)?"dark":"light"},addListener(e){const t=n.query(),r=t=>{e(t.matches?"dark":"light")};return"function"===typeof t.addListener?t.addListener(r):t.addEventListener("change",r),()=>{"function"===typeof t.removeListener?t.removeListener(r):t.removeEventListener("change",r)}},preventTransition(){const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),requestAnimationFrame((()=>{requestAnimationFrame((()=>{document.head.removeChild(e)}))}))}}};return n}({preventTransition:o})),[o]),y="system"!==a||u?u:h,x=(0,r.useCallback)((e=>{const t="system"===e?f():e;d(t),m("dark"===t),g(t),l.set(t)}),[l,f,m,g]);vm((()=>{"system"===a&&p(f())}),[]),(0,r.useEffect)((()=>{const e=l.get();x(e||("system"!==a?c:"system"))}),[l,c,a,x]);const b=(0,r.useCallback)((()=>{x("dark"===y?"light":"dark")}),[y,x]);(0,r.useEffect)((()=>{if(i)return v(x)}),[i,v,x]);const w=(0,r.useMemo)((()=>({colorMode:null!=t?t:y,toggleColorMode:t?Q_:b,setColorMode:t?Q_:x,forced:void 0!==t})),[y,b,x,t]);return(0,ur.jsx)(s.Provider,{value:w,children:n})}eA.displayName="ColorModeProvider";var tA=(0,r.createContext)({getDocument:()=>document,getWindow:()=>window});function nA(e){const{children:t,environment:n,disabled:i}=e,a=(0,r.useRef)(null),s=(0,r.useMemo)((()=>n||{getDocument:()=>{var e,t;return null!=(t=null==(e=a.current)?void 0:e.ownerDocument)?t:document},getWindow:()=>{var e,t;return null!=(t=null==(e=a.current)?void 0:e.ownerDocument.defaultView)?t:window}}),[n]),o=!i||!n;return(0,ur.jsxs)(tA.Provider,{value:s,children:[t,o&&(0,ur.jsx)("span",{id:"__chakra_env",hidden:!0,ref:a})]})}tA.displayName="EnvironmentContext",nA.displayName="EnvironmentProvider";var rA=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:a=!0,theme:s={},environment:o,cssVarsRoot:l,disableEnvironment:c,disableGlobalStyle:u}=e,d=(0,ur.jsx)(nA,{environment:o,disabled:c,children:t});return(0,ur.jsx)(U_,{theme:s,cssVarsRoot:l,children:(0,ur.jsxs)(eA,{colorModeManager:n,options:s.config,children:[a?(0,ur.jsx)(N_,{scope:i}):(0,ur.jsx)(O_,{}),!u&&(0,ur.jsx)(W_,{}),r?(0,ur.jsx)(gm,{zIndex:r,children:d}):d]})})},iA={property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}},aA={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},sA={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},oA={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},lA={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},cA={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},uA={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},dA={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},hA={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},pA={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},fA=(0,c.A)((0,c.A)((0,c.A)({},pA),{max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"}),{},{container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}}),mA=(0,c.A)((0,c.A)({breakpoints:oA,zIndices:aA,radii:cA,blur:dA,colors:lA},hA),{},{sizes:fA,shadows:uA,space:pA,borders:sA,transition:iA}),{defineMultiStyleConfig:gA,definePartsStyle:vA}=dt(["stepper","step","title","description","indicator","separator","icon","number"]),yA=Me("stepper-indicator-size"),xA=Me("stepper-icon-size"),bA=Me("stepper-title-font-size"),wA=Me("stepper-description-font-size"),SA=Me("stepper-accent-color"),_A=vA((e=>{let{colorScheme:t}=e;return{stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[SA.variable]:"colors.".concat(t,".500"),_dark:{[SA.variable]:"colors.".concat(t,".200")}},title:{fontSize:bA.reference,fontWeight:"medium"},description:{fontSize:wA.reference,color:"chakra-subtle-text"},number:{fontSize:bA.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:xA.reference,height:xA.reference},indicator:{flexShrink:0,borderRadius:"full",width:yA.reference,height:yA.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:SA.reference},"&[data-status=complete]":{bg:SA.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:SA.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:"calc(100% - ".concat(yA.reference," - 8px)"),top:"calc(".concat(yA.reference," + 4px)"),insetStart:"calc(".concat(yA.reference," / 2 - 1px)")}}}})),AA=gA({baseStyle:_A,sizes:{xs:vA({stepper:{[yA.variable]:"sizes.4",[xA.variable]:"sizes.3",[bA.variable]:"fontSizes.xs",[wA.variable]:"fontSizes.xs"}}),sm:vA({stepper:{[yA.variable]:"sizes.6",[xA.variable]:"sizes.4",[bA.variable]:"fontSizes.sm",[wA.variable]:"fontSizes.xs"}}),md:vA({stepper:{[yA.variable]:"sizes.8",[xA.variable]:"sizes.5",[bA.variable]:"fontSizes.md",[wA.variable]:"fontSizes.sm"}}),lg:vA({stepper:{[yA.variable]:"sizes.10",[xA.variable]:"sizes.6",[bA.variable]:"fontSizes.lg",[wA.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function EA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;function r(t){const n=(["container","root"].includes(null!=t?t:"")?[e]:[e,t]).filter(Boolean).join("__"),r="chakra-".concat(n);return{className:r,selector:".".concat(r),toString:()=>t}}return{parts:function(){!function(){if(n)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");n=!0}();for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];for(const e of a)t[e]=r(e);return EA(e,t)},toPart:r,extend:function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(const e of i)e in t||(t[e]=r(e));return EA(e,t)},selectors:function(){const e=Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t,n.selector]})));return e},classnames:function(){const e=Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t,n.className]})));return e},get keys(){return Object.keys(t)},__type:{}}}var CA=EA("accordion").parts("root","container","button","panel").extend("icon"),MA=EA("alert").parts("title","description","container").extend("icon","spinner"),TA=EA("avatar").parts("label","badge","container").extend("excessLabel","group"),kA=EA("breadcrumb").parts("link","item","container").extend("separator"),PA=(EA("button").parts(),EA("checkbox").parts("control","icon","container").extend("label")),RA=(EA("progress").parts("track","filledTrack").extend("label"),EA("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),DA=EA("editable").parts("preview","input","textarea"),IA=EA("form").parts("container","requiredIndicator","helperText"),BA=EA("formError").parts("text","icon"),jA=EA("input").parts("addon","field","element","group"),FA=EA("list").parts("container","item","icon"),LA=EA("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),OA=EA("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),NA=EA("numberinput").parts("root","field","stepperGroup","stepper"),zA=(EA("pininput").parts("field"),EA("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),UA=EA("progress").parts("label","filledTrack","track"),HA=EA("radio").parts("container","control","label"),GA=EA("select").parts("field","icon"),VA=EA("slider").parts("container","track","thumb","filledTrack","mark"),WA=EA("stat").parts("container","label","helpText","number","icon"),qA=EA("switch").parts("container","track","thumb","label"),XA=EA("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),JA=EA("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),YA=EA("tag").parts("container","label","closeButton"),KA=EA("card").parts("container","header","body","footer");EA("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function ZA(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")?e:function(e){return!Number.isInteger(parseFloat(e.toString()))}(e)?t.replace(".","\\."):e}function QA(e,t){return"var(".concat(ZA(e)).concat(t?", ".concat(t):"",")")}function $A(e){return"--".concat(function(e){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",ZA(e)].filter(Boolean).join("-")}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:""))}function eE(e,t){const n=$A(e,null==t?void 0:t.prefix);return{variable:n,reference:QA(n,tE(null==t?void 0:t.fallback))}}function tE(e){return"string"===typeof e?e:null==e?void 0:e.reference}function nE(e){return b(e)&&e.reference?e.reference:String(e)}var rE=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.map(nE).join(" ".concat(e," ")).replace(/calc/g,"")},iE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(rE("+",...t),")")},aE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(rE("-",...t),")")},sE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(rE("*",...t),")")},oE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc(".concat(rE("/",...t),")")},lE=e=>{const t=nE(e);return null==t||Number.isNaN(parseFloat(t))?sE(t,-1):String(t).startsWith("-")?String(t).slice(1):"-".concat(t)},cE=Object.assign((e=>({add:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cE(iE(e,...n))},subtract:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cE(aE(e,...n))},multiply:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cE(sE(e,...n))},divide:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cE(oE(e,...n))},negate:()=>cE(lE(e)),toString:()=>e.toString()})),{add:iE,subtract:aE,multiply:sE,divide:oE,negate:lE}),{defineMultiStyleConfig:uE,definePartsStyle:dE}=dt(qA.keys),hE=eE("switch-track-width"),pE=eE("switch-track-height"),fE=eE("switch-track-diff"),mE=cE.subtract(hE,pE),gE=eE("switch-thumb-x"),vE=eE("switch-bg"),yE=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[hE.reference],height:[pE.reference],transitionProperty:"common",transitionDuration:"fast",[vE.variable]:"colors.gray.300",_dark:{[vE.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[vE.variable]:"colors.".concat(t,".500"),_dark:{[vE.variable]:"colors.".concat(t,".200")}},bg:vE.reference}},xE={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[pE.reference],height:[pE.reference],_checked:{transform:"translateX(".concat(gE.reference,")")}},bE=uE({baseStyle:dE((e=>({container:{[fE.variable]:mE,[gE.variable]:fE.reference,_rtl:{[gE.variable]:cE(fE).negate().toString()}},track:yE(e),thumb:xE}))),sizes:{sm:dE({container:{[hE.variable]:"1.375rem",[pE.variable]:"sizes.3"}}),md:dE({container:{[hE.variable]:"1.875rem",[pE.variable]:"sizes.4"}}),lg:dE({container:{[hE.variable]:"2.875rem",[pE.variable]:"sizes.6"}})},defaultProps:{size:"md",colorScheme:"blue"}});function wE(e,t){return n=>"dark"===n.colorMode?t:e}function SE(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?"vertical"===t?n:r:{}}var{defineMultiStyleConfig:_E,definePartsStyle:AE}=dt(XA.keys),EE=AE({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),CE={"&[data-is-numeric=true]":{textAlign:"end"}},ME=AE((e=>{const{colorScheme:t}=e;return{th:(0,c.A)({color:wE("gray.600","gray.400")(e),borderBottom:"1px",borderColor:wE("".concat(t,".100"),"".concat(t,".700"))(e)},CE),td:(0,c.A)({borderBottom:"1px",borderColor:wE("".concat(t,".100"),"".concat(t,".700"))(e)},CE),caption:{color:wE("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),TE=AE((e=>{const{colorScheme:t}=e;return{th:(0,c.A)({color:wE("gray.600","gray.400")(e),borderBottom:"1px",borderColor:wE("".concat(t,".100"),"".concat(t,".700"))(e)},CE),td:(0,c.A)({borderBottom:"1px",borderColor:wE("".concat(t,".100"),"".concat(t,".700"))(e)},CE),caption:{color:wE("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:wE("".concat(t,".100"),"".concat(t,".700"))(e)},td:{background:wE("".concat(t,".100"),"".concat(t,".700"))(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),kE=_E({baseStyle:EE,variants:{simple:ME,striped:TE,unstyled:{}},sizes:{sm:AE({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:AE({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:AE({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}});function PE(e,t,n){return Math.min(Math.max(e,n),t)}class RE extends Error{constructor(e){super('Failed to parse color: "'.concat(e,'"'))}}var DE=RE;function IE(e){if("string"!==typeof e)throw new DE(e);if("transparent"===e.trim().toLowerCase())return[0,0,0,0];let t=e.trim();t=UE.test(e)?function(e){const t=e.toLowerCase().trim(),n=jE[function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0)%2341}(t)];if(!n)throw new DE(e);return"#".concat(n)}(e):e;const n=LE.exec(t);if(n){const e=Array.from(n).slice(1);return[...e.slice(0,3).map((e=>parseInt(FE(e,2),16))),parseInt(FE(e[3]||"f",2),16)/255]}const r=OE.exec(t);if(r){const e=Array.from(r).slice(1);return[...e.slice(0,3).map((e=>parseInt(e,16))),parseInt(e[3]||"ff",16)/255]}const i=NE.exec(t);if(i){const e=Array.from(i).slice(1);return[...e.slice(0,3).map((e=>parseInt(e,10))),parseFloat(e[3]||"1")]}const a=zE.exec(t);if(a){const[t,n,r,i]=Array.from(a).slice(1).map(parseFloat);if(PE(0,100,n)!==n)throw new DE(e);if(PE(0,100,r)!==r)throw new DE(e);return[...GE(t,n,r),Number.isNaN(i)?1:i]}throw new DE(e)}const BE=e=>parseInt(e.replace(/_/g,""),36),jE="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((e,t)=>{const n=BE(t.substring(0,3)),r=BE(t.substring(3)).toString(16);let i="";for(let a=0;a<6-r.length;a++)i+="0";return e[n]="".concat(i).concat(r),e}),{});const FE=(e,t)=>Array.from(Array(t)).map((()=>e)).join(""),LE=new RegExp("^#".concat(FE("([a-f0-9])",3),"([a-f0-9])?$"),"i"),OE=new RegExp("^#".concat(FE("([a-f0-9]{2})",3),"([a-f0-9]{2})?$"),"i"),NE=new RegExp("^rgba?\\(\\s*(\\d+)\\s*".concat(FE(",\\s*(\\d+)\\s*",2),"(?:,\\s*([\\d.]+))?\\s*\\)$"),"i"),zE=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,UE=/^[a-z]+$/i,HE=e=>Math.round(255*e),GE=(e,t,n)=>{let r=n/100;if(0===t)return[r,r,r].map(HE);const i=(e%360+360)%360/60,a=(1-Math.abs(2*r-1))*(t/100),s=a*(1-Math.abs(i%2-1));let o=0,l=0,c=0;i>=0&&i<1?(o=a,l=s):i>=1&&i<2?(o=s,l=a):i>=2&&i<3?(l=a,c=s):i>=3&&i<4?(l=s,c=a):i>=4&&i<5?(o=s,c=a):i>=5&&i<6&&(o=a,c=s);const u=r-a/2;return[o+u,l+u,c+u].map(HE)};function VE(e,t,n,r){return"rgba(".concat(PE(0,255,e).toFixed(),", ").concat(PE(0,255,t).toFixed(),", ").concat(PE(0,255,n).toFixed(),", ").concat(parseFloat(PE(0,1,r).toFixed(3)),")")}function WE(e,t){const[n,r,i,a]=IE(e);return VE(n,r,i,a-t)}var qE=(e,t,n)=>{const r=function(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}(e,"colors.".concat(t),t);try{return function(e){const[t,n,r,i]=IE(e);let a=e=>{const t=PE(0,255,e).toString(16);return 1===t.length?"0".concat(t):t};"#".concat(a(t)).concat(a(n)).concat(a(r)).concat(i<1?a(Math.round(255*i)):"")}(r),r}catch(i){return null!=n?n:"#000000"}},XE=e=>t=>{const n=(e=>{const[t,n,r]=IE(e);return(299*t+587*n+114*r)/1e3})(qE(t,e));return n<128?"dark":"light"},JE=(e,t)=>n=>WE(qE(n,e),1-t);function YE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1rem",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(255, 255, 255, 0.15)";return{backgroundImage:"linear-gradient(\n    45deg,\n    ".concat(t," 25%,\n    transparent 25%,\n    transparent 50%,\n    ").concat(t," 50%,\n    ").concat(t," 75%,\n    transparent 75%,\n    transparent\n  )"),backgroundSize:"".concat(e," ").concat(e)}}function KE(e){const t="#".concat(Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0"));return e&&(n=e,0!==Object.keys(n).length)?e.string&&e.colors?function(e,t){let n=0;if(0===e.length)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n&=n;return n=(n%t.length+t.length)%t.length,t[n]}(e.string,e.colors):e.string&&!e.colors?function(e){let t=0;if(0===e.length)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t&=t;let n="#";for(let r=0;r<3;r+=1){n+="00".concat((t>>8*r&255).toString(16)).substr(-2)}return n}(e.string):e.colors&&!e.string?function(e){return e[Math.floor(Math.random()*e.length)]}(e.colors):t:t;var n}var ZE=Me("tabs-color"),QE=Me("tabs-bg"),$E=Me("tabs-border-color"),{defineMultiStyleConfig:eC,definePartsStyle:tC}=dt(JA.keys),nC=e=>{const{orientation:t}=e;return{display:"vertical"===t?"flex":"block"}},rC=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},iC=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:"vertical"===n?"column":"row"}},aC={p:4},sC=tC((e=>({root:nC(e),tab:rC(e),tablist:iC(e),tabpanel:aC}))),oC={sm:tC({tab:{py:1,px:4,fontSize:"sm"}}),md:tC({tab:{fontSize:"md",py:2,px:4}}),lg:tC({tab:{fontSize:"lg",py:3,px:4}})},lC=tC((e=>{const{colorScheme:t,orientation:n}=e,r="vertical"===n,i=r?"borderStart":"borderBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[r?"marginStart":"marginBottom"]:"-2px",_selected:{[ZE.variable]:"colors.".concat(t,".600"),_dark:{[ZE.variable]:"colors.".concat(t,".300")},borderColor:"currentColor"},_active:{[QE.variable]:"colors.gray.200",_dark:{[QE.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:ZE.reference,bg:QE.reference}}})),cC=tC((e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[$E.variable]:"transparent",_selected:{[ZE.variable]:"colors.".concat(t,".600"),[$E.variable]:"colors.white",_dark:{[ZE.variable]:"colors.".concat(t,".300"),[$E.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:$E.reference},color:ZE.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),uC=tC((e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[QE.variable]:"colors.gray.50",_dark:{[QE.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[QE.variable]:"colors.white",[ZE.variable]:"colors.".concat(t,".600"),_dark:{[QE.variable]:"colors.gray.800",[ZE.variable]:"colors.".concat(t,".300")},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:ZE.reference,bg:QE.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),dC=tC((e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:qE(n,"".concat(t,".700")),bg:qE(n,"".concat(t,".100"))}}}})),hC=tC((e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[ZE.variable]:"colors.gray.600",_dark:{[ZE.variable]:"inherit"},_selected:{[ZE.variable]:"colors.white",[QE.variable]:"colors.".concat(t,".600"),_dark:{[ZE.variable]:"colors.gray.800",[QE.variable]:"colors.".concat(t,".300")}},color:ZE.reference,bg:QE.reference}}})),pC=eC({baseStyle:sC,sizes:oC,variants:{line:lC,enclosed:cC,"enclosed-colored":uC,"soft-rounded":dC,"solid-rounded":hC,unstyled:tC({})},defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),fC=function(e,t){const n={};for(const r of t)if(Array.isArray(r)){const[t,i]=r;n[t]=Me("".concat(e,"-").concat(t),i)}else n[r]=Me("".concat(e,"-").concat(r));return n}("badge",["bg","color","shadow"]),mC=e=>{const{colorScheme:t,theme:n}=e,r=JE("".concat(t,".500"),.6)(n);return{[fC.bg.variable]:"colors.".concat(t,".500"),[fC.color.variable]:"colors.white",_dark:{[fC.bg.variable]:r,[fC.color.variable]:"colors.whiteAlpha.800"}}},gC=e=>{const{colorScheme:t,theme:n}=e,r=JE("".concat(t,".200"),.16)(n);return{[fC.bg.variable]:"colors.".concat(t,".100"),[fC.color.variable]:"colors.".concat(t,".800"),_dark:{[fC.bg.variable]:r,[fC.color.variable]:"colors.".concat(t,".200")}}},vC=e=>{const{colorScheme:t,theme:n}=e,r=JE("".concat(t,".200"),.8)(n);return{[fC.color.variable]:"colors.".concat(t,".500"),_dark:{[fC.color.variable]:r},[fC.shadow.variable]:"inset 0 0 0px 1px ".concat(fC.color.reference)}},yC={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:fC.bg.reference,color:fC.color.reference,boxShadow:fC.shadow.reference},variants:{solid:mC,subtle:gC,outline:vC},defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:xC,definePartsStyle:bC}=dt(YA.keys),wC=Me("tag-bg"),SC=Me("tag-color"),_C=Me("tag-shadow"),AC=Me("tag-min-height"),EC=Me("tag-min-width"),CC=Me("tag-font-size"),MC=Me("tag-padding-inline"),TC=bC({container:{fontWeight:"medium",lineHeight:1.2,outline:0,[SC.variable]:fC.color.reference,[wC.variable]:fC.bg.reference,[_C.variable]:fC.shadow.reference,color:SC.reference,bg:wC.reference,boxShadow:_C.reference,borderRadius:"md",minH:AC.reference,minW:EC.reference,fontSize:CC.reference,px:MC.reference,_focusVisible:{[_C.variable]:"shadows.outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}}),kC={sm:bC({container:{[AC.variable]:"sizes.5",[EC.variable]:"sizes.5",[CC.variable]:"fontSizes.xs",[MC.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:bC({container:{[AC.variable]:"sizes.6",[EC.variable]:"sizes.6",[CC.variable]:"fontSizes.sm",[MC.variable]:"space.2"}}),lg:bC({container:{[AC.variable]:"sizes.8",[EC.variable]:"sizes.8",[CC.variable]:"fontSizes.md",[MC.variable]:"space.3"}})},PC={subtle:bC((e=>{var t;return{container:null==(t=yC.variants)?void 0:t.subtle(e)}})),solid:bC((e=>{var t;return{container:null==(t=yC.variants)?void 0:t.solid(e)}})),outline:bC((e=>{var t;return{container:null==(t=yC.variants)?void 0:t.outline(e)}}))},RC=xC({variants:PC,baseStyle:TC,sizes:kC,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:DC,defineMultiStyleConfig:IC}=dt(jA.keys),BC=Me("input-height"),jC=Me("input-font-size"),FC=Me("input-padding"),LC=Me("input-border-radius"),OC=DC({addon:{height:BC.reference,fontSize:jC.reference,px:FC.reference,borderRadius:LC.reference},field:{width:"100%",height:BC.reference,fontSize:jC.reference,px:FC.reference,borderRadius:LC.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),NC={lg:{[jC.variable]:"fontSizes.lg",[FC.variable]:"space.4",[LC.variable]:"radii.md",[BC.variable]:"sizes.12"},md:{[jC.variable]:"fontSizes.md",[FC.variable]:"space.4",[LC.variable]:"radii.md",[BC.variable]:"sizes.10"},sm:{[jC.variable]:"fontSizes.sm",[FC.variable]:"space.3",[LC.variable]:"radii.sm",[BC.variable]:"sizes.8"},xs:{[jC.variable]:"fontSizes.xs",[FC.variable]:"space.2",[LC.variable]:"radii.sm",[BC.variable]:"sizes.6"}},zC={lg:DC({field:NC.lg,group:NC.lg}),md:DC({field:NC.md,group:NC.md}),sm:DC({field:NC.sm,group:NC.sm}),xs:DC({field:NC.xs,group:NC.xs})};function UC(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||wE("blue.500","blue.300")(e),errorBorderColor:n||wE("red.500","red.300")(e)}}var HC,GC,VC,WC,qC,XC,JC,YC,KC,ZC,QC,$C=DC((e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=UC(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:wE("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:qE(t,r),boxShadow:"0 0 0 1px ".concat(qE(t,r))},_focusVisible:{zIndex:1,borderColor:qE(t,n),boxShadow:"0 0 0 1px ".concat(qE(t,n))}},addon:{border:"1px solid",borderColor:wE("inherit","whiteAlpha.50")(e),bg:wE("gray.100","whiteAlpha.300")(e)}}})),eM=DC((e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=UC(e);return{field:{border:"2px solid",borderColor:"transparent",bg:wE("gray.100","whiteAlpha.50")(e),_hover:{bg:wE("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:qE(t,r)},_focusVisible:{bg:"transparent",borderColor:qE(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:wE("gray.100","whiteAlpha.50")(e)}}})),tM=DC((e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=UC(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:qE(t,r),boxShadow:"0px 1px 0px 0px ".concat(qE(t,r))},_focusVisible:{borderColor:qE(t,n),boxShadow:"0px 1px 0px 0px ".concat(qE(t,n))}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}})),nM=IC({baseStyle:OC,sizes:zC,variants:{outline:$C,filled:eM,flushed:tM,unstyled:DC({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}})},defaultProps:{size:"md",variant:"outline"}}),rM=(0,c.A)((0,c.A)({},null==(HC=nM.baseStyle)?void 0:HC.field),{},{paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"}),iM={outline:e=>{var t,n;return null!=(n=null==(t=nM.variants)?void 0:t.outline(e).field)?n:{}},flushed:e=>{var t,n;return null!=(n=null==(t=nM.variants)?void 0:t.flushed(e).field)?n:{}},filled:e=>{var t,n;return null!=(n=null==(t=nM.variants)?void 0:t.filled(e).field)?n:{}},unstyled:null!=(VC=null==(GC=nM.variants)?void 0:GC.unstyled.field)?VC:{}},aM={baseStyle:rM,sizes:{xs:null!=(qC=null==(WC=nM.sizes)?void 0:WC.xs.field)?qC:{},sm:null!=(JC=null==(XC=nM.sizes)?void 0:XC.sm.field)?JC:{},md:null!=(KC=null==(YC=nM.sizes)?void 0:YC.md.field)?KC:{},lg:null!=(QC=null==(ZC=nM.sizes)?void 0:ZC.lg.field)?QC:{}},variants:iM,defaultProps:{size:"md",variant:"outline"}},sM=eE("tooltip-bg"),oM=eE("tooltip-fg"),lM=eE("popper-arrow-bg"),cM={baseStyle:{bg:sM.reference,color:oM.reference,[sM.variable]:"colors.gray.700",[oM.variable]:"colors.whiteAlpha.900",_dark:{[sM.variable]:"colors.gray.300",[oM.variable]:"colors.gray.900"},[lM.variable]:sM.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"}},{defineMultiStyleConfig:uM,definePartsStyle:dM}=dt(UA.keys),hM=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,a=wE(YE(),YE("1rem","rgba(0,0,0,0.1)"))(e),s=wE("".concat(t,".500"),"".concat(t,".200"))(e),o="linear-gradient(\n    to right,\n    transparent 0%,\n    ".concat(qE(n,s)," 50%,\n    transparent 100%\n  )"),l=!r&&i;return(0,c.A)((0,c.A)({},l&&a),r?{bgImage:o}:{bgColor:s})},pM={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},fM=e=>({bg:wE("gray.100","whiteAlpha.300")(e)}),mM=e=>(0,c.A)({transitionProperty:"common",transitionDuration:"slow"},hM(e)),gM=dM((e=>({label:pM,filledTrack:mM(e),track:fM(e)}))),vM=uM({sizes:{xs:dM({track:{h:"1"}}),sm:dM({track:{h:"2"}}),md:dM({track:{h:"3"}}),lg:dM({track:{h:"4"}})},baseStyle:gM,defaultProps:{size:"md",colorScheme:"blue"}});function yM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(e=>"function"===typeof e)(e)?e(...n):e}var xM,bM,wM,SM,_M,AM,EM,CM,MM,{definePartsStyle:TM,defineMultiStyleConfig:kM}=dt(PA.keys),PM=Me("checkbox-size"),RM=e=>{const{colorScheme:t}=e;return{w:PM.reference,h:PM.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:wE("".concat(t,".500"),"".concat(t,".200"))(e),borderColor:wE("".concat(t,".500"),"".concat(t,".200"))(e),color:wE("white","gray.900")(e),_hover:{bg:wE("".concat(t,".600"),"".concat(t,".300"))(e),borderColor:wE("".concat(t,".600"),"".concat(t,".300"))(e)},_disabled:{borderColor:wE("gray.200","transparent")(e),bg:wE("gray.200","whiteAlpha.300")(e),color:wE("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:wE("".concat(t,".500"),"".concat(t,".200"))(e),borderColor:wE("".concat(t,".500"),"".concat(t,".200"))(e),color:wE("white","gray.900")(e)},_disabled:{bg:wE("gray.100","whiteAlpha.100")(e),borderColor:wE("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:wE("red.500","red.300")(e)}}},DM={_disabled:{cursor:"not-allowed"}},IM={userSelect:"none",_disabled:{opacity:.4}},BM={transitionProperty:"transform",transitionDuration:"normal"},jM=kM({baseStyle:TM((e=>({icon:BM,container:DM,control:yM(RM,e),label:IM}))),sizes:{sm:TM({control:{[PM.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:TM({control:{[PM.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:TM({control:{[PM.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:FM,definePartsStyle:LM}=dt(HA.keys),OM=e=>{var t;const n=null==(t=yM(jM.baseStyle,e))?void 0:t.control;return(0,c.A)((0,c.A)({},n),{},{borderRadius:"full",_checked:(0,c.A)((0,c.A)({},null==n?void 0:n._checked),{},{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},NM=LM((e=>{var t,n,r,i;return{label:null==(n=(t=jM).baseStyle)?void 0:n.call(t,e).label,container:null==(i=(r=jM).baseStyle)?void 0:i.call(r,e).container,control:OM(e)}})),zM=FM({baseStyle:NM,sizes:{md:LM({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:LM({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:LM({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:UM,definePartsStyle:HM}=dt(GA.keys),GM=Me("select-bg"),VM={paddingInlineEnd:"8"},WM=UM({baseStyle:HM({field:(0,c.A)((0,c.A)({},null==(xM=nM.baseStyle)?void 0:xM.field),{},{appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:GM.reference,[GM.variable]:"colors.white",_dark:{[GM.variable]:"colors.gray.700"},"> option, > optgroup":{bg:GM.reference}}),icon:{width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}}}),sizes:{lg:(0,c.A)((0,c.A)({},null==(bM=nM.sizes)?void 0:bM.lg),{},{field:(0,c.A)((0,c.A)({},null==(wM=nM.sizes)?void 0:wM.lg.field),VM)}),md:(0,c.A)((0,c.A)({},null==(SM=nM.sizes)?void 0:SM.md),{},{field:(0,c.A)((0,c.A)({},null==(_M=nM.sizes)?void 0:_M.md.field),VM)}),sm:(0,c.A)((0,c.A)({},null==(AM=nM.sizes)?void 0:AM.sm),{},{field:(0,c.A)((0,c.A)({},null==(EM=nM.sizes)?void 0:EM.sm.field),VM)}),xs:(0,c.A)((0,c.A)({},null==(CM=nM.sizes)?void 0:CM.xs),{},{field:(0,c.A)((0,c.A)({},null==(MM=nM.sizes)?void 0:MM.xs.field),VM),icon:{insetEnd:"1"}})},variants:nM.variants,defaultProps:nM.defaultProps}),qM=Me("skeleton-start-color"),XM=Me("skeleton-end-color"),JM={baseStyle:{[qM.variable]:"colors.gray.100",[XM.variable]:"colors.gray.400",_dark:{[qM.variable]:"colors.gray.800",[XM.variable]:"colors.gray.600"},background:qM.reference,borderColor:XM.reference,opacity:.7,borderRadius:"sm"}},YM=Me("skip-link-bg"),KM={baseStyle:{borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[YM.variable]:"colors.white",_dark:{[YM.variable]:"colors.gray.700"},bg:YM.reference}}},{defineMultiStyleConfig:ZM,definePartsStyle:QM}=dt(VA.keys),$M=Me("slider-thumb-size"),eT=Me("slider-track-size"),tT=Me("slider-bg"),nT=e=>{const{orientation:t}=e;return(0,c.A)({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},SE({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}}))},rT=e=>{const t=SE({orientation:e.orientation,horizontal:{h:eT.reference},vertical:{w:eT.reference}});return(0,c.A)((0,c.A)({},t),{},{overflow:"hidden",borderRadius:"sm",[tT.variable]:"colors.gray.200",_dark:{[tT.variable]:"colors.whiteAlpha.200"},_disabled:{[tT.variable]:"colors.gray.300",_dark:{[tT.variable]:"colors.whiteAlpha.300"}},bg:tT.reference})},iT=e=>{const{orientation:t}=e,n=SE({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}});return(0,c.A)((0,c.A)({},n),{},{w:$M.reference,h:$M.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}})},aT=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[tT.variable]:"colors.".concat(t,".500"),_dark:{[tT.variable]:"colors.".concat(t,".200")},bg:tT.reference}},sT=ZM({baseStyle:QM((e=>({container:nT(e),track:rT(e),thumb:iT(e),filledTrack:aT(e)}))),sizes:{lg:QM({container:{[$M.variable]:"sizes.4",[eT.variable]:"sizes.1"}}),md:QM({container:{[$M.variable]:"sizes.3.5",[eT.variable]:"sizes.1"}}),sm:QM({container:{[$M.variable]:"sizes.2.5",[eT.variable]:"sizes.0.5"}})},defaultProps:{size:"md",colorScheme:"blue"}}),oT=eE("spinner-size"),lT={baseStyle:{width:[oT.reference],height:[oT.reference]},sizes:{xs:{[oT.variable]:"sizes.3"},sm:{[oT.variable]:"sizes.4"},md:{[oT.variable]:"sizes.6"},lg:{[oT.variable]:"sizes.8"},xl:{[oT.variable]:"sizes.12"}},defaultProps:{size:"md"}},{defineMultiStyleConfig:cT,definePartsStyle:uT}=dt(WA.keys),dT=cT({baseStyle:uT({container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:"2"},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"}}),sizes:{md:uT({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},defaultProps:{size:"md"}}),hT=Me("kbd-bg"),pT={baseStyle:{[hT.variable]:"colors.gray.100",_dark:{[hT.variable]:"colors.whiteAlpha.100"},bg:hT.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}},fT={baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},{defineMultiStyleConfig:mT,definePartsStyle:gT}=dt(FA.keys),vT=mT({baseStyle:gT({icon:{marginEnd:"2",display:"inline",verticalAlign:"text-bottom"}})}),{defineMultiStyleConfig:yT,definePartsStyle:xT}=dt(LA.keys),bT=Me("menu-bg"),wT=Me("menu-shadow"),ST=yT({baseStyle:xT({button:{transitionProperty:"common",transitionDuration:"normal"},list:{[bT.variable]:"#fff",[wT.variable]:"shadows.sm",_dark:{[bT.variable]:"colors.gray.700",[wT.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:bT.reference,boxShadow:wT.reference},item:{py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[bT.variable]:"colors.gray.100",_dark:{[bT.variable]:"colors.whiteAlpha.100"}},_active:{[bT.variable]:"colors.gray.200",_dark:{[bT.variable]:"colors.whiteAlpha.200"}},_expanded:{[bT.variable]:"colors.gray.100",_dark:{[bT.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:bT.reference},groupTitle:{mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},command:{opacity:.6},divider:{border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6}})}),{defineMultiStyleConfig:_T,definePartsStyle:AT}=dt(OA.keys),ET=Me("modal-bg"),CT=Me("modal-shadow"),MT={bg:"blackAlpha.600",zIndex:"modal"},TT=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:"inside"===n?"hidden":"auto",overscrollBehaviorY:"none"}},kT=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:"inside"===n?"calc(100% - 7.5rem)":void 0,[ET.variable]:"colors.white",[CT.variable]:"shadows.lg",_dark:{[ET.variable]:"colors.gray.700",[CT.variable]:"shadows.dark-lg"},bg:ET.reference,boxShadow:CT.reference}},PT={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},RT={position:"absolute",top:"2",insetEnd:"3"},DT=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:"inside"===t?"auto":void 0}},IT={px:"6",py:"4"};function BT(e){return AT("full"===e?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var jT=_T({baseStyle:AT((e=>({overlay:MT,dialogContainer:yM(TT,e),dialog:yM(kT,e),header:PT,closeButton:RT,body:yM(DT,e),footer:IT}))),sizes:{xs:BT("xs"),sm:BT("sm"),md:BT("md"),lg:BT("lg"),xl:BT("xl"),"2xl":BT("2xl"),"3xl":BT("3xl"),"4xl":BT("4xl"),"5xl":BT("5xl"),"6xl":BT("6xl"),full:BT("full")},defaultProps:{size:"md"}}),{defineMultiStyleConfig:FT,definePartsStyle:LT}=dt(NA.keys),OT=eE("number-input-stepper-width"),NT=eE("number-input-input-padding"),zT=cE(OT).add("0.5rem").toString(),UT=eE("number-input-bg"),HT=eE("number-input-color"),GT=eE("number-input-border-color"),VT={[OT.variable]:"sizes.6",[NT.variable]:zT},WT=e=>{var t,n;return null!=(n=null==(t=yM(nM.baseStyle,e))?void 0:t.field)?n:{}},qT={width:OT.reference},XT={borderStart:"1px solid",borderStartColor:GT.reference,color:HT.reference,bg:UT.reference,[HT.variable]:"colors.chakra-body-text",[GT.variable]:"colors.chakra-border-color",_dark:{[HT.variable]:"colors.whiteAlpha.800",[GT.variable]:"colors.whiteAlpha.300"},_active:{[UT.variable]:"colors.gray.200",_dark:{[UT.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},JT=LT((e=>{var t;return{root:VT,field:null!=(t=yM(WT,e))?t:{},stepperGroup:qT,stepper:XT}}));function YT(e){var t,n,r;const i=null==(t=nM.sizes)?void 0:t[e],a={lg:"md",md:"md",sm:"sm",xs:"sm"},s=null!=(r=null==(n=i.field)?void 0:n.fontSize)?r:"md",o=hA.fontSizes[s];return LT({field:(0,c.A)((0,c.A)({},i.field),{},{paddingInlineEnd:NT.reference,verticalAlign:"top"}),stepper:{fontSize:cE(o).multiply(.75).toString(),_first:{borderTopEndRadius:a[e]},_last:{borderBottomEndRadius:a[e],mt:"-1px",borderTopWidth:1}}})}var KT,ZT,QT,$T=FT({baseStyle:JT,sizes:{xs:YT("xs"),sm:YT("sm"),md:YT("md"),lg:YT("lg")},variants:nM.variants,defaultProps:nM.defaultProps}),ek=(0,c.A)((0,c.A)({},null==(KT=nM.baseStyle)?void 0:KT.field),{},{textAlign:"center"}),tk={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},nk={outline:e=>{var t,n,r;return null!=(r=null==(n=yM(null==(t=nM.variants)?void 0:t.outline,e))?void 0:n.field)?r:{}},flushed:e=>{var t,n,r;return null!=(r=null==(n=yM(null==(t=nM.variants)?void 0:t.flushed,e))?void 0:n.field)?r:{}},filled:e=>{var t,n,r;return null!=(r=null==(n=yM(null==(t=nM.variants)?void 0:t.filled,e))?void 0:n.field)?r:{}},unstyled:null!=(QT=null==(ZT=nM.variants)?void 0:ZT.unstyled.field)?QT:{}},rk={baseStyle:ek,sizes:tk,variants:nk,defaultProps:nM.defaultProps},{defineMultiStyleConfig:ik,definePartsStyle:ak}=dt(zA.keys),sk=eE("popper-bg"),ok=eE("popper-arrow-bg"),lk=eE("popper-arrow-shadow-color"),ck=ik({baseStyle:ak({popper:{zIndex:10},content:{[sk.variable]:"colors.white",bg:sk.reference,[ok.variable]:sk.reference,[lk.variable]:"colors.gray.200",_dark:{[sk.variable]:"colors.gray.700",[lk.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},header:{px:3,py:2,borderBottomWidth:"1px"},body:{px:3,py:2},footer:{px:3,py:2,borderTopWidth:"1px"},closeButton:{position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2}})}),{definePartsStyle:uk,defineMultiStyleConfig:dk}=dt(RA.keys),hk=Me("drawer-bg"),pk=Me("drawer-box-shadow");function fk(e){return uk("full"===e?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var mk={bg:"blackAlpha.600",zIndex:"modal"},gk={display:"flex",zIndex:"modal",justifyContent:"center"},vk=e=>{const{isFullHeight:t}=e;return(0,c.A)((0,c.A)({},t&&{height:"100vh"}),{},{zIndex:"modal",maxH:"100vh",color:"inherit",[hk.variable]:"colors.white",[pk.variable]:"shadows.lg",_dark:{[hk.variable]:"colors.gray.700",[pk.variable]:"shadows.dark-lg"},bg:hk.reference,boxShadow:pk.reference})},yk={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},xk={position:"absolute",top:"2",insetEnd:"3"},bk={px:"6",py:"2",flex:"1",overflow:"auto"},wk={px:"6",py:"4"},Sk=dk({baseStyle:uk((e=>({overlay:mk,dialogContainer:gk,dialog:yM(vk,e),header:yk,closeButton:xk,body:bk,footer:wk}))),sizes:{xs:fk("xs"),sm:fk("md"),md:fk("lg"),lg:fk("2xl"),xl:fk("4xl"),full:fk("full")},defaultProps:{size:"xs"}}),{definePartsStyle:_k,defineMultiStyleConfig:Ak}=dt(DA.keys),Ek=Ak({baseStyle:_k({preview:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}})}),{definePartsStyle:Ck,defineMultiStyleConfig:Mk}=dt(IA.keys),Tk=Me("form-control-color"),kk=Mk({baseStyle:Ck({container:{width:"100%",position:"relative"},requiredIndicator:{marginStart:"1",[Tk.variable]:"colors.red.500",_dark:{[Tk.variable]:"colors.red.300"},color:Tk.reference},helperText:{mt:"2",[Tk.variable]:"colors.gray.600",_dark:{[Tk.variable]:"colors.whiteAlpha.600"},color:Tk.reference,lineHeight:"normal",fontSize:"sm"}})}),{definePartsStyle:Pk,defineMultiStyleConfig:Rk}=dt(BA.keys),Dk=Me("form-error-color"),Ik=Rk({baseStyle:Pk({text:{[Dk.variable]:"colors.red.500",_dark:{[Dk.variable]:"colors.red.300"},color:Dk.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},icon:{marginEnd:"0.5em",[Dk.variable]:"colors.red.500",_dark:{[Dk.variable]:"colors.red.300"},color:Dk.reference}})}),Bk={baseStyle:{fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},jk={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},{defineMultiStyleConfig:Fk,definePartsStyle:Lk}=dt(kA.keys),Ok=Me("breadcrumb-link-decor"),Nk=Fk({baseStyle:Lk({link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:Ok.reference,[Ok.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[Ok.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}}})}),zk=e=>{const{colorScheme:t,theme:n}=e;if("gray"===t)return{color:wE("gray.800","whiteAlpha.900")(e),_hover:{bg:wE("gray.100","whiteAlpha.200")(e)},_active:{bg:wE("gray.200","whiteAlpha.300")(e)}};const r=JE("".concat(t,".200"),.12)(n),i=JE("".concat(t,".200"),.24)(n);return{color:wE("".concat(t,".600"),"".concat(t,".200"))(e),bg:"transparent",_hover:{bg:wE("".concat(t,".50"),r)(e)},_active:{bg:wE("".concat(t,".100"),i)(e)}}},Uk=e=>{const{colorScheme:t}=e,n=wE("gray.200","whiteAlpha.300")(e);return(0,c.A)({border:"1px solid",borderColor:"gray"===t?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"}},yM(zk,e))},Hk={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Gk=e=>{var t;const{colorScheme:n}=e;if("gray"===n){const t=wE("gray.100","whiteAlpha.200")(e);return{bg:t,color:wE("gray.800","whiteAlpha.900")(e),_hover:{bg:wE("gray.200","whiteAlpha.300")(e),_disabled:{bg:t}},_active:{bg:wE("gray.300","whiteAlpha.400")(e)}}}const{bg:r="".concat(n,".500"),color:i="white",hoverBg:a="".concat(n,".600"),activeBg:s="".concat(n,".700")}=null!=(t=Hk[n])?t:{},o=wE(r,"".concat(n,".200"))(e);return{bg:o,color:wE(i,"gray.800")(e),_hover:{bg:wE(a,"".concat(n,".300"))(e),_disabled:{bg:o}},_active:{bg:wE(s,"".concat(n,".400"))(e)}}},Vk=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:wE("".concat(t,".500"),"".concat(t,".200"))(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:wE("".concat(t,".700"),"".concat(t,".500"))(e)}}},Wk={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:{ghost:zk,outline:Uk,solid:Gk,link:Vk,unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"}},sizes:{lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:qk,defineMultiStyleConfig:Xk}=dt(KA.keys),Jk=Me("card-bg"),Yk=Me("card-padding"),Kk=Me("card-shadow"),Zk=Me("card-radius"),Qk=Me("card-border-width","0"),$k=Me("card-border-color"),eP=qk({container:{[Jk.variable]:"colors.chakra-body-bg",backgroundColor:Jk.reference,boxShadow:Kk.reference,borderRadius:Zk.reference,color:"chakra-body-text",borderWidth:Qk.reference,borderColor:$k.reference},body:{padding:Yk.reference,flex:"1 1 0%"},header:{padding:Yk.reference},footer:{padding:Yk.reference}}),tP={sm:qk({container:{[Zk.variable]:"radii.base",[Yk.variable]:"space.3"}}),md:qk({container:{[Zk.variable]:"radii.md",[Yk.variable]:"space.5"}}),lg:qk({container:{[Zk.variable]:"radii.xl",[Yk.variable]:"space.7"}})},nP=Xk({baseStyle:eP,variants:{elevated:qk({container:{[Kk.variable]:"shadows.base",_dark:{[Jk.variable]:"colors.gray.700"}}}),outline:qk({container:{[Qk.variable]:"1px",[$k.variable]:"colors.chakra-border-color"}}),filled:qk({container:{[Jk.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Yk.variable]:0},header:{[Yk.variable]:0},footer:{[Yk.variable]:0}}},sizes:tP,defaultProps:{variant:"elevated",size:"md"}}),rP=eE("close-button-size"),iP=eE("close-button-bg"),aP={baseStyle:{w:[rP.reference],h:[rP.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[iP.variable]:"colors.blackAlpha.100",_dark:{[iP.variable]:"colors.whiteAlpha.100"}},_active:{[iP.variable]:"colors.blackAlpha.200",_dark:{[iP.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:iP.reference},sizes:{lg:{[rP.variable]:"sizes.10",fontSize:"md"},md:{[rP.variable]:"sizes.8",fontSize:"xs"},sm:{[rP.variable]:"sizes.6",fontSize:"2xs"}},defaultProps:{size:"md"}},{variants:sP,defaultProps:oP}=yC,lP={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:fC.bg.reference,color:fC.color.reference,boxShadow:fC.shadow.reference},variants:sP,defaultProps:oP},cP={baseStyle:{w:"100%",mx:"auto",maxW:"prose",px:"4"}},uP={baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},{definePartsStyle:dP,defineMultiStyleConfig:hP}=dt(CA.keys),pP=hP({baseStyle:dP({container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},panel:{pt:"2",px:"4",pb:"5"},icon:{fontSize:"1.25em"}})}),{definePartsStyle:fP,defineMultiStyleConfig:mP}=dt(MA.keys),gP=Me("alert-fg"),vP=Me("alert-bg"),yP=fP({container:{bg:vP.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:gP.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:gP.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function xP(e){const{theme:t,colorScheme:n}=e,r=JE("".concat(n,".200"),.16)(t);return{light:"colors.".concat(n,".100"),dark:r}}var bP=fP((e=>{const{colorScheme:t}=e,n=xP(e);return{container:{[gP.variable]:"colors.".concat(t,".600"),[vP.variable]:n.light,_dark:{[gP.variable]:"colors.".concat(t,".200"),[vP.variable]:n.dark}}}})),wP=fP((e=>{const{colorScheme:t}=e,n=xP(e);return{container:{[gP.variable]:"colors.".concat(t,".600"),[vP.variable]:n.light,_dark:{[gP.variable]:"colors.".concat(t,".200"),[vP.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:gP.reference}}})),SP=fP((e=>{const{colorScheme:t}=e,n=xP(e);return{container:{[gP.variable]:"colors.".concat(t,".600"),[vP.variable]:n.light,_dark:{[gP.variable]:"colors.".concat(t,".200"),[vP.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:gP.reference}}})),_P=fP((e=>{const{colorScheme:t}=e;return{container:{[gP.variable]:"colors.white",[vP.variable]:"colors.".concat(t,".600"),_dark:{[gP.variable]:"colors.gray.900",[vP.variable]:"colors.".concat(t,".200")},color:gP.reference}}})),AP=mP({baseStyle:yP,variants:{subtle:bP,"left-accent":wP,"top-accent":SP,solid:_P},defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:EP,defineMultiStyleConfig:CP}=dt(TA.keys),MP=Me("avatar-border-color"),TP=Me("avatar-bg"),kP=Me("avatar-font-size"),PP=Me("avatar-size"),RP={borderRadius:"full",border:"0.2em solid",borderColor:MP.reference,[MP.variable]:"white",_dark:{[MP.variable]:"colors.gray.800"}},DP={bg:TP.reference,fontSize:kP.reference,width:PP.reference,height:PP.reference,lineHeight:"1",[TP.variable]:"colors.gray.200",_dark:{[TP.variable]:"colors.whiteAlpha.400"}},IP=e=>{const{name:t,theme:n}=e,r=t?KE({string:t}):"colors.gray.400",i=(e=>t=>"dark"===XE(e)(t))(r)(n);let a="white";return i||(a="gray.800"),{bg:TP.reference,fontSize:kP.reference,color:a,borderColor:MP.reference,verticalAlign:"top",width:PP.reference,height:PP.reference,"&:not([data-loaded])":{[TP.variable]:r},[MP.variable]:"colors.white",_dark:{[MP.variable]:"colors.gray.800"}}},BP={fontSize:kP.reference,lineHeight:"1"};function jP(e){const t="100%"!==e?fA[e]:void 0;return EP({container:{[PP.variable]:null!=t?t:e,[kP.variable]:"calc(".concat(null!=t?t:e," / 2.5)")},excessLabel:{[PP.variable]:null!=t?t:e,[kP.variable]:"calc(".concat(null!=t?t:e," / 2.5)")}})}var FP={Accordion:pP,Alert:AP,Avatar:CP({baseStyle:EP((e=>({badge:yM(RP,e),excessLabel:yM(DP,e),container:yM(IP,e),label:BP}))),sizes:{"2xs":jP(4),xs:jP(6),sm:jP(8),md:jP(12),lg:jP(16),xl:jP(24),"2xl":jP(32),full:jP("100%")},defaultProps:{size:"md"}}),Badge:yC,Breadcrumb:Nk,Button:Wk,Checkbox:jM,CloseButton:aP,Code:lP,Container:cP,Divider:uP,Drawer:Sk,Editable:Ek,Form:kk,FormError:Ik,FormLabel:Bk,Heading:jk,Input:nM,Kbd:pT,Link:fT,List:vT,Menu:ST,Modal:jT,NumberInput:$T,PinInput:rk,Popover:ck,Progress:vM,Radio:zM,Select:WM,Skeleton:JM,SkipLink:KM,Slider:sT,Spinner:lT,Stat:dT,Switch:bE,Table:kE,Tabs:pC,Tag:RC,Textarea:aM,Tooltip:cM,Card:nP,Stepper:AA},LP={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},OP={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},NP={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},zP=(0,c.A)((0,c.A)({semanticTokens:LP,direction:"ltr"},mA),{},{components:FP,styles:OP,config:NP}),UP=(0,c.A)((0,c.A)({semanticTokens:LP,direction:"ltr",components:{}},mA),{},{styles:OP,config:NP});const HP=["children","theme","toastOptions"];var GP=e=>function(t){let{children:n,theme:r=e,toastOptions:i}=t,a=y(t,HP);return(0,ur.jsxs)(rA,(0,c.A)((0,c.A)({theme:r},a),{},{children:[(0,ur.jsx)(h_,{value:null==i?void 0:i.defaultOptions,children:n}),(0,ur.jsx)(f_,(0,c.A)({},i))]}))},VP=GP(zP),WP=(GP(UP),["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"]);function qP(e){return"function"===typeof e}var XP=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=[...n],a=n[n.length-1];var s;return b(s=a)&&WP.every((e=>Object.prototype.hasOwnProperty.call(s,e)))&&i.length>1?i=i.slice(0,i.length-1):a=e,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)}(...i.map((e=>t=>qP(e)?e(t):function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return M({},...t,YP)}(t,e))))(a)},JP=XP(zP);XP(UP);function YP(e,t,n,r){if((qP(e)||qP(t))&&Object.prototype.hasOwnProperty.call(r,n))return function(){const n=qP(e)?e(...arguments):e,r=qP(t)?t(...arguments):t;return M({},n,r,YP)}}const KP=JP({colors:{brand:{50:"#f5e9ff",100:"#e8d0ff",200:"#d2a8ff",300:"#bd80ff",400:"#a758ff",500:"#9130ff",600:"#741fcc",700:"#571799",800:"#3a0f66",900:"#1d0833"},IconButton:{baseStyle:{borderRadius:"xl",transition:"all 250ms cubic-bezier(0.2, 0.8, 0.2, 1)",_focusVisible:{boxShadow:"0 0 0 3px rgba(145,48,255,0.35)"}},variants:{solid:e=>({bg:"dark"===e.colorMode?"whiteAlpha.200":"gray.200",_hover:{transform:"translateY(-2px)",bg:"dark"===e.colorMode?"whiteAlpha.300":"gray.300"},_active:{transform:"translateY(0) scale(0.98)"}}),ghost:e=>({_hover:{bg:"dark"===e.colorMode?"whiteAlpha.200":"blackAlpha.100"}})},defaultProps:{variant:"solid"}},accent:{400:"#38bdf8",500:"#0ea5e9",600:"#0284c7"},success:{500:"#22c55e"},warning:{500:"#f59e0b"},danger:{500:"#ef4444"}},styles:{global:e=>({"html, body, #root":{height:"100%"},body:{bg:"dark"===e.colorMode?"gray.900":"gray.50",backgroundImage:"dark"===e.colorMode?"radial-gradient(1200px 600px at 10% 10%, rgba(145,48,255,0.15), transparent), radial-gradient(1000px 500px at 90% 30%, rgba(56,189,248,0.15), transparent)":"radial-gradient(1200px 600px at 10% 10%, rgba(145,48,255,0.12), transparent), radial-gradient(1000px 500px at 90% 30%, rgba(56,189,248,0.12), transparent)"},"*":{outlineOffset:"2px"},html:{scrollBehavior:"smooth"},"::selection":{background:"brand.500",color:"white"}})},components:{Button:{baseStyle:{borderRadius:"xl",fontWeight:700,letterSpacing:"0.2px",transition:"all 300ms cubic-bezier(0.2, 0.8, 0.2, 1)",_focusVisible:{boxShadow:"0 0 0 3px rgba(145,48,255,0.4)"}},sizes:{md:{h:12,px:6,fontSize:"md"},lg:{h:14,px:7,fontSize:"lg"},xl:{h:16,px:8,fontSize:"xl",borderRadius:"full"}},variants:{solid:e=>({bgGradient:"dark"===e.colorMode?"linear(to-r, brand.500, accent.500)":"linear(to-r, brand.400, accent.400)",color:"white",boxShadow:"0 10px 20px -10px rgba(145,48,255,0.6), 0 6px 8px -6px rgba(14,165,233,0.5)",_hover:{transform:"translateY(-2px) scale(1.02)",boxShadow:"0 16px 30px -10px rgba(145,48,255,0.7), 0 10px 14px -8px rgba(14,165,233,0.55)",filter:"saturate(1.1)"},_active:{transform:"translateY(0) scale(0.98)",boxShadow:"lg"}}),outline:e=>({borderWidth:2,borderColor:"dark"===e.colorMode?"whiteAlpha.300":"blackAlpha.300",color:"dark"===e.colorMode?"whiteAlpha.900":"gray.800",_hover:{borderColor:"transparent",bg:"dark"===e.colorMode?"whiteAlpha.100":"blackAlpha.50",boxShadow:"0 0 0 3px rgba(145,48,255,0.35)"},_active:{transform:"translateY(0) scale(0.98)"}}),ghost:e=>({bg:"dark"===e.colorMode?"whiteAlpha.100":"blackAlpha.50",_hover:{bg:"dark"===e.colorMode?"whiteAlpha.200":"blackAlpha.100"}}),subtle:e=>({bg:"dark"===e.colorMode?"whiteAlpha.100":"gray.100",color:"dark"===e.colorMode?"white":"gray.800",_hover:{bg:"dark"===e.colorMode?"whiteAlpha.200":"gray.200"},_active:{transform:"translateY(0) scale(0.98)"}}),danger:{bg:"danger.500",color:"white",_hover:{filter:"brightness(1.1)",transform:"translateY(-2px)"}},link:{color:"brand.400",_hover:{textDecoration:"none",color:"brand.300"}}},defaultProps:{colorScheme:"brand",size:"lg",variant:"solid"}},Input:{variants:{filled:e=>({field:{bg:"dark"===e.colorMode?"whiteAlpha.100":"gray.100",_hover:{bg:"dark"===e.colorMode?"whiteAlpha.200":"gray.200"},borderRadius:"lg",borderWidth:1,borderColor:"dark"===e.colorMode?"whiteAlpha.200":"blackAlpha.200",transition:"all .2s",_focusVisible:{borderColor:"brand.400",boxShadow:"0 0 0 3px rgba(145,48,255,0.25)"}}})},defaultProps:{variant:"filled"}},Select:{baseStyle:{field:{borderRadius:"lg"}},defaultProps:{variant:"filled"}},Tooltip:{baseStyle:{borderRadius:"md",bg:"blackAlpha.800"}},Card:{baseStyle:{borderRadius:"2xl",backdropFilter:"blur(8px)"}},Box:{variants:{glass:{bg:"whiteAlpha.100",border:"1px solid",borderColor:"whiteAlpha.200",backdropFilter:"blur(10px)"}}},Modal:{baseStyle:{dialog:{borderRadius:"2xl",bg:"rgba(16,18,24,0.95)",backdropFilter:"blur(8px)"}}},Tabs:{variants:{softRounded:e=>({tab:{_selected:{bg:"dark"===e.colorMode?"whiteAlpha.200":"gray.200",color:"brand.400"}}})},defaultProps:{variant:"soft-rounded",colorScheme:"brand"}},Badge:{baseStyle:{borderRadius:"full",px:2,py:.5,fontWeight:700}},Tag:{baseStyle:{borderRadius:"full",fontWeight:700}},Switch:{baseStyle:{track:{_checked:{bg:"brand.500"}}}},Progress:{baseStyle:{track:{borderRadius:"full"},filledTrack:{borderRadius:"full"}}}},config:{initialColorMode:"dark",useSystemColorMode:!1},fonts:{heading:"Baloo 2, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial",body:"Poppins, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial"}});function ZP(){return ZP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZP.apply(this,arguments)}function QP(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const $P=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(Zie){}function eR(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=ZP({},t,{errors:tR(t.errors)})),t}function tR(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&"RouteErrorResponse"===i.__type)n[r]=new pb(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"===typeof e)try{let t=new e(i.message);t.stack="",n[r]=t}catch(Zie){}}if(null==n[r]){let e=new Error(i.message);e.stack="",n[r]=e}}else n[r]=i;return n}const nR=r.createContext({isTransitioning:!1});const rR=r.createContext(new Map);const iR=i.startTransition,aR=xm.flushSync;i.useId;function sR(e){aR?aR(e):e()}class oR{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function lR(e){let{fallbackElement:t,router:n,future:i}=e,[a,s]=r.useState(n.state),[o,l]=r.useState(),[c,u]=r.useState({isTransitioning:!1}),[d,h]=r.useState(),[p,f]=r.useState(),[m,g]=r.useState(),v=r.useRef(new Map),{v7_startTransition:y}=i||{},x=r.useCallback((e=>{y?function(e){iR?iR(e):e()}(e):e()}),[y]),b=r.useCallback(((e,t)=>{let{deletedFetchers:r,unstable_flushSync:i,unstable_viewTransitionOpts:a}=t;r.forEach((e=>v.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&v.current.set(t,e.data)}));let o=null==n.window||"function"!==typeof n.window.document.startViewTransition;if(a&&!o){if(i){sR((()=>{p&&(d&&d.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:a.currentLocation,nextLocation:a.nextLocation})}));let t=n.window.document.startViewTransition((()=>{sR((()=>s(e)))}));return t.finished.finally((()=>{sR((()=>{h(void 0),f(void 0),l(void 0),u({isTransitioning:!1})}))})),void sR((()=>f(t)))}p?(d&&d.resolve(),p.skipTransition(),g({state:e,currentLocation:a.currentLocation,nextLocation:a.nextLocation})):(l(e),u({isTransitioning:!0,flushSync:!1,currentLocation:a.currentLocation,nextLocation:a.nextLocation}))}else i?sR((()=>s(e))):x((()=>s(e)))}),[n.window,p,d,v,x]);r.useLayoutEffect((()=>n.subscribe(b)),[n,b]),r.useEffect((()=>{c.isTransitioning&&!c.flushSync&&h(new oR)}),[c]),r.useEffect((()=>{if(d&&o&&n.window){let e=o,t=d.promise,r=n.window.document.startViewTransition((async()=>{x((()=>s(e))),await t}));r.finished.finally((()=>{h(void 0),f(void 0),l(void 0),u({isTransitioning:!1})})),f(r)}}),[x,o,d,n.window]),r.useEffect((()=>{d&&o&&a.location.key===o.location.key&&d.resolve()}),[d,p,a.location,o]),r.useEffect((()=>{!c.isTransitioning&&m&&(l(m.state),u({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))}),[c.isTransitioning,m]),r.useEffect((()=>{}),[]);let w=r.useMemo((()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:e=>n.navigate(e),push:(e,t,r)=>n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[n]),S=n.basename||"/",_=r.useMemo((()=>({router:n,navigator:w,static:!1,basename:S})),[n,w,S]);return r.createElement(r.Fragment,null,r.createElement(lw.Provider,{value:_},r.createElement(cw.Provider,{value:a},r.createElement(rR.Provider,{value:v.current},r.createElement(nR.Provider,{value:c},r.createElement(jw,{basename:S,location:a.location,navigationType:a.historyAction,navigator:w,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},a.initialized||n.future.v7_partialHydration?r.createElement(cR,{routes:n.routes,future:n.future,state:a}):t))))),null)}function cR(e){let{routes:t,future:n,state:r}=e;return ww(t,void 0,r,n)}const uR="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,dR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hR=r.forwardRef((function(e,t){let n,{onClick:i,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,p=QP(e,$P),{basename:f}=r.useContext(uw),m=!1;if("string"===typeof u&&dR.test(u)&&(n=u,uR))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=ib(t.pathname,f);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(Zie){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;fw()||Bx(!1);let{basename:i,navigator:a}=r.useContext(uw),{hash:s,pathname:o,search:l}=bw(e,{relative:n}),c=o;return"/"!==i&&(c="/"===o?i:cb([i,o])),a.createHref({pathname:c,search:l,hash:s})}(u,{relative:a}),v=function(e,t){let{target:n,replace:i,state:a,preventScrollReset:s,relative:o,unstable_viewTransition:l}=void 0===t?{}:t,c=vw(),u=mw(),d=bw(e,{relative:o});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:Ox(u)===Ox(d);c(e,{replace:n,state:a,preventScrollReset:s,relative:o,unstable_viewTransition:l})}}),[u,c,d,i,a,n,e,s,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,unstable_viewTransition:h});return r.createElement("a",ZP({},p,{href:n||g,onClick:m||s?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:t,target:c}))}));var pR,fR;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(pR||(pR={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(fR||(fR={}));function mR(e){const t=Vl((()=>Ud(e))),{isStatic:n}=(0,r.useContext)(lo);if(n){const[,n]=(0,r.useState)(e);(0,r.useEffect)((()=>t.on("change",n)),[])}return t}function gR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isStatic:n}=(0,r.useContext)(lo),i=(0,r.useRef)(null),a=mR(Xo(e)?e.get():e),s=()=>{i.current&&i.current.stop()};return(0,r.useInsertionEffect)((()=>a.attach(((e,r)=>{if(n)return r(e);const o=i.current;return o&&0===o.time&&o.sample(tc.delta),s(),i.current=hd((0,c.A)((0,c.A)({keyframes:[a.get(),e],velocity:a.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01},t),{},{onUpdate:r})),a.get()}),s)),[JSON.stringify(t)]),po((()=>{if(Xo(e))return e.on("change",(e=>a.set(parseFloat(e))))}),[a]),a}function vR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=e.length;return function(e,t){const n=mR(t()),r=()=>n.set(t());return r(),po((()=>{const t=()=>$l.update(r,!1,!0),n=e.map((e=>e.on("change",t)));return()=>{n.forEach((e=>e())),ec(r)}})),n}(n.filter(Xo),(function(){let t="";for(let r=0;r<i;r++){t+=e[r];const i=n[r];i&&(t+=Xo(i)?i.get():i)}return t}))}var yR;function xR(e){let{children:t,height:n="82vh",radius:r=260}=e;const i=mR(0),a=mR(0),s=gR(i,{stiffness:200,damping:28,mass:.2}),o=gR(a,{stiffness:200,damping:28,mass:.2}),c=l(!1,!0),u=vR(yR||(yR=(0,E_.A)(["radial-gradient(","px ","px at ","px ","px, "," 0%, rgba(0,0,0,0) 65%)"])),r,r,s,o,c?"rgba(124, 58, 237, 0.45)":"rgba(99, 102, 241, 0.35)"),d=e=>{var t,n,r,s;const o=e.currentTarget.getBoundingClientRect(),l=null!==(t=e.clientX)&&void 0!==t?t:e.touches&&(null===(n=e.touches[0])||void 0===n?void 0:n.clientX),c=null!==(r=e.clientY)&&void 0!==r?r:e.touches&&(null===(s=e.touches[0])||void 0===s?void 0:s.clientY);null!=l&&null!=c&&(i.set(l-o.left),a.set(c-o.top))};return(0,ur.jsxs)(pr,{position:"relative",overflow:"hidden",onMouseMove:d,onTouchMove:d,h:n,w:"full",children:[(0,ur.jsx)(pr,{position:"absolute",inset:0,bgGradient:c?"radial( at 20% 20%, rgba(124,58,237,0.22), rgba(0,0,0,0) 60% ), radial( at 80% 40%, rgba(6,182,212,0.18), rgba(0,0,0,0) 60% )":"radial( at 20% 20%, rgba(99,102,241,0.18), rgba(255,255,255,0) 60% ), radial( at 80% 40%, rgba(34,197,94,0.14), rgba(255,255,255,0) 60% )",filter:"blur(42px)",opacity:.75,zIndex:0,pointerEvents:"none"}),(0,ur.jsx)(Gf.div,{style:{position:"absolute",inset:0,background:u,filter:"blur(70px)",mixBlendMode:"screen",pointerEvents:"none",zIndex:1}}),(0,ur.jsx)(pr,{position:"relative",zIndex:2,children:t}),(0,ur.jsx)(pr,{position:"absolute",inset:0,bgGradient:c?"radial( circle at 50% 40%, rgba(255,255,255,0.05), rgba(0,0,0,0) 45% )":"radial( circle at 50% 40%, rgba(0,0,0,0.05), rgba(255,255,255,0) 45% )",pointerEvents:"none",zIndex:1})]})}function bR(e){return hx({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function wR(e){return hx({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function SR(e){return hx({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(e)}var _R=cr((function(e,t){const n=function(e){const{focusedIndex:t,orientation:n,direction:i}=qw(),a=Hw(),s=(0,r.useCallback)((e=>{const r=()=>{var e;const n=a.nextEnabled(t);n&&(null==(e=n.node)||e.focus())},s=()=>{var e;const n=a.prevEnabled(t);n&&(null==(e=n.node)||e.focus())},o="horizontal"===n,l="vertical"===n,c=e.key,u={["ltr"===i?"ArrowLeft":"ArrowRight"]:()=>o&&s(),["ltr"===i?"ArrowRight":"ArrowLeft"]:()=>o&&r(),ArrowDown:()=>l&&r(),ArrowUp:()=>l&&s(),Home:()=>{var e;const t=a.firstEnabled();t&&(null==(e=t.node)||e.focus())},End:()=>{var e;const t=a.lastEnabled();t&&(null==(e=t.node)||e.focus())}},d=u[c];d&&(e.preventDefault(),d(e))}),[a,t,n,i]);return(0,c.A)((0,c.A)({},e),{},{role:"tablist","aria-orientation":n,onKeyDown:E(e.onKeyDown,s)})}((0,c.A)((0,c.A)({},e),{},{ref:t})),i=tS(),a=(0,c.A)({display:"flex"},i.tablist);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},n),{},{className:x("chakra-tabs__tablist",e.className),__css:a}))}));_R.displayName="TabList";var AR=cr((function(e,t){const n=tS(),r=function(e){const{isDisabled:t=!1,isFocusable:n=!1}=e,r=y(e,Nw),{setSelectedIndex:i,isManual:a,id:s,setFocusedIndex:o,selectedIndex:l}=qw(),{index:u,register:d}=Vw({disabled:t&&!n}),h=u===l,p=yi((0,c.A)((0,c.A)({},r),{},{ref:Lr(d,e.ref),isDisabled:t,isFocusable:n,onClick:E(e.onClick,(()=>{i(u)}))}));return(0,c.A)((0,c.A)({},p),{},{id:Yw(s,u),role:"tab",tabIndex:h?0:-1,type:"button","aria-selected":h,"aria-controls":Kw(s,u),onFocus:t?void 0:E(e.onFocus,(()=>{o(u),!a&&(!t||!n)&&i(u)}))})}((0,c.A)((0,c.A)({},e),{},{ref:t})),i=(0,c.A)({outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},n.tab);return(0,ur.jsx)(lr.button,(0,c.A)((0,c.A)({},r),{},{className:x("chakra-tabs__tab",e.className),__css:i}))}));AR.displayName="Tab";var[ER,CR]=gr({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"});const MR=["name","getInitials"];function TR(e){var t;const n=e.split(" "),r=null!=(t=n[0])?t:"",i=n.length>1?n[n.length-1]:"";return r&&i?"".concat(r.charAt(0)).concat(i.charAt(0)):r.charAt(0)}function kR(e){const{name:t,getInitials:n}=e,r=y(e,MR),i=CR();return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({role:"img","aria-label":t},r),{},{__css:i.label,children:t?null==n?void 0:n(t):null}))}kR.displayName="AvatarName";var PR=e=>(0,ur.jsxs)(lr.svg,(0,c.A)((0,c.A)({viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg"},e),{},{children:[(0,ur.jsx)("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),(0,ur.jsx)("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]}));function RR(e){const{src:t,srcSet:n,onError:i,onLoad:a,getInitials:s,name:o,borderRadius:l,loading:c,iconLabel:u,icon:d=(0,ur.jsx)(PR,{}),ignoreFallback:h,referrerPolicy:p,crossOrigin:f}=e,m=Cx({src:t,onError:i,crossOrigin:f,ignoreFallback:h});return!t||!("loaded"===m)?o?(0,ur.jsx)(kR,{className:"chakra-avatar__initials",getInitials:s,name:o}):(0,r.cloneElement)(d,{role:"img","aria-label":u}):(0,ur.jsx)(lr.img,{src:t,srcSet:n,alt:o,onLoad:a,referrerPolicy:p,crossOrigin:null!=f?f:void 0,className:"chakra-avatar__img",loading:c,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:l}})}RR.displayName="AvatarImage";const DR=["src","srcSet","name","showBorder","borderRadius","onError","onLoad","getInitials","icon","iconLabel","loading","children","borderColor","ignoreFallback","crossOrigin","referrerPolicy"];var IR={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},BR=cr(((e,t)=>{const n=Rr("Avatar",e),[i,a]=(0,r.useState)(!1),s=ft(e),{src:o,srcSet:l,name:u,showBorder:d,borderRadius:h="full",onError:p,onLoad:f,getInitials:m=TR,icon:g=(0,ur.jsx)(PR,{}),iconLabel:v=" avatar",loading:b,children:w,borderColor:S,ignoreFallback:A,crossOrigin:C,referrerPolicy:M}=s,T=y(s,DR),k=(0,c.A)((0,c.A)({borderRadius:h,borderWidth:d?"2px":void 0},IR),n.container);return S&&(k.borderColor=S),(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({ref:t},T),{},{className:x("chakra-avatar",e.className),"data-loaded":_(i),__css:k,children:(0,ur.jsxs)(ER,{value:n,children:[(0,ur.jsx)(RR,{src:o,srcSet:l,loading:b,onLoad:E(f,(()=>{a(!0)})),onError:p,getInitials:m,name:u,borderRadius:h,icon:g,iconLabel:v,ignoreFallback:A,crossOrigin:C,referrerPolicy:M}),w]})}))}));BR.displayName="Avatar";const jR=["className"];var FR=cr((function(e,t){const n=Pr("Heading",e),r=ft(e),{className:i}=r,a=y(r,jR);return(0,ur.jsx)(lr.h2,(0,c.A)((0,c.A)({ref:t,className:x("chakra-heading",e.className)},a),{},{__css:n}))}));FR.displayName="Heading";var LR,[OR,NR]=z_({name:"".concat(LR="Card","StylesContext"),errorMessage:'useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<'.concat(LR,' />" ')});const zR=["className","children","direction","justify","align"];var UR=cr((function(e,t){const n=ft(e),{className:r,children:i,direction:a="column",justify:s,align:o}=n,l=y(n,zR),u=Rr("Card",e);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t,className:x("chakra-card",r),__css:(0,c.A)({display:"flex",flexDirection:a,justifyContent:s,alignItems:o,position:"relative",minWidth:0,wordWrap:"break-word"},u.container)},l),{},{children:(0,ur.jsx)(OR,{value:u,children:i})}))}));const HR=["className"];var GR=cr((function(e,t){const{className:n}=e,r=y(e,HR),i=NR();return(0,ur.jsx)(lr.div,(0,c.A)({ref:t,className:x("chakra-card__body",n),__css:i.body},r))})),VR={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}};function WR(e){return["html","body","#document"].includes(e.localName)?e.ownerDocument.body:Ri(e)&&function(e){const t=e.ownerDocument.defaultView||window,{overflow:n,overflowX:r,overflowY:i}=t.getComputedStyle(e);return/auto|scroll|overlay|hidden/.test(n+i+r)}(e)?e:WR(function(e){return"html"===e.localName?e:e.assignedSlot||e.parentElement||e.ownerDocument.documentElement}(e))}const qR=["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnScroll","closeOnPointerDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"];var XR=e=>{var t;return(null==(t=e.current)?void 0:t.ownerDocument)||document},JR=e=>{var t,n;return(null==(n=null==(t=e.current)?void 0:t.ownerDocument)?void 0:n.defaultView)||window};function YR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{openDelay:t=0,closeDelay:n=0,closeOnClick:i=!0,closeOnMouseDown:a,closeOnScroll:s,closeOnPointerDown:o=a,closeOnEsc:l=!0,onOpen:u,onClose:d,placement:h,id:p,isOpen:f,defaultIsOpen:m,arrowSize:g=10,arrowShadowColor:v,arrowPadding:x,modifiers:b,isDisabled:w,gutter:S,offset:_,direction:A}=e,C=y(e,qR),{isOpen:M,onOpen:T,onClose:k}=Es({isOpen:f,defaultIsOpen:m,onOpen:u,onClose:d}),{referenceRef:P,getPopperProps:R,getArrowInnerProps:D,getArrowProps:I}=Ss({enabled:M,placement:h,arrowPadding:x,modifiers:b,gutter:S,offset:_,direction:A}),B=(0,r.useId)(),j="tooltip-".concat(null!=p?p:B),F=(0,r.useRef)(null),L=(0,r.useRef)(),O=(0,r.useCallback)((()=>{L.current&&(clearTimeout(L.current),L.current=void 0)}),[]),N=(0,r.useRef)(),z=(0,r.useCallback)((()=>{N.current&&(clearTimeout(N.current),N.current=void 0)}),[]),U=(0,r.useCallback)((()=>{z(),k()}),[k,z]),H=function(e,t){return(0,r.useEffect)((()=>{const n=XR(e);return n.addEventListener(KR,t),()=>n.removeEventListener(KR,t)}),[t,e]),()=>{const t=XR(e),n=JR(e);t.dispatchEvent(new n.CustomEvent(KR))}}(F,U),G=(0,r.useCallback)((()=>{if(!w&&!L.current){M&&H();const e=JR(F);L.current=e.setTimeout(T,t)}}),[H,w,M,T,t]),V=(0,r.useCallback)((()=>{O();const e=JR(F);N.current=e.setTimeout(U,n)}),[n,U,O]),W=(0,r.useCallback)((()=>{M&&i&&V()}),[i,V,M]),q=(0,r.useCallback)((()=>{M&&o&&V()}),[o,V,M]),X=(0,r.useCallback)((e=>{M&&"Escape"===e.key&&V()}),[M,V]);Ts((()=>XR(F)),"keydown",l?X:void 0),Ts((()=>{if(!s)return null;const e=F.current;if(!e)return null;const t=WR(e);return"body"===t.localName?JR(F):t}),"scroll",(()=>{M&&s&&U()}),{passive:!0,capture:!0}),(0,r.useEffect)((()=>{w&&(O(),M&&k())}),[w,M,k,O]),(0,r.useEffect)((()=>()=>{O(),z()}),[O,z]),Ts((()=>F.current),"pointerleave",V);const J=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:Lr(F,t,P),onPointerEnter:E(e.onPointerEnter,(e=>{"touch"!==e.pointerType&&G()})),onClick:E(e.onClick,W),onPointerDown:E(e.onPointerDown,q),onFocus:E(e.onFocus,G),onBlur:E(e.onBlur,V),"aria-describedby":M?j:void 0})}),[G,V,q,M,j,W,P]),Y=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return R((0,c.A)((0,c.A)({},e),{},{style:(0,c.A)((0,c.A)({},e.style),{},{[zi.arrowSize.var]:g?"".concat(g,"px"):void 0,[zi.arrowShadowColor.var]:v})}),t)}),[R,g,v]),K=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=(0,c.A)((0,c.A)({},e.style),{},{position:"relative",transformOrigin:zi.transformOrigin.varRef});return(0,c.A)((0,c.A)((0,c.A)({ref:t},C),e),{},{id:j,role:"tooltip",style:n})}),[C,j]);return{isOpen:M,show:G,hide:V,getTriggerProps:J,getTooltipProps:K,getTooltipPositionerProps:Y,getArrowProps:I,getArrowInnerProps:D}}var KR="chakra-ui:close-tooltip";const ZR=["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor","motionProps"];var QR=lr(Gf.div),$R=cr(((e,t)=>{var n,i;const a=Pr("Tooltip",e),s=ft(e),o=Ar(),{children:l,label:u,shouldWrapChildren:d,"aria-label":h,hasArrow:p,bg:f,portalProps:m,background:g,backgroundColor:v,bgColor:x,motionProps:b}=s,w=y(s,ZR),S=null!=(i=null!=(n=null!=g?g:v)?n:f)?i:x;if(S){a.bg=S;const e=function(e,t,n){var r,i,a;return null!=(a=null==(i=null==(r=e.__cssMap)?void 0:r["".concat(t,".").concat(n)])?void 0:i.varRef)?a:n}(o,"colors",S);a[zi.arrowBg.var]=e}const _=YR((0,c.A)((0,c.A)({},w),{},{direction:o.direction}));let A;if("string"===typeof l||d)A=(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({display:"inline-block",tabIndex:0},_.getTriggerProps()),{},{children:l}));else{const e=r.Children.only(l);A=(0,r.cloneElement)(e,_.getTriggerProps(e.props,e.ref))}const E=!!h,C=_.getTooltipProps({},t),M=E?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}(C,["role","id"]):C,T=function(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}(C,["role","id"]);return u?(0,ur.jsxs)(ur.Fragment,{children:[A,(0,ur.jsx)(Bm,{children:_.isOpen&&(0,ur.jsx)(Mm,(0,c.A)((0,c.A)({},m),{},{children:(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},_.getTooltipPositionerProps()),{},{__css:{zIndex:a.zIndex,pointerEvents:"none"},children:(0,ur.jsxs)(QR,(0,c.A)((0,c.A)((0,c.A)({variants:VR,initial:"exit",animate:"enter",exit:"exit"},b),M),{},{__css:a,children:[u,E&&(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({srOnly:!0},T),{},{children:h})),p&&(0,ur.jsx)(lr.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:(0,ur.jsx)(lr.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:a.bg}})})]}))}))}))})]}):(0,ur.jsx)(ur.Fragment,{children:l})}));$R.displayName="Tooltip";const eD=["children","className"];var[tD,nD]=gr({name:"InputGroupStylesContext",errorMessage:"useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<InputGroup />\" "}),rD=cr((function(e,t){const n=Rr("Input",e),i=ft(e),{children:a,className:s}=i,o=y(i,eD),l=x("chakra-input__group",s),u={},d=no(a),h=n.field;d.forEach((e=>{var t,r;n&&(h&&"InputLeftElement"===e.type.id&&(u.paddingStart=null!=(t=h.height)?t:h.h),h&&"InputRightElement"===e.type.id&&(u.paddingEnd=null!=(r=h.height)?r:h.h),"InputRightAddon"===e.type.id&&(u.borderEndRadius=0),"InputLeftAddon"===e.type.id&&(u.borderStartRadius=0))}));const p=d.map((t=>{var n,i;const a=qr({size:(null==(n=t.props)?void 0:n.size)||e.size,variant:(null==(i=t.props)?void 0:i.variant)||e.variant});return"Input"!==t.type.id?(0,r.cloneElement)(t,a):(0,r.cloneElement)(t,Object.assign(a,u,t.props))}));return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({className:l,ref:t,__css:(0,c.A)({width:"100%",display:"flex",position:"relative",isolation:"isolate"},n.group),"data-group":!0},o),{},{children:(0,ur.jsx)(tD,{value:n,children:p})}))}));rD.displayName="InputGroup";const iD=["placement"],aD=["className"],sD=["className"];var oD=lr("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),lD=cr((function(e,t){var n,r;const{placement:i="left"}=e,a=y(e,iD),s=nD(),o=s.field,l="left"===i?"insetStart":"insetEnd",u=(0,c.A)({[l]:"0",width:null!=(n=null==o?void 0:o.height)?n:null==o?void 0:o.h,height:null!=(r=null==o?void 0:o.height)?r:null==o?void 0:o.h,fontSize:null==o?void 0:o.fontSize},s.element);return(0,ur.jsx)(oD,(0,c.A)({ref:t,__css:u},a))}));lD.id="InputElement",lD.displayName="InputElement";var cD=cr((function(e,t){const{className:n}=e,r=y(e,aD),i=x("chakra-input__left-element",n);return(0,ur.jsx)(lD,(0,c.A)({ref:t,placement:"left",className:i},r))}));cD.id="InputLeftElement",cD.displayName="InputLeftElement";var uD=cr((function(e,t){const{className:n}=e,r=y(e,sD),i=x("chakra-input__right-element",n);return(0,ur.jsx)(lD,(0,c.A)({ref:t,placement:"right",className:i},r))}));uD.id="InputRightElement",uD.displayName="InputRightElement";var dD=Sx({d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",displayName:"ArrowBackIcon"});const hD=lr((function(e){return hx({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)})),pD=e=>{const t=(0,r.useContext)(GS),{hostName:n,socket:i,setUser:a,setIsAuthenticated:s,fetchData:o}=t,l=m_(),c=vw(),[u,d]=(0,r.useState)(),[h,p]=(0,r.useState)(),f=e.handleTabsChange,[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),w=(e,t,n)=>{l({title:e,description:t,status:n,duration:5e3,isClosable:!0})};return(0,ur.jsxs)(Wr,{flexDirection:"column",width:"100wh",height:"70vh",justifyContent:"center",alignItems:"center",borderRadius:15,children:[(0,ur.jsxs)(io,{flexDir:"column",mb:"2",justifyContent:"center",alignItems:"center",children:[(0,ur.jsx)(BR,{bg:"purple.300"}),(0,ur.jsx)(FR,{color:"pruple.400",children:"Welcome Back"}),(0,ur.jsx)(UR,{minW:{base:"90%",md:"468px"},borderRadius:15,shadow:0,children:(0,ur.jsx)(GR,{p:0,children:(0,ur.jsx)("form",{children:(0,ur.jsxs)(io,{spacing:4,children:[v&&(0,ur.jsx)($R,{label:"login","aria-label":"A tooltip",children:(0,ur.jsx)(zr,{w:"fit-content",onClick:()=>y(!1),children:(0,ur.jsx)(dD,{})})}),(0,ur.jsxs)(ri,{display:"flex",children:[(0,ur.jsx)(rD,{borderEndRadius:"10px",borderStartRadius:"10px",size:"lg",children:(0,ur.jsx)($y,{id:"login-email",type:"email",placeholder:"email address",focusBorderColor:"purple.500",onChange:e=>d(e.target.value)})}),v&&(0,ur.jsx)(zr,{m:1,fontSize:"sm",onClick:e=>(async e=>{e.preventDefault(),b(!0);const t={email:u};try{const e=await fetch("".concat(n,"/auth/getotp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await e.json();b(!1),200!==e.status?w("An error occurred.",r.error,"error"):w("otp sent","otp sent to your email","success")}catch(r){console.log(r)}})(e),children:x?(0,ur.jsx)(Br,{size:"sm"}):"Send otp"})]}),!v&&(0,ur.jsxs)(ri,{children:[(0,ur.jsxs)(rD,{borderEndRadius:"10px",borderStartRadius:"10px",size:"lg",children:[(0,ur.jsx)(cD,{pointerEvents:"none",color:"gray.300",children:(0,ur.jsx)(hD,{color:"gray.300"})}),(0,ur.jsx)($y,{type:m?"text":"password",placeholder:"Password",focusBorderColor:"purple.500",onChange:e=>p(e.target.value)}),(0,ur.jsx)(uD,{mx:1,children:(0,ur.jsx)(zr,{fontSize:"x-small",size:"xs",onClick:()=>g(!m),children:m?"Hide":"Show"})})]}),(0,ur.jsx)(ii,{textAlign:"right",children:(0,ur.jsx)(Gr,{onClick:()=>y(!0),children:"forgot password?"})})]}),v&&(0,ur.jsx)(ri,{children:(0,ur.jsx)(rD,{borderEndRadius:"10px",borderStartRadius:"10px",size:"lg",children:(0,ur.jsx)($y,{id:"otp",type:"number",placeholder:"enter otp",focusBorderColor:"purple.500"})})}),(0,ur.jsx)(zr,{borderRadius:10,type:"submit",variant:"solid",colorScheme:"purple",width:"full",onClick:async function(e){var t;e.preventDefault();const r={email:u},l=null===(t=document.getElementById("otp"))||void 0===t?void 0:t.value;(null===l||void 0===l?void 0:l.length)>0&&v?r.otp=l:r.password=h;try{const e=await fetch("".concat(n,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json();200!==e.status?w("An error occurred.",t.error,"error"):(w("Login successful","You are now logged in","success"),localStorage.setItem("token",t.authtoken),a(await t.user),i.emit("setup",await t.user._id),s(!0),o(),c("/dashboard"))}catch(d){console.log(d)}},children:v?"Login using otp":"Login"})]})})})})]}),(0,ur.jsxs)(pr,{children:["New to us?"," ",(0,ur.jsx)(Gr,{color:"purple.500",onClick:()=>f(1),children:"Sign Up"})]})]})};var fD=Sx({d:"M19.5,9.5h-.75V6.75a6.75,6.75,0,0,0-13.5,0V9.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5ZM7.75,6.75a4.25,4.25,0,0,1,8.5,0V9a.5.5,0,0,1-.5.5H8.25a.5.5,0,0,1-.5-.5Z",displayName:"LockIcon"});const mD=e=>{const t=(0,r.useContext)(GS),{hostName:n}=t,i=m_(),[a,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),m=e.handleTabsChange;function g(e){i({title:"An error occurred.",description:e,status:"error",duration:5e3,isClosable:!0})}const v=()=>s(!a);return(0,ur.jsxs)(Wr,{flexDirection:"column",width:"100%",height:"70vh",justifyContent:"center",alignItems:"center",borderRadius:15,children:[(0,ur.jsxs)(io,{flexDir:"column",mb:"2",justifyContent:"center",alignItems:"center",children:[(0,ur.jsx)(BR,{bg:"purple.300"}),(0,ur.jsx)(FR,{color:"pruple.400",children:"Welcome"}),(0,ur.jsx)(UR,{minW:{base:"90%",md:"468px"},borderRadius:15,shadow:0,children:(0,ur.jsx)(GR,{p:0,children:(0,ur.jsx)("form",{children:(0,ur.jsxs)(io,{spacing:4,children:[(0,ur.jsx)(ri,{children:(0,ur.jsx)(rD,{borderEndRadius:"10px",borderStartRadius:"10px",size:"lg",children:(0,ur.jsx)($y,{type:"text",placeholder:"Enter your name",focusBorderColor:"purple.500",onChange:e=>l(e.target.value),required:!0})})}),(0,ur.jsx)(ri,{children:(0,ur.jsx)(rD,{borderEndRadius:"10px",borderStartRadius:"10px",size:"lg",children:(0,ur.jsx)($y,{type:"email",placeholder:"Email address",focusBorderColor:"purple.500",onChange:e=>u(e.target.value)})})}),(0,ur.jsxs)(ri,{children:[(0,ur.jsxs)(rD,{borderEndRadius:"10px",borderStartRadius:"10px",size:"lg",children:[(0,ur.jsx)(cD,{pointerEvents:"none",color:"gray.300",children:(0,ur.jsx)(fD,{color:"gray.300"})}),(0,ur.jsx)($y,{type:a?"text":"password",placeholder:"Password",focusBorderColor:"purple.500",onChange:e=>h(e.target.value)}),(0,ur.jsx)(uD,{mx:1,children:(0,ur.jsx)(zr,{fontSize:"x-small",size:"xs",onClick:v,children:a?"Hide":"Show"})})]}),(0,ur.jsxs)(rD,{borderEndRadius:"10px",borderStartRadius:"10px",size:"lg",my:4,children:[(0,ur.jsx)(cD,{pointerEvents:"none",color:"gray.300",children:(0,ur.jsx)(fD,{color:"gray.300"})}),(0,ur.jsx)($y,{textOverflow:"ellipsis",type:a?"text":"password",placeholder:"Confirm Password",focusBorderColor:"purple.500",onChange:e=>f(e.target.value)}),(0,ur.jsx)(uD,{mx:1,children:(0,ur.jsx)(zr,{fontSize:"x-small",size:"xs",onClick:v,children:a?"Hide":"Show"})})]})]}),(0,ur.jsx)(zr,{borderRadius:10,type:"submit",variant:"solid",colorScheme:"purple",width:"full",onClick:async e=>{if(e.preventDefault(),""!==c&&""!==o&&""!==d)if(o.length>20||o.length<3)g("Name should be atlest 3 and atmost 20 characters long");else if(c.includes("@")&&c.includes("."))if(c.length>50)g("Email should be atmost 50 characters long");else if(d.length<8||d.length>20)g("Invalid Password");else if(d===p){const e={email:c,name:o,password:d};i.promise(fetch("".concat(n,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(200!==e.status)throw e.json().then((e=>{})),new Error("Failed to fetch data");e.json().then((e=>{localStorage.setItem("token",e.authtoken),m(0)}))})).catch((e=>{})),{loading:{title:"Creating account...",description:"please wait"},success:{title:"Account created.",description:"We have created your account for you."},error:{title:"An error occurred.",description:"We were unable to create your account."}})}else g("Passwords do not match");else g("Invalid email");else g("All fields are required")},children:"Signup"})]})})})})]}),(0,ur.jsxs)(pr,{children:["Already have account?"," ",(0,ur.jsx)(Gr,{color:"purple.500",onClick:()=>m(0),children:"login"})]})]})},gD=e=>{const[t,n]=r.useState(e.tabindex),i=e=>{n(e)};return(0,ur.jsxs)(nS,{isFitted:!0,variant:"enclosed",index:t,colorScheme:"purple",children:[(0,ur.jsxs)(_R,{mb:"2em",children:[(0,ur.jsx)(AR,{onClick:()=>i(0),children:"Login"}),(0,ur.jsx)(AR,{onClick:()=>i(1),children:"Sign Up"})]}),(0,ur.jsxs)(rS,{children:[(0,ur.jsx)(iS,{p:0,children:(0,ur.jsx)(pD,{handleTabsChange:i})}),(0,ur.jsx)(iS,{children:(0,ur.jsx)(mD,{handleTabsChange:i})})]})]})},vD=()=>{const e=(0,r.useContext)(GS),{isAuthenticated:t}=e,{isOpen:n,onOpen:i,onClose:a}=g(),[s,o]=(0,r.useState)(),c=vw();(0,r.useEffect)((()=>{t&&c("/dashboard")}));const u=l("brand.500","brand.400"),d=l("gray.600","gray.300");return(0,ur.jsxs)(pr,{h:"max-content",verticalAlign:"middle",children:[(0,ur.jsx)(xR,{height:"82vh",children:(0,ur.jsx)(Wr,{direction:"column",align:"center",justify:"center",minH:"82vh",px:{base:4,md:8},children:(0,ur.jsxs)(ex,{spacing:6,textAlign:"center",maxW:"5xl",children:[(0,ur.jsx)(pr,{as:Gf.h1,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,ur.jsx)(Jr,{fontSize:{base:"5xl",md:"7xl"},fontWeight:"extrabold",lineHeight:"1.1",bgGradient:"linear(to-r, brand.400, cyan.300)",bgClip:"text",children:"Allify"})}),(0,ur.jsx)(Jr,{color:d,fontSize:{base:"lg",md:"2xl"},children:"Where chatting, fun, and friends come alive"}),(0,ur.jsxs)(ao,{spacing:4,as:Gf.div,initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,ur.jsx)(b_,{size:"lg",variant:"outline",onClick:()=>{o(0),i()},children:"Login"}),(0,ur.jsx)(b_,{size:"lg",onClick:()=>{o(1),i()},children:"Get started free"})]}),(0,ur.jsxs)(ao,{spacing:{base:3,md:6},pt:4,color:d,wrap:"wrap",justify:"center",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Vy,{as:SR,color:u}),(0,ur.jsx)(Jr,{children:"Realtime messaging"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Vy,{as:wR,color:u}),(0,ur.jsx)(Jr,{children:"Voice notes support"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Vy,{as:bR,color:u}),(0,ur.jsx)(Jr,{children:"JWT-secured"})]})]})]})})}),(0,ur.jsxs)(pr,{fontSize:"sm",position:"fixed",bottom:2,left:"calc(50% - 155px)",mt:4,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",children:[(0,ur.jsx)(Jr,{as:"span",children:"\xa9 2025 Allify. All rights reserved."}),(0,ur.jsx)(hR,{to:"https://github.com/Sarthak-Developer-Coder",target:"_blank",children:(0,ur.jsx)(Jr,{as:"u",color:"purple.500",ml:1,display:"inline",children:"Sarthak Nag"})})]}),(0,ur.jsxs)(Nm,{isOpen:n,onClose:a,size:{base:"md",md:"xl"},children:[(0,ur.jsx)(Km,{backdropFilter:"blur(6px)"}),(0,ur.jsxs)(Ny,{w:{base:"95vw"},bgGradient:"linear(to-b, blackAlpha.800, blackAlpha.700)",backdropFilter:"blur(10px)",borderWidth:"1px",borderColor:"whiteAlpha.200",children:[(0,ur.jsx)(Uy,{pt:6}),(0,ur.jsx)(Zy,{pb:8,children:(0,ur.jsx)(gD,{tabindex:s})}),(0,ur.jsx)(Yy,{})]})]})]})},yD=["borderLeftWidth","borderBottomWidth","borderTopWidth","borderRightWidth","borderWidth","borderStyle","borderColor"],xD=["className","orientation","__css"];var bD=cr((function(e,t){const n=Pr("Divider",e),{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:a,borderRightWidth:s,borderWidth:o,borderStyle:l,borderColor:u}=n,d=y(n,yD),h=ft(e),{className:p,orientation:f="horizontal",__css:m}=h,g=y(h,xD),v={vertical:{borderLeftWidth:r||s||o||"1px",height:"100%"},horizontal:{borderBottomWidth:i||a||o||"1px",width:"100%"}};return(0,ur.jsx)(lr.hr,(0,c.A)((0,c.A)({ref:t,"aria-orientation":f},g),{},{__css:(0,c.A)((0,c.A)((0,c.A)({},d),{},{border:"0",borderColor:u,borderStyle:l},v[f]),m),className:x("chakra-divider",p)}))}));bD.displayName="Divider";const wD=["startColor","endColor","isLoaded","fadeDuration","speed","className","fitContent"];var SD=lr("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),_D=Me("skeleton-start-color"),AD=Me("skeleton-end-color"),ED=_r({from:{opacity:0},to:{opacity:1}}),CD=_r({from:{borderColor:_D.reference,background:_D.reference},to:{borderColor:AD.reference,background:AD.reference}}),MD=cr(((e,t)=>{const n=(0,c.A)((0,c.A)({},e),{},{fadeDuration:"number"===typeof e.fadeDuration?e.fadeDuration:.4,speed:"number"===typeof e.speed?e.speed:.8}),i=Pr("Skeleton",n),a=function(){const e=(0,r.useRef)(!0);return(0,r.useEffect)((()=>{e.current=!1}),[]),e.current}(),s=ft(n),{startColor:o="",endColor:l="",isLoaded:u,fadeDuration:d,speed:h,className:p,fitContent:f}=s,m=y(s,wD),[g,v]=function(e,t,n){const r=Ar();return Cr(e,t,n)(r)}("colors",[o,l]),b=function(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}(u),w=x("chakra-skeleton",p),S=(0,c.A)((0,c.A)({},g&&{[_D.variable]:g}),v&&{[AD.variable]:v});if(u){const e=a||b?"none":"".concat(ED," ").concat(d,"s");return(0,ur.jsx)(lr.div,(0,c.A)({ref:t,className:w,__css:{animation:e}},m))}return(0,ur.jsx)(SD,(0,c.A)((0,c.A)({ref:t,className:w},m),{},{__css:(0,c.A)((0,c.A)((0,c.A)({width:f?"fit-content":void 0},i),S),{},{_dark:(0,c.A)((0,c.A)({},i._dark),S),animation:"".concat(h,"s linear infinite alternate ").concat(CD)})}))}));MD.displayName="Skeleton";const TD=["size"];var kD=e=>{let{size:t="2rem"}=e,n=y(e,TD);return(0,ur.jsx)(MD,(0,c.A)({borderRadius:"full",boxSize:t},n))};function PD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ssr:n=!0,fallback:i}=t,{getWindow:a}=function(){let{defer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[,t]=(0,r.useReducer)((e=>e+1),0);return vm((()=>{e&&t()}),[e]),(0,r.useContext)(tA)}(),s=Array.isArray(e)?e:[e];let o=Array.isArray(i)?i:[i];o=o.filter((e=>null!=e));const[l,u]=(0,r.useState)((()=>s.map(((e,t)=>({media:e,matches:n?!!o[t]:a().matchMedia(e).matches})))));return(0,r.useEffect)((()=>{const e=a();u(s.map((t=>({media:t,matches:e.matchMedia(t).matches}))));const t=s.map((t=>e.matchMedia(t))),n=e=>{u((t=>t.slice().map((t=>t.media===e.media?(0,c.A)((0,c.A)({},t),{},{matches:e.matches}):t))))};return t.forEach((e=>{"function"===typeof e.addListener?e.addListener(n):e.addEventListener("change",n)})),()=>{t.forEach((e=>{"function"===typeof e.removeListener?e.removeListener(n):e.removeEventListener("change",n)}))}}),[a]),l.map((e=>e.matches))}function RD(e,t){var n;const r=function(e){var t,n;const r=b(e)?e:{fallback:null!=e?e:"base"},i=Ar().__breakpoints.details.map((e=>{let{minMaxQuery:t,breakpoint:n}=e;return{breakpoint:n,query:t.replace("@media screen and ","")}})),a=i.map((e=>e.breakpoint===r.fallback)),s=PD(i.map((e=>e.query)),{fallback:a,ssr:r.ssr}).findIndex((e=>1==e));return null!=(n=null==(t=i[s])?void 0:t.breakpoint)?n:r.fallback}(b(t)?t:{fallback:null!=t?t:"base"}),i=Ar();if(!r)return;const a=Array.from((null==(n=i.__breakpoints)?void 0:n.keys)||[]),s=Array.isArray(e)?Object.fromEntries(Object.entries(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eo;const n={};return e.forEach(((e,r)=>{const i=t[r];null!=e&&(n[i]=e)})),n}(e,a)).map((e=>{let[t,n]=e;return[t,n]}))):e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eo,r=Object.keys(e).indexOf(t);if(-1!==r)return e[t];let i=n.indexOf(t);for(;i>=0;){const t=n[i];if(e.hasOwnProperty(t)){r=i;break}i-=1}if(-1!==r)return e[n[r]]}(s,r,a)}kD.displayName="SkeletonCircle";const DD=["noOfLines","spacing","skeletonHeight","className","startColor","endColor","isLoaded","fadeDuration","speed","variant","size","colorScheme","children"];var ID=3,BD=e=>{const{noOfLines:t=ID,spacing:n="0.5rem",skeletonHeight:r="0.5rem",className:i,startColor:a,endColor:s,isLoaded:o,fadeDuration:l,speed:u,variant:d,size:h,colorScheme:p,children:f}=e,m=y(e,DD),g=RD("number"===typeof t?[t]:t)||ID,v=Array(g).fill(1).map(((e,t)=>t+1));const b=e=>g>1&&e===v.length?"80%":"100%",w=x("chakra-skeleton__group",i);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({className:w},m),{},{children:v.map(((e,t)=>{if(o&&t>0)return null;const i=o?null:{mb:e===v.length?"0":n,width:b(e),height:r};return(0,ur.jsx)(MD,(0,c.A)((0,c.A)({startColor:a,endColor:s,isLoaded:o,fadeDuration:l,speed:u,variant:d,size:h,colorScheme:p},i),{},{children:0===t?f:void 0}),v.length.toString()+e)}))}))};BD.displayName="SkeletonText";var jD=Sx({d:"M23.414,20.591l-4.645-4.645a10.256,10.256,0,1,0-2.828,2.829l4.645,4.644a2.025,2.025,0,0,0,2.828,0A2,2,0,0,0,23.414,20.591ZM10.25,3.005A7.25,7.25,0,1,1,3,10.255,7.258,7.258,0,0,1,10.25,3.005Z",displayName:"Search2Icon"}),FD=Sx({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"});const LD=e=>{const t=e.sender,n=e.data,r=e.handleChatOpen;return(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsx)(Wr,{align:"center",justify:"space-between",px:3,py:1,borderRadius:"5px",bg:"purple.500",children:(0,ur.jsxs)(io,{w:"100%",spacing:2,children:[(0,ur.jsxs)(pr,{display:"flex",justifyContent:"space-between",fontSize:"x-small",mx:1,p:0,color:"white",children:[(0,ur.jsx)(Jr,{children:"new message"}),(0,ur.jsx)(Jr,{children:"now"})]}),(0,ur.jsxs)(pr,{m:0,display:"flex",justifyContent:"space-between",children:[(0,ur.jsxs)(pr,{display:"flex",mb:1,children:[(0,ur.jsx)(mr,{mx:2,children:(0,ur.jsx)(Tx,{src:t.profilePic,alt:"profile",style:{width:"40px",height:"40px",borderRadius:"50%"}})}),(0,ur.jsxs)(Jr,{color:"white",fontWeight:"bold",children:[t.name.length>13?t.name.substring(0,15)+"...":t.name,(0,ur.jsx)(Jr,{color:"white",fontSize:"sm",letterSpacing:0,fontWeight:"normal",children:n.text.length>15?" "+n.text.substring(0,15)+"...":n.text})]})]}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"whiteAlpha",color:"white",onClick:()=>r(n.conversationId,t),children:"Open"})]})]})})})},OD=__webpack_require__.p+"static/media/newmessage.a673b70c68f18f662b4c.wav",ND={"&::-webkit-scrollbar":{width:"5px",height:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"gray.300",borderRadius:"5px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"gray.400"},"&::-webkit-scrollbar-track":{display:"none"}},zD=e=>{var t=new Audio(OD);const n=m_(),i=(0,r.useContext)(GS),{hostName:a,user:s,socket:o,myChatList:l,originalChatList:c,activeChatId:u,setActiveChatId:d,setMyChatList:h,setIsChatLoading:p,setMessageList:f,setIsOtherUserTyping:m,setReceiver:v,isLoading:y,isOtherUserTyping:x}=i,{isOpen:b,onOpen:w,onClose:S}=g();(0,r.useEffect)((()=>(o.on("new-message-notification",(async e=>{var r=l;let i=r.findIndex((t=>t._id===e.conversationId));-1===i&&r.unshift(e.conversation),i=r.findIndex((t=>t._id===e.conversationId)),r[i].latestmessage=e.text,u!==e.conversationId&&(r[i].unreadCounts=r[i].unreadCounts.map((e=>(e.userId===s._id&&(e.count=e.count+1),e))),r[i].updatedAt=new Date);let a=r.splice(i,1)[0];r.unshift(a),h([...r]);let o=r.find((t=>t._id===e.conversationId)).members[0];u!==e.conversationId&&t.play().catch((e=>{console.log(e)})),u!==e.conversationId&&n({status:"success",duration:5e3,position:"top-right",render:()=>(0,ur.jsx)(LD,{sender:o,data:e,handleChatOpen:E})})})),()=>{o.off("new-message-notification")})));const[_,A]=(0,r.useState)(""),E=async(e,t)=>{try{p(!0),f([]),m(!1);document.getElementById("new-message")&&(document.getElementById("new-message").value="",document.getElementById("new-message").focus()),m(!1),await o.emit("stop-typing",{typer:s._id,conversationId:u}),await o.emit("leave-chat",u),o.emit("join-chat",{roomId:e,userId:s._id}),d(e);const n=await fetch("".concat(a,"/message/").concat(e,"/").concat(s._id),{method:"GET",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")}});if(!n.ok)throw new Error("Failed to fetch data");const r=await n.json();f(r),v(t),p(!1);const i=l.map((t=>(t._id===e&&(t.unreadCounts=t.unreadCounts.map((e=>(e.userId===s._id&&(e.count=0),e)))),t)));h(i),setTimeout((()=>{var e;null===(e=document.getElementById("chat-box"))||void 0===e||e.scrollTo({top:document.getElementById("chat-box").scrollHeight})}),100)}catch(n){console.log(n)}};return y?(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsx)(pr,{margin:"auto",w:"max-content",mt:"30vh",children:(0,ur.jsx)(Br,{size:"xl"})})}):(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsxs)(pr,{display:"flex",justifyContent:"space-between",flexDir:"column",mt:1,h:"100%",children:[(0,ur.jsxs)(Wr,{zIndex:1,justify:"space-between",children:[(0,ur.jsx)(Jr,{mb:"10px",fontWeight:"bold",fontSize:"2xl",children:"Chats"}),(0,ur.jsxs)(Wr,{children:[(0,ur.jsxs)(rD,{w:{base:"fit-content",md:"fit-content"},mx:2,children:[(0,ur.jsx)(cD,{pointerEvents:"none",children:(0,ur.jsx)(jD,{color:"gray.300"})}),(0,ur.jsx)($y,{type:"text",placeholder:"search user",onChange:async e=>{if(""!==e.target.value){A(e.target.value.toLowerCase());const t=c.filter((e=>e.members[0].name.toLowerCase().includes(_)));h(t)}else h(i.originalChatList)},id:"search-input"})]}),(0,ur.jsx)(pr,{minW:"fit-content",display:{base:"block",md:"none"},children:(0,ur.jsx)(v_,{user:s,isOpen:b,onOpen:w,onClose:S})})]})]}),(0,ur.jsx)(bD,{my:1}),(0,ur.jsxs)(zr,{m:2,colorScheme:"purple",onClick:()=>e.setactiveTab(1),size:"xl",w:"100%",borderRadius:"full",children:["Add new Chat ",(0,ur.jsx)(FD,{ml:2,fontSize:"16px"})]}),(0,ur.jsx)(pr,{h:"100%",px:2,flex:1,overflowY:"auto",sx:ND,children:l.map((e=>{var t,n,r,i,a,o;return(0,ur.jsx)(Wr,{my:2,justify:"space-between",align:"center",w:"100%",overflow:"hidden",children:(0,ur.jsxs)(zr,{h:"4em",w:"100%",justifyContent:"space-between",onClick:()=>E(e._id,e.members[0]),colorScheme:e._id===u?"purple":"gray",children:[(0,ur.jsxs)(Wr,{children:[(0,ur.jsx)(pr,{children:(0,ur.jsx)("img",{src:e.members[0].profilePic||"https://via.placeholder.com/150",alt:"profile",style:{width:"40px",height:"40px",borderRadius:"50%"}})}),(0,ur.jsxs)(pr,{ml:3,w:"50%",textAlign:"left",children:[(0,ur.jsx)(Jr,{textOverflow:"hidden",fontSize:"lg",fontWeight:"bold",children:(null===(t=e.members[0].name)||void 0===t?void 0:t.length)>11?(null===(n=e.members[0].name)||void 0===n?void 0:n.substring(0,13))+"...":e.members[0].name}),x&&e._id===u?(0,ur.jsx)(Jr,{fontSize:"sm",color:"purple.100",children:"typing..."}):(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.400",children:(null===(r=e.latestmessage)||void 0===r?void 0:r.substring(0,15))+((null===(i=e.latestmessage)||void 0===i?void 0:i.length)>15?"...":"")})]})]}),(0,ur.jsxs)(io,{direction:"row",align:"center",children:[(0,ur.jsxs)(pr,{textAlign:"right",fontSize:"x-small",children:[new Date(e.updatedAt).toDateString()===(new Date).toDateString()?(0,ur.jsx)(Jr,{mb:1,fontSize:"x-small",children:"Today"}):new Date(e.updatedAt).toDateString()===new Date((new Date).setDate((new Date).getDate()-1)).toDateString()?(0,ur.jsx)(Jr,{mb:1,fontSize:"x-small",children:"Yesterday"}):(0,ur.jsx)(Jr,{mb:1,fontSize:"x-small",children:new Date(e.updatedAt).toLocaleDateString()}),new Date(e.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(null===(a=e.unreadCounts.find((e=>e.userId===s._id)))||void 0===a?void 0:a.count)>0&&(0,ur.jsx)(mr,{backgroundColor:"black",color:"white",p:1,borderRadius:40,size:"20px",children:(0,ur.jsxs)(Jr,{fontSize:12,p:1,borderRadius:50,children:["\xa0",null===(o=e.unreadCounts.find((e=>e.userId===s._id)))||void 0===o?void 0:o.count,"\xa0"]})})]})]})},e.members[0]._id)}))}),(0,ur.jsx)(g_,{isOpen:b,onClose:S,onOpen:w,user:s})]})})};var UD=Sx({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"});const HD=e=>{const[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(t),s=(0,r.useContext)(GS),{hostName:o,socket:l,user:c,myChatList:u,setMyChatList:d,setReceiver:h,setActiveChatId:p}=s,f=(0,r.useCallback)((async()=>{try{const e=await fetch("".concat(o,"/user/non-friends"),{method:"GET",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")}});if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();n(t),a(t)}catch(e){console.log(e)}}),[o]);(0,r.useEffect)((()=>{!async function(){await f()}()}),[u,f]);const m=async(t,n)=>{t.preventDefault();const r={members:[c._id,n]};try{const t=await fetch("".concat(o,"/conversation/"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(r)});if(!t.ok)throw new Error("Failed to fetch data");const i=await t.json();d([i,...u]),h(i.members[0]),p(i._id),e.setactiveTab(0),l.emit("join-chat",{roomId:i._id,userId:c._id}),a((e=>e.filter((e=>e._id!==n))))}catch(i){console.log(i)}};return(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(pr,{children:(0,ur.jsxs)(Wr,{justify:"space-between",children:[(0,ur.jsx)(zr,{onClick:()=>e.setactiveTab(0),children:(0,ur.jsx)(dD,{})}),(0,ur.jsx)(pr,{display:"flex",children:(0,ur.jsxs)(rD,{w:"fit-content",mx:2,children:[(0,ur.jsx)(cD,{pointerEvents:"none",children:(0,ur.jsx)(jD,{color:"gray.300"})}),(0,ur.jsx)($y,{type:"text",placeholder:"Enter Name",onChange:async e=>{if(""!==e.target.value){const n=t.filter((t=>t.name.toLowerCase().includes(e.target.value.toLowerCase())));a(n)}else a(t)},id:"search-input"})]})})]})}),(0,ur.jsx)(bD,{my:2}),(0,ur.jsxs)(pr,{h:{base:"63vh",md:"72vh"},overflowY:"scroll",sx:{"::-webkit-scrollbar":{width:"4px"},"::-webkit-scrollbar-track":{width:"6px"},"::-webkit-scrollbar-thumb":{background:{base:"gray.300",md:"gray.500"},borderRadius:"24px"}},children:[(0,ur.jsxs)(zr,{my:2,mx:2,colorScheme:"purple",children:["Create New Group ",(0,ur.jsx)(FD,{ml:2,fontSize:"12px"})]}),i.map((e=>e._id!==s.user._id&&(0,ur.jsx)(Wr,{p:2,children:(0,ur.jsxs)(zr,{h:"4em",w:"100%",justifyContent:"space-between",onClick:t=>m(t,e._id),children:[(0,ur.jsxs)(Wr,{children:[(0,ur.jsx)(pr,{children:(0,ur.jsx)("img",{src:e.profilePic,alt:"profile",style:{width:"40px",height:"40px",borderRadius:"50%"}})}),(0,ur.jsxs)(pr,{mx:3,textAlign:"start",children:[(0,ur.jsx)(Jr,{fontSize:"lg",fontWeight:"bold",children:e.name}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:e.phoneNum})]})]}),(0,ur.jsx)(UD,{})]})},e._id)))]})]})},GD=["spacing","children"];var VD=cr((function(e,t){const n=Rr("Switch",e),i=ft(e),{spacing:a="0.5rem",children:s}=i,o=y(i,GD),{getIndicatorProps:l,getInputProps:u,getCheckboxProps:d,getRootProps:h,getLabelProps:p}=kS(o),f=(0,r.useMemo)((()=>(0,c.A)({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0},n.container)),[n.container]),m=(0,r.useMemo)((()=>(0,c.A)({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer"},n.track)),[n.track]),g=(0,r.useMemo)((()=>(0,c.A)({userSelect:"none",marginStart:a},n.label)),[a,n.label]);return(0,ur.jsxs)(lr.label,(0,c.A)((0,c.A)({},h()),{},{className:x("chakra-switch",e.className),__css:f,children:[(0,ur.jsx)("input",(0,c.A)({className:"chakra-switch__input"},u({},t))),(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({},d()),{},{className:"chakra-switch__track",__css:m,children:(0,ur.jsx)(lr.span,(0,c.A)({__css:n.thumb,className:"chakra-switch__thumb"},l()))})),s&&(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({className:"chakra-switch__label"},p()),{},{__css:g,children:s}))]}))}));VD.displayName="Switch";const WD=()=>{var e;const{hostName:t}=(0,r.useContext)(GS),[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),o=g(),l=g(),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(t,"/social/stories"),{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json();i(n)}catch(e){}s(!1)})()}),[t]);return(0,ur.jsxs)(pr,{px:1,py:2,overflowX:"auto",whiteSpace:"nowrap",children:[(0,ur.jsxs)(ao,{spacing:3,children:[(0,ur.jsx)(zr,{size:"sm",onClick:o.onOpen,children:"+ Add Story"}),a?(0,ur.jsx)(Br,{size:"sm"}):n.map((e=>{var t,n,r;return(0,ur.jsxs)(pr,{textAlign:"center",children:[(0,ur.jsx)(BR,{src:null===(t=e.author)||void 0===t?void 0:t.profilePic,name:null===(n=e.author)||void 0===n?void 0:n.name,borderWidth:"2px",borderColor:"purple.400",cursor:"pointer",onClick:()=>{h(e),l.onOpen()}}),(0,ur.jsx)(Jr,{fontSize:"xs",mt:1,noOfLines:1,maxW:"60px",children:null===(r=e.author)||void 0===r?void 0:r.name})]},e._id)}))]}),(0,ur.jsxs)(Nm,{isOpen:o.isOpen,onClose:o.onClose,isCentered:!0,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"Create Story"}),(0,ur.jsx)(Zy,{children:(0,ur.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:e=>{var t;return u(null===(t=e.target.files)||void 0===t?void 0:t[0])}})}),(0,ur.jsx)(nx,{children:(0,ur.jsx)(zr,{onClick:async()=>{if(!c)return;const e=new FormData;e.append("file",c);if((await fetch("".concat(t,"/social/stories"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:e})).ok){o.onClose(),u(null);const e=await fetch("".concat(t,"/social/stories"),{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json();i(n)}},isDisabled:!c,children:"Upload"})})]})]}),(0,ur.jsxs)(Nm,{isOpen:l.isOpen,onClose:l.onClose,size:"xl",isCentered:!0,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{bg:"black",children:[(0,ur.jsx)(Uy,{color:"white",children:null===d||void 0===d||null===(e=d.author)||void 0===e?void 0:e.name}),(0,ur.jsx)(Zy,{display:"flex",justifyContent:"center",children:"image"===(null===d||void 0===d?void 0:d.mediaType)?(0,ur.jsx)(Tx,{src:null===d||void 0===d?void 0:d.mediaUrl,maxH:"70vh",borderRadius:8}):(0,ur.jsx)("video",{src:null===d||void 0===d?void 0:d.mediaUrl,controls:!0,autoPlay:!0,style:{maxHeight:"70vh",borderRadius:8}})})]})]})]})},qD=()=>{const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]),i=g(),[a,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(!1),[v,y]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{const t=await fetch("".concat(e,"/social/feed"),{headers:{"auth-token":localStorage.getItem("token")}}),r=await t.json();n(r);const i=await fetch("".concat(e,"/user/bookmarks"),{headers:{"auth-token":localStorage.getItem("token")}}),a=await i.json();y(a)})()}),[e]);const x=async()=>{if(null===h||void 0===h||!h.postId||!u.trim())return;const t=await fetch("".concat(e,"/social/post/").concat(h.postId,"/comment"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({text:u.trim()})}),n=await t.json();p((e=>(0,c.A)((0,c.A)({},e),{},{list:[n,...(null===e||void 0===e?void 0:e.list)||[]]}))),d("")},b=f?v:t;return(0,ur.jsxs)(pr,{p:2,children:[(0,ur.jsx)(WD,{}),(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"xl",fontWeight:"bold",children:f?"Bookmarks":"Explore"}),(0,ur.jsxs)(ao,{ml:4,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Show bookmarks"}),(0,ur.jsx)(VD,{isChecked:f,onChange:e=>m(e.target.checked)})]})]}),(0,ur.jsx)(zr,{onClick:i.onOpen,children:"Create"})]}),(0,ur.jsx)(ex,{spacing:4,mt:3,align:"stretch",children:b.map((t=>{var r,i,a,s;return(0,ur.jsxs)(pr,{p:3,borderWidth:"1px",borderRadius:"lg",bg:"blackAlpha.200",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(BR,{src:null===(r=t.author)||void 0===r?void 0:r.profilePic,name:null===(i=t.author)||void 0===i?void 0:i.name}),(0,ur.jsx)(Gr,{as:hR,to:"/profile/".concat(null===(a=t.author)||void 0===a?void 0:a._id),fontWeight:"semibold",children:null===(s=t.author)||void 0===s?void 0:s.name})]}),t.repostOf&&(0,ur.jsx)(Jr,{fontSize:"xs",color:"whiteAlpha.700",children:"Reposted"}),t.text&&(0,ur.jsx)(Jr,{mt:2,children:t.text}),t.mediaUrl&&"image"===t.mediaType&&(0,ur.jsx)(Tx,{src:t.mediaUrl,alt:"post",mt:2,borderRadius:"lg"}),t.mediaUrl&&"video"===t.mediaType&&(0,ur.jsx)("video",{src:t.mediaUrl,controls:!0,style:{width:"100%",borderRadius:12,marginTop:8}}),t.caption&&(0,ur.jsx)(Jr,{mt:2,children:t.caption}),(0,ur.jsxs)(ao,{mt:2,spacing:4,children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>(async t=>{const r=await fetch("".concat(e,"/social/post/").concat(t,"/like"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),i=await r.json();n((e=>e.map((e=>e._id===t?(0,c.A)((0,c.A)({},e),{},{likes:Array(i.likes).fill(0)}):e))))})(t._id),children:"\u2764\ufe0f Like"}),(0,ur.jsxs)(Jr,{fontSize:"sm",children:[(t.likes||[]).length," likes"]}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>(async t=>{const n=await fetch("".concat(e,"/social/post/").concat(t,"/comments"),{headers:{"auth-token":localStorage.getItem("token")}}),r=await n.json();p({postId:t,list:r})})(t._id),children:"\ud83d\udcac Comments"}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{const r=await fetch("".concat(e,"/social/post/").concat(t._id,"/repost"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({})}),i=await r.json();n((e=>[i,...e]))},children:"\ud83d\udd01 Repost"}),f?(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{await fetch("".concat(e,"/user/unbookmark/").concat(t._id),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),y((e=>e.filter((e=>e._id!==t._id))))},children:"\ud83d\uddd1\ufe0f Remove"}):(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{await fetch("".concat(e,"/user/bookmark/").concat(t._id),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}});const n=await(await fetch("".concat(e,"/user/bookmarks"),{headers:{"auth-token":localStorage.getItem("token")}})).json();y(n)},children:"\ud83d\udd16 Bookmark"})]}),(null===h||void 0===h?void 0:h.postId)===t._id&&(0,ur.jsxs)(pr,{mt:2,p:2,bg:"blackAlpha.300",borderRadius:"md",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Write a comment",value:u,onChange:e=>d(e.target.value)}),(0,ur.jsx)(zr,{onClick:x,children:"Post"})]}),(0,ur.jsx)(bD,{my:2}),(0,ur.jsx)(ex,{align:"stretch",spacing:2,maxH:"200px",overflowY:"auto",children:(h.list||[]).map((e=>{var t,n,r;return(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(BR,{size:"sm",src:null===(t=e.author)||void 0===t?void 0:t.profilePic,name:null===(n=e.author)||void 0===n?void 0:n.name}),(0,ur.jsxs)(Jr,{children:[(0,ur.jsx)("b",{children:null===(r=e.author)||void 0===r?void 0:r.name}),": ",e.text]})]},e._id)}))})]})]},t._id)}))}),(0,ur.jsxs)(Nm,{isOpen:i.isOpen,onClose:i.onClose,isCentered:!0,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"Create post"}),(0,ur.jsxs)(Zy,{children:[(0,ur.jsx)($y,{type:"file",accept:"image/*,video/*",onChange:e=>s(e.target.files[0]),mb:2}),a&&a.type.startsWith("image/")&&(0,ur.jsx)(Tx,{src:URL.createObjectURL(a),alt:"preview",borderRadius:"md",mb:2}),(0,ur.jsx)($y,{placeholder:"Write a caption or text...",value:o,onChange:e=>l(e.target.value)}),(0,ur.jsx)(zr,{mt:2,onClick:async()=>{if(!o.trim())return;const t=await fetch("".concat(e,"/social/post/text"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({text:o})}),r=await t.json();n((e=>[r,...e])),l("")},children:"Post text only"})]}),(0,ur.jsx)(nx,{children:(0,ur.jsx)(zr,{onClick:async()=>{if(!a)return;const t=new FormData;t.append("file",a),t.append("caption",o);const r=await fetch("".concat(e,"/social/post"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:t}),c=await r.json();n((e=>[c,...e])),s(null),l(""),i.onClose()},isDisabled:!a,children:"Post"})})]})]})]})},XD=()=>{var e;const{hostName:t}=(0,r.useContext)(GS),[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(0),[o,l]=(0,r.useState)(!0),c=(0,r.useRef)(null),[u,d]=(0,r.useState)(!0),[h,p]=(0,r.useState)(0),[f,m]=(0,r.useState)(!1),g=m_();(0,r.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(t,"/social/reels"),{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json();i(n)}catch(e){}l(!1)})()}),[t]),(0,r.useEffect)((()=>{var e,t,r;const i=n[a];i&&(null===(e=c.current)||void 0===e||null===(t=e.play)||void 0===t||t.call(e).catch((()=>{})),p((null===(r=i.likes)||void 0===r?void 0:r.length)||0),m((i.likes||[]).includes(i.me)))}),[a,n]);if(o)return(0,ur.jsx)(Br,{});if(!n.length)return(0,ur.jsx)(Jr,{p:3,children:"No reels yet."});const v=n[a],y=async()=>{try{if(!(await fetch("".concat(t,"/social/post/").concat(v._id,"/like"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}})).ok)throw new Error("Like failed");m((e=>!e)),p((e=>f?Math.max(0,e-1):e+1))}catch(Zie){g({title:Zie.message,status:"error"})}},x=(()=>{let e=0;return()=>{const t=Date.now();t-e<300&&y(),e=t}})();return(0,ur.jsx)(pr,{h:{base:"80vh",md:"88vh"},onWheel:e=>{e.deltaY>0?s((e=>Math.min(e+1,Math.max(0,n.length-1)))):s((e=>Math.max(0,e-1)))},display:"flex",alignItems:"center",justifyContent:"center",children:(0,ur.jsxs)(pr,{position:"relative",w:{base:"90vw",md:"420px"},h:{base:"70vh",md:"75vh"},borderRadius:"xl",overflow:"hidden",bg:"black",onClick:x,children:[(0,ur.jsx)("video",{ref:c,src:v.mediaUrl,style:{width:"100%",height:"100%",objectFit:"cover"},muted:u,controls:!1,autoPlay:!0,playsInline:!0}),(0,ur.jsx)(Qs,{"aria-label":u?"unmute":"mute",icon:u?(0,ur.jsx)(bx,{}):(0,ur.jsx)(wx,{}),position:"absolute",top:2,left:2,size:"sm",onClick:e=>{e.stopPropagation(),d((e=>!e))}}),(0,ur.jsxs)(ex,{position:"absolute",right:2,bottom:4,spacing:3,children:[(0,ur.jsx)(Qs,{"aria-label":"like",icon:(0,ur.jsx)(vx,{color:f?"red":"white"}),onClick:e=>{e.stopPropagation(),y()}}),(0,ur.jsx)(Jr,{color:"white",fontSize:"sm",children:h}),(0,ur.jsx)(Qs,{"aria-label":"comment",icon:(0,ur.jsx)(mx,{}),onClick:e=>{e.stopPropagation(),g({title:"Comments UI coming soon"})}})]}),(0,ur.jsxs)(pr,{position:"absolute",left:3,bottom:3,right:60,color:"white",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:null===(e=v.author)||void 0===e?void 0:e.name}),v.caption&&(0,ur.jsx)(Jr,{noOfLines:2,opacity:.9,children:v.caption})]})]})})},JD=["spacing","spacingX","spacingY","children","justify","direction","align","className","shouldWrapChildren"],YD=["className"];var KD=cr((function(e,t){const{spacing:n="0.5rem",spacingX:i,spacingY:a,children:s,justify:o,direction:l,align:u,className:d,shouldWrapChildren:h}=e,p=y(e,JD),f=(0,r.useMemo)((()=>h?r.Children.map(s,((e,t)=>(0,ur.jsx)(ZD,{children:e},t))):s),[s,h]);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t,className:x("chakra-wrap",d)},p),{},{children:(0,ur.jsx)(lr.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:o,alignItems:u,flexDirection:l,listStyleType:"none",gap:n,columnGap:i,rowGap:a,padding:"0"},children:f})}))}));KD.displayName="Wrap";var ZD=cr((function(e,t){const{className:n}=e,r=y(e,YD);return(0,ur.jsx)(lr.li,(0,c.A)({ref:t,__css:{display:"flex",alignItems:"flex-start"},className:x("chakra-wrap__listitem",n)},r))}));ZD.displayName="WrapItem";const QD=["templateAreas","gap","rowGap","columnGap","column","row","autoFlow","autoRows","templateRows","autoColumns","templateColumns"];var $D=cr((function(e,t){const{templateAreas:n,gap:r,rowGap:i,columnGap:a,column:s,row:o,autoFlow:l,autoRows:u,templateRows:d,autoColumns:h,templateColumns:p}=e,f=y(e,QD),m={display:"grid",gridTemplateAreas:n,gridGap:r,gridRowGap:i,gridColumnGap:a,gridAutoColumns:h,gridColumn:s,gridRow:o,gridAutoFlow:l,gridAutoRows:u,gridTemplateRows:d,gridTemplateColumns:p};return(0,ur.jsx)(lr.div,(0,c.A)({ref:t,__css:m},f))}));$D.displayName="Grid";const eI=["area","colSpan","colStart","colEnd","rowEnd","rowSpan","rowStart"];function tI(e){return to(e,(e=>"auto"===e?"auto":"span ".concat(e,"/span ").concat(e)))}var nI=cr((function(e,t){const{area:n,colSpan:r,colStart:i,colEnd:a,rowEnd:s,rowSpan:o,rowStart:l}=e,u=y(e,eI),d=qr({gridArea:n,gridColumn:tI(r),gridRow:tI(o),gridColumnStart:i,gridColumnEnd:a,gridRowStart:l,gridRowEnd:s});return(0,ur.jsx)(lr.div,(0,c.A)({ref:t,__css:d},u))}));nI.displayName="GridItem";const rI=4;function iI(){const e=()=>Array.from({length:rI},(()=>Array(rI).fill(0))),[t,n]=(0,r.useState)(e()),[i,a]=(0,r.useState)(0),[s,o]=(0,r.useState)(!1),l=e=>{const t=[];for(let i=0;i<rI;i++)for(let n=0;n<rI;n++)e[i][n]||t.push([i,n]);if(0===t.length)return e;const[n,r]=t[Math.floor(Math.random()*t.length)];return e[n][r]=Math.random()<.9?2:4,e},c=e=>e[0].map(((t,n)=>e.map((e=>e[n])))),u=e=>e.map((e=>e.slice().reverse()));return{board:t,score:i,over:s,start:()=>{const t=e();l(t),l(t),n(t),a(0),o(!1)},move:e=>{if(s)return;let r=t.map((e=>e.slice()));"up"===e?r=c(r):"down"===e?r=u(c(r)):"right"===e&&(r=u(r));const i=r.map((e=>(e=>{const t=e.filter((e=>e));for(let n=0;n<t.length-1;n++)t[n]===t[n+1]&&(t[n]*=2,a((e=>e+t[n])),t.splice(n+1,1));for(;t.length<rI;)t.push(0);return t})(e))),d=JSON.stringify(i)!==JSON.stringify(r);let h=i;"up"===e?h=c(h):"down"===e?h=c(u(h)):"right"===e&&(h=u(h)),d&&l(h),n(h),(e=>{for(let t=0;t<rI;t++)for(let n=0;n<rI;n++)if(!e[t][n])return!0;for(let t=0;t<rI;t++)for(let n=0;n<rI;n++){if(t+1<rI&&e[t][n]===e[t+1][n])return!0;if(n+1<rI&&e[t][n]===e[t][n+1])return!0}return!1})(h)||o(!0)}}}const aI=e=>({0:"gray.700",2:"purple.100",4:"purple.200",8:"purple.300",16:"purple.400",32:"purple.500",64:"purple.600",128:"orange.400",256:"orange.500",512:"orange.600",1024:"pink.500",2048:"green.500"}[e]||"teal.600");function sI(){const{hostName:e}=r.useContext(GS),t=m_(),{board:n,score:i,over:a,start:s,move:o}=iI(),l=function(){const[e,t]=(0,r.useState)([{x:10,y:10},{x:9,y:10},{x:8,y:10}]),[n,i]=(0,r.useState)({x:1,y:0}),a=(0,r.useRef)({x:1,y:0}),[s,o]=(0,r.useState)({x:5,y:5}),[l,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(120),g=e=>{const t=new Set(e.map((e=>"".concat(e.x,",").concat(e.y))));let n,r;do{n=Math.floor(20*Math.random()),r=Math.floor(20*Math.random())}while(t.has("".concat(n,",").concat(r)));o({x:n,y:r})},v=()=>{a.current&&i(a.current);const n=e[0],r=n.x+a.current.x,o=n.y+a.current.y;if(r<0||o<0||r>=20||o>=20)return d(!0),void p(!1);if(e.some((e=>e.x===r&&e.y===o)))return d(!0),void p(!1);const u=[{x:r,y:o},...e];r===s.x&&o===s.y?(c((e=>e+1)),g(u),m((e=>e>60&&(l+1)%5===0?e-8:e))):u.pop(),t(u)};return(0,r.useEffect)((()=>{if(!h||u)return;const e=setInterval(v,f);return()=>clearInterval(e)}),[h,u,f,e]),{COLS:20,ROWS:20,CELL:16,snake:e,food:s,score:l,over:u,start:()=>{const e=[{x:10,y:10},{x:9,y:10},{x:8,y:10}];t(e),i({x:1,y:0}),a.current={x:1,y:0},c(0),d(!1),p(!0),g(e),m(120)},pause:()=>p(!1),resume:()=>{u||p(!0)},running:h,setDirection:(e,t)=>{e===-n.x&&t===-n.y||(a.current={x:e,y:t})}}}(),u=function(){const e=320,t=480,n=(0,r.useRef)(null),[i,a]=(0,r.useState)(0),[s,o]=(0,r.useState)(!1),[l,u]=(0,r.useState)(!1),d=60,[h,p]=(0,r.useState)(240),f=(0,r.useRef)(0),m=48,[g,v]=(0,r.useState)([]),y=(0,r.useRef)(0),x=e=>({x:e,topH:50+Math.floor(280*Math.random()),scored:!1});return(0,r.useEffect)((()=>{const r=()=>{const b=n.current;if(!b)return void(y.current=requestAnimationFrame(r));const w=b.getContext("2d");if(s&&!l){f.current+=.5,p((e=>e+f.current)),v((e=>e.map((e=>(0,c.A)((0,c.A)({},e),{},{x:e.x-2}))).filter((e=>e.x+m>-10)))),v((e=>{if(0===e.length)return[x(380)];const t=e[e.length-1];return t.x<160?[...e,x(t.x+160)]:e})),v((e=>e.map((e=>!e.scored&&e.x+m<d?(a((e=>e+1)),(0,c.A)((0,c.A)({},e),{},{scored:!0})):e))));const e=g.some((e=>d>e.x&&d<e.x+m&&h<e.topH)),n=g.some((e=>d>e.x&&d<e.x+m&&h>e.topH+120));(h<=0||h>=t||e||n)&&(u(!0),o(!1))}w.fillStyle="#1a202c",w.fillRect(0,0,e,t),w.fillStyle="#718096",w.font="16px sans-serif",w.fillText("Score: ".concat(i),8,20),w.fillStyle="#63b3ed",g.forEach((e=>{w.fillRect(e.x,0,m,e.topH),w.fillRect(e.x,e.topH+120,m,t-(e.topH+120))})),w.fillStyle="#f6ad55",w.beginPath(),w.arc(d,h,10,0,2*Math.PI),w.fill(),y.current=requestAnimationFrame(r)};return y.current=requestAnimationFrame(r),()=>cancelAnimationFrame(y.current)}),[s,l,g,i,h]),{canvasRef:n,W:e,H:t,score:i,running:s,over:l,start:()=>{a(0),u(!1),o(!0),p(240),f.current=0;const e=[x(380),x(540),x(700)];v(e)},pause:()=>o(!1),resume:()=>{l||o(!0)},flap:()=>{s&&!l&&(f.current=-8.5)}}}(),d=function(){const e=480,t=300,n=(0,r.useRef)(null),[i,a]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(0),u=80,[d,h]=(0,r.useState)(200),p=(0,r.useRef)({x:240,y:150,vx:3,vy:-3,r:6}),f=(0,r.useRef)(0);return(0,r.useEffect)((()=>{const r=()=>{const h=n.current;if(!h)return void(f.current=requestAnimationFrame(r));const m=h.getContext("2d");if(i&&!s){const t=p.current;if(t.x+=t.vx,t.y+=t.vy,(t.x<t.r||t.x>e-t.r)&&(t.vx*=-1),t.y<t.r&&(t.vy*=-1,c((e=>e+1))),t.y+t.r>=286)if(t.x>=d&&t.x<=d+u){t.vy=-Math.abs(t.vy);const e=(t.x-(d+40))/40;t.vx=Math.max(-4.5,Math.min(4.5,t.vx+2*e))}else t.y>310&&(o(!0),a(!1))}m.fillStyle="#1a202c",m.fillRect(0,0,e,t),m.fillStyle="#718096",m.font="16px sans-serif",m.fillText("Score: ".concat(l),8,20),m.fillStyle="#90cdf4",m.fillRect(d,286,u,10),m.fillStyle="#f6ad55",m.beginPath(),m.arc(p.current.x,p.current.y,p.current.r,0,2*Math.PI),m.fill(),f.current=requestAnimationFrame(r)};return f.current=requestAnimationFrame(r),()=>cancelAnimationFrame(f.current)}),[i,s,d,l]),{canvasRef:n,W:e,H:t,score:l,running:i,over:s,start:()=>{a(!0),o(!1),c(0),h(200),p.current={x:240,y:150,vx:3,vy:-3,r:6}},pause:()=>a(!1),resume:()=>{s||a(!0)},nudge:e=>h((t=>Math.max(0,Math.min(400,t+18*e)))),handleMouse:e=>{const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left;h(Math.max(0,Math.min(400,n-40)))},handleTouch:e=>{if(!e.touches[0])return;const t=e.currentTarget.getBoundingClientRect(),n=e.touches[0].clientX-t.left;h(Math.max(0,Math.min(400,n-40)))}}}(),[h,p]=(0,r.useState)("2048"),[f,m]=(0,r.useState)([]),[g,v]=(0,r.useState)(0),[y,x]=(0,r.useState)(""),b=async()=>{try{const t=await(await fetch("".concat(e,"/games/top/").concat(h,"?limit=20"))).json();m(Array.isArray(t)?t:[]);const n=await(await fetch("".concat(e,"/games/best/").concat(h),{headers:{"auth-token":localStorage.getItem("token")}})).json();v((null===n||void 0===n?void 0:n.score)||0)}catch(t){}};(0,r.useEffect)((()=>{s(),b()}),[]),(0,r.useEffect)((()=>{const e=e=>{const t=e.key.toLowerCase();"2048"===h?(["arrowup","w"].includes(t)&&o("up"),["arrowdown","s"].includes(t)&&o("down"),["arrowleft","a"].includes(t)&&o("left"),["arrowright","d"].includes(t)&&o("right")):"snake"===h?(["arrowup","w"].includes(t)&&l.setDirection(0,-1),["arrowdown","s"].includes(t)&&l.setDirection(0,1),["arrowleft","a"].includes(t)&&l.setDirection(-1,0),["arrowright","d"].includes(t)&&l.setDirection(1,0)):"flappy"===h?" "!==t&&"arrowup"!==t&&"w"!==t||u.flap():"pong"===h&&(["arrowleft","a"].includes(t)&&d.nudge(-1),["arrowright","d"].includes(t)&&d.nudge(1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[h,o,l,u,d]);const w=(0,r.useMemo)((()=>{let e=0,t=0;return{onTouchStart:n=>{const r=n.touches[0];e=r.clientX,t=r.clientY},onTouchEnd:n=>{const r=n.changedTouches[0],i=r.clientX-e,a=r.clientY-t;"flappy"!==h?"pong"!==h&&(Math.abs(i)>Math.abs(a)?"2048"===h?o(i>0?"right":"left"):l.setDirection(i>0?1:-1,0):"2048"===h?o(a>0?"down":"up"):l.setDirection(0,a>0?1:-1)):u.flap()}}}),[h,o,l,u]),S=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if("snake"!==h)return;const e=S.current;if(!e)return;const t=e.getContext("2d"),n=l.COLS,r=l.ROWS,i=l.CELL;(()=>{t.fillStyle="#1a202c",t.fillRect(0,0,n*i,r*i),t.strokeStyle="rgba(255,255,255,0.05)";for(let e=0;e<=n;e++)t.beginPath(),t.moveTo(e*i,0),t.lineTo(e*i,r*i),t.stroke();for(let e=0;e<=r;e++)t.beginPath(),t.moveTo(0,e*i),t.lineTo(n*i,e*i),t.stroke();t.fillStyle="#f56565",t.fillRect(l.food.x*i+2,l.food.y*i+2,i-4,i-4),l.snake.forEach(((e,n)=>{t.fillStyle=0===n?"#68d391":"#9ae6b4",t.fillRect(e.x*i+1,e.y*i+1,i-2,i-2)}))})()}),[h,l,l.snake,l.food]),(0,ur.jsxs)(pr,{w:"100%",overflow:"hidden",children:[(0,ur.jsxs)(ao,{justify:"space-between",mb:2,flexWrap:"wrap",rowGap:2,columnGap:3,children:[(0,ur.jsxs)(KD,{spacing:2,children:[(0,ur.jsx)(ZD,{children:(0,ur.jsx)(zr,{size:"sm",variant:"2048"===h?"solid":"ghost",onClick:()=>{p("2048"),b()},children:"2048"})}),(0,ur.jsx)(ZD,{children:(0,ur.jsx)(zr,{size:"sm",variant:"snake"===h?"solid":"ghost",onClick:()=>{p("snake"),b()},children:"Snake"})}),(0,ur.jsx)(ZD,{children:(0,ur.jsx)(zr,{size:"sm",variant:"flappy"===h?"solid":"ghost",onClick:()=>{p("flappy"),b(),u.start()},children:"Flappy"})}),(0,ur.jsx)(ZD,{children:(0,ur.jsx)(zr,{size:"sm",variant:"pong"===h?"solid":"ghost",onClick:()=>{p("pong"),b(),d.start()},children:"Pong"})})]}),(0,ur.jsxs)(ao,{flexWrap:"wrap",rowGap:2,columnGap:2,children:[(0,ur.jsxs)(Jr,{children:["Score: ","2048"===h?i:"snake"===h?l.score:"flappy"===h?u.score:d.score]}),(0,ur.jsxs)(Jr,{children:["Best: ",g]}),"2048"===h?(0,ur.jsx)(zr,{size:"sm",onClick:s,children:"New"}):"snake"===h?(0,ur.jsxs)(ur.Fragment,{children:[l.running?(0,ur.jsx)(zr,{size:"sm",onClick:l.pause,children:"Pause"}):(0,ur.jsx)(zr,{size:"sm",onClick:l.resume,children:"Resume"}),(0,ur.jsx)(zr,{size:"sm",onClick:l.start,children:"New"})]}):"flappy"===h?(0,ur.jsxs)(ur.Fragment,{children:[u.running?(0,ur.jsx)(zr,{size:"sm",onClick:u.pause,children:"Pause"}):(0,ur.jsx)(zr,{size:"sm",onClick:u.resume,children:"Resume"}),(0,ur.jsx)(zr,{size:"sm",onClick:u.start,children:"New"})]}):(0,ur.jsxs)(ur.Fragment,{children:[d.running?(0,ur.jsx)(zr,{size:"sm",onClick:d.pause,children:"Pause"}):(0,ur.jsx)(zr,{size:"sm",onClick:d.resume,children:"Resume"}),(0,ur.jsx)(zr,{size:"sm",onClick:d.start,children:"New"})]}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{await fetch("".concat(e,"/games/score"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({game:h,score:"2048"===h?i:l.score})}),t({title:"Score submitted",status:"success",duration:1e3}),b()}catch(Zie){t({title:"Submit failed",status:"error"})}},children:"Submit"})]})]}),"2048"===h?(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)($D,(0,c.A)((0,c.A)({templateColumns:"repeat(".concat(rI,", 72px)"),gap:2,p:3,bg:"blackAlpha.400",borderRadius:"lg",w:"max-content",maxW:"100%",overflowX:"auto"},w),{},{children:n.map(((e,t)=>e.map(((e,n)=>(0,ur.jsx)(nI,{w:"72px",h:"72px",bg:aI(e),color:e<=4?"black":"white",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"md",boxShadow:"md",children:e||""},"".concat(t,"-").concat(n))))))})),a&&(0,ur.jsx)(Jr,{mt:2,color:"red.300",children:"Game Over. Try New."})]}):"snake"===h?(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(pr,(0,c.A)((0,c.A)({p:3,bg:"blackAlpha.400",borderRadius:"lg",w:"max-content",maxW:"100%",overflowX:"auto"},w),{},{children:(0,ur.jsx)("canvas",{ref:S,width:l.COLS*l.CELL,height:l.ROWS*l.CELL,style:{borderRadius:8}})})),l.over&&(0,ur.jsx)(Jr,{mt:2,color:"red.300",children:"Game Over. Start a new run."})]}):"flappy"===h?(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(pr,{p:3,bg:"blackAlpha.400",borderRadius:"lg",w:"max-content",maxW:"100%",overflowX:"auto",onClick:u.flap,children:(0,ur.jsx)("canvas",{ref:u.canvasRef,width:u.W,height:u.H,style:{borderRadius:8}})}),u.over&&(0,ur.jsx)(Jr,{mt:2,color:"red.300",children:"Game Over. Tap New to try again."})]}):(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(pr,{p:3,bg:"blackAlpha.400",borderRadius:"lg",w:"max-content",maxW:"100%",overflowX:"auto",children:(0,ur.jsx)("canvas",{ref:d.canvasRef,width:d.W,height:d.H,style:{borderRadius:8},onMouseMove:e=>d.handleMouse(e),onTouchMove:e=>d.handleTouch(e)})}),d.over&&(0,ur.jsx)(Jr,{mt:2,color:"red.300",children:"Game Over. Tap New to try again."})]}),(0,ur.jsxs)(ex,{align:"stretch",mt:4,spacing:2,children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(Jr,{fontSize:"md",fontWeight:"bold",children:"Top Scores"}),(0,ur.jsx)($y,{placeholder:"Filter by name",value:y,onChange:e=>x(e.target.value),size:"sm",w:"200px"})]}),f.filter((e=>{var t;return((null===(t=e.user)||void 0===t?void 0:t.name)||"").toLowerCase().includes(y.toLowerCase())})).map(((e,t)=>{var n,r,i;return(0,ur.jsxs)(ao,{justify:"space-between",p:2,bg:"whiteAlpha.100",borderRadius:"md",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(BR,{size:"sm",src:null===(n=e.user)||void 0===n?void 0:n.profilePic,name:null===(r=e.user)||void 0===r?void 0:r.name}),(0,ur.jsx)(Jr,{children:(null===(i=e.user)||void 0===i?void 0:i.name)||"Anon"})]}),(0,ur.jsx)(Jr,{fontWeight:"bold",children:e.score})]},e._id||t)})),0===f.length&&(0,ur.jsx)(Jr,{children:"No scores yet. Be the first!"})]})]})}const oI=["columns","spacingX","spacingY","spacing","minChildWidth"];var lI=cr((function(e,t){const{columns:n,spacingX:r,spacingY:i,spacing:a,minChildWidth:s}=e,o=y(e,oI),l=Ar(),u=s?function(e,t){return to(e,(e=>{const n=Cr("sizes",e,"number"===typeof(r=e)?"".concat(r,"px"):r)(t);var r;return null===e?null:"repeat(auto-fit, minmax(".concat(n,", 1fr))")}))}(s,l):to(n,(e=>null===e?null:"repeat(".concat(e,", minmax(0, 1fr))")));return(0,ur.jsx)($D,(0,c.A)({ref:t,gap:a,columnGap:r,rowGap:i,templateColumns:u},o))}));function cI(e){var t;let{isOpen:n,onClose:i,companyId:a,hostName:s,token:o,onFilterByCompany:l}=e;const[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)([]),m=(0,r.useCallback)((async()=>{if(a){h(!0);try{const e={"auth-token":o},t=await fetch("".concat(s,"/companies/").concat(a),{headers:e}).then((e=>e.json()));if(u(t||null),t&&t.name){const n=new URLSearchParams({q:t.name,page:"1"}),r=await fetch("".concat(s,"/jobs?").concat(n.toString()),{headers:e}).then((e=>e.json()));f(Array.isArray(null===r||void 0===r?void 0:r.jobs)?r.jobs:Array.isArray(r)?r:[])}else f([])}catch(Zie){u(null),f([])}finally{h(!1)}}}),[a,s,o]);(0,r.useEffect)((()=>{n&&m()}),[n,m]);return(0,ur.jsxs)(Nm,{isOpen:n,onClose:i,size:"xl",scrollBehavior:"inside",children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:(null===c||void 0===c?void 0:c.name)||"Company"}),(0,ur.jsx)(Yy,{}),(0,ur.jsxs)(Zy,{children:[d&&(0,ur.jsx)(Jr,{children:"Loading..."}),!d&&c&&(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[c.website&&(0,ur.jsx)(Gr,{href:c.website,color:"blue.500",isExternal:!0,children:c.website}),c.about&&(0,ur.jsx)(Jr,{fontSize:"sm",children:c.about}),(0,ur.jsx)(ao,{children:(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.600",children:["Followers: ",(null===(t=c.followers)||void 0===t?void 0:t.length)||0]})}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{if(!c)return;const e={"auth-token":o};await fetch("".concat(s,"/companies/").concat(c._id,"/follow"),{method:"POST",headers:e}),m()},children:"Follow"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:async()=>{if(!c)return;const e={"auth-token":o};await fetch("".concat(s,"/companies/").concat(c._id,"/unfollow"),{method:"POST",headers:e}),m()},children:"Unfollow"}),c.name&&(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>{null===l||void 0===l||l(c.name),i()},children:"View jobs"})]}),(0,ur.jsxs)(pr,{pt:2,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Jobs"}),(0,ur.jsxs)(lI,{columns:1,spacing:2,children:[p.map((e=>(0,ur.jsxs)(pr,{p:3,borderWidth:"1px",borderRadius:"md",children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:e.title}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:e.location})]},e._id))),!p.length&&(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:"No jobs found."})]})]})]})]}),(0,ur.jsx)(nx,{children:(0,ur.jsx)(zr,{onClick:i,children:"Close"})})]})]})}lI.displayName="SimpleGrid";const uI=()=>{const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)(""),[l,u]=(0,r.useState)({title:"",company:"",location:"",description:"",employmentType:"Full-time"}),[d,h]=(0,r.useState)({location:"",type:"",workMode:"",minSalary:"",maxSalary:"",skills:"",sort:"new"}),[p,f]=(0,r.useState)(1),[m,v]=(0,r.useState)(1),[y,x]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[S,_]=(0,r.useState)(null),{isOpen:A,onOpen:E,onClose:C}=g(),M=(0,r.useCallback)((()=>{const e=new URLSearchParams;return s&&e.set("q",s),d.location&&e.set("location",d.location),d.type&&e.set("type",d.type),d.workMode&&e.set("workMode",d.workMode),d.minSalary&&e.set("minSalary",d.minSalary),d.maxSalary&&e.set("maxSalary",d.maxSalary),d.skills&&e.set("skills",d.skills),d.sort&&e.set("sort",d.sort),e.set("page",String(p)),e.set("limit","10"),e.toString()?"?".concat(e.toString()):""}),[s,d.location,d.type,d.workMode,d.minSalary,d.maxSalary,d.skills,d.sort,p]),T=(0,r.useCallback)((async()=>{const t=await fetch("".concat(e,"/jobs").concat(M()),{headers:{"auth-token":localStorage.getItem("token")}}),r=await t.json();Array.isArray(r)?(n(r),v(1)):(n(r.items||[]),v(r.pages||1))}),[e,M]);return(0,r.useEffect)((()=>{(async()=>{await fetch("".concat(e,"/jobs"),{headers:{"auth-token":localStorage.getItem("token")}});const t=await fetch("".concat(e,"/user/jobs/saved"),{headers:{"auth-token":localStorage.getItem("token")}}).then((e=>e.json()));a(Array.isArray(t)?t:[]);const n=await fetch("".concat(e,"/companies"),{headers:{"auth-token":localStorage.getItem("token")}}).then((e=>e.json()));x(Array.isArray(n)?n:[]);const r=await fetch("".concat(e,"/jobs/alerts/list"),{headers:{"auth-token":localStorage.getItem("token")}}).then((e=>e.json()));w(Array.isArray(r)?r:[])})()}),[e]),(0,r.useEffect)((()=>{T()}),[T]),(0,ur.jsxs)(pr,{p:2,children:[(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Search jobs",value:s,onChange:e=>o(e.target.value)}),(0,ur.jsx)(zr,{onClick:()=>{f(1),T()},children:"Search"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Location",value:d.location,onChange:e=>h((0,c.A)((0,c.A)({},d),{},{location:e.target.value}))}),(0,ur.jsxs)(di,{placeholder:"Type",value:d.type,onChange:e=>h((0,c.A)((0,c.A)({},d),{},{type:e.target.value})),children:[(0,ur.jsx)("option",{children:"Full-time"}),(0,ur.jsx)("option",{children:"Part-time"}),(0,ur.jsx)("option",{children:"Contract"}),(0,ur.jsx)("option",{children:"Internship"}),(0,ur.jsx)("option",{children:"Temporary"}),(0,ur.jsx)("option",{children:"Other"})]}),(0,ur.jsx)($y,{placeholder:"Min salary",type:"number",value:d.minSalary,onChange:e=>h((0,c.A)((0,c.A)({},d),{},{minSalary:e.target.value}))}),(0,ur.jsx)($y,{placeholder:"Max salary",type:"number",value:d.maxSalary,onChange:e=>h((0,c.A)((0,c.A)({},d),{},{maxSalary:e.target.value}))})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Skills (comma separated)",value:d.skills,onChange:e=>h((0,c.A)((0,c.A)({},d),{},{skills:e.target.value}))}),(0,ur.jsxs)(di,{placeholder:"Work mode",value:d.workMode,onChange:e=>h((0,c.A)((0,c.A)({},d),{},{workMode:e.target.value})),children:[(0,ur.jsx)("option",{children:"On-site"}),(0,ur.jsx)("option",{children:"Remote"}),(0,ur.jsx)("option",{children:"Hybrid"})]}),(0,ur.jsxs)(di,{value:d.sort,onChange:e=>h((0,c.A)((0,c.A)({},d),{},{sort:e.target.value})),children:[(0,ur.jsx)("option",{value:"new",children:"Newest"}),(0,ur.jsx)("option",{value:"salary",children:"Top salary"})]}),(0,ur.jsx)(zr,{variant:"outline",onClick:()=>{h({location:"",type:"",workMode:"",minSalary:"",maxSalary:"",skills:"",sort:"new"}),o(""),f(1),T()},children:"Reset"})]}),(0,ur.jsx)(ao,{children:(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{const t={q:s,location:d.location,type:d.type,workMode:d.workMode,skills:(d.skills||"").split(",").map((e=>e.trim())).filter(Boolean)};await fetch("".concat(e,"/jobs/alerts"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(t)});const n=await fetch("".concat(e,"/jobs/alerts/list"),{headers:{"auth-token":localStorage.getItem("token")}}).then((e=>e.json()));w(Array.isArray(n)?n:[])},children:"Create alert from filters"})})]}),(0,ur.jsxs)(lI,{columns:{base:1,md:2},spacing:4,mt:3,children:[(0,ur.jsx)(ex,{align:"stretch",spacing:3,children:t.map((t=>{const n=i.find((e=>e._id===t._id));return(0,ur.jsxs)(pr,{p:3,borderWidth:"1px",borderRadius:"md",bg:"blackAlpha.200",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:t.title}),(0,ur.jsxs)(Jr,{children:[t.company," \u2022 ",t.location]}),(0,ur.jsx)(Jr,{mt:1,noOfLines:3,children:t.description}),(0,ur.jsxs)(ao,{mt:2,children:[(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{await fetch("".concat(e,"/jobs/").concat(t._id,"/apply"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}})},children:"Apply"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:async()=>{const r={"auth-token":localStorage.getItem("token")};n?await fetch("".concat(e,"/user/jobs/").concat(t._id,"/unsave"),{method:"POST",headers:r}):await fetch("".concat(e,"/user/jobs/").concat(t._id,"/save"),{method:"POST",headers:r});const i=await fetch("".concat(e,"/user/jobs/saved"),{headers:r}).then((e=>e.json()));a(Array.isArray(i)?i:[])},children:n?"Unsave":"Save"})]})]},t._id)}))}),(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Saved jobs"}),(0,ur.jsx)(ex,{align:"stretch",spacing:3,children:i.map((e=>(0,ur.jsxs)(pr,{p:3,borderWidth:"1px",borderRadius:"md",children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:e.title}),(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:[e.company," \u2022 ",e.location]})]},e._id)))}),(0,ur.jsxs)(pr,{mt:6,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Companies"}),(0,ur.jsx)(ex,{align:"stretch",spacing:3,children:y.map((t=>(0,ur.jsxs)(pr,{p:3,borderWidth:"1px",borderRadius:"md",_hover:{bg:"gray.50",cursor:"pointer"},onClick:()=>{_(t._id),E()},children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:t.name}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:t.website||""}),(0,ur.jsx)(zr,{size:"xs",mt:2,onClick:async()=>{const n={"auth-token":localStorage.getItem("token")};await fetch("".concat(e,"/companies/").concat(t._id,"/follow"),{method:"POST",headers:n})},children:"Follow"})]},t._id)))})]}),(0,ur.jsxs)(pr,{mt:6,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Job alerts"}),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[b.map((t=>(0,ur.jsxs)(ao,{justify:"space-between",borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",noOfLines:1,children:[t.q,t.location,t.type,t.workMode].filter(Boolean).join(" \u2022 ")}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:async()=>{await fetch("".concat(e,"/jobs/alerts/").concat(t._id),{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}}),w((e=>e.filter((e=>e._id!==t._id))))},children:"Delete"})]},t._id))),(0,ur.jsx)(cI,{isOpen:A,onClose:()=>{C()},companyId:S,hostName:e,token:localStorage.getItem("token"),onFilterByCompany:e=>{o(e),f(1),T()}})]})]})]})]}),(0,ur.jsxs)(ao,{mt:3,justify:"center",children:[(0,ur.jsx)(zr,{size:"sm",isDisabled:p<=1,onClick:()=>{f((e=>Math.max(1,e-1))),setTimeout(T,0)},children:"Prev"}),(0,ur.jsxs)(Jr,{fontSize:"sm",children:["Page ",p," of ",m]}),(0,ur.jsx)(zr,{size:"sm",isDisabled:p>=m,onClick:()=>{f((e=>Math.min(m,e+1))),setTimeout(T,0)},children:"Next"})]}),(0,ur.jsxs)(pr,{mt:6,p:3,borderWidth:"1px",borderRadius:"md",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Post a job"}),(0,ur.jsx)($y,{placeholder:"Title",value:l.title,onChange:e=>u((0,c.A)((0,c.A)({},l),{},{title:e.target.value})),mb:2}),(0,ur.jsx)($y,{placeholder:"Company",value:l.company,onChange:e=>u((0,c.A)((0,c.A)({},l),{},{company:e.target.value})),mb:2}),(0,ur.jsx)($y,{placeholder:"Location",value:l.location,onChange:e=>u((0,c.A)((0,c.A)({},l),{},{location:e.target.value})),mb:2}),(0,ur.jsxs)(di,{placeholder:"Employment type",value:l.employmentType,onChange:e=>u((0,c.A)((0,c.A)({},l),{},{employmentType:e.target.value})),mb:2,children:[(0,ur.jsx)("option",{children:"Full-time"}),(0,ur.jsx)("option",{children:"Part-time"}),(0,ur.jsx)("option",{children:"Contract"}),(0,ur.jsx)("option",{children:"Internship"}),(0,ur.jsx)("option",{children:"Temporary"}),(0,ur.jsx)("option",{children:"Other"})]}),(0,ur.jsx)(zS,{placeholder:"Description",value:l.description,onChange:e=>u((0,c.A)((0,c.A)({},l),{},{description:e.target.value})),mb:2}),(0,ur.jsx)(zr,{onClick:async()=>{await fetch("".concat(e,"/jobs"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(l)}),u({title:"",company:"",location:"",description:"",employmentType:"Full-time"}),T()},children:"Post"})]})]})},dI=e=>{let{p:t,right:n}=e;return(0,ur.jsxs)(ao,{p:3,borderWidth:"1px",borderRadius:"md",justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(BR,{size:"sm",name:t.name,src:t.profilePic}),(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:t.name}),t.headline&&(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:t.headline})]})]}),n]},t._id)},hI=()=>{const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(""),h=m_(),p={"auth-token":localStorage.getItem("token")},f=(0,r.useCallback)((async()=>{const t={"auth-token":localStorage.getItem("token")};try{const[r,i,s,l]=await Promise.all([fetch("".concat(e,"/user/invites"),{headers:t}).then((e=>e.json())),fetch("".concat(e,"/user/connections"),{headers:t}).then((e=>e.json())),fetch("".concat(e,"/user/non-friends"),{headers:t}).then((e=>e.json())),fetch("".concat(e,"/user/invites/sent"),{headers:t}).then((e=>e.json()))]);n(r||[]),a(i||[]),o((s||[]).slice(0,10)),c(l||[])}catch(Zie){console.log(Zie)}}),[e]);(0,r.useEffect)((()=>{f();const e=window.__appSocket,t=()=>f();return e&&e.on("network:update",t),()=>{e&&e.off("network:update",t)}}),[f]);const m=async()=>{if(!u.trim())return o([]);const t=await fetch("".concat(e,"/user/network/search?q=").concat(encodeURIComponent(u)),{headers:p}).then((e=>e.json()));o(t||[])};return(0,ur.jsxs)(pr,{p:2,children:[(0,ur.jsxs)(ao,{mb:4,children:[(0,ur.jsx)($y,{placeholder:"Search people",value:u,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()}}),(0,ur.jsx)(zr,{onClick:m,children:"Search"})]}),(0,ur.jsxs)(lI,{columns:{base:1,md:2},spacing:4,children:[(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(FR,{size:"md",mb:3,children:"Invitations"}),(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[0===t.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No pending invites"}),t.map((t=>(0,ur.jsx)(dI,{p:t,right:(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>(async t=>{await fetch("".concat(e,"/user/connect/").concat(t,"/accept"),{method:"POST",headers:p}),h({title:"Connection accepted",status:"success",duration:1500}),f()})(t._id),children:"Accept"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>(async t=>{await fetch("".concat(e,"/user/connect/").concat(t,"/decline"),{method:"POST",headers:p}),h({title:"Invite declined",status:"info",duration:1200}),f()})(t._id),children:"Decline"})]})},t._id)))]})]}),(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(FR,{size:"md",mb:3,children:"Connections"}),(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[0===i.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No connections yet"}),i.map((t=>(0,ur.jsx)(dI,{p:t,right:(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:t.location||""}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:()=>(async t=>{await fetch("".concat(e,"/user/connections/").concat(t,"/remove"),{method:"POST",headers:p}),h({title:"Connection removed",status:"warning",duration:1200}),f()})(t._id),children:"Remove"})]})},t._id)))]})]})]}),(0,ur.jsx)(pr,{mt:6,children:(0,ur.jsxs)(nS,{variant:"enclosed",children:[(0,ur.jsxs)(_R,{children:[(0,ur.jsx)(AR,{children:"People you may know"}),(0,ur.jsx)(AR,{children:"Sent invites"})]}),(0,ur.jsxs)(rS,{children:[(0,ur.jsx)(iS,{children:(0,ur.jsx)(lI,{columns:{base:1,sm:2},spacing:3,children:s.map((t=>(0,ur.jsx)(dI,{p:t,right:(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>(async t=>{await fetch("".concat(e,"/user/connect/").concat(t),{method:"POST",headers:p}),h({title:"Invite sent",status:"info",duration:1500}),f()})(t._id),children:"Connect"})},t._id)))})}),(0,ur.jsx)(iS,{children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[0===l.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No sent invites"}),l.map((t=>(0,ur.jsx)(dI,{p:t,right:(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>(async t=>{await fetch("".concat(e,"/user/connect/").concat(t,"/cancel"),{method:"POST",headers:p}),h({title:"Invite withdrawn",status:"info",duration:1200}),f()})(t._id),children:"Withdraw"})},t._id)))]})})]})]})})]})},pI=()=>{const[e,t]=(0,r.useState)(0);return(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsxs)(nS,{isFitted:!0,variant:"enclosed",w:{base:"95vw",md:"100%"},index:e,colorScheme:"purple",h:"100%",children:[(0,ur.jsxs)(_R,{mb:1,flexWrap:"wrap",children:[(0,ur.jsx)(AR,{onClick:()=>t(0),children:"Chats"}),(0,ur.jsx)(AR,{onClick:()=>t(1),children:"New"})]}),(0,ur.jsxs)(_R,{mb:2,flexWrap:"wrap",children:[(0,ur.jsx)(AR,{onClick:()=>t(2),children:"Explore"}),(0,ur.jsx)(AR,{onClick:()=>t(3),children:"Reels"}),(0,ur.jsx)(AR,{onClick:()=>t(4),children:"Network"}),(0,ur.jsx)(AR,{onClick:()=>t(5),children:"Jobs"}),(0,ur.jsx)(AR,{onClick:()=>t(6),children:"Games"})]}),(0,ur.jsxs)(rS,{children:[(0,ur.jsx)(iS,{py:1,mt:{base:2,md:0},px:2,w:{base:"96vw",md:"29vw"},borderRightWidth:{base:"0px",md:"1px"},h:{base:"85vh",md:"88.5vh"},children:(0,ur.jsx)(zD,{setactiveTab:t})}),(0,ur.jsx)(iS,{mt:{base:2,md:0},px:{base:0,md:2},w:{base:"96vw",md:"29vw"},borderRightWidth:{base:"0px",md:"1px"},children:(0,ur.jsx)(HD,{setactiveTab:t})}),(0,ur.jsx)(iS,{mt:{base:2,md:0},px:{base:0,md:2},w:{base:"96vw",md:"29vw"},borderRightWidth:{base:"0px",md:"1px"},children:(0,ur.jsx)(qD,{})}),(0,ur.jsx)(iS,{mt:{base:2,md:0},px:{base:0,md:2},w:{base:"96vw",md:"29vw"},borderRightWidth:{base:"0px",md:"1px"},children:(0,ur.jsx)(XD,{})}),(0,ur.jsx)(iS,{mt:{base:2,md:0},px:{base:0,md:2},w:{base:"96vw",md:"29vw"},borderRightWidth:{base:"0px",md:"1px"},children:(0,ur.jsx)(hI,{})}),(0,ur.jsx)(iS,{mt:{base:2,md:0},px:{base:0,md:2},w:{base:"96vw",md:"29vw"},borderRightWidth:{base:"0px",md:"1px"},children:(0,ur.jsx)(uI,{})}),(0,ur.jsx)(iS,{mt:{base:2,md:0},px:{base:0,md:2},w:{base:"96vw",md:"29vw"},borderRightWidth:{base:"0px",md:"1px"},children:(0,ur.jsx)(sI,{})})]})]})})};var fI=Sx({d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",displayName:"ArrowForwardIcon"}),mI=__webpack_require__(5226);const gI=JSON.parse('{"v":"5.5.8","fr":60,"ip":0,"op":110,"w":144,"h":105,"nm":"typing indicator","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"\xc3\xa2\xc2\x96\xc2\xbd Dots","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[72,51,0],"ix":2},"a":{"a":0,"k":[36,9,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":110,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"dot 1","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[9,9,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":3.053,"s":[9,10,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15.273,"s":[9,-9,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":25.174,"s":[9,12,0],"to":[0,0,0],"ti":[0,0,0]},{"t":32.744140625,"s":[9,9,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[6,6],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.472],"y":[1]},"o":{"x":[1],"y":[0]},"t":0,"s":[0.690196078431,0.725490196078,0.752941176471,1]},{"i":{"x":[0.49],"y":[1]},"o":{"x":[1],"y":[0]},"t":15.273,"s":[0.349019616842,0.392156869173,0.427450984716,1]},{"t":32.072265625,"s":[0.690196078431,0.725490196078,0.752941176471,1]}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"dot 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":110,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"dot 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":10.691,"s":[36,9,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15.273,"s":[36,10,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":25.963,"s":[36,-9,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":36.984,"s":[36,14.326,0],"to":[0,0,0],"ti":[0,0,0]},{"t":43.97265625,"s":[36,9,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[6,6],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.472],"y":[1]},"o":{"x":[1],"y":[0]},"t":10.691,"s":[0.690196078431,0.725490196078,0.752941176471,1]},{"i":{"x":[0.49],"y":[1]},"o":{"x":[1],"y":[0]},"t":25.963,"s":[0.349019616842,0.392156869173,0.427450984716,1]},{"t":42.763671875,"s":[0.690196078431,0.725490196078,0.752941176471,1]}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"dot 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":110,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"dot 3","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":21.383,"s":[63,9,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":25.963,"s":[63,10,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":38.184,"s":[63,-9,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":49.594,"s":[63,13.139,0],"to":[0,0,0],"ti":[0,0,0]},{"t":56,"s":[63,9,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[6,6],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.472],"y":[1]},"o":{"x":[1],"y":[0]},"t":21.383,"s":[0.690196078431,0.725490196078,0.752941176471,1]},{"i":{"x":[0.49],"y":[1]},"o":{"x":[1],"y":[0]},"t":36.656,"s":[0.349019616842,0.392156869173,0.427450984716,1]},{"t":53.45703125,"s":[0.690196078431,0.725490196078,0.752941176471,1]}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"dot 3","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":110,"st":0,"bm":0}],"markers":[]}');function vI(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function yI(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(t,e),n}function xI(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let bI={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function wI(e){bI=e}const SI=/[&<>"']/,_I=new RegExp(SI.source,"g"),AI=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,EI=new RegExp(AI.source,"g"),CI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},MI=e=>CI[e];function TI(e,t){if(t){if(SI.test(e))return e.replace(_I,MI)}else if(AI.test(e))return e.replace(EI,MI);return e}const kI=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function PI(e){return e.replace(kI,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const RI=/(^|[^\[])\^/g;function DI(e,t){let n="string"===typeof e?e:e.source;t=t||"";const r={replace:(e,t)=>{let i="string"===typeof t?t:t.source;return i=i.replace(RI,"$1"),n=n.replace(e,i),r},getRegex:()=>new RegExp(n,t)};return r}function II(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch(Zie){return null}return e}const BI={exec:()=>null};function jI(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function FI(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const a=e.charAt(r-i-1);if(a!==t||n){if(a===t||!n)break;i++}else i++}return e.slice(0,r-i)}function LI(e,t,n,r){const i=t.href,a=t.title?TI(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:a,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:a,text:TI(s)}}class OI{constructor(e){(0,Ig.A)(this,"options",void 0),(0,Ig.A)(this,"rules",void 0),(0,Ig.A)(this,"lexer",void 0),this.options=e||bI}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:FI(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=FI(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=FI(t[0].replace(/^ *>[ \t]?/gm,""),"\n"),n=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(e);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:r,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?"\\d{1,9}\\".concat(n.slice(-1)):"\\".concat(n),this.options.pedantic&&(n=r?n:"[*+-]");const a=new RegExp("^( {0,3}".concat(n,")((?:[\t ][^\\n]*)?(?:\\n|$))"));let s="",o="",l=!1;for(;e;){let n=!1;if(!(t=a.exec(e)))break;if(this.rules.block.hr.test(e))break;s=t[0],e=e.substring(s.length);let r=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],u=0;this.options.pedantic?(u=2,o=r.trimStart()):(u=t[2].search(/[^ ]/),u=u>4?1:u,o=r.slice(u),u+=t[1].length);let d=!1;if(!r&&/^ *$/.test(c)&&(s+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp("^ {0,".concat(Math.min(3,u-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))")),n=new RegExp("^ {0,".concat(Math.min(3,u-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),i=new RegExp("^ {0,".concat(Math.min(3,u-1),"}(?:```|~~~)")),a=new RegExp("^ {0,".concat(Math.min(3,u-1),"}#"));for(;e;){const l=e.split("\n",1)[0];if(c=l,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),i.test(c))break;if(a.test(c))break;if(t.test(c))break;if(n.test(e))break;if(c.search(/[^ ]/)>=u||!c.trim())o+="\n"+c.slice(u);else{if(d)break;if(r.search(/[^ ]/)>=4)break;if(i.test(r))break;if(a.test(r))break;if(n.test(r))break;o+="\n"+c}d||c.trim()||(d=!0),s+=l+"\n",e=e.substring(l.length+1),r=c.slice(u)}}i.loose||(l?i.loose=!0:/\n *\n *$/.test(s)&&(l=!0));let h,p=null;this.options.gfm&&(p=/^\[[ xX]\] /.exec(o),p&&(h="[ ] "!==p[0],o=o.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:s,task:!!p,checked:h,loose:!1,text:o,tokens:[]}),i.raw+=s}i.items[i.items.length-1].raw=s.trimEnd(),i.items[i.items.length-1].text=o.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){const t=i.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));i.loose=n}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const n=jI(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const e of r)/^ *-+: *$/.test(e)?a.align.push("right"):/^ *:-+: *$/.test(e)?a.align.push("center"):/^ *:-+ *$/.test(e)?a.align.push("left"):a.align.push(null);for(const e of n)a.header.push({text:e,tokens:this.lexer.inline(e)});for(const e of i)a.rows.push(jI(e,a.header.length).map((e=>({text:e,tokens:this.lexer.inline(e)}))));return a}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:TI(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=FI(e.slice(0,-1),"\\");if((e.length-t.length)%2===0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),LI(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return LI(n,e,n[0],this.lexer)}}emStrong(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.rules.inline.emStrongLDelim.exec(e);if(!r)return;if(r[3]&&n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...r[0]].length-1;let i,a,s=n,o=0;const l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(a=[...i].length,r[3]||r[4]){s+=a;continue}if((r[5]||r[6])&&n%3&&!((n+a)%3)){o+=a;continue}if(s-=a,s>0)continue;a=Math.min(a,a+s+o);const t=[...r[0]][0].length,l=e.slice(0,n+r.index+t+a);if(Math.min(n,a)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=TI(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=TI(t[1]),n="mailto:"+e):(e=TI(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,i;if("@"===t[2])e=TI(t[0]),i="mailto:"+e;else{let a;do{var n,r;a=t[0],t[0]=null!==(n=null===(r=this.rules.inline._backpedal.exec(t[0]))||void 0===r?void 0:r[0])&&void 0!==n?n:""}while(a!==t[0]);e=TI(t[0]),i="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:TI(t[0]),{type:"text",raw:t[0],text:e}}}}const NI=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,zI=/(?:[*+-]|\d{1,9}[.)])/,UI=DI(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,zI).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),HI=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,GI=/(?!\s*\])(?:\\.|[^\[\]\\])+/,VI=DI(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",GI).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),WI=DI(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,zI).getRegex(),qI="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",XI=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,JI=DI("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",XI).replace("tag",qI).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),YI=DI(HI).replace("hr",NI).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qI).getRegex(),KI={blockquote:DI(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",YI).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:VI,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:NI,html:JI,lheading:UI,list:WI,newline:/^(?: *(?:\n|$))+/,paragraph:YI,table:BI,text:/^[^\n]+/},ZI=DI("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",NI).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qI).getRegex(),QI=(0,c.A)((0,c.A)({},KI),{},{table:ZI,paragraph:DI(HI).replace("hr",NI).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ZI).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qI).getRegex()}),$I=(0,c.A)((0,c.A)({},KI),{},{html:DI("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",XI).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:BI,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:DI(HI).replace("hr",NI).replace("heading"," *#{1,6} *[^\n]").replace("lheading",UI).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),eB=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,tB=/^( {2,}|\\)\n(?!\s*$)/,nB="\\p{P}\\p{S}",rB=DI(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,nB).getRegex(),iB=DI(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,nB).getRegex(),aB=DI("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,nB).getRegex(),sB=DI("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,nB).getRegex(),oB=DI(/\\([punct])/,"gu").replace(/punct/g,nB).getRegex(),lB=DI(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),cB=DI(XI).replace("(?:--\x3e|$)","--\x3e").getRegex(),uB=DI("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",cB).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),dB=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,hB=DI(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",dB).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),pB=DI(/^!?\[(label)\]\[(ref)\]/).replace("label",dB).replace("ref",GI).getRegex(),fB=DI(/^!?\[(ref)\](?:\[\])?/).replace("ref",GI).getRegex(),mB={_backpedal:BI,anyPunctuation:oB,autolink:lB,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:tB,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:BI,emStrongLDelim:iB,emStrongRDelimAst:aB,emStrongRDelimUnd:sB,escape:eB,link:hB,nolink:fB,punctuation:rB,reflink:pB,reflinkSearch:DI("reflink|nolink(?!\\()","g").replace("reflink",pB).replace("nolink",fB).getRegex(),tag:uB,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:BI},gB=(0,c.A)((0,c.A)({},mB),{},{link:DI(/^!?\[(label)\]\((.*?)\)/).replace("label",dB).getRegex(),reflink:DI(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dB).getRegex()}),vB=(0,c.A)((0,c.A)({},mB),{},{escape:DI(eB).replace("])","~|])").getRegex(),url:DI(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),yB=(0,c.A)((0,c.A)({},vB),{},{br:DI(tB).replace("{2,}","*").getRegex(),text:DI(vB.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),xB={normal:KI,gfm:QI,pedantic:$I},bB={normal:mB,gfm:vB,breaks:yB,pedantic:gB};class wB{constructor(e){(0,Ig.A)(this,"tokens",void 0),(0,Ig.A)(this,"options",void 0),(0,Ig.A)(this,"state",void 0),(0,Ig.A)(this,"tokenizer",void 0),(0,Ig.A)(this,"inlineQueue",void 0),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||bI,this.options.tokenizer=this.options.tokenizer||new OI,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:xB.normal,inline:bB.normal};this.options.pedantic?(t.block=xB.pedantic,t.inline=bB.pedantic):this.options.gfm&&(t.block=xB.gfm,this.options.breaks?t.inline=bB.breaks:t.inline=bB.gfm),this.tokenizer.rules=t}static get rules(){return{block:xB,inline:bB}}static lex(e,t){return new wB(t).lex(e)}static lexInline(e,t){return new wB(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e){let t,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(t=n.call({lexer:this},e,a))&&(e=e.substring(t.raw.length),a.push(t),!0)))))if(t=this.tokenizer.space(e))e=e.substring(t.raw.length),1===t.raw.length&&a.length>0?a[a.length-1].raw+="\n":a.push(t);else if(t=this.tokenizer.code(e))e=e.substring(t.raw.length),n=a[a.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?a.push(t):(n.raw+="\n"+t.raw,n.text+="\n"+t.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(t=this.tokenizer.fences(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.heading(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.hr(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.blockquote(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.list(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.html(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.def(e))e=e.substring(t.raw.length),n=a[a.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title}):(n.raw+="\n"+t.raw,n.text+="\n"+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(t=this.tokenizer.table(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.lheading(e))e=e.substring(t.raw.length),a.push(t);else{if(r=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let i;this.options.extensions.startBlock.forEach((e=>{i=e.call({lexer:this},n),"number"===typeof i&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(this.state.top&&(t=this.tokenizer.paragraph(r)))n=a[a.length-1],i&&"paragraph"===n.type?(n.raw+="\n"+t.raw,n.text+="\n"+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):a.push(t),i=r.length!==e.length,e=e.substring(t.raw.length);else if(t=this.tokenizer.text(e))e=e.substring(t.raw.length),n=a[a.length-1],n&&"text"===n.type?(n.raw+="\n"+t.raw,n.text+="\n"+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):a.push(t);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,a}inline(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e){let t,n,r,i,a,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(s=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(t=n.call({lexer:this},e,o))&&(e=e.substring(t.raw.length),o.push(t),!0)))))if(t=this.tokenizer.escape(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.tag(e))e=e.substring(t.raw.length),n=o[o.length-1],n&&"text"===t.type&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):o.push(t);else if(t=this.tokenizer.link(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(t.raw.length),n=o[o.length-1],n&&"text"===t.type&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):o.push(t);else if(t=this.tokenizer.emStrong(e,l,s))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.codespan(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.br(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.del(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.autolink(e))e=e.substring(t.raw.length),o.push(t);else if(this.state.inLink||!(t=this.tokenizer.url(e))){if(r=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let i;this.options.extensions.startInline.forEach((e=>{i=e.call({lexer:this},n),"number"===typeof i&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(t=this.tokenizer.inlineText(r))e=e.substring(t.raw.length),"_"!==t.raw.slice(-1)&&(s=t.raw.slice(-1)),a=!0,n=o[o.length-1],n&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):o.push(t);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(t.raw.length),o.push(t);return o}}class SB{constructor(e){(0,Ig.A)(this,"options",void 0),this.options=e||bI}code(e,t,n){var r;const i=null===(r=(t||"").match(/^\S*/))||void 0===r?void 0:r[0];return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="language-'+TI(i)+'">'+(n?e:TI(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:TI(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n".concat(e,"</blockquote>\n")}html(e,t){return e}heading(e,t,n){return"<h".concat(t,">").concat(e,"</h").concat(t,">\n")}hr(){return"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,n){return"<li>".concat(e,"</li>\n")}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return"<p>".concat(e,"</p>\n")}table(e,t){return t&&(t="<tbody>".concat(t,"</tbody>")),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n".concat(e,"</tr>\n")}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<".concat(n,' align="').concat(t.align,'">'):"<".concat(n,">"))+e+"</".concat(n,">\n")}strong(e){return"<strong>".concat(e,"</strong>")}em(e){return"<em>".concat(e,"</em>")}codespan(e){return"<code>".concat(e,"</code>")}br(){return"<br>"}del(e){return"<del>".concat(e,"</del>")}link(e,t,n){const r=II(e);if(null===r)return n;let i='<a href="'+(e=r)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>",i}image(e,t,n){const r=II(e);if(null===r)return n;let i='<img src="'.concat(e=r,'" alt="').concat(n,'"');return t&&(i+=' title="'.concat(t,'"')),i+=">",i}text(e){return e}}class _B{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class AB{constructor(e){(0,Ig.A)(this,"options",void 0),(0,Ig.A)(this,"renderer",void 0),(0,Ig.A)(this,"textRenderer",void 0),this.options=e||bI,this.options.renderer=this.options.renderer||new SB,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new _B}static parse(e,t){return new AB(t).parse(e)}static parseInline(e,t){return new AB(t).parseInline(e)}parse(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}switch(i.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const e=i;n+=this.renderer.heading(this.parseInline(e.tokens),e.depth,PI(this.parseInline(e.tokens,this.textRenderer)));continue}case"code":{const e=i;n+=this.renderer.code(e.text,e.lang,!!e.escaped);continue}case"table":{const e=i;let t="",r="";for(let n=0;n<e.header.length;n++)r+=this.renderer.tablecell(this.parseInline(e.header[n].tokens),{header:!0,align:e.align[n]});t+=this.renderer.tablerow(r);let a="";for(let n=0;n<e.rows.length;n++){const t=e.rows[n];r="";for(let n=0;n<t.length;n++)r+=this.renderer.tablecell(this.parseInline(t[n].tokens),{header:!1,align:e.align[n]});a+=this.renderer.tablerow(r)}n+=this.renderer.table(t,a);continue}case"blockquote":{const e=i,t=this.parse(e.tokens);n+=this.renderer.blockquote(t);continue}case"list":{const e=i,t=e.ordered,r=e.start,a=e.loose;let s="";for(let n=0;n<e.items.length;n++){const t=e.items[n],r=t.checked,i=t.task;let o="";if(t.task){const e=this.renderer.checkbox(!!r);a?t.tokens.length>0&&"paragraph"===t.tokens[0].type?(t.tokens[0].text=e+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=e+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",text:e+" "}):o+=e+" "}o+=this.parse(t.tokens,a),s+=this.renderer.listitem(o,i,!!r)}n+=this.renderer.list(s,t,r);continue}case"html":{const e=i;n+=this.renderer.html(e.text,e.block);continue}case"paragraph":{const e=i;n+=this.renderer.paragraph(this.parseInline(e.tokens));continue}case"text":{let a=i,s=a.tokens?this.parseInline(a.tokens):a.text;for(;r+1<e.length&&"text"===e[r+1].type;)a=e[++r],s+="\n"+(a.tokens?this.parseInline(a.tokens):a.text);n+=t?this.renderer.paragraph(s):s;continue}default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=e||"";continue}}switch(i.type){case"escape":{const e=i;n+=t.text(e.text);break}case"html":{const e=i;n+=t.html(e.text);break}case"link":{const e=i;n+=t.link(e.href,e.title,this.parseInline(e.tokens,t));break}case"image":{const e=i;n+=t.image(e.href,e.title,e.text);break}case"strong":{const e=i;n+=t.strong(this.parseInline(e.tokens,t));break}case"em":{const e=i;n+=t.em(this.parseInline(e.tokens,t));break}case"codespan":{const e=i;n+=t.codespan(e.text);break}case"br":n+=t.br();break;case"del":{const e=i;n+=t.del(this.parseInline(e.tokens,t));break}case"text":{const e=i;n+=t.text(e.text);break}default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class EB{constructor(e){(0,Ig.A)(this,"options",void 0),this.options=e||bI}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}(0,Ig.A)(EB,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var CB=new WeakSet,MB=new WeakSet;function TB(e,t){return(n,r)=>{const i=(0,c.A)({},r),a=(0,c.A)((0,c.A)({},this.defaults),i);!0===this.defaults.async&&!1===i.async&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);const s=yI(this,MB,kB).call(this,!!a.silent,!!a.async);if("undefined"===typeof n||null===n)return s(new Error("marked(): input parameter is undefined or null"));if("string"!==typeof n)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then((t=>e(t,a))).then((e=>a.hooks?a.hooks.processAllTokens(e):e)).then((e=>a.walkTokens?Promise.all(this.walkTokens(e,a.walkTokens)).then((()=>e)):e)).then((e=>t(e,a))).then((e=>a.hooks?a.hooks.postprocess(e):e)).catch(s);try{a.hooks&&(n=a.hooks.preprocess(n));let r=e(n,a);a.hooks&&(r=a.hooks.processAllTokens(r)),a.walkTokens&&this.walkTokens(r,a.walkTokens);let i=t(r,a);return a.hooks&&(i=a.hooks.postprocess(i)),i}catch(Zie){return s(Zie)}}}function kB(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+TI(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}const PB=new class{constructor(){vI(this,MB),vI(this,CB),(0,Ig.A)(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),(0,Ig.A)(this,"options",this.setOptions),(0,Ig.A)(this,"parse",yI(this,CB,TB).call(this,wB.lex,AB.parse)),(0,Ig.A)(this,"parseInline",yI(this,CB,TB).call(this,wB.lexInline,AB.parseInline)),(0,Ig.A)(this,"Parser",AB),(0,Ig.A)(this,"Renderer",SB),(0,Ig.A)(this,"TextRenderer",_B),(0,Ig.A)(this,"Lexer",wB),(0,Ig.A)(this,"Tokenizer",OI),(0,Ig.A)(this,"Hooks",EB),this.use(...arguments)}walkTokens(e,t){let n=[];for(const i of e)switch(n=n.concat(t.call(this,i)),i.type){case"table":{const e=i;for(const r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(const r of e.rows)for(const e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=i;n=n.concat(this.walkTokens(e.items,t));break}default:{var r;const e=i;null!==(r=this.defaults.extensions)&&void 0!==r&&null!==(r=r.childTokens)&&void 0!==r&&r[e.type]?this.defaults.extensions.childTokens[e.type].forEach((r=>{const i=e[r].flat(1/0);n=n.concat(this.walkTokens(i,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(){const e=this.defaults.extensions||{renderers:{},childTokens:{}};for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((t=>{const n=(0,c.A)({},t);if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){const n=e.renderers[t.name];e.renderers[t.name]=n?function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];let a=t.renderer.apply(this,r);return!1===a&&(a=n.apply(this,r)),a}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");const n=e[t.level];n?n.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),n.extensions=e),t.renderer){const e=this.defaults.renderer||new SB(this.defaults);for(const n in t.renderer){if(!(n in e))throw new Error("renderer '".concat(n,"' does not exist"));if("options"===n)continue;const r=n,i=t.renderer[r],a=e[r];e[r]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let s=i.apply(e,n);return!1===s&&(s=a.apply(e,n)),s||""}}n.renderer=e}if(t.tokenizer){const e=this.defaults.tokenizer||new OI(this.defaults);for(const n in t.tokenizer){if(!(n in e))throw new Error("tokenizer '".concat(n,"' does not exist"));if(["options","rules","lexer"].includes(n))continue;const r=n,i=t.tokenizer[r],a=e[r];e[r]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let s=i.apply(e,n);return!1===s&&(s=a.apply(e,n)),s}}n.tokenizer=e}if(t.hooks){const e=this.defaults.hooks||new EB;for(const n in t.hooks){if(!(n in e))throw new Error("hook '".concat(n,"' does not exist"));if("options"===n)continue;const r=n,i=t.hooks[r],a=e[r];EB.passThroughHooks.has(n)?e[r]=t=>{if(this.defaults.async)return Promise.resolve(i.call(e,t)).then((t=>a.call(e,t)));const n=i.call(e,t);return a.call(e,n)}:e[r]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let s=i.apply(e,n);return!1===s&&(s=a.apply(e,n)),s}}n.hooks=e}if(t.walkTokens){const e=this.defaults.walkTokens,r=t.walkTokens;n.walkTokens=function(t){let n=[];return n.push(r.call(this,t)),e&&(n=n.concat(e.call(this,t))),n}}this.defaults=(0,c.A)((0,c.A)({},this.defaults),n)})),this}setOptions(e){return this.defaults=(0,c.A)((0,c.A)({},this.defaults),e),this}lexer(e,t){return wB.lex(e,null!==t&&void 0!==t?t:this.defaults)}parser(e,t){return AB.parse(e,null!==t&&void 0!==t?t:this.defaults)}};function RB(e,t){return PB.parse(e,t)}RB.options=RB.setOptions=function(e){return PB.setOptions(e),RB.defaults=PB.defaults,wI(RB.defaults),RB},RB.getDefaults=xI,RB.defaults=bI,RB.use=function(){return PB.use(...arguments),RB.defaults=PB.defaults,wI(RB.defaults),RB},RB.walkTokens=function(e,t){return PB.walkTokens(e,t)},RB.parseInline=PB.parseInline,RB.Parser=AB,RB.parser=AB.parse,RB.Renderer=SB,RB.TextRenderer=_B,RB.Lexer=wB,RB.lexer=wB.lex,RB.Tokenizer=OI,RB.Hooks=EB,RB.parse=RB;RB.options,RB.setOptions,RB.use,RB.walkTokens,RB.parseInline,AB.parse,wB.lex;const DB=e=>{let{isOpen:t,onClose:n,socket:i,user:a,receiver:s,conversationId:o,callType:l="audio",mode:c="outgoing"}=e;const u=(0,r.useRef)(null),d=(0,r.useRef)(null),h=(0,r.useRef)(null),p=(0,r.useRef)(null),f=(0,r.useRef)(null),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!0),[w,S]=(0,r.useState)(!0),[_,A]=(0,r.useState)(!1),E=m_(),C=()=>{try{var e,t,n,r;null===(e=u.current)||void 0===e||null===(t=e.getSenders)||void 0===t||t.call(e).forEach((e=>e.track&&e.track.stop())),null===(n=u.current)||void 0===n||null===(r=n.close)||void 0===r||r.call(n),u.current=null}catch(s){}try{var i,a;null===(i=d.current)||void 0===i||null===(a=i.getTracks)||void 0===a||a.call(i).forEach((e=>e.stop()))}catch(o){}y(!1),g(!1)},M=async()=>{const e=new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302"]}]});e.onicecandidate=e=>{e.candidate&&i.emit("ice-candidate",{toUserId:s._id,fromUserId:a._id,candidate:e.candidate})},e.ontrack=e=>{h.current||(h.current=new MediaStream),h.current.addTrack(e.track),f.current&&(f.current.srcObject=h.current)},u.current=e},T=async()=>{const e="video"===l?{video:!0,audio:!0}:{audio:!0},t=await navigator.mediaDevices.getUserMedia(e);d.current=t,t.getTracks().forEach((e=>u.current.addTrack(e,t))),p.current&&(p.current.srcObject=t)},k=async()=>{g(!0),await M(),await T()},P=()=>{i.emit("end-call",{toUserId:s._id,fromUserId:a._id}),C(),n()};return(0,r.useEffect)((()=>{if(!i)return;const e=async e=>{let{fromUserId:t,sdp:n}=e;if(t!==s._id)return;u.current||await k(),await u.current.setRemoteDescription(new RTCSessionDescription(n));const r=await u.current.createAnswer();await u.current.setLocalDescription(r),i.emit("call-answer",{toUserId:t,fromUserId:a._id,sdp:r}),y(!0),g(!1)},t=async e=>{let{fromUserId:t,sdp:n}=e;t===s._id&&u.current&&(await u.current.setRemoteDescription(new RTCSessionDescription(n)),y(!0),g(!1))},r=async e=>{let{fromUserId:t,candidate:n}=e;if(t===s._id)try{var r;await(null===(r=u.current)||void 0===r?void 0:r.addIceCandidate(new RTCIceCandidate(n)))}catch(Zie){console.error("ICE add error",Zie)}},o=()=>{C(),n()},l=e=>{let{reason:t}=e;E({title:"User unavailable",description:t||"",status:"info",duration:2e3}),C(),n()};return i.on("call-offer",e),i.on("call-answer",t),i.on("ice-candidate",r),i.on("end-call",o),i.on("user-unavailable",l),i.on("call-declined",o),()=>{i.off("call-offer",e),i.off("call-answer",t),i.off("ice-candidate",r),i.off("end-call",o),i.off("user-unavailable",l),i.off("call-declined",o)}}),[t]),(0,r.useEffect)((()=>{t&&"outgoing"===c&&(async()=>{g(!0),await M(),await T();const e=await u.current.createOffer();await u.current.setLocalDescription(e),i.emit("start-call",{toUserId:s._id,fromUserId:a._id,conversationId:o,callType:l}),i.emit("call-offer",{toUserId:s._id,fromUserId:a._id,sdp:e})})(),t||C()}),[t]),(0,ur.jsxs)(Nm,{isOpen:t,onClose:P,size:"xl",children:[(0,ur.jsx)(Km,{backdropFilter:"blur(6px)"}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"incoming"===c?"Incoming ".concat(l," call"):"Calling ".concat((null===s||void 0===s?void 0:s.name)||"...")}),(0,ur.jsx)(Zy,{children:(0,ur.jsxs)(ex,{spacing:4,children:["video"===l?(0,ur.jsxs)(ao,{w:"100%",spacing:2,children:[(0,ur.jsx)("video",{ref:p,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"40%",borderRadius:8}}),(0,ur.jsx)("video",{ref:f,autoPlay:!0,playsInline:!0,style:{width:"60%",borderRadius:8}})]}):(0,ur.jsx)(Jr,{children:v?"Voice connected":m?"Connecting...":"Ringing..."}),v&&(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>{var e,t;const n=null===(e=d.current)||void 0===e||null===(t=e.getAudioTracks)||void 0===t?void 0:t.call(e)[0];n&&(n.enabled=!n.enabled,b(n.enabled))},children:x?"Mute":"Unmute"}),"video"===l&&(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>{var e,t;const n=null===(e=d.current)||void 0===e||null===(t=e.getVideoTracks)||void 0===t?void 0:t.call(e)[0];n&&(n.enabled=!n.enabled,S(n.enabled))},children:w?"Camera Off":"Camera On"}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{if(!_){var e,t;const n=(await navigator.mediaDevices.getDisplayMedia({video:!0})).getVideoTracks()[0],r=null===(e=u.current)||void 0===e||null===(t=e.getSenders)||void 0===t?void 0:t.call(e).find((e=>e.track&&"video"===e.track.kind));await(null===r||void 0===r?void 0:r.replaceTrack(n)),n.onended=async()=>{var e,t;const n=null===(e=d.current)||void 0===e||null===(t=e.getVideoTracks)||void 0===t?void 0:t.call(e)[0];await(null===r||void 0===r?void 0:r.replaceTrack(n||null)),A(!1)},A(!0)}}catch(Zie){console.error(Zie)}},children:_?"Sharing...":"Share Screen"})]})]})]})}),(0,ur.jsx)(nx,{children:"incoming"!==c||v?(0,ur.jsx)(zr,{colorScheme:"red",onClick:P,children:"End"}):(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{colorScheme:"green",onClick:k,children:"Accept"}),(0,ur.jsx)(zr,{variant:"outline",onClick:()=>{i.emit("decline-call",{toUserId:s._id,fromUserId:a._id}),C(),n()},children:"Decline"})]})})]})]})},IB=()=>{const e=(0,r.useContext)(GS),{receiver:t,setReceiver:n,activeChatId:i,setActiveChatId:a,setMessageList:s,isChatLoading:o,hostName:l,socket:u}=e,{isOpen:d,onOpen:h,onClose:p}=g(),f=g(),m=g(),v=m_(),y=g(),[x,b]=r.useState([]),w=async()=>{try{const e=await fetch("".concat(l,"/conversation/").concat(i,"/pins"),{headers:{"auth-token":localStorage.getItem("token")}}),t=await e.json();b(t)}catch(e){}},S=(0,r.useCallback)((async()=>{if(t._id)try{const e=await fetch("".concat(l,"/user/online-status/").concat(t._id),{method:"GET",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")}}),r=await e.json();n((e=>(0,c.A)((0,c.A)({},e),{},{isOnline:r.isOnline})))}catch(e){}}),[l,t._id,n]);return(0,r.useEffect)((()=>{S()}),[S]),(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsxs)(Wr,{w:"100%",alignItems:"center",p:2,gap:2,position:"relative",zIndex:1,children:[(0,ur.jsx)(zr,{"aria-label":"Back",variant:"ghost",colorScheme:"purple",size:"sm",borderRadius:"md",onClick:()=>{u.emit("leave-chat",i),a(""),s([]),n({})},display:{base:"inline-flex",md:"none"},children:(0,ur.jsx)(dD,{})}),(0,ur.jsx)($R,{label:"View Profile",children:(0,ur.jsx)(pr,{w:"100%",mr:0,p:2,h:"max-content",borderRadius:"md",onClick:h,cursor:"pointer",bg:{base:"whiteAlpha.200",md:"transparent"},children:o?(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsxs)(Wr,{children:[(0,ur.jsx)(kD,{size:"10",mx:2}),(0,ur.jsx)(MD,{height:"20px",width:"250px",borderRadius:"md",my:2})]})}):(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsxs)(Wr,{gap:2,alignItems:"center",children:[(0,ur.jsx)(Tx,{borderRadius:"full",boxSize:"40px",src:t.profilePic,alt:""}),(0,ur.jsxs)(io,{justifyContent:"center",m:0,p:0,lineHeight:1,gap:0,textAlign:"left",children:[(0,ur.jsx)(Jr,{mx:1,my:t.isOnline?0:2,fontSize:"2xl",children:t.name}),t.isOnline?(0,ur.jsxs)(Jr,{mx:1,fontSize:"small",as:"span",children:[(0,ur.jsx)(pr,{as:"span",w:"8px",h:"8px",bg:"green.500",display:"inline-block",borderRadius:"full",mx:1}),"active now"]}):(0,ur.jsx)(Jr,{my:0,mx:1,fontSize:"xx-small",children:(e=>{var t="last seen ";return new Date(e).toDateString()===(new Date).toDateString()?t+="today ":new Date(e).toDateString()===new Date((new Date).setDate((new Date).getDate()-1)).toDateString()?t+="yesterday ":t+="on ".concat(new Date(e).toLocaleDateString()," "),t+="at ".concat(new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})(t.lastSeen)})]}),(0,ur.jsxs)(ao,{ml:4,onClick:e=>e.stopPropagation(),children:[(0,ur.jsxs)(Xs,{isOpen:y.isOpen,children:[(0,ur.jsx)($R,{label:"Pinned",children:(0,ur.jsx)(Ks,{as:zr,size:"sm",onClick:()=>{y.onToggle(),y.isOpen||w()},children:"\ud83d\udccd"})}),(0,ur.jsxs)(Xf,{maxH:"260px",overflowY:"auto",children:[0===x.length&&(0,ur.jsx)(em,{isDisabled:!0,children:"No pins"}),x.map((e=>(0,ur.jsx)(em,{onClick:()=>{return t=e._id,void window.dispatchEvent(new CustomEvent("jumpToMessage",{detail:t}));var t},children:e.text&&e.text.slice(0,40)||(e.imageUrl?"\ud83d\udcf7 Photo":e.audioUrl?"\ud83c\udfa4 Voice":e.videoUrl?"\ud83c\udfac Video":"Message")},e._id))),x.length>0&&(0,ur.jsx)(em,{onClick:()=>(async e=>{try{await fetch("".concat(l,"/conversation/unpin"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({conversationId:i,messageId:e})}),v({title:"Unpinned",duration:1e3}),w()}catch(t){}})(x[0]._id),children:"Unpin latest"})]})]}),(0,ur.jsx)($R,{label:"Pin latest",children:(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{var t,n,r;if(!(await fetch("".concat(l,"/conversation/pin"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({conversationId:i,messageId:null===(t=e.messageList)||void 0===t||null===(n=t.slice(-1))||void 0===n||null===(r=n[0])||void 0===r?void 0:r._id})})).ok)throw new Error("Failed to pin");v({title:"Pinned",status:"success",duration:1200})}catch(Zie){v({title:Zie.message,status:"error"})}},children:"\ud83d\udccc"})}),(0,ur.jsx)($R,{label:"Voice Call",children:(0,ur.jsx)(zr,{size:"sm",onClick:f.onOpen,children:"\ud83d\udcde"})}),(0,ur.jsx)($R,{label:"Video Call",children:(0,ur.jsx)(zr,{size:"sm",onClick:m.onOpen,children:"\ud83c\udfa5"})})]})]})})})})]}),(0,ur.jsx)(g_,{isOpen:d,onClose:p,user:t}),(0,ur.jsx)(DB,{isOpen:f.isOpen,onClose:f.onClose,socket:u,user:e.user,receiver:t,conversationId:i,callType:"audio",mode:"outgoing"}),(0,ur.jsx)(DB,{isOpen:m.isOpen,onClose:m.onClose,socket:u,user:e.user,receiver:t,conversationId:i,callType:"video",mode:"outgoing"})]})},BB=e=>{const t=(0,r.useRef)(null),[n,i]=(0,r.useState)(null),[a,s]=(0,r.useState)("");return(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsxs)(Nm,{isOpen:e.isOpen,onClose:e.onClose,isCentered:!0,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsxs)(Uy,{display:"flex",justifyContent:"space-between",children:[(0,ur.jsx)(Jr,{w:"max-content",children:"Send media"}),(0,ur.jsx)(Xy,{onClick:e.onClose})]}),(0,ur.jsxs)(Zy,{children:[(0,ur.jsx)($y,{type:"file",display:"none",ref:t,onChange:e=>{const n=e.target.files[0];n&&(n.type.startsWith("image/")||n.type.startsWith("video/"))?i(n):(t.current.value=null,i(null),alert("Please select a valid image or video file."))}}),(0,ur.jsxs)(pr,{display:"flex",justifyContent:"space-between",children:[(0,ur.jsxs)(Wr,{children:[(0,ur.jsx)(zr,{mr:3,onClick:()=>{t.current.click()},children:(0,ur.jsx)(Jr,{children:"Choose media"})}),n&&(0,ur.jsxs)(pr,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,ur.jsx)(Jr,{children:n.name.length>10?n.name.substring(0,10)+"...":n.name}),(0,ur.jsx)(Xy,{onClick:()=>{i(null)},ml:2})]})]}),(0,ur.jsxs)(zr,{onClick:t=>{e.handleSendMessage(t,a,n),e.onClose()},isDisabled:!n,size:"md",children:["send",(0,ur.jsx)(fI,{})]})]}),(0,ur.jsx)($y,{type:"text",placeholder:"Add a message...",mt:3,onChange:e=>{s(e.target.value)}})]})]})]})})},jB=e=>{let{isOpen:t,onClose:n,hostName:i,activeChatId:a,user:s,token:o,onRecorded:l}=e;const c=(0,r.useRef)(null),u=(0,r.useRef)([]),[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),m=m_();(0,r.useEffect)((()=>{t||g()}),[t]);const g=()=>{try{c.current&&("inactive"!==c.current.state&&c.current.stop(),c.current.stream.getTracks().forEach((e=>e.stop())))}catch(e){}c.current=null,u.current=[],f(""),h(!1)};return(0,ur.jsxs)(Nm,{isOpen:t,onClose:()=>{g(),n()},isCentered:!0,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"Record voice message"}),(0,ur.jsx)(Zy,{children:p?(0,ur.jsx)("audio",{src:p,controls:!0,style:{width:"100%"}}):(0,ur.jsx)(Jr,{children:d?"Recording...":"Press Start to record"})}),(0,ur.jsxs)(nx,{children:[!d&&!p&&(0,ur.jsx)(zr,{colorScheme:"purple",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);c.current=t,u.current=[],t.ondataavailable=e=>{e.data&&e.data.size>0&&u.current.push(e.data)},t.onstop=async()=>{const e=new Blob(u.current,{type:"audio/webm"});f(URL.createObjectURL(e))},t.start(),h(!0)}catch(Zie){m({title:"Microphone access denied",status:"error",duration:3e3,isClosable:!0})}},children:"Start"}),d&&(0,ur.jsx)(zr,{colorScheme:"red",onClick:()=>{c.current&&"inactive"!==c.current.state&&(c.current.stop(),c.current.stream.getTracks().forEach((e=>e.stop()))),h(!1)},children:"Stop"}),!d&&p&&(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(zr,{mr:3,onClick:async()=>{try{if(!p)return;const e=await fetch(p),t=await e.blob(),r=new File([t],"voice-note.webm",{type:t.type||"audio/webm"}),c=new FormData;c.append("file",r),c.append("conversationId",a),c.append("sender",s._id),c.append("text","");const u=await fetch("".concat(i,"/message/send"),{method:"POST",headers:{"auth-token":o},body:c});if(!u.ok)throw new Error("Failed to upload voice message");const d=await u.json();null===l||void 0===l||l(d),g(),n()}catch(Zie){m({title:Zie.message,status:"error",duration:3e3,isClosable:!0})}},colorScheme:"purple",children:"Send"}),(0,ur.jsx)(zr,{variant:"ghost",onClick:g,children:"Discard"})]})]})]})]})},FB=()=>(0,ur.jsxs)(pr,{m:5,w:"fit-content",h:"max-content",mx:"auto",my:"50px",alignSelf:"center",children:[" ",(0,ur.jsx)(Br,{size:"xl"})]});function LB(e,t){return function(){return e.apply(t,arguments)}}const{toString:OB}=Object.prototype,{getPrototypeOf:NB}=Object,zB=(e=>t=>{const n=OB.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),UB=e=>(e=e.toLowerCase(),t=>zB(t)===e),HB=e=>t=>typeof t===e,{isArray:GB}=Array,VB=HB("undefined");const WB=UB("ArrayBuffer");const qB=HB("string"),XB=HB("function"),JB=HB("number"),YB=e=>null!==e&&"object"===typeof e,KB=e=>{if("object"!==zB(e))return!1;const t=NB(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ZB=UB("Date"),QB=UB("File"),$B=UB("Blob"),ej=UB("FileList"),tj=UB("URLSearchParams"),[nj,rj,ij,aj]=["ReadableStream","Request","Response","Headers"].map(UB);function sj(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),GB(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let s;for(n=0;n<a;n++)s=r[n],t.call(null,e[s],s,e)}}function oj(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const lj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,cj=e=>!VB(e)&&e!==lj;const uj=(dj="undefined"!==typeof Uint8Array&&NB(Uint8Array),e=>dj&&e instanceof dj);var dj;const hj=UB("HTMLFormElement"),pj=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),fj=UB("RegExp"),mj=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};sj(n,((n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)},gj="abcdefghijklmnopqrstuvwxyz",vj="0123456789",yj={DIGIT:vj,ALPHA:gj,ALPHA_DIGIT:gj+gj.toUpperCase()+vj};const xj=UB("AsyncFunction"),bj=(wj="function"===typeof setImmediate,Sj=XB(lj.postMessage),wj?setImmediate:Sj?((e,t)=>(lj.addEventListener("message",(n=>{let{source:r,data:i}=n;r===lj&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),lj.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var wj,Sj;const _j="undefined"!==typeof queueMicrotask?queueMicrotask.bind(lj):"undefined"!==typeof process&&process.nextTick||bj,Aj={isArray:GB,isArrayBuffer:WB,isBuffer:function(e){return null!==e&&!VB(e)&&null!==e.constructor&&!VB(e.constructor)&&XB(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||XB(e.append)&&("formdata"===(t=zB(e))||"object"===t&&XB(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&WB(e.buffer),t},isString:qB,isNumber:JB,isBoolean:e=>!0===e||!1===e,isObject:YB,isPlainObject:KB,isReadableStream:nj,isRequest:rj,isResponse:ij,isHeaders:aj,isUndefined:VB,isDate:ZB,isFile:QB,isBlob:$B,isRegExp:fj,isFunction:XB,isStream:e=>YB(e)&&XB(e.pipe),isURLSearchParams:tj,isTypedArray:uj,isFileList:ej,forEach:sj,merge:function e(){const{caseless:t}=cj(this)&&this||{},n={},r=(r,i)=>{const a=t&&oj(n,i)||i;KB(n[a])&&KB(r)?n[a]=e(n[a],r):KB(r)?n[a]=e({},r):GB(r)?n[a]=r.slice():n[a]=r};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&sj(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return sj(t,((t,r)=>{n&&XB(t)?e[r]=LB(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,s;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],r&&!r(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==n&&NB(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:zB,kindOfTest:UB,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(GB(e))return e;let t=e.length;if(!JB(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:hj,hasOwnProperty:pj,hasOwnProp:pj,reduceDescriptors:mj,freezeMethods:e=>{mj(e,((t,n)=>{if(XB(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];XB(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return GB(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:oj,global:lj,isContextDefined:cj,ALPHABET:yj,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yj.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&XB(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(YB(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=GB(e)?[]:{};return sj(e,((e,t)=>{const a=n(e,r+1);!VB(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:xj,isThenable:e=>e&&(YB(e)||XB(e))&&XB(e.then)&&XB(e.catch),setImmediate:bj,asap:_j};function Ej(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Aj.inherits(Ej,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Aj.toJSONObject(this.config),code:this.code,status:this.status}}});const Cj=Ej.prototype,Mj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Mj[e]={value:e}})),Object.defineProperties(Ej,Mj),Object.defineProperty(Cj,"isAxiosError",{value:!0}),Ej.from=(e,t,n,r,i,a)=>{const s=Object.create(Cj);return Aj.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ej.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const Tj=Ej;function kj(e){return Aj.isPlainObject(e)||Aj.isArray(e)}function Pj(e){return Aj.endsWith(e,"[]")?e.slice(0,-2):e}function Rj(e,t,n){return e?e.concat(t).map((function(e,t){return e=Pj(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Dj=Aj.toFlatObject(Aj,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Ij=function(e,t,n){if(!Aj.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Aj.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Aj.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,s=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Aj.isSpecCompliantForm(t);if(!Aj.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Aj.isDate(e))return e.toISOString();if(!o&&Aj.isBlob(e))throw new Tj("Blob is not supported. Use a Buffer instead.");return Aj.isArrayBuffer(e)||Aj.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"===typeof e)if(Aj.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Aj.isArray(e)&&function(e){return Aj.isArray(e)&&!e.some(kj)}(e)||(Aj.isFileList(e)||Aj.endsWith(n,"[]"))&&(o=Aj.toArray(e)))return n=Pj(n),o.forEach((function(e,r){!Aj.isUndefined(e)&&null!==e&&t.append(!0===s?Rj([n],r,a):null===s?n:n+"[]",l(e))})),!1;return!!kj(e)||(t.append(Rj(i,n,a),l(e)),!1)}const u=[],d=Object.assign(Dj,{defaultVisitor:c,convertValue:l,isVisitable:kj});if(!Aj.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Aj.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Aj.forEach(n,(function(n,a){!0===(!(Aj.isUndefined(n)||null===n)&&i.call(t,n,Aj.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])})),u.pop()}}(e),t};function Bj(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function jj(e,t){this._pairs=[],e&&Ij(e,this,t)}const Fj=jj.prototype;Fj.append=function(e,t){this._pairs.push([e,t])},Fj.toString=function(e){const t=e?function(t){return e.call(this,t,Bj)}:Bj;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Lj=jj;function Oj(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nj(e,t,n){if(!t)return e;const r=n&&n.encode||Oj;Aj.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(a=i?i(t,n):Aj.isURLSearchParams(t)?t.toString():new Lj(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const zj=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Aj.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Uj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hj={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Lj,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Gj="undefined"!==typeof window&&"undefined"!==typeof document,Vj="object"===typeof navigator&&navigator||void 0,Wj=Gj&&(!Vj||["ReactNative","NativeScript","NS"].indexOf(Vj.product)<0),qj="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Xj=Gj&&window.location.href||"http://localhost",Jj=(0,c.A)((0,c.A)({},e),Hj);const Yj=function(e){function t(e,n,r,i){let a=e[i++];if("__proto__"===a)return!0;const s=Number.isFinite(+a),o=i>=e.length;if(a=!a&&Aj.isArray(r)?r.length:a,o)return Aj.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!s;r[a]&&Aj.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],i)&&Aj.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}(r[a])),!s}if(Aj.isFormData(e)&&Aj.isFunction(e.entries)){const n={};return Aj.forEachEntry(e,((e,r)=>{t(function(e){return Aj.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Kj={transitional:Uj,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Aj.isObject(e);i&&Aj.isHTMLForm(e)&&(e=new FormData(e));if(Aj.isFormData(e))return r?JSON.stringify(Yj(e)):e;if(Aj.isArrayBuffer(e)||Aj.isBuffer(e)||Aj.isStream(e)||Aj.isFile(e)||Aj.isBlob(e)||Aj.isReadableStream(e))return e;if(Aj.isArrayBufferView(e))return e.buffer;if(Aj.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ij(e,new Jj.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Jj.isNode&&Aj.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Aj.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ij(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Aj.isString(e))try{return(t||JSON.parse)(e),Aj.trim(e)}catch(Zie){if("SyntaxError"!==Zie.name)throw Zie}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Kj.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Aj.isResponse(e)||Aj.isReadableStream(e))return e;if(e&&Aj.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Zie){if(n){if("SyntaxError"===Zie.name)throw Tj.from(Zie,Tj.ERR_BAD_RESPONSE,this,null,this.response);throw Zie}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jj.classes.FormData,Blob:Jj.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Aj.forEach(["delete","get","head","post","put","patch"],(e=>{Kj.headers[e]={}}));const Zj=Kj,Qj=Aj.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$j=Symbol("internals");function eF(e){return e&&String(e).trim().toLowerCase()}function tF(e){return!1===e||null==e?e:Aj.isArray(e)?e.map(tF):String(e)}function nF(e,t,n,r,i){return Aj.isFunction(r)?r.call(this,t,n):(i&&(t=n),Aj.isString(t)?Aj.isString(r)?-1!==t.indexOf(r):Aj.isRegExp(r)?r.test(t):void 0:void 0)}class rF{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=eF(t);if(!i)throw new Error("header name must be a non-empty string");const a=Aj.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=tF(e))}const a=(e,t)=>Aj.forEach(e,((e,n)=>i(e,n,t)));if(Aj.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Aj.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Qj[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Aj.isHeaders(e))for(const[s,o]of e.entries())i(o,s,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=eF(e)){const n=Aj.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Aj.isFunction(t))return t.call(this,e,n);if(Aj.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=eF(e)){const n=Aj.findKey(this,e);return!(!n||void 0===this[n]||t&&!nF(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=eF(e)){const i=Aj.findKey(n,e);!i||t&&!nF(0,n[i],i,t)||(delete n[i],r=!0)}}return Aj.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!nF(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Aj.forEach(this,((r,i)=>{const a=Aj.findKey(n,i);if(a)return t[a]=tF(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=tF(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Aj.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Aj.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[$j]=this[$j]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=eF(e);t[r]||(!function(e,t){const n=Aj.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Aj.isArray(e)?e.forEach(r):r(e),this}}rF.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Aj.reduceDescriptors(rF.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Aj.freezeMethods(rF);const iF=rF;function aF(e,t){const n=this||Zj,r=t||n,i=iF.from(r.headers);let a=r.data;return Aj.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function sF(e){return!(!e||!e.__CANCEL__)}function oF(e,t,n){Tj.call(this,null==e?"canceled":e,Tj.ERR_CANCELED,t,n),this.name="CanceledError"}Aj.inherits(oF,Tj,{__CANCEL__:!0});const lF=oF;function cF(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Tj("Request failed with status code "+n.status,[Tj.ERR_BAD_REQUEST,Tj.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const uF=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,a=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[s];i||(i=l),n[a]=o,r[a]=l;let u=s,d=0;for(;u!==a;)d+=n[u++],u%=e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const dF=function(e,t){let n,r,i=0,a=1e3/t;const s=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=a?s(l,e):(n=l,r||(r=setTimeout((()=>{r=null,s(n)}),a-t)))},()=>n&&s(n)]},hF=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=uF(50,250);return dF((n=>{const a=n.loaded,s=n.lengthComputable?n.total:void 0,o=a-r,l=i(o);r=a;e({loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&a<=s?(s-a)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},pF=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},fF=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Aj.asap((()=>e(...n)))},mF=Jj.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Jj.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Jj.origin),Jj.navigator&&/(msie|trident)/i.test(Jj.navigator.userAgent)):()=>!0,gF=Jj.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const s=[e+"="+encodeURIComponent(t)];Aj.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Aj.isString(r)&&s.push("path="+r),Aj.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function vF(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const yF=e=>e instanceof iF?(0,c.A)({},e):e;function xF(e,t){t=t||{};const n={};function r(e,t,n,r){return Aj.isPlainObject(e)&&Aj.isPlainObject(t)?Aj.merge.call({caseless:r},e,t):Aj.isPlainObject(t)?Aj.merge({},t):Aj.isArray(t)?t.slice():t}function i(e,t,n,i){return Aj.isUndefined(t)?Aj.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function a(e,t){if(!Aj.isUndefined(t))return r(void 0,t)}function s(e,t){return Aj.isUndefined(t)?Aj.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,n)=>i(yF(e),yF(t),0,!0)};return Aj.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||i,s=a(e[r],t[r],r);Aj.isUndefined(s)&&a!==o||(n[r]=s)})),n}const bF=e=>{const t=xF({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=iF.from(o),t.url=Nj(vF(t.baseURL,t.url),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Aj.isFormData(r))if(Jj.hasStandardBrowserEnv||Jj.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Jj.hasStandardBrowserEnv&&(i&&Aj.isFunction(i)&&(i=i(t)),i||!1!==i&&mF(t.url))){const e=a&&s&&gF.read(s);e&&o.set(a,e)}return t},wF="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=bF(e);let i=r.data;const a=iF.from(r.headers).normalize();let s,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=iF.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());cF((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Tj("Request aborted",Tj.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Tj("Network Error",Tj.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Uj;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Tj(t,i.clarifyTimeoutError?Tj.ETIMEDOUT:Tj.ECONNABORTED,e,m)),m=null},void 0===i&&a.setContentType(null),"setRequestHeader"in m&&Aj.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Aj.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),p&&([l,u]=hF(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=hF(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new lF(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===Jj.protocols.indexOf(v)?n(new Tj("Unsupported protocol "+v+":",Tj.ERR_BAD_REQUEST,e)):m.send(i||null)}))},SF=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Tj?t:new lF(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,i(new Tj("timeout ".concat(t," of ms exceeded"),Tj.ETIMEDOUT))}),t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:o}=r;return o.unsubscribe=()=>Aj.asap(s),o}};function _F(e,t){this.v=e,this.k=t}function AF(e){return function(){return new EF(e.apply(this,arguments))}}function EF(e){var t,n;function r(t,n){try{var a=e[t](n),s=a.value,o=s instanceof _F;Promise.resolve(o?s.v:s).then((function(n){if(o){var l="return"===t?"return":"next";if(!s.k||n.done)return r(l,n);n=e[l](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,s){var o={key:e,arg:i,resolve:a,reject:s,next:null};n?n=n.next=o:(t=n=o,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function CF(e){return new _F(e,0)}function MF(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new _F(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function TF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new kF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function kF(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return kF=function(e){this.s=e,this.n=e.next},kF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new kF(e)}EF.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},EF.prototype.next=function(e){return this._invoke("next",e)},EF.prototype.throw=function(e){return this._invoke("throw",e)},EF.prototype.return=function(e){return this._invoke("return",e)};const PF=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},RF=function(){var e=AF((function*(e,t){var n,r=!1,i=!1;try{for(var a,s=TF(DF(e));r=!(a=yield CF(s.next())).done;r=!1){const e=a.value;yield*MF(TF(PF(e,t)))}}catch(Kie){i=!0,n=Kie}finally{try{r&&null!=s.return&&(yield CF(s.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),DF=function(){var e=AF((function*(e){if(e[Symbol.asyncIterator])return void(yield*MF(TF(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield CF(t.read());if(e)break;yield n}}finally{yield CF(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),IF=(e,t,n,r)=>{const i=RF(e,t);let a,s=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return o(),void e.close();let a=r.byteLength;if(n){let e=s+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(Kie){throw o(Kie),Kie}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},BF="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,jF=BF&&"function"===typeof ReadableStream,FF=BF&&("function"===typeof TextEncoder?(LF=new TextEncoder,e=>LF.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var LF;const OF=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Zie){return!1}},NF=jF&&OF((()=>{let e=!1;const t=new Request(Jj.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),zF=jF&&OF((()=>Aj.isReadableStream(new Response("").body))),UF={stream:zF&&(e=>e.body)};var HF;BF&&(HF=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!UF[e]&&(UF[e]=Aj.isFunction(HF[e])?t=>t[e]():(t,n)=>{throw new Tj("Response type '".concat(e,"' is not supported"),Tj.ERR_NOT_SUPPORT,n)})})));const GF=async(e,t)=>{const n=Aj.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Aj.isBlob(e))return e.size;if(Aj.isSpecCompliantForm(e)){const t=new Request(Jj.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Aj.isArrayBufferView(e)||Aj.isArrayBuffer(e)?e.byteLength:(Aj.isURLSearchParams(e)&&(e+=""),Aj.isString(e)?(await FF(e)).byteLength:void 0)})(t):n},VF=BF&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:p}=bF(e);u=u?(u+"").toLowerCase():"text";let f,m=SF([i,a&&a.toAbortSignal()],s);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(l&&NF&&"get"!==n&&"head"!==n&&0!==(v=await GF(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Aj.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=pF(v,hF(fF(l)));r=IF(n.body,65536,e,t)}}Aj.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,(0,c.A)((0,c.A)({},p),{},{signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0}));let a=await fetch(f);const s=zF&&("stream"===u||"response"===u);if(zF&&(o||s&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=Aj.toFiniteNumber(a.headers.get("content-length")),[n,r]=o&&pF(t,hF(fF(o),!0))||[];a=new Response(IF(a.body,65536,n,(()=>{r&&r(),g&&g()})),e)}u=u||"text";let y=await UF[Aj.findKey(UF,u)||"text"](a,e);return!s&&g&&g(),await new Promise(((t,n)=>{cF(t,n,{data:y,headers:iF.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:f})}))}catch(Kie){if(g&&g(),Kie&&"TypeError"===Kie.name&&/fetch/i.test(Kie.message))throw Object.assign(new Tj("Network Error",Tj.ERR_NETWORK,e,f),{cause:Kie.cause||Kie});throw Tj.from(Kie,Kie&&Kie.code,e,f)}}),WF={http:null,xhr:wF,fetch:VF};Aj.forEach(WF,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Zie){}Object.defineProperty(e,"adapterName",{value:t})}}));const qF=e=>"- ".concat(e),XF=e=>Aj.isFunction(e)||null===e||!1===e,JF=e=>{e=Aj.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!XF(n)&&(r=WF[(t=String(n)).toLowerCase()],void 0===r))throw new Tj("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+a]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(qF).join("\n"):" "+qF(e[0]):"as no adapter specified";throw new Tj("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function YF(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lF(null,e)}function KF(e){YF(e),e.headers=iF.from(e.headers),e.data=aF.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return JF(e.adapter||Zj.adapter)(e).then((function(t){return YF(e),t.data=aF.call(e,e.transformResponse,t),t.headers=iF.from(t.headers),t}),(function(t){return sF(t)||(YF(e),t&&t.response&&(t.response.data=aF.call(e,e.transformResponse,t.response),t.response.headers=iF.from(t.response.headers))),Promise.reject(t)}))}const ZF="1.7.9",QF={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{QF[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const $F={};QF.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new Tj(r(i," has been removed"+(t?" in "+t:"")),Tj.ERR_DEPRECATED);return t&&!$F[i]&&($F[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},QF.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const eL={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Tj("options must be an object",Tj.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],s=t[a];if(s){const t=e[a],n=void 0===t||s(t,a,e);if(!0!==n)throw new Tj("option "+a+" must be "+n,Tj.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Tj("Unknown option "+a,Tj.ERR_BAD_OPTION)}},validators:QF},tL=eL.validators;class nL{constructor(e){this.defaults=e,this.interceptors={request:new zj,response:new zj}}async request(e,t){try{return await this._request(e,t)}catch(Kie){if(Kie instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{Kie.stack?n&&!String(Kie.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(Kie.stack+="\n"+n):Kie.stack=n}catch(Zie){}}throw Kie}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=xF(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&eL.assertOptions(n,{silentJSONParsing:tL.transitional(tL.boolean),forcedJSONParsing:tL.transitional(tL.boolean),clarifyTimeoutError:tL.transitional(tL.boolean)},!1),null!=r&&(Aj.isFunction(r)?t.paramsSerializer={serialize:r}:eL.assertOptions(r,{encode:tL.function,serialize:tL.function},!0)),eL.assertOptions(t,{baseUrl:tL.spelling("baseURL"),withXsrfToken:tL.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&Aj.merge(i.common,i[t.method]);i&&Aj.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=iF.concat(a,i);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[KF.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=KF.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Nj(vF((e=xF(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Aj.forEach(["delete","get","head","options"],(function(e){nL.prototype[e]=function(t,n){return this.request(xF(n||{},{method:e,url:t,data:(n||{}).data}))}})),Aj.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(xF(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}nL.prototype[e]=t(),nL.prototype[e+"Form"]=t(!0)}));const rL=nL;class iL{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new lF(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new iL((function(t){e=t}));return{token:t,cancel:e}}}const aL=iL;const sL={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sL).forEach((e=>{let[t,n]=e;sL[n]=t}));const oL=sL;const lL=function e(t){const n=new rL(t),r=LB(rL.prototype.request,n);return Aj.extend(r,rL.prototype,n,{allOwnKeys:!0}),Aj.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(xF(t,n))},r}(Zj);lL.Axios=rL,lL.CanceledError=lF,lL.CancelToken=aL,lL.isCancel=sF,lL.VERSION=ZF,lL.toFormData=Ij,lL.AxiosError=Tj,lL.Cancel=lL.CanceledError,lL.all=function(e){return Promise.all(e)},lL.spread=function(e){return function(t){return e.apply(null,t)}},lL.isAxiosError=function(e){return Aj.isObject(e)&&!0===e.isAxiosError},lL.mergeConfig=xF,lL.AxiosHeaders=iF,lL.formToJSON=e=>Yj(Aj.isHTMLForm(e)?new FormData(e):e),lL.getAdapter=JF,lL.HttpStatusCode=oL,lL.default=lL;const cL=lL;var uL=Sx({d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z",displayName:"CopyIcon"}),dL=Sx({displayName:"DeleteIcon",path:(0,ur.jsx)("g",{fill:"currentColor",children:(0,ur.jsx)("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})}),hL=Sx({displayName:"CheckCircleIcon",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"});const pL=e=>(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsxs)(Nm,{isOpen:e.isOpen,onClose:e.onClose,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"Are you sure you want to delete this message?"}),(0,ur.jsx)(Yy,{}),(0,ur.jsxs)(Zy,{children:[(0,ur.jsx)(zr,{onClick:()=>e.handleDeleteMessage(2),m:1,children:"Delete from everyone"}),(0,ur.jsx)(zr,{onClick:()=>e.handleDeleteMessage(1),colorScheme:"purple",m:1,children:"Delete from Me"})]})]})]})}),fL=e=>{var t;let{message:n,user:i,receiver:a,markdownToHtml:s,scrollbarconfig:o,socket:l,activeChatId:c,removeMessageFromList:u,toast:d,hostName:h,conversations:p=[]}=e;const f=n.senderId===i._id,m="".concat(new Date(n.createdAt).getHours(),":").concat(new Date(n.createdAt).getMinutes()),[v,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[_,A]=(0,r.useState)(n.text||""),E=g(),[C,M]=(0,r.useState)(!1),[T,k]=(0,r.useState)(""),[P,R]=(0,r.useState)(""),{isOpen:D,onOpen:I,onClose:B}=g(),j=()=>{navigator.clipboard.writeText(n.text).then((()=>{d({duration:1e3,render:()=>(0,ur.jsx)(pr,{color:"white",p:3,bg:"purple.300",borderRadius:"lg",children:"Message copied to clipboard!!"})})}))};return(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsxs)(Wr,{justify:f?"end":"start",mx:2,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),id:"msg-".concat(n._id),children:[f&&v&&(0,ur.jsxs)(pr,{margin:2,display:"flex",children:[(0,ur.jsx)($R,{label:"Copy",placement:"top",children:(0,ur.jsx)(zr,{size:"sm",variant:"ghost",mr:2,onClick:j,borderRadius:"md",children:(0,ur.jsx)(uL,{})})}),(0,ur.jsx)($R,{label:"Delete",placement:"top",children:(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:e=>{e.preventDefault(),I()},borderRadius:"md",children:(0,ur.jsx)(dL,{})})})]}),(0,ur.jsxs)(Wr,{w:"max-content",position:"relative",children:[!f&&(null===a||void 0===a?void 0:a.profilePic)&&(0,ur.jsx)(Tx,{borderRadius:"50%",src:a.profilePic,alt:"Sender",w:"20px",h:"20px",mr:1,alignSelf:"center"}),(0,ur.jsxs)(io,{spacing:0,position:"relative",children:[n.replyTo&&(0,ur.jsxs)(pr,{my:1,p:2,borderRadius:10,bg:f?"purple.200":"blue.200",mx:2,color:"white",w:"max-content",maxW:"60vw",alignSelf:f?"flex-end":"flex-start",children:["Replying to #",String(n.replyTo).slice(-6)]}),(0,ur.jsxs)(pr,{alignSelf:f?"flex-end":"flex-start",position:"relative",my:1,p:2,borderRadius:10,bg:f?"purple.500":"blue.500",color:"white",w:"max-content",maxW:"60vw",boxShadow:"sm",opacity:.95,children:[(n.imageurl||n.imageUrl)&&(0,ur.jsx)(Tx,{src:n.imageurl||n.imageUrl,alt:"loading...",w:"200px",maxW:"40vw",borderRadius:"10px",mb:2,cursor:"zoom-in",onClick:E.onOpen}),n.audioUrl&&(0,ur.jsx)("audio",{src:n.audioUrl,controls:!0,style:{width:"240px",maxWidth:"50vw"}}),n.videoUrl&&(0,ur.jsx)("video",{src:n.videoUrl,controls:!0,style:{width:"260px",maxWidth:"55vw",borderRadius:10}}),w?(0,ur.jsx)("input",{value:_,onChange:e=>A(e.target.value),onKeyDown:e=>{"Enter"===e.key?(l.emit("edit-message",{conversationId:c,messageId:n._id,text:_}),S(!1)):"Escape"===e.key&&(A(n.text||""),S(!1))},style:{width:"100%",color:"white",background:"transparent",border:"1px solid rgba(255,255,255,0.3)",borderRadius:6,padding:6}}):(0,ur.jsx)(Jr,{overflowX:"scroll",sx:o,dangerouslySetInnerHTML:s(n.text)}),(0,ur.jsxs)(Wr,{justify:"end",align:"center",mt:1,children:[(0,ur.jsx)(Jr,{align:"end",fontSize:"10px",color:"#e6e5e5",children:m}),f&&(null===(t=n.seenBy)||void 0===t?void 0:t.find((e=>e.user===a._id)))&&(0,ur.jsx)(mr,{ml:1,fontSize:"x-small",color:"green.100",children:(0,ur.jsx)(hL,{})})]}),n.reaction&&(0,ur.jsx)(pr,{fontSize:"xs",position:"absolute",bg:f?"purple.500":"blue.500",bottom:-1,left:-1,borderRadius:"lg",children:n.reaction}),v&&(0,ur.jsxs)(pr,{position:"absolute",top:"0",right:"-60px",display:"flex",flexDir:"column",alignItems:"center",onClick:e=>e.stopPropagation(),children:[(0,ur.jsx)($R,{label:"Copy",placement:"top",children:(0,ur.jsx)(zr,{size:"sm",variant:"ghost",mr:2,onClick:j,borderRadius:"md",children:(0,ur.jsx)(uL,{})})}),f&&(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>S((e=>!e)),borderRadius:"md",mt:1,children:"\u270f\ufe0f"}),(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>{const e=document.getElementById("new-message");e&&e.focus(),window.__replyTo=n._id,window.dispatchEvent(new CustomEvent("replyToChange",{detail:n._id})),d({title:"Reply mode",description:"Your next message will reply to this.",duration:1200})},borderRadius:"md",mt:1,children:"\u21a9\ufe0f"}),(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>M(!0),borderRadius:"md",mt:1,children:"\u23e9"}),(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>b((e=>!e)),borderRadius:"md",mt:1,children:"\ud83d\ude42"}),x&&(0,ur.jsx)(pr,{bg:"blackAlpha.600",borderRadius:"md",p:1,mt:1,children:(0,ur.jsx)(Wr,{children:["\ud83d\udc4d","\u2764\ufe0f","\ud83d\ude02","\ud83d\udd25","\ud83d\udc4f"].map((e=>(0,ur.jsx)(zr,{size:"xs",variant:"ghost",onClick:()=>{return t=e,l.emit("react-message",{conversationId:c,messageId:n._id,reaction:t}),void b(!1);var t},mx:.5,children:e},e)))})})]})]})]})]})]}),C&&(0,ur.jsxs)(Nm,{isOpen:C,onClose:()=>M(!1),isCentered:!0,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsxs)(Zy,{children:[(0,ur.jsx)(Jr,{fontSize:"md",mb:2,children:"Forward to"}),(0,ur.jsx)("input",{placeholder:"Search",value:P,onChange:e=>R(e.target.value),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #555",marginBottom:8}}),(0,ur.jsx)(pr,{maxH:"220px",overflowY:"auto",children:p.filter((e=>{var t,n;return((null===(t=e.members)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.name)||e.name||"").toLowerCase().includes(P.toLowerCase())})).map((e=>{var t,n,r;return(0,ur.jsx)(zr,{size:"sm",variant:T===e._id?"solid":"ghost",w:"100%",justifyContent:"flex-start",onClick:()=>k(e._id),children:(null===(t=e.members)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.name)||e.name||(null===(r=e._id)||void 0===r?void 0:r.slice(-6))},e._id)}))})]}),(0,ur.jsxs)(nx,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{if(!(await fetch("".concat(h,"/conversation/forward"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({toConversationId:T,fromMessageId:n._id})})).ok)throw new Error("Forward failed");M(!1),k(""),R(""),d({title:"Forwarded",status:"success",duration:1200})}catch(Zie){d({title:Zie.message,status:"error"})}},children:"Send"}),(0,ur.jsx)(zr,{size:"sm",variant:"ghost",ml:2,onClick:()=>M(!1),children:"Cancel"})]})]})]}),E.isOpen&&(n.imageurl||n.imageUrl)&&(0,ur.jsxs)(Nm,{isOpen:E.isOpen,onClose:E.onClose,size:"xl",isCentered:!0,children:[(0,ur.jsx)(Km,{}),(0,ur.jsx)(Ny,{bg:"transparent",boxShadow:"none",children:(0,ur.jsx)(Zy,{p:0,display:"flex",justifyContent:"center",children:(0,ur.jsx)(Tx,{src:n.imageurl||n.imageUrl,alt:"full",maxH:"80vh",borderRadius:8})})})]}),(0,ur.jsx)(pL,{isOpen:D,handleDeleteMessage:async e=>{u(n._id),B();const t=[i._id];2===e&&t.push(a._id);const r={messageId:n._id,conversationId:c,deleteFrom:t};l.emit("delete-message",r)},onClose:B})]})},mL="generated",gL="pointerleave",vL="pointermove",yL="touchend",xL="tsParticles - Error";class bL{constructor(e,t,n){if(this._updateFromAngle=(e,t)=>{this.x=Math.cos(e)*t,this.y=Math.sin(e)*t},!dO(e)&&e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}else{if(void 0===e||void 0===t)throw new Error("".concat(xL," Vector3d not initialized correctly"));this.x=e,this.y=t,this.z=null!==n&&void 0!==n?n:0}}static get origin(){return bL.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return bL.create(e.x,e.y,e.z)}static create(e,t,n){return new bL(e,t,n)}add(e){return bL.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return bL.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return bL.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return bL.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;0!=e&&this.multTo(1/e)}rotate(e){return bL.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}sub(e){return bL.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class wL extends bL{constructor(e,t){super(e,t,0)}static get origin(){return wL.create(0,0)}static clone(e){return wL.create(e.x,e.y)}static create(e,t){return new wL(e,t)}}let SL=Math.random;const _L=new Map;function AL(e,t){_L.get(e)||_L.set(e,t)}function EL(e){return _L.get(e)||(e=>e)}function CL(){return ML(SL(),0,1-1e-16)}function ML(e,t,n){return Math.min(Math.max(e,t),n)}function TL(e,t,n,r){return Math.floor((e*n+t*r)/(n+r))}function kL(e){const t=DL(e);let n=RL(e);return t===n&&(n=0),CL()*(t-n)+n}function PL(e){return dO(e)?e:kL(e)}function RL(e){return dO(e)?e:e.min}function DL(e){return dO(e)?e:e.max}function IL(e,t){if(e===t||void 0===t&&dO(e))return e;const n=RL(e),r=DL(e);return void 0!==t?{min:Math.min(n,t),max:Math.max(r,t)}:IL(n,r)}function BL(e){const t=e.random,{enable:n,minimumValue:r}=cO(t)?{enable:t,minimumValue:0}:t;return PL(n?IL(e.value,r):e.value)}function jL(e,t){const n=e.x-t.x,r=e.y-t.y;return{dx:n,dy:r,distance:Math.sqrt(n**2+r**2)}}function FL(e,t){return jL(e,t).distance}function LL(e,t,n,r){return wL.create(e.x*(n-r)/(n+r)+2*t.x*r/(n+r),e.y)}function OL(e){var t,n,r,i;return{x:null!==(t=null===(n=e.position)||void 0===n?void 0:n.x)&&void 0!==t?t:CL()*e.size.width,y:null!==(r=null===(i=e.position)||void 0===i?void 0:i.y)&&void 0!==r?r:CL()*e.size.height}}function NL(e){return e?e.endsWith("%")?parseFloat(e)/100:parseFloat(e):1}const zL=["mode"],UL={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function HL(){return UL}function GL(e){const t={bounced:!1},{pSide:n,pOtherSide:r,rectSide:i,rectOtherSide:a,velocity:s,factor:o}=e;return r.min<a.min||r.min>a.max||r.max<a.min||r.max>a.max||(n.max>=i.min&&n.max<=(i.max+i.min)/2&&s>0||n.min<=i.max&&n.min>(i.max+i.min)/2&&s<0)&&(t.velocity=s*-o,t.bounced=!0),t}function VL(){return"undefined"===typeof window||!window||"undefined"===typeof window.document||!window.document}function WL(e){if(!VL()&&"undefined"!==typeof matchMedia)return matchMedia(e)}function qL(e,t){return e===t||fO(t)&&t.indexOf(e)>-1}function XL(e,t){return e[void 0!==t&&(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])?t%e.length:function(e){return Math.floor(CL()*e.length)}(e)]}function JL(e,t,n,r,i){return function(e,t,n,r){let i=!0;r&&"bottom"!==r||(i=e.top<t.height+n.x);!i||r&&"left"!==r||(i=e.right>n.x);!i||r&&"right"!==r||(i=e.left<t.width+n.y);!i||r&&"top"!==r||(i=e.bottom>n.y);return i}(YL(e,null!==r&&void 0!==r?r:0),t,n,i)}function YL(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function KL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){if(void 0===i||null===i)continue;if(!pO(i)){e=i;continue}const t=Array.isArray(i);!t||!pO(e)&&e&&Array.isArray(e)?t||!pO(e)&&e&&!Array.isArray(e)||(e={}):e=[];for(const n in i){if("__proto__"===n)continue;const t=i[n],r=e;r[n]=pO(t)&&Array.isArray(t)?t.map((e=>KL(r[n],e))):KL(r[n],t)}}return e}function ZL(e,t){return!!aO(t,(t=>t.enable&&qL(e,t.mode)))}function QL(e,t,n){rO(t,(t=>{const r=t.mode;t.enable&&qL(e,r)&&function(e,t){const n=e.selectors;rO(n,(n=>{t(n,e)}))}(t,n)}))}function $L(e,t){if(t&&e)return aO(e,(e=>function(e,t){const n=rO(t,(t=>e.matches(t)));return fO(n)?n.some((e=>e)):n}(t,e.selectors)))}function eO(e){return{position:e.getPosition(),radius:e.getRadius(),mass:e.getMass(),velocity:e.velocity,factor:wL.create(BL(e.options.bounce.horizontal),BL(e.options.bounce.vertical))}}function tO(e,t){const{x:n,y:r}=e.velocity.sub(t.velocity),[i,a]=[e.position,t.position],{dx:s,dy:o}=jL(a,i);if(n*s+r*o<0)return;const l=-Math.atan2(o,s),c=e.mass,u=t.mass,d=e.velocity.rotate(l),h=t.velocity.rotate(l),p=LL(d,h,c,u),f=LL(h,d,c,u),m=p.rotate(-l),g=f.rotate(-l);e.velocity.x=m.x*e.factor.x,e.velocity.y=m.y*e.factor.y,t.velocity.x=g.x*t.factor.x,t.velocity.y=g.y*t.factor.y}function nO(e,t){const n=YL(e.getPosition(),e.getRadius()),r=GL({pSide:{min:n.left,max:n.right},pOtherSide:{min:n.top,max:n.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:e.velocity.x,factor:BL(e.options.bounce.horizontal)});r.bounced&&(void 0!==r.velocity&&(e.velocity.x=r.velocity),void 0!==r.position&&(e.position.x=r.position));const i=GL({pSide:{min:n.top,max:n.bottom},pOtherSide:{min:n.left,max:n.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:e.velocity.y,factor:BL(e.options.bounce.vertical)});i.bounced&&(void 0!==i.velocity&&(e.velocity.y=i.velocity),void 0!==i.position&&(e.position.y=i.position))}function rO(e,t){return fO(e)?e.map(((e,n)=>t(e,n))):t(e,0)}function iO(e,t,n){return fO(e)?XL(e,t,n):e}function aO(e,t){return fO(e)?e.find(((e,n)=>t(e,n))):t(e,0)?e:void 0}function sO(e,t){const n=e.value,r=e.animation,i={delayTime:1e3*PL(r.delay),enable:r.enable,value:PL(e.value)*t,max:DL(n)*t,min:RL(n)*t,loops:0,maxLoops:PL(r.count),time:0};if(r.enable){switch(i.decay=1-PL(r.decay),r.mode){case"increase":i.status="increasing";break;case"decrease":i.status="decreasing";break;case"random":i.status=CL()>=.5?"increasing":"decreasing"}const e="auto"===r.mode;switch(r.startValue){case"min":i.value=i.min,e&&(i.status="increasing");break;case"max":i.value=i.max,e&&(i.status="decreasing");break;default:i.value=kL(i),e&&(i.status=CL()>=.5?"increasing":"decreasing")}}return i.initialValue=i.value,i}function oO(e,t){if(!("percent"===e.mode)){const{mode:t}=e;return y(e,zL)}return"x"in e?{x:e.x/100*t.width,y:e.y/100*t.height}:{width:e.width/100*t.width,height:e.height/100*t.height}}function lO(e,t){return oO(e,t)}function cO(e){return"boolean"===typeof e}function uO(e){return"string"===typeof e}function dO(e){return"number"===typeof e}function hO(e){return"function"===typeof e}function pO(e){return"object"===typeof e&&null!==e}function fO(e){return Array.isArray(e)}const mO="random",gO="mid",vO=new Map;function yO(e){vO.set(e.key,e)}function xO(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function bO(e){for(const[,r]of vO)if(e.startsWith(r.stringPrefix))return r.parseString(e);const t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,((e,t,n,r,i)=>t+t+n+n+r+r+(void 0!==i?i+i:""))),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);return n?{a:void 0!==n[4]?parseInt(n[4],16)/255:1,b:parseInt(n[3],16),g:parseInt(n[2],16),r:parseInt(n[1],16)}:void 0}function wO(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return;const r=uO(e)?{value:e}:e;if(uO(r.value))return SO(r.value,t,n);if(fO(r.value))return wO({value:XL(r.value,t,n)});for(const[,i]of vO){const e=i.handleRangeColor(r);if(e)return e}}function SO(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return;const r=uO(e)?{value:e}:e;if(uO(r.value))return r.value===mO?CO():function(e){return bO(e)}(r.value);if(fO(r.value))return SO({value:XL(r.value,t,n)});for(const[,i]of vO){const e=i.handleColor(r);if(e)return e}}function _O(e,t){const n=wO(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);return n?AO(n):void 0}function AO(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),a=Math.min(t,n,r),s={h:0,l:(i+a)/2,s:0};return i!==a&&(s.s=s.l<.5?(i-a)/(i+a):(i-a)/(2-i-a),s.h=t===i?(n-r)/(i-a):s.h=n===i?2+(r-t)/(i-a):4+(t-n)/(i-a)),s.l*=100,s.s*=100,s.h*=60,s.h<0&&(s.h+=360),s.h>=360&&(s.h-=360),s}function EO(e){const t={b:0,g:0,r:0},n={h:e.h/360,l:e.l/100,s:e.s/100};if(n.s){const e=n.l<.5?n.l*(1+n.s):n.l+n.s-n.l*n.s,r=2*n.l-e;t.r=xO(r,e,n.h+1/3),t.g=xO(r,e,n.h),t.b=xO(r,e,n.h-1/3)}else t.r=t.g=t.b=n.l;return t.r=Math.floor(255*t.r),t.g=Math.floor(255*t.g),t.b=Math.floor(255*t.b),t}function CO(e){const t=null!==e&&void 0!==e?e:0;return{b:Math.floor(kL(IL(t,256))),g:Math.floor(kL(IL(t,256))),r:Math.floor(kL(IL(t,256)))}}function MO(e,t){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(null!==t&&void 0!==t?t:1,")")}function TO(e,t){return"hsla(".concat(e.h,", ").concat(e.s,"%, ").concat(e.l,"%, ").concat(null!==t&&void 0!==t?t:1,")")}function kO(e,t,n,r){let i=e,a=t;return void 0===i.r&&(i=EO(e)),void 0===a.r&&(a=EO(t)),{b:TL(i.b,a.b,n,r),g:TL(i.g,a.g,n,r),r:TL(i.r,a.r,n,r)}}function PO(e,t,n){if(n===mO)return CO();if(n!==gO)return n;{var r,i;const n=null!==(r=e.getFillColor())&&void 0!==r?r:e.getStrokeColor(),a=null!==(i=null===t||void 0===t?void 0:t.getFillColor())&&void 0!==i?i:null===t||void 0===t?void 0:t.getStrokeColor();if(n&&a&&t)return kO(n,a,e.getRadius(),t.getRadius());{const e=null!==n&&void 0!==n?n:a;if(e)return EO(e)}}}function RO(e,t,n){const r=uO(e)?e:e.value;return r===mO?n?wO({value:r}):t?mO:gO:r===gO?gO:wO({value:r})}function DO(e){return void 0!==e?{h:e.h.value,s:e.s.value,l:e.l.value}:void 0}function IO(e,t,n){const r={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return t&&(BO(r.h,t.h,n),BO(r.s,t.s,n),BO(r.l,t.l,n)),r}function BO(e,t,n){e.enable=t.enable,e.enable?(e.velocity=PL(t.speed)/100*n,e.decay=1-PL(t.decay),e.status="increasing",e.loops=0,e.maxLoops=PL(t.count),e.time=0,e.delayTime=1e3*PL(t.delay),t.sync||(e.velocity*=CL(),e.value*=CL()),e.initialValue=e.value):e.velocity=0}function jO(e,t,n){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath()}function FO(e,t){e.clearRect(0,0,t.width,t.height)}function LO(e,t,n){const r=t[n];var i;void 0!==r&&(e[n]=(null!==(i=e[n])&&void 0!==i?i:1)*r)}class OO{constructor(e){this.container=e,this._applyPostDrawUpdaters=e=>{for(const t of this._postDrawUpdaters)t.afterDraw&&t.afterDraw(e)},this._applyPreDrawUpdaters=(e,t,n,r,i,a)=>{for(const s of this._preDrawUpdaters){if(s.getColorStyles){const{fill:a,stroke:o}=s.getColorStyles(t,e,n,r);a&&(i.fill=a),o&&(i.stroke=o)}if(s.getTransformValues){const e=s.getTransformValues(t);for(const t in e)LO(a,e,t)}s.beforeDraw&&s.beforeDraw(t)}},this._applyResizePlugins=()=>{for(const e of this._resizePlugins)e.resize&&e.resize()},this._getPluginParticleColors=e=>{let t,n;for(const r of this._colorPlugins)if(!t&&r.particleFillColor&&(t=_O(r.particleFillColor(e))),!n&&r.particleStrokeColor&&(n=_O(r.particleStrokeColor(e))),t&&n)break;return[t,n]},this._initCover=()=>{const e=this.container.actualOptions.backgroundMask.cover,t=wO(e.color);if(t){const n=(0,c.A)((0,c.A)({},t),{},{a:e.opacity});this._coverColorStyle=MO(n,n.a)}},this._initStyle=()=>{const e=this.element,t=this.container.actualOptions;if(e){this._fullScreen?(this._originalStyle=KL({},e.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const n in t.style){if(!n||!t.style)continue;const r=t.style[n];r&&e.style.setProperty(n,r,"important")}}},this._initTrail=async()=>{const e=this.container.actualOptions,t=e.particles.move.trail,n=t.fill;if(t.enable)if(n.color){const t=wO(n.color);if(!t)return;const r=e.particles.move.trail;this._trailFill={color:(0,c.A)({},t),opacity:1/r.length}}else await new Promise(((e,r)=>{if(!n.image)return;const i=document.createElement("img");i.addEventListener("load",(()=>{this._trailFill={image:i,opacity:1/t.length},e()})),i.addEventListener("error",(e=>{r(e.error)})),i.src=n.image}))},this._paintBase=e=>{this.draw((t=>function(e,t,n){e.fillStyle=null!==n&&void 0!==n?n:"rgba(0,0,0,0)",e.fillRect(0,0,t.width,t.height)}(t,this.size,e)))},this._paintImage=(e,t)=>{this.draw((n=>function(e,t,n,r){n&&(e.globalAlpha=r,e.drawImage(n,0,0,t.width,t.height),e.globalAlpha=1)}(n,this.size,e,t)))},this._repairStyle=()=>{const e=this.element;e&&(this._safeMutationObserver((e=>e.disconnect())),this._initStyle(),this.initBackground(),this._safeMutationObserver((t=>t.observe(e,{attributes:!0}))))},this._resetOriginalStyle=()=>{const e=this.element,t=this._originalStyle;if(!e||!t)return;const n=e.style;n.position=t.position,n.zIndex=t.zIndex,n.top=t.top,n.left=t.left,n.width=t.width,n.height=t.height},this._safeMutationObserver=e=>{this._mutationObserver&&e(this._mutationObserver)},this._setFullScreenStyle=()=>{const e=this.element;if(!e)return;const t="important",n=e.style;n.setProperty("position","fixed",t),n.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),t),n.setProperty("top","0",t),n.setProperty("left","0",t),n.setProperty("width","100%",t),n.setProperty("height","100%",t)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,n=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>0&&n?n.color?this._paintBase(MO(n.color,n.opacity)):n.image&&this._paintImage(n.image,n.opacity):this.draw((e=>{FO(e,this.size)}))}destroy(){if(this.stop(),this._generated){const e=this.element;e&&e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){var n;if(e.spawning||e.destroyed)return;const r=e.getRadius();if(r<=0)return;const i=e.getFillColor(),a=null!==(n=e.getStrokeColor())&&void 0!==n?n:i;let[s,o]=this._getPluginParticleColors(e);s||(s=i),o||(o=a),(s||o)&&this.draw((n=>{var i,a,l,c;const u=this.container,d=u.actualOptions,h=e.options.zIndex,p=(1-e.zIndexFactor)**h.opacityRate,f=null!==(i=null!==(a=e.bubble.opacity)&&void 0!==a?a:null===(l=e.opacity)||void 0===l?void 0:l.value)&&void 0!==i?i:1,m=f*p,g=(null!==(c=e.strokeOpacity)&&void 0!==c?c:f)*p,v={},y={fill:s?TO(s,m):void 0};y.stroke=o?TO(o,g):y.fill,this._applyPreDrawUpdaters(n,e,r,m,y,v),function(e){var t,n,r,i,a;const{container:s,context:o,particle:l,delta:c,colorStyles:u,backgroundMask:d,composite:h,radius:p,opacity:f,shadow:m,transform:g}=e,v=l.getPosition(),y=l.rotation+(l.pathRotation?l.velocity.angle:0),x=Math.sin(y),b=Math.cos(y),w={a:b*(null!==(t=g.a)&&void 0!==t?t:1),b:x*(null!==(n=g.b)&&void 0!==n?n:1),c:-x*(null!==(r=g.c)&&void 0!==r?r:1),d:b*(null!==(i=g.d)&&void 0!==i?i:1)};o.setTransform(w.a,w.b,w.c,w.d,v.x,v.y),o.beginPath(),d&&(o.globalCompositeOperation=h);const S=l.shadowColor;m.enable&&S&&(o.shadowBlur=m.blur,o.shadowColor=MO(S),o.shadowOffsetX=m.offset.x,o.shadowOffsetY=m.offset.y),u.fill&&(o.fillStyle=u.fill);const _=null!==(a=l.strokeWidth)&&void 0!==a?a:0;o.lineWidth=_,u.stroke&&(o.strokeStyle=u.stroke),function(e,t,n,r,i,a){if(!n.shape)return;const s=e.drawers.get(n.shape);s&&s.draw(t,n,r,i,a,e.retina.pixelRatio)}(s,o,l,p,f,c),_>0&&o.stroke(),l.close&&o.closePath(),l.fill&&o.fill(),function(e,t,n,r,i,a){if(!n.shape)return;const s=e.drawers.get(n.shape);s&&s.afterEffect&&s.afterEffect(t,n,r,i,a,e.retina.pixelRatio)}(s,o,l,p,f,c),o.globalCompositeOperation="source-over",o.setTransform(1,0,0,1,0,0)}({container:u,context:n,particle:e,delta:t,colorStyles:y,backgroundMask:d.backgroundMask.enable,composite:d.backgroundMask.composite,radius:r*(1-e.zIndexFactor)**h.sizeRate,opacity:m,shadow:e.options.shadow,transform:v}),this._applyPostDrawUpdaters(e)}))}drawParticlePlugin(e,t,n){this.draw((r=>function(e,t,n,r){t.drawParticle&&t.drawParticle(e,n,r)}(r,e,t,n)))}drawPlugin(e,t){this.draw((n=>function(e,t,n){t.draw&&t.draw(e,n)}(n,e,t)))}async init(){this._safeMutationObserver((e=>e.disconnect())),this._mutationObserver=function(e){if(!VL()&&"undefined"!==typeof MutationObserver)return new MutationObserver(e)}((e=>{for(const t of e)"attributes"===t.type&&"style"===t.attributeName&&this._repairStyle()})),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(Zie){HL().error(Zie)}this.initBackground(),this._safeMutationObserver((e=>{this.element&&e.observe(this.element,{attributes:!0})})),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions.background,t=this.element;if(!t)return;const n=t.style;if(n){if(e.color){const t=wO(e.color);n.backgroundColor=t?MO(t,e.opacity):""}else n.backgroundColor="";n.backgroundImage=e.image||"",n.backgroundPosition=e.position||"",n.backgroundRepeat=e.repeat||"",n.backgroundSize=e.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor||e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles||e.getTransformValues||e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&mL in e.dataset?"true"===e.dataset[mL]:this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=KL({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver((e=>{this.element&&e.observe(this.element,{attributes:!0})})),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw((t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(FO(t,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()}))}resize(){if(!this.element)return!1;const e=this.container,t=e.retina.pixelRatio,n=e.canvas.size,r=this.element.offsetWidth*t,i=this.element.offsetHeight*t;if(i===n.height&&r===n.width&&i===this.element.height&&r===this.element.width)return!1;const a=(0,c.A)({},n);return this.element.width=n.width=this.element.offsetWidth*t,this.element.height=n.height=this.element.offsetHeight*t,this.container.started&&(this.resizeFactor={width:n.width/a.width,height:n.height/a.height}),!0}stop(){this._safeMutationObserver((e=>e.disconnect())),this._mutationObserver=void 0,this.draw((e=>FO(e,this.size)))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}function NO(e,t,n,r,i){if(r){let r={passive:!0};cO(i)?r.capture=i:void 0!==i&&(r=i),e.addEventListener(t,n,r)}else{const r=i;e.removeEventListener(t,n,r)}}class zO{constructor(e){this.container=e,this._doMouseTouchClick=e=>{const t=this.container,n=t.actualOptions;if(this._canPush){const e=t.interactivity.mouse,r=e.position;if(!r)return;e.clickPosition=(0,c.A)({},r),e.clickTime=(new Date).getTime();rO(n.interactivity.events.onClick.mode,(e=>this.container.handleClickMode(e)))}"touchend"===e.type&&setTimeout((()=>this._mouseTouchFinish()),500)},this._handleThemeChange=e=>{const t=e,n=this.container,r=n.options,i=r.defaultThemes,a=t.matches?i.dark:i.light,s=r.themes.find((e=>e.name===a));s&&s.default.auto&&n.loadTheme(a)},this._handleVisibilityChange=()=>{const e=this.container,t=e.actualOptions;this._mouseTouchFinish(),t.pauseOnBlur&&(document&&document.hidden?(e.pageHidden=!0,e.pause()):(e.pageHidden=!1,e.getAnimationStatus()?e.play(!0):e.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout((async()=>{const e=this.container.canvas;e&&await e.windowResize()}),1e3*this.container.actualOptions.interactivity.events.resize.delay)},this._manageInteractivityListeners=(e,t)=>{const n=this._handlers,r=this.container,i=r.actualOptions,a=r.interactivity.element;if(!a)return;const s=a,o=r.canvas.element;o&&(o.style.pointerEvents=s===o?"initial":"none"),(i.interactivity.events.onHover.enable||i.interactivity.events.onClick.enable)&&(NO(a,vL,n.mouseMove,t),NO(a,"touchstart",n.touchStart,t),NO(a,"touchmove",n.touchMove,t),i.interactivity.events.onClick.enable?(NO(a,yL,n.touchEndClick,t),NO(a,"pointerup",n.mouseUp,t),NO(a,"pointerdown",n.mouseDown,t)):NO(a,yL,n.touchEnd,t),NO(a,e,n.mouseLeave,t),NO(a,"touchcancel",n.touchCancel,t))},this._manageListeners=e=>{const t=this._handlers,n=this.container,r=n.actualOptions.interactivity.detectsOn,i=n.canvas.element;let a=gL;if("window"===r)n.interactivity.element=window,a="pointerout";else if("parent"===r&&i){var s;n.interactivity.element=null!==(s=i.parentElement)&&void 0!==s?s:i.parentNode}else n.interactivity.element=i;this._manageMediaMatch(e),this._manageResize(e),this._manageInteractivityListeners(a,e),document&&NO(document,"visibilitychange",t.visibilityChange,e,!1)},this._manageMediaMatch=e=>{const t=this._handlers,n=WL("(prefers-color-scheme: dark)");n&&(void 0===n.addEventListener?void 0!==n.addListener&&(e?n.addListener(t.oldThemeChange):n.removeListener(t.oldThemeChange)):NO(n,"change",t.themeChange,e))},this._manageResize=e=>{const t=this._handlers,n=this.container;if(!n.actualOptions.interactivity.events.resize)return;if("undefined"===typeof ResizeObserver)return void NO(window,"resize",t.resize,e);const r=n.canvas.element;this._resizeObserver&&!e?(r&&this._resizeObserver.unobserve(r),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&e&&r&&(this._resizeObserver=new ResizeObserver((async e=>{e.find((e=>e.target===r))&&await this._handleWindowResize()})),this._resizeObserver.observe(r))},this._mouseDown=()=>{const{interactivity:e}=this.container;if(!e)return;const{mouse:t}=e;t.clicking=!0,t.downPosition=t.position},this._mouseTouchClick=e=>{const t=this.container,n=t.actualOptions,{mouse:r}=t.interactivity;r.inside=!0;let i=!1;const a=r.position;if(a&&n.interactivity.events.onClick.enable){for(const[,e]of t.plugins)if(e.clickPositionValid&&(i=e.clickPositionValid(a),i))break;i||this._doMouseTouchClick(e),r.clicking=!1}},this._mouseTouchFinish=()=>{const e=this.container.interactivity;if(!e)return;const t=e.mouse;delete t.position,delete t.clickPosition,delete t.downPosition,e.status=gL,t.inside=!1,t.clicking=!1},this._mouseTouchMove=e=>{const t=this.container,n=t.actualOptions,r=t.interactivity,i=t.canvas.element;if(!r||!r.element)return;let a;if(r.mouse.inside=!0,e.type.startsWith("pointer")){this._canPush=!0;const t=e;if(r.element===window){if(i){const e=i.getBoundingClientRect();a={x:t.clientX-e.left,y:t.clientY-e.top}}}else if("parent"===n.interactivity.detectsOn){const e=t.target,n=t.currentTarget;if(e&&n&&i){const r=e.getBoundingClientRect(),s=n.getBoundingClientRect(),o=i.getBoundingClientRect();a={x:t.offsetX+2*r.left-(s.left+o.left),y:t.offsetY+2*r.top-(s.top+o.top)}}else{var s,o;a={x:null!==(s=t.offsetX)&&void 0!==s?s:t.clientX,y:null!==(o=t.offsetY)&&void 0!==o?o:t.clientY}}}else if(t.target===i){var l,c;a={x:null!==(l=t.offsetX)&&void 0!==l?l:t.clientX,y:null!==(c=t.offsetY)&&void 0!==c?c:t.clientY}}}else if(this._canPush="touchmove"!==e.type,i){var u,d;const t=e,n=t.touches[t.touches.length-1],r=i.getBoundingClientRect();a={x:n.clientX-(null!==(u=r.left)&&void 0!==u?u:0),y:n.clientY-(null!==(d=r.top)&&void 0!==d?d:0)}}const h=t.retina.pixelRatio;a&&(a.x*=h,a.y*=h),r.mouse.position=a,r.status=vL},this._touchEnd=e=>{const t=e,n=Array.from(t.changedTouches);for(const r of n)this._touches.delete(r.identifier);this._mouseTouchFinish()},this._touchEndClick=e=>{const t=e,n=Array.from(t.changedTouches);for(const r of n)this._touches.delete(r.identifier);this._mouseTouchClick(e)},this._touchStart=e=>{const t=e,n=Array.from(t.changedTouches);for(const r of n)this._touches.set(r.identifier,performance.now());this._mouseTouchMove(e)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:e=>this._mouseTouchMove(e),mouseUp:e=>this._mouseTouchClick(e),touchStart:e=>this._touchStart(e),touchMove:e=>this._mouseTouchMove(e),touchEnd:e=>this._touchEnd(e),touchCancel:e=>this._touchEnd(e),touchEndClick:e=>this._touchEndClick(e),visibilityChange:()=>this._handleVisibilityChange(),themeChange:e=>this._handleThemeChange(e),oldThemeChange:e=>this._handleThemeChange(e),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class UO{constructor(){this.value=""}static create(e,t){const n=new UO;return n.load(e),void 0!==t&&(uO(t)||fO(t)?n.load({value:t}):n.load(t)),n}load(e){void 0!==(null===e||void 0===e?void 0:e.value)&&(this.value=e.value)}}class HO{constructor(){this.color=new UO,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(void 0!==e.color&&(this.color=UO.create(this.color,e.color)),void 0!==e.image&&(this.image=e.image),void 0!==e.position&&(this.position=e.position),void 0!==e.repeat&&(this.repeat=e.repeat),void 0!==e.size&&(this.size=e.size),void 0!==e.opacity&&(this.opacity=e.opacity))}}class GO{constructor(){this.color=new UO,this.color.value="#fff",this.opacity=1}load(e){e&&(void 0!==e.color&&(this.color=UO.create(this.color,e.color)),void 0!==e.opacity&&(this.opacity=e.opacity))}}class VO{constructor(){this.composite="destination-out",this.cover=new GO,this.enable=!1}load(e){if(e){if(void 0!==e.composite&&(this.composite=e.composite),void 0!==e.cover){const t=e.cover,n=uO(e.cover)?{color:e.cover}:e.cover;this.cover.load(void 0!==t.color?t:{color:n})}void 0!==e.enable&&(this.enable=e.enable)}}}class WO{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.zIndex&&(this.zIndex=e.zIndex))}}class qO{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode))}}class XO{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(e){this.elementId=e}get elementId(){return this.ids}set elementId(e){this.ids=e}get ids(){return rO(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=rO(e,(e=>"#".concat(e)))}load(e){var t,n;if(!e)return;const r=null!==(t=null!==(n=e.ids)&&void 0!==n?n:e.elementId)&&void 0!==t?t:e.el;void 0!==r&&(this.ids=r),void 0!==e.selectors&&(this.selectors=e.selectors),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.type&&(this.type=e.type)}}class JO{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.force&&(this.force=e.force),void 0!==e.smooth&&(this.smooth=e.smooth))}}class YO{constructor(){this.enable=!1,this.mode=[],this.parallax=new JO}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.mode&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class KO{constructor(){this.delay=.5,this.enable=!0}load(e){void 0!==e&&(void 0!==e.delay&&(this.delay=e.delay),void 0!==e.enable&&(this.enable=e.enable))}}class ZO{constructor(){this.onClick=new qO,this.onDiv=new XO,this.onHover=new YO,this.resize=new KO}get onclick(){return this.onClick}set onclick(e){this.onClick=e}get ondiv(){return this.onDiv}set ondiv(e){this.onDiv=e}get onhover(){return this.onHover}set onhover(e){this.onHover=e}load(e){var t,n,r;if(!e)return;this.onClick.load(null!==(t=e.onClick)&&void 0!==t?t:e.onclick);const i=null!==(n=e.onDiv)&&void 0!==n?n:e.ondiv;void 0!==i&&(this.onDiv=rO(i,(e=>{const t=new XO;return t.load(e),t}))),this.onHover.load(null!==(r=e.onHover)&&void 0!==r?r:e.onhover),cO(e.resize)?this.resize.enable=e.resize:this.resize.load(e.resize)}}class QO{constructor(e,t){this._engine=e,this._container=t}load(e){if(!e)return;if(!this._container)return;const t=this._engine.plugins.interactors.get(this._container);if(t)for(const n of t)n.loadModeOptions&&n.loadModeOptions(this,e)}}class $O{constructor(e,t){this.detectsOn="window",this.events=new ZO,this.modes=new QO(e,t)}get detect_on(){return this.detectsOn}set detect_on(e){this.detectsOn=e}load(e){var t;if(!e)return;const n=null!==(t=e.detectsOn)&&void 0!==t?t:e.detect_on;void 0!==n&&(this.detectsOn=n),this.events.load(e.events),this.modes.load(e.modes)}}class eN{load(e){if(e){var t,n,r;if(e.position)this.position={x:null!==(t=e.position.x)&&void 0!==t?t:50,y:null!==(n=e.position.y)&&void 0!==n?n:50,mode:null!==(r=e.position.mode)&&void 0!==r?r:"percent"};e.options&&(this.options=KL({},e.options))}}}class tN{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(e){e&&(void 0!==e.maxWidth&&(this.maxWidth=e.maxWidth),void 0!==e.mode&&("screen"===e.mode?this.mode="screen":this.mode="canvas"),void 0!==e.options&&(this.options=KL({},e.options)))}}class nN{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(e){e&&(void 0!==e.auto&&(this.auto=e.auto),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.value&&(this.value=e.value))}}class rN{constructor(){this.name="",this.default=new nN}load(e){e&&(void 0!==e.name&&(this.name=e.name),this.default.load(e.default),void 0!==e.options&&(this.options=KL({},e.options)))}}class iN{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(e){e&&(void 0!==e.count&&(this.count=IL(e.count)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.offset&&(this.offset=IL(e.offset)),void 0!==e.speed&&(this.speed=IL(e.speed)),void 0!==e.decay&&(this.decay=IL(e.decay)),void 0!==e.delay&&(this.delay=IL(e.delay)),void 0!==e.sync&&(this.sync=e.sync))}}class aN{constructor(){this.h=new iN,this.s=new iN,this.l=new iN}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class sN extends UO{constructor(){super(),this.animation=new aN}static create(e,t){const n=new sN;return n.load(e),void 0!==t&&(uO(t)||fO(t)?n.load({value:t}):n.load(t)),n}load(e){if(super.load(e),!e)return;const t=e.animation;void 0!==t&&(void 0!==t.enable?this.animation.h.load(t):this.animation.load(e.animation))}}class oN{constructor(){this.speed=2}load(e){e&&void 0!==e.speed&&(this.speed=e.speed)}}class lN{constructor(){this.enable=!0,this.retries=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.retries&&(this.retries=e.retries))}}class cN{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(void 0!==e.count&&(this.count=IL(e.count)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=IL(e.speed)),void 0!==e.decay&&(this.decay=IL(e.decay)),void 0!==e.delay&&(this.delay=IL(e.delay)),void 0!==e.sync&&(this.sync=e.sync))}}class uN extends cN{constructor(){super(),this.mode="auto",this.startValue="random"}load(e){super.load(e),e&&(void 0!==e.minimumValue&&(this.minimumValue=e.minimumValue),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.startValue&&(this.startValue=e.startValue))}}class dN{constructor(){this.enable=!1,this.minimumValue=0}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.minimumValue&&(this.minimumValue=e.minimumValue))}}class hN{constructor(){this.random=new dN,this.value=0}load(e){e&&(cO(e.random)?this.random.enable=e.random:this.random.load(e.random),void 0!==e.value&&(this.value=IL(e.value,this.random.enable?this.random.minimumValue:void 0)))}}class pN extends hN{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class fN{constructor(){this.horizontal=new pN,this.vertical=new pN}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class mN{constructor(){this.absorb=new oN,this.bounce=new fN,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new lN}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.maxSpeed&&(this.maxSpeed=IL(e.maxSpeed)),void 0!==e.mode&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class gN{constructor(){this.offset=0,this.value=90}load(e){e&&(void 0!==e.offset&&(this.offset=IL(e.offset)),void 0!==e.value&&(this.value=IL(e.value)))}}class vN{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(e){this.rotate.x=e}get rotateY(){return this.rotate.y}set rotateY(e){this.rotate.y=e}load(e){var t,n,r,i;if(!e)return;void 0!==e.distance&&(this.distance=IL(e.distance)),void 0!==e.enable&&(this.enable=e.enable);const a=null!==(t=null===(n=e.rotate)||void 0===n?void 0:n.x)&&void 0!==t?t:e.rotateX;void 0!==a&&(this.rotate.x=a);const s=null!==(r=null===(i=e.rotate)||void 0===i?void 0:i.y)&&void 0!==r?r:e.rotateY;void 0!==s&&(this.rotate.y=s)}}class yN{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(void 0!==e.x&&(this.x=e.x),void 0!==e.y&&(this.y=e.y),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.radius&&(this.radius=e.radius))}}class xN{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(void 0!==e.acceleration&&(this.acceleration=IL(e.acceleration)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.inverse&&(this.inverse=e.inverse),void 0!==e.maxSpeed&&(this.maxSpeed=IL(e.maxSpeed)))}}class bN{constructor(){this.clamp=!0,this.delay=new hN,this.enable=!1,this.options={}}load(e){e&&(void 0!==e.clamp&&(this.clamp=e.clamp),this.delay.load(e.delay),void 0!==e.enable&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=KL(this.options,e.options)))}}class wN{load(e){e&&(void 0!==e.color&&(this.color=UO.create(this.color,e.color)),void 0!==e.image&&(this.image=e.image))}}class SN{constructor(){this.enable=!1,this.length=10,this.fill=new wN}get fillColor(){return this.fill.color}set fillColor(e){this.fill.load({color:e})}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0===e.fill&&void 0===e.fillColor||this.fill.load(e.fill||{color:e.fillColor}),void 0!==e.length&&(this.length=e.length))}}class _N{constructor(){this.default="out"}load(e){var t,n,r,i;e&&(void 0!==e.default&&(this.default=e.default),this.bottom=null!==(t=e.bottom)&&void 0!==t?t:e.default,this.left=null!==(n=e.left)&&void 0!==n?n:e.default,this.right=null!==(r=e.right)&&void 0!==r?r:e.default,this.top=null!==(i=e.top)&&void 0!==i?i:e.default)}}class AN{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(void 0!==e.acceleration&&(this.acceleration=IL(e.acceleration)),void 0!==e.enable&&(this.enable=e.enable),e.position&&(this.position=KL({},e.position)))}}class EN{constructor(){this.angle=new gN,this.attract=new vN,this.center=new yN,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new xN,this.path=new bN,this.outModes=new _N,this.random=!1,this.size=!1,this.speed=2,this.spin=new AN,this.straight=!1,this.trail=new SN,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(e){this.collisions=e}get collisions(){return!1}set collisions(e){}get noise(){return this.path}set noise(e){this.path=e}get outMode(){return this.outModes.default}set outMode(e){this.outModes.default=e}get out_mode(){return this.outMode}set out_mode(e){this.outMode=e}load(e){var t,n,r;if(!e)return;this.angle.load(dO(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),void 0!==e.decay&&(this.decay=IL(e.decay)),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.distance&&(this.distance=dO(e.distance)?{horizontal:e.distance,vertical:e.distance}:(0,c.A)({},e.distance)),void 0!==e.drift&&(this.drift=IL(e.drift)),void 0!==e.enable&&(this.enable=e.enable),this.gravity.load(e.gravity);const i=null!==(t=null!==(n=e.outModes)&&void 0!==n?n:e.outMode)&&void 0!==t?t:e.out_mode;void 0!==i&&(pO(i)?this.outModes.load(i):this.outModes.load({default:i})),this.path.load(null!==(r=e.path)&&void 0!==r?r:e.noise),void 0!==e.random&&(this.random=e.random),void 0!==e.size&&(this.size=e.size),void 0!==e.speed&&(this.speed=IL(e.speed)),this.spin.load(e.spin),void 0!==e.straight&&(this.straight=e.straight),this.trail.load(e.trail),void 0!==e.vibrate&&(this.vibrate=e.vibrate),void 0!==e.warp&&(this.warp=e.warp)}}class CN extends uN{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(e){this.minimumValue=e}load(e){void 0!==(null===e||void 0===e?void 0:e.opacity_min)&&void 0===e.minimumValue&&(e.minimumValue=e.opacity_min),super.load(e),e&&void 0!==e.destroy&&(this.destroy=e.destroy)}}class MN extends hN{constructor(){super(),this.animation=new CN,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(e){this.animation=e}load(e){var t;if(!e)return;super.load(e);const n=null!==(t=e.animation)&&void 0!==t?t:e.anim;void 0!==n&&(this.animation.load(n),this.value=IL(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class TN{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(e){this.width=e}get factor(){return this.height}set factor(e){this.height=e}get value_area(){return this.area}set value_area(e){this.area=e}load(e){var t,n,r;if(!e)return;void 0!==e.enable&&(this.enable=e.enable);const i=null!==(t=null!==(n=e.width)&&void 0!==n?n:e.area)&&void 0!==t?t:e.value_area;void 0!==i&&(this.width=i);const a=null!==(r=e.height)&&void 0!==r?r:e.factor;void 0!==a&&(this.height=a)}}class kN{constructor(){this.density=new TN,this.limit=0,this.value=0}get max(){return this.limit}set max(e){this.limit=e}load(e){var t;if(!e)return;this.density.load(e.density);const n=null!==(t=e.limit)&&void 0!==t?t:e.max;void 0!==n&&(this.limit=n),void 0!==e.value&&(this.value=e.value)}}class PN{constructor(){this.blur=0,this.color=new UO,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(void 0!==e.blur&&(this.blur=e.blur),this.color=UO.create(this.color,e.color),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.offset&&(void 0!==e.offset.x&&(this.offset.x=e.offset.x),void 0!==e.offset.y&&(this.offset.y=e.offset.y)))}}const RN="character",DN="char",IN="image",BN="images",jN="polygon",FN="star";class LN{constructor(){this.loadShape=(e,t,n,r)=>{var i;if(!e)return;const a=fO(e),s=a?[]:{},o=a!==fO(this.options[t]),l=a!==fO(this.options[n]);var c;(o&&(this.options[t]=s),l&&r&&(this.options[n]=s),this.options[t]=KL(null!==(i=this.options[t])&&void 0!==i?i:s,e),!this.options[n]||r)&&(this.options[n]=KL(null!==(c=this.options[n])&&void 0!==c?c:s,e))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){var e;return null!==(e=this.options[RN])&&void 0!==e?e:this.options[DN]}set character(e){this.options[DN]=this.options[RN]=e}get custom(){return this.options}set custom(e){this.options=e}get image(){var e;return null!==(e=this.options[IN])&&void 0!==e?e:this.options[BN]}set image(e){this.options[BN]=this.options[IN]=e}get images(){return this.image}set images(e){this.image=e}get polygon(){var e;return null!==(e=this.options[jN])&&void 0!==e?e:this.options[FN]}set polygon(e){this.options[FN]=this.options[jN]=e}get stroke(){return[]}set stroke(e){}load(e){var t,n;if(!e)return;const r=null!==(t=e.options)&&void 0!==t?t:e.custom;if(void 0!==r)for(const a in r){const e=r[a];var i;if(e)this.options[a]=KL(null!==(i=this.options[a])&&void 0!==i?i:{},e)}this.loadShape(e.character,RN,DN,!0),this.loadShape(e.polygon,jN,FN,!1),this.loadShape(null!==(n=e.image)&&void 0!==n?n:e.images,IN,BN,!0),void 0!==e.close&&(this.close=e.close),void 0!==e.fill&&(this.fill=e.fill),void 0!==e.type&&(this.type=e.type)}}class ON extends uN{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(e){this.minimumValue=e}load(e){void 0!==(null===e||void 0===e?void 0:e.size_min)&&void 0===e.minimumValue&&(e.minimumValue=e.size_min),super.load(e),e&&void 0!==e.destroy&&(this.destroy=e.destroy)}}class NN extends hN{constructor(){super(),this.animation=new ON,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(e){this.animation=e}load(e){var t;if(super.load(e),!e)return;const n=null!==(t=e.animation)&&void 0!==t?t:e.anim;void 0!==n&&(this.animation.load(n),this.value=IL(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class zN{constructor(){this.width=0}load(e){e&&(void 0!==e.color&&(this.color=sN.create(this.color,e.color)),void 0!==e.width&&(this.width=IL(e.width)),void 0!==e.opacity&&(this.opacity=IL(e.opacity)))}}class UN extends hN{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(void 0!==e.opacityRate&&(this.opacityRate=e.opacityRate),void 0!==e.sizeRate&&(this.sizeRate=e.sizeRate),void 0!==e.velocityRate&&(this.velocityRate=e.velocityRate))}}class HN{constructor(e,t){this._engine=e,this._container=t,this.bounce=new fN,this.collisions=new mN,this.color=new sN,this.color.value="#fff",this.groups={},this.move=new EN,this.number=new kN,this.opacity=new MN,this.reduceDuplicates=!1,this.shadow=new PN,this.shape=new LN,this.size=new NN,this.stroke=new zN,this.zIndex=new UN}load(e){var t,n,r,i,a;if(!e)return;if(this.bounce.load(e.bounce),this.color.load(sN.create(this.color,e.color)),void 0!==e.groups)for(const c in e.groups){const t=e.groups[c];var s;if(void 0!==t)this.groups[c]=KL(null!==(s=this.groups[c])&&void 0!==s?s:{},t)}this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),void 0!==e.reduceDuplicates&&(this.reduceDuplicates=e.reduceDuplicates),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex);const o=null!==(t=null===(n=e.move)||void 0===n?void 0:n.collisions)&&void 0!==t?t:null===(r=e.move)||void 0===r?void 0:r.bounce;void 0!==o&&(this.collisions.enable=o),this.collisions.load(e.collisions),void 0!==e.interactivity&&(this.interactivity=KL({},e.interactivity));const l=null!==(i=e.stroke)&&void 0!==i?i:null===(a=e.shape)||void 0===a?void 0:a.stroke;if(l&&(this.stroke=rO(l,(e=>{const t=new zN;return t.load(e),t}))),this._container){const t=this._engine.plugins.updaters.get(this._container);if(t)for(const r of t)r.loadOptions&&r.loadOptions(this,e);const n=this._engine.plugins.interactors.get(this._container);if(n)for(const r of n)r.loadParticlesOptions&&r.loadParticlesOptions(this,e)}}}function GN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.load(i)}function VN(e,t){const n=new HN(e,t);for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return GN(n,...i),n}class WN{constructor(e,t){this._findDefaultTheme=e=>{var t;return null!==(t=this.themes.find((t=>t.default.value&&t.default.mode===e)))&&void 0!==t?t:this.themes.find((e=>e.default.value&&"any"===e.default.mode))},this._importPreset=e=>{this.load(this._engine.plugins.getPreset(e))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new HO,this.backgroundMask=new VO,this.defaultThemes={},this.delay=0,this.fullScreen=new WO,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new $O(e,t),this.manualParticles=[],this.particles=VN(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(e){this.fullScreen.load(e)}get fps_limit(){return this.fpsLimit}set fps_limit(e){this.fpsLimit=e}get retina_detect(){return this.detectRetina}set retina_detect(e){this.detectRetina=e}load(e){var t,n,r,i,a;if(!e)return;void 0!==e.preset&&rO(e.preset,(e=>this._importPreset(e))),void 0!==e.autoPlay&&(this.autoPlay=e.autoPlay),void 0!==e.delay&&(this.delay=IL(e.delay));const s=null!==(t=e.detectRetina)&&void 0!==t?t:e.retina_detect;void 0!==s&&(this.detectRetina=s),void 0!==e.duration&&(this.duration=IL(e.duration));const o=null!==(n=e.fpsLimit)&&void 0!==n?n:e.fps_limit;void 0!==o&&(this.fpsLimit=o),void 0!==e.pauseOnBlur&&(this.pauseOnBlur=e.pauseOnBlur),void 0!==e.pauseOnOutsideViewport&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),void 0!==e.zLayers&&(this.zLayers=e.zLayers),this.background.load(e.background);const l=null!==(r=e.fullScreen)&&void 0!==r?r:e.backgroundMode;cO(l)?this.fullScreen.enable=l:this.fullScreen.load(l),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map((e=>{const t=new eN;return t.load(e),t}))),this.particles.load(e.particles),this.style=KL(this.style,e.style),this._engine.plugins.loadOptions(this,e),void 0!==e.smooth&&(this.smooth=e.smooth);const c=this._engine.plugins.interactors.get(this._container);if(c)for(const u of c)u.loadOptions&&u.loadOptions(this,e);if(void 0!==e.responsive)for(const u of e.responsive){const e=new tN;e.load(u),this.responsive.push(e)}if(this.responsive.sort(((e,t)=>e.maxWidth-t.maxWidth)),void 0!==e.themes)for(const u of e.themes){const e=this.themes.find((e=>e.name===u.name));if(e)e.load(u);else{const e=new rN;e.load(u),this.themes.push(e)}}this.defaultThemes.dark=null===(i=this._findDefaultTheme("dark"))||void 0===i?void 0:i.name,this.defaultThemes.light=null===(a=this._findDefaultTheme("light"))||void 0===a?void 0:a.name}setResponsive(e,t,n){this.load(n);const r=this.responsive.find((n=>"screen"===n.mode&&screen?n.maxWidth>screen.availWidth:n.maxWidth*t>e));return this.load(null===r||void 0===r?void 0:r.options),null===r||void 0===r?void 0:r.maxWidth}setTheme(e){if(e){const t=this.themes.find((t=>t.name===e));t&&this.load(t.options)}else{const e=WL("(prefers-color-scheme: dark)"),t=e&&e.matches,n=this._findDefaultTheme(t?"dark":"light");n&&this.load(n.options)}}}class qN{constructor(e,t){this.container=t,this._engine=e,this._interactors=e.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&await t.interact(e)}handleClickMode(e){for(const t of this._externalInteractors)t.handleClickMode&&t.handleClickMode(e)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case"external":this._externalInteractors.push(e);break;case"particles":this._particleInteractors.push(e)}e.init()}}async particlesInteract(e,t){for(const n of this._externalInteractors)n.clear(e,t);for(const n of this._particleInteractors)n.isEnabled(e)&&await n.interact(e,t)}async reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}const XN=e=>{if(!qL(e.outMode,e.checkModes))return;const t=2*e.radius;e.coord>e.maxCoord-t?e.setCb(-e.radius):e.coord<t&&e.setCb(e.radius)};class JN{constructor(e,t,n,r,i,a){var s=this;this.container=n,this._calcPosition=function(e,t,n){var r,i,a,o;let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(const[,m]of e.plugins){const e=void 0!==m.particlePosition?m.particlePosition(t,s):void 0;if(e)return bL.create(e.x,e.y,n)}const c=OL({size:e.canvas.size,position:t}),u=bL.create(c.x,c.y,n),d=s.getRadius(),h=s.options.move.outModes,p=t=>{XN({outMode:t,checkModes:["bounce","bounce-horizontal"],coord:u.x,maxCoord:e.canvas.size.width,setCb:e=>u.x+=e,radius:d})},f=t=>{XN({outMode:t,checkModes:["bounce","bounce-vertical"],coord:u.y,maxCoord:e.canvas.size.height,setCb:e=>u.y+=e,radius:d})};return p(null!==(r=h.left)&&void 0!==r?r:h.default),p(null!==(i=h.right)&&void 0!==i?i:h.default),f(null!==(a=h.top)&&void 0!==a?a:h.default),f(null!==(o=h.bottom)&&void 0!==o?o:h.default),s._checkOverlap(u,l)?s._calcPosition(e,void 0,n,l+1):u},this._calculateVelocity=()=>{const e=function(e){const t=wL.origin;return t.length=1,t.angle=e,t}(this.direction),t=e.copy(),n=this.options.move;if("inside"===n.direction||"outside"===n.direction)return t;const r=Math.PI/180*PL(n.angle.value),i=Math.PI/180*PL(n.angle.offset),a={left:i-r/2,right:i+r/2};return n.straight||(t.angle+=kL(IL(a.left,a.right))),n.random&&"number"===typeof n.speed&&(t.length*=CL()),t},this._checkOverlap=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=s.options.collisions,r=s.getRadius();if(!n.enable)return!1;const i=n.overlap;if(i.enable)return!1;const a=i.retries;if(a>=0&&t>a)throw new Error("".concat(xL," particle is overlapping and can't be placed"));return!!s.container.particles.find((t=>FL(e,t.position)<r+t.getRadius()))},this._getRollColor=e=>{var t;if(!e||!this.roll||!this.backColor&&!this.roll.alter)return e;const n=this.roll.horizontal&&this.roll.vertical?2:1,r=this.roll.horizontal?Math.PI/2:0;return Math.floor(((null!==(t=this.roll.angle)&&void 0!==t?t:0)+r)/(Math.PI/n))%2?this.backColor?this.backColor:this.roll.alter?function(e,t,n){return{h:e.h,s:e.s,l:e.l+("darken"===t?-1:1)*n}}(e,this.roll.alter.type,this.roll.alter.value):e:e},this._initPosition=e=>{var t,n;const r=this.container,i=PL(this.options.zIndex.value);this.position=this._calcPosition(r,e,ML(i,0,r.zLayers)),this.initialPosition=this.position.copy();const a=r.canvas.size;switch(this.moveCenter=(0,c.A)((0,c.A)({},lO(this.options.move.center,a)),{},{radius:null!==(t=this.options.move.center.radius)&&void 0!==t?t:0,mode:null!==(n=this.options.move.center.mode)&&void 0!==n?n:"percent"}),this.direction=function(e,t,n){if(dO(e))return e*Math.PI/180;switch(e){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(n.y-t.y,n.x-t.x);case"outside":return Math.atan2(t.y-n.y,t.x-n.x);default:return CL()*Math.PI*2}}(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside"}this.offset=wL.origin},this._loadShapeData=(e,t)=>{const n=e.options[this.shape];if(n)return KL({close:e.close,fill:e.fill},iO(n,this.id,t))},this._engine=e,this.init(t,r,i,a)}destroy(e){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,n=this.pathGenerator;for(const[,r]of t.plugins)r.particleDestroyed&&r.particleDestroyed(this,e);for(const r of t.particles.updaters)r.particleDestroyed&&r.particleDestroyed(this,e);n&&n.reset(this)}draw(e){const t=this.container;for(const[,n]of t.plugins)t.canvas.drawParticlePlugin(n,this,e);t.canvas.drawParticle(this,e)}getFillColor(){var e;return this._getRollColor(null!==(e=this.bubble.color)&&void 0!==e?e:DO(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){var e;return null!==(e=this.bubble.radius)&&void 0!==e?e:this.size.value}getStrokeColor(){var e;return this._getRollColor(null!==(e=this.bubble.color)&&void 0!==e?e:DO(this.strokeColor))}init(e,t,n,r){var i,a,s;const o=this.container,l=this._engine;this.id=e,this.group=r,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const c=o.retina.pixelRatio,u=o.actualOptions,d=VN(this._engine,o,u.particles),h=d.shape.type,{reduceDuplicates:p}=d;this.shape=iO(h,this.id,p);const f=d.shape;if(n&&n.shape&&n.shape.type){const e=iO(n.shape.type,this.id,p);e&&(this.shape=e,f.load(n.shape))}this.shapeData=this._loadShapeData(f,p),d.load(n);const m=this.shapeData;m&&d.load(m.particles);const g=new $O(l,o);g.load(o.actualOptions.interactivity),g.load(d.interactivity),this.interactivity=g,this.fill=null!==(i=null===m||void 0===m?void 0:m.fill)&&void 0!==i?i:d.shape.fill,this.close=null!==(a=null===m||void 0===m?void 0:m.close)&&void 0!==a?a:d.shape.close,this.options=d;const v=this.options.move.path;this.pathDelay=1e3*BL(v.delay),v.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(v.generator),this.pathGenerator&&o.addPath(v.generator,this.pathGenerator)&&this.pathGenerator.init(o)),o.retina.initParticle(this),this.size=sO(this.options.size,c),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-PL(this.options.move.decay);const y=o.particles;y.needsSort=y.needsSort||y.lastZIndex<this.position.z,y.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/o.zLayers,this.sides=24;let x=o.drawers.get(this.shape);x||(x=this._engine.plugins.getShapeDrawer(this.shape),x&&o.drawers.set(this.shape,x)),x&&x.loadShape&&x.loadShape(this);const b=null===(s=x)||void 0===s?void 0:s.getSidesCount;b&&(this.sides=b(this)),this.spawning=!1,this.shadowColor=wO(this.options.shadow.color);for(const w of o.particles.updaters)w.init(this);for(const w of o.particles.movers)w.init&&w.init(this);x&&x.particleInit&&x.particleInit(o,this);for(const[,w]of o.plugins)w.particleCreated&&w.particleCreated(this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,n=this.position;return n.x>=-e&&n.y>=-e&&n.y<=t.height+e&&n.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const e of this.container.particles.updaters)e.reset&&e.reset(this)}}class YN{constructor(e,t){this.position=e,this.particle=t}}class KN{constructor(e,t){this.position={x:e,y:t}}}class ZN extends KN{constructor(e,t,n,r){super(e,t),this.size={height:r,width:n}}contains(e){const t=this.size.width,n=this.size.height,r=this.position;return e.x>=r.x&&e.x<=r.x+t&&e.y>=r.y&&e.y<=r.y+n}intersects(e){e instanceof QN&&e.intersects(this);const t=this.size.width,n=this.size.height,r=this.position,i=e.position,a=e instanceof ZN?e.size:{width:0,height:0},s=a.width,o=a.height;return i.x<r.x+t&&i.x+s>r.x&&i.y<r.y+n&&i.y+o>r.y}}class QN extends KN{constructor(e,t,n){super(e,t),this.radius=n}contains(e){return FL(e,this.position)<=this.radius}intersects(e){const t=this.position,n=e.position,r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),a=this.radius;if(e instanceof QN){return a+e.radius>Math.sqrt(r**2+i**2)}if(e instanceof ZN){const{width:t,height:n}=e.size;return Math.pow(r-t,2)+Math.pow(i-n,2)<=a**2||r<=a+t&&i<=a+n||r<=t||i<=n}return!1}}class $N{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:e,y:t}=this.rectangle.position,{width:n,height:r}=this.rectangle.size,{capacity:i}=this;for(let a=0;a<4;a++)this._subs.push(new $N(new ZN(e+n/2*(a%2),t+r/2*(Math.round(a/2)-a%2),n/2,r/2),i));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return!!this.rectangle.contains(e.position)&&(this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some((t=>t.insert(e)))))}query(e,t,n){const r=n||[];if(!e.intersects(this.rectangle))return[];for(const i of this._points)!e.contains(i.position)&&FL(e.position,i.position)>i.particle.getRadius()&&(!t||t(i.particle))||r.push(i.particle);if(this._divided)for(const i of this._subs)i.query(e,t,r);return r}queryCircle(e,t,n){return this.query(new QN(e.x,e.y,t),n)}queryRectangle(e,t,n){return this.query(new ZN(e.x,e.y,t.width,t.height),n)}}const ez=e=>new ZN(-e.width/4,-e.height/4,3*e.width/2,3*e.height/2);class tz{constructor(e,t){this._applyDensity=(e,t,n)=>{var r;if(null===(r=e.number.density)||void 0===r||!r.enable)return;const i=e.number,a=this._initDensityFactor(i.density),s=i.value,o=i.limit>0?i.limit:s,l=Math.min(s,o)*a+t,c=Math.min(this.count,this.filter((e=>e.group===n)).length);this.limit=i.limit*a,c<l?this.push(Math.abs(l-c),void 0,e,n):c>l&&this.removeQuantity(c-l,n)},this._initDensityFactor=e=>{const t=this._container;if(!t.canvas.element||!e.enable)return 1;const n=t.canvas.element,r=t.retina.pixelRatio;return n.width*n.height/(e.factor*r**2*e.area)},this._pushParticle=(e,t,n,r)=>{try{let i=this.pool.pop();i?i.init(this._nextId,e,t,n):i=new JN(this._engine,this._nextId,this._container,e,t,n);let a=!0;if(r&&(a=r(i)),!a)return;return this._array.push(i),this._zArray.push(i),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:i}}),i}catch(Zie){return void HL().warning("".concat(xL," adding particle: ").concat(Zie))}},this._removeParticle=(e,t,n)=>{const r=this._array[e];if(!r||r.group!==t)return!1;r.destroy(n);const i=this._zArray.indexOf(r);return this._array.splice(e,1),this._zArray.splice(i,1),this.pool.push(r),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:r}}),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new qN(e,t);const n=t.canvas.size;this.quadTree=new $N(ez(n),4),this.movers=this._engine.plugins.getMovers(t,!0),this.updaters=this._engine.plugins.getUpdaters(t,!0)}get count(){return this._array.length}addManualParticles(){const e=this._container,t=e.actualOptions;for(const n of t.manualParticles)this.addParticle(n.position?lO(n.position,e.canvas.size):void 0,n.options)}addParticle(e,t,n,r){const i=this._container.actualOptions.particles.number.limit;if(i>0){const e=this.count+1-i;e>0&&this.removeQuantity(e)}return this._pushParticle(e,t,n,r)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(e){const t=this._container;t.canvas.clear(),await this.update(e);for(const[,n]of t.plugins)t.canvas.drawPlugin(n,e);for(const n of this._zArray)n.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}handleClickMode(e){this._interactionManager.handleClickMode(e)}init(){const e=this._container,t=e.actualOptions;this.lastZIndex=0,this.needsSort=!1;let n=!1;this.updaters=this._engine.plugins.getUpdaters(e,!0),this._interactionManager.init();for(const[,i]of e.plugins)if(void 0!==i.particlesInitialization&&(n=i.particlesInitialization()),n)break;this._interactionManager.init();for(const[,i]of e.pathGenerators)i.init(e);if(this.addManualParticles(),!n){for(const e in t.particles.groups){const n=t.particles.groups[e];for(let i=this.count,a=0;a<(null===(r=n.number)||void 0===r?void 0:r.value)&&i<t.particles.number.value;i++,a++){var r;this.addParticle(void 0,n,e)}}for(let e=this.count;e<t.particles.number.value;e++)this.addParticle()}}push(e,t,n,r){this.pushing=!0;for(let i=0;i<e;i++)this.addParticle(null===t||void 0===t?void 0:t.position,n,r);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(e,t,n){this.removeAt(this._array.indexOf(e),void 0,t,n)}removeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(e<0||e>this.count)return;let i=0;for(let a=e;i<t&&a<this.count;a++)this._removeParticle(a--,n,r)&&i++}removeQuantity(e,t){this.removeAt(0,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups;for(const n in t)this._applyDensity(t[n],0,n);this._applyDensity(e.particles,e.manualParticles.length)}async update(e){const t=this._container,n=new Set;this.quadTree=new $N(ez(t.canvas.size),4);for(const[,r]of t.pathGenerators)r.update();for(const[,r]of t.plugins)r.update&&r.update(e);for(const r of this._array){const i=t.canvas.resizeFactor;i&&!r.ignoresResizeRatio&&(r.position.x*=i.width,r.position.y*=i.height,r.initialPosition.x*=i.width,r.initialPosition.y*=i.height),r.ignoresResizeRatio=!1,await this._interactionManager.reset(r);for(const[,t]of this._container.plugins){if(r.destroyed)break;t.particleUpdate&&t.particleUpdate(r,e)}for(const t of this.movers)t.isEnabled(r)&&t.move(r,e);r.destroyed?n.add(r):this.quadTree.insert(new YN(r.getPosition(),r))}if(n.size){const e=e=>!n.has(e);this._array=this.filter(e),this._zArray=this._zArray.filter(e),this.pool.push(...n)}await this._interactionManager.externalInteract(e);for(const r of this._array){for(const t of this.updaters)t.update(r,e);r.destroyed||r.spawning||await this._interactionManager.particlesInteract(r,e)}if(delete t.canvas.resizeFactor,this.needsSort){const e=this._zArray;e.sort(((e,t)=>t.position.z-e.position.z||e.id-t.id)),this.lastZIndex=e[e.length-1].position.z,this.needsSort=!1}}}class nz{constructor(e){this.container=e,this.pixelRatio=1,this.reduceFactor=1}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||VL()?1:window.devicePixelRatio,this.reduceFactor=1;const n=this.pixelRatio;if(e.canvas.element){const t=e.canvas.element;e.canvas.size.width=t.offsetWidth*n,e.canvas.size.height=t.offsetHeight*n}const r=t.particles,i=r.move;this.attractDistance=PL(i.attract.distance)*n,this.maxSpeed=PL(i.gravity.maxSpeed)*n,this.sizeAnimationSpeed=PL(r.size.animation.speed)*n}initParticle(e){const t=e.options,n=this.pixelRatio,r=t.move,i=r.distance,a=e.retina;a.attractDistance=PL(r.attract.distance)*n,a.moveDrift=PL(r.drift)*n,a.moveSpeed=PL(r.speed)*n,a.sizeAnimationSpeed=PL(t.size.animation.speed)*n;const s=a.maxDistance;s.horizontal=void 0!==i.horizontal?i.horizontal*n:void 0,s.vertical=void 0!==i.vertical?i.vertical*n:void 0,a.maxSpeed=PL(r.gravity.maxSpeed)*n}}function rz(e){return e&&!e.destroyed}function iz(e,t){const n=new WN(e,t);for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return GN(n,...i),n}const az={generate:e=>e.velocity,init:()=>{},update:()=>{},reset:()=>{}};class sz{constructor(e,t,n){this.id=t,this._intersectionManager=e=>{if(rz(this)&&this.actualOptions.pauseOnOutsideViewport)for(const t of e)t.target===this.interactivity.element&&(t.isIntersecting?this.play:this.pause)()},this._nextFrame=async e=>{try{var t;if(!this.smooth&&void 0!==this.lastFrameTime&&e<this.lastFrameTime+1e3/this.fpsLimit)return void this.draw(!1);null!==(t=this.lastFrameTime)&&void 0!==t||(this.lastFrameTime=e);const n=function(e){return{value:e,factor:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?60/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:60):60*e/1e3}}(e-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(n.value),this.lastFrameTime=e,n.value>1e3)return void this.draw(!1);if(await this.particles.draw(n),!this.alive())return void this.destroy();this.getAnimationStatus()&&this.draw(!1)}catch(Zie){HL().error("".concat(xL," in animation loop"),Zie)}},this._engine=e,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=n,this._initialSourceOptions=n,this.retina=new nz(this),this.canvas=new OO(this),this.particles=new tz(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=iz(this._engine,this),this.actualOptions=iz(this._engine,this),this._eventListeners=new zO(this),"undefined"!==typeof IntersectionObserver&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver((e=>this._intersectionManager(e)))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!rz(this))return;const t=this.interactivity.element;if(!t)return;const n=(t,n,r)=>{if(!rz(this))return;const i=this.retina.pixelRatio,a={x:n.x*i,y:n.y*i},s=this.particles.quadTree.queryCircle(a,r*i);e(t,s)};let r=!1,i=!1;t.addEventListener("click",(e=>{if(!rz(this))return;const t=e,r={x:t.offsetX||t.clientX,y:t.offsetY||t.clientY};n(e,r,1)})),t.addEventListener("touchstart",(()=>{rz(this)&&(r=!0,i=!1)})),t.addEventListener("touchmove",(()=>{rz(this)&&(i=!0)})),t.addEventListener("touchend",(e=>{if(rz(this)){if(r&&!i){const t=e;let r=t.touches[t.touches.length-1];if(!r&&(r=t.changedTouches[t.changedTouches.length-1],!r))return;const i=this.canvas.element,a=i?i.getBoundingClientRect():void 0,s={x:r.clientX-(a?a.left:0),y:r.clientY-(a?a.top:0)};n(e,s,Math.max(r.radiusX,r.radiusY))}r=!1,i=!1}})),t.addEventListener("touchcancel",(()=>{rz(this)&&(r=!1,i=!1)}))}addLifeTime(e){this._lifeTime+=e}addPath(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!rz(this)||!n&&this.pathGenerators.has(e))&&(this.pathGenerators.set(e,null!==t&&void 0!==t?t:az),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!rz(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,n]of this.drawers)n.destroy&&n.destroy(this);for(const n of this.drawers.keys())this.drawers.delete(n);this._engine.plugins.destroy(this),this.destroyed=!0;const e=this._engine.dom(),t=e.findIndex((e=>e===this));t>=0&&e.splice(t,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(e){if(!rz(this))return;let t=e;this._drawAnimationFrame=requestAnimationFrame((async e=>{t&&(this.lastFrameTime=void 0,t=!1),await this._nextFrame(e)}))}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[,n]of this.plugins){if(!n.export)continue;const r=await n.export(e,t);if(r.supported)return r.blob}HL().error("".concat(xL," - Export plugin with type ").concat(e," not found"))}getAnimationStatus(){return!this._paused&&!this.pageHidden&&rz(this)}handleClickMode(e){if(rz(this)){this.particles.handleClickMode(e);for(const[,t]of this.plugins)t.handleClickMode&&t.handleClickMode(e)}}async init(){if(!rz(this))return;const e=this._engine.plugins.getSupportedShapes();for(const n of e){const e=this._engine.plugins.getShapeDrawer(n);e&&this.drawers.set(n,e)}this._options=iz(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=iz(this._engine,this,this._options);const t=this._engine.plugins.getAvailablePlugins(this);for(const[n,r]of t)this.plugins.set(n,r);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=1e3*PL(this.actualOptions.duration),this._delay=1e3*PL(this.actualOptions.delay),this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,n]of this.drawers)n.init&&await n.init(this);for(const[,n]of this.plugins)n.init&&await n.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,n]of this.plugins)n.particlesSetup&&n.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(e){rz(this)&&(this._currentTheme=e,await this.refresh())}pause(){if(rz(this)&&(void 0!==this._drawAnimationFrame&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,e]of this.plugins)e.pause&&e.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(e){if(!rz(this))return;const t=this._paused||e;if(!this._firstStart||this.actualOptions.autoPlay){if(this._paused&&(this._paused=!1),t)for(const[,e]of this.plugins)e.play&&e.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(t||!1)}else this._firstStart=!1}async refresh(){if(rz(this))return this.stop(),this.start()}async reset(){if(rz(this))return this._initialSourceOptions=void 0,this._options=iz(this._engine,this),this.actualOptions=iz(this._engine,this,this._options),this.refresh()}setNoise(e,t,n){rz(this)&&this.setPath(e,t,n)}setPath(e,t,n){if(!e||!rz(this))return;const r=(0,c.A)({},az);if(hO(e))r.generate=e,t&&(r.init=t),n&&(r.update=n);else{const t=r;r.generate=e.generate||t.generate,r.init=e.init||t.init,r.update=e.update||t.update}this.addPath("default",r,!0)}async start(){rz(this)&&!this.started&&(await this.init(),this.started=!0,await new Promise((e=>{this._delayTimeout=setTimeout((async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,e]of this.plugins)e.start&&await e.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),e()}),this._delay)})))}stop(){if(rz(this)&&this.started){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,e]of this.plugins)e.stop&&e.stop();for(const e of this.plugins.keys())this.plugins.delete(e);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth!==e&&(this.responsiveMaxWidth=e,!0)}}class oz{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let n=this._listeners.get(e);n||(n=[],this._listeners.set(e,n)),n.push(t)}dispatchEvent(e,t){const n=this._listeners.get(e);n&&n.forEach((e=>e(t)))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const n=this._listeners.get(e);if(!n)return;const r=n.length,i=n.indexOf(t);i<0||(1===r?this._listeners.delete(e):n.splice(i,1))}}function lz(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.get(e);return i&&!r||(i=[...n.values()].map((t=>t(e))),t.set(e,i)),i}class cz{constructor(e){this._engine=e,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(e,t){this._initializers.interactors.set(e,t)}addParticleMover(e,t){this._initializers.movers.set(e,t)}addParticleUpdater(e,t){this._initializers.updaters.set(e,t)}addPathGenerator(e,t){!this.getPathGenerator(e)&&this.pathGenerators.set(e,t)}addPlugin(e){!this.getPlugin(e.id)&&this.plugins.push(e)}addPreset(e,t){(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||!this.getPreset(e))&&this.presets.set(e,t)}addShapeDrawer(e,t){rO(e,(e=>{!this.getShapeDrawer(e)&&this.drawers.set(e,t)}))}destroy(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}getAvailablePlugins(e){const t=new Map;for(const n of this.plugins)n.needsPlugin(e.actualOptions)&&t.set(n.id,n.getPlugin(e));return t}getInteractors(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return lz(e,this.interactors,this._initializers.interactors,t)}getMovers(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return lz(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find((t=>t.id===e))}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.drawers.get(e)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return lz(e,this.updaters,this._initializers.updaters,t)}loadOptions(e,t){for(const n of this.plugins)n.loadOptions(e,t)}loadParticlesOptions(e,t){const n=this.updaters.get(e);if(n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];for(const e of n)e.loadOptions&&e.loadOptions(t,...i)}}}class uz{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new oz,this._initialized=!1,this.plugins=new cz(this)}get configs(){const e={};for(const[t,n]of this._configs)e[t]=n;return e}get version(){return"2.12.0"}addConfig(e,t){var n;uO(e)?t&&(t.name=e,this._configs.set(e,t)):this._configs.set(null!==(n=e.name)&&void 0!==n?n:"default",e)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.plugins.addInteractor(e,t),await this.refresh(n)}async addMover(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.plugins.addParticleMover(e,t),await this.refresh(n)}async addParticleUpdater(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.plugins.addParticleUpdater(e,t),await this.refresh(n)}async addPathGenerator(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.plugins.addPathGenerator(e,t),await this.refresh(n)}async addPlugin(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.plugins.addPlugin(e),await this.refresh(t)}async addPreset(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.plugins.addPreset(e,t,n),await this.refresh(r)}async addShape(e,t,n,r,i){let a,s,o,l,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];cO(n)?(c=n,s=void 0):s=n,cO(r)?(c=r,o=void 0):o=r,cO(i)?(c=i,l=void 0):l=i,a=hO(t)?{afterEffect:o,destroy:l,draw:t,init:s}:t,this.plugins.addShapeDrawer(e,a),await this.refresh(c)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this._domArray}domItem(e){const t=this.dom(),n=t[e];if(n&&!n.destroyed)return n;t.splice(e,1)}init(){this._initialized||(this._initialized=!0)}async load(e,t){return this.loadFromArray(e,t)}async loadFromArray(e,t,n){let r;return!function(e){return!(!(t=e).id&&!t.element&&!t.url&&!t.options);var t}(e)?(r={},uO(e)?r.id=e:r.options=e,dO(t)?r.index=t:r.options=null!==t&&void 0!==t?t:r.options,r.index=null!==n&&void 0!==n?n:r.index):r=e,this._loadParams(r)}async loadJSON(e,t,n){let r,i;return dO(t)||void 0===t?r=e:(i=e,r=t),this._loadParams({id:i,url:r,index:n})}async refresh(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.dom().forEach((e=>e.refresh()))}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}async set(e,t,n,r){const i={index:r};return uO(e)?i.id=e:i.element=e,t instanceof HTMLElement?i.element=t:i.options=t,dO(n)?i.index=n:i.options=null!==n&&void 0!==n?n:i.options,this._loadParams(i)}async setJSON(e,t,n,r){const i={};return e instanceof HTMLElement?(i.element=e,i.url=t,i.index=n):(i.id=e,i.element=t,i.url=n,i.index=r),this._loadParams(i)}setOnClickHandler(e){const t=this.dom();if(!t.length)throw new Error("".concat(xL," can only set click handlers after calling tsParticles.load()"));for(const n of t)n.addClickHandler(e)}async _loadParams(e){var t,n;const r=null!==(t=e.id)&&void 0!==t?t:"tsparticles".concat(Math.floor(1e4*CL())),{index:i,url:a}=e,s=a?await async function(e){const t=iO(e.url,e.index);if(!t)return e.fallback;const n=await fetch(t);return n.ok?n.json():(HL().error("".concat(xL," ").concat(n.status," while retrieving config file")),e.fallback)}({fallback:e.options,url:a,index:i}):e.options;let o=null!==(n=e.element)&&void 0!==n?n:document.getElementById(r);o||(o=document.createElement("div"),o.id=r,document.body.append(o));const l=iO(s,i),c=this.dom(),u=c.findIndex((e=>e.id===r));if(u>=0){const e=this.domItem(u);e&&!e.destroyed&&(e.destroy(),c.splice(u,1))}let d;if("canvas"===o.tagName.toLowerCase())d=o,d.dataset[mL]="false";else{const e=o.getElementsByTagName("canvas");e.length?(d=e[0],d.dataset[mL]="false"):(d=document.createElement("canvas"),d.dataset[mL]="true",o.appendChild(d))}d.style.width||(d.style.width="100%"),d.style.height||(d.style.height="100%");const h=new sz(this,r,l);return u>=0?c.splice(u,0,h):c.push(h),h.canvas.loadCanvas(d),await h.start(),h}}class dz{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){var t;const n=null!==(t=e.value.hsl)&&void 0!==t?t:e.value;if(void 0!==n.h&&void 0!==n.s&&void 0!==n.l)return EO(n)}handleRangeColor(e){var t;const n=null!==(t=e.value.hsl)&&void 0!==t?t:e.value;if(void 0!==n.h&&void 0!==n.l)return EO({h:PL(n.h),l:PL(n.l),s:PL(n.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i.exec(e);return t?function(e){const t=EO(e);return{a:e.a,b:t.b,g:t.g,r:t.r}}({a:t.length>4?NL(t[5]):1,h:parseInt(t[1],10),l:parseInt(t[3],10),s:parseInt(t[2],10)}):void 0}}class hz{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){var t;const n=null!==(t=e.value.rgb)&&void 0!==t?t:e.value;if(void 0!==n.r)return n}handleRangeColor(e){var t;const n=null!==(t=e.value.rgb)&&void 0!==t?t:e.value;if(void 0!==n.r)return{r:PL(n.r),g:PL(n.g),b:PL(n.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i.exec(e);return t?{a:t.length>4?NL(t[5]):1,b:parseInt(t[3],10),g:parseInt(t[2],10),r:parseInt(t[1],10)}:void 0}}const pz=function(){const e=new hz,t=new dz;yO(e),yO(t);const n=new uz;return n.init(),n}();VL()||(window.tsParticles=pz);const fz=e=>"object"===typeof e&&null!==e;function mz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!1;if(!fz(e)||!fz(t))return e===t;const r=Object.keys(e).filter((e=>!n(e))),i=Object.keys(t).filter((e=>!n(e)));if(r.length!==i.length)return!1;for(const a of r){const r=e[a],i=t[a];if(fz(r)&&fz(i)){if(r===t&&i===e)continue;if(!mz(r,i,n))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(!gz(r,i,n))return!1}else if(r!==i)return!1}return!0}function gz(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const i=e[r],a=t[r];if(Array.isArray(i)&&Array.isArray(a)){if(!gz(i,a,n))return!1}else if(fz(i)&&fz(a)){if(!mz(i,a,n))return!1}else if(i!==a)return!1}return!0}const vz="tsparticles";class yz extends r.Component{constructor(e){super(e),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(e){var t,n;const r=null!==(t=e.options)&&void 0!==t?t:e.params,i=null!==(n=this.props.options)&&void 0!==n?n:this.props.params;return e.url!==this.props.url||e.id!==this.props.id||e.canvasClassName!==this.props.canvasClassName||e.className!==this.props.className||e.height!==this.props.height||e.width!==this.props.width||!mz(e.style,this.props.style)||e.init!==this.props.init||e.loaded!==this.props.loaded||!mz(r,i,(e=>e.startsWith("_")))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then((()=>{super.forceUpdate()}))}componentDidMount(){(async()=>{this.props.init&&await this.props.init(pz),this.setState({init:!0},(async()=>{await this.loadParticles()}))})()}componentWillUnmount(){this.destroy()}render(){const{width:e,height:t,className:n,canvasClassName:i,id:a}=this.props;return r.createElement("div",{className:n,id:a},r.createElement("canvas",{className:i,style:(0,c.A)((0,c.A)({},this.props.style),{},{width:e,height:t})}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){var e,t,n;if(!this.state.init)return;const r=null!==(e=null!==(t=this.props.id)&&void 0!==t?t:yz.defaultProps.id)&&void 0!==e?e:vz,i=await pz.load({url:this.props.url,id:r,options:null!==(n=this.props.options)&&void 0!==n?n:this.props.params});this.props.container&&(this.props.container.current=i),this.setState({library:i}),this.props.loaded&&await this.props.loaded(i)}}yz.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:vz};const xz=yz;class bz{static init(e){var t,n,r,i,a,s,o;const l=new bz,c=e.selector;if(!c)throw new Error("No selector provided");const u=document.querySelector(c);if(!u)throw new Error("No element found for selector");return pz.set(c.replace(".","").replace("!",""),u,{fullScreen:{enable:!1},particles:{color:{value:null!==(t=e.color)&&void 0!==t?t:"!000000"},links:{color:"random",distance:null!==(n=e.minDistance)&&void 0!==n?n:120,enable:null!==(r=e.connectParticles)&&void 0!==r&&r},move:{enable:!0,speed:null!==(i=e.speed)&&void 0!==i?i:.5},number:{value:null!==(a=e.maxParticles)&&void 0!==a?a:100},size:{value:{min:1,max:null!==(s=e.sizeVariations)&&void 0!==s?s:3}}},responsive:null===(o=e.responsive)||void 0===o?void 0:o.map((t=>{var n,r,i,a,s;return{maxWidth:t.breakpoint,options:{particles:{color:{value:null===(n=t.options)||void 0===n?void 0:n.color},links:{distance:null===(r=t.options)||void 0===r?void 0:r.minDistance,enable:null===(i=t.options)||void 0===i?void 0:i.connectParticles},number:{value:e.maxParticles},move:{enable:!0,speed:null===(a=t.options)||void 0===a?void 0:a.speed},size:{value:null===(s=t.options)||void 0===s?void 0:s.sizeVariations}}}}}))}).then((e=>{l._container=e})),l}destroy(){const e=this._container;e&&e.destroy()}pauseAnimation(){const e=this._container;e&&e.pause()}resumeAnimation(){const e=this._container;e&&e.play()}}function wz(e,t,n,r,i,a){!function(e,t){var n;const r=e.options,i=r.move.path;if(!i.enable)return;if(e.lastPathTime<=e.pathDelay)return void(e.lastPathTime+=t.value);const a=null===(n=e.pathGenerator)||void 0===n?void 0:n.generate(e,t);a&&e.velocity.addTo(a);i.clamp&&(e.velocity.x=ML(e.velocity.x,-1,1),e.velocity.y=ML(e.velocity.y,-1,1));e.lastPathTime-=e.pathDelay}(e,a);const s=e.gravity,o=null!==s&&void 0!==s&&s.enable&&s.inverse?-1:1;i&&n&&(e.velocity.x+=i*a.factor/(60*n)),null!==s&&void 0!==s&&s.enable&&n&&(e.velocity.y+=o*(s.acceleration*a.factor)/(60*n));const l=e.moveDecay;e.velocity.multTo(l);const c=e.velocity.mult(n);null!==s&&void 0!==s&&s.enable&&r>0&&(!s.inverse&&c.y>=0&&c.y>=r||s.inverse&&c.y<=0&&c.y<=-r)&&(c.y=o*r,n&&(e.velocity.y=c.y/n));const u=e.options.zIndex,d=(1-e.zIndexFactor)**u.velocityRate;c.multTo(d);const{position:h}=e;h.addTo(c),t.vibrate&&(h.x+=Math.sin(h.x*Math.cos(h.y)),h.y+=Math.cos(h.y*Math.sin(h.x)))}class Sz{constructor(){this._initSpin=e=>{var t;const n=e.container,r=e.options.move.spin;if(!r.enable)return;const i=null!==(t=r.position)&&void 0!==t?t:{x:50,y:50},a={x:i.x/100*n.canvas.size.width,y:i.y/100*n.canvas.size.height},s=FL(e.getPosition(),a),o=PL(r.acceleration);e.retina.spinAcceleration=o*n.retina.pixelRatio,e.spin={center:a,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:s,acceleration:e.retina.spinAcceleration}}}init(e){const t=e.options.move.gravity;e.gravity={enable:t.enable,acceleration:PL(t.acceleration),inverse:t.inverse},this._initSpin(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){var n,r,i,a,s;const o=e.options,l=o.move;if(!l.enable)return;const c=e.container,u=c.retina.pixelRatio,d=function(e){return e.slow.inRange?e.slow.factor:1}(e),h=(null!==(r=(n=e.retina).moveSpeed)&&void 0!==r?r:n.moveSpeed=PL(l.speed)*u)*c.retina.reduceFactor,p=null!==(a=(i=e.retina).moveDrift)&&void 0!==a?a:i.moveDrift=PL(e.options.move.drift)*u,f=DL(o.size.value)*u,m=h*(l.size?e.getRadius()/f:1)*d*(t.factor||1)/2,g=null!==(s=e.retina.maxSpeed)&&void 0!==s?s:c.retina.maxSpeed;l.spin.enable?function(e,t){const n=e.container;if(!e.spin)return;const r={x:"clockwise"===e.spin.direction?Math.cos:Math.sin,y:"clockwise"===e.spin.direction?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*r.x(e.spin.angle),e.position.y=e.spin.center.y+e.spin.radius*r.y(e.spin.angle),e.spin.radius+=e.spin.acceleration;const i=Math.max(n.canvas.size.width,n.canvas.size.height);e.spin.radius>i/2?(e.spin.radius=i/2,e.spin.acceleration*=-1):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-1),e.spin.angle+=t/100*(1-e.spin.radius/i)}(e,m):wz(e,l,m,g,p,t),function(e){const t=e.initialPosition,{dx:n,dy:r}=jL(t,e.position),i=Math.abs(n),a=Math.abs(r),{maxDistance:s}=e.retina,o=s.horizontal,l=s.vertical;if(o||l)if((o&&i>=o||l&&a>=l)&&!e.misplaced)e.misplaced=!!o&&i>o||!!l&&a>l,o&&(e.velocity.x=e.velocity.y/2-e.velocity.x),l&&(e.velocity.y=e.velocity.x/2-e.velocity.y);else if((!o||i<o)&&(!l||a<l)&&e.misplaced)e.misplaced=!1;else if(e.misplaced){const n=e.position,r=e.velocity;o&&(n.x<t.x&&r.x<0||n.x>t.x&&r.x>0)&&(r.x*=-CL()),l&&(n.y<t.y&&r.y<0||n.y>t.y&&r.y>0)&&(r.y*=-CL())}}(e)}}class _z{draw(e,t,n){t.circleRange||(t.circleRange={min:0,max:2*Math.PI});const r=t.circleRange;e.arc(0,0,n,r.min,r.max,!1)}getSidesCount(){return 12}particleInit(e,t){var n;const r=t.shapeData,i=null!==(n=null===r||void 0===r?void 0:r.angle)&&void 0!==n?n:{max:360,min:0};t.circleRange=pO(i)?{min:i.min*Math.PI/180,max:i.max*Math.PI/180}:{min:0,max:i*Math.PI/180}}}function Az(e,t,n,r,i){var a,s,o,l,c,u,d,h,p;if(!t||!n.enable||(null!==(a=t.maxLoops)&&void 0!==a?a:0)>0&&(null!==(s=t.loops)&&void 0!==s?s:0)>(null!==(o=t.maxLoops)&&void 0!==o?o:0))return;if(t.time||(t.time=0),(null!==(l=t.delayTime)&&void 0!==l?l:0)>0&&t.time<(null!==(c=t.delayTime)&&void 0!==c?c:0)&&(t.time+=e.value),(null!==(u=t.delayTime)&&void 0!==u?u:0)>0&&t.time<(null!==(d=t.delayTime)&&void 0!==d?d:0))return;const f=kL(n.offset),m=(null!==(h=t.velocity)&&void 0!==h?h:0)*e.factor+3.6*f,g=null!==(p=t.decay)&&void 0!==p?p:1;i&&"increasing"!==t.status?(t.value-=m,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)):(t.value+=m,t.value>r&&(t.loops||(t.loops=0),t.loops++,i&&(t.status="decreasing",t.value-=t.value%r))),t.velocity&&1!==g&&(t.velocity*=g),t.value>r&&(t.value%=r)}class Ez{constructor(e){this.container=e}init(e){const t=_O(e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=IO(t,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){const{h:t,s:n,l:r}=e.options.color.animation,{color:i}=e;return!e.destroyed&&!e.spawning&&(void 0!==(null===i||void 0===i?void 0:i.h.value)&&t.enable||void 0!==(null===i||void 0===i?void 0:i.s.value)&&n.enable||void 0!==(null===i||void 0===i?void 0:i.l.value)&&r.enable)}update(e,t){!function(e,t){const{h:n,s:r,l:i}=e.options.color.animation,{color:a}=e;if(!a)return;const{h:s,s:o,l:l}=a;s&&Az(t,s,n,360,!1),o&&Az(t,o,r,100,!0),l&&Az(t,l,i,100,!0)}(e,t)}}class Cz{constructor(e){this.container=e}init(e){const t=e.options.opacity;e.opacity=sO(t,1);const n=t.animation;n.enable&&(e.opacity.velocity=PL(n.speed)/100*this.container.retina.reduceFactor,n.sync||(e.opacity.velocity*=CL()))}isEnabled(e){var t,n,r,i;return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((null!==(t=e.opacity.maxLoops)&&void 0!==t?t:0)<=0||(null!==(n=e.opacity.maxLoops)&&void 0!==n?n:0)>0&&(null!==(r=e.opacity.loops)&&void 0!==r?r:0)<(null!==(i=e.opacity.maxLoops)&&void 0!==i?i:0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){this.isEnabled(e)&&function(e,t){var n,r,i,a,s,o,l,c;const u=e.opacity;if(e.destroyed||null===u||void 0===u||!u.enable||(null!==(n=u.maxLoops)&&void 0!==n?n:0)>0&&(null!==(r=u.loops)&&void 0!==r?r:0)>(null!==(i=u.maxLoops)&&void 0!==i?i:0))return;const d=u.min,h=u.max,p=null!==(a=u.decay)&&void 0!==a?a:1;if(u.time||(u.time=0),(null!==(s=u.delayTime)&&void 0!==s?s:0)>0&&u.time<(null!==(o=u.delayTime)&&void 0!==o?o:0)&&(u.time+=t.value),!((null!==(l=u.delayTime)&&void 0!==l?l:0)>0&&u.time<(null!==(c=u.delayTime)&&void 0!==c?c:0))){switch(u.status){case"increasing":var f;u.value>=h?(u.status="decreasing",u.loops||(u.loops=0),u.loops++):u.value+=(null!==(f=u.velocity)&&void 0!==f?f:0)*t.factor;break;case"decreasing":var m;u.value<=d?(u.status="increasing",u.loops||(u.loops=0),u.loops++):u.value-=(null!==(m=u.velocity)&&void 0!==m?m:0)*t.factor}u.velocity&&1!==u.decay&&(u.velocity*=p),function(e,t,n,r){switch(e.options.opacity.animation.destroy){case"max":t>=r&&e.destroy();break;case"min":t<=n&&e.destroy()}}(e,u.value,d,h),e.destroyed||(u.value=ML(u.value,d,h))}}(e,t)}}class Mz{constructor(e){this.container=e,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(e,t,n,r){if(!this.modes.includes(r))return;const i=this.container;let a=!1;for(const[,d]of i.plugins)if(void 0!==d.particleBounce&&(a=d.particleBounce(e,n,t)),a)break;if(a)return;const s=e.getPosition(),o=e.offset,l=e.getRadius(),c=YL(s,l),u=i.canvas.size;!function(e){if("bounce"!==e.outMode&&"bounce-horizontal"!==e.outMode&&"bounceHorizontal"!==e.outMode&&"split"!==e.outMode||"left"!==e.direction&&"right"!==e.direction)return;e.bounds.right<0&&"left"===e.direction?e.particle.position.x=e.size+e.offset.x:e.bounds.left>e.canvasSize.width&&"right"===e.direction&&(e.particle.position.x=e.canvasSize.width-e.size-e.offset.x);const t=e.particle.velocity.x;let n=!1;if("right"===e.direction&&e.bounds.right>=e.canvasSize.width&&t>0||"left"===e.direction&&e.bounds.left<=0&&t<0){const t=BL(e.particle.options.bounce.horizontal);e.particle.velocity.x*=-t,n=!0}if(!n)return;const r=e.offset.x+e.size;e.bounds.right>=e.canvasSize.width&&"right"===e.direction?e.particle.position.x=e.canvasSize.width-r:e.bounds.left<=0&&"left"===e.direction&&(e.particle.position.x=r),"split"===e.outMode&&e.particle.destroy()}({particle:e,outMode:r,direction:t,bounds:c,canvasSize:u,offset:o,size:l}),function(e){if("bounce"!==e.outMode&&"bounce-vertical"!==e.outMode&&"bounceVertical"!==e.outMode&&"split"!==e.outMode||"bottom"!==e.direction&&"top"!==e.direction)return;e.bounds.bottom<0&&"top"===e.direction?e.particle.position.y=e.size+e.offset.y:e.bounds.top>e.canvasSize.height&&"bottom"===e.direction&&(e.particle.position.y=e.canvasSize.height-e.size-e.offset.y);const t=e.particle.velocity.y;let n=!1;if("bottom"===e.direction&&e.bounds.bottom>=e.canvasSize.height&&t>0||"top"===e.direction&&e.bounds.top<=0&&t<0){const t=BL(e.particle.options.bounce.vertical);e.particle.velocity.y*=-t,n=!0}if(!n)return;const r=e.offset.y+e.size;e.bounds.bottom>=e.canvasSize.height&&"bottom"===e.direction?e.particle.position.y=e.canvasSize.height-r:e.bounds.top<=0&&"top"===e.direction&&(e.particle.position.y=r),"split"===e.outMode&&e.particle.destroy()}({particle:e,outMode:r,direction:t,bounds:c,canvasSize:u,offset:o,size:l})}}class Tz{constructor(e){this.container=e,this.modes=["destroy"]}update(e,t,n,r){if(!this.modes.includes(r))return;const i=this.container;switch(e.outType){case"normal":case"outside":if(JL(e.position,i.canvas.size,wL.origin,e.getRadius(),t))return;break;case"inside":{const{dx:t,dy:n}=jL(e.position,e.moveCenter),{x:r,y:i}=e.velocity;if(r<0&&t>e.moveCenter.radius||i<0&&n>e.moveCenter.radius||r>=0&&t<-e.moveCenter.radius||i>=0&&n<-e.moveCenter.radius)return;break}}i.particles.remove(e,void 0,!0)}}class kz{constructor(e){this.container=e,this.modes=["none"]}update(e,t,n,r){if(!this.modes.includes(r))return;if(e.options.move.distance.horizontal&&("left"===t||"right"===t)||e.options.move.distance.vertical&&("top"===t||"bottom"===t))return;const i=e.options.move.gravity,a=this.container,s=a.canvas.size,o=e.getRadius();if(i.enable){const n=e.position;(!i.inverse&&n.y>s.height+o&&"bottom"===t||i.inverse&&n.y<-o&&"top"===t)&&a.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=s.height+o||e.velocity.y<0&&e.position.y>=-o||e.velocity.x>0&&e.position.x<=s.width+o||e.velocity.x<0&&e.position.x>=-o)return;JL(e.position,a.canvas.size,wL.origin,o,t)||a.particles.remove(e)}}}class Pz{constructor(e){this.container=e,this.modes=["out"]}update(e,t,n,r){if(!this.modes.includes(r))return;const i=this.container;switch(e.outType){case"inside":{const{x:t,y:n}=e.velocity,r=wL.origin;r.length=e.moveCenter.radius,r.angle=e.velocity.angle+Math.PI,r.addTo(wL.create(e.moveCenter));const{dx:a,dy:s}=jL(e.position,r);if(t<=0&&a>=0||n<=0&&s>=0||t>=0&&a<=0||n>=0&&s<=0)return;e.position.x=Math.floor(kL({min:0,max:i.canvas.size.width})),e.position.y=Math.floor(kL({min:0,max:i.canvas.size.height}));const{dx:o,dy:l}=jL(e.position,e.moveCenter);e.direction=Math.atan2(-l,-o),e.velocity.angle=e.direction;break}default:if(JL(e.position,i.canvas.size,wL.origin,e.getRadius(),t))return;switch(e.outType){case"outside":{e.position.x=Math.floor(kL({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(kL({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:t,dy:n}=jL(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(n,t),e.velocity.angle=e.direction);break}case"normal":{const n=e.options.move.warp,r=i.canvas.size,a={bottom:r.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:r.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},s=e.getRadius(),o=YL(e.position,s);"right"===t&&o.left>r.width+e.offset.x?(e.position.x=a.left,e.initialPosition.x=e.position.x,n||(e.position.y=CL()*r.height,e.initialPosition.y=e.position.y)):"left"===t&&o.right<-e.offset.x&&(e.position.x=a.right,e.initialPosition.x=e.position.x,n||(e.position.y=CL()*r.height,e.initialPosition.y=e.position.y)),"bottom"===t&&o.top>r.height+e.offset.y?(n||(e.position.x=CL()*r.width,e.initialPosition.x=e.position.x),e.position.y=a.top,e.initialPosition.y=e.position.y):"top"===t&&o.bottom<-e.offset.y&&(n||(e.position.x=CL()*r.width,e.initialPosition.x=e.position.x),e.position.y=a.bottom,e.initialPosition.y=e.position.y);break}}}}}class Rz{constructor(e){this.container=e,this._updateOutMode=(e,t,n,r)=>{for(const i of this.updaters)i.update(e,r,t,n)},this.updaters=[new Mz(e),new Tz(e),new Pz(e),new kz(e)]}init(){}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){var n,r,i,a;const s=e.options.move.outModes;this._updateOutMode(e,t,null!==(n=s.bottom)&&void 0!==n?n:s.default,"bottom"),this._updateOutMode(e,t,null!==(r=s.left)&&void 0!==r?r:s.default,"left"),this._updateOutMode(e,t,null!==(i=s.right)&&void 0!==i?i:s.default,"right"),this._updateOutMode(e,t,null!==(a=s.top)&&void 0!==a?a:s.default,"top")}}class Dz{init(e){const t=e.container,n=e.options.size.animation;var r;n.enable&&(e.size.velocity=(null!==(r=e.retina.sizeAnimationSpeed)&&void 0!==r?r:t.retina.sizeAnimationSpeed)/100*t.retina.reduceFactor,n.sync||(e.size.velocity*=CL()))}isEnabled(e){var t,n,r,i;return!e.destroyed&&!e.spawning&&e.size.enable&&((null!==(t=e.size.maxLoops)&&void 0!==t?t:0)<=0||(null!==(n=e.size.maxLoops)&&void 0!==n?n:0)>0&&(null!==(r=e.size.loops)&&void 0!==r?r:0)<(null!==(i=e.size.maxLoops)&&void 0!==i?i:0))}reset(e){e.size.loops=0}update(e,t){this.isEnabled(e)&&function(e,t){var n,r,i,a,s,o,l,c,u;const d=e.size;if(e.destroyed||!d||!d.enable||(null!==(n=d.maxLoops)&&void 0!==n?n:0)>0&&(null!==(r=d.loops)&&void 0!==r?r:0)>(null!==(i=d.maxLoops)&&void 0!==i?i:0))return;const h=(null!==(a=d.velocity)&&void 0!==a?a:0)*t.factor,p=d.min,f=d.max,m=null!==(s=d.decay)&&void 0!==s?s:1;if(d.time||(d.time=0),(null!==(o=d.delayTime)&&void 0!==o?o:0)>0&&d.time<(null!==(l=d.delayTime)&&void 0!==l?l:0)&&(d.time+=t.value),!((null!==(c=d.delayTime)&&void 0!==c?c:0)>0&&d.time<(null!==(u=d.delayTime)&&void 0!==u?u:0))){switch(d.status){case"increasing":d.value>=f?(d.status="decreasing",d.loops||(d.loops=0),d.loops++):d.value+=h;break;case"decreasing":d.value<=p?(d.status="increasing",d.loops||(d.loops=0),d.loops++):d.value-=h}d.velocity&&1!==m&&(d.velocity*=m),function(e,t,n,r){switch(e.options.size.animation.destroy){case"max":t>=r&&e.destroy();break;case"min":t<=n&&e.destroy()}}(e,d.value,p,f),e.destroyed||(d.value=ML(d.value,p,f))}}(e,t)}}async function Iz(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addMover("base",(()=>new Sz),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("circle",new _z,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("color",(e=>new Ez(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("opacity",(e=>new Cz(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("outModes",(e=>new Rz(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("size",(()=>new Dz),t)}(e,!1),await e.refresh(t)}class Bz{constructor(e){this.container=e,this.type="external"}}class jz{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(e){e&&(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.easing&&(this.easing=e.easing),void 0!==e.factor&&(this.factor=e.factor),void 0!==e.maxSpeed&&(this.maxSpeed=e.maxSpeed),void 0!==e.speed&&(this.speed=e.speed))}}class Fz extends Bz{constructor(e,t){super(t),this._clickAttract=()=>{const e=this.container;e.attract||(e.attract={particles:[]});const{attract:t}=e;if(t.finish||(t.count||(t.count=0),t.count++,t.count===e.particles.count&&(t.finish=!0)),t.clicking){const t=e.interactivity.mouse.clickPosition,n=e.retina.attractModeDistance;if(!n||n<0||!t)return;this._processAttract(t,n,new QN(t.x,t.y,n))}else!1===t.clicking&&(t.particles=[])},this._hoverAttract=()=>{const e=this.container,t=e.interactivity.mouse.position,n=e.retina.attractModeDistance;!n||n<0||!t||this._processAttract(t,n,new QN(t.x,t.y,n))},this._processAttract=(e,t,n)=>{const r=this.container,i=r.actualOptions.interactivity.modes.attract;if(!i)return;const a=r.particles.quadTree.query(n,(e=>this.isEnabled(e)));for(const s of a){const{dx:n,dy:r,distance:a}=jL(s.position,e),o=i.speed*i.factor,l=ML(EL(i.easing)(1-a/t)*o,0,i.maxSpeed),c=wL.create(0===a?o:n/a*l,0===a?o:r/a*l);s.position.subFrom(c)}},this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=e=>{const n=this.container.actualOptions.interactivity.modes.attract;if(n&&"attract"===e){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const e of t.attract.particles)this.isEnabled(e)&&e.velocity.setTo(e.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout((()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)}),1e3*n.duration)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=e.interactivity.status===vL,r=t.interactivity.events,i=r.onHover.enable,a=r.onHover.mode,s=r.onClick.enable,o=r.onClick.mode;n&&i&&qL("attract",a)?this._hoverAttract():s&&qL("attract",o)&&this._clickAttract()}isEnabled(e){var t;const n=this.container,r=n.actualOptions,i=n.interactivity.mouse,a=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:r.interactivity).events;if((!i.position||!a.onHover.enable)&&(!i.clickPosition||!a.onClick.enable))return!1;const s=a.onHover.mode,o=a.onClick.mode;return qL("attract",s)||qL("attract",o)}loadModeOptions(e){e.attract||(e.attract=new jz);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.attract.load(null===i||void 0===i?void 0:i.attract)}reset(){}}class Lz{constructor(){this.distance=200}load(e){e&&void 0!==e.distance&&(this.distance=e.distance)}}class Oz extends Bz{constructor(e){super(e),this._processBounce=(e,t,n)=>{const r=this.container.particles.quadTree.query(n,(e=>this.isEnabled(e)));for(const i of r)n instanceof QN?tO(eO(i),{position:e,radius:t,mass:t**2*Math.PI/2,velocity:wL.origin,factor:wL.origin}):n instanceof ZN&&nO(i,YL(e,t))},this._processMouseBounce=()=>{const e=this.container,t=10*e.retina.pixelRatio,n=e.interactivity.mouse.position,r=e.retina.bounceModeDistance;!r||r<0||!n||this._processBounce(n,r,new QN(n.x,n.y,r+t))},this._singleSelectorBounce=(e,t)=>{const n=this.container,r=document.querySelectorAll(e);r.length&&r.forEach((e=>{const r=e,i=n.retina.pixelRatio,a={x:(r.offsetLeft+r.offsetWidth/2)*i,y:(r.offsetTop+r.offsetHeight/2)*i},s=r.offsetWidth/2*i,o=10*i,l="circle"===t.type?new QN(a.x,a.y,s+o):new ZN(r.offsetLeft*i-o,r.offsetTop*i-o,r.offsetWidth*i+2*o,r.offsetHeight*i+2*o);this._processBounce(a,s,l)}))}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions.interactivity.events,n=e.interactivity.status===vL,r=t.onHover.enable,i=t.onHover.mode,a=t.onDiv;n&&r&&qL("bounce",i)?this._processMouseBounce():QL("bounce",a,((e,t)=>this._singleSelectorBounce(e,t)))}isEnabled(e){var t;const n=this.container,r=n.actualOptions,i=n.interactivity.mouse,a=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:r.interactivity).events,s=a.onDiv;return i.position&&a.onHover.enable&&qL("bounce",a.onHover.mode)||ZL("bounce",s)}loadModeOptions(e){e.bounce||(e.bounce=new Lz);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.bounce.load(null===i||void 0===i?void 0:i.bounce)}reset(){}}class Nz{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(e){if(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.mix&&(this.mix=e.mix),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.color){const t=fO(this.color)?void 0:this.color;this.color=rO(e.color,(e=>UO.create(t,e)))}void 0!==e.size&&(this.size=e.size)}}}class zz extends Nz{constructor(){super(),this.selectors=[]}get ids(){return rO(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=rO(e,(e=>"#".concat(e)))}load(e){super.load(e),e&&(void 0!==e.ids&&(this.ids=e.ids),void 0!==e.selectors&&(this.selectors=e.selectors))}}class Uz extends Nz{load(e){super.load(e),e&&(this.divs=rO(e.divs,(e=>{const t=new zz;return t.load(e),t})))}}function Hz(e,t,n,r){if(t>=n){return ML(e+(t-n)*r,e,t)}if(t<n){return ML(e-(n-t)*r,t,e)}}class Gz extends Bz{constructor(e){super(e),this._clickBubble=()=>{const e=this.container,t=e.actualOptions,n=e.interactivity.mouse.clickPosition,r=t.interactivity.modes.bubble;if(!r||!n)return;e.bubble||(e.bubble={});const i=e.retina.bubbleModeDistance;if(!i||i<0)return;const a=e.particles.quadTree.queryCircle(n,i,(e=>this.isEnabled(e))),{bubble:s}=e;for(const c of a){var o,l;if(!s.clicking)continue;c.bubble.inRange=!s.durationEnd;const t=FL(c.getPosition(),n),a=((new Date).getTime()-(e.interactivity.mouse.clickTime||0))/1e3;a>r.duration&&(s.durationEnd=!0),a>2*r.duration&&(s.clicking=!1,s.durationEnd=!1);const u={bubbleObj:{optValue:e.retina.bubbleModeSize,value:c.bubble.radius},particlesObj:{optValue:DL(c.options.size.value)*e.retina.pixelRatio,value:c.size.value},type:"size"};this._process(c,t,a,u);const d={bubbleObj:{optValue:r.opacity,value:c.bubble.opacity},particlesObj:{optValue:DL(c.options.opacity.value),value:null!==(o=null===(l=c.opacity)||void 0===l?void 0:l.value)&&void 0!==o?o:1},type:"opacity"};this._process(c,t,a,d),!s.durationEnd&&t<=i?this._hoverBubbleColor(c,t):delete c.bubble.color}},this._hoverBubble=()=>{const e=this.container,t=e.interactivity.mouse.position,n=e.retina.bubbleModeDistance;if(!n||n<0||void 0===t)return;const r=e.particles.quadTree.queryCircle(t,n,(e=>this.isEnabled(e)));for(const i of r){i.bubble.inRange=!0;const r=FL(i.getPosition(),t),a=1-r/n;r<=n?a>=0&&e.interactivity.status===vL&&(this._hoverBubbleSize(i,a),this._hoverBubbleOpacity(i,a),this._hoverBubbleColor(i,a)):this.reset(i),e.interactivity.status===gL&&this.reset(i)}},this._hoverBubbleColor=(e,t,n)=>{const r=this.container.actualOptions,i=null!==n&&void 0!==n?n:r.interactivity.modes.bubble;if(i){if(!e.bubble.finalColor){const t=i.color;if(!t)return;const n=iO(t);e.bubble.finalColor=_O(n)}if(e.bubble.finalColor)if(i.mix){e.bubble.color=void 0;const n=e.getFillColor();e.bubble.color=n?AO(kO(n,e.bubble.finalColor,1-t,t)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}},this._hoverBubbleOpacity=(e,t,n)=>{var r,i,a,s;const o=this.container.actualOptions,l=null!==(r=null===n||void 0===n?void 0:n.opacity)&&void 0!==r?r:null===(i=o.interactivity.modes.bubble)||void 0===i?void 0:i.opacity;if(!l)return;const c=e.options.opacity.value,u=Hz(null!==(a=null===(s=e.opacity)||void 0===s?void 0:s.value)&&void 0!==a?a:1,l,DL(c),t);void 0!==u&&(e.bubble.opacity=u)},this._hoverBubbleSize=(e,t,n)=>{const r=this.container,i=null!==n&&void 0!==n&&n.size?n.size*r.retina.pixelRatio:r.retina.bubbleModeSize;if(void 0===i)return;const a=DL(e.options.size.value)*r.retina.pixelRatio,s=Hz(e.size.value,i,a,t);void 0!==s&&(e.bubble.radius=s)},this._process=(e,t,n,r)=>{const i=this.container,a=r.bubbleObj.optValue,s=i.actualOptions.interactivity.modes.bubble;if(!s||void 0===a)return;const o=s.duration,l=i.retina.bubbleModeDistance,c=r.particlesObj.optValue,u=r.bubbleObj.value,d=r.particlesObj.value||0,h=r.type;if(l&&!(l<0)&&a!==c)if(i.bubble||(i.bubble={}),i.bubble.durationEnd)u&&("size"===h&&delete e.bubble.radius,"opacity"===h&&delete e.bubble.opacity);else if(t<=l){if((null!==u&&void 0!==u?u:d)!==a){const t=d-n*(d-a)/o;"size"===h&&(e.bubble.radius=t),"opacity"===h&&(e.bubble.opacity=t)}}else"size"===h&&delete e.bubble.radius,"opacity"===h&&delete e.bubble.opacity},this._singleSelectorHover=(e,t,n)=>{const r=this.container,i=document.querySelectorAll(t),a=r.actualOptions.interactivity.modes.bubble;a&&i.length&&i.forEach((t=>{const i=t,s=r.retina.pixelRatio,o={x:(i.offsetLeft+i.offsetWidth/2)*s,y:(i.offsetTop+i.offsetHeight/2)*s},l=i.offsetWidth/2*s,c="circle"===n.type?new QN(o.x,o.y,l):new ZN(i.offsetLeft*s,i.offsetTop*s,i.offsetWidth*s,i.offsetHeight*s),u=r.particles.quadTree.query(c,(e=>this.isEnabled(e)));for(const n of u){if(!c.contains(n.getPosition()))continue;n.bubble.inRange=!0;const t=$L(a.divs,i);n.bubble.div&&n.bubble.div===i||(this.clear(n,e,!0),n.bubble.div=i),this._hoverBubbleSize(n,1,t),this._hoverBubbleOpacity(n,1,t),this._hoverBubbleColor(n,1,t)}}))},e.bubble||(e.bubble={}),this.handleClickMode=t=>{"bubble"===t&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,n){e.bubble.inRange&&!n||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,void 0!==t.size&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}async interact(e){const t=this.container.actualOptions.interactivity.events,n=t.onHover,r=t.onClick,i=n.enable,a=n.mode,s=r.enable,o=r.mode,l=t.onDiv;i&&qL("bubble",a)?this._hoverBubble():s&&qL("bubble",o)?this._clickBubble():QL("bubble",l,((t,n)=>this._singleSelectorHover(e,t,n)))}isEnabled(e){var t;const n=this.container,r=n.actualOptions,i=n.interactivity.mouse,a=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:r.interactivity).events,{onClick:s,onDiv:o,onHover:l}=a,c=ZL("bubble",o);return!!(c||l.enable&&i.position||s.enable&&i.clickPosition)&&(qL("bubble",l.mode)||qL("bubble",s.mode)||c)}loadModeOptions(e){e.bubble||(e.bubble=new Uz);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.bubble.load(null===i||void 0===i?void 0:i.bubble)}reset(e){e.bubble.inRange=!1}}class Vz{constructor(){this.opacity=.5}load(e){e&&void 0!==e.opacity&&(this.opacity=e.opacity)}}class Wz{constructor(){this.distance=80,this.links=new Vz,this.radius=60}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){var t,n;e&&(void 0!==e.distance&&(this.distance=e.distance),this.links.load(null!==(t=null!==(n=e.links)&&void 0!==n?n:e.lineLinked)&&void 0!==t?t:e.line_linked),void 0!==e.radius&&(this.radius=e.radius))}}function qz(e,t,n,r){const i=e.actualOptions.interactivity.modes.connect;if(i)return function(e,t,n,r){const i=Math.floor(n.getRadius()/t.getRadius()),a=t.getFillColor(),s=n.getFillColor();if(!a||!s)return;const o=t.getPosition(),l=n.getPosition(),c=kO(a,s,t.getRadius(),n.getRadius()),u=e.createLinearGradient(o.x,o.y,l.x,l.y);return u.addColorStop(0,TO(a,r)),u.addColorStop(i>1?1:i,MO(c,r)),u.addColorStop(1,TO(s,r)),u}(t,n,r,i.links.opacity)}function Xz(e,t,n){e.canvas.draw((r=>{var i;const a=qz(e,r,t,n);if(!a)return;const s=t.getPosition(),o=n.getPosition();!function(e,t,n,r,i){jO(e,r,i),e.lineWidth=t,e.strokeStyle=n,e.stroke()}(r,null!==(i=t.retina.linksWidth)&&void 0!==i?i:0,a,s,o)}))}class Jz extends Bz{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}async interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&"pointermove"===e.interactivity.status){const t=e.interactivity.mouse.position;if(!e.retina.connectModeDistance||e.retina.connectModeDistance<0||!e.retina.connectModeRadius||e.retina.connectModeRadius<0||!t)return;const n=Math.abs(e.retina.connectModeRadius),r=e.particles.quadTree.queryCircle(t,n,(e=>this.isEnabled(e)));let i=0;for(const a of r){const t=a.getPosition();for(const n of r.slice(i+1)){const r=n.getPosition(),i=Math.abs(e.retina.connectModeDistance),s=Math.abs(t.x-r.x),o=Math.abs(t.y-r.y);s<i&&o<i&&Xz(e,a,n)}++i}}}isEnabled(e){var t;const n=this.container,r=n.interactivity.mouse,i=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:n.actualOptions.interactivity).events;return!(!i.onHover.enable||!r.position)&&qL("connect",i.onHover.mode)}loadModeOptions(e){e.connect||(e.connect=new Wz);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.connect.load(null===i||void 0===i?void 0:i.connect)}reset(){}}class Yz{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){e&&(void 0!==e.blink&&(this.blink=e.blink),void 0!==e.color&&(this.color=UO.create(this.color,e.color)),void 0!==e.consent&&(this.consent=e.consent),void 0!==e.opacity&&(this.opacity=e.opacity))}}class Kz{constructor(){this.distance=100,this.links=new Yz}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){var t,n;e&&(void 0!==e.distance&&(this.distance=e.distance),this.links.load(null!==(t=null!==(n=e.links)&&void 0!==n?n:e.lineLinked)&&void 0!==t?t:e.line_linked))}}function Zz(e,t,n,r,i){e.canvas.draw((e=>{var a;const s=t.getPosition();!function(e,t,n,r,i,a){jO(e,n,r),e.strokeStyle=MO(i,a),e.lineWidth=t,e.stroke()}(e,null!==(a=t.retina.linksWidth)&&void 0!==a?a:0,s,i,n,r)}))}class Qz extends Bz{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions.interactivity;if(!t.modes.grab||!t.events.onHover.enable||e.interactivity.status!==vL)return;const n=e.interactivity.mouse.position;if(!n)return;const r=e.retina.grabModeDistance;if(!r||r<0)return;const i=e.particles.quadTree.queryCircle(n,r,(e=>this.isEnabled(e)));for(const o of i){var a,s;const i=FL(o.getPosition(),n);if(i>r)continue;const l=t.modes.grab.links,c=l.opacity,u=c-i*c/r;if(u<=0)continue;const d=null!==(a=l.color)&&void 0!==a?a:null===(s=o.options.links)||void 0===s?void 0:s.color;if(!e.particles.grabLineColor&&d){const n=t.modes.grab.links;e.particles.grabLineColor=RO(d,n.blink,n.consent)}const h=PO(o,void 0,e.particles.grabLineColor);h&&Zz(e,o,h,u,n)}}isEnabled(e){var t;const n=this.container,r=n.interactivity.mouse,i=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:n.actualOptions.interactivity).events;return i.onHover.enable&&!!r.position&&qL("grab",i.onHover.mode)}loadModeOptions(e){e.grab||(e.grab=new Kz);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.grab.load(null===i||void 0===i?void 0:i.grab)}reset(){}}class $z extends Bz{constructor(e){super(e),this.handleClickMode=e=>{if("pause"!==e)return;const t=this.container;t.getAnimationStatus()?t.pause():t.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}class eU{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=IL(e)}load(e){var t;if(!e)return;void 0!==e.default&&(this.default=e.default),void 0!==e.groups&&(this.groups=e.groups.map((e=>e))),this.groups.length||(this.default=!0);const n=null!==(t=e.quantity)&&void 0!==t?t:e.particles_nb;void 0!==n&&(this.quantity=IL(n))}}class tU extends Bz{constructor(e){super(e),this.handleClickMode=e=>{if("push"!==e)return;const t=this.container,n=t.actualOptions.interactivity.modes.push;if(!n)return;const r=PL(n.quantity);if(r<=0)return;const i=XL([void 0,...n.groups]),a=void 0!==i?t.actualOptions.particles.groups[i]:void 0;t.particles.push(r,t.interactivity.mouse,a,i)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e){e.push||(e.push=new eU);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.push.load(null===i||void 0===i?void 0:i.push)}reset(){}}class nU{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=IL(e)}load(e){var t;if(!e)return;const n=null!==(t=e.quantity)&&void 0!==t?t:e.particles_nb;void 0!==n&&(this.quantity=IL(n))}}class rU extends Bz{constructor(e){super(e),this.handleClickMode=e=>{const t=this.container,n=t.actualOptions;if(!n.interactivity.modes.remove||"remove"!==e)return;const r=PL(n.interactivity.modes.remove.quantity);t.particles.removeQuantity(r)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e){e.remove||(e.remove=new nU);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.remove.load(null===i||void 0===i?void 0:i.remove)}reset(){}}class iU{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(e){e&&(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.easing&&(this.easing=e.easing),void 0!==e.factor&&(this.factor=e.factor),void 0!==e.speed&&(this.speed=e.speed),void 0!==e.maxSpeed&&(this.maxSpeed=e.maxSpeed))}}class aU extends iU{constructor(){super(),this.selectors=[]}get ids(){return rO(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=rO(e,(e=>"#".concat(e)))}load(e){super.load(e),e&&(void 0!==e.ids&&(this.ids=e.ids),void 0!==e.selectors&&(this.selectors=e.selectors))}}class sU extends iU{load(e){super.load(e),e&&(this.divs=rO(e.divs,(e=>{const t=new aU;return t.load(e),t})))}}class oU extends Bz{constructor(e,t){super(t),this._clickRepulse=()=>{const e=this.container,t=e.actualOptions.interactivity.modes.repulse;if(!t)return;const n=e.repulse||{particles:[]};if(n.finish||(n.count||(n.count=0),n.count++,n.count===e.particles.count&&(n.finish=!0)),n.clicking){const r=e.retina.repulseModeDistance;if(!r||r<0)return;const i=Math.pow(r/6,3),a=e.interactivity.mouse.clickPosition;if(void 0===a)return;const s=new QN(a.x,a.y,i),o=e.particles.quadTree.query(s,(e=>this.isEnabled(e)));for(const e of o){const{dx:r,dy:s,distance:o}=jL(a,e.position),l=o**2,c=-i*t.speed/l;if(l<=i){n.particles.push(e);const t=wL.create(r,s);t.length=c,e.velocity.setTo(t)}}}else if(!1===n.clicking){for(const e of n.particles)e.velocity.setTo(e.initialVelocity);n.particles=[]}},this._hoverRepulse=()=>{const e=this.container,t=e.interactivity.mouse.position,n=e.retina.repulseModeDistance;!n||n<0||!t||this._processRepulse(t,n,new QN(t.x,t.y,n))},this._processRepulse=(e,t,n,r)=>{const i=this.container,a=i.particles.quadTree.query(n,(e=>this.isEnabled(e))),s=i.actualOptions.interactivity.modes.repulse;if(s)for(const l of a){var o;const{dx:n,dy:i,distance:a}=jL(l.position,e),c=(null!==(o=null===r||void 0===r?void 0:r.speed)&&void 0!==o?o:s.speed)*s.factor,u=ML(EL(s.easing)(1-a/t)*c,0,s.maxSpeed),d=wL.create(0===a?c:n/a*u,0===a?c:i/a*u);l.position.addTo(d)}},this._singleSelectorRepulse=(e,t)=>{const n=this.container,r=n.actualOptions.interactivity.modes.repulse;if(!r)return;const i=document.querySelectorAll(e);i.length&&i.forEach((e=>{const i=e,a=n.retina.pixelRatio,s={x:(i.offsetLeft+i.offsetWidth/2)*a,y:(i.offsetTop+i.offsetHeight/2)*a},o=i.offsetWidth/2*a,l="circle"===t.type?new QN(s.x,s.y,o):new ZN(i.offsetLeft*a,i.offsetTop*a,i.offsetWidth*a,i.offsetHeight*a),c=$L(r.divs,i);this._processRepulse(s,o,l,c)}))},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=e=>{const n=this.container.actualOptions.interactivity.modes.repulse;if(!n||"repulse"!==e)return;t.repulse||(t.repulse={particles:[]});const r=t.repulse;r.clicking=!0,r.count=0;for(const i of t.repulse.particles)this.isEnabled(i)&&i.velocity.setTo(i.initialVelocity);r.particles=[],r.finish=!1,setTimeout((()=>{t.destroyed||(r.clicking=!1)}),1e3*n.duration)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=e.interactivity.status===vL,r=t.interactivity.events,i=r.onHover,a=i.enable,s=i.mode,o=r.onClick,l=o.enable,c=o.mode,u=r.onDiv;n&&a&&qL("repulse",s)?this._hoverRepulse():l&&qL("repulse",c)?this._clickRepulse():QL("repulse",u,((e,t)=>this._singleSelectorRepulse(e,t)))}isEnabled(e){var t;const n=this.container,r=n.actualOptions,i=n.interactivity.mouse,a=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:r.interactivity).events,s=a.onDiv,o=a.onHover,l=a.onClick,c=ZL("repulse",s);if(!(c||o.enable&&i.position||l.enable&&i.clickPosition))return!1;const u=o.mode,d=l.mode;return qL("repulse",u)||qL("repulse",d)||c}loadModeOptions(e){e.repulse||(e.repulse=new sU);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.repulse.load(null===i||void 0===i?void 0:i.repulse)}reset(){}}class lU{constructor(){this.factor=3,this.radius=200}load(e){e&&(void 0!==e.factor&&(this.factor=e.factor),void 0!==e.radius&&(this.radius=e.radius))}}class cU extends Bz{constructor(e){super(e)}clear(e,t,n){e.slow.inRange&&!n||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}async interact(){}isEnabled(e){var t;const n=this.container,r=n.interactivity.mouse,i=(null!==(t=null===e||void 0===e?void 0:e.interactivity)&&void 0!==t?t:n.actualOptions.interactivity).events;return i.onHover.enable&&!!r.position&&qL("slow",i.onHover.mode)}loadModeOptions(e){e.slow||(e.slow=new lU);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.slow.load(null===i||void 0===i?void 0:i.slow)}reset(e){e.slow.inRange=!1;const t=this.container,n=t.actualOptions,r=t.interactivity.mouse.position,i=t.retina.slowModeRadius,a=n.interactivity.modes.slow;if(!a||!i||i<0||!r)return;const s=FL(r,e.getPosition()),o=s/i,l=a.factor,{slow:c}=e;s>i||(c.inRange=!0,c.factor=o/l)}}const uU=[0,4,2,1],dU=[8,8,4,2];class hU{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce(((e,t)=>e+String.fromCharCode(t)),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;do{t=this.data[this.pos++];for(let n=t;--n>=0;e+=String.fromCharCode(this.data[this.pos++]));}while(0!==t);return e}readSubBlocksBin(){let e=0,t=0;for(let r=0;0!==(e=this.data[this.pos+r]);r+=e+1)t+=e;const n=new Uint8Array(t);for(let r=0;0!==(e=this.data[this.pos++]);)for(let t=e;--t>=0;n[r++]=this.data[this.pos++]);return n}skipSubBlocks(){for(;0!==this.data[this.pos];this.pos+=this.data[this.pos]+1);this.pos++}}function pU(e,t){const n=[];for(let r=0;r<t;r++)n.push({r:e.data[e.pos],g:e.data[e.pos+1],b:e.data[e.pos+2]}),e.pos+=3;return n}async function fU(e,t,n,r,i,a){switch(e.nextByte()){case 59:return!0;case 44:await async function(e,t,n,r,i,a){const s=t.frames[r(!0)];s.left=e.nextTwoBytes(),s.top=e.nextTwoBytes(),s.width=e.nextTwoBytes(),s.height=e.nextTwoBytes();const o=e.nextByte(),l=128===(128&o),c=64===(64&o);s.sortFlag=32===(32&o),s.reserved=(24&o)>>>3;const u=1<<1+(7&o);l&&(s.localColorTable=pU(e,u));const d=e=>{const{r:r,g:a,b:o}=(l?s.localColorTable:t.globalColorTable)[e];return{r:r,g:a,b:o,a:e===i(null)?n?~~((r+a+o)/3):0:255}},h=(()=>{try{return new ImageData(s.width,s.height,{colorSpace:"srgb"})}catch(e){if(e instanceof DOMException&&"IndexSizeError"===e.name)return null;throw e}})();if(null==h)throw new EvalError("GIF frame size is to large");const p=e.nextByte(),f=e.readSubBlocksBin(),m=1<<p,g=(e,t)=>{const n=e>>>3,r=7&e;return(f[n]+(f[n+1]<<8)+(f[n+2]<<16)&(1<<t)-1<<r)>>>r};if(c){for(let n=0,i=p+1,o=0,l=[[0]],c=0;c<4;c++){if(uU[c]<s.height)for(let e=0,t=0;;){const r=n;if(n=g(o,i),o+=i+1,n===m){i=p+1,l.length=m+2;for(let e=0;e<l.length;e++)l[e]=e<m?[e]:[]}else{n>=l.length?l.push(l[r].concat(l[r][0])):r!==m&&l.push(l[r].concat(l[n][0]));for(let r=0;r<l[n].length;r++){const{r:i,g:a,b:o,a:u}=d(l[n][r]);h.data.set([i,a,o,u],uU[c]*s.width+dU[c]*t+e%(4*s.width)),e+=4}l.length===1<<i&&i<12&&i++}if(e===4*s.width*(t+1)&&(t++,uU[c]+dU[c]*t>=s.height))break}null===a||void 0===a||a(e.pos/(e.data.length-1),r(!1)+1,h,{x:s.left,y:s.top},{width:t.width,height:t.height})}s.image=h,s.bitmap=await createImageBitmap(h)}else{for(let e=0,t=p+1,n=0,r=[[0]],i=-4;;){const a=e;if(e=g(n,t),n+=t,e===m){t=p+1,r.length=m+2;for(let e=0;e<r.length;e++)r[e]=e<m?[e]:[]}else{if(e===m+1)break;e>=r.length?r.push(r[a].concat(r[a][0])):a!==m&&r.push(r[a].concat(r[e][0]));for(let t=0;t<r[e].length;t++){const{r:n,g:a,b:s,a:o}=d(r[e][t]);h.data.set([n,a,s,o],i+=4)}r.length>=1<<t&&t<12&&t++}}s.image=h,s.bitmap=await createImageBitmap(h),null===a||void 0===a||a((e.pos+1)/e.data.length,r(!1)+1,s.image,{x:s.left,y:s.top},{width:t.width,height:t.height})}}(e,t,n,r,i,a);break;case 33:await async function(e,t,n,r){switch(e.nextByte()){case 249:{const i=t.frames[n(!1)];e.pos++;const a=e.nextByte();i.GCreserved=(224&a)>>>5,i.disposalMethod=(28&a)>>>2,i.userInputDelayFlag=2===(2&a);const s=1===(1&a);i.delayTime=10*e.nextTwoBytes();const o=e.nextByte();s&&r(o),e.pos++;break}case 255:{e.pos++;const n={identifier:e.getString(8),authenticationCode:e.getString(3),data:e.readSubBlocksBin()};t.applicationExtensions.push(n);break}case 254:t.comments.push([n(!1),e.readSubBlocks()]);break;case 1:if(0===t.globalColorTable.length)throw new EvalError("plain text extension without global color table");e.pos++,t.frames[n(!1)].plainTextData={left:e.nextTwoBytes(),top:e.nextTwoBytes(),width:e.nextTwoBytes(),height:e.nextTwoBytes(),charSize:{width:e.nextTwoBytes(),height:e.nextTwoBytes()},foregroundColor:e.nextByte(),backgroundColor:e.nextByte(),text:e.readSubBlocks()};break;default:e.skipSubBlocks()}}(e,t,r,i);break;default:throw new EvalError("undefined block found")}return!1}const mU=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;async function gU(e){return new Promise((t=>{e.loading=!0;const n=new Image;e.element=n,n.addEventListener("load",(()=>{e.loading=!1,t()})),n.addEventListener("error",(()=>{e.element=void 0,e.error=!0,e.loading=!1,HL().error("".concat(xL," loading image: ").concat(e.source)),t()})),n.src=e.source}))}async function vU(e){if("gif"===e.type){e.loading=!0;try{var t;e.gifData=await async function(e,t,n){n||(n=!1);const r=await fetch(e);if(!r.ok&&404===r.status)throw new EvalError("file not found");const i=await r.arrayBuffer(),a={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},s=new hU(new Uint8ClampedArray(i));if("GIF89a"!==s.getString(6))throw new Error("not a supported GIF file");a.width=s.nextTwoBytes(),a.height=s.nextTwoBytes();const o=s.nextByte(),l=128===(128&o);a.colorRes=(112&o)>>>4,a.sortFlag=8===(8&o);const c=1<<1+(7&o),u=s.nextByte();a.pixelAspectRatio=s.nextByte(),0!==a.pixelAspectRatio&&(a.pixelAspectRatio=(a.pixelAspectRatio+15)/64),l&&(a.globalColorTable=pU(s,c));const d=(()=>{try{return new ImageData(a.width,a.height,{colorSpace:"srgb"})}catch(e){if(e instanceof DOMException&&"IndexSizeError"===e.name)return null;throw e}})();if(null==d)throw new Error("GIF frame size is to large");const{r:h,g:p,b:f}=a.globalColorTable[u];d.data.set(l?[h,p,f,255]:[0,0,0,0]);for(let w=4;w<d.data.length;w*=2)d.data.copyWithin(w,0,w);a.backgroundImage=d;let m=-1,g=!0,v=-1;const y=e=>(e&&(g=!0),m),x=e=>(null!=e&&(v=e),v);try{do{g&&(a.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),m++,v=-1,g=!1)}while(!await fU(s,a,n,y,x,t));a.frames.length--;for(const e of a.frames){if(e.userInputDelayFlag&&0===e.delayTime){a.totalTime=1/0;break}a.totalTime+=e.delayTime}return a}catch(b){if(b instanceof EvalError)throw new Error("error while parsing frame ".concat(m,' "').concat(b.message,'"'));throw b}}(e.source),e.gifLoopCount=null!==(t=function(e){for(const t of e.applicationExtensions)if(t.identifier+t.authenticationCode==="NETSCAPE2.0")return t.data[1]+(t.data[2]<<8);return NaN}(e.gifData))&&void 0!==t?t:0,0===e.gifLoopCount&&(e.gifLoopCount=1/0)}catch(n){e.error=!0}e.loading=!1}else await gU(e)}async function yU(e){if("svg"!==e.type)return void await gU(e);e.loading=!0;const t=await fetch(e.source);t.ok?e.svgData=await t.text():(HL().error("".concat(xL," Image not found")),e.error=!0),e.loading=!1}function xU(e,t,n,r){var i,a,s;const o=function(e,t,n){const{svgData:r}=e;if(!r)return"";const i=TO(t,n);if(r.includes("fill"))return r.replace(mU,(()=>i));const a=r.indexOf(">");return"".concat(r.substring(0,a),' fill="').concat(i,'"').concat(r.substring(a))}(e,n,null!==(i=null===(a=r.opacity)||void 0===a?void 0:a.value)&&void 0!==i?i:1),l={color:n,gif:t.gif,data:(0,c.A)((0,c.A)({},e),{},{svgData:o}),loaded:!1,ratio:t.width/t.height,replaceColor:null!==(s=t.replaceColor)&&void 0!==s?s:t.replace_color,source:t.src};return new Promise((t=>{const n=new Blob([o],{type:"image/svg+xml"}),r=URL||window.URL||window.webkitURL||window,i=r.createObjectURL(n),a=new Image;a.addEventListener("load",(()=>{l.loaded=!0,l.element=a,t(l),r.revokeObjectURL(i)})),a.addEventListener("error",(async()=>{r.revokeObjectURL(i);const n=(0,c.A)((0,c.A)({},e),{},{error:!1,loading:!0});await gU(n),l.loaded=!0,l.element=n.element,t(l)})),a.src=i}))}class bU{constructor(e){this.loadImageShape=async e=>{var t,n;if(!this._engine.loadImage)throw new Error("".concat(xL," image shape not initialized"));await this._engine.loadImage({gif:e.gif,name:e.name,replaceColor:null!==(t=null!==(n=e.replaceColor)&&void 0!==n?n:e.replace_color)&&void 0!==t&&t,src:e.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e,t,n,r,i){const a=t.image,s=null===a||void 0===a?void 0:a.element;if(a){if(e.globalAlpha=r,a.gif&&a.gifData){var o;const r=new OffscreenCanvas(a.gifData.width,a.gifData.height),s=r.getContext("2d");if(!s)throw new Error("could not create offscreen canvas context");var l;if(s.imageSmoothingQuality="low",s.imageSmoothingEnabled=!1,s.clearRect(0,0,r.width,r.height),void 0===t.gifLoopCount)t.gifLoopCount=null!==(l=a.gifLoopCount)&&void 0!==l?l:0;let c=null!==(o=t.gifFrame)&&void 0!==o?o:0;const u={x:.5*-a.gifData.width,y:.5*-a.gifData.height},d=a.gifData.frames[c];if(void 0===t.gifTime&&(t.gifTime=0),!d.bitmap)return;switch(e.scale(n/a.gifData.width,n/a.gifData.height),d.disposalMethod){case 4:case 5:case 6:case 7:case 0:s.drawImage(d.bitmap,d.left,d.top),e.drawImage(r,u.x,u.y),s.clearRect(0,0,r.width,r.height);break;case 1:s.drawImage(d.bitmap,d.left,d.top),e.drawImage(r,u.x,u.y);break;case 2:s.drawImage(d.bitmap,d.left,d.top),e.drawImage(r,u.x,u.y),s.clearRect(0,0,r.width,r.height),0===a.gifData.globalColorTable.length?s.putImageData(a.gifData.frames[0].image,u.x+d.left,u.y+d.top):s.putImageData(a.gifData.backgroundImage,u.x,u.y);break;case 3:{const t=s.getImageData(0,0,r.width,r.height);s.drawImage(d.bitmap,d.left,d.top),e.drawImage(r,u.x,u.y),s.clearRect(0,0,r.width,r.height),s.putImageData(t,0,0)}}if(t.gifTime+=i.value,t.gifTime>d.delayTime){if(t.gifTime-=d.delayTime,++c>=a.gifData.frames.length){if(--t.gifLoopCount<=0)return;c=0,s.clearRect(0,0,r.width,r.height)}t.gifFrame=c}e.scale(a.gifData.width/n,a.gifData.height/n)}else if(s){const t=a.ratio,r={x:-n,y:-n};e.drawImage(s,r.x,r.y,2*n,2*n/t)}e.globalAlpha=1}}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(t.preload&&this._engine.loadImage)for(const n of t.preload)await this._engine.loadImage(n)}loadShape(e){if("image"!==e.shape&&"images"!==e.shape)return;this._engine.images||(this._engine.images=[]);const t=e.shapeData,n=this._engine.images.find((e=>e.name===t.name||e.source===t.src));n||this.loadImageShape(t).then((()=>{this.loadShape(e)}))}particleInit(e,t){var n,r;if("image"!==t.shape&&"images"!==t.shape)return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,a=t.shapeData,s=t.getFillColor(),o=i.find((e=>e.name===a.name||e.source===a.src));if(!o)return;const l=null!==(n=null!==(r=a.replaceColor)&&void 0!==r?r:a.replace_color)&&void 0!==n?n:o.replaceColor;o.loading?setTimeout((()=>{this.particleInit(e,t)})):(async(e,n)=>{let r;var i;o.svgData&&s?r=await xU(o,a,s,t):r={color:s,data:o,element:o.element,gif:o.gif,gifData:o.gifData,gifLoopCount:o.gifLoopCount,loaded:!0,ratio:a.width&&a.height?a.width/a.height:null!==(i=o.ratio)&&void 0!==i?i:1,replaceColor:l,source:a.src};r.ratio||(r.ratio=1);const c={image:r,fill:null!==(e=a.fill)&&void 0!==e?e:t.fill,close:null!==(n=a.close)&&void 0!==n?n:t.close};t.image=c.image,t.fill=c.fill,t.close=c.close})()}}class wU{constructor(){this.src="",this.gif=!1}load(e){e&&(void 0!==e.gif&&(this.gif=e.gif),void 0!==e.height&&(this.height=e.height),void 0!==e.name&&(this.name=e.name),void 0!==e.replaceColor&&(this.replaceColor=e.replaceColor),void 0!==e.src&&(this.src=e.src),void 0!==e.width&&(this.width=e.width))}}class SU{constructor(e){this.id="imagePreloader",this._engine=e}getPlugin(){return{}}loadOptions(e,t){if(!t||!t.preload)return;e.preload||(e.preload=[]);const n=e.preload;for(const r of t.preload){const e=n.find((e=>e.name===r.name||e.src===r.src));if(e)e.load(r);else{const e=new wU;e.load(r),n.push(e)}}}needsPlugin(){return!0}}async function _U(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){e.loadImage||(e.loadImage=async t=>{if(!t.name&&!t.src)throw new Error("".concat(xL," no image source provided"));if(e.images||(e.images=[]),!e.images.find((e=>e.name===t.name||e.source===t.src)))try{var n,r;const i={gif:null!==(n=t.gif)&&void 0!==n&&n,name:null!==(r=t.name)&&void 0!==r?r:t.src,source:t.src,type:t.src.substring(t.src.length-3),error:!1,loading:!0,replaceColor:t.replaceColor,ratio:t.width&&t.height?t.width/t.height:void 0};e.images.push(i);const a=t.gif?vU:t.replaceColor?yU:gU;await a(i)}catch(a){var i;throw new Error("".concat(xL," ").concat(null!==(i=t.name)&&void 0!==i?i:t.src," not found"))}})}(e);const n=new SU(e);await e.addPlugin(n,t),await e.addShape(["image","images"],new bU(e),t)}class AU extends hN{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),void 0!==e.sync&&(this.sync=e.sync))}}class EU extends hN{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(e){e&&(super.load(e),void 0!==e.sync&&(this.sync=e.sync))}}class CU{constructor(){this.count=0,this.delay=new AU,this.duration=new EU}load(e){e&&(void 0!==e.count&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}class MU{constructor(e){this.container=e}init(e){const t=this.container,n=e.options.life;n&&(e.life={delay:t.retina.reduceFactor?PL(n.delay.value)*(n.delay.sync?1:CL())/t.retina.reduceFactor*1e3:0,delayTime:0,duration:t.retina.reduceFactor?PL(n.duration.value)*(n.duration.sync?1:CL())/t.retina.reduceFactor*1e3:0,time:0,count:n.count},e.life.duration<=0&&(e.life.duration=-1),e.life.count<=0&&(e.life.count=-1),e.life&&(e.spawning=e.life.delay>0))}isEnabled(e){return!e.destroyed}loadOptions(e){e.life||(e.life=new CU);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.life.load(null===i||void 0===i?void 0:i.life)}update(e,t){if(!this.isEnabled(e)||!e.life)return;const n=e.life;let r=!1;if(e.spawning){if(n.delayTime+=t.value,!(n.delayTime>=e.life.delay))return;r=!0,e.spawning=!1,n.delayTime=0,n.time=0}if(-1===n.duration)return;if(e.spawning)return;if(r?n.time=0:n.time+=t.value,n.time<n.duration)return;if(n.time=0,e.life.count>0&&e.life.count--,0===e.life.count)return void e.destroy();const i=this.container.canvas.size,a=IL(0,i.width),s=IL(0,i.width);e.position.x=kL(a),e.position.y=kL(s),e.spawning=!0,n.delayTime=0,n.time=0,e.reset();const o=e.options.life;o&&(n.delay=1e3*PL(o.delay.value),n.duration=1e3*PL(o.duration.value))}}class TU{draw(e,t,n){var r;const i=t.shapeData;e.moveTo(-n/2,0),e.lineTo(n/2,0),e.lineCap=null!==(r=null===i||void 0===i?void 0:i.cap)&&void 0!==r?r:"butt"}getSidesCount(){return 1}}class kU{init(){}isEnabled(e){return!VL()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,n=t.actualOptions.interactivity.events.onHover.parallax;if(VL()||!n.enable)return;const r=n.force,i=t.interactivity.mouse.position;if(!i)return;const a=t.canvas.size,s=a.width/2,o=a.height/2,l=n.smooth,c=e.getRadius()/r,u=(i.x-s)*c,d=(i.y-o)*c,{offset:h}=e;h.x+=(u-h.x)/l,h.y+=(d-h.y)/l}}class PU{constructor(e){this.container=e,this.type="particles"}}class RU extends PU{constructor(e){super(e)}clear(){}init(){}async interact(e){var t;const n=this.container,r=null!==(t=e.retina.attractDistance)&&void 0!==t?t:n.retina.attractDistance,i=e.getPosition(),a=n.particles.quadTree.queryCircle(i,r);for(const s of a){if(e===s||!s.options.move.attract.enable||s.destroyed||s.spawning)continue;const t=s.getPosition(),{dx:n,dy:r}=jL(i,t),a=e.options.move.attract.rotate,o=n/(1e3*a.x),l=r/(1e3*a.y),c=s.size.value/e.size.value,u=1/c;e.velocity.x-=o*c,e.velocity.y-=l*c,s.velocity.x+=o*u,s.velocity.y+=l*u}}isEnabled(e){return e.options.move.attract.enable}reset(){}}function DU(e,t,n,r,i,a){const s=ML(e.options.collisions.absorb.speed*i.factor/10,0,r);e.size.value+=s/2,n.size.value-=s,r<=a&&(n.size.value=0,n.destroy())}const IU=e=>{void 0===e.collisionMaxSpeed&&(e.collisionMaxSpeed=PL(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function BU(e,t){tO(eO(e),eO(t)),IU(e),IU(t)}function jU(e,t,n,r){switch(e.options.collisions.mode){case"absorb":!function(e,t,n,r){const i=e.getRadius(),a=t.getRadius();void 0===i&&void 0!==a?e.destroy():void 0!==i&&void 0===a?t.destroy():void 0!==i&&void 0!==a&&(i>=a?DU(e,0,t,a,n,r):DU(t,0,e,i,n,r))}(e,t,n,r);break;case"bounce":BU(e,t);break;case"destroy":!function(e,t){e.unbreakable||t.unbreakable||BU(e,t),void 0===e.getRadius()&&void 0!==t.getRadius()?e.destroy():void 0!==e.getRadius()&&void 0===t.getRadius()?t.destroy():void 0!==e.getRadius()&&void 0!==t.getRadius()&&(e.getRadius()>=t.getRadius()?t:e).destroy()}(e,t)}}class FU extends PU{constructor(e){super(e)}clear(){}init(){}async interact(e,t){if(e.destroyed||e.spawning)return;const n=this.container,r=e.getPosition(),i=e.getRadius(),a=n.particles.quadTree.queryCircle(r,2*i);for(const s of a){if(e===s||!s.options.collisions.enable||e.options.collisions.mode!==s.options.collisions.mode||s.destroyed||s.spawning)continue;const a=s.getPosition(),o=s.getRadius();if(Math.abs(Math.round(r.z)-Math.round(a.z))>i+o)continue;FL(r,a)>i+o||jU(e,s,t,n.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}class LU extends QN{constructor(e,t,n,r){super(e,t,n),this.canvasSize=r,this.canvasSize=(0,c.A)({},r)}contains(e){const{width:t,height:n}=this.canvasSize,{x:r,y:i}=e;return super.contains(e)||super.contains({x:r-t,y:i})||super.contains({x:r-t,y:i-n})||super.contains({x:r,y:i-n})}intersects(e){if(super.intersects(e))return!0;const t=e,n=e,r={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(void 0!==n.radius){const e=new QN(r.x,r.y,2*n.radius);return super.intersects(e)}if(void 0!==t.size){const e=new ZN(r.x,r.y,2*t.size.width,2*t.size.height);return super.intersects(e)}return!1}}class OU{constructor(){this.blur=5,this.color=new UO,this.color.value="#000",this.enable=!1}load(e){e&&(void 0!==e.blur&&(this.blur=e.blur),this.color=UO.create(this.color,e.color),void 0!==e.enable&&(this.enable=e.enable))}}class NU{constructor(){this.enable=!1,this.frequency=1}load(e){e&&(void 0!==e.color&&(this.color=UO.create(this.color,e.color)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.frequency&&(this.frequency=e.frequency),void 0!==e.opacity&&(this.opacity=e.opacity))}}class zU{constructor(){this.blink=!1,this.color=new UO,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new OU,this.triangles=new NU,this.width=1,this.warp=!1}load(e){e&&(void 0!==e.id&&(this.id=e.id),void 0!==e.blink&&(this.blink=e.blink),this.color=UO.create(this.color,e.color),void 0!==e.consent&&(this.consent=e.consent),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.frequency&&(this.frequency=e.frequency),void 0!==e.opacity&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),void 0!==e.width&&(this.width=e.width),void 0!==e.warp&&(this.warp=e.warp))}}function UU(e,t,n,r,i){const{dx:a,dy:s,distance:o}=jL(e,t);if(!i||o<=n)return o;const l={x:Math.abs(a),y:Math.abs(s)},c=Math.min(l.x,r.width-l.x),u=Math.min(l.y,r.height-l.y);return Math.sqrt(c**2+u**2)}class HU extends PU{constructor(e){super(e),this._setColor=e=>{if(!e.options.links)return;const t=this.linkContainer,n=e.options.links;let r=void 0===n.id?t.particles.linksColor:t.particles.linksColors.get(n.id);if(r)return;r=RO(n.color,n.blink,n.consent),void 0===n.id?t.particles.linksColor=r:t.particles.linksColors.set(n.id,r)},this.linkContainer=e}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(e){var t;if(!e.options.links)return;e.links=[];const n=e.getPosition(),r=this.container,i=r.canvas.size;if(n.x<0||n.y<0||n.x>i.width||n.y>i.height)return;const a=e.options.links,s=a.opacity,o=null!==(t=e.retina.linksDistance)&&void 0!==t?t:0,l=a.warp,c=l?new LU(n.x,n.y,o,i):new QN(n.x,n.y,o),u=r.particles.quadTree.query(c);for(const d of u){const t=d.options.links;if(e===d||null===t||void 0===t||!t.enable||a.id!==t.id||d.spawning||d.destroyed||!d.links||e.links.some((e=>e.destination===d))||d.links.some((t=>t.destination===e)))continue;const r=d.getPosition();if(r.x<0||r.y<0||r.x>i.width||r.y>i.height)continue;const c=UU(n,r,o,i,l&&t.warp);if(c>o)continue;const u=(1-c/o)*s;this._setColor(e),e.links.push({destination:d,opacity:u})}}isEnabled(e){var t;return!(null===(t=e.options.links)||void 0===t||!t.enable)}loadParticlesOptions(e){e.links||(e.links=new zU);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){var i,a;e.links.load(null!==(i=null!==(a=null===s||void 0===s?void 0:s.links)&&void 0!==a?a:null===s||void 0===s?void 0:s.lineLinked)&&void 0!==i?i:null===s||void 0===s?void 0:s.line_linked)}}reset(){}}function GU(e,t){const n=(r=e.map((e=>e.id)),r.sort(((e,t)=>e-t)),r.join("_"));var r;let i=t.get(n);return void 0===i&&(i=CL(),t.set(n,i)),i}class VU{constructor(e){this.container=e,this._drawLinkLine=(e,t)=>{const n=e.options.links;if(null===n||void 0===n||!n.enable)return;const r=this.container,i=r.actualOptions,a=t.destination,s=e.getPosition(),o=a.getPosition();let l=t.opacity;r.canvas.draw((t=>{var c,u,d;let h;const p=null===(c=e.options.twinkle)||void 0===c?void 0:c.lines;if(null!==p&&void 0!==p&&p.enable){const e=p.frequency,t=wO(p.color);CL()<e&&t&&(h=t,l=PL(p.opacity))}if(!h){const t=void 0!==n.id?r.particles.linksColors.get(n.id):r.particles.linksColor;h=PO(e,a,t)}if(!h)return;const f=null!==(u=e.retina.linksWidth)&&void 0!==u?u:0,m=null!==(d=e.retina.linksDistance)&&void 0!==d?d:0,{backgroundMask:g}=i;!function(e){let t=!1;const{begin:n,end:r,maxDistance:i,context:a,canvasSize:s,width:o,backgroundMask:l,colorLine:c,opacity:u,links:d}=e;if(FL(n,r)<=i)jO(a,n,r),t=!0;else if(d.warp){let e,o;const l=jL(n,{x:r.x-s.width,y:r.y});if(l.distance<=i){const t=n.y-l.dy/l.dx*n.x;e={x:0,y:t},o={x:s.width,y:t}}else{const t=jL(n,{x:r.x,y:r.y-s.height});if(t.distance<=i){const r=-(n.y-t.dy/t.dx*n.x)/(t.dy/t.dx);e={x:r,y:0},o={x:r,y:s.height}}else{const t=jL(n,{x:r.x-s.width,y:r.y-s.height});if(t.distance<=i){const r=n.y-t.dy/t.dx*n.x;e={x:-r/(t.dy/t.dx),y:r},o={x:e.x+s.width,y:e.y+s.height}}}}e&&o&&(jO(a,n,e),jO(a,r,o),t=!0)}if(!t)return;a.lineWidth=o,l.enable&&(a.globalCompositeOperation=l.composite),a.strokeStyle=MO(c,u);const{shadow:h}=d;if(h.enable){const e=wO(h.color);e&&(a.shadowBlur=h.blur,a.shadowColor=MO(e))}a.stroke()}({context:t,width:f,begin:s,end:o,maxDistance:m,canvasSize:r.canvas.size,links:n,backgroundMask:g,colorLine:h,opacity:l})}))},this._drawLinkTriangle=(e,t,n)=>{var r;const i=e.options.links;if(null===i||void 0===i||!i.enable)return;const a=i.triangles;if(!a.enable)return;const s=this.container,o=s.actualOptions,l=t.destination,c=n.destination,u=null!==(r=a.opacity)&&void 0!==r?r:(t.opacity+n.opacity)/2;u<=0||s.canvas.draw((t=>{var n;const r=e.getPosition(),d=l.getPosition(),h=c.getPosition(),p=null!==(n=e.retina.linksDistance)&&void 0!==n?n:0;if(FL(r,d)>p||FL(h,d)>p||FL(h,r)>p)return;let f=wO(a.color);if(!f){const t=void 0!==i.id?s.particles.linksColors.get(i.id):s.particles.linksColor;f=PO(e,l,t)}f&&function(e){const{context:t,pos1:n,pos2:r,pos3:i,backgroundMask:a,colorTriangle:s,opacityTriangle:o}=e;!function(e,t,n,r){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.lineTo(r.x,r.y),e.closePath()}(t,n,r,i),a.enable&&(t.globalCompositeOperation=a.composite),t.fillStyle=MO(s,o),t.fill()}({context:t,pos1:r,pos2:d,pos3:h,backgroundMask:o.backgroundMask,colorTriangle:f,opacityTriangle:u})}))},this._drawTriangles=(e,t,n,r)=>{var i,a,s;const o=n.destination;if(null===(i=e.links)||void 0===i||!i.triangles.enable||null===(a=o.options.links)||void 0===a||!a.triangles.enable)return;const l=null===(s=o.links)||void 0===s?void 0:s.filter((e=>{const t=this._getLinkFrequency(o,e.destination);return o.options.links&&t<=o.options.links.frequency&&r.findIndex((t=>t.destination===e.destination))>=0}));if(null!==l&&void 0!==l&&l.length)for(const c of l){const r=c.destination;this._getTriangleFrequency(t,o,r)>e.links.triangles.frequency||this._drawLinkTriangle(t,n,c)}},this._getLinkFrequency=(e,t)=>GU([e,t],this._freqs.links),this._getTriangleFrequency=(e,t,n)=>GU([e,t,n],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:n,options:r}=t;if(!n||n.length<=0)return;const i=n.filter((e=>r.links&&this._getLinkFrequency(t,e.destination)<=r.links.frequency));for(const s of i){var a;this._drawTriangles(r,t,s,i),s.opacity>0&&(null!==(a=t.retina.linksWidth)&&void 0!==a?a:0)>0&&this._drawLinkLine(t,s)}}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this.container.retina.pixelRatio,{retina:n}=e,{distance:r,width:i}=e.options.links;n.linksDistance=r*t,n.linksWidth=i*t}particleDestroyed(e){e.links=[]}}class WU{constructor(){this.id="links"}getPlugin(e){return new VU(e)}loadOptions(){}needsPlugin(){return!0}}async function qU(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("particlesLinks",(e=>new HU(e)),t)}(e,t),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new WU;await e.addPlugin(n,t)}(e,t)}class XU{draw(e,t,n){const r=this.getCenter(t,n),i=this.getSidesData(t,n),a=i.count.numerator*i.count.denominator,s=i.count.numerator/i.count.denominator,o=180*(s-2)/s,l=Math.PI-Math.PI*o/180;if(e){e.beginPath(),e.translate(r.x,r.y),e.moveTo(0,0);for(let t=0;t<a;t++)e.lineTo(i.length,0),e.translate(i.length,0),e.rotate(l)}}getSidesCount(e){var t,n;const r=e.shapeData;return Math.round(PL(null!==(t=null!==(n=null===r||void 0===r?void 0:r.sides)&&void 0!==n?n:null===r||void 0===r?void 0:r.nb_sides)&&void 0!==t?t:5))}}class JU extends XU{getCenter(e,t){return{x:-t/(e.sides/3.5),y:-t/.76}}getSidesData(e,t){const n=e.sides;return{count:{denominator:1,numerator:n},length:2.66*t/(n/3)}}}class YU extends XU{getCenter(e,t){return{x:-t,y:t/1.66}}getSidesCount(){return 3}getSidesData(e,t){return{count:{denominator:2,numerator:3},length:2*t}}}async function KU(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("polygon",new JU,t)}(e,t),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("triangle",new YU,t)}(e,t)}class ZU{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=IL(e.speed)),void 0!==e.decay&&(this.decay=IL(e.decay)),void 0!==e.sync&&(this.sync=e.sync))}}class QU extends hN{constructor(){super(),this.animation=new ZU,this.direction="clockwise",this.path=!1,this.value=0}load(e){e&&(super.load(e),void 0!==e.direction&&(this.direction=e.direction),this.animation.load(e.animation),void 0!==e.path&&(this.path=e.path))}}class $U{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:PL(t.value)*Math.PI/180},e.pathRotation=t.path;let n=t.direction;if("random"===n){n=Math.floor(2*CL())>0?"counter-clockwise":"clockwise"}switch(n){case"counter-clockwise":case"counterClockwise":e.rotate.status="decreasing";break;case"clockwise":e.rotate.status="increasing"}const r=t.animation;r.enable&&(e.rotate.decay=1-PL(r.decay),e.rotate.velocity=PL(r.speed)/360*this.container.retina.reduceFactor,r.sync||(e.rotate.velocity*=CL())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return!!t&&(!e.destroyed&&!e.spawning&&t.animation.enable&&!t.path)}loadOptions(e){e.rotate||(e.rotate=new QU);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.rotate.load(null===i||void 0===i?void 0:i.rotate)}update(e,t){var n,r;this.isEnabled(e)&&(!function(e,t){var n,r;const i=e.rotate,a=e.options.rotate;if(!i||!a)return;const s=a.animation,o=(null!==(n=i.velocity)&&void 0!==n?n:0)*t.factor,l=2*Math.PI,c=null!==(r=i.decay)&&void 0!==r?r:1;s.enable&&("increasing"===i.status?(i.value+=o,i.value>l&&(i.value-=l)):(i.value-=o,i.value<0&&(i.value+=l)),i.velocity&&1!==c&&(i.velocity*=c))}(e,t),e.rotation=null!==(n=null===(r=e.rotate)||void 0===r?void 0:r.value)&&void 0!==n?n:0)}}const eH=Math.sqrt(2);class tH{draw(e,t,n){const r=n/eH,i=2*r;e.rect(-r,-r,i,i)}getSidesCount(){return 4}}class nH{draw(e,t,n){var r;const i=t.sides,a=null!==(r=t.starInset)&&void 0!==r?r:2;e.moveTo(0,0-n);for(let s=0;s<i;s++)e.rotate(Math.PI/i),e.lineTo(0,0-n*a),e.rotate(Math.PI/i),e.lineTo(0,0-n)}getSidesCount(e){var t,n;const r=e.shapeData;return Math.round(PL(null!==(t=null!==(n=null===r||void 0===r?void 0:r.sides)&&void 0!==n?n:null===r||void 0===r?void 0:r.nb_sides)&&void 0!==t?t:5))}particleInit(e,t){var n;const r=t.shapeData,i=PL(null!==(n=null===r||void 0===r?void 0:r.inset)&&void 0!==n?n:2);t.starInset=i}}function rH(e,t,n,r,i){var a,s,o,l,c,u,d,h,p;if(!t||!n.enable||(null!==(a=t.maxLoops)&&void 0!==a?a:0)>0&&(null!==(s=t.loops)&&void 0!==s?s:0)>(null!==(o=t.maxLoops)&&void 0!==o?o:0))return;if(t.time||(t.time=0),(null!==(l=t.delayTime)&&void 0!==l?l:0)>0&&t.time<(null!==(c=t.delayTime)&&void 0!==c?c:0)&&(t.time+=e.value),(null!==(u=t.delayTime)&&void 0!==u?u:0)>0&&t.time<(null!==(d=t.delayTime)&&void 0!==d?d:0))return;const f=kL(n.offset),m=(null!==(h=t.velocity)&&void 0!==h?h:0)*e.factor+3.6*f,g=null!==(p=t.decay)&&void 0!==p?p:1;i&&"increasing"!==t.status?(t.value-=m,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)):(t.value+=m,t.value>r&&(t.loops||(t.loops=0),t.loops++,i&&(t.status="decreasing",t.value-=t.value%r))),t.velocity&&1!==g&&(t.velocity*=g),t.value>r&&(t.value%=r)}class iH{constructor(e){this.container=e}init(e){var t,n,r;const i=this.container,a=e.options,s=iO(a.stroke,e.id,a.reduceDuplicates);e.strokeWidth=PL(s.width)*i.retina.pixelRatio,e.strokeOpacity=PL(null!==(t=s.opacity)&&void 0!==t?t:1),e.strokeAnimation=null===(n=s.color)||void 0===n?void 0:n.animation;const o=null!==(r=_O(s.color))&&void 0!==r?r:e.getFillColor();o&&(e.strokeColor=IO(o,e.strokeAnimation,i.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:n}=e;return!e.destroyed&&!e.spawning&&!!t&&(void 0!==(null===n||void 0===n?void 0:n.h.value)&&n.h.enable||void 0!==(null===n||void 0===n?void 0:n.s.value)&&n.s.enable||void 0!==(null===n||void 0===n?void 0:n.l.value)&&n.l.enable)}update(e,t){this.isEnabled(e)&&function(e,t){if(!e.strokeColor||!e.strokeAnimation)return;const{h:n,s:r,l:i}=e.strokeColor,{h:a,s:s,l:o}=e.strokeAnimation;n&&rH(t,n,a,360,!1),r&&rH(t,r,s,100,!0),i&&rH(t,i,o,100,!0)}(e,t)}}const aH=["text","character","char"];class sH{draw(e,t,n,r){var i,a,s;const o=t.shapeData;if(void 0===o)return;const l=o.value;if(void 0===l)return;void 0===t.text&&(t.text=iO(l,t.randomIndexData));const c=t.text,u=null!==(i=o.style)&&void 0!==i?i:"",d=null!==(a=o.weight)&&void 0!==a?a:"400",h=2*Math.round(n),p=null!==(s=o.font)&&void 0!==s?s:"Verdana",f=t.fill,m=c.length*n/2;e.font="".concat(u," ").concat(d," ").concat(h,'px "').concat(p,'"');const g={x:-m,y:n/2};e.globalAlpha=r,f?e.fillText(c,g.x,g.y):e.strokeText(c,g.x,g.y),e.globalAlpha=1}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(aH.find((e=>qL(e,t.particles.shape.type)))){const e=aH.map((e=>t.particles.shape.options[e])).find((e=>!!e)),n=[];rO(e,(e=>{n.push(async function(e,t){try{await document.fonts.load("".concat(null!==t&&void 0!==t?t:"400"," 36px '").concat(null!==e&&void 0!==e?e:"Verdana","'"))}catch(n){}}(e.font,e.weight))})),await Promise.all(n)}}particleInit(e,t){if(!t.shape||!aH.includes(t.shape))return;const n=t.shapeData;if(void 0===n)return;const r=n.value;void 0!==r&&(t.text=iO(r,t.randomIndexData))}}async function oH(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(e=>{const{particlesJS:t,pJSDom:n}=(e=>{const t=(t,n)=>e.load(t,n);return t.load=(t,n,r)=>{e.loadJSON(t,n).then((e=>{e&&r(e)})).catch((()=>{r(void 0)}))},t.setOnClickHandler=t=>{e.setOnClickHandler(t)},{particlesJS:t,pJSDom:e.dom()}})(e);window.particlesJS=t,window.pJSDom=n,window.Particles=bz})(e),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addMover("parallax",(()=>new kU),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalAttract",(t=>new Fz(e,t)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalBounce",(e=>new Oz(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalBubble",(e=>new Gz(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalConnect",(e=>new Jz(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalGrab",(e=>new Qz(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalPause",(e=>new $z(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalPush",(e=>new tU(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalRemove",(e=>new rU(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalRepulse",(t=>new oU(e,t)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("externalSlow",(e=>new cU(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("particlesAttract",(e=>new RU(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addInteractor("particlesCollisions",(e=>new FU(e)),t)}(e,!1),await qU(e,!1),await async function(){AL("ease-in-quad",(e=>e**2)),AL("ease-out-quad",(e=>1-(1-e)**2)),AL("ease-in-out-quad",(e=>e<.5?2*e**2:1-(-2*e+2)**2/2))}(),await _U(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("line",new TU,t)}(e,!1),await KU(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape(["edge","square"],new tH,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape("star",new nH,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addShape(aH,new sH,t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("life",(e=>new MU(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("rotate",(e=>new $U(e)),t)}(e,!1),await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await e.addParticleUpdater("strokeColor",(e=>new iH(e)),t)}(e,!1),await Iz(e,t)}const lH=e=>{let{id:t="tsparticles",background:n="transparent",minSize:i=.6,maxSize:a=1.4,particleDensity:s=100,particleColor:o="#FFFFFF",className:l}=e;const c=(0,r.useCallback)((async e=>{await oH(e)}),[]);return(0,ur.jsx)(xz,{id:t,init:c,className:l,options:{background:{color:{value:n}},fullScreen:{enable:!1},fpsLimit:60,detectRetina:!0,particles:{number:{value:s,density:{enable:!0,area:800}},color:{value:o},shape:{type:"circle"},opacity:{value:.8,animation:{enable:!0,speed:.6,minimumValue:.2,startValue:"random"}},size:{value:{min:i,max:a}},move:{enable:!0,speed:.4,direction:"none",random:!0,straight:!1,outModes:{default:"out"}},links:{enable:!1}},interactivity:{events:{onHover:{enable:!1},resize:!0}}}})},cH={"&::-webkit-scrollbar":{width:"5px",height:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"gray.300",borderRadius:"5px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"gray.400"},"&::-webkit-scrollbar-track":{display:"none"}},uH=e=>({__html:RB(e||"")}),dH=()=>{var e;const t=(0,r.useContext)(GS),{hostName:n,user:i,receiver:a,socket:s,activeChatId:o,messageList:l,setMessageList:u,isOtherUserTyping:d,setIsOtherUserTyping:h,setActiveChatId:p,setReceiver:f,setMyChatList:m,myChatList:v,isChatLoading:y}=t,[x,b]=(0,r.useState)(!1),w=m_(),{isOpen:S,onOpen:_,onClose:A}=g(),E=g(),C=g(),[M,T]=(0,r.useState)(null),[k,P]=(0,r.useState)(null),R={loop:!0,autoplay:!0,animationData:gI,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};(0,r.useEffect)((()=>{const e=e=>{const t=e.detail,n=document.getElementById("msg-".concat(t));n&&(n.scrollIntoView({behavior:"smooth",block:"center"}),n.style.outline="2px solid gold",setTimeout((()=>{n.style.outline=""}),1500))};return window.addEventListener("jumpToMessage",e),()=>window.removeEventListener("jumpToMessage",e)}),[]),(0,r.useEffect)((()=>{const e=e=>P(e.detail||null);return window.addEventListener("replyToChange",e),()=>window.removeEventListener("replyToChange",e)}),[]),(0,r.useEffect)((()=>()=>{window.addEventListener("popstate",(()=>{s.emit("leave-chat",o),p(""),u([]),f({})}))}),[s,o,p,u,f]),(0,r.useEffect)((()=>(s.on("user-joined-room",(e=>{const t=l.map((t=>{if(t.senderId===i._id&&e!==i._id){-1===t.seenBy.findIndex((t=>t.user===e))&&t.seenBy.push({user:e,seenAt:new Date})}return t}));u(t)})),s.on("typing",(e=>{e.typer!==i._id&&h(!0)})),s.on("stop-typing",(e=>{e.typer!==i._id&&h(!1)})),s.on("receive-message",(e=>{u((t=>[...t,e])),setTimeout((()=>{var e;null===(e=document.getElementById("chat-box"))||void 0===e||e.scrollTo({top:document.getElementById("chat-box").scrollHeight,behavior:"smooth"})}),100)})),s.on("incoming-call",(e=>{T(e),C.onOpen()})),s.on("message-deleted",(e=>{const{messageId:t}=e;u((e=>e.filter((e=>e._id!==t))))})),s.on("message-reacted",(e=>{let{messageId:t,reaction:n}=e;u((e=>e.map((e=>e._id===t?(0,c.A)((0,c.A)({},e),{},{reaction:n}):e))))})),s.on("message-edited",(e=>{let{messageId:t,text:n}=e;u((e=>e.map((e=>e._id===t?(0,c.A)((0,c.A)({},e),{},{text:n}):e))))})),()=>{s.off("typing"),s.off("stop-typing"),s.off("receive-message"),s.off("message-deleted"),s.off("incoming-call"),s.off("message-edited")})),[s,l,u,i._id,h,C]);const D=async(e,t,r)=>{var l;(e.preventDefault(),t)||(t=(null===(l=document.getElementById("new-message"))||void 0===l?void 0:l.value)||"");if(s.emit("stop-typing",{typer:i._id,conversationId:o}),""===t&&!r)return void w({title:"Message cannot be empty",status:"warning",duration:3e3,isClosable:!0});const c=k||window.__replyTo||null;if(r)try{const e=new FormData;e.append("file",r),e.append("conversationId",o),e.append("sender",i._id),e.append("text",t),c&&e.append("replyTo",c);const l=await cL.post("".concat(n,"/message/send"),e,{headers:{"Content-Type":"multipart/form-data","auth-token":localStorage.getItem("token")}});if(200!==l.status)throw new Error("Failed to send message with file");const d=l.data;c&&(d.replyTo=c),u((e=>[...e,d]));const h=null===a||void 0===a?void 0:a._id;return void(h&&s.emit("broadcast-existing-message",{message:d,receiverId:h}))}catch(p){return void w({title:p.message,status:"error",duration:3e3,isClosable:!0})}const d={text:t,conversationId:o,senderId:i._id,imageUrl:null,replyTo:c};s.emit("send-message",d);const h=document.getElementById("new-message");h&&(h.value=""),c&&(window.__replyTo=null,P(null),window.dispatchEvent(new CustomEvent("replyToChange",{detail:null}))),setTimeout((()=>{var e;null===(e=document.getElementById("chat-box"))||void 0===e||e.scrollTo({top:document.getElementById("chat-box").scrollHeight,behavior:"smooth"})}),100),m(await v.map((e=>(e._id===o&&(e.latestmessage=t,e.updatedAt=(new Date).toUTCString()),e))).sort(((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt))))},I=e=>{u((t=>t.filter((t=>t._id!==e))))};return(0,ur.jsxs)(ur.Fragment,{children:[""!==o?(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsxs)(pr,{justifyContent:"space-between",h:"100%",w:{base:"100vw",md:"100%"},children:[(0,ur.jsx)(IB,{}),y&&(0,ur.jsx)(FB,{}),(0,ur.jsx)(pr,{id:"chat-box",h:"85%",overflowY:"auto",sx:cH,mt:2,mx:1,bg:{base:"blackAlpha.200",md:"blackAlpha.200"},borderRadius:"lg",p:2,onDrop:async e=>{var t,n;e.preventDefault(),e.stopPropagation();const r=null===(t=e.dataTransfer)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];r&&await D(new Event("submit"),"",r)},onDragOver:e=>{e.preventDefault()},children:null===l||void 0===l?void 0:l.map(((e,t)=>{var r;return null!==(r=e.deletedby)&&void 0!==r&&r.includes(i._id)?null:(0,ur.jsx)(fL,{message:e,user:i,receiver:a,markdownToHtml:uH,scrollbarconfig:cH,socket:s,activeChatId:o,removeMessageFromList:I,toast:w,hostName:n,conversations:v},e._id||e.id||"".concat(e.senderId,"-").concat(e.createdAt||t))}))}),(0,ur.jsxs)(pr,{py:2,position:"fixed",w:{base:"100%",md:"70%"},bottom:{base:1,md:3},backgroundColor:"dark"===localStorage.getItem("chakra-ui-color-mode")?"#1a202c":"white",borderTopRadius:"xl",boxShadow:"0 -4px 12px rgba(0,0,0,0.2)",zIndex:1,children:[(0,ur.jsx)(pr,{mx:{base:6,md:3},w:"fit-content",children:d&&(0,ur.jsx)(mI.A,{options:R,height:20,width:20,isStopped:!1,isPaused:!1})}),(0,ur.jsx)(ri,{children:(0,ur.jsxs)(rD,{w:{base:"95%",md:"98%"},m:"auto",onKeyDown:e=>{"Enter"===e.key&&D(e)},children:[!(null!==a&&void 0!==a&&null!==(e=a.email)&&void 0!==e&&e.includes("bot"))&&(0,ur.jsxs)(cD,{children:[(0,ur.jsx)(b_,{mx:2,size:"sm",onClick:_,borderRadius:"lg",children:(0,ur.jsx)(gx,{})}),(0,ur.jsx)(b_,{ml:1,size:"sm",borderRadius:"lg",onClick:E.onOpen,children:"\ud83c\udfa4"})]}),(0,ur.jsx)($y,{placeholder:"Type a message",id:"new-message",onChange:()=>{const e=document.getElementById("new-message");e&&(""===e.value&&x?(b(!1),s.emit("stop-typing",{typer:i._id,conversationId:o})):""===e.value||x||(b(!0),s.emit("typing",{typer:i._id,conversationId:o})))},borderRadius:"10px",bg:"whiteAlpha.100",_hover:{bg:"whiteAlpha.200"},_focus:{bg:"whiteAlpha.300"}}),(k||window.__replyTo)&&(()=>{const e=k||window.__replyTo,t=l.find((t=>t._id===e)),n=t?t.text?t.text.slice(0,80):t.imageUrl||t.imageurl?"\ud83d\udcf7 Photo":t.audioUrl?"\ud83c\udfa4 Voice":t.videoUrl?"\ud83c\udfac Video":"Message":"#".concat(String(e).slice(-6));return(0,ur.jsxs)(pr,{position:"absolute",left:4,bottom:12,bg:"blackAlpha.500",color:"white",px:3,py:2,borderRadius:8,fontSize:"xs",maxW:"70%",boxShadow:"sm",children:[(0,ur.jsxs)(Jr,{noOfLines:2,children:["Replying to: ",n]}),(0,ur.jsx)(b_,{size:"xs",ml:2,mt:1,onClick:()=>{window.__replyTo=null,P(null),window.dispatchEvent(new CustomEvent("replyToChange",{detail:null}))},children:"Cancel"})]})})(),(0,ur.jsx)(uD,{children:(0,ur.jsx)(b_,{onClick:e=>{var t;return D(e,null===(t=document.getElementById("new-message"))||void 0===t?void 0:t.value)},size:"sm",mx:2,borderRadius:"10px",bgGradient:"linear(to-r, brand.500, cyan.400)",color:"white",_hover:{filter:"brightness(1.1)"},children:(0,ur.jsx)(fI,{})})})]})})]})]}),(0,ur.jsx)(BB,{isOpen:S,onClose:A,handleSendMessage:D}),(0,ur.jsx)(jB,{isOpen:E.isOpen,onClose:E.onClose,hostName:n,activeChatId:o,user:i,token:localStorage.getItem("token"),onRecorded:e=>{u((t=>[...t,e])),setTimeout((()=>{var e;null===(e=document.getElementById("chat-box"))||void 0===e||e.scrollTo({top:document.getElementById("chat-box").scrollHeight,behavior:"smooth"})}),100)}})]}):!y&&(0,ur.jsxs)(pr,{display:{base:"none",md:"block"},mx:"auto",w:"fit-content",mt:"30vh",textAlign:"center",position:"relative",children:[(0,ur.jsx)(pr,{position:"absolute",inset:0,w:"100vw",h:"60vh",left:"50%",transform:"translateX(-50%)",zIndex:0,children:(0,ur.jsx)(lH,{id:"tsparticles-chat-empty",background:"transparent",particleDensity:90,minSize:.6,maxSize:1.2,className:"w-full h-full",particleColor:"#ffffff"})}),(0,ur.jsxs)(pr,{position:"relative",zIndex:1,children:[(0,ur.jsx)(Jr,{fontSize:"6vw",fontWeight:"bold",fontFamily:"Work sans",children:"Allify"}),(0,ur.jsx)(Jr,{fontSize:"2vw",children:"Where chatting, fun, and friends come alive"}),(0,ur.jsx)(Jr,{fontSize:"md",children:"Select a chat to start messaging"})]})]}),M&&(0,ur.jsx)(DB,{isOpen:C.isOpen,onClose:C.onClose,socket:s,user:i,receiver:{_id:M.fromUserId,name:(null===a||void 0===a?void 0:a.name)||"Incoming"},conversationId:M.conversationId,callType:M.callType||"audio",mode:"incoming"})]})},hH=()=>{const e=(0,r.useContext)(GS),{user:t,isAuthenticated:n,activeChatId:i}=e,a=vw(),s=m_(),[o,l]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{n||(s({title:"You are not logged in",description:"Please login to continue",status:"warning",duration:3e3,isClosable:!0}),a("/"));const e=setTimeout((async()=>{n?l(await t&&!1):a("/")}),1e3);return()=>clearTimeout(e)}),[n,a,s,t]),(0,ur.jsxs)(ur.Fragment,{children:[o&&(0,ur.jsx)(ur.Fragment,{children:(0,ur.jsxs)(pr,{display:"flex",p:3,w:"99%",h:"85vh",borderRadius:"lg",borderWidth:"1px",m:"auto",mt:2,children:[(0,ur.jsxs)(pr,{h:"80vh",w:{base:"100%",md:"29vw"},mt:10,mx:2,children:[(0,ur.jsx)(bD,{mb:5}),(0,ur.jsx)(io,{children:Array.from({length:8}).map(((e,t)=>(0,ur.jsx)(MD,{height:"50px",borderRadius:"lg"},t)))})]}),(0,ur.jsx)(pr,{h:"80vh",w:"75%",display:{base:"none",md:"block"},children:(0,ur.jsxs)(io,{mt:5,children:[(0,ur.jsx)(kD,{size:"10",mx:2}),Array.from({length:4}).map(((e,t)=>(0,ur.jsx)(BD,{mt:4,mx:2,noOfLines:4,spacing:4,borderRadius:"lg"},t)))]})})]})}),!o&&(0,ur.jsx)(pr,{p:{base:0,md:0},w:{base:"93vw",md:"98vw"},h:{base:"85vh",md:"90vh"},m:"0px auto",borderRadius:"lg",borderWidth:{base:"0px",md:"2px"},minW:"min-content",children:(0,ur.jsxs)(Wr,{h:"100%",children:[(0,ur.jsx)(pr,{display:{base:""!==i?"none":"flex",md:"block"},w:{base:"100%",md:"30%"},position:"relative",zIndex:2,children:(0,ur.jsx)(pI,{})}),(0,ur.jsx)(pr,{h:"inherit",w:{base:"100%",md:"70%"},minW:"min-content",borderLeftWidth:{base:0,md:"1px"},position:"relative",zIndex:1,children:(0,ur.jsx)(dH,{})})]})})]})};function pH(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}const fH=Object.create(null);fH.open="0",fH.close="1",fH.ping="2",fH.pong="3",fH.message="4",fH.upgrade="5",fH.noop="6";const mH=Object.create(null);Object.keys(fH).forEach((e=>{mH[fH[e]]=e}));const gH={type:"error",data:"parser error"},vH="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),yH="function"===typeof ArrayBuffer,xH=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,bH=(e,t,n)=>{let{type:r,data:i}=e;return vH&&i instanceof Blob?t?n(i):wH(i,n):yH&&(i instanceof ArrayBuffer||xH(i))?t?n(i):wH(new Blob([i]),n):n(fH[r]+(i||""))},wH=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function SH(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let _H;const AH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",EH="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let Qie=0;Qie<64;Qie++)EH[AH.charCodeAt(Qie)]=Qie;const CH="function"===typeof ArrayBuffer,MH=(e,t)=>{if("string"!==typeof e)return{type:"message",data:kH(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:TH(e.substring(1),t)};return mH[n]?e.length>1?{type:mH[n],data:e.substring(1)}:{type:mH[n]}:gH},TH=(e,t)=>{if(CH){const n=(e=>{let t,n,r,i,a,s=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<o;t+=4)n=EH[e.charCodeAt(t)],r=EH[e.charCodeAt(t+1)],i=EH[e.charCodeAt(t+2)],a=EH[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&a;return c})(e);return kH(n,t)}return{base64:!0,data:e}},kH=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,PH=String.fromCharCode(30);function RH(){return new TransformStream({transform(e,t){!function(e,t){vH&&e.data instanceof Blob?e.data.arrayBuffer().then(SH).then(t):yH&&(e.data instanceof ArrayBuffer||xH(e.data))?t(SH(e.data)):bH(e,!1,(e=>{_H||(_H=new TextEncoder),t(_H.encode(e))}))}(e,(n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(n)}))}})}let DH;function IH(e){return e.reduce(((e,t)=>e+t.length),0)}function BH(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function jH(e){if(e)return function(e){for(var t in jH.prototype)e[t]=jH.prototype[t];return e}(e)}jH.prototype.on=jH.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},jH.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},jH.prototype.off=jH.prototype.removeListener=jH.prototype.removeAllListeners=jH.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},jH.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},jH.prototype.emitReserved=jH.prototype.emit,jH.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},jH.prototype.hasListeners=function(e){return!!this.listeners(e).length};const FH="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function LH(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const OH=FH.setTimeout,NH=FH.clearTimeout;function zH(e,t){t.useNativeTimers?(e.setTimeoutFn=OH.bind(FH),e.clearTimeoutFn=NH.bind(FH)):(e.setTimeoutFn=FH.setTimeout.bind(FH),e.clearTimeoutFn=FH.clearTimeout.bind(FH))}class UH extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class HH extends jH{constructor(e){super(),this.writable=!1,zH(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new UH(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=MH(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}const GH="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),VH=64,WH={};let qH,XH=0,JH=0;function YH(e){let t="";do{t=GH[e%VH]+t,e=Math.floor(e/VH)}while(e>0);return t}function KH(){const e=YH(+new Date);return e!==qH?(XH=0,qH=e):e+"."+YH(XH++)}for(;JH<VH;JH++)WH[GH[JH]]=JH;let ZH=!1;try{ZH="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Kie){}const QH=ZH;function $H(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||QH))return new XMLHttpRequest}catch(Zie){}if(!t)try{return new(FH[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(Zie){}}function eG(){}const tG=null!=new $H({xdomain:!1}).responseType;class nG extends jH{constructor(e,t){super(),zH(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e;const t=LH(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const n=this.xhr=new $H(t);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(Zie){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Zie){}try{n.setRequestHeader("Accept","*/*")}catch(Zie){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this.opts.cookieJar)||void 0===e||e.parseCookies(n)),4===n.readyState&&(200===n.status||1223===n.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(Zie){return void this.setTimeoutFn((()=>{this.onError(Zie)}),0)}"undefined"!==typeof document&&(this.index=nG.requestsCount++,nG.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=eG,e)try{this.xhr.abort()}catch(Zie){}"undefined"!==typeof document&&delete nG.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(nG.requestsCount=0,nG.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",rG);else if("function"===typeof addEventListener){addEventListener("onpagehide"in FH?"pagehide":"unload",rG,!1)}function rG(){for(let e in nG.requests)nG.requests.hasOwnProperty(e)&&nG.requests[e].abort()}const iG="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),aG=FH.WebSocket||FH.MozWebSocket,sG="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const oG={websocket:class extends HH{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=sG?{}:LH(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=sG?new aG(e,t,n):t?new aG(e,t):new aG(e)}catch(Kie){return this.emitReserved("error",Kie)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;bH(n,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(Zie){}r&&iG((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=KH()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!aG}},webtransport:class extends HH{get name(){return"webtransport"}doOpen(){"function"===typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((e=>{const t=function(e,t){DH||(DH=new TextDecoder);const n=[];let r=0,i=-1,a=!1;return new TransformStream({transform(s,o){for(n.push(s);;){if(0===r){if(IH(n)<1)break;const e=BH(n,1);a=128===(128&e[0]),i=127&e[0],r=i<126?3:126===i?1:2}else if(1===r){if(IH(n)<2)break;const e=BH(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(IH(n)<8)break;const e=BH(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>Math.pow(2,21)-1){o.enqueue(gH);break}i=a*Math.pow(2,32)+t.getUint32(4),r=3}else{if(IH(n)<i)break;const e=BH(n,i);o.enqueue(MH(a?e:DH.decode(e),t)),r=0}if(0===i||i>e){o.enqueue(gH);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=RH();r.readable.pipeTo(e.writable),this.writer=r.writable.getWriter();const i=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),i())})).catch((e=>{}))};i();const a={type:"open"};this.query.sid&&(a.data='{"sid":"'.concat(this.query.sid,'"}')),this.writer.write(a).then((()=>this.onOpen()))}))})))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this.writer.write(n).then((()=>{r&&iG((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}},polling:class extends HH{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}const t=e&&e.forceBase64;this.supportsBinary=tG&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(PH),r=[];for(let i=0;i<n.length;i++){const e=MH(n[i],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach(((e,a)=>{bH(e,!1,(e=>{r[a]=e,++i===n&&t(r.join(PH))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=KH()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new nG(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},lG=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,cG=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function uG(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=lG.exec(e||""),a={},s=14;for(;s--;)a[cG[s]]=i[s]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,a.query),a}class dG extends jH{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.binaryType="arraybuffer",this.writeBuffer=[],e&&"object"===typeof e&&(t=e,e=null),e?(e=uG(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=uG(t.host).host),zH(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new oG[e](n)}open(){let e;if(this.opts.rememberUpgrade&&dG.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(Zie){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),n=!1;dG.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;dG.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function i(){n||(n=!0,c(),t.close(),t=null)}const a=e=>{const n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function s(){a("transport closed")}function o(){a("socket closed")}function l(e){t&&e.name!==t.name&&i()}const c=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",s),this.off("close",o),this.off("upgrading",l)};t.once("open",r),t.once("error",a),t.once("close",s),this.once("close",o),this.once("upgrading",l),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onOpen(){if(this.readyState="open",dG.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"===typeof(t=r)?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this.maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){dG.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}dG.protocol=4;dG.protocol;const hG="function"===typeof ArrayBuffer,pG=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,fG=Object.prototype.toString,mG="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===fG.call(Blob),gG="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===fG.call(File);function vG(e){return hG&&(e instanceof ArrayBuffer||pG(e))||mG&&e instanceof Blob||gG&&e instanceof File}function yG(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(yG(e[t]))return!0;return!1}if(vG(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return yG(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&yG(e[n]))return!0;return!1}function xG(e){const t=[],n=e.data,r=e;return r.data=bG(n,t),r.attachments=t.length,{packet:r,buffers:t}}function bG(e,t){if(!e)return e;if(vG(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=bG(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=bG(e[r],t));return n}return e}function wG(e,t){return e.data=SG(e.data,t),delete e.attachments,e}function SG(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=SG(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=SG(e[n],t));return e}const _G=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],AG=5;var EG;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(EG||(EG={}));class CG{constructor(e){this.replacer=e}encode(e){return e.type!==EG.EVENT&&e.type!==EG.ACK||!yG(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===EG.EVENT?EG.BINARY_EVENT:EG.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==EG.BINARY_EVENT&&e.type!==EG.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=xG(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function MG(e){return"[object Object]"===Object.prototype.toString.call(e)}class TG extends jH{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===EG.BINARY_EVENT;n||t.type===EG.BINARY_ACK?(t.type=n?EG.EVENT:EG.ACK,this.reconstructor=new kG(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!vG(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===EG[n.type])throw new Error("unknown packet type "+n.type);if(n.type===EG.BINARY_EVENT||n.type===EG.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!TG.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(Zie){return!1}}static isPayloadValid(e,t){switch(e){case EG.CONNECT:return MG(t);case EG.DISCONNECT:return void 0===t;case EG.CONNECT_ERROR:return"string"===typeof t||MG(t);case EG.EVENT:case EG.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===_G.indexOf(t[0]));case EG.ACK:case EG.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class kG{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=wG(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function PG(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const RG=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class DG extends jH{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[PG(e,"open",this.onopen.bind(this)),PG(e,"packet",this.onpacket.bind(this)),PG(e,"error",this.onerror.bind(this)),PG(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){if(RG.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:EG.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){const e=this.ids++,t=n.pop();this._registerAckCallback(e,t),i.id=e}const a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var n,r=this;const i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const a=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),i);this.acks[e]=function(){r.io.clearTimeoutFn(a);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,[null,...n])}}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((t,r)=>{n.push(((e,n)=>i?e?r(e):t(n):t(e))),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];n(null,...a)}return r.pending=!1,t._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:EG.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case EG.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case EG.EVENT:case EG.BINARY_EVENT:this.onevent(e);break;case EG.ACK:case EG.BINARY_ACK:this.onack(e);break;case EG.DISCONNECT:this.ondisconnect();break;case EG.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t.packet({type:EG.ACK,id:e,data:i})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:EG.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function IG(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}IG.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},IG.prototype.reset=function(){this.attempts=0},IG.prototype.setMin=function(e){this.ms=e},IG.prototype.setMax=function(e){this.max=e},IG.prototype.setJitter=function(e){this.jitter=e};class BG extends jH{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,zH(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new IG({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||t;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new dG(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=PG(t,"open",(function(){n.onopen(),e&&e()})),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},a=PG(t,"error",i);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),i(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(PG(e,"ping",this.onping.bind(this)),PG(e,"data",this.ondata.bind(this)),PG(e,"error",this.onerror.bind(this)),PG(e,"close",this.onclose.bind(this)),PG(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(Zie){this.onclose("parse error",Zie)}}ondecoded(e){iG((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new DG(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const jG={};function FG(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=uG(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,a=n.path,s=jG[i]&&a in jG[i].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?o=new BG(r,t):(jG[i]||(jG[i]=new BG(r,t)),o=jG[i]),n.query&&!t.query&&(t.query=n.queryKey),o.socket(n.path,t)}Object.assign(FG,{Manager:BG,Socket:DG,io:FG,connect:FG});const LG="http://localhost:5000";var OG=FG(LG);"undefined"!==typeof window&&(window.__appSocket=OG);const NG=e=>{const[t,n]=(0,r.useState)(!!localStorage.getItem("token")),[i,a]=(0,r.useState)(localStorage.getItem("user")||{}),[s,o]=(0,r.useState)({}),[l,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(""),[p,f]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[v,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!0),_=async()=>{try{const e=await fetch("".concat(LG,"/conversation/"),{method:"GET",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")}});if(!e.ok)throw new Error("Failed to fetch data"+await e.text());const t=await e.json();f(t),S(!1),g(t)}catch(e){console.log(e)}};return(0,r.useEffect)((()=>{OG.on("receiver-online",(()=>{o((e=>(0,c.A)((0,c.A)({},e),{},{isOnline:!0})))}))}),[]),(0,r.useEffect)((()=>{OG.on("receiver-offline",(()=>{o((e=>(0,c.A)((0,c.A)({},e),{},{isOnline:!1,lastSeen:(new Date).toISOString()})))}))}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(e){const t=await fetch("".concat(LG,"/auth/me"),{method:"GET",headers:{"Content-Type":"application/json","auth-token":e}}),r=await t.json();a(r),console.log("user fetched"),n(!0),OG.emit("setup",await r._id),async function(e,t){try{if(!("serviceWorker"in navigator)||!("PushManager"in window))return!1;let n=await navigator.serviceWorker.getRegistration();n||(n=await navigator.serviceWorker.register("/sw.js"));const r=await fetch("".concat(e,"/push/key")),{key:i}=await r.json();if(!i)return!1;if("granted"!==await Notification.requestPermission())return!1;const a=await n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pH(i)}),s=JSON.stringify({endpoint:a.endpoint,keys:a.toJSON().keys});return await fetch("".concat(e,"/push/save"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":t},body:s}),!0}catch(Zie){return!1}}(LG,e).catch((()=>{}))}}catch(e){console.log(e),n(!1),a({}),localStorage.removeItem("token"),localStorage.removeItem("user")}})(),_()}),[]),(0,ur.jsx)(GS.Provider,{value:{isAuthenticated:t,setIsAuthenticated:n,user:i,setUser:a,receiver:s,setReceiver:o,messageList:l,setMessageList:u,activeChatId:d,setActiveChatId:h,myChatList:p,setMyChatList:f,originalChatList:m,fetchData:_,hostName:LG,socket:OG,isOtherUserTyping:v,setIsOtherUserTyping:y,isChatLoading:x,setIsChatLoading:b,isLoading:w,setIsLoading:S},children:e.children})},zG=()=>{const{id:e}=xw(),{hostName:t,user:n}=(0,r.useContext)(GS),i=m_(),[a,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{const n=await fetch("".concat(t,"/user/profile/").concat(e),{headers:{"auth-token":localStorage.getItem("token")}}),r=await n.json();s(r);const i=await fetch("".concat(t,"/social/user/").concat(e,"/posts"),{headers:{"auth-token":localStorage.getItem("token")}}),a=await i.json();u(a),l(!1)})()}),[t,e]);if(o||!a)return(0,ur.jsx)(Jr,{p:3,children:"Loading..."});const d=(null===n||void 0===n?void 0:n._id)===a._id;return(0,ur.jsxs)(pr,{p:4,children:[(0,ur.jsxs)(ao,{spacing:4,children:[(0,ur.jsx)(BR,{size:"xl",src:a.profilePic,name:a.name}),(0,ur.jsxs)(ex,{align:"start",spacing:1,children:[(0,ur.jsx)(Jr,{fontSize:"xl",fontWeight:"bold",children:a.name}),(0,ur.jsx)(Jr,{children:a.about}),(0,ur.jsxs)(ao,{children:[(0,ur.jsxs)(Jr,{children:[a.followersCount," followers"]}),(0,ur.jsx)(Jr,{children:"\u2022"}),(0,ur.jsxs)(Jr,{children:[a.followingCount," following"]})]}),!d&&(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{onClick:async()=>{await fetch("".concat(t,"/user/").concat(e,"/follow"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}});const n=await fetch("".concat(t,"/user/profile/").concat(e),{headers:{"auth-token":localStorage.getItem("token")}}),r=await n.json();s(r)},children:"Follow"}),(0,ur.jsx)(zr,{variant:"outline",onClick:async()=>{await fetch("".concat(t,"/user/").concat(e,"/unfollow"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}});const n=await fetch("".concat(t,"/user/profile/").concat(e),{headers:{"auth-token":localStorage.getItem("token")}}),r=await n.json();s(r)},children:"Unfollow"}),(0,ur.jsx)(zr,{variant:"ghost",onClick:async()=>{await fetch("".concat(t,"/user/block/").concat(e),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),i({title:"Blocked",duration:1200})},children:"Block"}),(0,ur.jsx)(zr,{variant:"ghost",onClick:async()=>{await fetch("".concat(t,"/user/unblock/").concat(e),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),i({title:"Unblocked",duration:1200})},children:"Unblock"})]})]})]}),!!c.length&&(0,ur.jsxs)(pr,{mt:6,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Posts"}),(0,ur.jsx)(lI,{columns:{base:2,md:3},spacing:2,children:c.map((e=>(0,ur.jsx)(pr,{bg:"blackAlpha.300",borderRadius:8,overflow:"hidden",children:e.mediaUrl?"image"===e.mediaType?(0,ur.jsx)(Tx,{src:e.mediaUrl,alt:"post"}):(0,ur.jsx)("video",{src:e.mediaUrl,style:{width:"100%"}}):(0,ur.jsx)(pr,{p:2,children:(0,ur.jsx)(Jr,{noOfLines:4,children:e.text||e.caption})})},e._id)))})]})]})},UG=["leastDestructiveRef"];function HG(e){const{leastDestructiveRef:t}=e,n=y(e,UG);return(0,ur.jsx)(Nm,(0,c.A)((0,c.A)({},n),{},{initialFocusRef:t}))}var GG=cr(((e,t)=>(0,ur.jsx)(Ny,(0,c.A)({ref:t,role:"alertdialog"},e))));function VG(){const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{try{const t=await fetch("".concat(e,"/portfolio/leaderboard"));t.ok&&n(await t.json())}catch(t){}})()}),[e]),(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(FR,{size:"md",mb:3,children:"Leaderboard"}),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[t.map(((e,t)=>{var n,r,i;return(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsxs)(Jr,{w:"24px",textAlign:"right",color:"gray.500",children:["#",t+1]}),(0,ur.jsx)(BR,{size:"sm",src:null===(n=e.user)||void 0===n?void 0:n.profilePic,name:null===(r=e.user)||void 0===r?void 0:r.name}),(0,ur.jsx)(Jr,{children:null===(i=e.user)||void 0===i?void 0:i.name})]}),(0,ur.jsxs)(Jr,{fontWeight:"bold",children:[e.solved," solved"]})]},t)})),0===t.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No data yet."})]})]})}const WG=e=>{let{title:t,children:n,actions:r}=e;return(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"lg",p:4,bg:"whiteAlpha.700",_dark:{bg:"blackAlpha.400"},children:[(0,ur.jsxs)(ao,{justify:"space-between",mb:3,children:[(0,ur.jsx)(FR,{size:"md",children:t}),r]}),n]})};function qG(){var e,t,n,i,a,s,o;const{hostName:l}=(0,r.useContext)(GS),u=m_(),[d,h]=(0,r.useState)({bio:"",headline:"",website:"",socials:{},handles:{},slug:"",theme:"light",accentColor:"#805AD5",badges:[],ratings:[]}),[p,f]=(0,r.useState)([]),[m,v]=(0,r.useState)(1),[y,x]=(0,r.useState)(0),[b,w]=(0,r.useState)([]),[S,_]=(0,r.useState)({byPlatform:[],byDifficulty:[],byTag:[]}),[A,E]=(0,r.useState)({title:"",platform:"LeetCode",difficulty:"Easy",url:"",tags:"",notes:"",status:"Solved"}),[C,M]=(0,r.useState)({platform:"All",status:"All",query:""}),[T,k]=(0,r.useState)(null),[P,R]=(0,r.useState)({}),D=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=new URLSearchParams({page:String(e),limit:"50"}),n=await fetch("".concat(l,"/portfolio/questions?").concat(t.toString()),{headers:{"auth-token":localStorage.getItem("token")}});if(n.ok){const t=await n.json();f(t.items||[]),x(t.total||0),v(e)}},I=(0,r.useMemo)((()=>{const e=(C.query||"").toLowerCase();return p.filter((t=>{var n;const r="All"===C.platform||t.platform===C.platform,i="All"===C.status||t.status===C.status,a=!e||(null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(e)),s=!e||(t.tags||[]).some((t=>t.toLowerCase().includes(e)));return r&&i&&(a||s)}))}),[p,C]),[B,j]=(0,r.useState)([]),[F,L]=(0,r.useState)({name:"",url:"",total:0,completed:0,tags:""}),O=async()=>{const e=await fetch("".concat(l,"/portfolio/sheets"),{headers:{"auth-token":localStorage.getItem("token")}});e.ok&&j(await e.json())},N=async(e,t)=>{const n=Math.max(0,Math.min(Number(e.total||0),Number(e.completed||0)+t));try{await(async(e,t)=>{if(!(await fetch("".concat(l,"/portfolio/sheets/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(t)})).ok)throw new Error("Update failed")})(e._id,{completed:n}),await O()}catch(Zie){u({title:"Update failed",status:"error"})}},[z,U]=(0,r.useState)([]),[H,G]=(0,r.useState)({title:"",platform:"",startAt:"",url:"",notes:""}),V=async()=>{const e=await fetch("".concat(l,"/portfolio/events"),{headers:{"auth-token":localStorage.getItem("token")}});e.ok&&U(await e.json())};(0,r.useEffect)((()=>{(async()=>{const e=await fetch("".concat(l,"/portfolio/profile"),{headers:{"auth-token":localStorage.getItem("token")}});e.ok&&h(await e.json())})(),D(1),O(),V(),(async()=>{const e=await fetch("".concat(l,"/portfolio/stats"),{headers:{"auth-token":localStorage.getItem("token")}});e.ok&&w(await e.json())})(),(async()=>{const e=await fetch("".concat(l,"/portfolio/analytics"),{headers:{"auth-token":localStorage.getItem("token")}});e.ok&&_(await e.json())})()}),[]);const W=null!==d&&void 0!==d&&d.slug?"".concat(window.location.origin,"/p/").concat(d.slug):"",[q,X]=(0,r.useState)([]),[J,Y]=(0,r.useState)({title:"",description:"",url:"",tags:""}),[K,Z]=(0,r.useState)(null),[Q,$]=(0,r.useState)({}),ee=async()=>{const e=await fetch("".concat(l,"/portfolio/profile"),{headers:{"auth-token":localStorage.getItem("token")}});if(e.ok){const t=await e.json();X(t.projects||[]),h(t)}},te=async(e,t)=>{if(!(await fetch("".concat(l,"/portfolio/projects/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(t)})).ok)throw new Error("Update failed")};(0,r.useEffect)((()=>{ee()}),[]);const{isOpen:ne,onOpen:re,onClose:ie}=g(),[ae,se]=(0,r.useState)((()=>()=>{})),[oe,le]=(0,r.useState)("Are you sure?"),ce=r.useRef(),ue=(null===d||void 0===d?void 0:d.accentColor)||"#805AD5",de=e=>{let{label:t,value:n,max:r}=e;return(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{w:"140px",fontSize:"sm",children:t}),(0,ur.jsx)(pr,{flex:"1",bg:"gray.100",borderRadius:"md",children:(0,ur.jsx)(pr,{h:"8px",w:"".concat(r?Math.round(n/r*100):0,"%"),bg:ue,borderRadius:"md"})}),(0,ur.jsx)(Jr,{w:"40px",textAlign:"right",fontSize:"sm",children:n})]})},he=Math.max(1,...(S.byPlatform||[]).map((e=>e.count||0))),pe=Math.max(1,...(S.byDifficulty||[]).map((e=>e.count||0))),fe=Math.max(1,...(S.byTag||[]).map((e=>e.count||0)));return(0,ur.jsxs)(pr,{p:4,maxW:"1200px",m:"0 auto",children:[(0,ur.jsx)(FR,{mb:4,children:"Coding Portfolio"}),(0,ur.jsxs)(nS,{variant:"enclosed",children:[(0,ur.jsxs)(_R,{flexWrap:"wrap",children:[(0,ur.jsx)(AR,{children:"Overview"}),(0,ur.jsx)(AR,{children:"Questions"}),(0,ur.jsx)(AR,{children:"Sheets"}),(0,ur.jsx)(AR,{children:"Events"}),(0,ur.jsx)(AR,{children:"Profile"}),(0,ur.jsx)(AR,{children:"Projects"})]}),(0,ur.jsxs)(rS,{children:[(0,ur.jsx)(iS,{children:(0,ur.jsxs)(lI,{columns:{base:1,md:2},spacing:4,children:[(0,ur.jsxs)(WG,{title:"Profile Summary",actions:W?(0,ur.jsx)(zr,{size:"sm",onClick:()=>{navigator.clipboard.writeText(W),u({title:"Public link copied",status:"success"})},children:"Copy public link"}):null,children:[(0,ur.jsx)(Jr,{children:d.headline||"No headline yet"}),(0,ur.jsx)(Jr,{color:"gray.500",mt:2,children:d.bio||"Add your bio in Profile tab"})]}),(0,ur.jsxs)(WG,{title:"Quick Stats",actions:(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>{var e;return null===(e=document.getElementById("leaderboard"))||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"Leaderboard"}),children:[(0,ur.jsxs)(Jr,{children:["Total Questions: ",p.length]}),(0,ur.jsxs)(Jr,{mt:1,children:["Sheets Tracked: ",B.length]}),(0,ur.jsxs)(Jr,{mt:1,children:["Upcoming Events: ",z.filter((e=>new Date(e.startAt)>new Date)).length]}),(0,ur.jsxs)(Jr,{mt:1,children:["Active Days (180d): ",b.length]})]}),(0,ur.jsx)(WG,{title:"Activity (last 180 days)",children:(0,ur.jsx)($D,{templateColumns:"repeat(36, 1fr)",gap:1,children:Array.from({length:180}).map(((e,t)=>{const n=new Date(Date.now()-24*(179-t)*3600*1e3).toISOString().slice(0,10),r=b.find((e=>e._id===n)),i=(null===r||void 0===r?void 0:r.c)||0,a=0===i?"gray.100":i<2?"green.100":i<4?"green.200":i<6?"green.300":"green.400";return(0,ur.jsx)(pr,{w:"8px",h:"8px",bg:a,borderRadius:"2px",title:"".concat(n,": ").concat(i)},n)}))})}),(0,ur.jsx)(WG,{title:"Analytics",children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"By Platform"}),(0,ur.jsx)(ex,{align:"stretch",spacing:2,children:(S.byPlatform||[]).map(((e,t)=>(0,ur.jsx)(de,{label:e.platform,value:e.count,max:he},t)))})]}),(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"By Difficulty"}),(0,ur.jsx)(ex,{align:"stretch",spacing:2,children:(S.byDifficulty||[]).map(((e,t)=>(0,ur.jsx)(de,{label:e.difficulty,value:e.count,max:pe},t)))})]}),(S.byTag||[]).length?(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Top Tags"}),(0,ur.jsx)(ex,{align:"stretch",spacing:2,children:S.byTag.map(((e,t)=>(0,ur.jsx)(de,{label:e.tag,value:e.count,max:fe},t)))})]}):null]})}),(0,ur.jsx)(pr,{id:"leaderboard",children:(0,ur.jsx)(WG,{title:"Top Solvers",children:(0,ur.jsx)(VG,{})})})]})}),(0,ur.jsxs)(iS,{children:[(0,ur.jsx)(WG,{title:"Add Question",actions:(0,ur.jsx)(zr,{colorScheme:"purple",onClick:async()=>{const e=(0,c.A)((0,c.A)({},A),{},{tags:A.tags.split(",").map((e=>e.trim())).filter(Boolean)});(await fetch("".concat(l,"/portfolio/questions"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(e)})).ok&&(E({title:"",platform:"LeetCode",difficulty:"Easy",url:"",tags:"",notes:"",status:"Solved"}),await D(),u({title:"Added",status:"success"}))},children:"Add"}),children:(0,ur.jsxs)(ex,{align:"stretch",children:[(0,ur.jsx)($y,{placeholder:"Title",value:A.title,onChange:e=>E((0,c.A)((0,c.A)({},A),{},{title:e.target.value}))}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(di,{value:A.platform,onChange:e=>E((0,c.A)((0,c.A)({},A),{},{platform:e.target.value})),children:["LeetCode","GFG","Codeforces","CodeChef","AtCoder","HackerRank","InterviewBit","CodeStudio","Other"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))}),(0,ur.jsx)(di,{value:A.difficulty,onChange:e=>E((0,c.A)((0,c.A)({},A),{},{difficulty:e.target.value})),children:["Easy","Medium","Hard","Unknown"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))}),(0,ur.jsx)(di,{value:A.status,onChange:e=>E((0,c.A)((0,c.A)({},A),{},{status:e.target.value})),children:["Solved","Revisit","Pending"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))})]}),(0,ur.jsx)($y,{placeholder:"URL",value:A.url,onChange:e=>E((0,c.A)((0,c.A)({},A),{},{url:e.target.value}))}),(0,ur.jsx)($y,{placeholder:"Tags (comma separated)",value:A.tags,onChange:e=>E((0,c.A)((0,c.A)({},A),{},{tags:e.target.value}))}),(0,ur.jsx)(zS,{placeholder:"Notes",value:A.notes,onChange:e=>E((0,c.A)((0,c.A)({},A),{},{notes:e.target.value}))})]})}),(0,ur.jsxs)(pr,{mt:4,children:[(0,ur.jsxs)(ao,{justify:"space-between",mb:2,children:[(0,ur.jsx)(FR,{size:"sm",children:"Recent Questions"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>{const e=[["Title","Platform","Difficulty","Status","URL","Tags","Notes","SolvedAt"].join(",")].concat(p.map((e=>[(e.title||"").replaceAll('"','""'),e.platform||"",e.difficulty||"",e.status||"",e.url||"",(e.tags||[]).join("|"),(e.notes||"").replaceAll('"','""'),e.solvedAt?new Date(e.solvedAt).toISOString():""].map((e=>'"'.concat(String(e),'"'))).join(",")))),t=new Blob([e.join("\n")],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="questions.csv",r.click(),URL.revokeObjectURL(n)},children:"Export CSV"})]}),(0,ur.jsxs)(ao,{mb:3,spacing:3,align:"stretch",children:[(0,ur.jsx)(di,{maxW:"200px",value:C.platform,onChange:e=>M((t=>(0,c.A)((0,c.A)({},t),{},{platform:e.target.value}))),children:["All","LeetCode","GFG","Codeforces","CodeChef","AtCoder","HackerRank","InterviewBit","CodeStudio","Other"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))}),(0,ur.jsx)(di,{maxW:"200px",value:C.status,onChange:e=>M((t=>(0,c.A)((0,c.A)({},t),{},{status:e.target.value}))),children:["All","Solved","Revisit","Pending"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))}),(0,ur.jsx)($y,{placeholder:"Search title or tag",value:C.query,onChange:e=>M((t=>(0,c.A)((0,c.A)({},t),{},{query:e.target.value})))}),(0,ur.jsx)(zr,{variant:"outline",onClick:()=>M({platform:"All",status:"All",query:""}),children:"Clear"}),(0,ur.jsxs)(zr,{as:"label",size:"sm",variant:"outline",cursor:"pointer",children:["Import CSV",(0,ur.jsx)($y,{type:"file",accept:".csv",display:"none",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&(e=>{const t=new FileReader;t.onload=async e=>{try{var t;const n=String((null===(t=e.target)||void 0===t?void 0:t.result)||"").split(/\r?\n/).filter(Boolean),[r,...i]=n,a=r.split(",").map((e=>e.trim().replace(/^"|"$/g,""))),s=e=>a.findIndex((t=>t.toLowerCase()===e.toLowerCase())),o=i.map((e=>{var t;const n=(null===(t=e.match(/\"([^\"]*)\"|([^,]+)/g))||void 0===t?void 0:t.map((e=>e.replace(/^\"|\"$/g,""))))||[];return{title:n[s("Title")]||"",platform:n[s("Platform")]||"Other",difficulty:n[s("Difficulty")]||"Unknown",status:n[s("Status")]||"Solved",url:n[s("URL")]||"",tags:(n[s("Tags")]||"").split("|").map((e=>e.trim())).filter(Boolean),notes:n[s("Notes")]||"",solvedAt:n[s("SolvedAt")]?new Date(n[s("SolvedAt")]):void 0}}));for(const e of o)await fetch("".concat(l,"/portfolio/questions"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(e)});await D(m),u({title:"Import complete",status:"success"})}catch(n){u({title:"Import failed",status:"error"})}},t.readAsText(e)})(n),e.target.value=""}})]})]}),(0,ur.jsx)(ex,{align:"stretch",children:I.map((e=>{var t;return(0,ur.jsx)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:T===e._id?(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[(0,ur.jsx)($y,{value:P.title||"",onChange:e=>R((t=>(0,c.A)((0,c.A)({},t),{},{title:e.target.value})))}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(di,{value:P.platform||"",onChange:e=>R((t=>(0,c.A)((0,c.A)({},t),{},{platform:e.target.value}))),children:["LeetCode","GFG","Codeforces","CodeChef","AtCoder","HackerRank","InterviewBit","CodeStudio","Other"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))}),(0,ur.jsx)(di,{value:P.difficulty||"",onChange:e=>R((t=>(0,c.A)((0,c.A)({},t),{},{difficulty:e.target.value}))),children:["Easy","Medium","Hard","Unknown"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))}),(0,ur.jsx)(di,{value:P.status||"",onChange:e=>R((t=>(0,c.A)((0,c.A)({},t),{},{status:e.target.value}))),children:["Solved","Revisit","Pending"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))})]}),(0,ur.jsx)($y,{placeholder:"URL",value:P.url||"",onChange:e=>R((t=>(0,c.A)((0,c.A)({},t),{},{url:e.target.value})))}),(0,ur.jsx)($y,{placeholder:"Tags (comma separated)",value:(P.tags||[]).join(", "),onChange:e=>R((t=>(0,c.A)((0,c.A)({},t),{},{tags:e.target.value.split(",").map((e=>e.trim())).filter(Boolean)})))}),(0,ur.jsx)(zS,{placeholder:"Notes",value:P.notes||"",onChange:e=>R((t=>(0,c.A)((0,c.A)({},t),{},{notes:e.target.value})))}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",colorScheme:"purple",onClick:async()=>{try{await(async(e,t)=>{if(!(await fetch("".concat(l,"/portfolio/questions/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(t)})).ok)throw new Error("Update failed")})(e._id,P),k(null),await D(),u({title:"Updated",status:"success"})}catch(t){u({title:"Update failed",status:"error"})}},children:"Save"}),(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>k(null),children:"Cancel"})]})]}):(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:e.title}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:e.platform}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:e.difficulty}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:e.status})]})]}),e.url&&(0,ur.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:(0,ur.jsx)(Jr,{color:"purple.500",fontSize:"sm",children:e.url})}),null!==(t=e.tags)&&void 0!==t&&t.length?(0,ur.jsxs)(Jr,{mt:1,fontSize:"sm",children:["Tags: ",e.tags.join(", ")]}):null,e.notes?(0,ur.jsx)(Jr,{mt:1,fontSize:"sm",color:"gray.600",children:e.notes}):null,(0,ur.jsxs)(ao,{mt:2,children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>{k(e._id),R({title:e.title,platform:e.platform,difficulty:e.difficulty,status:e.status,url:e.url,tags:e.tags||[],notes:e.notes||""})},children:"Edit"}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>{le("Delete this question?"),se((()=>async()=>{try{await(async e=>{if(!(await fetch("".concat(l,"/portfolio/questions/").concat(e),{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}})).ok)throw new Error("Delete failed")})(e._id),await D(m),u({title:"Deleted",status:"success"})}catch(t){u({title:"Delete failed",status:"error"})}})),re()},children:"Delete"})]})]})},e._id)}))}),(0,ur.jsxs)(ao,{justify:"space-between",mt:3,children:[(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:["Total: ",y]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",isDisabled:m<=1,onClick:()=>D(m-1),children:"Prev"}),(0,ur.jsxs)(Jr,{fontSize:"sm",children:["Page ",m]}),(0,ur.jsx)(zr,{size:"sm",isDisabled:50*m>=y,onClick:()=>D(m+1),children:"Next"})]})]})]})]}),(0,ur.jsxs)(iS,{children:[(0,ur.jsx)(WG,{title:"Add Sheet",actions:(0,ur.jsx)(zr,{colorScheme:"purple",onClick:async()=>{const e=(0,c.A)((0,c.A)({},F),{},{total:Number(F.total||0),completed:Number(F.completed||0),tags:F.tags.split(",").map((e=>e.trim())).filter(Boolean)});(await fetch("".concat(l,"/portfolio/sheets"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(e)})).ok&&(L({name:"",url:"",total:0,completed:0,tags:""}),await O(),u({title:"Sheet added",status:"success"}))},children:"Add"}),children:(0,ur.jsxs)(ex,{align:"stretch",children:[(0,ur.jsx)($y,{placeholder:"Name",value:F.name,onChange:e=>L((0,c.A)((0,c.A)({},F),{},{name:e.target.value}))}),(0,ur.jsx)($y,{placeholder:"URL",value:F.url,onChange:e=>L((0,c.A)((0,c.A)({},F),{},{url:e.target.value}))}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{type:"number",placeholder:"Total",value:F.total,onChange:e=>L((0,c.A)((0,c.A)({},F),{},{total:e.target.value}))}),(0,ur.jsx)($y,{type:"number",placeholder:"Completed",value:F.completed,onChange:e=>L((0,c.A)((0,c.A)({},F),{},{completed:e.target.value}))})]}),(0,ur.jsx)($y,{placeholder:"Tags (comma separated)",value:F.tags,onChange:e=>L((0,c.A)((0,c.A)({},F),{},{tags:e.target.value}))})]})}),(0,ur.jsxs)(pr,{mt:4,children:[(0,ur.jsx)(FR,{size:"sm",mb:2,children:"Sheets"}),(0,ur.jsx)(ex,{align:"stretch",children:B.map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:e.name}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"xs",onClick:()=>N(e,-1),children:"-1"}),(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:[e.completed,"/",e.total]}),(0,ur.jsx)(zr,{size:"xs",onClick:()=>N(e,1),children:"+1"}),(0,ur.jsx)(zr,{size:"xs",colorScheme:"red",variant:"outline",onClick:()=>{le("Delete this sheet?"),se((()=>async()=>{try{await(async e=>{if(!(await fetch("".concat(l,"/portfolio/sheets/").concat(e),{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}})).ok)throw new Error("Delete failed")})(e._id),await O(),u({title:"Deleted",status:"success"})}catch(t){u({title:"Delete failed",status:"error"})}})),re()},children:"Delete"})]})]}),e.url&&(0,ur.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:(0,ur.jsx)(Jr,{color:"purple.500",fontSize:"sm",children:e.url})})]},e._id)))})]})]}),(0,ur.jsxs)(iS,{children:[(0,ur.jsx)(WG,{title:"Add Event",actions:(0,ur.jsx)(zr,{colorScheme:"purple",onClick:async()=>{(await fetch("".concat(l,"/portfolio/events"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify((0,c.A)((0,c.A)({},H),{},{startAt:new Date(H.startAt)}))})).ok&&(G({title:"",platform:"",startAt:"",url:"",notes:""}),await V(),u({title:"Event added",status:"success"}))},children:"Add"}),children:(0,ur.jsxs)(ex,{align:"stretch",children:[(0,ur.jsx)($y,{placeholder:"Title",value:H.title,onChange:e=>G((0,c.A)((0,c.A)({},H),{},{title:e.target.value}))}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Platform",value:H.platform,onChange:e=>G((0,c.A)((0,c.A)({},H),{},{platform:e.target.value}))}),(0,ur.jsx)($y,{type:"datetime-local",value:H.startAt,onChange:e=>G((0,c.A)((0,c.A)({},H),{},{startAt:e.target.value}))})]}),(0,ur.jsx)($y,{placeholder:"URL",value:H.url,onChange:e=>G((0,c.A)((0,c.A)({},H),{},{url:e.target.value}))}),(0,ur.jsx)(zS,{placeholder:"Notes",value:H.notes,onChange:e=>G((0,c.A)((0,c.A)({},H),{},{notes:e.target.value}))})]})}),(0,ur.jsxs)(pr,{mt:4,children:[(0,ur.jsxs)(ao,{justify:"space-between",mb:2,children:[(0,ur.jsx)(FR,{size:"sm",children:"Upcoming Events"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>{const e=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//MERNChat//Portfolio//EN"];z.forEach((t=>{const n=new Date(t.startAt).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z";e.push("BEGIN:VEVENT"),e.push("UID:".concat(t._id,"@mernchat")),e.push("DTSTAMP:".concat(n)),e.push("DTSTART:".concat(n)),e.push("SUMMARY:".concat((t.title||"").replace(/\n/g," "))),t.url&&e.push("URL:".concat(t.url)),t.notes&&e.push("DESCRIPTION:".concat((t.notes||"").replace(/\n/g," "))),e.push("END:VEVENT")})),e.push("END:VCALENDAR");const t=new Blob([e.join("\r\n")],{type:"text/calendar;charset=utf-8;"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="events.ics",r.click(),URL.revokeObjectURL(n)},children:"Download .ics"})]}),(0,ur.jsx)(ex,{align:"stretch",children:z.map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:e.title}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:new Date(e.startAt).toLocaleString()}),(0,ur.jsx)(zr,{size:"xs",colorScheme:"red",variant:"outline",onClick:()=>{le("Delete this event?"),se((()=>async()=>{try{await(async e=>{if(!(await fetch("".concat(l,"/portfolio/events/").concat(e),{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}})).ok)throw new Error("Delete failed")})(e._id),await V(),u({title:"Deleted",status:"success"})}catch(t){u({title:"Delete failed",status:"error"})}})),re()},children:"Delete"})]})]}),e.url&&(0,ur.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:(0,ur.jsx)(Jr,{color:"purple.500",fontSize:"sm",children:e.url})}),e.notes?(0,ur.jsx)(Jr,{mt:1,fontSize:"sm",color:"gray.600",children:e.notes}):null]},e._id)))})]})]}),(0,ur.jsx)(iS,{children:(0,ur.jsx)(WG,{title:"Edit Portfolio Profile",actions:(0,ur.jsx)(zr,{colorScheme:"purple",onClick:async()=>{(await fetch("".concat(l,"/portfolio/profile"),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(d)})).ok?u({title:"Profile saved",status:"success"}):u({title:"Save failed",status:"error"})},children:"Save"}),children:(0,ur.jsxs)(ex,{align:"stretch",children:[(0,ur.jsx)($y,{placeholder:"Headline",value:d.headline||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{headline:e.target.value}))}),(0,ur.jsx)(zS,{placeholder:"Bio",value:d.bio||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{bio:e.target.value}))}),(0,ur.jsx)($y,{placeholder:"Website",value:d.website||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{website:e.target.value}))}),(0,ur.jsx)($y,{placeholder:"Public slug (e.g., yourname)",value:d.slug||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{slug:e.target.value}))}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(di,{value:d.theme||"light",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{theme:e.target.value})),maxW:"200px",children:["light","dark"].map((e=>(0,ur.jsx)("option",{value:e,children:e},e)))}),(0,ur.jsx)($y,{type:"color",value:d.accentColor||"#805AD5",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{accentColor:e.target.value})),maxW:"120px"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"GitHub",value:(null===(e=d.socials)||void 0===e?void 0:e.github)||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{socials:(0,c.A)((0,c.A)({},d.socials),{},{github:e.target.value})}))}),(0,ur.jsx)($y,{placeholder:"LinkedIn",value:(null===(t=d.socials)||void 0===t?void 0:t.linkedin)||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{socials:(0,c.A)((0,c.A)({},d.socials),{},{linkedin:e.target.value})}))}),(0,ur.jsx)($y,{placeholder:"Twitter",value:(null===(n=d.socials)||void 0===n?void 0:n.twitter)||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{socials:(0,c.A)((0,c.A)({},d.socials),{},{twitter:e.target.value})}))})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"LeetCode handle",value:(null===(i=d.handles)||void 0===i?void 0:i.leetcode)||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{handles:(0,c.A)((0,c.A)({},d.handles),{},{leetcode:e.target.value})}))}),(0,ur.jsx)($y,{placeholder:"GfG handle",value:(null===(a=d.handles)||void 0===a?void 0:a.gfg)||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{handles:(0,c.A)((0,c.A)({},d.handles),{},{gfg:e.target.value})}))})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Codeforces",value:(null===(s=d.handles)||void 0===s?void 0:s.codeforces)||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{handles:(0,c.A)((0,c.A)({},d.handles),{},{codeforces:e.target.value})}))}),(0,ur.jsx)($y,{placeholder:"CodeChef",value:(null===(o=d.handles)||void 0===o?void 0:o.codechef)||"",onChange:e=>h((0,c.A)((0,c.A)({},d),{},{handles:(0,c.A)((0,c.A)({},d.handles),{},{codechef:e.target.value})}))})]}),(0,ur.jsx)(WG,{title:"Badges",actions:(0,ur.jsx)(zr,{size:"sm",onClick:()=>h((e=>(0,c.A)((0,c.A)({},e),{},{badges:[...e.badges||[],{title:"",iconUrl:""}]}))),children:"Add"}),children:(0,ur.jsx)(ex,{align:"stretch",children:(d.badges||[]).map(((e,t)=>(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Title",value:e.title||"",onChange:e=>h((n=>{const r=[...n.badges||[]];return r[t]=(0,c.A)((0,c.A)({},r[t]),{},{title:e.target.value}),(0,c.A)((0,c.A)({},n),{},{badges:r})}))}),(0,ur.jsx)($y,{placeholder:"Icon URL",value:e.iconUrl||"",onChange:e=>h((n=>{const r=[...n.badges||[]];return r[t]=(0,c.A)((0,c.A)({},r[t]),{},{iconUrl:e.target.value}),(0,c.A)((0,c.A)({},n),{},{badges:r})}))}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>h((e=>(0,c.A)((0,c.A)({},e),{},{badges:(e.badges||[]).filter(((e,n)=>n!==t))}))),children:"Remove"})]},t)))})}),(0,ur.jsx)(WG,{title:"Ratings",actions:(0,ur.jsx)(zr,{size:"sm",onClick:()=>h((e=>(0,c.A)((0,c.A)({},e),{},{ratings:[...e.ratings||[],{platform:"",rating:0}]}))),children:"Add"}),children:(0,ur.jsx)(ex,{align:"stretch",children:(d.ratings||[]).map(((e,t)=>(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Platform",value:e.platform||"",onChange:e=>h((n=>{const r=[...n.ratings||[]];return r[t]=(0,c.A)((0,c.A)({},r[t]),{},{platform:e.target.value}),(0,c.A)((0,c.A)({},n),{},{ratings:r})}))}),(0,ur.jsx)($y,{type:"number",placeholder:"Rating",value:e.rating||0,onChange:e=>h((n=>{const r=[...n.ratings||[]];return r[t]=(0,c.A)((0,c.A)({},r[t]),{},{rating:Number(e.target.value||0)}),(0,c.A)((0,c.A)({},n),{},{ratings:r})}))}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>h((e=>(0,c.A)((0,c.A)({},e),{},{ratings:(e.ratings||[]).filter(((e,n)=>n!==t))}))),children:"Remove"})]},t)))})}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{children:"Public Profile"}),(0,ur.jsx)(VD,{isChecked:!1!==d.isPublic,onChange:e=>h((0,c.A)((0,c.A)({},d),{},{isPublic:e.target.checked}))})]})]})})}),(0,ur.jsxs)(iS,{children:[(0,ur.jsx)(WG,{title:"Add Project",actions:(0,ur.jsx)(zr,{colorScheme:"purple",onClick:async()=>{const e=(0,c.A)((0,c.A)({},J),{},{tags:J.tags.split(",").map((e=>e.trim())).filter(Boolean)});(await fetch("".concat(l,"/portfolio/projects"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(e)})).ok&&(Y({title:"",description:"",url:"",tags:""}),await ee(),u({title:"Project added",status:"success"}))},children:"Add"}),children:(0,ur.jsxs)(ex,{align:"stretch",children:[(0,ur.jsx)($y,{placeholder:"Title",value:J.title,onChange:e=>Y((0,c.A)((0,c.A)({},J),{},{title:e.target.value}))}),(0,ur.jsx)(zS,{placeholder:"Description",value:J.description,onChange:e=>Y((0,c.A)((0,c.A)({},J),{},{description:e.target.value}))}),(0,ur.jsx)($y,{placeholder:"URL",value:J.url,onChange:e=>Y((0,c.A)((0,c.A)({},J),{},{url:e.target.value}))}),(0,ur.jsx)($y,{placeholder:"Tags (comma separated)",value:J.tags,onChange:e=>Y((0,c.A)((0,c.A)({},J),{},{tags:e.target.value}))})]})}),(0,ur.jsxs)(pr,{mt:4,children:[(0,ur.jsx)(FR,{size:"sm",mb:2,children:"Projects"}),(0,ur.jsx)(ex,{align:"stretch",children:q.map((e=>{var t;return(0,ur.jsx)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:K===e._id?(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[(0,ur.jsx)($y,{value:Q.title||"",onChange:e=>$((t=>(0,c.A)((0,c.A)({},t),{},{title:e.target.value})))}),(0,ur.jsx)(zS,{value:Q.description||"",onChange:e=>$((t=>(0,c.A)((0,c.A)({},t),{},{description:e.target.value})))}),(0,ur.jsx)($y,{placeholder:"URL",value:Q.url||"",onChange:e=>$((t=>(0,c.A)((0,c.A)({},t),{},{url:e.target.value})))}),(0,ur.jsx)($y,{placeholder:"Tags (comma separated)",value:(Q.tags||[]).join(", "),onChange:e=>$((t=>(0,c.A)((0,c.A)({},t),{},{tags:e.target.value.split(",").map((e=>e.trim())).filter(Boolean)})))}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",colorScheme:"purple",onClick:async()=>{try{await te(e._id,Q),Z(null),await ee(),u({title:"Updated",status:"success"})}catch(t){u({title:"Update failed",status:"error"})}},children:"Save"}),(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>Z(null),children:"Cancel"})]})]}):(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:e.title}),(0,ur.jsxs)(ao,{children:[e.url&&(0,ur.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:(0,ur.jsx)(Jr,{color:"purple.500",fontSize:"sm",children:"Open"})}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:async()=>{try{await te(e._id,{pinned:!e.pinned}),await ee()}catch(t){}},children:e.pinned?"Unpin":"Pin"}),(0,ur.jsx)(zr,{size:"xs",onClick:()=>{Z(e._id),$({title:e.title,description:e.description||"",url:e.url||"",tags:e.tags||[]})},children:"Edit"}),(0,ur.jsx)(zr,{size:"xs",colorScheme:"red",variant:"outline",onClick:()=>{le("Delete this project?"),se((()=>async()=>{try{await(async e=>{if(!(await fetch("".concat(l,"/portfolio/projects/").concat(e),{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}})).ok)throw new Error("Delete failed")})(e._id),await ee(),u({title:"Deleted",status:"success"})}catch(t){u({title:"Delete failed",status:"error"})}})),re()},children:"Delete"})]})]}),null!==(t=e.tags)&&void 0!==t&&t.length?(0,ur.jsxs)(Jr,{mt:1,fontSize:"sm",children:["Tags: ",e.tags.join(", ")]}):null,e.description?(0,ur.jsx)(Jr,{mt:1,fontSize:"sm",color:"gray.600",children:e.description}):null]})},e._id)}))})]})]}),(0,ur.jsx)(HG,{isOpen:ne,leastDestructiveRef:ce,onClose:ie,children:(0,ur.jsx)(Km,{children:(0,ur.jsxs)(GG,{children:[(0,ur.jsx)(Uy,{fontSize:"lg",fontWeight:"bold",children:"Confirm"}),(0,ur.jsx)(Zy,{children:oe}),(0,ur.jsxs)(nx,{children:[(0,ur.jsx)(zr,{ref:ce,onClick:ie,children:"Cancel"}),(0,ur.jsx)(zr,{colorScheme:"red",ml:3,onClick:async()=>{await ae(),ie()},children:"Delete"})]})]})})})]})]})]})}const XG=["isDisabled","children"];var[JG,YG]=gr({name:"TagStylesContext",errorMessage:"useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Tag />\" "}),KG=cr(((e,t)=>{const n=Rr("Tag",e),r=ft(e),i=(0,c.A)({display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%"},n.container);return(0,ur.jsx)(JG,{value:n,children:(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({ref:t},r),{},{__css:i}))})}));KG.displayName="Tag";var ZG=cr(((e,t)=>{const n=YG();return(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({ref:t,noOfLines:1},e),{},{__css:n.label}))}));ZG.displayName="TagLabel",cr(((e,t)=>(0,ur.jsx)(Vy,(0,c.A)({ref:t,verticalAlign:"top",marginEnd:"0.5rem"},e)))).displayName="TagLeftIcon",cr(((e,t)=>(0,ur.jsx)(Vy,(0,c.A)({ref:t,verticalAlign:"top",marginStart:"0.5rem"},e)))).displayName="TagRightIcon";var QG=e=>(0,ur.jsx)(Vy,(0,c.A)((0,c.A)({verticalAlign:"inherit",viewBox:"0 0 512 512"},e),{},{children:(0,ur.jsx)("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})}));QG.displayName="TagCloseIcon";var $G=cr(((e,t)=>{const{isDisabled:n,children:r}=e,i=y(e,XG),a=YG(),s=(0,c.A)({display:"flex",alignItems:"center",justifyContent:"center",outline:"0"},a.closeButton);return(0,ur.jsx)(lr.button,(0,c.A)((0,c.A)({ref:t,"aria-label":"close"},i),{},{type:"button",disabled:n,__css:s,children:r||(0,ur.jsx)(QG,{})}))}));function eV(){var e,t,n;const{slug:i}=xw(),{hostName:a}=(0,r.useContext)(GS),[s,o]=(0,r.useState)();if((0,r.useEffect)((()=>{(async()=>{const e=await fetch("".concat(a,"/portfolio/public/").concat(i));e.ok&&o(await e.json())})()}),[a,i]),!s)return null;const{user:l,profile:c,stats:u}=s,d=(null===c||void 0===c?void 0:c.accentColor)||"#805AD5",h="dark"===((null===c||void 0===c?void 0:c.theme)||"light");return(0,ur.jsxs)(pr,{p:6,maxW:"1000px",m:"0 auto",bg:h?"blackAlpha.200":"whiteAlpha.700",borderRadius:"lg",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(BR,{src:null===l||void 0===l?void 0:l.profilePic,name:null===l||void 0===l?void 0:l.name,size:"lg"}),(0,ur.jsxs)(ex,{align:"start",spacing:0,children:[(0,ur.jsx)(FR,{size:"md",color:d,children:null===l||void 0===l?void 0:l.name}),(0,ur.jsx)(Jr,{color:"gray.500",children:null===c||void 0===c?void 0:c.headline})]})]}),(0,ur.jsx)(Jr,{mt:4,children:null===c||void 0===c?void 0:c.bio}),(0,ur.jsxs)(ao,{mt:2,spacing:4,children:[(null===c||void 0===c?void 0:c.website)&&(0,ur.jsx)(Gr,{href:c.website,color:d,fontWeight:"bold",isExternal:!0,children:"Website"}),(null===c||void 0===c||null===(e=c.socials)||void 0===e?void 0:e.github)&&(0,ur.jsx)(Gr,{href:c.socials.github,color:d,fontWeight:"bold",isExternal:!0,children:"GitHub"}),(null===c||void 0===c||null===(t=c.socials)||void 0===t?void 0:t.linkedin)&&(0,ur.jsx)(Gr,{href:c.socials.linkedin,color:d,fontWeight:"bold",isExternal:!0,children:"LinkedIn"}),(null===c||void 0===c||null===(n=c.socials)||void 0===n?void 0:n.twitter)&&(0,ur.jsx)(Gr,{href:c.socials.twitter,color:d,fontWeight:"bold",isExternal:!0,children:"Twitter"})]}),Array.isArray(null===c||void 0===c?void 0:c.badges)&&c.badges.length>0&&(0,ur.jsxs)(pr,{mt:4,children:[(0,ur.jsx)(FR,{size:"sm",mb:2,children:"Badges"}),(0,ur.jsx)(KD,{children:c.badges.map(((e,t)=>(0,ur.jsx)(ZD,{children:(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,children:[e.iconUrl?(0,ur.jsx)(Tx,{src:e.iconUrl,alt:e.title,boxSize:"20px"}):null,(0,ur.jsx)(KG,{colorScheme:"purple",variant:"subtle",children:e.title})]})},t)))})]}),(0,ur.jsxs)(lI,{columns:{base:1,md:3},spacing:4,mt:6,children:[(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(FR,{size:"sm",color:d,children:"Questions"}),(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",color:d,children:(null===u||void 0===u?void 0:u.questions)||0})]}),(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(FR,{size:"sm",color:d,children:"Sheets"}),(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",color:d,children:(null===u||void 0===u?void 0:u.sheets)||0})]}),(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(FR,{size:"sm",color:d,children:"Upcoming"}),(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",color:d,children:(null===u||void 0===u?void 0:u.upcoming)||0})]})]}),Array.isArray(null===c||void 0===c?void 0:c.projects)&&c.projects.length>0&&(0,ur.jsxs)(pr,{mt:6,children:[(0,ur.jsx)(FR,{size:"sm",mb:2,children:"Projects"}),c.projects.map((e=>{var t;return(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,mb:2,children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:e.title}),e.url&&(0,ur.jsx)(Gr,{href:e.url,color:"purple.500",isExternal:!0,children:"Open"})]}),null!==(t=e.tags)&&void 0!==t&&t.length?(0,ur.jsxs)(Jr,{mt:1,fontSize:"sm",children:["Tags: ",e.tags.join(", ")]}):null,e.description?(0,ur.jsx)(Jr,{mt:1,fontSize:"sm",color:"gray.600",children:e.description}):null]},e._id)}))]})]})}$G.displayName="TagCloseButton";var tV=e=>e?"":void 0,nV=e=>!!e||void 0,rV=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")};function iV(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.some((t=>(null==t||t(e),null==e?void 0:e.defaultPrevented)))}}function aV(e){const{orientation:t,vertical:n,horizontal:r}=e;return"vertical"===t?n:r}var sV={width:0,height:0},oV=e=>e||sV;function lV(e){const t=function(e){var t;return null!=(t=e.view)?t:window}(e);return"undefined"!==typeof t.PointerEvent&&e instanceof t.PointerEvent?!("mouse"!==e.pointerType):e instanceof t.MouseEvent}function cV(e){return!!e.touches}function uV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return cV(e)?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";const n=e.touches[0]||e.changedTouches[0];return{x:n["".concat(t,"X")],y:n["".concat(t,"Y")]}}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{x:e["".concat(t,"X")],y:e["".concat(t,"Y")]}}(e,t)}function dV(e){function t(t){e(t,{point:uV(t)})}const n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(e){return t=>{const n=lV(t);(!n||n&&0===t.button)&&e(t)}}(t):t;return n}function hV(e,t,n,r){return function(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}(e,t,dV(n,"pointerdown"===t),r)}const pV=1/60*1e3,fV="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),mV="undefined"!==typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(fV())),pV);let gV=!0,vV=!1,yV=!1;const xV={delta:0,timestamp:0},bV=["read","update","preRender","render","postRender"],wV=bV.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],r=0,i=!1,a=!1;const s=new WeakSet,o={schedule:function(e){const a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,o=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),-1===o.indexOf(e)&&(o.push(e),a&&i&&(r=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),s.delete(e)},process:l=>{if(i)a=!0;else{if(i=!0,[t,n]=[n,t],n.length=0,r=t.length,r)for(let n=0;n<r;n++){const r=t[n];r(l),s.has(r)&&(o.schedule(r),e())}i=!1,a&&(a=!1,o.process(l))}}};return o}((()=>vV=!0)),e)),{}),SV=bV.reduce(((e,t)=>{const n=wV[t];return e[t]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return vV||CV(),n.schedule(e,t,r)},e}),{}),_V=bV.reduce(((e,t)=>(e[t]=wV[t].cancel,e)),{}),AV=(bV.reduce(((e,t)=>(e[t]=()=>wV[t].process(xV),e)),{}),e=>wV[e].process(xV)),EV=e=>{vV=!1,xV.delta=gV?pV:Math.max(Math.min(e-xV.timestamp,40),1),xV.timestamp=e,yV=!0,bV.forEach(AV),yV=!1,vV&&(gV=!1,mV(EV))},CV=()=>{vV=!0,gV=!0,yV||mV(EV)},MV=()=>xV,TV=SV;var kV=Object.defineProperty,PV=(e,t,n)=>(((e,t,n)=>{t in e?kV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n),RV=class{constructor(e,t,n){var r;if(PV(this,"history",[]),PV(this,"startEvent",null),PV(this,"lastEvent",null),PV(this,"lastEventInfo",null),PV(this,"handlers",{}),PV(this,"removeListeners",(()=>{})),PV(this,"threshold",3),PV(this,"win"),PV(this,"updatePoint",(()=>{if(!this.lastEvent||!this.lastEventInfo)return;const e=IV(this.lastEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){if("number"===typeof e&&"number"===typeof t)return FV(e,t);if(LV(e)&&LV(t)){const n=FV(e.x,t.x),r=FV(e.y,t.y);return Math.sqrt(n**2+r**2)}return 0}(e.offset,{x:0,y:0})>=this.threshold;if(!t&&!n)return;const{timestamp:r}=MV();this.history.push((0,c.A)((0,c.A)({},e.point),{},{timestamp:r}));const{onStart:i,onMove:a}=this.handlers;t||(null==i||i(this.lastEvent,e),this.startEvent=this.lastEvent),null==a||a(this.lastEvent,e)})),PV(this,"onPointerMove",((e,t)=>{this.lastEvent=e,this.lastEventInfo=t,TV.update(this.updatePoint,!0)})),PV(this,"onPointerUp",((e,t)=>{const n=IV(t,this.history),{onEnd:r,onSessionEnd:i}=this.handlers;null==i||i(e,n),this.end(),r&&this.startEvent&&(null==r||r(e,n))})),this.win=null!=(r=e.view)?r:window,function(e){return cV(e)&&e.touches.length>1}(e))return;this.handlers=t,n&&(this.threshold=n),e.stopPropagation(),e.preventDefault();const i={point:uV(e)},{timestamp:a}=MV();this.history=[(0,c.A)((0,c.A)({},i.point),{},{timestamp:a})];const{onSessionStart:s}=t;null==s||s(e,IV(i,this.history)),this.removeListeners=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)}(hV(this.win,"pointermove",this.onPointerMove),hV(this.win,"pointerup",this.onPointerUp),hV(this.win,"pointercancel",this.onPointerUp))}updateHandlers(e){this.handlers=e}end(){var e;null==(e=this.removeListeners)||e.call(this),_V.update(this.updatePoint)}};function DV(e,t){return{x:e.x-t.x,y:e.y-t.y}}function IV(e,t){return{point:e.point,delta:DV(e.point,t[t.length-1]),offset:DV(e.point,t[0]),velocity:jV(t,.1)}}var BV=e=>1e3*e;function jV(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=e[e.length-1];for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>BV(t)));)n--;if(!r)return{x:0,y:0};const a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function FV(e,t){return Math.abs(e-t)}function LV(e){return"x"in e&&"y"in e}function OV(e){const t=(0,r.useRef)(null);return t.current=e,t}var NV=Boolean(null==globalThis?void 0:globalThis.document)?r.useLayoutEffect:r.useEffect;function zV(e){let{getNodes:t,observeMutation:n=!0}=e;const[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)(0);return NV((()=>{const e=t(),r=e.map(((e,t)=>function(e,t){var n;if(!e)return void t(void 0);t({width:e.offsetWidth,height:e.offsetHeight});const r=new(null!==(n=e.ownerDocument.defaultView)&&void 0!==n?n:window).ResizeObserver((n=>{if(!Array.isArray(n)||!n.length)return;const[r]=n;let i,a;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,a=t.blockSize}else i=e.offsetWidth,a=e.offsetHeight;t({width:i,height:a})}));return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}(e,(e=>{a((n=>[...n.slice(0,t),e,...n.slice(t+1)]))}))));if(n){const t=e[0];r.push(function(e,t){var n,r;if(!e||!e.parentElement)return;const i=new(null!=(r=null==(n=e.ownerDocument)?void 0:n.defaultView)?r:window).MutationObserver((()=>{t()}));return i.observe(e.parentElement,{childList:!0}),()=>{i.disconnect()}}(t,(()=>{o((e=>e+1))})))}return()=>{r.forEach((e=>{null==e||e()}))}}),[s]),i}function UV(e,t){let n=function(e){const t=parseFloat(e);return"number"!==typeof t||Number.isNaN(t)?0:t}(e);const r=10**(null!=t?t:10);return n=Math.round(n*r)/r,t?n.toFixed(t):n.toString()}function HV(e,t,n){return 100*(e-t)/(n-t)}function GV(e,t,n){const r=Math.round((e-t)/n)*n+t,i=function(e){if(!Number.isFinite(e))return 0;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n+=1;return n}(n);return UV(r,i)}function VV(e,t,n){return null==e?e:(n<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(e,t),n))}const WV=["min","max","onChange","value","defaultValue","isReversed","direction","orientation","id","isDisabled","isReadOnly","onChangeStart","onChangeEnd","step","getAriaValueText","aria-valuetext","aria-label","aria-labelledby","name","focusThumbOnChange"];function qV(e){var t;const{min:n=0,max:i=100,onChange:a,value:s,defaultValue:o,isReversed:l,direction:u="ltr",orientation:d="horizontal",id:h,isDisabled:p,isReadOnly:f,onChangeStart:m,onChangeEnd:g,step:v=1,getAriaValueText:x,"aria-valuetext":b,"aria-label":w,"aria-labelledby":S,name:_,focusThumbOnChange:A=!0}=e,E=y(e,WV),C=As(m),M=As(g),T=As(x),k=function(e){const{isReversed:t,direction:n,orientation:r}=e;return"ltr"===n||"vertical"===r?t:!t}({isReversed:l,direction:u,orientation:d}),[P,R]=Lw({value:s,defaultValue:null!=o?o:XV(n,i),onChange:a}),[D,I]=(0,r.useState)(!1),[B,j]=(0,r.useState)(!1),F=!(p||f),L=(i-n)/10,O=v||(i-n)/100,N=VV(P,n,i),z=HV(k?i-N+n:N,n,i),U="vertical"===d,H=OV({min:n,max:i,step:v,isDisabled:p,value:N,isInteractive:F,isReversed:k,isVertical:U,eventSource:null,focusThumbOnChange:A,orientation:d}),G=(0,r.useRef)(null),V=(0,r.useRef)(null),W=(0,r.useRef)(null),q=(0,r.useId)(),X=null!=h?h:q,[J,Y]=["slider-thumb-".concat(X),"slider-track-".concat(X)],K=(0,r.useCallback)((e=>{var t,n;if(!G.current)return;const r=H.current;r.eventSource="pointer";const i=G.current.getBoundingClientRect(),{clientX:a,clientY:s}=null!=(n=null==(t=e.touches)?void 0:t[0])?n:e;let o=(U?i.bottom-s:a-i.left)/(U?i.height:i.width);k&&(o=1-o);let l=function(e,t,n){return(n-t)*e+t}(o,r.min,r.max);return r.step&&(l=parseFloat(GV(l,r.min,r.step))),l=VV(l,r.min,r.max),l}),[U,k,H]),Z=(0,r.useCallback)((e=>{const t=H.current;t.isInteractive&&(e=VV(e=parseFloat(GV(e,t.min,O)),t.min,t.max),R(e))}),[O,R,H]),Q=(0,r.useMemo)((()=>({stepUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;Z(k?N-e:N+e)},stepDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;Z(k?N+e:N-e)},reset(){Z(o||0)},stepTo(e){Z(e)}})),[Z,k,N,O,o]),$=(0,r.useCallback)((e=>{const t=H.current,n={ArrowRight:()=>Q.stepUp(),ArrowUp:()=>Q.stepUp(),ArrowLeft:()=>Q.stepDown(),ArrowDown:()=>Q.stepDown(),PageUp:()=>Q.stepUp(L),PageDown:()=>Q.stepDown(L),Home:()=>Z(t.min),End:()=>Z(t.max)}[e.key];n&&(e.preventDefault(),e.stopPropagation(),n(e),t.eventSource="keyboard")}),[Q,Z,L,H]),ee=null!=(t=null==T?void 0:T(N))?t:b,te=function(e){const[t]=zV({observeMutation:!1,getNodes(){var t;return["object"===typeof(t=e)&&null!==t&&"current"in t?e.current:e]}});return t}(V),{getThumbStyle:ne,rootStyle:re,trackStyle:ie,innerTrackStyle:ae}=(0,r.useMemo)((()=>{const e=H.current,t=null!=te?te:{width:0,height:0};return function(e){const{orientation:t,thumbPercents:n,thumbRects:r,isReversed:i}=e,a="vertical"===t?r.reduce(((e,t)=>oV(e).height>oV(t).height?e:t),sV):r.reduce(((e,t)=>oV(e).width>oV(t).width?e:t),sV),s=(0,c.A)({position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0},aV({orientation:t,vertical:a?{paddingLeft:a.width/2,paddingRight:a.width/2}:{},horizontal:a?{paddingTop:a.height/2,paddingBottom:a.height/2}:{}})),o=(0,c.A)({position:"absolute"},aV({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})),l=1===n.length,u=[0,i?100-n[0]:n[0]],d=l?u:n;let h=d[0];!l&&i&&(h=100-h);const p=Math.abs(d[d.length-1]-d[0]);return{trackStyle:o,innerTrackStyle:(0,c.A)((0,c.A)({},o),aV({orientation:t,vertical:i?{height:"".concat(p,"%"),top:"".concat(h,"%")}:{height:"".concat(p,"%"),bottom:"".concat(h,"%")},horizontal:i?{width:"".concat(p,"%"),right:"".concat(h,"%")}:{width:"".concat(p,"%"),left:"".concat(h,"%")}})),rootStyle:s,getThumbStyle:e=>{var i;const a=null!=(i=r[e])?i:sV;return(0,c.A)({position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none"},aV({orientation:t,vertical:{bottom:"calc(".concat(n[e],"% - ").concat(a.height/2,"px)")},horizontal:{left:"calc(".concat(n[e],"% - ").concat(a.width/2,"px)")}}))}}}({isReversed:k,orientation:e.orientation,thumbRects:[t],thumbPercents:[z]})}),[k,te,z,H]),se=(0,r.useCallback)((()=>{H.current.focusThumbOnChange&&setTimeout((()=>{var e;return null==(e=V.current)?void 0:e.focus()}))}),[H]);function oe(e){const t=K(e);null!=t&&t!==H.current.value&&R(t)}Li((()=>{const e=H.current;se(),"keyboard"===e.eventSource&&(null==M||M(e.value))}),[N,M]),function(e,t){const{onPan:n,onPanStart:i,onPanEnd:a,onPanSessionStart:s,onPanSessionEnd:o,threshold:l}=t,c=Boolean(n||i||a||s||o),u=(0,r.useRef)(null),d=OV({onSessionStart:s,onSessionEnd:o,onStart:i,onMove:n,onEnd(e,t){u.current=null,null==a||a(e,t)}});(0,r.useEffect)((()=>{var e;null==(e=u.current)||e.updateHandlers(d.current)})),(0,r.useEffect)((()=>{const t=e.current;if(t&&c)return hV(t,"pointerdown",(function(e){u.current=new RV(e,d.current,l)}))}),[e,c,d,l]),(0,r.useEffect)((()=>()=>{var e;null==(e=u.current)||e.end(),u.current=null}),[])}(W,{onPanSessionStart(e){const t=H.current;t.isInteractive&&(I(!0),se(),oe(e),null==C||C(t.value))},onPanSessionEnd(){const e=H.current;e.isInteractive&&(I(!1),null==M||M(e.value))},onPan(e){H.current.isInteractive&&oe(e)}});const le=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)((0,c.A)({},e),E),{},{ref:Lr(t,W),tabIndex:-1,"aria-disabled":nV(p),"data-focused":tV(B),style:(0,c.A)((0,c.A)({},e.style),re)})}),[E,p,B,re]),ce=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:Lr(t,G),id:Y,"data-disabled":tV(p),style:(0,c.A)((0,c.A)({},e.style),ie)})}),[p,Y,ie]),ue=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:t,style:(0,c.A)((0,c.A)({},e.style),ae)})}),[ae]),de=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:Lr(t,V),role:"slider",tabIndex:F?0:void 0,id:J,"data-active":tV(D),"aria-valuetext":ee,"aria-valuemin":n,"aria-valuemax":i,"aria-valuenow":N,"aria-orientation":d,"aria-disabled":nV(p),"aria-readonly":nV(f),"aria-label":w,"aria-labelledby":w?void 0:S,style:(0,c.A)((0,c.A)({},e.style),ne(0)),onKeyDown:iV(e.onKeyDown,$),onFocus:iV(e.onFocus,(()=>j(!0))),onBlur:iV(e.onBlur,(()=>j(!1)))})}),[F,J,D,ee,n,i,N,d,p,f,w,S,ne,$]),he=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=!(e.value<n||e.value>i),a=N>=e.value,s=HV(e.value,n,i),o=(0,c.A)({position:"absolute",pointerEvents:"none"},function(e){const{orientation:t,vertical:n,horizontal:r}=e;return"vertical"===t?n:r}({orientation:d,vertical:{bottom:"".concat(k?100-s:s,"%")},horizontal:{left:"".concat(k?100-s:s,"%")}}));return(0,c.A)((0,c.A)({},e),{},{ref:t,role:"presentation","aria-hidden":!0,"data-disabled":tV(p),"data-invalid":tV(!r),"data-highlighted":tV(a),style:(0,c.A)((0,c.A)({},e.style),o)})}),[p,k,i,n,d,N]),pe=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.A)((0,c.A)({},e),{},{ref:t,type:"hidden",value:N,name:_})}),[_,N]);return{state:{value:N,isFocused:B,isDragging:D},actions:Q,getRootProps:le,getTrackProps:ce,getInnerTrackProps:ue,getThumbProps:de,getMarkerProps:he,getInputProps:pe}}function XV(e,t){return t<e?e:e+(t-e)/2}const JV=["getInputProps","getRootProps"];var[YV,KV]=gr({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[ZV,QV]=gr({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),$V=cr(((e,t)=>{var n;const r=(0,c.A)((0,c.A)({},e),{},{orientation:null!=(n=null==e?void 0:e.orientation)?n:"horizontal"}),i=Rr("Slider",r),a=ft(r),{direction:s}=Ar();a.direction=s;const o=qV(a),{getInputProps:l,getRootProps:u}=o,d=y(o,JV),h=u(),p=l({},t);return(0,ur.jsx)(YV,{value:d,children:(0,ur.jsx)(ZV,{value:i,children:(0,ur.jsxs)(lr.div,(0,c.A)((0,c.A)({},h),{},{className:rV("chakra-slider",r.className),__css:i.container,children:[r.children,(0,ur.jsx)("input",(0,c.A)({},p))]}))})})}));$V.displayName="Slider";var eW=cr(((e,t)=>{const{getThumbProps:n}=KV(),r=QV(),i=n(e,t);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},i),{},{className:rV("chakra-slider__thumb",e.className),__css:r.thumb}))}));eW.displayName="SliderThumb";var tW=cr(((e,t)=>{const{getTrackProps:n}=KV(),r=QV(),i=n(e,t);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},i),{},{className:rV("chakra-slider__track",e.className),__css:r.track}))}));tW.displayName="SliderTrack";var nW=cr(((e,t)=>{const{getInnerTrackProps:n}=KV(),r=QV(),i=n(e,t);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},i),{},{className:rV("chakra-slider__filled-track",e.className),__css:r.filledTrack}))}));nW.displayName="SliderFilledTrack";var rW=cr(((e,t)=>{const{getMarkerProps:n}=KV(),r=QV(),i=n(e,t);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({},i),{},{className:rV("chakra-slider__marker",e.className),__css:r.mark}))}));rW.displayName="SliderMark";var iW=Sx({displayName:"RepeatClockIcon",path:(0,ur.jsxs)("g",{fill:"currentColor",children:[(0,ur.jsx)("path",{d:"M12.965,6a1,1,0,0,0-1,1v5.5a1,1,0,0,0,1,1h5a1,1,0,0,0,0-2h-3.75a.25.25,0,0,1-.25-.25V7A1,1,0,0,0,12.965,6Z"}),(0,ur.jsx)("path",{d:"M12.567,1.258A10.822,10.822,0,0,0,2.818,8.4a.25.25,0,0,1-.271.163L.858,8.309a.514.514,0,0,0-.485.213.5.5,0,0,0-.021.53l2.679,4.7a.5.5,0,0,0,.786.107l3.77-3.746a.5.5,0,0,0-.279-.85L5.593,9.007a.25.25,0,0,1-.192-.35,8.259,8.259,0,1,1,7.866,11.59,1.25,1.25,0,0,0,.045,2.5h.047a10.751,10.751,0,1,0-.792-21.487Z"})]})}),aW=Sx({displayName:"RepeatIcon",path:(0,ur.jsxs)("g",{fill:"currentColor",children:[(0,ur.jsx)("path",{d:"M10.319,4.936a7.239,7.239,0,0,1,7.1,2.252,1.25,1.25,0,1,0,1.872-1.657A9.737,9.737,0,0,0,9.743,2.5,10.269,10.269,0,0,0,2.378,9.61a.249.249,0,0,1-.271.178l-1.033-.13A.491.491,0,0,0,.6,9.877a.5.5,0,0,0-.019.526l2.476,4.342a.5.5,0,0,0,.373.248.43.43,0,0,0,.062,0,.5.5,0,0,0,.359-.152l3.477-3.593a.5.5,0,0,0-.3-.844L5.15,10.172a.25.25,0,0,1-.2-.333A7.7,7.7,0,0,1,10.319,4.936Z"}),(0,ur.jsx)("path",{d:"M23.406,14.1a.5.5,0,0,0,.015-.526l-2.5-4.329A.5.5,0,0,0,20.546,9a.489.489,0,0,0-.421.151l-3.456,3.614a.5.5,0,0,0,.3.842l1.848.221a.249.249,0,0,1,.183.117.253.253,0,0,1,.023.216,7.688,7.688,0,0,1-5.369,4.9,7.243,7.243,0,0,1-7.1-2.253,1.25,1.25,0,1,0-1.872,1.656,9.74,9.74,0,0,0,9.549,3.03,10.261,10.261,0,0,0,7.369-7.12.251.251,0,0,1,.27-.179l1.058.127a.422.422,0,0,0,.06,0A.5.5,0,0,0,23.406,14.1Z"})]})}),sW=Sx({d:"M11.2857,6.05714 L10.08571,4.85714 L7.85714,7.14786 L7.85714,1 L6.14286,1 L6.14286,7.14786 L3.91429,4.85714 L2.71429,6.05714 L7,10.42857 L11.2857,6.05714 Z M1,11.2857 L1,13 L13,13 L13,11.2857 L1,11.2857 Z",displayName:"DownloadIcon",viewBox:"0 0 14 14"}),oW=Sx({displayName:"MinusIcon",path:(0,ur.jsx)("g",{fill:"currentColor",children:(0,ur.jsx)("rect",{height:"4",width:"20",x:"2",y:"10"})})});const lW={BRUSH:"brush",PENCIL:"pencil",ERASER:"eraser",LINE:"line",RECT:"rect",ELLIPSE:"ellipse",POLY:"poly",BUCKET:"bucket",TEXT:"text",EYEDROPPER:"eyedropper",SELECT:"select",HAND:"hand"};function cW(){const e=m_(),t="undefined"!==typeof window?window.__appSocket:null,n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useRef)(null),s=(0,r.useRef)(null),o=(0,r.useRef)(null),l=(0,r.useRef)(null),[u,d]=(0,r.useState)({width:1200,height:800}),[h,p]=(0,r.useState)(1),[f,m]=(0,r.useState)({x:0,y:0}),g=(0,r.useRef)(!1),v=(0,r.useRef)({x:0,y:0}),[y,x]=(0,r.useState)([]),[b,w]=(0,r.useState)(null),S=(0,r.useRef)(new Map),_=(0,r.useState)(0)[1],[A,E]=(0,r.useState)(lW.BRUSH),[C,M]=(0,r.useState)("#000000"),[T,k]=(0,r.useState)("#ffffff"),[P,R]=(0,r.useState)(8),[D,I]=(0,r.useState)(1),[B,j]=(0,r.useState)(!0),[F,L]=(0,r.useState)(!0),[O,N]=(0,r.useState)("24px Arial"),[z,U]=(0,r.useState)(!1),[H,G]=(0,r.useState)(!0),[V,W]=(0,r.useState)(20),[q,X]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffa500","#800080"]),[K,Z]=(0,r.useState)(""),[Q,$]=(0,r.useState)(""),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(30),[ie,ae]=(0,r.useState)(.92),[se,oe]=(0,r.useState)(1200),[le,ce]=(0,r.useState)(800),ue=(0,r.useRef)(!1),de=(0,r.useRef)({x:0,y:0}),he=(0,r.useRef)([]),pe=(0,r.useRef)(!1),fe=(0,r.useRef)(null),me=(0,r.useRef)(new Map),ge=(0,r.useRef)([]),ve=(0,r.useRef)([]),ye=(0,r.useCallback)((()=>y.find((e=>e.id===b))),[y,b]),xe=(0,r.useCallback)((()=>{var e;return null===(e=S.current.get(b))||void 0===e?void 0:e.ctx}),[b]),be=(e,t)=>{const r=n.current.getBoundingClientRect(),i=(e-r.left-f.x)/h,a=(t-r.top-f.y)/h;let s=Math.round(i),o=Math.round(a);return q&&V>1&&(s=Math.round(s/V)*V,o=Math.round(o/V)*V),{x:s,y:o}},we=(e,t)=>{e.save(),t(e),e.restore()},Se=e=>{const t=Math.random().toString(36).slice(2),r=document.createElement("canvas");r.width=u.width,r.height=u.height,r.style.position="absolute",r.style.left="0",r.style.top="0";const i=r.getContext("2d",{willReadFrequently:!0});return i.clearRect(0,0,r.width,r.height),S.current.set(t,{canvas:r,ctx:i}),n.current.appendChild(r),{id:t,name:e,visible:!0,opacity:1}},_e=(e,t)=>{ge.current.push({layerId:e,before:t,after:null}),ve.current=[]},Ae=e=>{const t=ge.current[ge.current.length-1];t&&(t.after=e)},Ee=r.useCallback((()=>{var e;const t=ge.current.pop();if(!t)return;const{layerId:n,before:r}=t,i=null===(e=S.current.get(n))||void 0===e?void 0:e.ctx;if(!i||!r)return;const a=i.createImageData(r.width,r.height);a.data.set(r.data),i.putImageData(a,0,0),ve.current.push(t),_((e=>e+1))}),[]),Ce=r.useCallback((()=>{var e;const t=ve.current.pop();if(!t)return;const{layerId:n,after:r}=t,i=null===(e=S.current.get(n))||void 0===e?void 0:e.ctx;if(!i||!r)return;const a=i.createImageData(r.width,r.height);a.data.set(r.data),i.putImageData(a,0,0),ge.current.push(t),_((e=>e+1))}),[]),Me=e=>{const{canvas:t,ctx:n}=S.current.get(e),r=n.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8ClampedArray(r.data)}};(0,r.useEffect)((()=>{const e=i.current;e&&(e.width=u.width,e.height=u.height,e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.transformOrigin="0 0",e.style.transform="translate(".concat(f.x,"px, ").concat(f.y,"px) scale(").concat(h,")"),e.style.pointerEvents="none");const t=a.current;t&&(t.width=u.width,t.height=u.height,t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.transformOrigin="0 0",t.style.transform="translate(".concat(f.x,"px, ").concat(f.y,"px) scale(").concat(h,")"),t.style.pointerEvents="none");const r=s.current;r&&(r.width=u.width,r.height=u.height,r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.transformOrigin="0 0",r.style.transform="translate(".concat(f.x,"px, ").concat(f.y,"px) scale(").concat(h,")"),r.style.pointerEvents="none"),n.current&&(n.current.style.width="".concat(u.width,"px"),n.current.style.height="".concat(u.height,"px"),n.current.style.transform="translate(".concat(f.x,"px, ").concat(f.y,"px) scale(").concat(h,")"),n.current.style.transformOrigin="0 0",n.current.style.position="relative",n.current.style.background="#ffffff",n.current.style.outline="1px solid #ccc")}),[u,h,f]),(0,r.useEffect)((()=>{const e=a.current;if(!e)return;const t=e.getContext("2d");if(t.clearRect(0,0,e.width,e.height),H&&!(V<2)){t.save(),t.strokeStyle="rgba(0,0,0,0.1)",t.lineWidth=1;for(let n=0;n<=e.width;n+=V)t.beginPath(),t.moveTo(n+.5,0),t.lineTo(n+.5,e.height),t.stroke();for(let n=0;n<=e.height;n+=V)t.beginPath(),t.moveTo(0,n+.5),t.lineTo(e.width,n+.5),t.stroke();t.restore()}}),[H,V,u.width,u.height]);const Te=()=>{const e=s.current;if(!e)return;const t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);const n=Date.now();for(const[r,i]of me.current.entries()){if(n-(i.ts||0)>8e3){me.current.delete(r);continue}const e=5;t.save(),t.globalAlpha=.9,t.fillStyle=i.color||"#ef4444",t.strokeStyle="#ffffff",t.lineWidth=2,t.beginPath(),t.arc(i.x,i.y,e,0,2*Math.PI),t.fill(),t.stroke(),t.restore()}};(0,r.useEffect)((()=>{if(!t)return;const e=e=>{let{cursor:t,from:n}=e;t&&(me.current.set(n,(0,c.A)((0,c.A)({},t),{},{ts:Date.now()})),Te())},n=setInterval(Te,1e3);return t.on("paint:cursor",e),()=>{t.off("paint:cursor",e),clearInterval(n)}}),[t]),(0,r.useEffect)((()=>{if(!n.current)return;n.current.innerHTML="",S.current=new Map;const r=Se("Background");x([r]),w(r.id);try{const n=new URLSearchParams(window.location.search).get("room");n&&t&&(Z(n),t.emit("paint:join",{roomId:n}),$(n),e({title:"Joined ".concat(n),status:"success"}))}catch(i){}}),[]);const ke=e=>{e.clearRect(0,0,u.width,u.height),y.forEach((t=>{if(!t.visible)return;const{canvas:n}=S.current.get(t.id);e.globalAlpha=t.opacity,e.drawImage(n,0,0)})),e.globalAlpha=1},Pe=()=>{try{const e=l.current;if(!e)return;const t=e.clientWidth-12,n=e.clientHeight-12;if(t<=0||n<=0)return;const r=Math.max(.1,Math.min(8,Math.min(t/u.width,n/u.height)));p(r),m({x:0,y:0})}catch(e){}},Re=r.useCallback((e=>{try{t&&Q&&t.emit("paint:op",{roomId:Q,op:e})}catch(n){}}),[t,Q]);(0,r.useEffect)((()=>{if(!t)return;const e=e=>{let{op:t,from:n}=e;if(!t)return;const r=xe();if(!r)return;const i=t.type;"stroke"===i?we(r,(e=>{e.globalCompositeOperation=t.erase?"destination-out":"source-over",e.globalAlpha=t.opacity||1,e.lineCap="round",e.lineJoin="round",e.strokeStyle=t.color||"#000",e.lineWidth=t.size||4,e.beginPath(),e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e.stroke()})):"line"===i?we(r,(e=>{e.globalAlpha=t.opacity||1,e.strokeStyle=t.color||"#000",e.lineWidth=t.size||4,e.beginPath(),e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e.stroke()})):"rect"===i?we(r,(e=>{e.globalAlpha=t.opacity||1,t.fill&&(e.fillStyle=t.fill,e.fillRect(t.x,t.y,t.w,t.h)),t.stroke&&(e.strokeStyle=t.stroke,e.lineWidth=t.size||2,e.strokeRect(t.x,t.y,t.w,t.h))})):"ellipse"===i?we(r,(e=>{e.globalAlpha=t.opacity||1,e.beginPath(),e.ellipse(t.cx,t.cy,Math.abs(t.rx),Math.abs(t.ry),0,0,2*Math.PI),t.fill&&(e.fillStyle=t.fill,e.fill()),t.stroke&&(e.strokeStyle=t.stroke,e.lineWidth=t.size||2,e.stroke())})):"poly"===i?we(r,(e=>{e.globalAlpha=t.opacity||1,e.beginPath(),e.moveTo(t.points[0].x,t.points[0].y);for(let n=1;n<t.points.length;n++)e.lineTo(t.points[n].x,t.points[n].y);e.closePath(),t.fill&&(e.fillStyle=t.fill,e.fill()),t.stroke&&(e.strokeStyle=t.stroke,e.lineWidth=t.size||2,e.stroke())})):"text"===i&&we(r,(e=>{e.globalAlpha=t.opacity||1,e.fillStyle=t.color||"#000",e.font=t.font||"24px Arial",e.textBaseline="top",e.fillText(t.text||"",t.x,t.y)}))};return t.on("paint:op",e),()=>{t.off("paint:op",e)}}),[t,Q,xe]);const De=t=>{const n=new Image;n.onload=()=>{const t=xe();t&&(t.drawImage(n,0,0),e({title:"Image imported",status:"success"}))},n.src=URL.createObjectURL(t)},Ie=(e,t,n)=>{e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3]},Be=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3],je=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=e.replace("#",""),r=parseInt(3===n.length?n.split("").map((e=>e+e)).join(""):n,16);return[r>>16&255,r>>8&255,255&r,Math.round(255*t)]},Fe=e=>{const t=i.current.getContext("2d");if(t.clearRect(0,0,i.current.width,i.current.height),e&&!(e.length<2)){t.save(),t.globalAlpha=.8,t.strokeStyle="#3b82f6",t.fillStyle="rgba(59,130,246,0.2)",t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.stroke(),t.restore()}},Le=(e,t,n)=>{const r=i.current.getContext("2d");r.clearRect(0,0,i.current.width,i.current.height),r.save(),r.globalAlpha=.8,r.strokeStyle="#3b82f6",r.fillStyle="rgba(59,130,246,0.2)";const a=t.x-e.x,s=t.y-e.y;n===lW.LINE&&(r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke()),n!==lW.RECT&&"select"!==n||(B&&"select"!==n&&r.fillRect(e.x,e.y,a,s),r.strokeRect(e.x,e.y,a,s)),n===lW.ELLIPSE&&(r.beginPath(),r.ellipse(e.x+a/2,e.y+s/2,Math.abs(a/2),Math.abs(s/2),0,0,2*Math.PI),B&&r.fill(),F&&r.stroke()),r.restore()};(0,r.useEffect)((()=>{const e=e=>{if(!pe.current||A!==lW.POLY)return;const t=ye();if(!t)return;const n=xe(),r=he.current;if(!r||r.length<3)return pe.current=!1,i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height),void ge.current.pop();we(n,(e=>{e.globalAlpha=D,e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let t=1;t<r.length;t++)e.lineTo(r[t].x,r[t].y);if(e.closePath(),B){if(z){const t=Math.min(...r.map((e=>e.x))),n=Math.min(...r.map((e=>e.y))),i=Math.max(...r.map((e=>e.x))),a=Math.max(...r.map((e=>e.y))),s=e.createLinearGradient(t,n,i,a);s.addColorStop(0,C),s.addColorStop(1,T),e.fillStyle=s}else e.fillStyle=C;e.fill()}F&&(e.strokeStyle=T,e.lineWidth=P,e.stroke())})),i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height),Re({type:"poly",opacity:D,points:r,fill:B?z?null:C:null,stroke:F?T:null,size:P}),Ae(Me(t.id)),pe.current=!1,he.current=[]},t=t=>{"Enter"===t.key&&e(),"Escape"===t.key&&pe.current&&(pe.current=!1,he.current=[],i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height),ge.current.pop())};return window.addEventListener("dblclick",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("dblclick",e),window.removeEventListener("keydown",t)}}),[D,B,F,C,T,P,A,xe,ye,z,Re]);const Oe=()=>{const t={viewport:u,layers:y.map((e=>({id:e.id,name:e.name,visible:e.visible,opacity:e.opacity,dataURL:S.current.get(e.id).canvas.toDataURL()}))),activeLayerId:b};localStorage.setItem("paintProject",JSON.stringify(t)),e({title:"Project saved",status:"success"})};return(0,r.useEffect)((()=>{if(!ee)return;const e=setInterval((()=>{try{Oe()}catch(e){}}),1e3*Math.max(5,ne));return()=>clearInterval(e)}),[ee,ne]),(0,r.useEffect)((()=>{const e=e=>{var t;const n=(null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[];for(const i of n){var r;if(null!==(r=i.type)&&void 0!==r&&r.startsWith("image/")){const e=i.getAsFile();e&&De(e);break}}};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)}),[]),(0,r.useEffect)((()=>{const e=e=>{e.ctrlKey&&"z"===e.key.toLowerCase()&&Ee(),(e.ctrlKey&&e.shiftKey&&"z"===e.key.toLowerCase()||e.ctrlKey&&"y"===e.key.toLowerCase())&&Ce();const t={b:lW.BRUSH,p:lW.PENCIL,e:lW.ERASER,l:lW.LINE,r:lW.RECT,o:lW.ELLIPSE,g:lW.BUCKET,t:lW.TEXT,i:lW.EYEDROPPER,v:lW.SELECT,h:lW.HAND}[e.key.toLowerCase()];t&&E(t),"["===e.key&&R((e=>Math.max(1,e-1))),"]"===e.key&&R((e=>Math.min(128,e+1)))," "===e.key&&(e.preventDefault(),E(lW.HAND))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[Ce,Ee]),(0,ur.jsx)(pr,{p:3,maxW:"100vw",children:(0,ur.jsxs)(ao,{align:"start",spacing:3,children:[(0,ur.jsxs)(ex,{align:"stretch",minW:"260px",spacing:3,borderWidth:"1px",borderRadius:"md",p:3,bg:"whiteAlpha.700",_dark:{bg:"blackAlpha.400"},children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:"Tools"}),(0,ur.jsxs)(di,{value:A,onChange:e=>E(e.target.value),children:[(0,ur.jsx)("option",{value:lW.BRUSH,children:"Brush (B)"}),(0,ur.jsx)("option",{value:lW.PENCIL,children:"Pencil (P)"}),(0,ur.jsx)("option",{value:lW.ERASER,children:"Eraser (E)"}),(0,ur.jsx)("option",{value:lW.LINE,children:"Line (L)"}),(0,ur.jsx)("option",{value:lW.RECT,children:"Rectangle (R)"}),(0,ur.jsx)("option",{value:lW.ELLIPSE,children:"Ellipse (O)"}),(0,ur.jsx)("option",{value:lW.POLY,children:"Polygon"}),(0,ur.jsx)("option",{value:lW.BUCKET,children:"Fill/Bucket (G)"}),(0,ur.jsx)("option",{value:lW.TEXT,children:"Text (T)"}),(0,ur.jsx)("option",{value:lW.EYEDROPPER,children:"Eyedropper (I)"}),(0,ur.jsx)("option",{value:lW.SELECT,children:"Select/Move (V)"}),(0,ur.jsx)("option",{value:lW.HAND,children:"Pan (Space)"})]}),(0,ur.jsxs)(ao,{spacing:1,wrap:"wrap",children:[J.map(((e,t)=>(0,ur.jsx)(zr,{size:"xs",onClick:()=>M(e),bg:e,color:"#000000",borderWidth:"1px",children:" "},t))),(0,ur.jsx)(zr,{size:"xs",onClick:()=>Y((e=>Array.from(new Set([...e,C])).slice(0,24))),children:"+ Add"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsxs)(ex,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Primary"}),(0,ur.jsx)($y,{type:"color",value:C,onChange:e=>M(e.target.value),w:"50px",p:0})]}),(0,ur.jsxs)(ex,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Secondary"}),(0,ur.jsx)($y,{type:"color",value:T,onChange:e=>k(e.target.value),w:"50px",p:0})]})]}),(0,ur.jsxs)(Jr,{fontSize:"sm",children:["Size: ",P,"px"]}),(0,ur.jsxs)($V,{min:1,max:128,value:P,onChange:R,children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]}),(0,ur.jsxs)(Jr,{fontSize:"sm",children:["Opacity: ",Math.round(100*D),"%"]}),(0,ur.jsxs)($V,{min:.05,max:1,step:.05,value:D,onChange:I,children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(LS,{isChecked:B,onChange:e=>j(e.target.checked),children:"Fill"}),(0,ur.jsx)(LS,{isChecked:F,onChange:e=>L(e.target.checked),children:"Stroke"}),(0,ur.jsx)(LS,{isChecked:z,onChange:e=>U(e.target.checked),children:"Gradient"})]}),(0,ur.jsx)(bD,{}),(0,ur.jsx)(Jr,{fontWeight:"bold",children:"Grid"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(LS,{isChecked:H,onChange:e=>G(e.target.checked),children:"Show grid"}),(0,ur.jsx)(LS,{isChecked:q,onChange:e=>X(e.target.checked),children:"Snap"})]}),(0,ur.jsxs)(Jr,{fontSize:"sm",children:["Grid size: ",V,"px"]}),(0,ur.jsxs)($V,{min:5,max:100,step:1,value:V,onChange:W,children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]}),(0,ur.jsx)($y,{value:O,onChange:e=>N(e.target.value),placeholder:"Font (e.g., 24px Arial)"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{leftIcon:(0,ur.jsx)(iW,{}),onClick:Ee,children:"Undo"}),(0,ur.jsx)(zr,{leftIcon:(0,ur.jsx)(aW,{}),onClick:Ce,children:"Redo"})]}),(0,ur.jsx)(bD,{}),(0,ur.jsx)(Jr,{fontWeight:"bold",children:"Collaboration"}),(0,ur.jsx)(ao,{children:(0,ur.jsx)($y,{placeholder:"Room ID (e.g., team-1)",value:K,onChange:e=>Z(e.target.value)})}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{onClick:()=>{t&&K&&(t.emit("paint:join",{roomId:K}),$(K),e({title:"Joined ".concat(K),status:"success"}))},children:"Join"}),(0,ur.jsx)(zr,{variant:"outline",onClick:()=>{t&&Q&&(t.emit("paint:leave",{roomId:Q}),$(""),e({title:"Left room",status:"info"}))},children:"Leave"})]}),(0,ur.jsx)(bD,{}),(0,ur.jsx)(Jr,{fontWeight:"bold",children:"Export"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{leftIcon:(0,ur.jsx)(sW,{}),onClick:()=>{const e=o.current;e.width=u.width,e.height=u.height;const t=e.getContext("2d");ke(t);const n=e.toDataURL("image/png"),r=document.createElement("a");r.href=n,r.download="canvas.png",r.click()},children:"PNG"}),(0,ur.jsx)(zr,{onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;const t=o.current;t.width=u.width,t.height=u.height;const n=t.getContext("2d");ke(n);const r=Math.min(1,Math.max(.1,e||.92)),i=t.toDataURL("image/jpeg",r),a=document.createElement("a");a.href=i,a.download="canvas.jpg",a.click()}(),children:"JPG"})]}),(0,ur.jsxs)(Jr,{fontSize:"sm",children:["JPG quality: ",Math.round(100*ie)]}),(0,ur.jsxs)($V,{min:10,max:100,step:1,value:Math.round(100*ie),onChange:e=>ae(e/100),children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{onClick:Oe,children:"Save"}),(0,ur.jsx)(zr,{onClick:()=>{try{const t=localStorage.getItem("paintProject");if(!t)return;const r=JSON.parse(t);n.current.innerHTML="",S.current=new Map,x([]),setTimeout((()=>{d(r.viewport||u);const t=r.viewport||u;oe(t.width||1200),ce(t.height||800);const n=Se("Background"),i=S.current.get(n.id).ctx;(Array.isArray(r.layers)?r.layers:[]).forEach((e=>{const t=new Image;t.onload=()=>{i.drawImage(t,0,0)},t.src=e.dataURL})),x([n]),w(n.id),e({title:"Project loaded",status:"success"})}),0)}catch(t){e({title:"Load failed",status:"error"})}},children:"Load"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Qs,{size:"sm","aria-label":"Zoom out",icon:(0,ur.jsx)(oW,{}),onClick:()=>p((e=>Math.max(.1,e/1.1)))}),(0,ur.jsxs)(Jr,{w:"90px",textAlign:"center",children:["Zoom: ",Math.round(100*h),"%"]}),(0,ur.jsx)(Qs,{size:"sm","aria-label":"Zoom in",icon:(0,ur.jsx)(FD,{}),onClick:()=>p((e=>Math.min(8,1.1*e)))}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>p(1),children:"100%"}),(0,ur.jsx)(zr,{size:"sm",onClick:Pe,children:"Fit"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(LS,{isChecked:ee,onChange:e=>te(e.target.checked),children:"Autosave"}),(0,ur.jsxs)(Jr,{fontSize:"sm",children:["Every ",ne,"s"]})]}),(0,ur.jsxs)($V,{min:5,max:300,step:5,value:ne,onChange:re,children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]}),(0,ur.jsx)(bD,{}),(0,ur.jsx)(Jr,{fontWeight:"bold",children:"Canvas"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{type:"number",value:se,onChange:e=>oe(e.target.value),w:"110px"}),(0,ur.jsx)(Jr,{children:"x"}),(0,ur.jsx)($y,{type:"number",value:le,onChange:e=>ce(e.target.value),w:"110px"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>{if(!window.confirm("Resize canvas? Current content will be cleared."))return;const t=Math.max(64,Math.min(8192,Number(se)||u.width)),r=Math.max(64,Math.min(8192,Number(le)||u.height));n.current.innerHTML="",S.current=new Map,x([]),d({width:t,height:r}),setTimeout((()=>{const n=Se("Background");x([n]),w(n.id),e({title:"Canvas resized to ".concat(t,"x").concat(r),status:"success"}),Pe()}),0)},children:"Resize"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>{const e=ye();if(!e)return;const t=xe();t&&(_e(e.id,Me(e.id)),t.clearRect(0,0,u.width,u.height),Ae(Me(e.id)))},variant:"outline",children:"Clear"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>{const e=ye();if(!e)return;const t=xe();t&&(_e(e.id,Me(e.id)),we(t,(e=>{e.globalAlpha=D,e.fillStyle=C,e.fillRect(0,0,u.width,u.height)})),Ae(Me(e.id)))},children:"Fill"})]}),(0,ur.jsx)($y,{type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&De(n),e.target.value=""}})]}),(0,ur.jsxs)(pr,{position:"relative",flex:"1",h:"calc(100vh - 100px)",overflow:"auto",borderWidth:"1px",borderRadius:"md",p:3,ref:l,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDrop:e=>{var t;e.preventDefault();const n=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];n&&n.type.startsWith("image/")&&De(n)},children:[(0,ur.jsx)(pr,{position:"relative",ref:n,onMouseDown:e=>{const t=ye();if(!t)return;const r=xe(),i=be(e.clientX,e.clientY);if(A===lW.HAND||1===e.button||0===e.button&&e.shiftKey)return g.current=!0,void(v.current={x:e.clientX-f.x,y:e.clientY-f.y});if(A===lW.POLY)return pe.current?he.current.push(i):(pe.current=!0,he.current=[i],_e(t.id,Me(t.id))),void Fe(he.current);if(ue.current=!0,de.current=i,he.current=[i],_e(t.id,Me(t.id)),A===lW.BUCKET)((e,t,n,r)=>{const{width:i,height:a}=e.canvas,s=e.getImageData(0,0,i,a),o=s.data,l=(e,t)=>4*(t*i+e),c=o.slice(l(t,n),l(t,n)+4),u=je(r,D);if(Be(c,u))return;const d=[[t,n]];for(;d.length;){const[e,t]=d.pop();let n=e;for(;n>=0&&Be(o.slice(l(n,t),l(n,t)+4),c);)n--;n++;let r=!1,s=!1;for(;n<i&&Be(o.slice(l(n,t),l(n,t)+4),c);)Ie(o,l(n,t),u),t>0&&(Be(o.slice(l(n,t-1),l(n,t-1)+4),c)?r||(d.push([n,t-1]),r=!0):r&&(r=!1)),t<a-1&&(Be(o.slice(l(n,t+1),l(n,t+1)+4),c)?s||(d.push([n,t+1]),s=!0):s&&(s=!1)),n++}e.putImageData(s,0,0)})(r,i.x,i.y,C),Ae(Me(t.id)),ue.current=!1;else if(A===lW.EYEDROPPER){const e=o.current;e.width=u.width,e.height=u.height;const t=e.getContext("2d",{willReadFrequently:!0});ke(t);const n=t.getImageData(i.x,i.y,1,1).data,r=e=>e.toString(16).padStart(2,"0"),a="#".concat(r(n[0])).concat(r(n[1])).concat(r(n[2]));M(a),ue.current=!1,ge.current.pop()}else if(A===lW.TEXT){const e=document.createElement("input");e.type="text",e.placeholder="Type and press Enter",Object.assign(e.style,{position:"absolute",left:"".concat(i.x,"px"),top:"".concat(i.y,"px"),font:O,zIndex:9999}),n.current.appendChild(e),e.focus(),e.addEventListener("keydown",(a=>{"Enter"===a.key?(we(r,(t=>{t.globalAlpha=D,t.fillStyle=C,t.font=O,t.textBaseline="top",t.fillText(e.value,i.x,i.y)})),n.current.removeChild(e),Ae(Me(t.id))):"Escape"===a.key&&(n.current.removeChild(e),ge.current.pop())})),ue.current=!1}else A===lW.SELECT?fe.current={x:i.x,y:i.y,w:0,h:0,imageData:null}:A===lW.BRUSH||A===lW.PENCIL||lW.ERASER},onMouseMove:e=>{if(g.current)return void m({x:e.clientX-v.current.x,y:e.clientY-v.current.y});if(t&&Q)try{const n=be(e.clientX,e.clientY);t.emit("paint:cursor",{roomId:Q,cursor:{x:n.x,y:n.y,color:"#3b82f6"}})}catch(a){}if(A===lW.POLY&&pe.current&&he.current.length){const t=be(e.clientX,e.clientY);return void Fe([...he.current,t])}if(!ue.current)return;const n=xe();if(!n)return;const r=be(e.clientX,e.clientY),i=de.current;if(A===lW.BRUSH||A===lW.PENCIL||A===lW.ERASER)we(n,(e=>{e.globalCompositeOperation=A===lW.ERASER?"destination-out":"source-over",e.globalAlpha=D,e.lineCap="round",e.lineJoin="round",e.strokeStyle=A===lW.ERASER?"#000":C,e.lineWidth=A===lW.PENCIL?1:P,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(r.x,r.y),e.stroke()})),Re({type:"stroke",erase:A===lW.ERASER,opacity:D,color:A===lW.ERASER?"#000":C,size:A===lW.PENCIL?1:P,from:i,to:r}),de.current=r,he.current.push(r);else if(A===lW.LINE){let t=r;if(e.shiftKey){const e=r.x-i.x,n=r.y-i.y,a=Math.abs(e),s=Math.abs(n);if(a>2*s)t={x:r.x,y:i.y};else if(s>2*a)t={x:i.x,y:r.y};else{const r=Math.max(a,s);t={x:i.x+Math.sign(e)*r,y:i.y+Math.sign(n)*r}}}Le(i,t,lW.LINE)}else A===lW.RECT?Le(i,r,lW.RECT):A===lW.ELLIPSE?Le(i,r,lW.ELLIPSE):A===lW.SELECT&&(fe.current.w=r.x-fe.current.x,fe.current.h=r.y-fe.current.y,Le(fe.current,r,"select"))},onMouseUp:e=>{if(g.current)return void(g.current=!1);if(A===lW.POLY&&pe.current)return;if(!ue.current)return;ue.current=!1;const t=ye();if(!t)return;const n=xe(),r=de.current,a=be(e.clientX,e.clientY);if(A===lW.LINE&&(we(n,(e=>{e.globalAlpha=D,e.strokeStyle=C,e.lineWidth=P,e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(a.x,a.y),e.stroke()})),Re({type:"line",opacity:D,color:C,size:P,from:r,to:a}),i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height)),A===lW.RECT&&(we(n,(e=>{if(e.globalAlpha=D,B){if(z){const t=e.createLinearGradient(r.x,r.y,a.x,a.y);t.addColorStop(0,C),t.addColorStop(1,T),e.fillStyle=t}else e.fillStyle=C;e.fillRect(r.x,r.y,a.x-r.x,a.y-r.y)}F&&(e.strokeStyle=T,e.lineWidth=P,e.strokeRect(r.x,r.y,a.x-r.x,a.y-r.y))})),i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height),Re({type:"rect",opacity:D,x:r.x,y:r.y,w:a.x-r.x,h:a.y-r.y,fill:B?z?null:C:null,stroke:F?T:null,size:P})),A===lW.ELLIPSE){we(n,(e=>{e.globalAlpha=D,e.beginPath();const t=a.x-r.x,n=a.y-r.y;if(e.ellipse(r.x+t/2,r.y+n/2,Math.abs(t/2),Math.abs(n/2),0,0,2*Math.PI),B){if(z){const t=e.createLinearGradient(r.x,r.y,a.x,a.y);t.addColorStop(0,C),t.addColorStop(1,T),e.fillStyle=t}else e.fillStyle=C;e.fill()}F&&(e.strokeStyle=T,e.lineWidth=P,e.stroke())}));const e=a.x-r.x,t=a.y-r.y,s=r.x+e/2,o=r.y+t/2;Re({type:"ellipse",opacity:D,cx:s,cy:o,rx:Math.abs(e/2),ry:Math.abs(t/2),fill:B?z?null:C:null,stroke:F?T:null,size:P}),i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height)}if(A===lW.SELECT){const e=fe.current;if(Math.abs(e.w)<2||Math.abs(e.h)<2)return ge.current.pop(),void i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height);const r=Math.min(e.x,e.x+e.w),a=Math.min(e.y,e.y+e.h),s=Math.abs(e.w),o=Math.abs(e.h),l=n.getImageData(r,a,s,o);e.imageData=l,n.clearRect(r,a,s,o);const c=i.current.getContext("2d");c.clearRect(0,0,i.current.width,i.current.height);const u=document.createElement("canvas");u.width=s,u.height=o,u.getContext("2d").putImageData(l,0,0);const d=e=>{const t=be(e.clientX,e.clientY);c.clearRect(0,0,i.current.width,i.current.height),c.drawImage(u,t.x-s/2,t.y-o/2)},h=e=>{const r=be(e.clientX,e.clientY);c.clearRect(0,0,i.current.width,i.current.height),n.drawImage(u,r.x-s/2,r.y-o/2),Ae(Me(t.id)),window.removeEventListener("mousemove",d),window.removeEventListener("click",h,!0)};window.addEventListener("mousemove",d),window.addEventListener("click",h,!0)}[lW.BRUSH,lW.PENCIL,lW.ERASER,lW.LINE,lW.RECT,lW.ELLIPSE].includes(A)&&Ae(Me(t.id))},onWheel:e=>{e.preventDefault();const t=e.deltaY<0?1.1:.9,n=Math.max(.1,Math.min(8,h*t));p(n)},onContextMenu:e=>e.preventDefault()}),(0,ur.jsx)("canvas",{ref:a,style:{position:"absolute",left:0,top:0,pointerEvents:"none"}}),(0,ur.jsx)("canvas",{ref:s,style:{position:"absolute",left:0,top:0,pointerEvents:"none"}}),(0,ur.jsx)("canvas",{ref:i,style:{position:"absolute",left:0,top:0,pointerEvents:"none"}}),(0,ur.jsx)("canvas",{ref:o,style:{display:"none"}})]})]})})}var uW=Sx({d:"M2.20731,0.0127209 C2.1105,-0.0066419 1.99432,-0.00664663 1.91687,0.032079 C0.871279,0.438698 0.212942,1.92964 0.0580392,2.95587 C-0.426031,6.28627 2.20731,9.17133 4.62766,11.0689 C6.77694,12.7534 10.9012,15.5223 13.3409,12.8503 C13.6507,12.5211 14.0186,12.037 13.9993,11.553 C13.9412,10.7397 13.186,10.1588 12.6051,9.71349 C12.1598,9.38432 11.2304,8.47427 10.6495,8.49363 C10.1267,8.51299 9.79754,9.05515 9.46837,9.38432 L8.88748,9.96521 C8.79067,10.062 7.55145,9.24878 7.41591,9.15197 C6.91248,8.8228 6.4284,8.45491 6.00242,8.04829 C5.57644,7.64167 5.18919,7.19632 4.86002,6.73161 C4.7632,6.59607 3.96933,5.41495 4.04678,5.31813 C4.04678,5.31813 4.72448,4.58234 4.91811,4.2919 C5.32473,3.67229 5.63453,3.18822 5.16982,2.45243 C4.99556,2.18135 4.78257,1.96836 4.55021,1.73601 C4.14359,1.34875 3.73698,0.942131 3.27227,0.612963 C3.02055,0.419335 2.59457,0.0708094 2.20731,0.0127209 Z",displayName:"PhoneIcon",viewBox:"0 0 14 14"});function dW(){const e=m_(),t="undefined"!==typeof window?window.__appSocket:null,{hostName:n}=(0,r.useContext)(GS),[i,a]=(0,r.useState)(""),[s,o]=(0,r.useState)(!1),[l,u]=(0,r.useState)(""),[d,h]=(0,r.useState)([]),[p,f]=(0,r.useState)(""),[m,g]=(0,r.useState)({cams:[],mics:[],speakers:[]}),[v,y]=(0,r.useState)({cam:"",mic:"",speaker:""}),[x,b]=(0,r.useState)(null),w=(0,r.useRef)(null),[S]=(0,r.useState)(Math.random().toString(36).slice(2)),_=(0,r.useRef)(new Map),A=(0,r.useRef)(new Map),[E,C]=(0,r.useState)([]),[M,T]=(0,r.useState)(!0),[k,P]=(0,r.useState)(!0),R=(0,r.useRef)(null),[D,I]=(0,r.useState)([]),[B,j]=(0,r.useState)({}),[F,L]=(0,r.useState)(!1),[O,N]=(0,r.useState)(""),[z,U]=(0,r.useState)(!1),[H,G]=(0,r.useState)([]),[V,W]=(0,r.useState)({lobby:!1,locked:!1,hasPasscode:!1,muteOnJoin:!1}),[q,X]=(0,r.useState)({}),J=(0,r.useRef)(new Map),[Y,K]=(0,r.useState)(!1),Z=(0,r.useRef)(null),Q=(0,r.useRef)([]),[$,ee]=(0,r.useState)({}),te=(0,r.useRef)(null),[ne,re]=(0,r.useState)(!0),[ie,ae]=(0,r.useState)({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),se=(0,r.useRef)({active:!1,prev:!0}),[oe,le]=(0,r.useState)([]),[ce,ue]=(0,r.useState)(""),[de,he]=(0,r.useState)(["",""]),[pe,fe]=(0,r.useState)(null),[me,ge]=(0,r.useState)([]),[ve,ye]=(0,r.useState)(!0),[xe,be]=(0,r.useState)("grid"),[we,Se]=(0,r.useState)(null),[_e,Ae]=(0,r.useState)(!1),[Ee,Ce]=(0,r.useState)({});(0,r.useEffect)((()=>{var e,t;null===(e=navigator.mediaDevices)||void 0===e||null===(t=e.enumerateDevices)||void 0===t||t.call(e).then((e=>{const t=e.filter((e=>"videoinput"===e.kind)),n=e.filter((e=>"audioinput"===e.kind)),r=e.filter((e=>"audiooutput"===e.kind));g({cams:t,mics:n,speakers:r}),y((e=>{var i,a,s;return{cam:e.cam||(null===(i=t[0])||void 0===i?void 0:i.deviceId)||"",mic:e.mic||(null===(a=n[0])||void 0===a?void 0:a.deviceId)||"",speaker:e.speaker||(null===(s=r[0])||void 0===s?void 0:s.deviceId)||""}}))})).catch((()=>{}))}),[]),(0,r.useEffect)((()=>{try{const e=new URLSearchParams(window.location.search),t=e.get("room"),n=e.get("code");t&&a(t),n&&N(n)}catch(e){}}),[]);const Me=()=>{const e=!v.mic||{deviceId:{exact:v.mic}};return!0===e?e:(0,c.A)((0,c.A)({},e),{},{noiseSuppression:ie.noiseSuppression,echoCancellation:ie.echoCancellation,autoGainControl:ie.autoGainControl})};(0,r.useEffect)((()=>{(async()=>{try{x&&x.getTracks().forEach((e=>e.stop()));const e=await navigator.mediaDevices.getUserMedia({video:!v.cam||{deviceId:{exact:v.cam}},audio:Me()});if(b(e),w.current&&(w.current.srcObject=e),s){const t=e.getVideoTracks()[0],n=e.getAudioTracks()[0];_.current.forEach((e=>{try{if(t){const n=e.getSenders().find((e=>{var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));n&&n.replaceTrack(t)}if(n){const t=e.getSenders().find((e=>{var t;return"audio"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));t&&t.replaceTrack(n)}}catch(r){}}))}}catch(Zie){e({title:"Camera/Mic error",status:"error"})}})()}),[v.cam,v.mic,ie.noiseSuppression,ie.echoCancellation,ie.autoGainControl]),(0,r.useEffect)((()=>{try{w.current&&x&&(w.current.srcObject!==x&&(w.current.srcObject=x),"function"===typeof w.current.play&&w.current.play().catch((()=>{})))}catch(e){}}),[x,s]),(0,r.useEffect)((()=>{try{w.current&&"function"===typeof w.current.play&&w.current.play().catch((()=>{}))}catch(e){}}),[k]);(0,r.useEffect)((()=>{if(!t)return;const n=e=>h((t=>[...t,e].slice(-200))),r=e=>C(e),i=e=>{I((t=>[...t,e].slice(-50))),setTimeout((()=>I((t=>t.filter((t=>t!==e))))),3e3)},a=e=>{let{userId:t,up:n}=e;return j((e=>(0,c.A)((0,c.A)({},e),{},{[t]:!!n})))},s=()=>{var e;null===x||void 0===x||null===(e=x.getAudioTracks())||void 0===e||e.forEach((e=>e.enabled=!1)),T(!1)};t.on("meeting:participants",r),t.on("meeting:chat",n),t.on("meeting:reaction",i),t.on("meeting:hand",a),t.on("meeting:muted-all",s);const o=t=>{let{reason:n}=t;"passcode"===n&&(L(!0),e({title:"Passcode required or incorrect",status:"warning"}))},l=t=>{let{userId:n}=t;n===S&&(e({title:"You were denied by host",status:"warning"}),Ne())};t.on("meeting:denied",l);const u=()=>{U(!0),e({title:"Waiting for host to admit you",status:"info"})},d=e=>{G(e||[])},p=e=>{let{userId:t}=e;t===S&&U(!1)},f=t=>{let{userId:n}=t;var r;n===S&&(null===x||void 0===x||null===(r=x.getAudioTracks())||void 0===r||r.forEach((e=>e.enabled=!1)),T(!1),e({title:"Host muted you",status:"info"}))},m=t=>{let{userId:n}=t;n===S&&(e({title:"You were removed by host",status:"error"}),Ne())},g=e=>W((t=>(0,c.A)((0,c.A)({},t),e)));t.on("meeting:join-denied",o),t.on("meeting:waiting-you",u),t.on("meeting:waiting",d),t.on("meeting:admitted",p),t.on("meeting:muted",f),t.on("meeting:kicked",m),t.on("meeting:config-updated",g);const v=()=>{e({title:"Meeting ended by host",status:"info"}),Ne()};return t.on("meeting:ended",v),()=>{t.off("meeting:participants",r),t.off("meeting:chat",n),t.off("meeting:reaction",i),t.off("meeting:hand",a),t.off("meeting:muted-all",s),t.off("meeting:join-denied",o),t.off("meeting:waiting-you",u),t.off("meeting:waiting",d),t.off("meeting:admitted",p),t.off("meeting:muted",f),t.off("meeting:kicked",m),t.off("meeting:config-updated",g),t.off("meeting:denied",l),t.off("meeting:ended",v)}}),[t,x,S,e]);const Te=()=>{const e=p.trim();e&&i&&(t.emit("meeting:chat",{roomId:i,userId:S,text:e}),f(""))},ke=(0,r.useMemo)((()=>({iceServers:[{urls:["stun:stun.l.google.com:19302"]}]})),[]),Pe=e=>{if(_.current.has(e))return _.current.get(e);const n=new RTCPeerConnection(ke);return null===x||void 0===x||x.getTracks().forEach((e=>n.addTrack(e,x))),n.ontrack=t=>{const[n]=t.streams;if(n){A.current.set(e,n);try{const t=new(window.AudioContext||window.webkitAudioContext),r=t.createMediaStreamSource(n),i=t.createAnalyser();i.fftSize=256,r.connect(i),J.current.set(e,i)}catch(r){}C((e=>e.slice()))}},n.onicecandidate=n=>{n.candidate&&(null===t||void 0===t||t.emit("meeting:ice",{roomId:i,toUserId:e,fromUserId:S,candidate:n.candidate}))},_.current.set(e,n),n};(0,r.useEffect)((()=>{if(!s||!i||!t)return;E.filter((e=>e.userId!==S)).forEach((async e=>{const n=e.userId;if(!_.current.has(n))if(S<n){const e=Pe(n);try{const r=await e.createOffer();await e.setLocalDescription(r),t.emit("meeting:offer",{roomId:i,toUserId:n,fromUserId:S,sdp:r})}catch(r){}}else Pe(n)}))}),[E,s,i,t,S,x]),(0,r.useEffect)((()=>{if(!t)return;const e=async e=>{let{toUserId:n,fromUserId:r,sdp:a}=e;if(n!==S)return;const s=Pe(r);try{await s.setRemoteDescription(new RTCSessionDescription(a)),0===s.getSenders().length&&x&&x.getTracks().forEach((e=>s.addTrack(e,x)));const e=await s.createAnswer();await s.setLocalDescription(e),t.emit("meeting:answer",{roomId:i,toUserId:r,fromUserId:S,sdp:e})}catch(o){}},n=async e=>{let{toUserId:t,fromUserId:n,sdp:r}=e;if(t!==S)return;const i=_.current.get(n);if(i)try{await i.setRemoteDescription(new RTCSessionDescription(r))}catch(a){}},r=async e=>{let{toUserId:t,fromUserId:n,candidate:r}=e;if(t!==S)return;const i=_.current.get(n);if(i)try{await i.addIceCandidate(new RTCIceCandidate(r))}catch(a){}};t.on("meeting:offer",e),t.on("meeting:answer",n),t.on("meeting:ice",r);const a=e=>{let{userId:t,text:n}=e;const r={text:n,ts:Date.now()};ee((e=>(0,c.A)((0,c.A)({},e),{},{[t]:r}))),h((e=>[...e,{userId:t,text:"[cc] ".concat(n)}]))};t.on("meeting:caption",a);const s=e=>{let{polls:t}=e;le(t||[])};t.on("meeting:polls",s);const o=e=>{let{userId:t}=e;return fe(t||null)},l=e=>{let{userId:t,on:n}=e;return ge((e=>{const r=new Set(e);return n?r.add(t):r.delete(t),Array.from(r)}))},u=e=>{let{list:t}=e;return ge(Array.isArray(t)?t:[])};return t.on("meeting:spotlight",o),t.on("meeting:recording",l),t.on("meeting:recording-list",u),()=>{t.off("meeting:offer",e),t.off("meeting:answer",n),t.off("meeting:ice",r),t.off("meeting:caption",a),t.off("meeting:polls",s),t.off("meeting:spotlight",o),t.off("meeting:recording",l),t.off("meeting:recording-list",u)}}),[t,S,x,i]),(0,r.useEffect)((()=>{if(!t)return;const e=()=>{s&&i&&t.emit("meeting:join",{roomId:i,userId:S,name:l||"Guest",passcode:O||void 0})};return t.on("connect",e),()=>t.off("connect",e)}),[t,s,i,S,l,O]);const Re=()=>{var e;const t=!M;T(t),null===x||void 0===x||null===(e=x.getAudioTracks())||void 0===e||e.forEach((e=>e.enabled=t))},De=r.useCallback((()=>{try{const e=w.current;if(!e)return;x&&e.srcObject!==x&&(e.srcObject=x),"function"===typeof e.play&&e.play().catch((()=>{}))}catch(e){}}),[x]);(0,r.useEffect)((()=>{if(_e)return;const e=requestAnimationFrame((()=>{try{De()}catch(e){}})),t=setTimeout((()=>{try{De()}catch(e){}}),50);return()=>{try{cancelAnimationFrame(e),clearTimeout(t)}catch(n){}}}),[_e,xe,we,pe,x,De]);const Ie=r.useCallback((e=>{if(e)try{e.onunmute=()=>{De()},e.onended=()=>{}}catch(t){}}),[De]),Be=async()=>{const t=!k;P(t);try{var n;const e=null===x||void 0===x||null===(n=x.getVideoTracks)||void 0===n?void 0:n.call(x)[0];if(!t)return void(e&&(e.enabled=!1));if(e&&"live"===e.readyState)e.enabled=!0,Ie(e),De();else{const e=(await navigator.mediaDevices.getUserMedia({video:!v.cam||{deviceId:{exact:v.cam}}})).getVideoTracks()[0];x&&(x.getVideoTracks().forEach((e=>{try{e.stop()}catch(t){}x.removeTrack(e)})),x.addTrack(e)),_.current.forEach((t=>{const n=t.getSenders().find((e=>{var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));n&&n.replaceTrack(e)})),Ie(e),De()}}catch(r){e({title:"Unable to access camera",status:"error"})}},je=async()=>{try{const e=(await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0})).getVideoTracks()[0];R.current=e,_.current.forEach((t=>{const n=t.getSenders().find((e=>e.track&&"video"===e.track.kind));n&&n.replaceTrack(e)})),e.onended=()=>Fe()}catch(e){}},Fe=()=>{(async()=>{try{var e;let t=(null===x||void 0===x||null===(e=x.getVideoTracks)||void 0===e?void 0:e.call(x)[0])||null;if(!t||"live"!==t.readyState){const e=await navigator.mediaDevices.getUserMedia({video:!v.cam||{deviceId:{exact:v.cam}}});t=e.getVideoTracks()[0],x&&(x.getVideoTracks().forEach((e=>{try{e.stop()}catch(t){}x.removeTrack(e)})),x.addTrack(t))}_.current.forEach((e=>{const n=e.getSenders().find((e=>e.track&&"video"===e.track.kind));n&&t&&n.replaceTrack(t)})),Ie(t),De()}catch(t){}})();try{var e;null===(e=R.current)||void 0===e||e.stop()}catch(t){}R.current=null},Le=e=>{i&&(null===t||void 0===t||t.emit("meeting:reaction",{roomId:i,userId:S,emoji:e}))},Oe=()=>{const e=!B[S];null===t||void 0===t||t.emit("meeting:hand",{roomId:i,userId:S,up:e}),j((t=>(0,c.A)((0,c.A)({},t),{},{[S]:e})))},Ne=(0,r.useCallback)((()=>{var e;try{null===t||void 0===t||t.emit("meeting:leave",{roomId:i,userId:S})}catch(n){}_.current.forEach((e=>e.close())),_.current.clear(),A.current.clear(),null===x||void 0===x||null===(e=x.getTracks())||void 0===e||e.forEach((e=>e.stop())),o(!1),C([]),U(!1),G([])}),[t,i,S,x]);(0,r.useEffect)((()=>{let e;try{if(x){const e=new(window.AudioContext||window.webkitAudioContext),t=e.createMediaStreamSource(x),n=e.createAnalyser();n.fftSize=256,t.connect(n),te.current={ctx:e,analyser:n}}}catch(t){}return e=setInterval((()=>{const e={};J.current.forEach(((t,n)=>{try{const r=new Uint8Array(t.frequencyBinCount);t.getByteFrequencyData(r),e[n]=r.reduce(((e,t)=>e+t),0)/r.length}catch(r){}}));try{if(te.current){const{analyser:t}=te.current,n=new Uint8Array(t.frequencyBinCount);t.getByteFrequencyData(n),e[S]=n.reduce(((e,t)=>e+t),0)/n.length}}catch(t){}X(e)}),100),()=>{try{var t,n,r;clearInterval(e),null===(t=te.current)||void 0===t||null===(n=t.ctx)||void 0===n||null===(r=n.close)||void 0===r||r.call(n),te.current=null}catch(i){}}}),[x,S]);const ze=(0,r.useMemo)((()=>{var e;const t=[{userId:S,me:!0},...E.filter((e=>e.userId!==S))].sort(((e,t)=>(q[t.userId]||0)-(q[e.userId]||0))),n=t.length;return{sorted:t,cols:n<=1?1:n<=4?2:n<=9?3:4,activeId:(null===(e=t[0])||void 0===e?void 0:e.userId)||null}}),[E,q,S]),Ue=(0,r.useMemo)((()=>{const e=new Set(E.map((e=>e.userId)));return e.add(S),e.size}),[E,S]),He=async(t,n)=>{try{if("video"===t){const e=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:n}}})).getVideoTracks()[0];x.getVideoTracks().forEach((e=>e.stop())),x.addTrack(e),_.current.forEach((t=>{const n=t.getSenders().find((e=>{var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));n&&n.replaceTrack(e)})),P(!0)}else if("audio"===t){const e=(await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:n},noiseSuppression:ie.noiseSuppression,echoCancellation:ie.echoCancellation,autoGainControl:ie.autoGainControl}})).getAudioTracks()[0];x.getAudioTracks().forEach((e=>e.stop())),x.addTrack(e),_.current.forEach((t=>{const n=t.getSenders().find((e=>{var t;return"audio"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));n&&n.replaceTrack(e)})),T(!0)}}catch(r){e({title:"Device switch failed",status:"error"})}};(0,r.useEffect)((()=>{const e=e=>{if(!s)return;if(e.repeat)return;const t=e.target&&e.target.tagName||"";if("INPUT"!==t&&"TEXTAREA"!==t&&"Space"===e.code){var n;if(se.current.prev=M,se.current.active=!0,!M)T(!0),null===x||void 0===x||null===(n=x.getAudioTracks())||void 0===n||n.forEach((e=>e.enabled=!0));e.preventDefault()}},t=e=>{if(s&&"Space"===e.code&&se.current.active){var t;if(se.current.active=!1,!se.current.prev)T(!1),null===x||void 0===x||null===(t=x.getAudioTracks())||void 0===t||t.forEach((e=>e.enabled=!1));e.preventDefault()}};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[s,M,x]);const Ge=(0,r.useRef)({});(0,r.useEffect)((()=>{Ge.current={toggleMic:Re,toggleCam:Be,toggleHand:Oe,startRecording:We,stopRecording:qe,shareScreen:je,stopShare:Fe,toggleLayout:()=>be((e=>"grid"===e?"speaker":"grid")),togglePin:()=>Se((e=>e?null:pe||ze.activeId||S))}})),(0,r.useEffect)((()=>{const e=e=>{if(!s)return;const t=e.target&&e.target.tagName||"";if("INPUT"===t||"TEXTAREA"===t)return;const n=e.key.toLowerCase(),r=Ge.current;var i;if("m"===n)null===(i=r.toggleMic)||void 0===i||i.call(r);else if("v"===n){var a;null===(a=r.toggleCam)||void 0===a||a.call(r)}else if("h"===n){var o;null===(o=r.toggleHand)||void 0===o||o.call(r)}else if("c"===n)re((e=>!e));else if("r"===n){var l,c;Y?null===(l=r.stopRecording)||void 0===l||l.call(r):null===(c=r.startRecording)||void 0===c||c.call(r)}else if("s"===n){var u,d;R.current?null===(u=r.stopShare)||void 0===u||u.call(r):null===(d=r.shareScreen)||void 0===d||d.call(r)}else if("l"===n){var h;null===(h=r.toggleLayout)||void 0===h||h.call(r)}else if("p"===n){var p;null===(p=r.togglePin)||void 0===p||p.call(r)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[s,Y]),(0,r.useEffect)((()=>{const e=e=>{(s||Y)&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[s,Y]),(0,r.useEffect)((()=>{if(!s)return;const e=setInterval((async()=>{const e={};for(const[n,r]of _.current.entries())try{const t=await r.getStats();let i=0,a=0,s=0;t.forEach((e=>{"remote-inbound-rtp"===e.type&&"video"===e.kind&&("number"===typeof e.fractionLost&&(s=Math.max(s,e.fractionLost)),"number"===typeof e.jitter&&(a=Math.max(a,e.jitter))),"candidate-pair"===e.type&&"succeeded"===e.state&&e.currentRoundTripTime&&(i=Math.max(i,e.currentRoundTripTime))}));let o=4;i>.4?o-=2:i>.25&&(o-=1),a>.05&&(o-=1),s>.03?o-=1:s>.01&&(o-=.5),o=Math.max(0,Math.round(o)),e[n]=o}catch(t){}Ce((t=>(0,c.A)((0,c.A)({},t),e)))}),2e3);return()=>clearInterval(e)}),[s]);const Ve=e=>e>=4?"green":e>=3?"yellow":e>=2?"orange":"red",We=()=>{try{var n;const r=new MediaStream,a=null===x||void 0===x||null===(n=x.getVideoTracks())||void 0===n?void 0:n[0];a&&r.addTrack(a);const s=new(window.AudioContext||window.webkitAudioContext),o=s.createMediaStreamDestination();null!==x&&void 0!==x&&x.getAudioTracks().length&&s.createMediaStreamSource(x).connect(o),A.current.forEach((e=>{try{s.createMediaStreamSource(e).connect(o)}catch(t){}})),o.stream.getAudioTracks().forEach((e=>r.addTrack(e)));const l=new MediaRecorder(r,{mimeType:"video/webm;codecs=vp9,opus"});Q.current=[],l.ondataavailable=e=>{e.data.size>0&&Q.current.push(e.data)},l.onstop=()=>{const e=new Blob(Q.current,{type:"video/webm"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="meeting-".concat(i,".webm"),n.click()},l.start(),Z.current=l,K(!0),null===t||void 0===t||t.emit("meeting:recording",{roomId:i,userId:S,on:!0}),e({title:"Recording started",status:"info"})}catch(r){e({title:"Recording failed",status:"error"})}},qe=()=>{try{var n;null===(n=Z.current)||void 0===n||n.stop(),K(!1),null===t||void 0===t||t.emit("meeting:recording",{roomId:i,userId:S,on:!1}),e({title:"Recording saved",status:"success"})}catch(r){}},Xe=E.find((e=>e.userId===S)),Je="host"===(null===Xe||void 0===Xe?void 0:Xe.role),Ye=e=>{var t;return(null===(t=E.find((t=>t.userId===e)))||void 0===t?void 0:t.name)||e},Ke=pe?pe===S?"Me":Ye(pe):null,Ze=e=>null===t||void 0===t?void 0:t.emit("meeting:kick",{roomId:i,byUserId:S,userId:e}),Qe=e=>null===t||void 0===t?void 0:t.emit("meeting:mute",{roomId:i,byUserId:S,userId:e}),$e=e=>{var t,n;let{userId:i}=e;const a=(0,r.useRef)(null),[s,o]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=A.current.get(i)||null;a.current&&(a.current.srcObject=e);try{const t=!(!e||!e.getVideoTracks().some((e=>"live"===e.readyState&&!1!==e.enabled)));o(t)}catch(t){o(!1)}}),[i]);const l=E.find((e=>e.userId===i));return(0,ur.jsxs)(pr,{position:"relative",w:"100%",bg:"#000",borderRadius:"md",overflow:"hidden",style:{aspectRatio:"16 / 9"},children:[(0,ur.jsx)("video",{ref:a,autoPlay:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,ur.jsx)(pr,{position:"absolute",top:1,left:1,children:(0,ur.jsxs)(oo,{colorScheme:Ve(null!==(t=Ee[i])&&void 0!==t?t:4),children:[null!==(n=Ee[i])&&void 0!==n?n:4,"/4"]})}),!s&&(0,ur.jsx)(pr,{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",children:(0,ur.jsx)(pr,{bg:"gray.700",color:"white",borderRadius:"full",px:4,py:2,opacity:.9,children:(0,ur.jsx)(Jr,{children:(null===l||void 0===l?void 0:l.name)||i})})}),(0,ur.jsxs)(pr,{position:"absolute",bottom:1,left:1,children:[(0,ur.jsx)(oo,{children:(null===l||void 0===l?void 0:l.name)||i}),B[i]&&(0,ur.jsx)(oo,{colorScheme:"yellow",ml:2,children:"\u270b"})]})]})};return(0,ur.jsx)(pr,{p:3,children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Meetings"}),!s&&(0,ur.jsxs)(ex,{align:"stretch",spacing:3,borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(ao,{children:(0,ur.jsx)($y,{placeholder:"Your name",value:l,onChange:e=>u(e.target.value)})}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(di,{value:v.cam,onChange:e=>{const t=e.target.value;y((e=>(0,c.A)((0,c.A)({},e),{},{cam:t}))),s&&He("video",t)},children:m.cams.map((e=>(0,ur.jsx)("option",{value:e.deviceId,children:e.label||"Camera"},e.deviceId)))}),(0,ur.jsx)(di,{value:v.mic,onChange:e=>{const t=e.target.value;y((e=>(0,c.A)((0,c.A)({},e),{},{mic:t}))),s&&He("audio",t)},children:m.mics.map((e=>(0,ur.jsx)("option",{value:e.deviceId,children:e.label||"Microphone"},e.deviceId)))})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsxs)(zr,{size:"xs",variant:ie.noiseSuppression?"solid":"outline",onClick:()=>ae((e=>(0,c.A)((0,c.A)({},e),{},{noiseSuppression:!e.noiseSuppression}))),children:["Noise Suppression: ",ie.noiseSuppression?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"xs",variant:ie.echoCancellation?"solid":"outline",onClick:()=>ae((e=>(0,c.A)((0,c.A)({},e),{},{echoCancellation:!e.echoCancellation}))),children:["Echo Cancellation: ",ie.echoCancellation?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"xs",variant:ie.autoGainControl?"solid":"outline",onClick:()=>ae((e=>(0,c.A)((0,c.A)({},e),{},{autoGainControl:!e.autoGainControl}))),children:["Auto Gain: ",ie.autoGainControl?"On":"Off"]})]}),(0,ur.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",background:"#000",borderRadius:8,transform:ve?"scaleX(-1)":"none"}}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Room ID (e.g., team-standup)",value:i,onChange:e=>a(e.target.value)}),(0,ur.jsx)(zr,{colorScheme:"purple",onClick:()=>{i&&(t?(t.emit("meeting:join",{roomId:i,userId:S,name:l||"Guest",passcode:O||void 0}),o(!0)):e({title:"Socket unavailable",status:"error"}))},leftIcon:(0,ur.jsx)(uW,{}),children:"Join"}),(0,ur.jsx)(zr,{variant:"outline",onClick:async()=>{try{var t;const r=await fetch("".concat(n,"/meeting"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({title:"Meeting",lobby:!1,locked:!1})});if(!r.ok)throw new Error("Create failed");const i=await r.json(),s=i.roomId||i.roomid||i.room||i._id||Math.random().toString(36).slice(2,9);a(s),e({title:"Room created: ".concat(s),status:"success"});const o="".concat(window.location.origin,"/meet?room=").concat(encodeURIComponent(s));await(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText(o)),e({title:"Invite link copied",status:"info"})}catch(r){e({title:"Could not create room",status:"error"})}},children:"Create room"})]}),(0,ur.jsx)($y,{placeholder:"Passcode (if required)",value:O,onChange:e=>N(e.target.value),isInvalid:F}),(0,ur.jsxs)(zr,{size:"xs",variant:"outline",onClick:()=>ye((e=>!e)),children:["Mirror preview: ",ve?"On":"Off"]})]}),s&&(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsxs)(Jr,{children:["Room: ",i]}),V.locked&&(0,ur.jsx)(oo,{colorScheme:"orange",children:"Locked"}),V.lobby&&(0,ur.jsx)(oo,{colorScheme:"blue",children:"Lobby On"}),V.hasPasscode&&(0,ur.jsx)(oo,{colorScheme:"purple",children:"Passcode"}),me.length>0&&(0,ur.jsxs)(oo,{colorScheme:"red",children:["REC ",me.length]}),pe&&(0,ur.jsxs)(oo,{colorScheme:"green",children:["Spotlight: ",Ke]}),(0,ur.jsxs)(oo,{colorScheme:"purple",children:["Participants: ",Ue]}),R.current&&(0,ur.jsx)(oo,{colorScheme:"teal",children:"Sharing screen"})]}),s&&!x&&(0,ur.jsx)(pr,{borderWidth:"1px",borderRadius:"md",p:3,bg:"red.50",children:(0,ur.jsx)(Jr,{children:"Camera/Mic unavailable. Check browser permissions or device access."})}),z&&(0,ur.jsx)(pr,{borderWidth:"1px",borderRadius:"md",p:3,bg:"yellow.50",children:(0,ur.jsx)(Jr,{children:"You're in the waiting room. The host will let you in soon."})}),Je&&(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:2,children:"Host controls"}),(0,ur.jsxs)(ao,{spacing:2,mb:2,children:[(0,ur.jsxs)(zr,{size:"sm",onClick:()=>W((e=>(0,c.A)((0,c.A)({},e),{},{lobby:!e.lobby}))),variant:V.lobby?"solid":"outline",colorScheme:"blue",children:["Lobby: ",V.lobby?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"sm",onClick:()=>W((e=>(0,c.A)((0,c.A)({},e),{},{locked:!e.locked}))),variant:V.locked?"solid":"outline",colorScheme:"orange",children:["Lock: ",V.locked?"On":"Off"]}),(0,ur.jsx)($y,{size:"sm",placeholder:"Set passcode",value:V.hasPasscode?O:"",onChange:e=>{N(e.target.value),W((e=>(0,c.A)((0,c.A)({},e),{},{hasPasscode:!0})))},width:"200px"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>W((e=>(0,c.A)((0,c.A)({},e),{},{hasPasscode:!1}))),variant:"ghost",children:"Clear passcode"}),(0,ur.jsxs)(zr,{size:"sm",onClick:()=>W((e=>(0,c.A)((0,c.A)({},e),{},{muteOnJoin:!e.muteOnJoin}))),variant:V.muteOnJoin?"solid":"outline",colorScheme:"pink",children:["Mute on join: ",V.muteOnJoin?"On":"Off"]}),(0,ur.jsx)(bD,{orientation:"vertical"}),(0,ur.jsxs)(zr,{size:"sm",onClick:()=>W((e=>(0,c.A)((0,c.A)({},e),{},{allowChat:!e.allowChat}))),variant:V.allowChat?"solid":"outline",children:["Chat: ",V.allowChat?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"sm",onClick:()=>W((e=>(0,c.A)((0,c.A)({},e),{},{allowReactions:!e.allowReactions}))),variant:V.allowReactions?"solid":"outline",children:["Reactions: ",V.allowReactions?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"sm",onClick:()=>W((e=>(0,c.A)((0,c.A)({},e),{},{allowScreenShare:!e.allowScreenShare}))),variant:V.allowScreenShare?"solid":"outline",children:["Screen share: ",V.allowScreenShare?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"sm",onClick:()=>W((e=>(0,c.A)((0,c.A)({},e),{},{allowLocalRecording:!e.allowLocalRecording}))),variant:V.allowLocalRecording?"solid":"outline",children:["Local Rec: ",V.allowLocalRecording?"On":"Off"]}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"green",onClick:()=>{null===t||void 0===t||t.emit("meeting:config",{roomId:i,byUserId:S,lobby:V.lobby,locked:V.locked,passcode:V.hasPasscode&&O||"",muteOnJoin:V.muteOnJoin,allowChat:V.allowChat,allowReactions:V.allowReactions,allowScreenShare:V.allowScreenShare,allowLocalRecording:V.allowLocalRecording}),e({title:"Meeting settings updated",status:"success"})},children:"Apply"}),(0,ur.jsx)(bD,{orientation:"vertical"}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>null===t||void 0===t?void 0:t.emit("meeting:mute-all",{roomId:i,byUserId:S}),children:"Mute all"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>null===t||void 0===t?void 0:t.emit("meeting:admit-all",{roomId:i,byUserId:S}),children:"Admit all"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>null===t||void 0===t?void 0:t.emit("meeting:lower-all-hands",{roomId:i,byUserId:S}),children:"Lower all hands"}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"red",onClick:()=>null===t||void 0===t?void 0:t.emit("meeting:end",{roomId:i,byUserId:S}),children:"End meeting"})]}),(0,ur.jsxs)(Jr,{fontWeight:"semibold",children:["Waiting room (",H.length,")"]}),(0,ur.jsx)(ao,{wrap:"wrap",children:H.map((e=>(0,ur.jsxs)(ao,{spacing:2,borderWidth:"1px",borderRadius:"md",p:1,children:[(0,ur.jsx)(Jr,{children:e.name||e.userId}),(0,ur.jsx)(zr,{size:"xs",onClick:()=>(e=>null===t||void 0===t?void 0:t.emit("meeting:admit",{roomId:i,byUserId:S,userId:e}))(e.userId),children:"Admit"}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",colorScheme:"red",onClick:()=>(e=>null===t||void 0===t?void 0:t.emit("meeting:deny",{roomId:i,byUserId:S,userId:e}))(e.userId),children:"Deny"})]},e.userId)))})]}),(0,ur.jsxs)(ao,{spacing:3,align:"start",children:[(0,ur.jsxs)(pr,{flex:"2",borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(ao,{spacing:2,mb:2,wrap:"wrap",children:[(0,ur.jsx)(zr,{size:"sm",onClick:Re,children:M?"Mute":"Unmute"}),(0,ur.jsx)(zr,{size:"sm",onClick:Be,children:k?"Stop Cam":"Start Cam"}),(()=>{const e=!V.allowScreenShare&&!(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role));return(0,ur.jsx)(pr,{display:"inline-block",children:(0,ur.jsx)($R,{label:"Disabled by host",isDisabled:!e,shouldWrapChildren:!0,children:(0,ur.jsx)(zr,{size:"sm",onClick:je,isDisabled:e,children:"Share"})})})})(),(0,ur.jsx)(zr,{size:"sm",onClick:Fe,variant:"outline",isDisabled:!R.current,children:"Stop Share"}),(0,ur.jsx)(zr,{size:"sm",onClick:Oe,children:B[S]?"Lower Hand":"Raise Hand"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>{i&&window.open("/paint?room=".concat(encodeURIComponent(i)),"_blank")},children:"Whiteboard"}),(()=>{const e=!V.allowReactions&&!(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role));return(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(pr,{display:"inline-block",children:(0,ur.jsx)($R,{label:"Disabled by host",isDisabled:!e,shouldWrapChildren:!0,children:(0,ur.jsx)(zr,{size:"sm",onClick:()=>Le("\ud83d\udc4d"),isDisabled:e,children:"\ud83d\udc4d"})})}),(0,ur.jsx)(pr,{display:"inline-block",children:(0,ur.jsx)($R,{label:"Disabled by host",isDisabled:!e,shouldWrapChildren:!0,children:(0,ur.jsx)(zr,{size:"sm",onClick:()=>Le("\u2764\ufe0f"),isDisabled:e,children:"\u2764\ufe0f"})})}),(0,ur.jsx)(pr,{display:"inline-block",children:(0,ur.jsx)($R,{label:"Disabled by host",isDisabled:!e,shouldWrapChildren:!0,children:(0,ur.jsx)(zr,{size:"sm",onClick:()=>Le("\ud83d\ude02"),isDisabled:e,children:"\ud83d\ude02"})})})]})})(),(0,ur.jsx)(zr,{size:"sm",onClick:()=>{const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n)return void e({title:"Captions not supported in this browser",status:"warning"});const r=new n;r.continuous=!0,r.interimResults=!0,r.lang="en-US",r.onresult=e=>{const n=e.results[e.results.length-1][0].transcript;null===t||void 0===t||t.emit("meeting:caption",{roomId:i,userId:S,text:n})},r.onerror=()=>{},r.start(),e({title:"Captions started (local)",status:"info"})},variant:"outline",children:"Captions"}),(0,ur.jsxs)(zr,{size:"sm",onClick:()=>re((e=>!e)),variant:ne?"solid":"outline",children:["CC: ",ne?"On":"Off"]}),Y?(0,ur.jsx)(zr,{size:"sm",onClick:qe,colorScheme:"red",children:"Stop"}):(()=>{const e=!V.allowLocalRecording&&!(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role));return(0,ur.jsx)(pr,{display:"inline-block",children:(0,ur.jsx)($R,{label:"Disabled by host",isDisabled:!e,shouldWrapChildren:!0,children:(0,ur.jsx)(zr,{size:"sm",onClick:We,variant:"outline",isDisabled:e,children:"Record"})})})})(),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{var t;const n="".concat(window.location.origin,"/meet?room=").concat(encodeURIComponent(i)).concat(V.hasPasscode?"&code=".concat(encodeURIComponent(O||"")):"");await(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText(n)),e({title:"Invite link copied",status:"success"})}catch(n){e({title:"Copy failed",status:"error"})}},variant:"outline",children:"Copy invite"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>{const e=pe?null:ze.activeId;fe(e),null===t||void 0===t||t.emit("meeting:spotlight-set",{roomId:i,byUserId:S,userId:e})},variant:pe?"solid":"outline",children:"Spotlight"}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{for(const[e,r]of _.current.entries())try{const n=await r.createOffer({iceRestart:!0});await r.setLocalDescription(n),null===t||void 0===t||t.emit("meeting:offer",{roomId:i,toUserId:e,fromUserId:S,sdp:n})}catch(n){}e({title:"ICE restart sent",status:"info"})}catch(r){}},variant:"outline",children:"Restart ICE"}),(0,ur.jsxs)(zr,{size:"sm",variant:"outline",onClick:()=>be((e=>"grid"===e?"speaker":"grid")),children:["Layout: ","grid"===xe?"Grid":"Speaker"]}),(0,ur.jsxs)(zr,{size:"sm",variant:"outline",onClick:()=>Se((e=>e?null:pe||ze.activeId||S)),children:["Pin: ",we?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"sm",variant:"outline",onClick:()=>ye((e=>!e)),children:["Mirror: ",ve?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"sm",variant:"outline",onClick:()=>Ae((e=>!e)),children:["Self view: ",_e?"Off":"On"]}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"red",onClick:Ne,children:"Leave"})]}),(0,ur.jsxs)(ao,{align:"start",spacing:2,children:["grid"===xe?(0,ur.jsxs)(pr,{flex:"3",display:"grid",gridTemplateColumns:"repeat(".concat(pe?1:ze.cols,", minmax(240px, 1fr))"),gap:"8px",children:[(pe?[{userId:pe,me:pe===S}]:ze.sorted).filter(Boolean).map((e=>{var n,r,a,s,o;return e.me?!_e&&(0,ur.jsxs)(pr,{position:"relative",w:"100%",bg:"#000",borderRadius:"md",overflow:"hidden",boxShadow:q[S]>25?"0 0 0 3px #48BB78":"none",style:{aspectRatio:"16 / 9"},children:[(0,ur.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:ve?"scaleX(-1)":"none"}}),(0,ur.jsx)(ao,{position:"absolute",top:1,right:1,spacing:1,children:(0,ur.jsx)(zr,{size:"xs",variant:we===S?"solid":"outline",onClick:()=>Se((e=>e===S?null:S)),children:"Pin"})}),(!x||!k||!("live"===(null===(n=x.getVideoTracks)||void 0===n||null===(r=n.call(x)[0])||void 0===r?void 0:r.readyState)&&!1!==(null===(a=x.getVideoTracks)||void 0===a||null===(s=a.call(x)[0])||void 0===s?void 0:s.enabled)))&&(0,ur.jsx)(pr,{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",children:(0,ur.jsx)(pr,{bg:"gray.700",color:"white",borderRadius:"full",px:4,py:2,opacity:.9,children:(0,ur.jsx)(Jr,{children:"Camera off"})})}),(0,ur.jsxs)(pr,{position:"absolute",bottom:1,left:1,children:[(0,ur.jsxs)(oo,{children:["Me",B[S]&&" \u270b"]}),!M&&(0,ur.jsx)(oo,{ml:2,colorScheme:"red",children:"Muted"}),me.includes(S)&&(0,ur.jsx)(oo,{ml:2,colorScheme:"red",children:"REC"})]}),(0,ur.jsx)(pr,{position:"absolute",bottom:0,left:0,right:0,height:"2px",bg:"blackAlpha.500",children:(0,ur.jsx)(pr,{height:"100%",width:"".concat(Math.min(100,Math.max(0,Math.round((q[S]||0)/60*100))),"%"),bg:"#48BB78"})}),ne&&$[S]&&Date.now()-$[S].ts<5e3&&(0,ur.jsx)(pr,{position:"absolute",bottom:"8",left:"2",right:"2",bg:"blackAlpha.700",color:"white",borderRadius:"md",p:1,fontSize:"sm",children:$[S].text})]},"me"):(0,ur.jsxs)(pr,{position:"relative",boxShadow:q[e.userId]>25?"0 0 0 3px #48BB78":"none",children:[(0,ur.jsx)($e,{userId:e.userId}),(0,ur.jsx)(ao,{position:"absolute",top:1,right:1,spacing:1,children:(0,ur.jsx)(zr,{size:"xs",variant:we===e.userId?"solid":"outline",onClick:()=>Se((t=>t===e.userId?null:e.userId)),children:"Pin"})}),(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role))&&(0,ur.jsxs)(ao,{position:"absolute",top:1,right:1,spacing:1,children:[(0,ur.jsx)(zr,{size:"xs",onClick:()=>Qe(e.userId),children:"Mute"}),(0,ur.jsx)(zr,{size:"xs",colorScheme:"red",onClick:()=>Ze(e.userId),children:"Kick"}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:()=>{var n,r,a;return r=e.userId,a="cohost"===(null===(n=E.find((t=>t.userId===e.userId)))||void 0===n?void 0:n.role)?"guest":"cohost",null===t||void 0===t?void 0:t.emit("meeting:role",{roomId:i,byUserId:S,userId:r,role:a})},children:"cohost"===(null===(o=E.find((t=>t.userId===e.userId)))||void 0===o?void 0:o.role)?"Demote":"Make Co-host"})]}),(0,ur.jsx)(pr,{position:"absolute",bottom:1,left:1,children:me.includes(e.userId)&&(0,ur.jsx)(oo,{colorScheme:"red",children:"REC"})}),(0,ur.jsx)(pr,{position:"absolute",bottom:0,left:0,right:0,height:"2px",bg:"blackAlpha.500",children:(0,ur.jsx)(pr,{height:"100%",width:"".concat(Math.min(100,Math.max(0,Math.round((q[e.userId]||0)/60*100))),"%"),bg:"#48BB78"})}),ne&&$[e.userId]&&Date.now()-$[e.userId].ts<5e3&&(0,ur.jsx)(pr,{position:"absolute",bottom:"2",left:"2",right:"2",bg:"blackAlpha.700",color:"white",borderRadius:"md",p:1,fontSize:"sm",children:$[e.userId].text})]},e.userId)})),0===E.filter((e=>e.userId!==S)).length&&(0,ur.jsx)(pr,{gridColumn:"1 / -1",p:4,borderRadius:"md",bg:"blackAlpha.400",color:"white",textAlign:"center",children:(0,ur.jsx)(Jr,{children:"Waiting for others to join\u2026 Share the invite link!"})})]}):((e,t,n,r)=>{const i=we||pe||ze.activeId||S,a=[{userId:S,me:!0},...E.filter((e=>e.userId!==S))].filter((e=>e.userId!==i));return(0,ur.jsxs)(ex,{align:"stretch",spacing:2,flex:"3",children:[(0,ur.jsx)(pr,{position:"relative",children:i===S?(0,ur.jsxs)(pr,{position:"relative",w:"100%",bg:"#000",borderRadius:"md",overflow:"hidden",style:{aspectRatio:"16 / 9"},boxShadow:q[S]>25?"0 0 0 3px #48BB78":"none",children:[(0,ur.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:ve?"scaleX(-1)":"none"}}),(!x||!k||!("live"===(null===(e=x.getVideoTracks)||void 0===e||null===(t=e.call(x)[0])||void 0===t?void 0:t.readyState)&&!1!==(null===(n=x.getVideoTracks)||void 0===n||null===(r=n.call(x)[0])||void 0===r?void 0:r.enabled)))&&(0,ur.jsx)(pr,{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",children:(0,ur.jsx)(pr,{bg:"gray.700",color:"white",borderRadius:"full",px:4,py:2,opacity:.9,children:(0,ur.jsx)(Jr,{children:"Camera off"})})}),(0,ur.jsx)(pr,{position:"absolute",bottom:1,left:1,children:(0,ur.jsx)(oo,{children:"Me"})})]},"me-main"):(0,ur.jsx)(pr,{position:"relative",borderRadius:"md",overflow:"hidden",boxShadow:q[i]>25?"0 0 0 3px #48BB78":"none",children:(0,ur.jsx)($e,{userId:i})},i)}),(0,ur.jsx)(ao,{spacing:2,overflowX:"auto",children:a.map((e=>e.me?!_e&&(0,ur.jsxs)(pr,{position:"relative",width:"160px",bg:"#000",borderRadius:"md",overflow:"hidden",style:{aspectRatio:"16 / 9"},children:[(0,ur.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:ve?"scaleX(-1)":"none"}}),(0,ur.jsx)(pr,{position:"absolute",bottom:1,left:1,children:(0,ur.jsx)(oo,{children:"Me"})}),(0,ur.jsx)(ao,{position:"absolute",top:1,right:1,children:(0,ur.jsx)(zr,{size:"xs",variant:we===S?"solid":"outline",onClick:()=>Se((e=>e===S?null:S)),children:"Pin"})})]},"me-thumb"):(0,ur.jsxs)(pr,{position:"relative",width:"160px",borderRadius:"md",overflow:"hidden",children:[(0,ur.jsx)($e,{userId:e.userId}),(0,ur.jsx)(ao,{position:"absolute",top:1,right:1,children:(0,ur.jsx)(zr,{size:"xs",variant:we===e.userId?"solid":"outline",onClick:()=>Se((t=>t===e.userId?null:e.userId)),children:"Pin"})})]},e.userId)))}),0===a.length&&(0,ur.jsx)(pr,{p:3,borderRadius:"md",bg:"blackAlpha.400",color:"white",textAlign:"center",children:(0,ur.jsx)(Jr,{children:"Waiting for others to join\u2026"})})]})})(),(0,ur.jsx)(pr,{flex:"1",children:D.slice(-8).map(((e,t)=>(0,ur.jsx)(Jr,{fontSize:"3xl",children:e.emoji},t)))})]})]}),(0,ur.jsx)(pr,{flex:"1",borderWidth:"1px",borderRadius:"md",p:2,children:(0,ur.jsxs)(nS,{size:"sm",variant:"enclosed",children:[(0,ur.jsxs)(_R,{children:[(0,ur.jsx)(AR,{children:"Participants"}),(0,ur.jsx)(AR,{children:"Chat"}),(0,ur.jsx)(AR,{children:"Polls"})]}),(0,ur.jsxs)(rS,{children:[(0,ur.jsxs)(iS,{children:[(0,ur.jsxs)(ao,{justify:"space-between",mb:2,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:"Participants"}),(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role))&&(0,ur.jsx)(ao,{children:(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:()=>{fe(null),null===t||void 0===t||t.emit("meeting:spotlight-set",{roomId:i,byUserId:S,userId:null})},children:"Clear Spotlight"})})]}),(0,ur.jsx)(ex,{align:"stretch",spacing:2,maxH:"40vh",overflowY:"auto",children:[{userId:S,name:"Me",role:(null===Xe||void 0===Xe?void 0:Xe.role)||"guest"},...E.filter((e=>e.userId!==S))].map((e=>{var n,r;return(0,ur.jsxs)(ao,{justify:"space-between",borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{colorScheme:e.userId===ze.activeId?"green":"gray",children:"\u25cf"}),e.userId!==S&&(0,ur.jsx)(oo,{colorScheme:Ve(null!==(n=Ee[e.userId])&&void 0!==n?n:4),title:"Network: ".concat(null!==(r=Ee[e.userId])&&void 0!==r?r:4,"/4"),children:"\u25cf"}),(0,ur.jsx)(Jr,{children:Ye(e.userId)}),e.role&&(0,ur.jsx)(oo,{children:e.role})]}),Je&&e.userId!==S&&(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"xs",onClick:()=>Qe(e.userId),children:"Mute"}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",colorScheme:"red",onClick:()=>Ze(e.userId),children:"Kick"}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:()=>null===t||void 0===t?void 0:t.emit("meeting:transfer-host",{roomId:i,byUserId:S,userId:e.userId}),children:"Make Host"}),(0,ur.jsx)(zr,{size:"xs",variant:"outline",onClick:()=>null===t||void 0===t?void 0:t.emit("meeting:role",{roomId:i,byUserId:S,userId:e.userId,role:"cohost"===e.role?"guest":"cohost"}),children:"cohost"===e.role?"Demote":"Make Co-host"}),(0,ur.jsx)(zr,{size:"xs",variant:pe===e.userId?"solid":"outline",onClick:()=>{fe(e.userId),null===t||void 0===t||t.emit("meeting:spotlight-set",{roomId:i,byUserId:S,userId:e.userId})},children:"Spotlight"})]}),e.userId===S&&(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role))&&(0,ur.jsx)(ao,{children:(0,ur.jsx)(zr,{size:"xs",variant:pe===S?"solid":"outline",onClick:()=>{fe(S),null===t||void 0===t||t.emit("meeting:spotlight-set",{roomId:i,byUserId:S,userId:S})},children:"Spotlight me"})})]},e.userId)}))}),(0,ur.jsx)(bD,{my:2}),(0,ur.jsx)(Jr,{fontSize:"sm",mb:1,children:"Speaker output"}),(0,ur.jsx)(di,{value:v.speaker,onChange:async e=>{const t=e.target.value;y((e=>(0,c.A)((0,c.A)({},e),{},{speaker:t})));try{document.querySelectorAll("video").forEach((e=>{"function"===typeof e.setSinkId&&e.setSinkId(t)}))}catch(n){}},children:m.speakers.map((e=>(0,ur.jsx)("option",{value:e.deviceId,children:e.label||"Speaker"},e.deviceId)))})]}),(0,ur.jsxs)(iS,{children:[(0,ur.jsxs)(Jr,{fontWeight:"bold",mb:2,children:["Chat ",!V.allowChat&&!(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role))&&(0,ur.jsx)(oo,{ml:2,children:"Disabled by host"})]}),(0,ur.jsx)(ex,{align:"stretch",maxH:"40vh",overflowY:"auto",borderWidth:"1px",borderRadius:"md",p:2,children:d.map(((e,t)=>(0,ur.jsxs)(Jr,{fontSize:"sm",children:[(0,ur.jsxs)("b",{children:[Ye(e.userId),":"]})," ",e.text]},t)))}),(0,ur.jsx)(ao,{mt:2,children:(()=>{const e=!V.allowChat&&!(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role));return(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(pr,{flex:"1",display:"inline-block",children:(0,ur.jsx)($R,{label:"Disabled by host",isDisabled:!e,shouldWrapChildren:!0,children:(0,ur.jsx)($y,{placeholder:"Type message",value:p,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&Te()},isDisabled:e})})}),(0,ur.jsx)(pr,{display:"inline-block",children:(0,ur.jsx)($R,{label:"Disabled by host",isDisabled:!e,shouldWrapChildren:!0,children:(0,ur.jsx)(zr,{onClick:Te,isDisabled:e,children:"Send"})})})]})})()})]}),(0,ur.jsx)(iS,{children:(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role))&&(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",mb:1,children:"Create poll"}),(0,ur.jsx)($y,{placeholder:"Question",value:ce,onChange:e=>ue(e.target.value),mb:2}),de.map(((e,t)=>(0,ur.jsx)($y,{placeholder:"Option ".concat(t+1),value:e,onChange:e=>he((n=>{const r=[...n];return r[t]=e.target.value,r})),mb:1},t))),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>he((e=>[...e,""])),isDisabled:de.length>=8,children:"Add option"}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"green",onClick:()=>{const e=de.filter((e=>e.trim()));!ce.trim()||e.length<2||(null===t||void 0===t||t.emit("meeting:poll-create",{roomId:i,byUserId:S,question:ce.trim(),options:e}),ue(""),he(["",""]))},children:"Create"})]})]}),(0,ur.jsx)(ex,{align:"stretch",spacing:2,maxH:"40vh",overflowY:"auto",children:oe.map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:e.question}),(0,ur.jsx)(ex,{align:"stretch",mt:2,children:e.options.map(((n,r)=>(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>null===t||void 0===t?void 0:t.emit("meeting:poll-vote",{roomId:i,userId:S,pollId:e.id,option:r}),isDisabled:e.closed,children:n.text}),(0,ur.jsx)(oo,{children:n.votes})]},r)))}),(Je||"cohost"===(null===Xe||void 0===Xe?void 0:Xe.role))&&!e.closed&&(0,ur.jsx)(zr,{size:"xs",mt:2,onClick:()=>null===t||void 0===t?void 0:t.emit("meeting:poll-close",{roomId:i,byUserId:S,pollId:e.id}),children:"Close poll"})]},e.id)))})]})})]})]})})]})]})]})})}_r({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}}),_r({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});var hW=_r({"0%":{left:"-40%"},"100%":{left:"100%"}}),pW=_r({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});const fW=["min","max","value","isIndeterminate","role"],mW=["value","min","max","hasStripe","isAnimated","children","borderRadius","isIndeterminate","aria-label","aria-labelledby","aria-valuetext","title","role"];var[gW,vW]=gr({name:"ProgressStylesContext",errorMessage:"useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Progress />\" "}),yW=cr(((e,t)=>{const{min:n,max:r,value:i,isIndeterminate:a,role:s}=e,o=y(e,fW),l=function(e){const{value:t=0,min:n,max:r,valueText:i,getValueText:a,isIndeterminate:s,role:o="progressbar"}=e,l=function(e,t,n){return 100*(e-t)/(n-t)}(t,n,r);return{bind:{"data-indeterminate":s?"":void 0,"aria-valuemax":r,"aria-valuemin":n,"aria-valuenow":s?void 0:t,"aria-valuetext":(()=>{if(null!=t)return"function"===typeof a?a(t,l):i})(),role:o},percent:l,value:t}}({value:i,min:n,max:r,isIndeterminate:a,role:s}),u=vW(),d=(0,c.A)({height:"100%"},u.filledTrack);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)((0,c.A)({ref:t,style:(0,c.A)({width:"".concat(l.percent,"%")},o.style)},l.bind),o),{},{__css:d}))})),xW=cr(((e,t)=>{var n;const r=ft(e),{value:i,min:a=0,max:s=100,hasStripe:o,isAnimated:l,children:u,borderRadius:d,isIndeterminate:h,"aria-label":p,"aria-labelledby":f,"aria-valuetext":m,title:g,role:v}=r,x=y(r,mW),b=Rr("Progress",e),w=null!=d?d:null==(n=b.track)?void 0:n.borderRadius,S={animation:"".concat(pW," 1s linear infinite")},_=!h&&o&&l,A=(0,c.A)((0,c.A)({},_&&S),h&&{position:"absolute",willChange:"left",minWidth:"50%",animation:"".concat(hW," 1s ease infinite normal none running")}),E=(0,c.A)({overflow:"hidden",position:"relative"},b.track);return(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t,borderRadius:w,__css:E},x),{},{children:(0,ur.jsxs)(gW,{value:b,children:[(0,ur.jsx)(yW,{"aria-label":p,"aria-labelledby":f,"aria-valuetext":m,min:a,max:s,value:i,isIndeterminate:h,css:A,borderRadius:w,title:g,role:v}),u]})}))}));function bW(){const e=m_(),{hostName:t}=(0,r.useContext)(GS),[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(""),[o,l]=(0,r.useState)("trending"),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(""),[y,x]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[S,_]=(0,r.useState)(""),[A,E]=(0,r.useState)(""),[C,M]=(0,r.useState)(""),[T,k]=(0,r.useState)(""),[P,R]=(0,r.useState)(!1),[D,I]=(0,r.useState)(0),[B,j]=(0,r.useState)(null),F=(0,r.useRef)(null),L=(0,r.useRef)(null),[O,N]=(0,r.useState)(2),[z,U]=(0,r.useState)(!1),[H,G]=(0,r.useState)([]),[V,W]=(0,r.useState)(""),[q,X]=(0,r.useState)(!1),J=(0,r.useRef)(null),[Y,K]=(0,r.useState)(null),[Z,Q]=(0,r.useState)(""),$=(0,r.useRef)(localStorage.getItem("userId")||Math.random().toString(36).slice(2,9)),[ee,te]=(0,r.useState)({allowAllReorder:!0,allowAllControl:!0}),[ne,re]=(0,r.useState)([]),[ie,ae]=(0,r.useState)(!1),[se,oe]=(0,r.useState)(""),[le,ce]=(0,r.useState)(""),[ue,de]=(0,r.useState)([]),[he,pe]=(0,r.useState)(-1),[fe,me]=(0,r.useState)(!1),[ge,ve]=(0,r.useState)("off"),[ye,xe]=(0,r.useState)([]),[be,we]=(0,r.useState)(!1),[Se,_e]=(0,r.useState)(""),[Ae,Ee]=(0,r.useState)(null),[Ce,Me]=(0,r.useState)([]),[Te,ke]=(0,r.useState)(""),[Pe,Re]=(0,r.useState)([]),[De,Ie]=(0,r.useState)([]),[Be,je]=(0,r.useState)(1),[Fe,Le]=(0,r.useState)(!1),[Oe,Ne]=(0,r.useState)(1),[ze,Ue]=(0,r.useState)(0),[He,Ge]=(0,r.useState)(0),[Ve,We]=(0,r.useState)(!1),[qe,Xe]=(0,r.useState)(""),[Je,Ye]=(0,r.useState)(!1),[Ke,Ze]=(0,r.useState)([]),[Qe,$e]=(0,r.useState)(""),[et,tt]=(0,r.useState)(""),[nt,rt]=(0,r.useState)(""),[it,at]=(0,r.useState)(""),[st,ot]=(0,r.useState)(""),[lt,ct]=(0,r.useState)(""),[ut,dt]=(0,r.useState)(""),[ht,pt]=(0,r.useState)(""),[ft,mt]=(0,r.useState)(""),[gt,vt]=(0,r.useState)("");(0,r.useEffect)((()=>{if(!(q&&J.current&&V))return;const r=J.current,i=e=>{let{queue:r,idx:i,paused:a,ts:s,lastSeek:o}=e;try{Array.isArray(r)&&de(r),"number"===typeof i&&pe(i);const e=Array.isArray(r)&&"number"===typeof i&&i>=0&&i<r.length?r[i]:null,c=e?n.find((t=>t._id===e)):null;c&&j(c);const u=F.current;if(!u||!c)return;const d=z?t+"/music/hls/"+c._id+"/master.m3u8":t+"/music/stream/"+c._id;u.src!==d&&(u.src=d);const h=Math.max(0,(Date.now()-(s||Date.now()))/1e3),p=(o||0)+(a?0:h);try{u.currentTime=p}catch(l){}a?u.pause():u.play().catch((()=>{}))}catch(c){}},a=e=>{let{queue:t}=e;Array.isArray(t)&&de(t)},s=e=>{let{position:t}=e;try{F.current&&(F.current.currentTime=t)}catch(n){}},o=t=>{let{reason:n}=t;X(!1),e({title:"pin"===n?"Wrong PIN":"Join denied",status:"error"})},l=e=>{e&&"object"===typeof e&&te((t=>(0,c.A)((0,c.A)({},t),e)))},u=e=>{let{list:t}=e;Array.isArray(t)&&re(t)},d=e=>{let{hasPin:t}=e;ae(!!t)};return r.on("music:state",i),r.on("music:queue",a),r.on("music:seek",s),r.on("music:join-denied",o),r.on("music:config",l),r.on("music:moderators",u),r.on("music:pin-updated",d),()=>{r.off("music:state",i),r.off("music:queue",a),r.off("music:seek",s),r.off("music:join-denied",o),r.off("music:config",l),r.off("music:moderators",u),r.off("music:pin-updated",d)}}),[q,V,n,t,z,e]),(0,r.useEffect)((()=>{const e=F.current;if(!(e&&q&&J.current&&V))return;const t=()=>J.current.emit("music:play",{roomId:V,userId:$.current,index:he}),n=()=>J.current.emit("music:pause",{roomId:V,userId:$.current,position:e.currentTime||0});return e.addEventListener("play",t),e.addEventListener("pause",n),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",n)}}),[q,V,he]),(0,r.useEffect)((()=>{F.current&&(F.current.volume=Fe?0:Be)}),[Be,Fe]),(0,r.useEffect)((()=>{F.current&&(F.current.playbackRate=Oe)}),[Oe]),(0,r.useEffect)((()=>{const e=F.current;if(!e)return;const t=()=>Ue(e.currentTime||0),n=()=>Ge(e.duration||0);return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",n),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",n)}}),[F]);const yt=e=>{const t=F.current;if(t)try{t.currentTime=e}catch(n){}},xt=(0,r.useCallback)((e=>{yt(e),q&&J.current&&V&&J.current.emit("music:seek",{roomId:V,userId:$.current,position:e})}),[q,V]);(0,r.useEffect)((()=>{const e=e=>{F.current&&(e.target&&["INPUT","TEXTAREA","SELECT"].includes(e.target.tagName)||("Space"===e.code&&(e.preventDefault(),F.current.paused?F.current.play().catch((()=>{})):F.current.pause()),"ArrowRight"===e.code&&xt(Math.min((F.current.currentTime||0)+5,He)),"ArrowLeft"===e.code&&xt(Math.max((F.current.currentTime||0)-5,0)),"+"===e.key&&je((e=>Math.min(1,e+.05))),"-"===e.key&&je((e=>Math.max(0,e-.05)))))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[He,xt]),(0,r.useEffect)((()=>{try{const e=localStorage.getItem("music_volume");e&&je(parseFloat(e));const t=localStorage.getItem("music_muted");t&&Le("1"===t);const n=localStorage.getItem("music_rate");n&&Ne(parseFloat(n))}catch(e){}}),[]),(0,r.useEffect)((()=>{try{localStorage.setItem("music_volume",String(Be))}catch(e){}}),[Be]),(0,r.useEffect)((()=>{try{localStorage.setItem("music_muted",Fe?"1":"0")}catch(e){}}),[Fe]),(0,r.useEffect)((()=>{try{localStorage.setItem("music_rate",String(Oe))}catch(e){}}),[Oe]),(0,r.useEffect)((()=>{try{localStorage.setItem("music_queue",JSON.stringify(ue)),localStorage.setItem("music_queue_idx",String(he))}catch(e){}}),[ue,he]),(0,r.useEffect)((()=>{try{localStorage.setItem("music_current",(null===B||void 0===B?void 0:B._id)||"")}catch(e){}}),[B]),(0,r.useEffect)((()=>{var e;const n=null===(e=window.location.hash)||void 0===e?void 0:e.slice(1),r=e=>{j(e),de([e._id]),pe(0);const n=t+"/music/stream/"+e._id;F.current&&(F.current.src=n,F.current.play().catch((()=>{}))),fetch(t+"/music/tracks/"+e._id+"/comments").then((e=>e.json())).then((e=>Me(Array.isArray(e)?e:[]))).catch((()=>Me([])))};if(n)n.startsWith("pl:")?(async e=>{try{const n=await fetch(t+"/music/playlist/"+e),i=await n.json(),a=(i.tracks||[]).map((e=>e._id));de(a),pe(0),i.tracks&&i.tracks[0]&&r(i.tracks[0])}catch(n){}})(n.slice(3)):fetch(t+"/music/tracks/"+n).then((e=>e.json())).then((e=>{e&&e._id&&r(e)})).catch((()=>{}));else try{const e=localStorage.getItem("music_current"),n=JSON.parse(localStorage.getItem("music_queue")||"[]"),i=parseInt(localStorage.getItem("music_queue_idx")||"-1");e&&fetch(t+"/music/tracks/"+e).then((e=>e.json())).then((e=>{e&&e._id&&r(e)})).catch((()=>{})),Array.isArray(n)&&n.length&&de(n),Number.isNaN(i)||pe(i)}catch(i){}}),[t]),(0,r.useEffect)((()=>{if(B&&B._id){try{window.history.replaceState(null,"","#"+B._id)}catch(e){}Xe(B.lyrics||"")}}),[B]);const bt=(0,r.useCallback)((async()=>{try{const e=new URL(t+"/music/tracks");a&&e.searchParams.set("search",a),o&&e.searchParams.set("sort",o),Qe&&e.searchParams.set("genre",Qe),et&&e.searchParams.set("tag",et),nt&&e.searchParams.set("minLikes",nt),st&&e.searchParams.set("yearMin",st),lt&&e.searchParams.set("yearMax",lt),ut&&e.searchParams.set("durMin",ut),ht&&e.searchParams.set("durMax",ht),ft&&e.searchParams.set("bpmMin",ft),gt&&e.searchParams.set("bpmMax",gt);const n=await fetch(e.toString()),r=await n.json();i(Array.isArray(r)?r:[])}catch(n){e({title:"Failed to load tracks",status:"error"})}}),[t,a,o,Qe,et,nt,st,lt,ut,ht,ft,gt,e]);(0,r.useEffect)((()=>{bt()}),[bt]);const wt=async()=>{await bt()},St=(0,r.useCallback)(((e,t)=>e?e.canPlayType("application/vnd.apple.mpegurl")?(e.src=t,Promise.resolve()):new Promise(((n,r)=>{const i=()=>{try{const i=new window.Hls;i.loadSource(t),i.attachMedia(e),i.on(window.Hls.Events.MANIFEST_PARSED,(()=>n())),i.on(window.Hls.Events.ERROR,((e,t)=>{null!==t&&void 0!==t&&t.fatal&&r(new Error("HLS fatal"))}))}catch(Zie){r(Zie)}};if(window.Hls)return i();const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/hls.js@latest",a.onload=i,a.onerror=()=>r(new Error("hls.js load failed")),document.body.appendChild(a)})):Promise.reject(new Error("no element"))),[]),_t=(0,r.useCallback)((n=>{j(n);const r=z?t+"/music/hls/"+n._id+"/master.m3u8":t+"/music/stream/"+n._id;if(F.current){const i=F.current,a=()=>i.play().catch((()=>{e({title:"Press Play to start audio",status:"info"})}));z?St(i,r).then(a).catch((()=>{i.src=t+"/music/stream/"+n._id,a()})):(i.src=r,a())}fetch(t+"/music/tracks/"+n._id+"/waveform").then((e=>e.json())).then((e=>G(Array.isArray(null===e||void 0===e?void 0:e.peaks)?e.peaks:[]))).catch((()=>G([])))}),[t,e,z,St]),At=(e,n)=>{if(Array.isArray(n)&&n.length){const t=n.map((e=>e._id)),r=Math.max(0,t.indexOf(e._id));q&&J.current&&V?J.current.emit("music:queue-set",{roomId:V,userId:$.current,queue:t,index:r}):(de(t),pe(r))}else q&&J.current&&V?J.current.emit("music:queue-set",{roomId:V,userId:$.current,queue:[e._id],index:0}):(de([e._id]),pe(0));_t(e),fetch(t+"/music/tracks/"+e._id+"/comments").then((e=>e.json())).then((e=>Me(Array.isArray(e)?e:[]))).catch((()=>Me([])))},Et=(0,r.useCallback)((e=>{if(e<0||e>=ue.length)return;const t=ue[e],r=n.find((e=>e._id===t));r&&(q&&J.current&&V?J.current.emit("music:play",{roomId:V,userId:$.current,index:e}):(pe(e),_t(r)))}),[ue,n,_t,q,V]),Ct=(0,r.useCallback)((()=>{if("one"!==ge){if(0!==ue.length)if(fe){const e=Math.floor(Math.random()*ue.length);Et(e)}else{let e=he+1;if(e>=ue.length){if("all"!==ge)return;e=0}Et(e)}}else F.current&&(F.current.currentTime=0,F.current.play().catch((()=>{})))}),[ue,he,fe,ge,Et]),Mt=(0,r.useCallback)((()=>{if(0!==ue.length)if(fe){const e=Math.floor(Math.random()*ue.length);Et(e)}else{let e=he-1;if(e<0){if("all"!==ge)return;e=ue.length-1}Et(e)}}),[ue,he,fe,ge,Et]);(0,r.useEffect)((()=>{const e=F.current;if(!e)return;const r=()=>Ct(),i=()=>{if(!F.current||!L.current||!B)return;if((F.current.duration||0)-(F.current.currentTime||0)<Math.max(.2,O)&&""===L.current.src){const e=()=>{if("one"===ge)return he;if(fe)return Math.floor(Math.random()*ue.length);let e=he+1;return e>=ue.length&&(e="all"===ge?0:-1),e},r=e();if(-1===r)return;const i=ue[r],a=n.find((e=>e._id===i));if(!a)return;const s=L.current,o=z?t+"/music/hls/"+a._id+"/master.m3u8":t+"/music/stream/"+a._id;z?St(s,o).catch((()=>{s.src=t+"/music/stream/"+a._id})):(s.src=o,s.load()),L.current.volume=0,L.current.play().then((()=>{const e=Date.now(),t=()=>{const n=(Date.now()-e)/1e3,i=Math.min(1,n/Math.max(.1,O));if(F.current&&(F.current.volume=(1-i)*(Fe?0:Be)),L.current&&(L.current.volume=i*(Fe?0:Be)),i<1)requestAnimationFrame(t);else if(F.current&&L.current){F.current.pause(),F.current.src="";const e=F.current;F.current=L.current,L.current=e,pe(r),j(a)}};requestAnimationFrame(t)})).catch((()=>{}))}};return e.addEventListener("ended",r),e.addEventListener("timeupdate",i),()=>{e.removeEventListener("ended",r),e.removeEventListener("timeupdate",i)}}),[Ct,O,ue,he,ge,fe,n,t,z,Be,Fe,B,St]);const Tt=async e=>{try{const n=await fetch(t+"/music/like/"+e._id,{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),r=await n.json();i((e=>e.map((e=>e._id===r._id?r:e)))),B&&B._id===r._id&&j(r)}catch(n){}},kt=!!localStorage.getItem("token");(0,r.useEffect)((()=>{const e=e=>{e.preventDefault(),K(e)};return window.addEventListener("beforeinstallprompt",e),()=>window.removeEventListener("beforeinstallprompt",e)}),[]);const Pt=(e,t)=>{q&&J.current&&V?J.current.emit("music:reorder",{roomId:V,userId:$.current,from:e,to:e+t}):de((n=>{const r=e+t;if(r<0||r>=n.length)return n;const i=n.slice(),[a]=i.splice(e,1);return i.splice(r,0,a),i}))};return(0,ur.jsxs)(pr,{p:3,children:[(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Music"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Search songs, artists, albums",value:a,onChange:e=>s(e.target.value),onKeyDown:e=>"Enter"===e.key&&wt()}),(0,ur.jsxs)(di,{value:o,onChange:e=>l(e.target.value),w:"48",children:[(0,ur.jsx)("option",{value:"trending",children:"Trending"}),(0,ur.jsx)("option",{value:"likes",children:"Top liked"}),(0,ur.jsx)("option",{value:"new",children:"New"}),(0,ur.jsx)("option",{value:"alpha",children:"A-Z"})]}),(0,ur.jsx)($y,{placeholder:"Genre",value:Qe,onChange:e=>$e(e.target.value),w:"32"}),(0,ur.jsx)($y,{placeholder:"Tag",value:et,onChange:e=>tt(e.target.value),w:"28"}),(0,ur.jsx)($y,{placeholder:"Min likes",value:nt,onChange:e=>rt(e.target.value),w:"24"}),(0,ur.jsx)($y,{placeholder:"Year min",value:st,onChange:e=>ot(e.target.value),w:"24"}),(0,ur.jsx)($y,{placeholder:"Year max",value:lt,onChange:e=>ct(e.target.value),w:"24"}),(0,ur.jsx)($y,{placeholder:"Dur min s",value:ut,onChange:e=>dt(e.target.value),w:"24"}),(0,ur.jsx)($y,{placeholder:"Dur max s",value:ht,onChange:e=>pt(e.target.value),w:"24"}),(0,ur.jsx)($y,{placeholder:"BPM min",value:ft,onChange:e=>mt(e.target.value),w:"24"}),(0,ur.jsx)($y,{placeholder:"BPM max",value:gt,onChange:e=>vt(e.target.value),w:"24"}),(0,ur.jsx)(b_,{onClick:wt,children:"Search"}),(0,ur.jsx)(b_,{variant:"outline",onClick:()=>U((e=>!e)),children:z?"HLS On":"HLS Off"}),kt&&(0,ur.jsx)(b_,{onClick:()=>d(!0),children:"Upload"}),kt&&(0,ur.jsx)(b_,{variant:"outline",onClick:async()=>{try{const e=await fetch(t+"/music/playlist/mine",{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json();xe(Array.isArray(n)?n:[]),Ee(null),we(!0)}catch(n){e({title:"Failed to load playlists",status:"error"})}},children:"Playlists"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(b_,{onClick:()=>{const e="rm_"+Math.random().toString(36).slice(2,8);W(e)},children:"Create Id"}),(0,ur.jsx)($y,{placeholder:"Room id",value:V,onChange:e=>W(e.target.value),w:"44"}),(0,ur.jsx)($y,{placeholder:"Pin (optional)",value:Z,onChange:e=>Q(e.target.value),w:"36"}),q?(0,ur.jsx)(b_,{variant:"outline",onClick:()=>{var e;null===(e=J.current)||void 0===e||e.emit("music:leave",{roomId:V,userId:$.current}),X(!1)},children:"Leave"}):(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(b_,{onClick:()=>{V&&(J.current||(J.current=FG(t)),J.current.emit("music:create",{roomId:V,userId:$.current,pin:Z}),J.current.emit("music:join",{roomId:V,userId:$.current,pin:Z}),X(!0))},children:"Create & Join"}),(0,ur.jsx)(b_,{variant:"outline",onClick:()=>{V&&(J.current||(J.current=FG(t)),J.current.emit("music:join",{roomId:V,userId:$.current,pin:Z}),X(!0))},children:"Join"})]}),Y&&(0,ur.jsx)(b_,{variant:"outline",onClick:async()=>{try{await(null===Y||void 0===Y?void 0:Y.prompt()),K(null)}catch(e){}},children:"Install App"})]}),q&&(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:"Room settings"}),(0,ur.jsx)(oo,{colorScheme:ie?"purple":"gray",children:ie?"PIN set":"No PIN"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Allow all reorder"}),(0,ur.jsxs)(di,{size:"sm",value:ee.allowAllReorder?"1":"0",onChange:e=>{var t;const n="1"===e.target.value;te((e=>(0,c.A)((0,c.A)({},e),{},{allowAllReorder:n}))),null===(t=J.current)||void 0===t||t.emit("music:config",{roomId:V,byUserId:$.current,allowAllReorder:n})},children:[(0,ur.jsx)("option",{value:"1",children:"Yes"}),(0,ur.jsx)("option",{value:"0",children:"No"})]}),(0,ur.jsx)(Jr,{fontSize:"sm",children:"Allow all control"}),(0,ur.jsxs)(di,{size:"sm",value:ee.allowAllControl?"1":"0",onChange:e=>{var t;const n="1"===e.target.value;te((e=>(0,c.A)((0,c.A)({},e),{},{allowAllControl:n}))),null===(t=J.current)||void 0===t||t.emit("music:config",{roomId:V,byUserId:$.current,allowAllControl:n})},children:[(0,ur.jsx)("option",{value:"1",children:"Yes"}),(0,ur.jsx)("option",{value:"0",children:"No"})]})]})]}),(0,ur.jsxs)(ao,{mt:2,children:[(0,ur.jsx)($y,{placeholder:"Set/clear PIN",value:se,onChange:e=>oe(e.target.value),w:"40"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>{var e;null===(e=J.current)||void 0===e||e.emit("music:pin-set",{roomId:V,byUserId:$.current,pin:se}),oe("")},children:"Save PIN"}),(0,ur.jsx)($y,{placeholder:"Moderator userId",value:le,onChange:e=>ce(e.target.value),w:"40"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>{var e;const t=le.trim();t&&(null===(e=J.current)||void 0===e||e.emit("music:mod-add",{roomId:V,byUserId:$.current,userId:t}),ce(""))},children:"Add mod"})]}),(null===ne||void 0===ne?void 0:ne.length)>0&&(0,ur.jsx)(ao,{mt:2,wrap:"wrap",children:ne.map((e=>(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:1,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:e}),(0,ur.jsx)(zr,{size:"xs",colorScheme:"red",variant:"outline",onClick:()=>{var t;return null===(t=J.current)||void 0===t?void 0:t.emit("music:mod-remove",{roomId:V,byUserId:$.current,userId:e})},children:"Remove"})]},e)))})]}),B&&(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsxs)(ex,{align:"start",spacing:0,children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:B.title}),(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:[B.artist,B.album?" \xb7 "+B.album:""]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsxs)(oo,{colorScheme:"pink",children:[B.likes||0," likes"]}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>Tt(B),children:"Like"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>(async e=>{try{const n=await fetch(t+"/music/unlike/"+e._id,{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),r=await n.json();i((e=>e.map((e=>e._id===r._id?r:e)))),B&&B._id===r._id&&j(r)}catch(n){}})(B),children:"Unlike"}),(0,ur.jsx)(zr,{size:"sm",as:"a",href:"".concat(t,"/music/stream/").concat(null===B||void 0===B?void 0:B._id,"?download=1"),children:"Download"})]})]}),B.coverUrl&&(0,ur.jsx)("img",{alt:"cover",src:B.coverUrl,style:{maxHeight:160,objectFit:"cover",marginTop:8,borderRadius:8}}),(0,ur.jsxs)(ao,{mt:2,spacing:2,children:[(0,ur.jsx)(zr,{size:"sm",onClick:Mt,children:"Prev"}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>{F.current&&(q&&J.current&&V?F.current.paused?J.current.emit("music:play",{roomId:V,userId:$.current,index:he}):J.current.emit("music:pause",{roomId:V,userId:$.current,position:F.current.currentTime||0}):F.current.paused?F.current.play().catch((()=>{})):F.current.pause())},children:"Play/Pause"}),(0,ur.jsx)(zr,{size:"sm",onClick:Ct,children:"Next"}),(0,ur.jsx)(bD,{orientation:"vertical"}),(0,ur.jsxs)(zr,{size:"sm",variant:fe?"solid":"outline",onClick:()=>me((e=>!e)),children:["Shuffle ",fe?"On":"Off"]}),(0,ur.jsxs)(zr,{size:"sm",variant:"outline",onClick:()=>ve((e=>"off"===e?"one":"one"===e?"all":"off")),children:["Repeat: ",ge]}),(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:["Queue ",he+1,"/",ue.length]}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>Ye((e=>!e)),children:Je?"Hide Queue":"Show Queue"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>{q&&J.current&&V?J.current.emit("music:queue-clear",{roomId:V,userId:$.current}):(de([]),pe(-1))},children:"Clear Queue"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:async()=>{const n=prompt("Save current queue as playlist (name)");if(n)try{const i=await fetch(t+"/music/playlist",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({name:n})}),a=await i.json();for(const e of ue)try{await fetch(t+"/music/playlist/"+a._id+"/add",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({trackId:e})})}catch(r){}e({title:"Playlist saved",status:"success"})}catch(i){e({title:"Save failed",status:"error"})}},children:"Save as Playlist"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>{var t;null===(t=navigator.clipboard)||void 0===t||t.writeText(window.location.origin+"/music#"+((null===B||void 0===B?void 0:B._id)||"")),e({title:"Link copied",status:"success"})},children:"Copy link"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Crossfade"}),(0,ur.jsxs)(di,{size:"sm",value:O,onChange:e=>N(parseFloat(e.target.value)),children:[(0,ur.jsx)("option",{value:0,children:"Off"}),(0,ur.jsx)("option",{value:1,children:"1s"}),(0,ur.jsx)("option",{value:2,children:"2s"}),(0,ur.jsx)("option",{value:3,children:"3s"}),(0,ur.jsx)("option",{value:5,children:"5s"})]})]})]}),H.length>0&&(0,ur.jsx)(pr,{mt:2,children:(0,ur.jsx)("div",{style:{display:"flex",gap:1,height:40,alignItems:"flex-end",cursor:"pointer",background:"#f5f5f5",padding:2,borderRadius:4},onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,r=Math.min(1,Math.max(0,n/t.width));yt(r*(He||0))},children:H.map(((e,t)=>(0,ur.jsx)("div",{style:{width:100/H.length+"%",height:100*e+"%",background:"#8a2be2"}},t)))})}),(0,ur.jsxs)(ao,{mt:2,spacing:3,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Seek"}),(0,ur.jsx)("input",{type:"range",min:"0",max:Math.max(1,He),step:"1",value:ze,onChange:e=>xt(parseFloat(e.target.value)),style:{width:200}}),(0,ur.jsxs)(Jr,{fontSize:"xs",color:"gray.500",children:[Math.floor(ze),"/",Math.floor(He),"s"]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Vol"}),(0,ur.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:Fe?0:Be,onChange:e=>{Le(!1),je(parseFloat(e.target.value))}}),(0,ur.jsx)(zr,{size:"xs",onClick:()=>Le((e=>!e)),children:Fe?"Unmute":"Mute"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Speed"}),(0,ur.jsxs)(di,{size:"sm",value:Oe,onChange:e=>Ne(parseFloat(e.target.value)),children:[(0,ur.jsx)("option",{value:.75,children:"0.75x"}),(0,ur.jsx)("option",{value:1,children:"1x"}),(0,ur.jsx)("option",{value:1.25,children:"1.25x"}),(0,ur.jsx)("option",{value:1.5,children:"1.5x"}),(0,ur.jsx)("option",{value:2,children:"2x"})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Sleep"}),(0,ur.jsxs)(di,{size:"sm",value:it,onChange:e=>at(e.target.value),children:[(0,ur.jsx)("option",{value:"",children:"Off"}),(0,ur.jsx)("option",{value:"15",children:"15 min"}),(0,ur.jsx)("option",{value:"30",children:"30 min"}),(0,ur.jsx)("option",{value:"60",children:"60 min"})]})]}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>We((e=>!e)),children:Ve?"Hide lyrics":"Show lyrics"})]}),Ve&&(0,ur.jsxs)(pr,{mt:2,borderWidth:"1px",borderRadius:"md",p:2,children:[null!==B&&void 0!==B&&B.lyrics?(0,ur.jsx)(Jr,{whiteSpace:"pre-wrap",children:B.lyrics}):(0,ur.jsx)(Jr,{color:"gray.500",children:"No lyrics yet."}),!!localStorage.getItem("token")&&(null===B||void 0===B?void 0:B.uploader)&&(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(bD,{my:2}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:"Edit lyrics (uploader only)"}),(0,ur.jsx)("textarea",{value:qe,onChange:e=>Xe(e.target.value),rows:6,style:{width:"100%"}}),(0,ur.jsx)(zr,{size:"sm",mt:2,onClick:async()=>{try{const n=await fetch(t+"/music/tracks/"+B._id,{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({lyrics:qe})});if(!n.ok)throw new Error("Save failed");const r=await n.json();j(r),e({title:"Lyrics saved",status:"success"})}catch(n){e({title:"Save failed",status:"error"})}},children:"Save"})]})]}),Je&&(0,ur.jsxs)(pr,{mt:2,borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",mb:2,children:"Queue"}),(0,ur.jsxs)(ex,{align:"stretch",spacing:1,children:[ue.map(((e,t)=>{const r=n.find((t=>t._id===e))||(B&&B._id===e?B:null);return(0,ur.jsxs)(ao,{justify:"space-between",borderWidth:"1px",borderRadius:"md",p:1,children:[(0,ur.jsxs)(ao,{children:[(null===r||void 0===r?void 0:r.coverUrl)&&(0,ur.jsx)("img",{alt:"cover",src:r.coverUrl,style:{width:32,height:32,objectFit:"cover",borderRadius:4}}),(0,ur.jsx)(Jr,{fontSize:"sm",children:(null===r||void 0===r?void 0:r.title)||"Track"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"xs",onClick:()=>{q&&J.current?J.current.emit("music:play",{roomId:V,userId:$.current,index:t}):pe(t)},children:"Go"}),(0,ur.jsx)(zr,{size:"xs",onClick:()=>Pt(t,-1),children:"Up"}),(0,ur.jsx)(zr,{size:"xs",onClick:()=>Pt(t,1),children:"Down"}),(0,ur.jsx)(zr,{size:"xs",colorScheme:"red",variant:"outline",onClick:()=>(e=>{q&&J.current&&V?J.current.emit("music:dequeue",{roomId:V,userId:$.current,index:e}):de((t=>t.filter(((t,n)=>n!==e))))})(t),children:"Remove"})]})]},e+":"+t)})),0===ue.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"Queue is empty."})]})]}),(0,ur.jsx)("audio",{ref:F,controls:!0,style:{width:"100%",marginTop:8}}),(0,ur.jsx)("audio",{ref:L,style:{display:"none"}})]}),(0,ur.jsxs)(nS,{variant:"enclosed",children:[(0,ur.jsxs)(_R,{children:[(0,ur.jsx)(AR,{children:"All tracks"}),(0,ur.jsx)(AR,{children:"My uploads"}),(0,ur.jsx)(AR,{children:"History"}),(0,ur.jsx)(AR,{children:"Liked"})]}),(0,ur.jsxs)(rS,{children:[(0,ur.jsx)(iS,{children:(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[n.map((r=>(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[r.coverUrl&&(0,ur.jsx)("img",{alt:"cover",src:r.coverUrl,style:{width:44,height:44,objectFit:"cover",borderRadius:6}}),(0,ur.jsxs)(ex,{align:"start",spacing:0,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:r.title}),(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:[r.artist,r.album?" \xb7 "+r.album:""]})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{children:(r.genres||[]).join(", ")}),(0,ur.jsx)(oo,{colorScheme:"pink",children:r.likes||0}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>At(r,n),children:"Play"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>(e=>{q&&J.current&&V?J.current.emit("music:enqueue",{roomId:V,userId:$.current,trackId:e._id}):de((t=>{if(he<0)return[e._id];const n=t.slice();return n.splice(he+1,0,e._id),n}))})(r),children:"Queue Next"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>(e=>{q&&J.current&&V?J.current.emit("music:enqueue",{roomId:V,userId:$.current,trackId:e._id}):de((t=>[...t,e._id]))})(r),children:"Queue End"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>Tt(r),children:"Like"}),kt&&(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:async()=>{var n,a,s,o;const l={title:null!==(n=prompt("Title",r.title))&&void 0!==n?n:r.title,artist:null!==(a=prompt("Artist",r.artist))&&void 0!==a?a:r.artist,album:null!==(s=prompt("Album",r.album))&&void 0!==s?s:r.album,genres:null!==(o=prompt("Genres (comma separated)",(r.genres||[]).join(",")))&&void 0!==o?o:(r.genres||[]).join(",")};try{const n=await fetch(t+"/music/tracks/"+r._id,{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify(l)});if(!n.ok)throw new Error("Update failed");const a=await n.json();i((e=>e.map((e=>e._id===a._id?a:e)))),B&&B._id===a._id&&j(a),e({title:"Updated",status:"success"})}catch(c){e({title:"Update failed",status:"error"})}},children:"Edit"}),kt&&(0,ur.jsx)(zr,{size:"sm",colorScheme:"red",variant:"outline",onClick:async()=>{if(window.confirm("Delete this track?"))try{const a=await fetch(t+"/music/tracks/"+r._id,{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}});if(!a.ok){try{const e=await a.json();if(e&&e.error)throw new Error(e.error)}catch(n){}throw new Error("Delete failed")}i((e=>e.filter((e=>e._id!==r._id)))),B&&B._id===r._id&&(j(null),F.current&&(F.current.pause(),F.current.src="")),e({title:"Deleted",status:"success"})}catch(Zie){e({title:Zie.message||"Delete failed",status:"error"})}},children:"Delete"})]})]},r._id))),0===n.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No tracks found."})]})}),(0,ur.jsx)(iS,{children:(0,ur.jsx)(wW,{hostName:t,onPlay:At})}),(0,ur.jsx)(iS,{children:(0,ur.jsx)(SW,{hostName:t,onPlay:e=>At(e,Pe.map((e=>e.track)).filter(Boolean)),items:Pe,setItems:Re})}),(0,ur.jsx)(iS,{children:(0,ur.jsx)(_W,{hostName:t,onPlay:e=>At(e,De),items:De,setItems:Ie})})]})]})]}),(0,ur.jsxs)(Nm,{isOpen:u,onClose:()=>d(!1),size:"lg",children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"Upload audio"}),(0,ur.jsx)(Yy,{}),(0,ur.jsx)(Zy,{children:(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[(0,ur.jsx)($y,{type:"file",accept:"audio/*",onChange:t=>{var n;const r=null===(n=t.target.files)||void 0===n?void 0:n[0];r&&(r.type.startsWith("audio/")?(p(r),g||v(r.name)):e({title:"Select an audio file",status:"warning"}))}}),(0,ur.jsx)($y,{type:"file",accept:"image/*",onChange:t=>{var n;const r=null===(n=t.target.files)||void 0===n?void 0:n[0];r&&(r.type.startsWith("image/")?m(r):e({title:"Select an image",status:"warning"}))}}),f&&(0,ur.jsxs)(ao,{children:[(0,ur.jsx)("img",{alt:"cover preview",src:URL.createObjectURL(f),style:{width:80,height:80,objectFit:"cover",borderRadius:8}}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.500",children:"Cover preview"})]}),(0,ur.jsx)($y,{placeholder:"Title",value:g,onChange:e=>v(e.target.value)}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Artist",value:y,onChange:e=>x(e.target.value)}),(0,ur.jsx)($y,{placeholder:"Album",value:b,onChange:e=>w(e.target.value)})]}),(0,ur.jsx)($y,{placeholder:"Genres (comma separated)",value:S,onChange:e=>_(e.target.value)}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Tags (comma separated)",value:A,onChange:e=>E(e.target.value)}),(0,ur.jsx)($y,{placeholder:"Year",value:C,onChange:e=>M(e.target.value)}),(0,ur.jsx)($y,{placeholder:"BPM",value:T,onChange:e=>k(e.target.value)})]}),P&&(0,ur.jsx)(xW,{value:D,size:"sm"})]})}),(0,ur.jsxs)(nx,{children:[(0,ur.jsx)(zr,{mr:3,onClick:()=>d(!1),children:"Cancel"}),(0,ur.jsx)(zr,{colorScheme:"purple",isLoading:P,onClick:async()=>{if(h){R(!0),I(0);try{const r=new FormData;r.append("file",h),f&&r.append("cover",f),g&&r.append("title",g),y&&r.append("artist",y),b&&r.append("album",b),S&&r.append("genres",S),A&&r.append("tags",A),C&&r.append("year",C),T&&r.append("bpm",T);const a=await fetch(t+"/music/upload",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:r});if(!a.ok){let e="Upload failed";try{const t=await a.json();t&&t.error&&(e=t.error)}catch(n){}throw new Error(e)}const s=await a.json();e({title:"Uploaded",status:"success"}),d(!1),p(null),m(null),v(""),x(""),w(""),_(""),E(""),M(""),k(""),i((e=>[s,...e])),j(s),setTimeout((()=>{F.current&&(F.current.src=t+"/music/stream/"+s._id,F.current.play().catch((()=>e({title:"Press Play to start audio",status:"info"}))))}),0)}catch(Zie){e({title:Zie.message||"Upload failed",status:"error"})}finally{R(!1),I(0)}}},children:"Upload"})]})]})]}),(0,ur.jsxs)(Nm,{isOpen:be,onClose:()=>{we(!1),Ee(null)},size:"md",children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"My Playlists"}),(0,ur.jsx)(Yy,{}),(0,ur.jsx)(Zy,{children:(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"New playlist name",value:Se,onChange:e=>_e(e.target.value)}),(0,ur.jsx)(zr,{onClick:async()=>{const n=Se.trim();if(n)try{const r=await fetch(t+"/music/playlist",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({name:n})}),i=await r.json();xe((e=>[i,...e])),_e(""),e({title:"Playlist created",status:"success"})}catch(r){e({title:"Create failed",status:"error"})}},children:"Create"}),(0,ur.jsx)(zr,{variant:"outline",onClick:async()=>{try{const n=await fetch(t+"/music/playlist/public"),r=await n.json();Ze(Array.isArray(r)?r:[]),e({title:"Loaded public",status:"success"})}catch(n){e({title:"Load public failed",status:"error"})}},children:"Public"})]}),Ke.length>0&&(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",mb:1,children:"Public playlists"}),(0,ur.jsx)(ex,{align:"stretch",spacing:1,children:Ke.map((n=>(0,ur.jsxs)(ao,{justify:"space-between",borderWidth:"1px",borderRadius:"md",p:1,children:[(0,ur.jsx)(Jr,{children:n.name}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{const e=await fetch(t+"/music/playlist/"+n._id),r=await e.json(),i=(r.tracks||[]).map((e=>e._id));de(i),pe(0),r.tracks&&r.tracks[0]&&j(r.tracks[0]),we(!1),Ee(null)}catch(r){e({title:"Open failed",status:"error"})}},children:"Open"})]},"pub-"+n._id)))})]}),ye.map((n=>(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,justify:"space-between",children:[(0,ur.jsx)(Jr,{children:n.name}),(0,ur.jsxs)(ao,{children:[Ae&&(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:async()=>{try{await fetch(t+"/music/playlist/"+n._id+"/add",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({trackId:Ae._id})}),e({title:"Added to "+n.name,status:"success"})}catch(r){e({title:"Add failed",status:"error"})}},children:"Add"}),(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{const e=await fetch(t+"/music/playlist/"+n._id),r=await e.json(),i=(r.tracks||[]).map((e=>e._id));de(i),pe(0),r.tracks&&r.tracks[0]&&j(r.tracks[0]),we(!1),Ee(null)}catch(r){e({title:"Open failed",status:"error"})}},children:"Open"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:async()=>{const r=prompt("Rename playlist",n.name);if(null!==r)try{const i=await fetch(t+"/music/playlist/"+n._id,{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({name:r})});if(!i.ok)throw new Error("Rename failed");const a=await i.json();xe((e=>e.map((e=>e._id===n._id?a:e)))),e({title:"Renamed",status:"success"})}catch(i){e({title:"Rename failed",status:"error"})}},children:"Rename"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:async()=>{const r=!n.isPublic;try{const i=await fetch(t+"/music/playlist/"+n._id,{method:"PUT",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({isPublic:r})});if(!i.ok)throw new Error("Update failed");const a=await i.json();xe((e=>e.map((e=>e._id===n._id?a:e)))),e({title:r?"Made public":"Made private",status:"success"})}catch(i){e({title:"Update failed",status:"error"})}},children:n.isPublic?"Make Private":"Make Public"})]})]},n._id)))]})}),(0,ur.jsx)(nx,{children:(0,ur.jsx)(zr,{onClick:()=>{we(!1),Ee(null)},children:"Close"})})]})]}),B&&(0,ur.jsxs)(pr,{mt:3,borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",mb:2,children:"Comments"}),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,maxH:"240px",overflowY:"auto",children:[Ce.map((e=>{var n,r;return(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.600",children:[(null===(n=e.user)||void 0===n?void 0:n.name)||(null===(r=e.user)||void 0===r?void 0:r.email)||"User"," \xb7 ",new Date(e.createdAt).toLocaleString()]}),(0,ur.jsx)(Jr,{children:e.text}),(0,ur.jsx)(AW,{hostName:t,c:e,setComments:Me})]},e._id)})),0===Ce.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No comments yet."})]}),!!localStorage.getItem("token")&&(0,ur.jsxs)(ao,{mt:2,children:[(0,ur.jsx)($y,{placeholder:"Write a comment",value:Te,onChange:e=>ke(e.target.value)}),(0,ur.jsx)(zr,{onClick:async()=>{const n=Te.trim();if(n)try{const e=await fetch(t+"/music/tracks/"+B._id+"/comments",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({text:n})}),r=await e.json();Me((e=>[r,...e])),ke("")}catch(r){e({title:"Comment failed",status:"error"})}},children:"Post"})]})]})]})}function wW(e){let{hostName:t,onPlay:n}=e;const[i,a]=(0,r.useState)([]),s=m_(),o=(0,r.useCallback)((async()=>{try{const e=await fetch(t+"/music/me/tracks",{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json();a(Array.isArray(n)?n:[])}catch(e){s({title:"Failed to load",status:"error"})}}),[t,s]);return(0,r.useEffect)((()=>{o()}),[o]),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[i.map((e=>(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[e.coverUrl&&(0,ur.jsx)("img",{alt:"cover",src:e.coverUrl,style:{width:44,height:44,objectFit:"cover",borderRadius:6}}),(0,ur.jsxs)(ex,{align:"start",spacing:0,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:e.title}),(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:[e.artist,e.album?" \xb7 "+e.album:""]})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{colorScheme:"pink",children:e.likes||0}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>n(e,i),children:"Play"}),(0,ur.jsx)(zr,{size:"sm",colorScheme:"red",variant:"outline",onClick:async()=>{if(window.confirm("Delete this track?"))try{if(!(await fetch(t+"/music/tracks/"+e._id,{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}})).ok)throw new Error("Delete failed");a((t=>t.filter((t=>t._id!==e._id))))}catch(n){s({title:"Delete failed",status:"error"})}},children:"Delete"})]})]},e._id))),0===i.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No uploads."})]})}function SW(e){let{hostName:t,onPlay:n,items:i,setItems:a}=e;const s=m_(),o=(0,r.useCallback)((async()=>{try{const e=await fetch(t+"/music/me/history",{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json();a(Array.isArray(n)?n:[])}catch(e){s({title:"Failed to load",status:"error"})}}),[t,a,s]);return(0,r.useEffect)((()=>{o()}),[o]),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[i.map((e=>e.track&&(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[e.track.coverUrl&&(0,ur.jsx)("img",{alt:"cover",src:e.track.coverUrl,style:{width:44,height:44,objectFit:"cover",borderRadius:6}}),(0,ur.jsxs)(ex,{align:"start",spacing:0,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:e.track.title}),(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:[e.track.artist,e.track.album?" \xb7 "+e.track.album:""]})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{colorScheme:"purple",children:new Date(e.createdAt).toLocaleString()}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>n(e.track),children:"Play"})]})]},e._id))),0===i.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No history yet."})]})}function _W(e){let{hostName:t,onPlay:n,items:i,setItems:a}=e;const s=m_(),o=(0,r.useCallback)((async()=>{try{const e=await fetch(t+"/music/me/liked",{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json();a(Array.isArray(n)?n:[])}catch(e){s({title:"Failed to load",status:"error"})}}),[t,a,s]);return(0,r.useEffect)((()=>{o()}),[o]),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[i.map((e=>(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[e.coverUrl&&(0,ur.jsx)("img",{alt:"cover",src:e.coverUrl,style:{width:44,height:44,objectFit:"cover",borderRadius:6}}),(0,ur.jsxs)(ex,{align:"start",spacing:0,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:e.title}),(0,ur.jsxs)(Jr,{fontSize:"sm",color:"gray.500",children:[e.artist,e.album?" \xb7 "+e.album:""]})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{colorScheme:"pink",children:e.likes||0}),(0,ur.jsx)(zr,{size:"sm",onClick:()=>n(e),children:"Play"})]})]},e._id))),0===i.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No liked tracks."})]})}function AW(e){var t;let{hostName:n,c:r,setComments:i}=e;const a=m_(),s=localStorage.getItem("userId");return s&&null!==r&&void 0!==r&&null!==(t=r.user)&&void 0!==t&&t._id&&String(r.user._id)===String(s)?(0,ur.jsx)(zr,{size:"xs",variant:"ghost",colorScheme:"red",onClick:async()=>{try{await fetch(n+"/music/tracks/"+r.track+"/comments/"+r._id,{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}}),i((e=>e.filter((e=>e._id!==r._id))))}catch(e){a({title:"Delete failed",status:"error"})}},children:"Delete"}):null}xW.displayName="Progress";const EW=["className","children","requiredIndicator","optionalIndicator"];var CW=cr((function(e,t){var n;const r=Pr("FormLabel",e),i=ft(e),{className:a,children:s,requiredIndicator:o=(0,ur.jsx)(MW,{}),optionalIndicator:l=null}=i,u=y(i,EW),d=ni(),h=null!=(n=null==d?void 0:d.getLabelProps(u,t))?n:(0,c.A)({ref:t},u);return(0,ur.jsxs)(lr.label,(0,c.A)((0,c.A)({},h),{},{className:x("chakra-form__label",i.className),__css:(0,c.A)({display:"block",textAlign:"start"},r),children:[s,(null==d?void 0:d.isRequired)?o:l]}))}));CW.displayName="FormLabel";var MW=cr((function(e,t){const n=ni(),r=ei();if(!(null==n?void 0:n.isRequired))return null;const i=x("chakra-form__required-indicator",e.className);return(0,ur.jsx)(lr.span,(0,c.A)((0,c.A)({},null==n?void 0:n.getRequiredIndicatorProps(e,t)),{},{__css:r.requiredIndicator,className:i}))}));MW.displayName="RequiredIndicator";const TW=["className"];var kW=cr((function(e,t){const n=Pr("Kbd",e),r=ft(e),{className:i}=r,a=y(r,TW);return(0,ur.jsx)(lr.kbd,(0,c.A)((0,c.A)({ref:t,className:x("chakra-kbd",i)},a),{},{__css:(0,c.A)({fontFamily:"mono"},n)}))}));kW.displayName="Kbd";const PW={smile:{label:"\ud83d\ude0a",duration:1200},laugh:{label:"\ud83d\ude02",duration:1400},blush:{label:"\ud83e\udd70",duration:1200},sad:{label:"\ud83d\ude22",duration:1400},wink:{label:"\ud83d\ude09",duration:1e3},kiss:{label:"\ud83d\ude18",duration:1200},hug:{label:"\ud83e\udd17",duration:1600}};function RW(e){const t=(e||"").toLowerCase();return/\b(love|care|proud|here for you)\b/.test(t)?"hug":/\b(joke|funny|haha|lol)\b/.test(t)?"laugh":/\bkiss|mwah|xoxo\b/.test(t)?"kiss":/\bsad|sorry|alone|upset|depressed\b/.test(t)?"sad":/\bflirt|cute|pretty|handsome|wink\b/.test(t)?"wink":"smile"}const DW="160",IW={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},BW={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},jW=0,FW=1,LW=2,OW=3,NW=0,zW=1,UW=2,HW=3,GW=0,VW=1,WW=2,qW=2,XW=0,JW=1,YW=2,KW=3,ZW=4,QW=5,$W=100,eq=101,tq=102,nq=103,rq=104,iq=200,aq=201,sq=202,oq=203,lq=204,cq=205,uq=206,dq=207,hq=208,pq=209,fq=210,mq=211,gq=212,vq=213,yq=214,xq=0,bq=1,wq=2,Sq=3,_q=4,Aq=5,Eq=6,Cq=7,Mq=0,Tq=1,kq=2,Pq=0,Rq=1,Dq=2,Iq=3,Bq=4,jq=5,Fq=6,Lq="attached",Oq="detached",Nq=300,zq=301,Uq=302,Hq=303,Gq=304,Vq=306,Wq=1e3,qq=1001,Xq=1002,Jq=1003,Yq=1004,Kq=1004,Zq=1005,Qq=1005,$q=1006,eX=1007,tX=1007,nX=1008,rX=1008,iX=1009,aX=1010,sX=1011,oX=1012,lX=1013,cX=1014,uX=1015,dX=1016,hX=1017,pX=1018,fX=1020,mX=1021,gX=1023,vX=1024,yX=1025,xX=1026,bX=1027,wX=1028,SX=1029,_X=1030,AX=1031,EX=1033,CX=33776,MX=33777,TX=33778,kX=33779,PX=35840,RX=35841,DX=35842,IX=35843,BX=36196,jX=37492,FX=37496,LX=37808,OX=37809,NX=37810,zX=37811,UX=37812,HX=37813,GX=37814,VX=37815,WX=37816,qX=37817,XX=37818,JX=37819,YX=37820,KX=37821,ZX=36492,QX=36494,$X=36495,eJ=36283,tJ=36284,nJ=36285,rJ=36286,iJ=2200,aJ=2201,sJ=2202,oJ=2300,lJ=2301,cJ=2302,uJ=2400,dJ=2401,hJ=2402,pJ=2500,fJ=2501,mJ=0,gJ=1,vJ=2,yJ=3e3,xJ=3001,bJ=3200,wJ=3201,SJ=0,_J=1,AJ="",EJ="srgb",CJ="srgb-linear",MJ="display-p3",TJ="display-p3-linear",kJ="linear",PJ="srgb",RJ="rec709",DJ="p3",IJ=0,BJ=7680,jJ=7681,FJ=7682,LJ=7683,OJ=34055,NJ=34056,zJ=5386,UJ=512,HJ=513,GJ=514,VJ=515,WJ=516,qJ=517,XJ=518,JJ=519,YJ=512,KJ=513,ZJ=514,QJ=515,$J=516,eY=517,tY=518,nY=519,rY=35044,iY=35048,aY=35040,sY=35045,oY=35049,lY=35041,cY=35046,uY=35050,dY=35042,hY="100",pY="300 es",fY=1035,mY=2e3,gY=2001;class vY{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const yY=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let xY=1234567;const bY=Math.PI/180,wY=180/Math.PI;function SY(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(yY[255&e]+yY[e>>8&255]+yY[e>>16&255]+yY[e>>24&255]+"-"+yY[255&t]+yY[t>>8&255]+"-"+yY[t>>16&15|64]+yY[t>>24&255]+"-"+yY[63&n|128]+yY[n>>8&255]+"-"+yY[n>>16&255]+yY[n>>24&255]+yY[255&r]+yY[r>>8&255]+yY[r>>16&255]+yY[r>>24&255]).toLowerCase()}function _Y(e,t,n){return Math.max(t,Math.min(n,e))}function AY(e,t){return(e%t+t)%t}function EY(e,t,n){return(1-n)*e+n*t}function CY(e){return 0===(e&e-1)&&0!==e}function MY(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function TY(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function kY(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const PY={DEG2RAD:bY,RAD2DEG:wY,generateUUID:SY,clamp:_Y,euclideanModulo:AY,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:EY,damp:function(e,t,n,r){return EY(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(AY(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(xY=e);let t=xY+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*bY},radToDeg:function(e){return e*wY},isPowerOfTwo:CY,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:MY,setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+r)/2),u=s((t+r)/2),d=a((t-r)/2),h=s((t-r)/2),p=a((r-t)/2),f=s((r-t)/2);switch(i){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:kY,denormalize:TY};class RY{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;RY.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(_Y(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class DY{constructor(e,t,n,r,i,a,s,o,l){DY.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l)}set(e,t,n,r,i,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],x=r[7],b=r[2],w=r[5],S=r[8];return i[0]=a*f+s*v+o*b,i[3]=a*m+s*y+o*w,i[6]=a*g+s*x+o*S,i[1]=l*f+c*v+u*b,i[4]=l*m+c*y+u*w,i[7]=l*g+c*x+u*S,i[2]=d*f+h*v+p*b,i[5]=d*m+h*y+p*w,i[8]=d*g+h*x+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*i*c+n*s*o+r*i*l-r*a*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,d=s*o-c*i,h=l*i-a*o,p=t*u+n*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(s*n-r*a)*f,e[3]=d*f,e[4]=(c*t-r*o)*f,e[5]=(r*i-s*t)*f,e[6]=h*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,s){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(IY.makeScale(e,t)),this}rotate(e){return this.premultiply(IY.makeRotation(-e)),this}translate(e,t){return this.premultiply(IY.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const IY=new DY;function BY(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const jY={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function FY(e,t){return new jY[e](t)}function LY(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function OY(){const e=LY("canvas");return e.style.display="block",e}const NY={};function zY(e){e in NY||(NY[e]=!0,console.warn(e))}const UY=(new DY).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),HY=(new DY).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),GY={[CJ]:{transfer:kJ,primaries:RJ,toReference:e=>e,fromReference:e=>e},[EJ]:{transfer:PJ,primaries:RJ,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[TJ]:{transfer:kJ,primaries:DJ,toReference:e=>e.applyMatrix3(HY),fromReference:e=>e.applyMatrix3(UY)},[MJ]:{transfer:PJ,primaries:DJ,toReference:e=>e.convertSRGBToLinear().applyMatrix3(HY),fromReference:e=>e.applyMatrix3(UY).convertLinearToSRGB()}},VY=new Set([CJ,TJ]),WY={enabled:!0,_workingColorSpace:CJ,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!VY.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=GY[t].toReference;return(0,GY[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return GY[e].primaries},getTransfer:function(e){return e===AJ?kJ:GY[e].transfer}};function qY(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function XY(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let JY;class YY{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===JY&&(JY=LY("canvas")),JY.width=e.width,JY.height=e.height;const n=JY.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=JY}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=LY("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*qY(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*qY(t[e]/255)):t[e]=qY(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let KY=0;class ZY{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:KY++}),this.uuid=SY(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(QY(r[t].image)):e.push(QY(r[t]))}else e=QY(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function QY(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?YY.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $Y=0;class eK extends vY{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eK.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eK.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qq,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qq,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$q,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nX,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gX,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:iX,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:eK.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:AJ;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$Y++}),this.uuid=SY(),this.name="",this.source=new ZY(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new RY(0,0),this.repeat=new RY(1,1),this.center=new RY(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new DY,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(zY("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===xJ?EJ:AJ),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Nq)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Wq:e.x=e.x-Math.floor(e.x);break;case qq:e.x=e.x<0?0:1;break;case Xq:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Wq:e.y=e.y-Math.floor(e.y);break;case qq:e.y=e.y<0?0:1;break;case Xq:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return zY("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===EJ?xJ:yJ}set encoding(e){zY("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===xJ?EJ:AJ}}eK.DEFAULT_IMAGE=null,eK.DEFAULT_MAPPING=Nq,eK.DEFAULT_ANISOTROPY=1;class tK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;tK.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-d)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+d)<s&&Math.abs(u+f)<s&&Math.abs(p+m)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,y=(c+d)/4,x=(u+f)/4,b=(p+m)/4;return e>o&&e>v?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=x/n):o>v?o<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=y/r,i=b/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=x/i,r=b/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nK extends vY{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new tK(0,0,e,t),this.scissorTest=!1,this.viewport=new tK(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==n.encoding&&(zY("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===xJ?EJ:AJ),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:$q,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new eK(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ZY(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rK extends nK{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class iK extends eK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Jq,this.minFilter=Jq,this.wrapR=qq,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class aK extends rK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new iK(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class sK extends eK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Jq,this.minFilter=Jq,this.wrapR=qq,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oK extends rK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new sK(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class lK extends rK{constructor(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLMultipleRenderTargets=!0;const t=this.texture;this.texture=[];for(let n=0;n<e;n++)this.texture[n]=t.clone(),this.texture[n].isRenderTargetTexture=!0}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class cK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,s){let o=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[a+0],h=i[a+1],p=i[a+2],f=i[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==d||l!==h||c!==p){let e=1-s;const t=o*d+l*h+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,s=Math.sin(s*a)/i}const i=s*n;if(o=o*e+d*i,l=l*e+h*i,c=c*e+p*i,u=u*e+f*i,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,a){const s=n[r],o=n[r+1],l=n[r+2],c=n[r+3],u=i[a],d=i[a+1],h=i[a+2],p=i[a+3];return e[t]=s*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-s*h,e[t+2]=l*p+c*h+s*d-o*u,e[t+3]=c*p-s*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),d=o(n/2),h=o(r/2),p=o(i/2);switch(a){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_Y(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+r*l-i*o,this._y=r*c+a*o+i*s-n*l,this._z=i*c+a*l+n*o-r*s,this._w=a*c-n*s-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class uK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;uK.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(hK.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(hK.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*r-s*n),c=2*(s*t-i*r),u=2*(i*n-a*t);return this.x=t+o*l+a*u-s*c,this.y=n+o*c+s*l-i*u,this.z=r+o*u+i*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return dK.copy(this).projectOnVector(e),this.sub(dK)}reflect(e){return this.sub(dK.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(_Y(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dK=new uK,hK=new cK;class pK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(mK.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(mK.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=mK.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,mK):mK.fromBufferAttribute(r,t),mK.applyMatrix4(e.matrixWorld),this.expandByPoint(mK);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),gK.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),gK.copy(n.boundingBox)),gK.applyMatrix4(e.matrixWorld),this.union(gK)}const r=e.children;for(let i=0,a=r.length;i<a;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,mK),mK.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_K),AK.subVectors(this.max,_K),vK.subVectors(e.a,_K),yK.subVectors(e.b,_K),xK.subVectors(e.c,_K),bK.subVectors(yK,vK),wK.subVectors(xK,yK),SK.subVectors(vK,xK);let t=[0,-bK.z,bK.y,0,-wK.z,wK.y,0,-SK.z,SK.y,bK.z,0,-bK.x,wK.z,0,-wK.x,SK.z,0,-SK.x,-bK.y,bK.x,0,-wK.y,wK.x,0,-SK.y,SK.x,0];return!!MK(t,vK,yK,xK,AK)&&(t=[1,0,0,0,1,0,0,0,1],!!MK(t,vK,yK,xK,AK)&&(EK.crossVectors(bK,wK),t=[EK.x,EK.y,EK.z],MK(t,vK,yK,xK,AK)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mK).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(mK).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(fK[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fK[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fK[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fK[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fK[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fK[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fK[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fK[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fK)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const fK=[new uK,new uK,new uK,new uK,new uK,new uK,new uK,new uK],mK=new uK,gK=new pK,vK=new uK,yK=new uK,xK=new uK,bK=new uK,wK=new uK,SK=new uK,_K=new uK,AK=new uK,EK=new uK,CK=new uK;function MK(e,t,n,r,i){for(let a=0,s=e.length-3;a<=s;a+=3){CK.fromArray(e,a);const s=i.x*Math.abs(CK.x)+i.y*Math.abs(CK.y)+i.z*Math.abs(CK.z),o=t.dot(CK),l=n.dot(CK),c=r.dot(CK);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const TK=new pK,kK=new uK,PK=new uK;class RK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):TK.setFromPoints(e).getCenter(n);let r=0;for(let i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;kK.subVectors(e,this.center);const t=kK.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(kK,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(PK.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(kK.copy(e.center).add(PK)),this.expandByPoint(kK.copy(e.center).sub(PK))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const DK=new uK,IK=new uK,BK=new uK,jK=new uK,FK=new uK,LK=new uK,OK=new uK;class NK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,DK)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=DK.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(DK.copy(this.origin).addScaledVector(this.direction,t),DK.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){IK.copy(e).add(t).multiplyScalar(.5),BK.copy(t).sub(e).normalize(),jK.copy(this.origin).sub(IK);const i=.5*e.distanceTo(t),a=-this.direction.dot(BK),s=jK.dot(this.direction),o=-jK.dot(BK),l=jK.lengthSq(),c=Math.abs(1-a*a);let u,d,h,p;if(c>0)if(u=a*o-s,d=a*s-o,p=i*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*s)+d*(a*u+d+2*o)+l}else d=i,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d=-i,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-a*i+s)),d=u>0?-i:Math.min(Math.max(-i,-o),i),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-i,-o),i),h=d*(d+2*o)+l):(u=Math.max(0,-(a*i+s)),d=u>0?i:Math.min(Math.max(-i,-o),i),h=-u*u+d*(d+2*o)+l);else d=a>0?-i:i,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(IK).addScaledVector(BK,d),h}intersectSphere(e,t){DK.subVectors(e.center,this.origin);const n=DK.dot(this.direction),r=DK.dot(DK)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),u>=0?(s=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||s>r?null:((s>n||n!==n)&&(n=s),(o<r||r!==r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,DK)}intersectTriangle(e,t,n,r,i){FK.subVectors(t,e),LK.subVectors(n,e),OK.crossVectors(FK,LK);let a,s=this.direction.dot(OK);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}jK.subVectors(this.origin,e);const o=a*this.direction.dot(LK.crossVectors(jK,LK));if(o<0)return null;const l=a*this.direction.dot(FK.cross(jK));if(l<0)return null;if(o+l>s)return null;const c=-a*jK.dot(OK);return c<0?null:this.at(c/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class zK{constructor(e,t,n,r,i,a,s,o,l,c,u,d,h,p,f,m){zK.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l,c,u,d,h,p,f,m)}set(e,t,n,r,i,a,s,o,l,c,u,d,h,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new zK).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/UK.setFromMatrixColumn(e,0).length(),i=1/UK.setFromMatrixColumn(e,1).length(),a=1/UK.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*u,r=s*c,i=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*u,r=l*c,i=l*u;t[0]=e+i*s,t[4]=r*s-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*u,r=l*c,i=l*u;t[0]=e-i*s,t[4]=-a*u,t[8]=r+n*s,t[1]=n+r*s,t[5]=a*c,t[9]=i-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*u,r=s*c,i=s*u;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=a*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=s*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(GK,e,VK)}lookAt(e,t,n){const r=this.elements;return XK.subVectors(e,t),0===XK.lengthSq()&&(XK.z=1),XK.normalize(),WK.crossVectors(n,XK),0===WK.lengthSq()&&(1===Math.abs(n.z)?XK.x+=1e-4:XK.z+=1e-4,XK.normalize(),WK.crossVectors(n,XK)),WK.normalize(),qK.crossVectors(XK,WK),r[0]=WK.x,r[4]=qK.x,r[8]=XK.x,r[1]=WK.y,r[5]=qK.y,r[9]=XK.y,r[2]=WK.z,r[6]=qK.z,r[10]=XK.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],w=r[0],S=r[4],_=r[8],A=r[12],E=r[1],C=r[5],M=r[9],T=r[13],k=r[2],P=r[6],R=r[10],D=r[14],I=r[3],B=r[7],j=r[11],F=r[15];return i[0]=a*w+s*E+o*k+l*I,i[4]=a*S+s*C+o*P+l*B,i[8]=a*_+s*M+o*R+l*j,i[12]=a*A+s*T+o*D+l*F,i[1]=c*w+u*E+d*k+h*I,i[5]=c*S+u*C+d*P+h*B,i[9]=c*_+u*M+d*R+h*j,i[13]=c*A+u*T+d*D+h*F,i[2]=p*w+f*E+m*k+g*I,i[6]=p*S+f*C+m*P+g*B,i[10]=p*_+f*M+m*R+g*j,i[14]=p*A+f*T+m*D+g*F,i[3]=v*w+y*E+x*k+b*I,i[7]=v*S+y*C+x*P+b*B,i[11]=v*_+y*M+x*R+b*j,i[15]=v*A+y*T+x*D+b*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*o*u-r*l*u-i*s*d+n*l*d+r*s*h-n*o*h)+e[7]*(+t*o*h-t*l*d+i*a*d-r*a*h+r*l*c-i*o*c)+e[11]*(+t*l*u-t*s*h-i*a*u+n*a*h+i*s*c-n*l*c)+e[15]*(-r*s*c-t*o*u+t*s*d+r*a*u-n*a*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*d*l+f*o*h-s*m*h-u*o*g+s*d*g,y=p*d*l-c*m*l-p*o*h+a*m*h+c*o*g-a*d*g,x=c*f*l-p*u*l+p*s*h-a*f*h-c*s*g+a*u*g,b=p*u*o-c*f*o-p*s*d+a*f*d+c*s*m-a*u*m,w=t*v+n*y+r*x+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/w;return e[0]=v*S,e[1]=(f*d*i-u*m*i-f*r*h+n*m*h+u*r*g-n*d*g)*S,e[2]=(s*m*i-f*o*i+f*r*l-n*m*l-s*r*g+n*o*g)*S,e[3]=(u*o*i-s*d*i-u*r*l+n*d*l+s*r*h-n*o*h)*S,e[4]=y*S,e[5]=(c*m*i-p*d*i+p*r*h-t*m*h-c*r*g+t*d*g)*S,e[6]=(p*o*i-a*m*i-p*r*l+t*m*l+a*r*g-t*o*g)*S,e[7]=(a*d*i-c*o*i+c*r*l-t*d*l-a*r*h+t*o*h)*S,e[8]=x*S,e[9]=(p*u*i-c*f*i-p*n*h+t*f*h+c*n*g-t*u*g)*S,e[10]=(a*f*i-p*s*i+p*n*l-t*f*l-a*n*g+t*s*g)*S,e[11]=(c*s*i-a*u*i-c*n*l+t*u*l+a*n*h-t*s*h)*S,e[12]=b*S,e[13]=(c*f*r-p*u*r+p*n*d-t*f*d-c*n*m+t*u*m)*S,e[14]=(p*s*r-a*f*r-p*n*o+t*f*o+a*n*m-t*s*m)*S,e[15]=(a*u*r-c*s*r+c*n*o-t*u*o-a*n*d+t*s*d)*S,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,l=i*a,c=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+n,c*o-r*a,0,l*o-r*s,c*o+r*a,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,s=t._z,o=t._w,l=i+i,c=a+a,u=s+s,d=i*l,h=i*c,p=i*u,f=a*c,m=a*u,g=s*u,v=o*l,y=o*c,x=o*u,b=n.x,w=n.y,S=n.z;return r[0]=(1-(f+g))*b,r[1]=(h+x)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(h-x)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+y)*S,r[9]=(m-v)*S,r[10]=(1-(d+f))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=UK.set(r[0],r[1],r[2]).length();const a=UK.set(r[4],r[5],r[6]).length(),s=UK.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],HK.copy(this);const o=1/i,l=1/a,c=1/s;return HK.elements[0]*=o,HK.elements[1]*=o,HK.elements[2]*=o,HK.elements[4]*=l,HK.elements[5]*=l,HK.elements[6]*=l,HK.elements[8]*=c,HK.elements[9]*=c,HK.elements[10]*=c,t.setFromRotationMatrix(HK),n.x=i,n.y=a,n.z=s,this}makePerspective(e,t,n,r,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mY;const o=this.elements,l=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r);let h,p;if(s===mY)h=-(a+i)/(a-i),p=-2*a*i/(a-i);else{if(s!==gY)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-a/(a-i),p=-a*i/(a-i)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mY;const o=this.elements,l=1/(t-e),c=1/(n-r),u=1/(a-i),d=(t+e)*l,h=(n+r)*c;let p,f;if(s===mY)p=(a+i)*u,f=-2*u;else{if(s!==gY)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=i*u,f=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=f,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const UK=new uK,HK=new zK,GK=new uK(0,0,0),VK=new uK(1,1,1),WK=new uK,qK=new uK,XK=new uK,JK=new zK,YK=new cK;class KK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:KK.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,i=r[0],a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(_Y(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-_Y(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(_Y(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-_Y(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(_Y(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-_Y(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return JK.makeRotationFromQuaternion(e),this.setFromRotationMatrix(JK,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return YK.setFromEuler(this),this.setFromQuaternion(YK,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}KK.DEFAULT_ORDER="XYZ";class ZK{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&(1<<e|0))}}let QK=0;const $K=new uK,eZ=new cK,tZ=new zK,nZ=new uK,rZ=new uK,iZ=new uK,aZ=new cK,sZ=new uK(1,0,0),oZ=new uK(0,1,0),lZ=new uK(0,0,1),cZ={type:"added"},uZ={type:"removed"};class dZ extends vY{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:QK++}),this.uuid=SY(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dZ.DEFAULT_UP.clone();const e=new uK,t=new KK,n=new cK,r=new uK(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new zK},normalMatrix:{value:new DY}}),this.matrix=new zK,this.matrixWorld=new zK,this.matrixAutoUpdate=dZ.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=dZ.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ZK,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return eZ.setFromAxisAngle(e,t),this.quaternion.multiply(eZ),this}rotateOnWorldAxis(e,t){return eZ.setFromAxisAngle(e,t),this.quaternion.premultiply(eZ),this}rotateX(e){return this.rotateOnAxis(sZ,e)}rotateY(e){return this.rotateOnAxis(oZ,e)}rotateZ(e){return this.rotateOnAxis(lZ,e)}translateOnAxis(e,t){return $K.copy(e).applyQuaternion(this.quaternion),this.position.add($K.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(sZ,e)}translateY(e){return this.translateOnAxis(oZ,e)}translateZ(e){return this.translateOnAxis(lZ,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(tZ.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?nZ.copy(e):nZ.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),rZ.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tZ.lookAt(rZ,nZ,this.up):tZ.lookAt(nZ,rZ,this.up),this.quaternion.setFromRotationMatrix(tZ),r&&(tZ.extractRotation(r.matrixWorld),eZ.setFromRotationMatrix(tZ),this.quaternion.premultiply(eZ.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(cZ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(uZ)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),tZ.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),tZ.multiply(e.parent.matrixWorld)),e.applyMatrix4(tZ),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rZ,e,iZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rZ,aZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}dZ.DEFAULT_UP=new uK(0,1,0),dZ.DEFAULT_MATRIX_AUTO_UPDATE=!0,dZ.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const hZ=new uK,pZ=new uK,fZ=new uK,mZ=new uK,gZ=new uK,vZ=new uK,yZ=new uK,xZ=new uK,bZ=new uK,wZ=new uK;let SZ=!1;class _Z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new uK;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),hZ.subVectors(e,t),r.cross(hZ);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){hZ.subVectors(r,t),pZ.subVectors(n,t),fZ.subVectors(e,t);const a=hZ.dot(hZ),s=hZ.dot(pZ),o=hZ.dot(fZ),l=pZ.dot(pZ),c=pZ.dot(fZ),u=a*l-s*s;if(0===u)return i.set(0,0,0),null;const d=1/u,h=(l*o-s*c)*d,p=(a*c-s*o)*d;return i.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,mZ)&&(mZ.x>=0&&mZ.y>=0&&mZ.x+mZ.y<=1)}static getUV(e,t,n,r,i,a,s,o){return!1===SZ&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),SZ=!0),this.getInterpolation(e,t,n,r,i,a,s,o)}static getInterpolation(e,t,n,r,i,a,s,o){return null===this.getBarycoord(e,t,n,r,mZ)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(i,mZ.x),o.addScaledVector(a,mZ.y),o.addScaledVector(s,mZ.z),o)}static isFrontFacing(e,t,n,r){return hZ.subVectors(n,t),pZ.subVectors(e,t),hZ.cross(pZ).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return hZ.subVectors(this.c,this.b),pZ.subVectors(this.a,this.b),.5*hZ.cross(pZ).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _Z.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _Z.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===SZ&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),SZ=!0),_Z.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return _Z.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return _Z.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _Z.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,s;gZ.subVectors(r,n),vZ.subVectors(i,n),xZ.subVectors(e,n);const o=gZ.dot(xZ),l=vZ.dot(xZ);if(o<=0&&l<=0)return t.copy(n);bZ.subVectors(e,r);const c=gZ.dot(bZ),u=vZ.dot(bZ);if(c>=0&&u<=c)return t.copy(r);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(gZ,a);wZ.subVectors(e,i);const h=gZ.dot(wZ),p=vZ.dot(wZ);if(p>=0&&h<=p)return t.copy(i);const f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(vZ,s);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return yZ.subVectors(i,r),s=(u-c)/(u-c+(h-p)),t.copy(r).addScaledVector(yZ,s);const g=1/(m+f+d);return a=f*g,s=d*g,t.copy(n).addScaledVector(gZ,a).addScaledVector(vZ,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const AZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},EZ={h:0,s:0,l:0},CZ={h:0,s:0,l:0};function MZ(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class TZ{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EJ;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,WY.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:WY.workingColorSpace;return this.r=e,this.g=t,this.b=n,WY.toWorkingColorSpace(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:WY.workingColorSpace;if(e=AY(e,1),t=_Y(t,0,1),n=_Y(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=MZ(i,r,e+1/3),this.g=MZ(i,r,e),this.b=MZ(i,r,e-1/3)}return WY.toWorkingColorSpace(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EJ;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const a=t[1],s=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=t[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===i)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EJ;const n=AZ[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qY(e.r),this.g=qY(e.g),this.b=qY(e.b),this}copyLinearToSRGB(e){return this.r=XY(e.r),this.g=XY(e.g),this.b=XY(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:EJ;return WY.fromWorkingColorSpace(kZ.copy(this),e),65536*Math.round(_Y(255*kZ.r,0,255))+256*Math.round(_Y(255*kZ.g,0,255))+Math.round(_Y(255*kZ.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:EJ;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WY.workingColorSpace;WY.fromWorkingColorSpace(kZ.copy(this),t);const n=kZ.r,r=kZ.g,i=kZ.b,a=Math.max(n,r,i),s=Math.min(n,r,i);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case n:o=(r-i)/e+(r<i?6:0);break;case r:o=(i-n)/e+2;break;case i:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WY.workingColorSpace;return WY.fromWorkingColorSpace(kZ.copy(this),t),e.r=kZ.r,e.g=kZ.g,e.b=kZ.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:EJ;WY.fromWorkingColorSpace(kZ.copy(this),e);const t=kZ.r,n=kZ.g,r=kZ.b;return e!==EJ?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}offsetHSL(e,t,n){return this.getHSL(EZ),this.setHSL(EZ.h+e,EZ.s+t,EZ.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(EZ),e.getHSL(CZ);const n=EY(EZ.h,CZ.h,t),r=EY(EZ.s,CZ.s,t),i=EY(EZ.l,CZ.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const kZ=new TZ;TZ.NAMES=AZ;let PZ=0;class RZ extends vY{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:PZ++}),this.uuid=SY(),this.name="",this.type="Material",this.blending=JW,this.side=GW,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=lq,this.blendDst=cq,this.blendEquation=$W,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new TZ(0,0,0),this.blendAlpha=0,this.depthFunc=Sq,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=JJ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=BJ,this.stencilZFail=BJ,this.stencilZPass=BJ,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==JW&&(n.blending=this.blending),this.side!==GW&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==lq&&(n.blendSrc=this.blendSrc),this.blendDst!==cq&&(n.blendDst=this.blendDst),this.blendEquation!==$W&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Sq&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==JJ&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==BJ&&(n.stencilFail=this.stencilFail),this.stencilZFail!==BJ&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==BJ&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class DZ extends RZ{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new TZ(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mq,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const IZ=BZ();function BZ(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,i[l]=-e-1,i[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,i[l]=13,i[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[l]=e|t}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function jZ(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=_Y(e,-65504,65504),IZ.floatView[0]=e;const t=IZ.uint32View[0],n=t>>23&511;return IZ.baseTable[n]+((8388607&t)>>IZ.shiftTable[n])}function FZ(e){const t=e>>10;return IZ.uint32View[0]=IZ.mantissaTable[IZ.offsetTable[t]+(1023&e)]+IZ.exponentTable[t],IZ.floatView[0]}const LZ={toHalfFloat:jZ,fromHalfFloat:FZ},OZ=new uK,NZ=new RY;class zZ{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=rY,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=uX,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)NZ.fromBufferAttribute(this,t),NZ.applyMatrix3(e),this.setXY(t,NZ.x,NZ.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)OZ.fromBufferAttribute(this,t),OZ.applyMatrix3(e),this.setXYZ(t,OZ.x,OZ.y,OZ.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)OZ.fromBufferAttribute(this,t),OZ.applyMatrix4(e),this.setXYZ(t,OZ.x,OZ.y,OZ.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)OZ.fromBufferAttribute(this,t),OZ.applyNormalMatrix(e),this.setXYZ(t,OZ.x,OZ.y,OZ.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)OZ.fromBufferAttribute(this,t),OZ.transformDirection(e),this.setXYZ(t,OZ.x,OZ.y,OZ.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=TY(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=kY(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=TY(t,this.array)),t}setX(e,t){return this.normalized&&(t=kY(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=TY(t,this.array)),t}setY(e,t){return this.normalized&&(t=kY(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=TY(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kY(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=TY(t,this.array)),t}setW(e,t){return this.normalized&&(t=kY(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array),r=kY(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array),r=kY(r,this.array),i=kY(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==rY&&(e.usage=this.usage),e}}class UZ extends zZ{constructor(e,t,n){super(new Int8Array(e),t,n)}}class HZ extends zZ{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class GZ extends zZ{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class VZ extends zZ{constructor(e,t,n){super(new Int16Array(e),t,n)}}class WZ extends zZ{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class qZ extends zZ{constructor(e,t,n){super(new Int32Array(e),t,n)}}class XZ extends zZ{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class JZ extends zZ{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=FZ(this.array[e*this.itemSize]);return this.normalized&&(t=TY(t,this.array)),t}setX(e,t){return this.normalized&&(t=kY(t,this.array)),this.array[e*this.itemSize]=jZ(t),this}getY(e){let t=FZ(this.array[e*this.itemSize+1]);return this.normalized&&(t=TY(t,this.array)),t}setY(e,t){return this.normalized&&(t=kY(t,this.array)),this.array[e*this.itemSize+1]=jZ(t),this}getZ(e){let t=FZ(this.array[e*this.itemSize+2]);return this.normalized&&(t=TY(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kY(t,this.array)),this.array[e*this.itemSize+2]=jZ(t),this}getW(e){let t=FZ(this.array[e*this.itemSize+3]);return this.normalized&&(t=TY(t,this.array)),t}setW(e,t){return this.normalized&&(t=kY(t,this.array)),this.array[e*this.itemSize+3]=jZ(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array)),this.array[e+0]=jZ(t),this.array[e+1]=jZ(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array),r=kY(r,this.array)),this.array[e+0]=jZ(t),this.array[e+1]=jZ(n),this.array[e+2]=jZ(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array),r=kY(r,this.array),i=kY(i,this.array)),this.array[e+0]=jZ(t),this.array[e+1]=jZ(n),this.array[e+2]=jZ(r),this.array[e+3]=jZ(i),this}}class YZ extends zZ{constructor(e,t,n){super(new Float32Array(e),t,n)}}class KZ extends zZ{constructor(e,t,n){super(new Float64Array(e),t,n)}}let ZZ=0;const QZ=new zK,$Z=new dZ,eQ=new uK,tQ=new pK,nQ=new pK,rQ=new uK;class iQ extends vY{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ZZ++}),this.uuid=SY(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(BY(e)?XZ:WZ)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new DY).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return QZ.makeRotationFromQuaternion(e),this.applyMatrix4(QZ),this}rotateX(e){return QZ.makeRotationX(e),this.applyMatrix4(QZ),this}rotateY(e){return QZ.makeRotationY(e),this.applyMatrix4(QZ),this}rotateZ(e){return QZ.makeRotationZ(e),this.applyMatrix4(QZ),this}translate(e,t,n){return QZ.makeTranslation(e,t,n),this.applyMatrix4(QZ),this}scale(e,t,n){return QZ.makeScale(e,t,n),this.applyMatrix4(QZ),this}lookAt(e){return $Z.lookAt(e),$Z.updateMatrix(),this.applyMatrix4($Z.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(eQ).negate(),this.translate(eQ.x,eQ.y,eQ.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new YZ(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new pK);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new uK(-1/0,-1/0,-1/0),new uK(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];tQ.setFromBufferAttribute(e),this.morphTargetsRelative?(rQ.addVectors(this.boundingBox.min,tQ.min),this.boundingBox.expandByPoint(rQ),rQ.addVectors(this.boundingBox.max,tQ.max),this.boundingBox.expandByPoint(rQ)):(this.boundingBox.expandByPoint(tQ.min),this.boundingBox.expandByPoint(tQ.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new RK);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new uK,1/0);if(e){const n=this.boundingSphere.center;if(tQ.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];nQ.setFromBufferAttribute(n),this.morphTargetsRelative?(rQ.addVectors(tQ.min,nQ.min),tQ.expandByPoint(rQ),rQ.addVectors(tQ.max,nQ.max),tQ.expandByPoint(rQ)):(tQ.expandByPoint(nQ.min),tQ.expandByPoint(nQ.max))}tQ.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)rQ.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(rQ));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],s=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)rQ.fromBufferAttribute(a,t),s&&(eQ.fromBufferAttribute(e,t),rQ.add(eQ)),r=Math.max(r,n.distanceToSquared(rQ))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new zZ(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<s;E++)l[E]=new uK,c[E]=new uK;const u=new uK,d=new uK,h=new uK,p=new RY,f=new RY,m=new RY,g=new uK,v=new uK;function y(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(i),v.copy(h).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let E=0,C=x.length;E<C;++E){const e=x[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)y(n[r+0],n[r+1],n[r+2])}const b=new uK,w=new uK,S=new uK,_=new uK;function A(e){S.fromArray(i,3*e),_.copy(S);const t=l[e];b.copy(t),b.sub(S.multiplyScalar(S.dot(t))).normalize(),w.crossVectors(_,t);const n=w.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let E=0,C=x.length;E<C;++E){const e=x[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)A(n[r+0]),A(n[r+1]),A(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new zZ(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new uK,i=new uK,a=new uK,s=new uK,o=new uK,l=new uK,c=new uK,u=new uK;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)rQ.fromBufferAttribute(e,t),rQ.normalize(),e.setXYZ(t,rQ.x,rQ.y,rQ.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)a[o++]=n[s++]}return new zZ(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new iQ,n=this.index.array,r=this.attributes;for(const s in r){const i=e(r[s],n);t.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],a=i[s];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);r.push(i)}t.morphAttributes[s]=r}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const e=a[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const r={};let i=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[o]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const aQ=new zK,sQ=new NK,oQ=new RK,lQ=new uK,cQ=new uK,uQ=new uK,dQ=new uK,hQ=new uK,pQ=new uK,fQ=new RY,mQ=new RY,gQ=new RY,vQ=new uK,yQ=new uK,xQ=new uK,bQ=new uK,wQ=new uK;class SQ extends dZ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iQ,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new DZ;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(i&&s){pQ.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],o=i[n];0!==r&&(hQ.fromBufferAttribute(o,e),a?pQ.addScaledVector(hQ,r):pQ.addScaledVector(hQ.sub(t),r))}t.add(pQ)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),oQ.copy(n.boundingSphere),oQ.applyMatrix4(i),sQ.copy(e.ray).recast(e.near),!1===oQ.containsPoint(sQ.origin)){if(null===sQ.intersectSphere(oQ,lQ))return;if(sQ.origin.distanceToSquared(lQ)>(e.far-e.near)**2)return}aQ.copy(i).invert(),sQ.copy(e.ray).applyMatrix4(aQ),null!==n.boundingBox&&!1===sQ.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,sQ)}}_computeIntersections(e,t,n){let r;const i=this.geometry,a=this.material,s=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==s)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const i=d[p],o=a[i.materialIndex];for(let a=Math.max(i.start,h.start),d=Math.min(s.count,Math.min(i.start+i.count,h.start+h.count));a<d;a+=3){r=_Q(this,o,e,n,l,c,u,s.getX(a),s.getX(a+1),s.getX(a+2)),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);i<o;i+=3){r=_Q(this,a,e,n,l,c,u,s.getX(i),s.getX(i+1),s.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}else if(void 0!==o)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const i=d[p],s=a[i.materialIndex];for(let a=Math.max(i.start,h.start),d=Math.min(o.count,Math.min(i.start+i.count,h.start+h.count));a<d;a+=3){r=_Q(this,s,e,n,l,c,u,a,a+1,a+2),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);i<s;i+=3){r=_Q(this,a,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}}}function _Q(e,t,n,r,i,a,s,o,l,c){e.getVertexPosition(o,cQ),e.getVertexPosition(l,uQ),e.getVertexPosition(c,dQ);const u=function(e,t,n,r,i,a,s,o){let l;if(l=t.side===VW?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,t.side===GW,o),null===l)return null;wQ.copy(o),wQ.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(wQ);return c<n.near||c>n.far?null:{distance:c,point:wQ.clone(),object:e}}(e,t,n,r,cQ,uQ,dQ,bQ);if(u){i&&(fQ.fromBufferAttribute(i,o),mQ.fromBufferAttribute(i,l),gQ.fromBufferAttribute(i,c),u.uv=_Z.getInterpolation(bQ,cQ,uQ,dQ,fQ,mQ,gQ,new RY)),a&&(fQ.fromBufferAttribute(a,o),mQ.fromBufferAttribute(a,l),gQ.fromBufferAttribute(a,c),u.uv1=_Z.getInterpolation(bQ,cQ,uQ,dQ,fQ,mQ,gQ,new RY),u.uv2=u.uv1),s&&(vQ.fromBufferAttribute(s,o),yQ.fromBufferAttribute(s,l),xQ.fromBufferAttribute(s,c),u.normal=_Z.getInterpolation(bQ,cQ,uQ,dQ,vQ,yQ,xQ,new uK),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const e={a:o,b:l,c:c,normal:new uK,materialIndex:0};_Z.getNormal(cQ,uQ,dQ,e.normal),u.face=e}return u}class AQ extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const s=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const o=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,r,i,a,p,f,m,g,v){const y=a/m,x=p/g,b=a/2,w=p/2,S=f/2,_=m+1,A=g+1;let E=0,C=0;const M=new uK;for(let s=0;s<A;s++){const a=s*x-w;for(let o=0;o<_;o++){const d=o*y-b;M[e]=d*r,M[t]=a*i,M[n]=S,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=f>0?1:-1,c.push(M.x,M.y,M.z),u.push(o/m),u.push(1-s/g),E+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=d+e+_*s,n=d+e+_*(s+1),r=d+(e+1)+_*(s+1),i=d+(e+1)+_*s;o.push(t,n,i),o.push(n,r,i),C+=6}s.addGroup(h,C,v),h+=C,d+=E}p("z","y","x",-1,-1,n,t,e,a,i,0),p("z","y","x",1,-1,n,t,-e,a,i,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new YZ(l,3)),this.setAttribute("normal",new YZ(c,3)),this.setAttribute("uv",new YZ(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new AQ(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function EQ(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function CQ(e){const t={};for(let n=0;n<e.length;n++){const r=EQ(e[n]);for(const e in r)t[e]=r[e]}return t}function MQ(e){return null===e.getRenderTarget()?e.outputColorSpace:WY.workingColorSpace}const TQ={clone:EQ,merge:CQ};class kQ extends RZ{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=EQ(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class PQ extends dZ{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zK,this.projectionMatrix=new zK,this.projectionMatrixInverse=new zK,this.coordinateSystem=mY}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class RQ extends PQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*wY*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*bY*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*wY*Math.atan(Math.tan(.5*bY*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*bY*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/s,r*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const DQ=-90;class IQ extends dZ{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new RQ(DQ,1,e,t);r.layers=this.layers,this.add(r);const i=new RQ(DQ,1,e,t);i.layers=this.layers,this.add(i);const a=new RQ(DQ,1,e,t);a.layers=this.layers,this.add(a);const s=new RQ(DQ,1,e,t);s.layers=this.layers,this.add(s);const o=new RQ(DQ,1,e,t);o.layers=this.layers,this.add(o);const l=new RQ(DQ,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,s,o]=t;for(const l of t)this.remove(l);if(e===mY)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==gY)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,a,s,o,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class BQ extends eK{constructor(e,t,n,r,i,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:zq,n,r,i,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class jQ extends rK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(zY("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===xJ?EJ:AJ),this.texture=new BQ(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:$q}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new AQ(5,5,5),s=new kQ({name:"CubemapFromEquirect",uniforms:EQ(n),vertexShader:r,fragmentShader:i,side:VW,blending:XW});s.uniforms.tEquirect.value=t;const o=new SQ(a,s),l=t.minFilter;t.minFilter===nX&&(t.minFilter=$q);return new IQ(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}const FQ=new uK,LQ=new uK,OQ=new DY;class NQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=FQ.subVectors(n,t).cross(LQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(FQ),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||OQ.getNormalMatrix(e),r=this.coplanarPoint(FQ).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const zQ=new RK,UQ=new uK;class HQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NQ,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NQ,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new NQ,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new NQ,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new NQ,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new NQ;this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mY;const n=this.planes,r=e.elements,i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],p=r[9],f=r[10],m=r[11],g=r[12],v=r[13],y=r[14],x=r[15];if(n[0].setComponents(o-i,d-l,m-h,x-g).normalize(),n[1].setComponents(o+i,d+l,m+h,x+g).normalize(),n[2].setComponents(o+a,d+c,m+p,x+v).normalize(),n[3].setComponents(o-a,d-c,m-p,x-v).normalize(),n[4].setComponents(o-s,d-u,m-f,x-y).normalize(),t===mY)n[5].setComponents(o+s,d+u,m+f,x+y).normalize();else{if(t!==gY)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),zQ.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),zQ.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(zQ)}intersectsSprite(e){return zQ.center.set(0,0,0),zQ.radius=.7071067811865476,zQ.applyMatrix4(e.matrixWorld),this.intersectsSphere(zQ)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(UQ.x=r.normal.x>0?e.max.x:e.min.x,UQ.y=r.normal.y>0?e.max.y:e.min.y,UQ.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(UQ)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function GQ(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function VQ(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=r.get(t);if(void 0===a)r.set(t,function(t,r){const i=t.array,a=t.usage,s=i.byteLength,o=e.createBuffer();let l;if(e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback(),i instanceof Float32Array)l=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=e.HALF_FLOAT}else l=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)l=e.SHORT;else if(i instanceof Uint32Array)l=e.UNSIGNED_INT;else if(i instanceof Int32Array)l=e.INT;else if(i instanceof Int8Array)l=e.BYTE;else if(i instanceof Uint8Array)l=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);l=e.UNSIGNED_BYTE}return{buffer:o,type:l,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:s}}(t,i));else if(a.version<t.version){if(a.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,r,i){const a=r.array,s=r._updateRange,o=r.updateRanges;if(e.bindBuffer(i,t),-1===s.count&&0===o.length&&e.bufferSubData(i,0,a),0!==o.length){for(let t=0,r=o.length;t<r;t++){const r=o[t];n?e.bufferSubData(i,r.start*a.BYTES_PER_ELEMENT,a,r.start,r.count):e.bufferSubData(i,r.start*a.BYTES_PER_ELEMENT,a.subarray(r.start,r.start+r.count))}r.clearUpdateRanges()}-1!==s.count&&(n?e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}(a.buffer,t,i),a.version=t.version}}}}class WQ extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,s=Math.floor(n),o=Math.floor(r),l=s+1,c=o+1,u=e/s,d=t/o,h=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*d-a;for(let t=0;t<l;t++){const n=t*u-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;h.push(t,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new YZ(p,3)),this.setAttribute("normal",new YZ(f,3)),this.setAttribute("uv",new YZ(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WQ(e.width,e.height,e.widthSegments,e.heightSegments)}}const qQ={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},XQ={common:{diffuse:{value:new TZ(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new DY},alphaMap:{value:null},alphaMapTransform:{value:new DY},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new DY}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new DY}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new DY}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new DY},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new DY},normalScale:{value:new RY(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new DY},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new DY}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new DY}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new DY}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new TZ(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new TZ(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new DY},alphaTest:{value:0},uvTransform:{value:new DY}},sprite:{diffuse:{value:new TZ(16777215)},opacity:{value:1},center:{value:new RY(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new DY},alphaMap:{value:null},alphaMapTransform:{value:new DY},alphaTest:{value:0}}},JQ={basic:{uniforms:CQ([XQ.common,XQ.specularmap,XQ.envmap,XQ.aomap,XQ.lightmap,XQ.fog]),vertexShader:qQ.meshbasic_vert,fragmentShader:qQ.meshbasic_frag},lambert:{uniforms:CQ([XQ.common,XQ.specularmap,XQ.envmap,XQ.aomap,XQ.lightmap,XQ.emissivemap,XQ.bumpmap,XQ.normalmap,XQ.displacementmap,XQ.fog,XQ.lights,{emissive:{value:new TZ(0)}}]),vertexShader:qQ.meshlambert_vert,fragmentShader:qQ.meshlambert_frag},phong:{uniforms:CQ([XQ.common,XQ.specularmap,XQ.envmap,XQ.aomap,XQ.lightmap,XQ.emissivemap,XQ.bumpmap,XQ.normalmap,XQ.displacementmap,XQ.fog,XQ.lights,{emissive:{value:new TZ(0)},specular:{value:new TZ(1118481)},shininess:{value:30}}]),vertexShader:qQ.meshphong_vert,fragmentShader:qQ.meshphong_frag},standard:{uniforms:CQ([XQ.common,XQ.envmap,XQ.aomap,XQ.lightmap,XQ.emissivemap,XQ.bumpmap,XQ.normalmap,XQ.displacementmap,XQ.roughnessmap,XQ.metalnessmap,XQ.fog,XQ.lights,{emissive:{value:new TZ(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qQ.meshphysical_vert,fragmentShader:qQ.meshphysical_frag},toon:{uniforms:CQ([XQ.common,XQ.aomap,XQ.lightmap,XQ.emissivemap,XQ.bumpmap,XQ.normalmap,XQ.displacementmap,XQ.gradientmap,XQ.fog,XQ.lights,{emissive:{value:new TZ(0)}}]),vertexShader:qQ.meshtoon_vert,fragmentShader:qQ.meshtoon_frag},matcap:{uniforms:CQ([XQ.common,XQ.bumpmap,XQ.normalmap,XQ.displacementmap,XQ.fog,{matcap:{value:null}}]),vertexShader:qQ.meshmatcap_vert,fragmentShader:qQ.meshmatcap_frag},points:{uniforms:CQ([XQ.points,XQ.fog]),vertexShader:qQ.points_vert,fragmentShader:qQ.points_frag},dashed:{uniforms:CQ([XQ.common,XQ.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qQ.linedashed_vert,fragmentShader:qQ.linedashed_frag},depth:{uniforms:CQ([XQ.common,XQ.displacementmap]),vertexShader:qQ.depth_vert,fragmentShader:qQ.depth_frag},normal:{uniforms:CQ([XQ.common,XQ.bumpmap,XQ.normalmap,XQ.displacementmap,{opacity:{value:1}}]),vertexShader:qQ.meshnormal_vert,fragmentShader:qQ.meshnormal_frag},sprite:{uniforms:CQ([XQ.sprite,XQ.fog]),vertexShader:qQ.sprite_vert,fragmentShader:qQ.sprite_frag},background:{uniforms:{uvTransform:{value:new DY},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:qQ.background_vert,fragmentShader:qQ.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:qQ.backgroundCube_vert,fragmentShader:qQ.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qQ.cube_vert,fragmentShader:qQ.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qQ.equirect_vert,fragmentShader:qQ.equirect_frag},distanceRGBA:{uniforms:CQ([XQ.common,XQ.displacementmap,{referencePosition:{value:new uK},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qQ.distanceRGBA_vert,fragmentShader:qQ.distanceRGBA_frag},shadow:{uniforms:CQ([XQ.lights,XQ.fog,{color:{value:new TZ(0)},opacity:{value:1}}]),vertexShader:qQ.shadow_vert,fragmentShader:qQ.shadow_frag}};JQ.physical={uniforms:CQ([JQ.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new DY},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new DY},clearcoatNormalScale:{value:new RY(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new DY},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new DY},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new DY},sheen:{value:0},sheenColor:{value:new TZ(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new DY},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new DY},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new DY},transmissionSamplerSize:{value:new RY},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new DY},attenuationDistance:{value:0},attenuationColor:{value:new TZ(0)},specularColor:{value:new TZ(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new DY},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new DY},anisotropyVector:{value:new RY},anisotropyMap:{value:null},anisotropyMapTransform:{value:new DY}}]),vertexShader:qQ.meshphysical_vert,fragmentShader:qQ.meshphysical_frag};const YQ={r:0,b:0,g:0};function KQ(e,t,n,r,i,a,s){const o=new TZ(0);let l,c,u=!0===a?0:1,d=null,h=0,p=null;function f(t,n){t.getRGB(YQ,MQ(e)),r.buffers.color.setClear(YQ.r,YQ.g,YQ.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),u=t,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(o,u)},render:function(a,m){let g=!1,v=!0===m.isScene?m.background:null;if(v&&v.isTexture){v=(m.backgroundBlurriness>0?n:t).get(v)}null===v?f(o,u):v&&v.isColor&&(f(v,1),g=!0);const y=e.xr.getEnvironmentBlendMode();"additive"===y?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===y&&r.buffers.color.setClear(0,0,0,0,s),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Vq)?(void 0===c&&(c=new SQ(new AQ(1,1,1),new kQ({name:"BackgroundCubeMaterial",uniforms:EQ(JQ.backgroundCube.uniforms),vertexShader:JQ.backgroundCube.vertexShader,fragmentShader:JQ.backgroundCube.fragmentShader,side:VW,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=WY.getTransfer(v.colorSpace)!==PJ,d===v&&h===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=v,h=v.version,p=e.toneMapping),c.layers.enableAll(),a.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new SQ(new WQ(2,2),new kQ({name:"BackgroundMaterial",uniforms:EQ(JQ.background.uniforms),vertexShader:JQ.background.vertexShader,fragmentShader:JQ.background.fragmentShader,side:GW,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=WY.getTransfer(v.colorSpace)!==PJ,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),d===v&&h===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=v,h=v.version,p=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}}}function ZQ(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==a,o={},l=p(null);let c=l,u=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,r,i,a,s,o){!0===o?e.vertexAttribIPointer(t,n,r,a,s):e.vertexAttribPointer(t,n,r,i,a,s)}function x(){b(),u=!0,c!==l&&(c=l,d(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,x,b){let w=!1;if(s){const t=function(t,n,i){const s=!0===i.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=u);return u}(x,h,l);c!==t&&(c=t,d(c.object)),w=function(e,t,n,r){const i=c.attributes,a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const t=i[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==r}(i,x,h,b),w&&function(e,t,n,r){const i={},a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let t=a[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,s++}}c.attributes=i,c.attributesNum=s,c.index=r}(i,x,h,b)}else{const e=!0===l.wireframe;c.geometry===x.id&&c.program===h.id&&c.wireframe===e||(c.geometry=x.id,c.program=h.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(w||u)&&(u=!1,function(i,a,s,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const a=c[t];if(a.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,p=!0===r.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||s.gpuType===lX);if(s.isInterleavedBufferAttribute){const n=s.data,r=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)g(a.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)y(a.location+e,l/a.locationSize,d,t,r*h,(c+l/a.locationSize*e)*h,p)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)g(a.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)y(a.location+e,l/a.locationSize,d,t,l*h,l/a.locationSize*e*h,p)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}v()}(i,l,h,x),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:x,resetDefaultState:b,dispose:function(){x();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function QQ(e,t,n,r){const i=r.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,s,o){if(0===o)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,s,o),n.update(s,a,o)},this.renderMultiDraw=function(e,r,i){if(0===i)return;const s=t.get("WEBGL_multi_draw");if(null===s)for(let t=0;t<i;t++)this.render(e[t],r[t]);else{s.multiDrawArraysWEBGL(a,e,0,r,0,i);let t=0;for(let e=0;e<i;e++)t+=r[e];n.update(t,a,1)}}}function $Q(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const o=i(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=d>0,x=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function e$(e){const t=this;let n=null,r=0,i=!1,a=!1;const s=new NQ,o=new DY,l={value:null,needsUpdate:!1};function c(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==a;++n,l+=4)s.copy(e[n]).applyMatrix4(i,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,o,u){const d=s.clippingPlanes,h=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(!i||null===d||0===d.length||a&&!p)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=a?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=c(d,o,t,u);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function t$(e){let t=new WeakMap;function n(e,t){return t===Hq?e.mapping=zq:t===Gq&&(e.mapping=Uq),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping;if(a===Hq||a===Gq){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const s=new jQ(a.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class n$ extends PQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const r$=[.125,.215,.35,.446,.526,.582],i$=20,a$=new n$,s$=new TZ;let o$=null,l$=0,c$=0;const u$=(1+Math.sqrt(5))/2,d$=1/u$,h$=[new uK(1,1,1),new uK(-1,1,1),new uK(1,1,-1),new uK(-1,1,-1),new uK(0,u$,d$),new uK(0,u$,-d$),new uK(d$,0,u$),new uK(-d$,0,u$),new uK(u$,d$,0),new uK(-u$,d$,0)];class p${constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;o$=this._renderer.getRenderTarget(),l$=this._renderer.getActiveCubeFace(),c$=this._renderer.getActiveMipmapLevel(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=v$(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=g$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(o$,l$,c$),e.scissorTest=!1,m$(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zq||e.mapping===Uq?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),o$=this._renderer.getRenderTarget(),l$=this._renderer.getActiveCubeFace(),c$=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:$q,minFilter:$q,generateMipmaps:!1,type:dX,format:gX,colorSpace:CJ,depthBuffer:!1},r=f$(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=f$(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const a=e-4+1+r$.length;for(let s=0;s<a;s++){const a=Math.pow(2,i);n.push(a);let o=1/a;s>e-4?o=r$[s-e+4-1]:0===s&&(o=0),r.push(o);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*h),y=new Float32Array(m*p*h),x=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),y.set(d,m*p*e);const i=[e,e,e,e,e,e];x.set(i,g*p*e)}const b=new iQ;b.setAttribute("position",new zZ(v,f)),b.setAttribute("uv",new zZ(y,m)),b.setAttribute("faceIndex",new zZ(x,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(i$),i=new uK(0,1,0),a=new kQ({name:"SphericalGaussianBlur",defines:{n:i$,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:XW,depthTest:!1,depthWrite:!1});return a}(r,e,t)}return r}_compileMaterial(e){const t=new SQ(this._lodPlanes[0],e);this._renderer.compile(t,a$)}_sceneToCubeUV(e,t,n,r){const i=new RQ(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(s$),o.toneMapping=Pq,o.autoClear=!1;const u=new DZ({name:"PMREM.Background",side:VW,depthWrite:!1,depthTest:!1}),d=new SQ(new AQ,u);let h=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy(s$),h=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,a[f],0),i.lookAt(s[f],0,0)):1===t?(i.up.set(0,0,a[f]),i.lookAt(0,s[f],0)):(i.up.set(0,a[f],0),i.lookAt(0,0,s[f]));const n=this._cubeSize;m$(r,t*n,f>2?n:0,n,n),o.setRenderTarget(r),h&&o.render(d,i),o.render(e,i)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===zq||e.mapping===Uq;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=v$()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=g$());const i=r?this._cubemapMaterial:this._equirectMaterial,a=new SQ(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const s=this._cubeSize;m$(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,a$)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=h$[(r-1)%h$.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new SQ(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,p=i/h,f=isFinite(i)?1+Math.floor(3*p):i$;f>i$&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(i$));const m=[];let g=0;for(let x=0;x<i$;++x){const e=x/p,t=Math.exp(-e*e/2);m.push(t),0===x?g+=t:x<f&&(g+=2*t)}for(let x=0;x<m.length;x++)m[x]=m[x]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const y=this._sizeLods[r];m$(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(c,a$)}}function f$(e,t,n){const r=new rK(e,t,n);return r.texture.mapping=Vq,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function m$(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function g$(){return new kQ({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:XW,depthTest:!1,depthWrite:!1})}function v$(){return new kQ({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:XW,depthTest:!1,depthWrite:!1})}function y$(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping,s=a===Hq||a===Gq,o=a===zq||a===Uq;if(s||o){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new p$(e)),r=s?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const a=i.image;if(s&&a&&a.height>0||o&&a&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(a)){null===n&&(n=new p$(e));const a=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function x$(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function b$(e,t,n,r){const i={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);for(const n in o.morphAttributes){const e=o.morphAttributes[n];for(let n=0,r=e.length;n<r;n++)t.remove(e[n])}o.removeEventListener("dispose",s),delete i[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;{const e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const o=new(BY(n)?XZ:WZ)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const a in r)t.update(r[a],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const a in i){const n=i[a];for(let r=0,i=n.length;r<i;r++)t.update(n[r],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function w$(e,t,n,r){const i=r.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,s,t*o),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(i)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](a,l,s,r*o,c),n.update(l,a,c)},this.renderMultiDraw=function(e,r,i){if(0===i)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<i;t++)this.render(e[t]/o,r[t]);else{l.multiDrawElementsWEBGL(a,r,0,s,e,0,i);let t=0;for(let e=0;e<i;e++)t+=r[e];n.update(t,a,1)}}}function S$(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function _$(e,t){return e[0]-t[0]}function A$(e,t){return Math.abs(t[1])-Math.abs(e[1])}function E$(e,t,n){const r={},i=new Float32Array(8),a=new WeakMap,s=new tK,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==h?h.length:0;let f=a.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let _=0;!0===v&&(_=1),!0===y&&(_=2),!0===x&&(_=3);let A=c.attributes.position.count*_,E=1;A>t.maxTextureSize&&(E=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);const C=new Float32Array(A*E*4*p),M=new iK(C,A,E,p);M.type=uX,M.needsUpdate=!0;const T=4*_;for(let P=0;P<p;P++){const R=b[P],D=w[P],I=S[P],B=A*E*4*P;for(let j=0;j<R.count;j++){const F=j*T;!0===v&&(s.fromBufferAttribute(R,j),C[B+F+0]=s.x,C[B+F+1]=s.y,C[B+F+2]=s.z,C[B+F+3]=0),!0===y&&(s.fromBufferAttribute(D,j),C[B+F+4]=s.x,C[B+F+5]=s.y,C[B+F+6]=s.z,C[B+F+7]=0),!0===x&&(s.fromBufferAttribute(I,j),C[B+F+8]=s.x,C[B+F+9]=s.y,C[B+F+10]=s.z,C[B+F+11]=4===I.itemSize?s.w:1)}}function k(){M.dispose(),a.delete(c),c.removeEventListener("dispose",k)}f={count:p,texture:M,size:new RY(A,E)},a.set(c,f),c.addEventListener("dispose",k)}let m=0;for(let L=0;L<d.length;L++)m+=d[L];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const O=void 0===d?0:d.length;let N=r[c.id];if(void 0===N||N.length!==O){N=[];for(let V=0;V<O;V++)N[V]=[V,0];r[c.id]=N}for(let W=0;W<O;W++){const q=N[W];q[0]=W,q[1]=d[W]}N.sort(A$);for(let X=0;X<8;X++)X<O&&N[X][1]?(o[X][0]=N[X][0],o[X][1]=N[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(_$);const z=c.morphAttributes.position,U=c.morphAttributes.normal;let H=0;for(let J=0;J<8;J++){const Y=o[J],K=Y[0],Z=Y[1];K!==Number.MAX_SAFE_INTEGER&&Z?(z&&c.getAttribute("morphTarget"+J)!==z[K]&&c.setAttribute("morphTarget"+J,z[K]),U&&c.getAttribute("morphNormal"+J)!==U[K]&&c.setAttribute("morphNormal"+J,U[K]),i[J]=Z,H+=Z):(z&&!0===c.hasAttribute("morphTarget"+J)&&c.deleteAttribute("morphTarget"+J),U&&!0===c.hasAttribute("morphNormal"+J)&&c.deleteAttribute("morphNormal"+J),i[J]=0)}const G=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(e,"morphTargetBaseInfluence",G),u.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function C$(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const o=r.render.frame,l=s.geometry,c=t.get(s,l);if(i.get(c)!==o&&(t.update(c),i.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),i.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),i.set(s,o))),s.isSkinnedMesh){const e=s.skeleton;i.get(e)!==o&&(e.update(),i.set(e,o))}return c},dispose:function(){i=new WeakMap}}}class M$ extends eK{constructor(e,t,n,r,i,a,s,o,l,c){if((c=void 0!==c?c:xX)!==xX&&c!==bX)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===xX&&(n=cX),void 0===n&&c===bX&&(n=fX),super(null,r,i,a,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:Jq,this.minFilter=void 0!==o?o:Jq,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const T$=new eK,k$=new M$(1,1);k$.compareFunction=QJ;const P$=new iK,R$=new sK,D$=new BQ,I$=[],B$=[],j$=new Float32Array(16),F$=new Float32Array(9),L$=new Float32Array(4);function O$(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=I$[i];if(void 0===a&&(a=new Float32Array(i),I$[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function N$(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function z$(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function U$(e,t){let n=B$[t];void 0===n&&(n=new Int32Array(t),B$[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function H$(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function G$(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(N$(n,t))return;e.uniform2fv(this.addr,t),z$(n,t)}}function V$(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(N$(n,t))return;e.uniform3fv(this.addr,t),z$(n,t)}}function W$(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(N$(n,t))return;e.uniform4fv(this.addr,t),z$(n,t)}}function q$(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(N$(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),z$(n,t)}else{if(N$(n,r))return;L$.set(r),e.uniformMatrix2fv(this.addr,!1,L$),z$(n,r)}}function X$(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(N$(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),z$(n,t)}else{if(N$(n,r))return;F$.set(r),e.uniformMatrix3fv(this.addr,!1,F$),z$(n,r)}}function J$(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(N$(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),z$(n,t)}else{if(N$(n,r))return;j$.set(r),e.uniformMatrix4fv(this.addr,!1,j$),z$(n,r)}}function Y$(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function K$(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(N$(n,t))return;e.uniform2iv(this.addr,t),z$(n,t)}}function Z$(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(N$(n,t))return;e.uniform3iv(this.addr,t),z$(n,t)}}function Q$(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(N$(n,t))return;e.uniform4iv(this.addr,t),z$(n,t)}}function $$(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function e0(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(N$(n,t))return;e.uniform2uiv(this.addr,t),z$(n,t)}}function t0(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(N$(n,t))return;e.uniform3uiv(this.addr,t),z$(n,t)}}function n0(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(N$(n,t))return;e.uniform4uiv(this.addr,t),z$(n,t)}}function r0(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);const a=this.type===e.SAMPLER_2D_SHADOW?k$:T$;n.setTexture2D(t||a,i)}function i0(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||R$,i)}function a0(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||D$,i)}function s0(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||P$,i)}function o0(e,t){e.uniform1fv(this.addr,t)}function l0(e,t){const n=O$(t,this.size,2);e.uniform2fv(this.addr,n)}function c0(e,t){const n=O$(t,this.size,3);e.uniform3fv(this.addr,n)}function u0(e,t){const n=O$(t,this.size,4);e.uniform4fv(this.addr,n)}function d0(e,t){const n=O$(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function h0(e,t){const n=O$(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function p0(e,t){const n=O$(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function f0(e,t){e.uniform1iv(this.addr,t)}function m0(e,t){e.uniform2iv(this.addr,t)}function g0(e,t){e.uniform3iv(this.addr,t)}function v0(e,t){e.uniform4iv(this.addr,t)}function y0(e,t){e.uniform1uiv(this.addr,t)}function x0(e,t){e.uniform2uiv(this.addr,t)}function b0(e,t){e.uniform3uiv(this.addr,t)}function w0(e,t){e.uniform4uiv(this.addr,t)}function S0(e,t,n){const r=this.cache,i=t.length,a=U$(n,i);N$(r,a)||(e.uniform1iv(this.addr,a),z$(r,a));for(let s=0;s!==i;++s)n.setTexture2D(t[s]||T$,a[s])}function _0(e,t,n){const r=this.cache,i=t.length,a=U$(n,i);N$(r,a)||(e.uniform1iv(this.addr,a),z$(r,a));for(let s=0;s!==i;++s)n.setTexture3D(t[s]||R$,a[s])}function A0(e,t,n){const r=this.cache,i=t.length,a=U$(n,i);N$(r,a)||(e.uniform1iv(this.addr,a),z$(r,a));for(let s=0;s!==i;++s)n.setTextureCube(t[s]||D$,a[s])}function E0(e,t,n){const r=this.cache,i=t.length,a=U$(n,i);N$(r,a)||(e.uniform1iv(this.addr,a),z$(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(t[s]||P$,a[s])}class C0{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return H$;case 35664:return G$;case 35665:return V$;case 35666:return W$;case 35674:return q$;case 35675:return X$;case 35676:return J$;case 5124:case 35670:return Y$;case 35667:case 35671:return K$;case 35668:case 35672:return Z$;case 35669:case 35673:return Q$;case 5125:return $$;case 36294:return e0;case 36295:return t0;case 36296:return n0;case 35678:case 36198:case 36298:case 36306:case 35682:return r0;case 35679:case 36299:case 36307:return i0;case 35680:case 36300:case 36308:case 36293:return a0;case 36289:case 36303:case 36311:case 36292:return s0}}(t.type)}}class M0{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return o0;case 35664:return l0;case 35665:return c0;case 35666:return u0;case 35674:return d0;case 35675:return h0;case 35676:return p0;case 5124:case 35670:return f0;case 35667:case 35671:return m0;case 35668:case 35672:return g0;case 35669:case 35673:return v0;case 5125:return y0;case 36294:return x0;case 36295:return b0;case 36296:return w0;case 35678:case 36198:case 36298:case 36306:case 35682:return S0;case 35679:case 36299:case 36307:return _0;case 35680:case 36300:case 36308:case 36293:return A0;case 36289:case 36303:case 36311:case 36292:return E0}}(t.type)}}class T0{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const k0=/(\w+)(\])?(\[|\.)?/g;function P0(e,t){e.seq.push(t),e.map[t.id]=t}function R0(e,t,n){const r=e.name,i=r.length;for(k0.lastIndex=0;;){const a=k0.exec(r),s=k0.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===i){P0(n,void 0===c?new C0(o,e,t):new M0(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new T0(o),P0(n,e)),n=e}}}class D0{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);R0(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function I0(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}const B0=37297;let j0=0;function F0(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let s=i;s<a;s++){const e=s+1;r.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[s]))}return r.join("\n")}(e.getShaderSource(t),r)}return i}function L0(e,t){const n=function(e){const t=WY.getPrimaries(WY.workingColorSpace),n=WY.getPrimaries(e);let r;switch(t===n?r="":t===DJ&&n===RJ?r="LinearDisplayP3ToLinearSRGB":t===RJ&&n===DJ&&(r="LinearSRGBToLinearDisplayP3"),e){case CJ:case TJ:return[r,"LinearTransferOETF"];case EJ:case MJ:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[r,"LinearTransferOETF"]}}(t);return"vec4 ".concat(e,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function O0(e,t){let n;switch(t){case Rq:n="Linear";break;case Dq:n="Reinhard";break;case Iq:n="OptimizedCineon";break;case Bq:n="ACESFilmic";break;case Fq:n="AgX";break;case jq:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function N0(e){return""!==e}function z0(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function U0(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const H0=/^[ \t]*#include +<([\w\d./]+)>/gm;function G0(e){return e.replace(H0,W0)}const V0=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function W0(e,t){let n=qQ[t];if(void 0===n){const e=V0.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=qQ[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return G0(n)}const q0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function X0(e){return e.replace(q0,J0)}function J0(e,t,n,r){let i="";for(let a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Y0(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function K0(e,t,n,r){const i=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===zW?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===UW?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===HW&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case zq:case Uq:t="ENVMAP_TYPE_CUBE";break;case Vq:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Uq&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Mq:t="ENVMAP_BLENDING_MULTIPLY";break;case Tq:t="ENVMAP_BLENDING_MIX";break;case kq:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(N0).join("\n")}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(N0).join("\n")}(n),m=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),g=i.createProgram();let v,y,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(N0).join("\n"),v.length>0&&(v+="\n"),y=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(N0).join("\n"),y.length>0&&(y+="\n")):(v=[Y0(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(N0).join("\n"),y=[p,Y0(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Pq?"#define TONE_MAPPING":"",n.toneMapping!==Pq?qQ.tonemapping_pars_fragment:"",n.toneMapping!==Pq?O0("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",qQ.colorspace_pars_fragment,L0("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(N0).join("\n")),s=G0(s),s=z0(s,n),s=U0(s,n),o=G0(o),o=z0(o,n),o=U0(o,n),s=X0(s),o=X0(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",v=[f,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,y=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===pY?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===pY?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const b=x+v+s,w=x+y+o,S=I0(i,i.VERTEX_SHADER,b),_=I0(i,i.FRAGMENT_SHADER,w);function A(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(g).trim(),r=i.getShaderInfoLog(S).trim(),a=i.getShaderInfoLog(_).trim();let s=!0,o=!0;if(!1===i.getProgramParameter(g,i.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(i,g,S,_);else{const e=F0(i,S,"vertex"),t=F0(i,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==a||(o=!1);o&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:r,prefix:v},fragmentShader:{log:a,prefix:y}})}i.deleteShader(S),i.deleteShader(_),E=new D0(i,g),C=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(i,g)}let E,C;i.attachShader(g,S),i.attachShader(g,_),void 0!==n.index0AttributeName?i.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),this.getUniforms=function(){return void 0===E&&A(this),E},this.getAttributes=function(){return void 0===C&&A(this),C};let M=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=i.getProgramParameter(g,B0)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=j0++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=S,this.fragmentShader=_,this}let Z0=0;class Q0{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new $0(e),t.set(e,n)),n}}class $0{constructor(e){this.id=Z0++,this.code=e,this.usedTimes=0}}function e1(e,t,n,r,i,a,s){const o=new ZK,l=new Q0,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":"uv".concat(e)}return{getParameters:function(a,o,c,g,v){const y=g.fog,x=v.geometry,b=a.isMeshStandardMaterial?g.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),S=w&&w.mapping===Vq?w.image.height:null,_=f[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const A=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,E=void 0!==A?A.length:0;let C,M,T,k,P=0;if(void 0!==x.morphAttributes.position&&(P=1),void 0!==x.morphAttributes.normal&&(P=2),void 0!==x.morphAttributes.color&&(P=3),_){const e=JQ[_];C=e.vertexShader,M=e.fragmentShader}else C=a.vertexShader,M=a.fragmentShader,l.update(a),T=l.getVertexShaderID(a),k=l.getFragmentShaderID(a);const R=e.getRenderTarget(),D=!0===v.isInstancedMesh,I=!0===v.isBatchedMesh,B=!!a.map,j=!!a.matcap,F=!!w,L=!!a.aoMap,O=!!a.lightMap,N=!!a.bumpMap,z=!!a.normalMap,U=!!a.displacementMap,H=!!a.emissiveMap,G=!!a.metalnessMap,V=!!a.roughnessMap,W=a.anisotropy>0,q=a.clearcoat>0,X=a.iridescence>0,J=a.sheen>0,Y=a.transmission>0,K=W&&!!a.anisotropyMap,Z=q&&!!a.clearcoatMap,Q=q&&!!a.clearcoatNormalMap,$=q&&!!a.clearcoatRoughnessMap,ee=X&&!!a.iridescenceMap,te=X&&!!a.iridescenceThicknessMap,ne=J&&!!a.sheenColorMap,re=J&&!!a.sheenRoughnessMap,ie=!!a.specularMap,ae=!!a.specularColorMap,se=!!a.specularIntensityMap,oe=Y&&!!a.transmissionMap,le=Y&&!!a.thicknessMap,ce=!!a.gradientMap,ue=!!a.alphaMap,de=a.alphaTest>0,he=!!a.alphaHash,pe=!!a.extensions,fe=!!x.attributes.uv1,me=!!x.attributes.uv2,ge=!!x.attributes.uv3;let ve=Pq;return a.toneMapped&&(null!==R&&!0!==R.isXRRenderTarget||(ve=e.toneMapping)),{isWebGL2:u,shaderID:_,shaderType:a.type,shaderName:a.name,vertexShader:C,fragmentShader:M,defines:a.defines,customVertexShaderID:T,customFragmentShaderID:k,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:I,instancing:D,instancingColor:D&&null!==v.instanceColor,supportsVertexTextures:h,outputColorSpace:null===R?e.outputColorSpace:!0===R.isXRRenderTarget?R.texture.colorSpace:CJ,map:B,matcap:j,envMap:F,envMapMode:F&&w.mapping,envMapCubeUVHeight:S,aoMap:L,lightMap:O,bumpMap:N,normalMap:z,displacementMap:h&&U,emissiveMap:H,normalMapObjectSpace:z&&a.normalMapType===_J,normalMapTangentSpace:z&&a.normalMapType===SJ,metalnessMap:G,roughnessMap:V,anisotropy:W,anisotropyMap:K,clearcoat:q,clearcoatMap:Z,clearcoatNormalMap:Q,clearcoatRoughnessMap:$,iridescence:X,iridescenceMap:ee,iridescenceThicknessMap:te,sheen:J,sheenColorMap:ne,sheenRoughnessMap:re,specularMap:ie,specularColorMap:ae,specularIntensityMap:se,transmission:Y,transmissionMap:oe,thicknessMap:le,gradientMap:ce,opaque:!1===a.transparent&&a.blending===JW,alphaMap:ue,alphaTest:de,alphaHash:he,combine:a.combine,mapUv:B&&m(a.map.channel),aoMapUv:L&&m(a.aoMap.channel),lightMapUv:O&&m(a.lightMap.channel),bumpMapUv:N&&m(a.bumpMap.channel),normalMapUv:z&&m(a.normalMap.channel),displacementMapUv:U&&m(a.displacementMap.channel),emissiveMapUv:H&&m(a.emissiveMap.channel),metalnessMapUv:G&&m(a.metalnessMap.channel),roughnessMapUv:V&&m(a.roughnessMap.channel),anisotropyMapUv:K&&m(a.anisotropyMap.channel),clearcoatMapUv:Z&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:Q&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ee&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:te&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:ne&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:re&&m(a.sheenRoughnessMap.channel),specularMapUv:ie&&m(a.specularMap.channel),specularColorMapUv:ae&&m(a.specularColorMap.channel),specularIntensityMapUv:se&&m(a.specularIntensityMap.channel),transmissionMapUv:oe&&m(a.transmissionMap.channel),thicknessMapUv:le&&m(a.thicknessMap.channel),alphaMapUv:ue&&m(a.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(z||W),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUv1s:fe,vertexUv2s:me,vertexUv3s:ge,pointsUvs:!0===v.isPoints&&!!x.attributes.uv&&(B||ue),fog:!!y,useFog:!0===a.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:E,morphTextureStride:P,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ve,useLegacyLights:e._useLegacyLights,decodeVideoTexture:B&&!0===a.map.isVideoTexture&&WY.getTransfer(a.map.colorSpace)===PJ,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===WW,flipSided:a.side===VW,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:pe&&!0===a.extensions.derivatives,extensionFragDepth:pe&&!0===a.extensions.fragDepth,extensionDrawBuffers:pe&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:pe&&!0===a.extensions.shaderTextureLOD,extensionClipCullDistance:pe&&a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.useLegacyLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=JQ[t];n=TQ.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new K0(e,n,t,a),c.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function t1(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function n1(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function r1(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function i1(){const e=[];let t=0;const n=[],r=[],i=[];function a(n,r,i,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?r.push(u):!0===s.transparent?i.push(u):n.push(u)},unshift:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?r.unshift(u):!0===s.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||n1),r.length>1&&r.sort(t||r1),i.length>1&&i.sort(t||r1)}}}function a1(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new i1,e.set(t,[i])):n>=r.length?(i=new i1,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function s1(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new uK,color:new TZ};break;case"SpotLight":n={position:new uK,direction:new uK,color:new TZ,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new uK,color:new TZ,distance:0,decay:0};break;case"HemisphereLight":n={direction:new uK,skyColor:new TZ,groundColor:new TZ};break;case"RectAreaLight":n={color:new TZ,position:new uK,halfWidth:new uK,halfHeight:new uK}}return e[t.id]=n,n}}}let o1=0;function l1(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function c1(e,t){const n=new s1,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new RY};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new RY,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new uK);const a=new uK,s=new zK,o=new zK;return{setup:function(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,m=0,g=0,v=0,y=0,x=0,b=0;a.sort(l1);const w=!0===s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,S=t.intensity,_=t.distance,A=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*S*w,l+=s.g*S*w,c+=s.b*S*w;else if(t.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],S);b++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=A,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(S*w),e.distance=_,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[h]=e;const a=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,a.updateMatrices(t),t.castShadow&&x++),i.spotLightMatrix[h]=a.matrix,t.castShadow){const e=r.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,i.spotShadow[h]=e,i.spotShadowMap[h]=A,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(S),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=A,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(S*w),e.groundColor.copy(t.groundColor).multiplyScalar(S*w),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=XQ.LTC_FLOAT_1,i.rectAreaLTC2=XQ.LTC_FLOAT_2):(i.rectAreaLTC1=XQ.LTC_HALF_1,i.rectAreaLTC2=XQ.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=XQ.LTC_FLOAT_1,i.rectAreaLTC2=XQ.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=XQ.LTC_HALF_1,i.rectAreaLTC2=XQ.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=c;const S=i.hash;S.directionalLength===u&&S.pointLength===d&&S.spotLength===h&&S.rectAreaLength===p&&S.hemiLength===f&&S.numDirectionalShadows===m&&S.numPointShadows===g&&S.numSpotShadows===v&&S.numSpotMaps===y&&S.numLightProbes===b||(i.directional.length=u,i.spot.length=h,i.rectArea.length=p,i.point.length=d,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-x,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=x,i.numLightProbes=b,S.directionalLength=u,S.pointLength=d,S.spotLength=h,S.rectAreaLength=p,S.hemiLength=f,S.numDirectionalShadows=m,S.numPointShadows=g,S.numSpotShadows=v,S.numSpotMaps=y,S.numLightProbes=b,i.version=o1++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o.identity(),s.copy(t.matrixWorld),s.premultiply(d),o.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),r++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function u1(e,t){const n=new c1(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function d1(e,t){let n=new WeakMap;return{get:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=n.get(r);let s;return void 0===a?(s=new u1(e,t),n.set(r,[s])):i>=a.length?(s=new u1(e,t),a.push(s)):s=a[i],s},dispose:function(){n=new WeakMap}}}class h1 extends RZ{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=bJ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class p1 extends RZ{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function f1(e,t,n){let r=new HQ;const i=new RY,a=new RY,s=new tK,o=new h1({depthPacking:wJ}),l=new p1,c={},u=n.maxTextureSize,d={[GW]:VW,[VW]:GW,[WW]:WW},h=new kQ({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new RY},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new iQ;f.setAttribute("position",new zZ(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new SQ(f,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zW;let v=this.type;function y(n,r){const a=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new rK(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,m,null)}function x(t,n,r,i){let a=null;const s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i,n.addEventListener("dispose",w)),a=i}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===HW?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=r}return a}function b(n,i,a,s,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===HW)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],d=l[u.materialIndex];if(d&&d.visible){const t=x(n,d,s,o);n.onBeforeShadow(e,n,i,a,r,t,u),e.renderBufferDirect(a,null,r,t,n,u),n.onAfterShadow(e,n,i,a,r,t,u)}}}else if(l.visible){const t=x(n,l,s,o);n.onBeforeShadow(e,n,i,a,r,t,null),e.renderBufferDirect(a,null,r,t,n,null),n.onAfterShadow(e,n,i,a,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],i,a,s,o)}function w(e){e.target.removeEventListener("dispose",w);for(const t in c){const n=c[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(XW),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=v!==HW&&this.type===HW,f=v===HW&&this.type!==HW;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const d=c.getFrameExtents();if(i.multiply(d),a.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/d.x),i.x=a.x*d.x,c.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/d.y),i.y=a.y*d.y,c.mapSize.y=a.y)),null===c.map||!0===p||!0===f){const e=this.type!==HW?{minFilter:Jq,magFilter:Jq}:{};null!==c.map&&c.map.dispose(),c.map=new rK(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(s),c.updateMatrices(l,e),r=c.getFrustum(),b(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===HW&&y(c,o),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function m1(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new tK;let r=null;const i=new tK(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?H(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case xq:e.depthFunc(e.NEVER);break;case bq:e.depthFunc(e.ALWAYS);break;case wq:e.depthFunc(e.LESS);break;case Sq:e.depthFunc(e.LEQUAL);break;case _q:e.depthFunc(e.EQUAL);break;case Aq:e.depthFunc(e.GEQUAL);break;case Eq:e.depthFunc(e.GREATER);break;case Cq:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){let t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&a===s||(e.stencilFunc(t,n,s),r=t,i=n,a=s)},setOp:function(t,n,r){s===t&&o===n&&l===r||(e.stencilOp(t,n,r),s=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,h=[],p=null,f=!1,m=null,g=null,v=null,y=null,x=null,b=null,w=null,S=new TZ(0,0,0),_=0,A=!1,E=null,C=null,M=null,T=null,k=null;const P=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,D=0;const I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(I)[1]),R=D>=1):-1!==I.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),R=D>=2);let B=null,j={};const F=e.getParameter(e.SCISSOR_BOX),L=e.getParameter(e.VIEWPORT),O=(new tK).fromArray(F),N=(new tK).fromArray(L);function z(t,n,i,a){const s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<i;l++)!r||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}const U={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function G(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}U[e.TEXTURE_2D]=z(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=z(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(U[e.TEXTURE_2D_ARRAY]=z(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),U[e.TEXTURE_3D]=z(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),a.setClear(1),s.setClear(0),H(e.DEPTH_TEST),a.setFunc(Sq),X(!1),J(FW),H(e.CULL_FACE),q(XW);const V={[$W]:e.FUNC_ADD,[eq]:e.FUNC_SUBTRACT,[tq]:e.FUNC_REVERSE_SUBTRACT};if(r)V[nq]=e.MIN,V[rq]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(V[nq]=e.MIN_EXT,V[rq]=e.MAX_EXT)}const W={[iq]:e.ZERO,[aq]:e.ONE,[sq]:e.SRC_COLOR,[lq]:e.SRC_ALPHA,[fq]:e.SRC_ALPHA_SATURATE,[hq]:e.DST_COLOR,[uq]:e.DST_ALPHA,[oq]:e.ONE_MINUS_SRC_COLOR,[cq]:e.ONE_MINUS_SRC_ALPHA,[pq]:e.ONE_MINUS_DST_COLOR,[dq]:e.ONE_MINUS_DST_ALPHA,[mq]:e.CONSTANT_COLOR,[gq]:e.ONE_MINUS_CONSTANT_COLOR,[vq]:e.CONSTANT_ALPHA,[yq]:e.ONE_MINUS_CONSTANT_ALPHA};function q(t,n,r,i,a,s,o,l,c,u){if(t!==XW){if(!1===f&&(H(e.BLEND),f=!0),t===QW)a=a||n,s=s||r,o=o||i,n===g&&a===x||(e.blendEquationSeparate(V[n],V[a]),g=n,x=a),r===v&&i===y&&s===b&&o===w||(e.blendFuncSeparate(W[r],W[i],W[s],W[o]),v=r,y=i,b=s,w=o),!1!==l.equals(S)&&c===_||(e.blendColor(l.r,l.g,l.b,c),S.copy(l),_=c),m=t,A=!1;else if(t!==m||u!==A){if(g===$W&&x===$W||(e.blendEquation(e.FUNC_ADD),g=$W,x=$W),u)switch(t){case JW:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case YW:e.blendFunc(e.ONE,e.ONE);break;case KW:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case ZW:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case JW:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case YW:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case KW:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case ZW:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,b=null,w=null,S.set(0,0,0),_=0,m=t,A=u}}else!0===f&&(G(e.BLEND),f=!1)}function X(t){E!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),E=t)}function J(t){t!==jW?(H(e.CULL_FACE),t!==C&&(t===FW?e.cullFace(e.BACK):t===LW?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),C=t}function Y(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),T===n&&k===r||(e.polygonOffset(n,r),T=n,k=r)):G(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:a,stencil:s},enable:H,disable:G,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let a=h,s=!1;if(r)if(a=d.get(i),void 0===a&&(a=[],d.set(i,a)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:q,setMaterial:function(t,n){t.side===WW?G(e.CULL_FACE):H(e.CULL_FACE);let r=t.side===VW;n&&(r=!r),X(r),t.blending===JW&&!1===t.transparent?q(XW):q(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite);const o=t.stencilWrite;s.setTest(o),o&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Y(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:X,setCullFace:J,setLineWidth:function(t){t!==M&&(R&&e.lineWidth(t),M=t)},setPolygonOffset:Y,setScissorTest:function(t){t?H(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+P-1),B!==t&&(e.activeTexture(t),B=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===B?e.TEXTURE0+P-1:B);let i=j[r];void 0===i&&(i={type:void 0,texture:void 0},j[r]=i),i.type===t&&i.texture===n||(B!==r&&(e.activeTexture(r),B=r),e.bindTexture(t,n||U[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=j[B];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);o.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},B=null,j={},u={},d=new WeakMap,h=[],p=null,f=!1,m=null,g=null,v=null,y=null,x=null,b=null,w=null,S=new TZ(0,0,0),_=0,A=!1,E=null,C=null,M=null,T=null,k=null,O.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),s.reset()}}}function g1(e,t,n,r,i,a,s){const o=i.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Kie){}function f(e,t){return p?new OffscreenCanvas(e,t):LY("canvas")}function m(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?MY:Math.floor,a=r(i*e.width),s=r(i*e.height);void 0===d&&(d=f(a,s));const o=n?f(a,s):d;o.width=a,o.height=s;return o.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return CY(e.width)&&CY(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==Jq&&e.minFilter!==$q}function y(t){e.generateMipmap(t)}function x(n,r,i,a){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===o)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;if(r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(l=e.R8UI),i===e.UNSIGNED_SHORT&&(l=e.R16UI),i===e.UNSIGNED_INT&&(l=e.R32UI),i===e.BYTE&&(l=e.R8I),i===e.SHORT&&(l=e.R16I),i===e.INT&&(l=e.R32I)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA){const t=s?kJ:WY.getTransfer(a);i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=t===PJ?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function b(e,t,n){return!0===v(e,n)||e.isFramebufferTexture&&e.minFilter!==Jq&&e.minFilter!==$q?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(t){return t===Jq||t===Yq||t===Zq?e.NEAREST:e.LINEAR}function S(e){const t=e.target;t.removeEventListener("dispose",S),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=h.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&A(e),0===Object.keys(i).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function _(t){const n=t.target;n.removeEventListener("dispose",_),function(t){const n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(i.__webglFramebuffer[r]))for(let t=0;t<i.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(i.__webglFramebuffer[r][t]);else e.deleteFramebuffer(i.__webglFramebuffer[r]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=r.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),r.remove(n[o])}r.remove(n),r.remove(t)}(n)}function A(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete h.get(i)[n.__cacheKey],s.memory.textures--}let E=0;function C(t,i){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void D(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}const M={[Wq]:e.REPEAT,[qq]:e.CLAMP_TO_EDGE,[Xq]:e.MIRRORED_REPEAT},T={[Jq]:e.NEAREST,[Yq]:e.NEAREST_MIPMAP_NEAREST,[Zq]:e.NEAREST_MIPMAP_LINEAR,[$q]:e.LINEAR,[eX]:e.LINEAR_MIPMAP_NEAREST,[nX]:e.LINEAR_MIPMAP_LINEAR},k={[YJ]:e.NEVER,[nY]:e.ALWAYS,[KJ]:e.LESS,[QJ]:e.LEQUAL,[ZJ]:e.EQUAL,[tY]:e.GEQUAL,[$J]:e.GREATER,[eY]:e.NOTEQUAL};function P(n,a,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,M[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,M[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,M[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===qq&&a.wrapT===qq||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,w(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,w(a.minFilter)),a.minFilter!==Jq&&a.minFilter!==$q&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,k[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===Jq)return;if(a.minFilter!==Zq&&a.minFilter!==nX)return;if(a.type===uX&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===dX&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function R(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S));const i=n.source;let a=h.get(i);void 0===a&&(a={},h.set(i,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;const i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&A(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return r}function D(t,s,l){let c=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(c=e.TEXTURE_3D);const u=R(t,s),d=s.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+l);const h=r.get(d);if(d.version!==h.__version||!0===u){n.activeTexture(e.TEXTURE0+l);const t=WY.getPrimaries(WY.workingColorSpace),r=s.colorSpace===AJ?null:WY.getPrimaries(s.colorSpace),p=s.colorSpace===AJ||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=function(e){return!o&&(e.wrapS!==qq||e.wrapT!==qq||e.minFilter!==Jq&&e.minFilter!==$q)}(s)&&!1===g(s.image);let w=m(s.image,f,!1,i.maxTextureSize);w=O(s,w);const S=g(w)||o,_=a.convert(s.format,s.colorSpace);let A,E=a.convert(s.type),C=x(s.internalFormat,_,E,s.colorSpace,s.isVideoTexture);P(c,s,S);const M=s.mipmaps,T=o&&!0!==s.isVideoTexture&&C!==BX,k=void 0===h.__version||!0===u,R=b(s,w,S);if(s.isDepthTexture)C=e.DEPTH_COMPONENT,o?C=s.type===uX?e.DEPTH_COMPONENT32F:s.type===cX?e.DEPTH_COMPONENT24:s.type===fX?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:s.type===uX&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),s.format===xX&&C===e.DEPTH_COMPONENT&&s.type!==oX&&s.type!==cX&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=cX,E=a.convert(s.type)),s.format===bX&&C===e.DEPTH_COMPONENT&&(C=e.DEPTH_STENCIL,s.type!==fX&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=fX,E=a.convert(s.type))),k&&(T?n.texStorage2D(e.TEXTURE_2D,1,C,w.width,w.height):n.texImage2D(e.TEXTURE_2D,0,C,w.width,w.height,0,_,E,null));else if(s.isDataTexture)if(M.length>0&&S){T&&k&&n.texStorage2D(e.TEXTURE_2D,R,C,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)A=M[t],T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,A.width,A.height,_,E,A.data):n.texImage2D(e.TEXTURE_2D,t,C,A.width,A.height,0,_,E,A.data);s.generateMipmaps=!1}else T?(k&&n.texStorage2D(e.TEXTURE_2D,R,C,w.width,w.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,w.width,w.height,_,E,w.data)):n.texImage2D(e.TEXTURE_2D,0,C,w.width,w.height,0,_,E,w.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){T&&k&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,C,M[0].width,M[0].height,w.depth);for(let t=0,r=M.length;t<r;t++)A=M[t],s.format!==gX?null!==_?T?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,A.width,A.height,w.depth,_,A.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,C,A.width,A.height,w.depth,0,A.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,A.width,A.height,w.depth,_,E,A.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,C,A.width,A.height,w.depth,0,_,E,A.data)}else{T&&k&&n.texStorage2D(e.TEXTURE_2D,R,C,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)A=M[t],s.format!==gX?null!==_?T?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,A.width,A.height,_,A.data):n.compressedTexImage2D(e.TEXTURE_2D,t,C,A.width,A.height,0,A.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,A.width,A.height,_,E,A.data):n.texImage2D(e.TEXTURE_2D,t,C,A.width,A.height,0,_,E,A.data)}else if(s.isDataArrayTexture)T?(k&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,C,w.width,w.height,w.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,w.width,w.height,w.depth,_,E,w.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,C,w.width,w.height,w.depth,0,_,E,w.data);else if(s.isData3DTexture)T?(k&&n.texStorage3D(e.TEXTURE_3D,R,C,w.width,w.height,w.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,w.width,w.height,w.depth,_,E,w.data)):n.texImage3D(e.TEXTURE_3D,0,C,w.width,w.height,w.depth,0,_,E,w.data);else if(s.isFramebufferTexture){if(k)if(T)n.texStorage2D(e.TEXTURE_2D,R,C,w.width,w.height);else{let t=w.width,r=w.height;for(let i=0;i<R;i++)n.texImage2D(e.TEXTURE_2D,i,C,t,r,0,_,E,null),t>>=1,r>>=1}}else if(M.length>0&&S){T&&k&&n.texStorage2D(e.TEXTURE_2D,R,C,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)A=M[t],T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,_,E,A):n.texImage2D(e.TEXTURE_2D,t,C,_,E,A);s.generateMipmaps=!1}else T?(k&&n.texStorage2D(e.TEXTURE_2D,R,C,w.width,w.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,_,E,w)):n.texImage2D(e.TEXTURE_2D,0,C,_,E,w);v(s,S)&&y(c),h.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function I(t,i,s,o,c,u){const d=a.convert(s.format,s.colorSpace),h=a.convert(s.type),p=x(s.internalFormat,d,h,s.colorSpace);if(!r.get(i).__hasExternalTextures){const t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,p,t,r,i.depth,0,d,h,null):n.texImage2D(c,u,p,t,r,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),L(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,c,r.get(s).__webglTexture,0,F(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,c,r.get(s).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function B(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=!0===o?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(r||L(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===uX?i=e.DEPTH_COMPONENT32F:t.type===cX&&(i=e.DEPTH_COMPONENT24));const r=F(n);L(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=F(n);r&&!1===L(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):L(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const s=t[i],o=a.convert(s.format,s.colorSpace),c=a.convert(s.type),u=x(s.internalFormat,o,c,s.colorSpace),d=F(n);r&&!1===L(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):L(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function j(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),C(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,s=F(i);if(i.depthTexture.format===xX)L(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==bX)throw new Error("Unknown depthTexture format");L(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),B(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),B(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(e){return Math.min(i.maxSamples,e.samples)}function L(e){const n=r.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function O(e,n){const r=e.colorSpace,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===fY||r!==CJ&&r!==AJ&&(WY.getTransfer(r)===PJ?!1===o?!0===t.has("EXT_sRGB")&&i===gX?(e.format=fY,e.minFilter=$q,e.generateMipmaps=!1):n=YY.sRGBToLinear(n):i===gX&&a===iX||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){const e=E;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=C,this.setTexture2DArray=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?D(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?D(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,s){const l=r.get(t);t.version>0&&l.__version!==t.version?function(t,s,l){if(6!==s.image.length)return;const c=R(t,s),u=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const d=r.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=WY.getPrimaries(WY.workingColorSpace),r=s.colorSpace===AJ?null:WY.getPrimaries(s.colorSpace),h=s.colorSpace===AJ||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=s.isCompressedTexture||s.image[0].isCompressedTexture,f=s.image[0]&&s.image[0].isDataTexture,w=[];for(let e=0;e<6;e++)w[e]=p||f?f?s.image[e].image:s.image[e]:m(s.image[e],!1,!0,i.maxCubemapSize),w[e]=O(s,w[e]);const S=w[0],_=g(S)||o,A=a.convert(s.format,s.colorSpace),E=a.convert(s.type),C=x(s.internalFormat,A,E,s.colorSpace),M=o&&!0!==s.isVideoTexture,T=void 0===d.__version||!0===c;let k,R=b(s,S,_);if(P(e.TEXTURE_CUBE_MAP,s,_),p){M&&T&&n.texStorage2D(e.TEXTURE_CUBE_MAP,R,C,S.width,S.height);for(let t=0;t<6;t++){k=w[t].mipmaps;for(let r=0;r<k.length;r++){const i=k[r];s.format!==gX?null!==A?M?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,A,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,C,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,A,E,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,C,i.width,i.height,0,A,E,i.data)}}}else{k=s.mipmaps,M&&T&&(k.length>0&&R++,n.texStorage2D(e.TEXTURE_CUBE_MAP,R,C,w[0].width,w[0].height));for(let t=0;t<6;t++)if(f){M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,w[t].width,w[t].height,A,E,w[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,C,w[t].width,w[t].height,0,A,E,w[t].data);for(let r=0;r<k.length;r++){const i=k[r].image[t].image;M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,A,E,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,C,i.width,i.height,0,A,E,i.data)}}else{M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,A,E,w[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,C,A,E,w[t]);for(let r=0;r<k.length;r++){const i=k[r];M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,A,E,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,C,A,E,i.image[t])}}}v(s,_)&&y(e.TEXTURE_CUBE_MAP),d.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(l,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,i){const a=r.get(t);void 0!==n&&I(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&j(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",_),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=g(t)||o;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===L(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=a.convert(i.format,i.colorSpace),o=a.convert(i.type),l=x(i.internalFormat,s,o,i.colorSpace,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),B(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),P(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)if(o&&l.mipmaps&&l.mipmaps.length>0)for(let r=0;r<l.mipmaps.length;r++)I(c.__webglFramebuffer[n][r],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else I(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(l,p)&&y(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const i=t.texture;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r.get(s);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),P(e.TEXTURE_2D,s,p),I(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),v(s,p)&&y(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),P(r,l,p),o&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)I(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,r,n);else I(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r,0);v(l,p)&&y(r),n.unbindTexture()}t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(t){const i=g(t)||o,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(v(o,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(o).__webglTexture;n.bindTexture(i,a),y(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===L(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(u);const p=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[u]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[u])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),c&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=I,this.useMultisampledRTT=L}function v1(e,t,n){const r=n.isWebGL2;return{convert:function(n){let i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AJ;const s=WY.getTransfer(a);if(n===iX)return e.UNSIGNED_BYTE;if(n===hX)return e.UNSIGNED_SHORT_4_4_4_4;if(n===pX)return e.UNSIGNED_SHORT_5_5_5_1;if(n===aX)return e.BYTE;if(n===sX)return e.SHORT;if(n===oX)return e.UNSIGNED_SHORT;if(n===lX)return e.INT;if(n===cX)return e.UNSIGNED_INT;if(n===uX)return e.FLOAT;if(n===dX)return r?e.HALF_FLOAT:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(n===mX)return e.ALPHA;if(n===gX)return e.RGBA;if(n===vX)return e.LUMINANCE;if(n===yX)return e.LUMINANCE_ALPHA;if(n===xX)return e.DEPTH_COMPONENT;if(n===bX)return e.DEPTH_STENCIL;if(n===fY)return i=t.get("EXT_sRGB"),null!==i?i.SRGB_ALPHA_EXT:null;if(n===wX)return e.RED;if(n===SX)return e.RED_INTEGER;if(n===_X)return e.RG;if(n===AX)return e.RG_INTEGER;if(n===EX)return e.RGBA_INTEGER;if(n===CX||n===MX||n===TX||n===kX)if(s===PJ){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===CX)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===MX)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===TX)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===kX)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===CX)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===MX)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===TX)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===kX)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===PX||n===RX||n===DX||n===IX){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===PX)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===RX)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===DX)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===IX)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===BX)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===jX||n===FX){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===jX)return s===PJ?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===FX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===LX||n===OX||n===NX||n===zX||n===UX||n===HX||n===GX||n===VX||n===WX||n===qX||n===XX||n===JX||n===YX||n===KX){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===LX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===OX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===NX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===zX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===UX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===HX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===GX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===VX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===WX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===qX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===XX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===JX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===YX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===KX)return s===PJ?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===ZX||n===QX||n===$X){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===ZX)return s===PJ?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===QX)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===$X)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===eJ||n===tJ||n===nJ||n===rJ){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===ZX)return i.COMPRESSED_RED_RGTC1_EXT;if(n===tJ)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===nJ)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===rJ)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===fX?r?e.UNSIGNED_INT_24_8:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class y1 extends RQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class x1 extends dZ{constructor(){super(),this.isGroup=!0,this.type="Group"}}const b1={type:"move"};class w1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new x1,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new x1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new uK,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new uK),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new x1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new uK,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new uK),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),r=this._getHandJoint(l,a);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(b1)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new x1;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class S1 extends vY{constructor(e,t){super();const n=this;let r=null,i=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],y=[],x=new RY;let b=null;const w=new RQ;w.layers.enable(1),w.viewport=new tK;const S=new RQ;S.layers.enable(2),S.viewport=new tK;const _=[w,S],A=new y1;A.layers.enable(1),A.layers.enable(2);let E=null,C=null;function M(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function T(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",k);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}E=null,C=null,e.setRenderTarget(m),h=null,d=null,u=null,r=null,g=null,B.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}function k(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,v[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=y.indexOf(n);if(-1===r){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new w1,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new w1,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new w1,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",T),r.addEventListener("inputsourceschange",k),!0!==f.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(x),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),g=new rK(h.framebufferWidth,h.framebufferHeight,{format:gX,type:iX,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,a=null,s=null;f.depth&&(s=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?bX:xX,a=f.stencil?fX:cX);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:i};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(o),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),g=new rK(d.textureWidth,d.textureHeight,{format:gX,type:iX,depthTexture:new M$(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0});e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await r.requestReferenceSpace(s),B.setContext(r),B.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const P=new uK,R=new uK;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;A.near=S.near=w.near=e.near,A.far=S.far=w.far=e.far,E===A.near&&C===A.far||(r.updateRenderState({depthNear:A.near,depthFar:A.far}),E=A.near,C=A.far);const t=e.parent,n=A.cameras;D(A,t);for(let r=0;r<n.length;r++)D(n[r],t);2===n.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const r=P.distanceTo(R),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=s*u,p=s*d,f=r/(-u+d),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+f,v=o+f,y=h-m,x=p+(r-m),b=l*o/v*g,w=c*o/v*g;e.projectionMatrix.makePerspective(y,x,b,w,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(A,w,S):A.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*wY*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,A,t)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let I=null;const B=new GQ;B.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||a),p=r,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==A.cameras.length&&(A.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let a=null;if(null!==h)a=h.getViewport(i);else{const t=u.getViewSubImage(d,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=_[r];void 0===s&&(s=new RQ,s.layers.enable(r),s.viewport=new tK,_[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&(A.matrix.copy(s.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===n&&A.cameras.push(s)}}for(let e=0;e<v.length;e++){const t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,r,l||a)}I&&I(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null})),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}}function _1(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===VW&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===VW&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const a=t.get(i).envMap;if(a&&(r.envMap.value=a,r.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,MQ(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,s,o){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform));e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));const i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===VW&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,o)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,s):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function A1(e,t,n,r){let i={},a={},s=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n,r){const i=e.value,a=t+"_"+n;if(void 0===r[a])return r[a]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;{const e=r[a];if("number"===typeof i||"boolean"===typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=i[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let a=0,s=t.length;a<s;a++){const e=Array.isArray(t[a])?t[a]:[t[a]];for(let t=0,i=e.length;t<i;t++){const i=e[t],a=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]),s=n%r;0!==s&&r-s<t.boundary&&(n+=r-s),i.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=t.storage}}}const i=n%r;i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));const p=d.program;r.updateUBOMapping(n,p);const f=t.render.frame;a[n.id]!==f&&(!function(t){const n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const t=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,i,n,a)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let a=0;a<n.length;a++){const s=n[a],o=c(s);"number"===typeof s||"boolean"===typeof s?(r.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):s.isMatrix3?(r.__data[0]=s.elements[0],r.__data[1]=s.elements[1],r.__data[2]=s.elements[2],r.__data[3]=0,r.__data[4]=s.elements[3],r.__data[5]=s.elements[4],r.__data[6]=s.elements[5],r.__data[7]=0,r.__data[8]=s.elements[6],r.__data[9]=s.elements[7],r.__data[10]=s.elements[8],r.__data[11]=0):(s.toArray(r.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);s=[],i={},a={}}}}class E1{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=OY(),context:n=null,depth:r=!0,stencil:i=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let d;this.isWebGLRenderer=!0,d=null!==n?n.getContextAttributes().alpha:a;const h=new Uint32Array(4),p=new Int32Array(4);let f=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=EJ,this._useLegacyLights=!1,this.toneMapping=Pq,this.toneMappingExposure=1;const y=this;let x=!1,b=0,w=0,S=null,_=-1,A=null;const E=new tK,C=new tK;let M=null;const T=new TZ(0);let k=0,P=t.width,R=t.height,D=1,I=null,B=null;const j=new tK(0,0,P,R),F=new tK(0,0,P,R);let L=!1;const O=new HQ;let N=!1,z=!1,U=null;const H=new zK,G=new RY,V=new uK,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===S?D:1}let X,J,Y,K,Z,Q,$,ee,te,ne,re,ie,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ge,ve=n;function ye(e,n){for(let r=0;r<e.length;r++){const i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(DW)),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",Se,!1),t.addEventListener("webglcontextcreationerror",_e,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&t.shift(),ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&ve instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Le){throw console.error("THREE.WebGLRenderer: "+Le.message),Le}function xe(){X=new x$(ve),J=new $Q(ve,X,e),X.init(J),fe=new v1(ve,X,J),Y=new m1(ve,X,J),K=new S$(ve),Z=new t1,Q=new g1(ve,X,Y,Z,J,fe,K),$=new t$(y),ee=new y$(y),te=new VQ(ve,J),me=new ZQ(ve,X,te,J),ne=new b$(ve,te,K,me),re=new C$(ve,ne,te,K),de=new E$(ve,J,Q),le=new e$(Z),ie=new e1(y,$,ee,X,J,me,le),ae=new _1(y,Z),se=new a1,oe=new d1(X,J),ue=new KQ(y,$,ee,Y,re,d,o),ce=new f1(y,re,J),ge=new A1(ve,K,J,Y),he=new QQ(ve,X,K,J),pe=new w$(ve,X,K,J),K.programs=ie.programs,y.capabilities=J,y.extensions=X,y.properties=Z,y.renderLists=se,y.shadowMap=ce,y.state=Y,y.info=K}xe();const be=new S1(y,ve);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const e=K.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;xe(),K.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function _e(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ae(e){const t=e.target;t.removeEventListener("dispose",Ae),function(e){(function(e){const t=Z.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),Z.remove(e)}(t)}function Ee(e,t,n){!0===e.transparent&&e.side===WW&&!1===e.forceSinglePass?(e.side=VW,e.needsUpdate=!0,Be(e,t,n),e.side=GW,e.needsUpdate=!0,Be(e,t,n),e.side=WW):Be(e,t,n)}this.xr=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(e){void 0!==e&&(D=e,this.setSize(P,R,!1))},this.getSize=function(e){return e.set(P,R)},this.setSize=function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=e,R=n,t.width=Math.floor(e*D),t.height=Math.floor(n*D),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(P*D,R*D).floor()},this.setDrawingBufferSize=function(e,n,r){P=e,R=n,D=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(E)},this.getViewport=function(e){return e.copy(j)},this.setViewport=function(e,t,n,r){e.isVector4?j.set(e.x,e.y,e.z,e.w):j.set(e,t,n,r),Y.viewport(E.copy(j).multiplyScalar(D).floor())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,n,r){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,r),Y.scissor(C.copy(F).multiplyScalar(D).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){Y.setScissorTest(L=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){B=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==S){const t=S.texture.format;e=t===EX||t===AX||t===SX}if(e){const e=S.texture.type,t=e===iX||e===cX||e===oX||e===fX||e===hX||e===pX,n=ue.getClearColor(),r=ue.getClearAlpha(),i=n.r,a=n.g,s=n.b;t?(h[0]=i,h[1]=a,h[2]=s,h[3]=r,ve.clearBufferuiv(ve.COLOR,0,h)):(p[0]=i,p[1]=a,p[2]=s,p[3]=r,ve.clearBufferiv(ve.COLOR,0,p))}else n|=ve.COLOR_BUFFER_BIT}e&&(n|=ve.DEPTH_BUFFER_BIT),t&&(n|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",Se,!1),t.removeEventListener("webglcontextcreationerror",_e,!1),se.dispose(),oe.dispose(),Z.dispose(),$.dispose(),ee.dispose(),re.dispose(),me.dispose(),ge.dispose(),ie.dispose(),be.dispose(),be.removeEventListener("sessionstart",Me),be.removeEventListener("sessionend",Te),U&&(U.dispose(),U=null),ke.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=W);const s=i.isMesh&&i.matrixWorld.determinant()<0,o=function(e,t,n,r,i){!0!==t.isScene&&(t=W);Q.resetTextureUnits();const a=t.fog,s=r.isMeshStandardMaterial?t.environment:null,o=null===S?y.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:CJ,l=(r.isMeshStandardMaterial?ee:$).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=Pq;r.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(f=y.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,x=Z.get(r),b=m.state.lights;if(!0===N&&(!0===z||e!==A)){const t=e===A&&r.id===_;le.setState(r,e,t)}let w=!1;r.version===x.__version?x.needsLights&&x.lightsStateVersion!==b.state.version||x.outputColorSpace!==o||i.isBatchedMesh&&!1===x.batching?w=!0:i.isBatchedMesh||!0!==x.batching?i.isInstancedMesh&&!1===x.instancing?w=!0:i.isInstancedMesh||!0!==x.instancing?i.isSkinnedMesh&&!1===x.skinning?w=!0:i.isSkinnedMesh||!0!==x.skinning?i.isInstancedMesh&&!0===x.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===x.instancingColor&&null!==i.instanceColor||x.envMap!==l||!0===r.fog&&x.fog!==a?w=!0:void 0===x.numClippingPlanes||x.numClippingPlanes===le.numPlanes&&x.numIntersection===le.numIntersection?(x.vertexAlphas!==c||x.vertexTangents!==u||x.morphTargets!==d||x.morphNormals!==h||x.morphColors!==p||x.toneMapping!==f||!0===J.isWebGL2&&x.morphTargetsCount!==v)&&(w=!0):w=!0:w=!0:w=!0:w=!0:(w=!0,x.__version=r.version);let E=x.currentProgram;!0===w&&(E=Be(r,t,i));let C=!1,M=!1,T=!1;const k=E.getUniforms(),P=x.uniforms;Y.useProgram(E.program)&&(C=!0,M=!0,T=!0);r.id!==_&&(_=r.id,M=!0);if(C||A!==e){k.setValue(ve,"projectionMatrix",e.projectionMatrix),k.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=k.map.cameraPosition;void 0!==t&&t.setValue(ve,V.setFromMatrixPosition(e.matrixWorld)),J.logarithmicDepthBuffer&&k.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&k.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),A!==e&&(A=e,M=!0,T=!0)}if(i.isSkinnedMesh){k.setOptional(ve,i,"bindMatrix"),k.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;e&&(J.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),k.setValue(ve,"boneTexture",e.boneTexture,Q)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}i.isBatchedMesh&&(k.setOptional(ve,i,"batchingTexture"),k.setValue(ve,"batchingTexture",i._matricesTexture,Q));const I=n.morphAttributes;(void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===J.isWebGL2)&&de.update(i,n,E);(M||x.receiveShadow!==i.receiveShadow)&&(x.receiveShadow=i.receiveShadow,k.setValue(ve,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);M&&(k.setValue(ve,"toneMappingExposure",y.toneMappingExposure),x.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(P,T),a&&!0===r.fog&&ae.refreshFogUniforms(P,a),ae.refreshMaterialUniforms(P,r,D,R,U),D0.upload(ve,je(x),P,Q));r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(D0.upload(ve,je(x),P,Q),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&k.setValue(ve,"center",i.center);if(k.setValue(ve,"modelViewMatrix",i.modelViewMatrix),k.setValue(ve,"normalMatrix",i.normalMatrix),k.setValue(ve,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(J.isWebGL2){const n=e[t];ge.update(n,E),ge.bind(n,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E}(e,t,n,r,i);Y.setMaterial(r,s);let l=n.index,c=1;if(!0===r.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==a&&(h=Math.max(h,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),p=Math.min(p,d.count));const f=p-h;if(f<0||f===1/0)return;let g;me.setup(i,r,o,n,l);let v=he;if(null!==l&&(g=te.get(l),v=pe,v.setIndex(g)),i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*q()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),Y.setLineWidth(e*q()),i.isLineSegments?v.setMode(ve.LINES):i.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else i.isPoints?v.setMode(ve.POINTS):i.isSprite&&v.setMode(ve.TRIANGLES);if(i.isBatchedMesh)v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)v.renderInstances(h,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,f,t)}else v.render(h,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),m=oe.get(n),m.init(),v.push(m),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(y._useLegacyLights);const r=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const a=t[i];Ee(a,n,e),r.add(a)}else Ee(t,n,e),r.add(t)})),v.pop(),m=null,r},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){Z.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==X.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Ce=null;function Me(){ke.stop()}function Te(){ke.start()}const ke=new GQ;function Pe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||O.intersectsSprite(e)){r&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=re.update(e),i=e.material;i.visible&&f.push(e,t,i,n,V.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||O.intersectsObject(e))){const t=re.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),V.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),V.copy(t.boundingSphere.center)),V.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(i)){const r=t.groups;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i[s.materialIndex];o&&o.visible&&f.push(e,t,o,n,V.z,s)}}else i.visible&&f.push(e,t,i,n,V.z,null)}const i=e.children;for(let a=0,s=i.length;a<s;a++)Pe(i[a],t,n,r)}function Re(e,t,n,r){const i=e.opaque,a=e.transmissive,s=e.transparent;m.setupLightsView(n),!0===N&&le.setGlobalState(y.clippingPlanes,n),a.length>0&&function(e,t,n,r){const i=!0===n.isScene?n.overrideMaterial:null;if(null!==i)return;const a=J.isWebGL2;null===U&&(U=new rK(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")?dX:iX,minFilter:nX,samples:a?4:0}));y.getDrawingBufferSize(G),a?U.setSize(G.x,G.y):U.setSize(MY(G.x),MY(G.y));const s=y.getRenderTarget();y.setRenderTarget(U),y.getClearColor(T),k=y.getClearAlpha(),k<1&&y.setClearColor(16777215,.5);y.clear();const o=y.toneMapping;y.toneMapping=Pq,De(e,n,r),Q.updateMultisampleRenderTarget(U),Q.updateRenderTargetMipmap(U);let l=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c],i=e.object,a=e.geometry,s=e.material,o=e.group;if(s.side===WW&&i.layers.test(r.layers)){const e=s.side;s.side=VW,s.needsUpdate=!0,Ie(i,n,r,a,s,o),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(Q.updateMultisampleRenderTarget(U),Q.updateRenderTargetMipmap(U));y.setRenderTarget(s),y.setClearColor(T,k),y.toneMapping=o}(i,a,t,n),r&&Y.viewport(E.copy(r)),i.length>0&&De(i,t,n),a.length>0&&De(a,t,n),s.length>0&&De(s,t,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function De(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],s=a.object,o=a.geometry,l=null===r?a.material:r,c=a.group;s.layers.test(n.layers)&&Ie(s,t,n,o,l,c)}}function Ie(e,t,n,r,i,a){e.onBeforeRender(y,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(y,t,n,r,e,a),!0===i.transparent&&i.side===WW&&!1===i.forceSinglePass?(i.side=VW,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,a),i.side=GW,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,a),i.side=WW):y.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(y,t,n,r,i,a)}function Be(e,t,n){!0!==t.isScene&&(t=W);const r=Z.get(e),i=m.state.lights,a=m.state.shadowsArray,s=i.state.version,o=ie.getParameters(e,i.state,a,t,n),l=ie.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:$).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Ae),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Fe(e,o),u}else o.uniforms=ie.getUniforms(e),e.onBuild(n,o,y),e.onBeforeCompile(o,y),u=ie.acquireProgram(o,l),c.set(l,u),r.uniforms=o.uniforms;const d=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=le.uniform),Fe(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function je(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=D0.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Fe(e,t){const n=Z.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}ke.setAnimationLoop((function(e){Ce&&Ce(e)})),"undefined"!==typeof self&&ke.setContext(self),this.setAnimationLoop=function(e){Ce=e,be.setAnimationLoop(e),null===e?ke.stop():ke.start()},be.addEventListener("sessionstart",Me),be.addEventListener("sessionend",Te),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,S),m=oe.get(e,v.length),m.init(),v.push(m),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),O.setFromProjectionMatrix(H),z=this.localClippingEnabled,N=le.init(this.clippingPlanes,z),f=se.get(e,g.length),f.init(),g.push(f),Pe(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(I,B),this.info.render.frame++,!0===N&&le.beginShadows();const n=m.state.shadowsArray;if(ce.render(n,e,t),!0===N&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(f,e),m.setupLights(y._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Re(f,e,r,r.viewport)}}else Re(f,e,t);null!==S&&(Q.updateMultisampleRenderTarget(S),Q.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(y,e,t),me.resetDefaultState(),_=-1,A=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=n;const r=Z.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;S=e,b=t,w=n;let r=!0,i=null,a=!1,s=!1;if(e){const o=Z.get(e);void 0!==o.__useDefaultFramebuffer?(Y.bindFramebuffer(ve.FRAMEBUFFER,null),r=!1):void 0===o.__webglFramebuffer?Q.setupRenderTarget(e):o.__hasExternalTextures&&Q.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],a=!0):i=J.isWebGL2&&e.samples>0&&!1===Q.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,E.copy(e.viewport),C.copy(e.scissor),M=e.scissorTest}else E.copy(j).multiplyScalar(D).floor(),C.copy(F).multiplyScalar(D).floor(),M=L;if(Y.bindFramebuffer(ve.FRAMEBUFFER,i)&&J.drawBuffers&&r&&Y.drawBuffers(e,i),Y.viewport(E),Y.scissor(C),Y.setScissorTest(M),a){const r=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(s){const r=Z.get(e.texture),i=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}_=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){Y.bindFramebuffer(ve.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==gX&&fe.convert(o)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===dX&&(X.has("EXT_color_buffer_half_float")||J.isWebGL2&&X.has("EXT_color_buffer_float"));if(l!==iX&&fe.convert(l)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==uX||!(J.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ve.readPixels(t,n,r,i,fe.convert(o),fe.convert(l),a)}finally{const e=null!==S?Z.get(S).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);Q.setTexture2D(t,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,e.x,e.y,i,a),Y.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=t.image.width,a=t.image.height,s=fe.convert(n.format),o=fe.convert(n.type);Q.setTexture2D(n,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,n.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,i,a,s,o,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ve.texSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,s,o,t.image),0===r&&n.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),Y.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=fe.convert(r.format),c=fe.convert(r.type);let u;if(r.isData3DTexture)Q.setTexture3D(r,0),u=ve.TEXTURE_3D;else{if(!r.isDataArrayTexture&&!r.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Q.setTexture2DArray(r,0),u=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,r.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,r.unpackAlignment);const d=ve.getParameter(ve.UNPACK_ROW_LENGTH),h=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),p=ve.getParameter(ve.UNPACK_SKIP_PIXELS),f=ve.getParameter(ve.UNPACK_SKIP_ROWS),m=ve.getParameter(ve.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[i]:n.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,e.min.x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,e.min.y),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(u,i,t.x,t.y,t.z,a,s,o,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(u,i,t.x,t.y,t.z,a,s,o,l,g.data)):ve.texSubImage3D(u,i,t.x,t.y,t.z,a,s,o,l,c,g),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,d),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,h),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,p),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,f),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&ve.generateMipmap(u),Y.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Q.setTextureCube(e,0):e.isData3DTexture?Q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Q.setTexture2DArray(e,0):Q.setTexture2D(e,0),Y.unbindTexture()},this.resetState=function(){b=0,w=0,S=null,Y.reset(),me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return mY}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===MJ?"display-p3":"srgb",t.unpackColorSpace=WY.workingColorSpace===TJ?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===EJ?xJ:yJ}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===xJ?EJ:CJ}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class C1 extends E1{}C1.prototype.isWebGL1Renderer=!0;class M1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new TZ(e),this.density=t}clone(){return new M1(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class T1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new TZ(e),this.near=t,this.far=n}clone(){return new T1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class k1 extends dZ{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class P1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=rY,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=SY()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=SY()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=SY()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const R1=new uK;class D1{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)R1.fromBufferAttribute(this,t),R1.applyMatrix4(e),this.setXYZ(t,R1.x,R1.y,R1.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)R1.fromBufferAttribute(this,t),R1.applyNormalMatrix(e),this.setXYZ(t,R1.x,R1.y,R1.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)R1.fromBufferAttribute(this,t),R1.transformDirection(e),this.setXYZ(t,R1.x,R1.y,R1.z);return this}setX(e,t){return this.normalized&&(t=kY(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=kY(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=kY(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=kY(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=TY(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=TY(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=TY(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=TY(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array),r=kY(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=kY(t,this.array),n=kY(n,this.array),r=kY(r,this.array),i=kY(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new zZ(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new D1(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class I1 extends RZ{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new TZ(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let B1;const j1=new uK,F1=new uK,L1=new uK,O1=new RY,N1=new RY,z1=new zK,U1=new uK,H1=new uK,G1=new uK,V1=new RY,W1=new RY,q1=new RY;class X1 extends dZ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new I1;if(super(),this.isSprite=!0,this.type="Sprite",void 0===B1){B1=new iQ;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new P1(e,5);B1.setIndex([0,1,2,0,2,3]),B1.setAttribute("position",new D1(t,3,0,!1)),B1.setAttribute("uv",new D1(t,2,3,!1))}this.geometry=B1,this.material=e,this.center=new RY(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),F1.setFromMatrixScale(this.matrixWorld),z1.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),L1.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&F1.multiplyScalar(-L1.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;J1(U1.set(-.5,-.5,0),L1,a,F1,r,i),J1(H1.set(.5,-.5,0),L1,a,F1,r,i),J1(G1.set(.5,.5,0),L1,a,F1,r,i),V1.set(0,0),W1.set(1,0),q1.set(1,1);let s=e.ray.intersectTriangle(U1,H1,G1,!1,j1);if(null===s&&(J1(H1.set(-.5,.5,0),L1,a,F1,r,i),W1.set(0,1),s=e.ray.intersectTriangle(U1,G1,H1,!1,j1),null===s))return;const o=e.ray.origin.distanceTo(j1);o<e.near||o>e.far||t.push({distance:o,point:j1.clone(),uv:_Z.getInterpolation(j1,U1,H1,G1,V1,W1,q1,new RY),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function J1(e,t,n,r,i,a){O1.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(N1.x=a*O1.x-i*O1.y,N1.y=i*O1.x+a*O1.y):N1.copy(O1),e.copy(t),e.x+=N1.x,e.y+=N1.y,e.applyMatrix4(z1)}const Y1=new uK,K1=new uK;class Z1 extends dZ{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Y1.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Y1);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Y1.setFromMatrixPosition(e.matrixWorld),K1.setFromMatrixPosition(this.matrixWorld);const n=Y1.distanceTo(K1)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Q1=new uK,$1=new tK,e2=new tK,t2=new uK,n2=new zK,r2=new uK,i2=new RK,a2=new zK,s2=new NK;class o2 extends SQ{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Lq,this.bindMatrix=new zK,this.bindMatrixInverse=new zK,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new pK),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,r2),this.boundingBox.expandByPoint(r2)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new RK),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,r2),this.boundingSphere.expandByPoint(r2)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),i2.copy(this.boundingSphere),i2.applyMatrix4(r),!1!==e.ray.intersectsSphere(i2)&&(a2.copy(r).invert(),s2.copy(e.ray).applyMatrix4(a2),null!==this.boundingBox&&!1===s2.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,s2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new tK,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Lq?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Oq?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;$1.fromBufferAttribute(r.attributes.skinIndex,e),e2.fromBufferAttribute(r.attributes.skinWeight,e),Q1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=e2.getComponent(i);if(0!==e){const r=$1.getComponent(i);n2.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(t2.copy(Q1).applyMatrix4(n2),e)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class l2 extends dZ{constructor(){super(),this.isBone=!0,this.type="Bone"}}class c2 extends eK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Jq,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Jq,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const u2=new zK,d2=new zK;class h2{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=SY(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new zK)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new zK;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,a=e.length;i<a;i++){const r=e[i]?e[i].matrixWorld:d2;u2.multiplyMatrices(r,t[i]),u2.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new h2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new c2(t,e,e,gX,uX);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new l2),this.bones.push(i),this.boneInverses.push((new zK).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class p2 extends zZ{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const f2=new zK,m2=new zK,g2=[],v2=new pK,y2=new zK,x2=new SQ,b2=new RK;class w2 extends SQ{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new p2(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,y2)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new pK),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,f2),v2.copy(e.boundingBox).applyMatrix4(f2),this.boundingBox.union(v2)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new RK),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,f2),b2.copy(e.boundingSphere).applyMatrix4(f2),this.boundingSphere.union(b2)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(x2.geometry=this.geometry,x2.material=this.material,void 0!==x2.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),b2.copy(this.boundingSphere),b2.applyMatrix4(n),!1!==e.ray.intersectsSphere(b2)))for(let i=0;i<r;i++){this.getMatrixAt(i,f2),m2.multiplyMatrices(n,f2),x2.matrixWorld=m2,x2.raycast(e,g2);for(let e=0,n=g2.length;e<n;e++){const n=g2[e];n.instanceId=i,n.object=this,t.push(n)}g2.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new p2(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function S2(e,t){return e.z-t.z}function _2(e,t){return t.z-e.z}class A2{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const n=this.pool,r=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const i=n[this.index];r.push(i),this.index++,i.start=e.start,i.count=e.count,i.z=t}reset(){this.list.length=0,this.index=0}}const E2="batchId",C2=new zK,M2=new zK,T2=new zK,k2=new zK,P2=new HQ,R2=new pK,D2=new RK,I2=new uK,B2=new A2,j2=new SQ,F2=[];function L2(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}class O2 extends SQ{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,r=arguments.length>3?arguments[3]:void 0;super(new iQ,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxGeometryCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new c2(t,e,e,gX,uX);this._matricesTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxGeometryCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const i=e.getAttribute(r),{array:a,itemSize:s,normalized:o}=i,l=new a.constructor(n*s),c=new i.constructor(l,s,o);c.setUsage(i.usage),t.setAttribute(r,c)}if(null!==e.getIndex()){const e=n>65536?new Uint32Array(i):new Uint16Array(i);t.setIndex(new zZ(e,1))}const a=r>65536?new Uint32Array(n):new Uint16Array(n);t.setAttribute(E2,new zZ(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(E2))throw new Error('BatchedMesh: Geometry cannot use attribute "'.concat(E2,'"'));const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(n===E2)continue;if(!e.hasAttribute(n))throw new Error('BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new pK);const e=this._geometryCount,t=this.boundingBox,n=this._active;t.makeEmpty();for(let r=0;r<e;r++)!1!==n[r]&&(this.getMatrixAt(r,C2),this.getBoundingBoxAt(r,R2).applyMatrix4(C2),t.union(R2))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new RK);const e=this._geometryCount,t=this.boundingSphere,n=this._active;t.makeEmpty();for(let r=0;r<e;r++)!1!==n[r]&&(this.getMatrixAt(r,C2),this.getBoundingSphereAt(r,D2).applyMatrix4(C2),t.union(D2))}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let i=null;const a=this._reservedRanges,s=this._drawRanges,o=this._bounds;0!==this._geometryCount&&(i=a[a.length-1]),r.vertexCount=-1===t?e.getAttribute("position").count:t,r.vertexStart=null===i?0:i.vertexStart+i.vertexCount;const l=e.getIndex(),c=null!==l;if(c&&(r.indexCount=-1===n?l.count:n,r.indexStart=null===i?0:i.indexStart+i.indexCount),-1!==r.indexStart&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const u=this._visibility,d=this._active,h=this._matricesTexture,p=this._matricesTexture.image.data;u.push(!0),d.push(!0);const f=this._geometryCount;this._geometryCount++,T2.toArray(p,16*f),h.needsUpdate=!0,a.push(r),s.push({start:c?r.indexStart:r.vertexStart,count:-1}),o.push({boxInitialized:!1,box:new pK,sphereInitialized:!1,sphere:new RK});const m=this.geometry.getAttribute(E2);for(let g=0;g<r.vertexCount;g++)m.setX(r.vertexStart+g,f);return m.needsUpdate=!0,this.setGeometryAt(f,e),f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),s=this._reservedRanges[e];if(r&&a.count>s.indexCount||t.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const o=s.vertexStart,l=s.vertexCount;for(const h in n.attributes){if(h===E2)continue;const e=t.getAttribute(h),r=n.getAttribute(h);L2(e,r,o);const i=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=o+t;for(let t=0;t<i;t++)r.setComponent(e,t,0)}r.needsUpdate=!0}if(r){const e=s.indexStart;for(let t=0;t<a.count;t++)i.setX(e+t,o+a.getX(t));for(let t=a.count,n=s.indexCount;t<n;t++)i.setX(e+t,o);i.needsUpdate=!0}const c=this._bounds[e];null!==t.boundingBox?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,null!==t.boundingSphere?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const u=this._drawRanges[e],d=t.getAttribute("position");return u.count=r?a.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||!1===t[e]||(t[e]=!1,this._visibilityChanged=!0),this}getBoundingBoxAt(e,t){if(!1===this._active[e])return this;const n=this._bounds[e],r=n.box,i=this.geometry;if(!1===n.boxInitialized){r.makeEmpty();const t=i.index,a=i.attributes.position,s=this._drawRanges[e];for(let e=s.start,n=s.start+s.count;e<n;e++){let n=e;t&&(n=t.getX(n)),r.expandByPoint(I2.fromBufferAttribute(a,n))}n.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(!1===this._active[e])return this;const n=this._bounds[e],r=n.sphere,i=this.geometry;if(!1===n.sphereInitialized){r.makeEmpty(),this.getBoundingBoxAt(e,R2),R2.getCenter(r.center);const t=i.index,a=i.attributes.position,s=this._drawRanges[e];let o=0;for(let e=s.start,n=s.start+s.count;e<n;e++){let n=e;t&&(n=t.getX(n)),I2.fromBufferAttribute(a,n),o=Math.max(o,r.center.distanceToSquared(I2))}r.radius=Math.sqrt(o),n.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const n=this._active,r=this._matricesTexture,i=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]||(t.toArray(i,16*e),r.needsUpdate=!0),this}getMatrixAt(e,t){const n=this._active,r=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]?null:t.fromArray(r,16*e)}setVisibleAt(e,t){const n=this._visibility,r=this._active;return e>=this._geometryCount||!1===r[e]||n[e]===t||(n[e]=t,this._visibilityChanged=!0),this}getVisibleAt(e){const t=this._visibility,n=this._active;return!(e>=this._geometryCount||!1===n[e])&&t[e]}raycast(e,t){const n=this._visibility,r=this._active,i=this._drawRanges,a=this._geometryCount,s=this.matrixWorld,o=this.geometry;j2.material=this.material,j2.geometry.index=o.index,j2.geometry.attributes=o.attributes,null===j2.geometry.boundingBox&&(j2.geometry.boundingBox=new pK),null===j2.geometry.boundingSphere&&(j2.geometry.boundingSphere=new RK);for(let l=0;l<a;l++){if(!n[l]||!r[l])continue;const a=i[l];j2.geometry.setDrawRange(a.start,a.count),this.getMatrixAt(l,j2.matrixWorld).premultiply(s),this.getBoundingBoxAt(l,j2.geometry.boundingBox),this.getBoundingSphereAt(l,j2.geometry.boundingSphere),j2.raycast(e,F2);for(let e=0,n=F2.length;e<n;e++){const n=F2[e];n.object=this,n.batchId=l,t.push(n)}F2.length=0}j2.material=null,j2.geometry.index=null,j2.geometry.attributes={},j2.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map((e=>(0,c.A)({},e))),this._reservedRanges=e._reservedRanges.map((e=>(0,c.A)({},e))),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map((e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()}))),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),s=null===a?1:a.array.BYTES_PER_ELEMENT,o=this._visibility,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._drawRanges,d=this.perObjectFrustumCulled;d&&(k2.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),P2.setFromProjectionMatrix(k2,e.isWebGPURenderer?gY:mY));let h=0;if(this.sortObjects){M2.copy(this.matrixWorld).invert(),I2.setFromMatrixPosition(n.matrixWorld).applyMatrix4(M2);for(let n=0,r=o.length;n<r;n++)if(o[n]){this.getMatrixAt(n,C2),this.getBoundingSphereAt(n,D2).applyMatrix4(C2);let e=!1;if(d&&(e=!P2.intersectsSphere(D2)),!e){const e=I2.distanceTo(D2.center);B2.push(u[n],e)}}const e=B2.list,t=this.customSort;null===t?e.sort(i.transparent?_2:S2):t.call(this,e,n);for(let n=0,r=e.length;n<r;n++){const t=e[n];l[h]=t.start*s,c[h]=t.count,h++}B2.reset()}else for(let p=0,f=o.length;p<f;p++)if(o[p]){let e=!1;if(d&&(this.getMatrixAt(p,C2),this.getBoundingSphereAt(p,D2).applyMatrix4(C2),e=!P2.intersectsSphere(D2)),!e){const e=u[p];l[h]=e.start*s,c[h]=e.count,h++}}this._multiDrawCount=h,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class N2 extends RZ{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new TZ(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const z2=new uK,U2=new uK,H2=new zK,G2=new NK,V2=new RK;class W2 extends dZ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iQ,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N2;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)z2.fromBufferAttribute(t,e-1),U2.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=z2.distanceTo(U2);e.setAttribute("lineDistance",new YZ(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),V2.copy(n.boundingSphere),V2.applyMatrix4(r),V2.radius+=i,!1===e.ray.intersectsSphere(V2))return;H2.copy(r).invert(),G2.copy(e.ray).applyMatrix4(H2);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new uK,c=new uK,u=new uK,d=new uK,h=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count)-1;n<r;n+=h){const r=p.getX(n),i=p.getX(n+1);l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i);if(G2.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(d);a<e.near||a>e.far||t.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),r=Math.min(f.count,a.start+a.count)-1;n<r;n+=h){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(G2.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const q2=new uK,X2=new uK;class J2 extends W2{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)q2.fromBufferAttribute(t,e),X2.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+q2.distanceTo(X2);e.setAttribute("lineDistance",new YZ(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Y2 extends W2{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class K2 extends RZ{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new TZ(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Z2=new zK,Q2=new NK,$2=new RK,e3=new uK;class t3 extends dZ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iQ,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new K2;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),$2.copy(n.boundingSphere),$2.applyMatrix4(r),$2.radius+=i,!1===e.ray.intersectsSphere($2))return;Z2.copy(r).invert(),Q2.copy(e.ray).applyMatrix4(Z2);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);e3.fromBufferAttribute(c,i),n3(e3,i,o,r,e,t,this)}}else{for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)e3.fromBufferAttribute(c,n),n3(e3,n,o,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function n3(e,t,n,r,i,a,s){const o=Q2.distanceSqToPoint(e);if(o<n){const n=new uK;Q2.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}class r3 extends eK{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:$q,this.magFilter=void 0!==i?i:$q,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class i3 extends eK{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Jq,this.minFilter=Jq,this.generateMipmaps=!1,this.needsUpdate=!0}}class a3 extends eK{constructor(e,t,n,r,i,a,s,o,l,c,u,d){super(null,a,s,o,l,c,r,i,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class s3 extends a3{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=qq}}class o3 extends a3{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,zq),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class l3 extends eK{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class c3{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let s,o=0,l=i-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),s=n[r]-a,s<0)o=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),s=this.getPoint(i),o=t||(a.isVector2?new RY:new uK);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new uK,r=[],i=[],a=[],s=new uK,o=new zK;for(let h=0;h<=e;h++){const t=h/e;r[h]=this.getTangentAt(t,new uK)}i[0]=new uK,a[0]=new uK;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),a[h]=a[h-1].clone(),s.crossVectors(r[h-1],r[h]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(_Y(r[h-1].dot(r[h]),-1,1));i[h].applyMatrix4(o.makeRotationAxis(s,e))}a[h].crossVectors(r[h],i[h])}if(!0===t){let t=Math.acos(_Y(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class u3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const n=t||new RY,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);const s=this.aStartAngle+e*i;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class d3 extends u3{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function h3(){let e=0,t=0,n=0,r=0;function i(i,a,s,o){e=i,t=s,n=-3*i+3*a-2*s-o,r=2*i-2*a+s+o}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,c=(n-t)/s-(r-t)/(s+o)+(r-n)/o;l*=s,c*=s,i(t,n,l,c)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}const p3=new uK,f3=new h3,m3=new h3,g3=new h3;class v3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK,n=this.points,r=n.length,i=(r-(this.closed?0:1))*e;let a,s,o=Math.floor(i),l=i-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:0===l&&o===r-1&&(o=r-2,l=1),this.closed||o>0?a=n[(o-1)%r]:(p3.subVectors(n[0],n[1]).add(n[0]),a=p3);const c=n[o%r],u=n[(o+1)%r];if(this.closed||o+2<r?s=n[(o+2)%r]:(p3.subVectors(n[r-1],n[r-2]).add(n[r-1]),s=p3),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),f3.initNonuniformCatmullRom(a.x,c.x,u.x,s.x,t,n,r),m3.initNonuniformCatmullRom(a.y,c.y,u.y,s.y,t,n,r),g3.initNonuniformCatmullRom(a.z,c.z,u.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(f3.initCatmullRom(a.x,c.x,u.x,s.x,this.tension),m3.initCatmullRom(a.y,c.y,u.y,s.y,this.tension),g3.initCatmullRom(a.z,c.z,u.z,s.z,this.tension));return t.set(f3.calc(l),m3.calc(l),g3.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new uK).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function y3(e,t,n,r,i){const a=.5*(r-t),s=.5*(i-n),o=e*e;return(2*n-2*r+a+s)*(e*o)+(-3*n+3*r-2*a-s)*o+a*e+n}function x3(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function b3(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class w3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new RY,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RY,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new RY;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(b3(e,n.x,r.x,i.x,a.x),b3(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class S3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new uK,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new uK;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(b3(e,n.x,r.x,i.x,a.x),b3(e,n.y,r.y,i.y,a.y),b3(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class _3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new RY,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class A3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class E3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new RY,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RY;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY,n=this.v0,r=this.v1,i=this.v2;return t.set(x3(e,n.x,r.x,i.x),x3(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class C3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new uK;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK,n=this.v0,r=this.v1,i=this.v2;return t.set(x3(e,n.x,r.x,i.x),x3(e,n.y,r.y,i.y),x3(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class M3 extends c3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY,n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,s=n[0===i?i:i-1],o=n[i],l=n[i>n.length-2?n.length-1:i+1],c=n[i>n.length-3?n.length-1:i+2];return t.set(y3(a,s.x,o.x,l.x,c.x),y3(a,s.y,o.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new RY).fromArray(n))}return this}}var T3=Object.freeze({__proto__:null,ArcCurve:d3,CatmullRomCurve3:v3,CubicBezierCurve:w3,CubicBezierCurve3:S3,EllipseCurve:u3,LineCurve:_3,LineCurve3:A3,QuadraticBezierCurve:E3,QuadraticBezierCurve3:C3,SplineCurve:M3});class k3 extends c3{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new T3[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,a=this.curves[i],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new T3[n.type]).fromJSON(n))}return this}}class P3 extends k3{constructor(e){super(),this.type="Path",this.currentPoint=new RY,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new _3(this.currentPoint.clone(),new RY(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new E3(this.currentPoint.clone(),new RY(e,t),new RY(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const s=new w3(this.currentPoint.clone(),new RY(e,t),new RY(n,r),new RY(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new M3(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,a,s,o),this}absellipse(e,t,n,r,i,a,s,o){const l=new u3(e,t,n,r,i,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class R3 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new RY(0,-.5),new RY(.5,0),new RY(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=_Y(r,0,2*Math.PI);const i=[],a=[],s=[],o=[],l=[],c=1/t,u=new uK,d=new RY,h=new uK,p=new uK,f=new uK;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.x+=f.x,h.y+=f.y,h.z+=f.z,h.normalize(),o.push(h.x,h.y,h.z),f.copy(p)}for(let v=0;v<=t;v++){const i=n+v*c*r,h=Math.sin(i),p=Math.cos(i);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*p,a.push(u.x,u.y,u.z),d.x=v/t,d.y=n/(e.length-1),s.push(d.x,d.y);const r=o[3*n+0]*h,i=o[3*n+1],c=o[3*n+0]*p;l.push(r,i,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,r=n,a=n+e.length,s=n+e.length+1,o=n+1;i.push(r,a,o),i.push(s,o,a)}this.setIndex(i),this.setAttribute("position",new YZ(a,3)),this.setAttribute("uv",new YZ(s,2)),this.setAttribute("normal",new YZ(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R3(e.points,e.segments,e.phiStart,e.phiLength)}}class D3 extends R3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const i=new P3;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new D3(e.radius,e.length,e.capSegments,e.radialSegments)}}class I3 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],a=[],s=[],o=[],l=new uK,c=new RY;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const i=n+u/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[d]/e+1)/2,c.y=(a[d+1]/e+1)/2,o.push(c.x,c.y)}for(let u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new YZ(a,3)),this.setAttribute("normal",new YZ(s,3)),this.setAttribute("uv",new YZ(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new I3(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class B3 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,a=new RY,f=new uK;let v=0;const y=!0===n?e:t,x=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*x,0),d.push(0,x,0),h.push(.5,.5),p++;const b=p;for(let e=0;e<=r;e++){const t=e/r*o+s,n=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*x,f.z=y*n,u.push(f.x,f.y,f.z),d.push(0,x,0),a.x=.5*n+.5,a.y=.5*i*x+.5,h.push(a.x,a.y),p++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new uK,v=new uK;let y=0;const x=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*o+s,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),a.set(l,x,f).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],a=f[t][e+1];c.push(n,r,a),c.push(r,i,a),y+=6}l.addGroup(g,y,0),g+=y}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new YZ(u,3)),this.setAttribute("normal",new YZ(d,3)),this.setAttribute("uv",new YZ(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B3(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class j3 extends B3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}static fromJSON(e){return new j3(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class F3 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],a=[];function s(e,t,n,r){const i=r+1,a=[];for(let s=0;s<=i;s++){a[s]=[];const r=e.clone().lerp(n,s/i),o=t.clone().lerp(n,s/i),l=i-s;for(let e=0;e<=l;e++)a[s][e]=0===e&&s===i?r:r.clone().lerp(o,e/l)}for(let s=0;s<i;s++)for(let e=0;e<2*(i-s)-1;e++){const t=Math.floor(e/2);e%2===0?(o(a[s][t+1]),o(a[s+1][t]),o(a[s][t])):(o(a[s][t+1]),o(a[s+1][t+1]),o(a[s+1][t]))}}function o(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new uK,r=new uK,i=new uK;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),s(n,r,i,e)}(r),function(e){const t=new uK;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new uK;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,s=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(r,1-s)}var t;(function(){const e=new uK,t=new uK,n=new uK,r=new uK,s=new RY,o=new RY,l=new RY;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),s.set(a[h+0],a[h+1]),o.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);c(s,h+0,e,p),c(o,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),s=Math.min(t,n,r);i>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new YZ(i,3)),this.setAttribute("normal",new YZ(i.slice(),3)),this.setAttribute("uv",new YZ(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F3(e.vertices,e.indices,e.radius,e.details)}}class L3 extends F3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new L3(e.radius,e.detail)}}const O3=new uK,N3=new uK,z3=new uK,U3=new _Z;class H3 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(bY*t),a=e.getIndex(),s=e.getAttribute("position"),o=a?a.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<o;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=U3;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),o.fromBufferAttribute(s,l[2]),U3.getNormal(z3),u[0]="".concat(Math.round(t.x*r),",").concat(Math.round(t.y*r),",").concat(Math.round(t.z*r)),u[1]="".concat(Math.round(n.x*r),",").concat(Math.round(n.y*r),",").concat(Math.round(n.z*r)),u[2]="".concat(Math.round(o.x*r),",").concat(Math.round(o.y*r),",").concat(Math.round(o.z*r)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],a=U3[c[e]],s=U3[c[t]],o="".concat(n,"_").concat(r),p="".concat(r,"_").concat(n);p in d&&d[p]?(z3.dot(d[p].normal)<=i&&(h.push(a.x,a.y,a.z),h.push(s.x,s.y,s.z)),d[p]=null):o in d||(d[o]={index0:l[e],index1:l[t],normal:z3.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];O3.fromBufferAttribute(s,t),N3.fromBufferAttribute(s,n),h.push(O3.x,O3.y,O3.z),h.push(N3.x,N3.y,N3.z)}this.setAttribute("position",new YZ(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class G3 extends P3{constructor(e){super(e),this.uuid=SY(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new P3).fromJSON(n))}return this}}const V3=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t&&t.length,i=r?t[0]*n:e.length;let a=W3(e,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,d,h,p;if(r&&(a=function(e,t,n,r){const i=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=W3(e,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(n5(c));for(i.sort(Q3),a=0;a<i.length;a++)n=$3(i[a],n);return n}(e,t,a,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)d=e[t],h=e[t+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-o,u-l),p=0!==p?32767/p:0}return X3(a,s,n,o,l,p,0),s};function W3(e,t,n,r,i){let a,s;if(i===function(e,t,n,r){let i=0;for(let a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)s=h5(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=h5(a,e[a],e[a+1],s);return s&&s5(s,s.next)&&(p5(s),s=s.next),s}function q3(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!s5(r,r.next)&&0!==a5(r.prev,r,r.next))r=r.next;else{if(p5(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function X3(e,t,n,r,i,a,s){if(!e)return;!s&&a&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=t5(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,s,o,l,c=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,o=0,t=0;t<c&&(o++,r=r.nextZ,r);t++);for(l=c;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(s>1)}(i)}(e,r,i,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?Y3(e,r,i,a):J3(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),p5(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?X3(e=K3(q3(e),t,n),t,n,r,i,a,2):2===s&&Z3(e,t,n,r,i,a):X3(q3(e),t,n,r,i,a,1);break}}function J3(e){const t=e.prev,n=e,r=e.next;if(a5(t,n,r)>=0)return!1;const i=t.x,a=n.x,s=r.x,o=t.y,l=n.y,c=r.y,u=i<a?i<s?i:s:a<s?a:s,d=o<l?o<c?o:c:l<c?l:c,h=i>a?i>s?i:s:a>s?a:s,p=o>l?o>c?o:c:l>c?l:c;let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&r5(i,o,a,l,s,c,f.x,f.y)&&a5(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Y3(e,t,n,r){const i=e.prev,a=e,s=e.next;if(a5(i,a,s)>=0)return!1;const o=i.x,l=a.x,c=s.x,u=i.y,d=a.y,h=s.y,p=o<l?o<c?o:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=o>l?o>c?o:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=t5(p,f,t,n,r),y=t5(m,g,t,n,r);let x=e.prevZ,b=e.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==s&&r5(o,u,l,d,c,h,x.x,x.y)&&a5(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==s&&r5(o,u,l,d,c,h,b.x,b.y)&&a5(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==s&&r5(o,u,l,d,c,h,x.x,x.y)&&a5(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==s&&r5(o,u,l,d,c,h,b.x,b.y)&&a5(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function K3(e,t,n){let r=e;do{const i=r.prev,a=r.next.next;!s5(i,a)&&o5(i,r,r.next,a)&&u5(i,a)&&u5(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),p5(r),p5(r.next),r=e=a),r=r.next}while(r!==e);return q3(r)}function Z3(e,t,n,r,i,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&i5(s,e)){let o=d5(s,e);return s=q3(s,s.next),o=q3(o,o.next),X3(s,t,n,r,i,a,0),void X3(o,t,n,r,i,a,0)}e=e.next}s=s.next}while(s!==e)}function Q3(e,t){return e.x-t.x}function $3(e,t){const n=function(e,t){let n,r=t,i=-1/0;const a=e.x,s=e.y;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){const e=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=a&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===a))return n}r=r.next}while(r!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let u,d=1/0;r=n;do{a>=r.x&&r.x>=l&&a!==r.x&&r5(s<c?a:i,s,l,c,s<c?i:a,s,r.x,r.y)&&(u=Math.abs(s-r.y)/(a-r.x),u5(r,e)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&e5(n,r)))&&(n=r,d=u)),r=r.next}while(r!==o);return n}(e,t);if(!n)return t;const r=d5(n,e);return q3(r,r.next),q3(n,n.next)}function e5(e,t){return a5(e.prev,e,t.prev)<0&&a5(t.next,e,e.next)<0}function t5(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function n5(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function r5(e,t,n,r,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(r-o)>=(n-s)*(t-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function i5(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&o5(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(u5(e,t)&&u5(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(a5(e.prev,e,t.prev)||a5(e,t.prev,t))||s5(e,t)&&a5(e.prev,e,e.next)>0&&a5(t.prev,t,t.next)>0)}function a5(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function s5(e,t){return e.x===t.x&&e.y===t.y}function o5(e,t,n,r){const i=c5(a5(e,t,n)),a=c5(a5(e,t,r)),s=c5(a5(n,r,e)),o=c5(a5(n,r,t));return i!==a&&s!==o||(!(0!==i||!l5(e,n,t))||(!(0!==a||!l5(e,r,t))||(!(0!==s||!l5(n,e,r))||!(0!==o||!l5(n,t,r)))))}function l5(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function c5(e){return e>0?1:e<0?-1:0}function u5(e,t){return a5(e.prev,e,e.next)<0?a5(e,t,e.next)>=0&&a5(e,e.prev,t)>=0:a5(e,t,e.prev)<0||a5(e,e.next,t)<0}function d5(e,t){const n=new f5(e.i,e.x,e.y),r=new f5(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function h5(e,t,n,r){const i=new f5(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function p5(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function f5(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class m5{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return m5.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];g5(e),v5(n,e);let a=e.length;t.forEach(g5);for(let o=0;o<t.length;o++)r.push(a),a+=t[o].length,v5(n,t[o]);const s=V3(n,r);for(let o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}}function g5(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function v5(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class y5 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new G3([new RY(.5,.5),new RY(-.5,.5),new RY(-.5,-.5),new RY(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let s=0,o=e.length;s<o;s++){a(e[s])}function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:x5;let g,v,y,x,b,w=!1;f&&(g=f.getSpacedPoints(o),w=!0,c=!1,v=f.computeFrenetFrames(o,!1),y=new uK,x=new uK,b=new uK),c||(p=0,u=0,d=0,h=0);const S=e.extractPoints(s);let _=S.shape;const A=S.holes;if(!m5.isClockWise(_)){_=_.reverse();for(let e=0,t=A.length;e<t;e++){const t=A[e];m5.isClockWise(t)&&(A[e]=t.reverse())}}const E=m5.triangulateShape(_,A),C=_;for(let t=0,n=A.length;t<n;t++){const e=A[t];_=_.concat(e)}function M(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const T=_.length,k=E.length;function P(e,t,n){let r,i,a;const s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+o*o,d=s*c-o*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),p=t.x-o/d,f=t.y+s/d,m=((n.x-c/h-p)*c-(n.y+l/h-f)*l)/(s*c-o*l);r=p+s*m-e.x,i=f+o*m-e.y;const g=r*r+i*i;if(g<=2)return new RY(r,i);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,i=s,a=Math.sqrt(u)):(r=s,i=o,a=Math.sqrt(u/2))}return new RY(r/a,i/a)}const R=[];for(let t=0,n=C.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),R[t]=P(C[t],C[r],C[i]);const D=[];let I,B=R.concat();for(let t=0,n=A.length;t<n;t++){const e=A[t];I=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[t]=P(e[t],e[r],e[i]);D.push(I),B=B.concat(I)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=d*Math.sin(e*Math.PI/2)+h;for(let t=0,i=C.length;t<i;t++){const e=M(C[t],R[t],r);L(e.x,e.y,-n)}for(let t=0,i=A.length;t<i;t++){const e=A[t];I=D[t];for(let t=0,i=e.length;t<i;t++){const i=M(e[t],I[t],r);L(i.x,i.y,-n)}}}const j=d+h;for(let t=0;t<T;t++){const e=c?M(_[t],B[t],j):_[t];w?(x.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(x).add(y),L(b.x,b.y,b.z)):L(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<T;e++){const n=c?M(_[e],B[e],j):_[e];w?(x.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(x).add(y),L(b.x,b.y,b.z)):L(n.x,n.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=d*Math.sin(e*Math.PI/2)+h;for(let t=0,i=C.length;t<i;t++){const e=M(C[t],R[t],r);L(e.x,e.y,l+n)}for(let t=0,i=A.length;t<i;t++){const e=A[t];I=D[t];for(let t=0,i=e.length;t<i;t++){const i=M(e[t],I[t],r);w?L(i.x,i.y+g[o-1].y,g[o-1].x+n):L(i.x,i.y,l+n)}}}function F(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=T*e,a=T*(e+1);N(t+r+n,t+i+n,t+i+a,t+r+a)}}}function L(e,t,n){a.push(e),a.push(t),a.push(n)}function O(e,t,i){z(e),z(t),z(i);const a=r.length/3,s=m.generateTopUV(n,r,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[2])}function N(e,t,i,a){z(e),z(t),z(a),z(t),z(i),z(a);const s=r.length/3,o=m.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);U(o[0]),U(o[1]),U(o[3]),U(o[1]),U(o[2]),U(o[3])}function z(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function U(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=T*e;for(let n=0;n<k;n++){const e=E[n];O(e[2]+t,e[1]+t,e[0]+t)}e=o+2*p,t=T*e;for(let n=0;n<k;n++){const e=E[n];O(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<k;e++){const t=E[e];O(t[2],t[1],t[0])}for(let e=0;e<k;e++){const t=E[e];O(t[0]+T*o,t[1]+T*o,t[2]+T*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;F(C,t),t+=C.length;for(let n=0,r=A.length;n<r;n++){const e=A[n];F(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new YZ(r,3)),this.setAttribute("uv",new YZ(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,a=e.shapes.length;i<a;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new T3[r.type]).fromJSON(r)),new y5(n,e.options)}}const x5={generateTopUV:function(e,t,n,r,i){const a=t[3*n],s=t[3*n+1],o=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new RY(a,s),new RY(o,l),new RY(c,u)]},generateSideWallUV:function(e,t,n,r,i,a){const s=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],h=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-u)<Math.abs(s-c)?[new RY(s,1-l),new RY(c,1-d),new RY(h,1-f),new RY(m,1-v)]:[new RY(o,1-l),new RY(u,1-d),new RY(p,1-f),new RY(g,1-v)]}};class b5 extends F3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new b5(e.radius,e.detail)}}class w5 extends F3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new w5(e.radius,e.detail)}}class S5 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);const s=[],o=[],l=[],c=[];let u=e;const d=(t-e)/r,h=new uK,p=new RY;for(let f=0;f<=r;f++){for(let e=0;e<=n;e++){const r=i+e/n*a;h.x=u*Math.cos(r),h.y=u*Math.sin(r),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}u+=d}for(let f=0;f<r;f++){const e=f*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,a=r+n+1,o=r+n+2,l=r+1;s.push(i,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new YZ(o,3)),this.setAttribute("normal",new YZ(l,3)),this.setAttribute("uv",new YZ(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S5(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _5 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new G3([new RY(0,.5),new RY(-.5,-.5),new RY(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,o,c),s+=o,o=0;function l(e){const s=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===m5.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===m5.isClockWise(e)&&(u[t]=e.reverse())}const d=m5.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),a.push(e.x,e.y)}for(let t=0,r=d.length;t<r;t++){const e=d[t],r=e[0]+s,i=e[1]+s,a=e[2]+s;n.push(r,i,a),o+=3}}this.setIndex(n),this.setAttribute("position",new YZ(r,3)),this.setAttribute("normal",new YZ(i,3)),this.setAttribute("uv",new YZ(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new _5(n,e.curveSegments)}}class A5 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new uK,d=new uK,h=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let y=0;0===g&&0===a?y=.5/t:g===n&&o===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(r+o*i)*Math.sin(a+v*s),u.y=e*Math.cos(a+v*s),u.z=e*Math.sin(r+o*i)*Math.sin(a+v*s),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),m.push(o+y,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],s=c[g+1][e+1];(0!==g||a>0)&&h.push(t,r,s),(g!==n-1||o<Math.PI)&&h.push(r,i,s)}this.setIndex(h),this.setAttribute("position",new YZ(p,3)),this.setAttribute("normal",new YZ(f,3)),this.setAttribute("uv",new YZ(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new A5(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class E5 extends F3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new E5(e.radius,e.detail)}}class C5 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],o=[],l=[],c=new uK,u=new uK,d=new uK;for(let h=0;h<=n;h++)for(let a=0;a<=r;a++){const p=a/r*i,f=h/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),s.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),o.push(d.x,d.y,d.z),l.push(a/r),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=r;e++){const t=(r+1)*h+e-1,n=(r+1)*(h-1)+e-1,i=(r+1)*(h-1)+e,s=(r+1)*h+e;a.push(t,n,s),a.push(n,i,s)}this.setIndex(a),this.setAttribute("position",new YZ(s,3)),this.setAttribute("normal",new YZ(o,3)),this.setAttribute("uv",new YZ(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C5(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class M5 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],l=[],c=[],u=new uK,d=new uK,h=new uK,p=new uK,f=new uK,m=new uK,g=new uK;for(let y=0;y<=n;++y){const s=y/n*i*Math.PI*2;v(s,i,a,e,h),v(s+.01,i,a,e,p),m.subVectors(p,h),g.addVectors(p,h),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,a=-t*Math.cos(i),s=t*Math.sin(i);u.x=h.x+(a*g.x+s*f.x),u.y=h.y+(a*g.y+s*f.y),u.z=h.z+(a*g.z+s*f.z),o.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(y/n),c.push(e/r)}}for(let y=1;y<=n;y++)for(let e=1;e<=r;e++){const t=(r+1)*(y-1)+(e-1),n=(r+1)*y+(e-1),i=(r+1)*y+e,a=(r+1)*(y-1)+e;s.push(t,n,a),s.push(n,i,a)}function v(e,t,n,r,i){const a=Math.cos(e),s=Math.sin(e),o=n/t*e,l=Math.cos(o);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*s*.5,i.z=r*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new YZ(o,3)),this.setAttribute("normal",new YZ(l,3)),this.setAttribute("uv",new YZ(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M5(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class T5 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C3(new uK(-1,-1,0),new uK(-1,1,0),new uK(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new uK,o=new uK,l=new RY;let c=new uK;const u=[],d=[],h=[],p=[];function f(i){c=e.getPointAt(i/t,c);const l=a.normals[i],h=a.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+i*h.x,o.y=a*l.y+i*h.y,o.z=a*l.z+i*h.z,o.normalize(),d.push(o.x,o.y,o.z),s.x=c.x+n*o.x,s.y=c.y+n*o.y,s.z=c.z+n*o.z,u.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;p.push(n,i,s),p.push(i,a,s)}}()}(),this.setIndex(p),this.setAttribute("position",new YZ(u,3)),this.setAttribute("normal",new YZ(d,3)),this.setAttribute("uv",new YZ(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new T5((new T3[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class k5 extends iQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new uK,i=new uK;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=s.getX(e+l),c=s.getX(e+(l+1)%3);r.fromBufferAttribute(a,o),i.fromBufferAttribute(a,c),!0===P5(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let o=0;o<3;o++){const s=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===P5(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new YZ(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function P5(e,t,n){const r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var R5=Object.freeze({__proto__:null,BoxGeometry:AQ,CapsuleGeometry:D3,CircleGeometry:I3,ConeGeometry:j3,CylinderGeometry:B3,DodecahedronGeometry:L3,EdgesGeometry:H3,ExtrudeGeometry:y5,IcosahedronGeometry:b5,LatheGeometry:R3,OctahedronGeometry:w5,PlaneGeometry:WQ,PolyhedronGeometry:F3,RingGeometry:S5,ShapeGeometry:_5,SphereGeometry:A5,TetrahedronGeometry:E5,TorusGeometry:C5,TorusKnotGeometry:M5,TubeGeometry:T5,WireframeGeometry:k5});class D5 extends RZ{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new TZ(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class I5 extends kQ{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class B5 extends RZ{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new TZ(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new TZ(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=SJ,this.normalScale=new RY(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class j5 extends B5{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new RY(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _Y(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new TZ(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new TZ(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new TZ(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class F5 extends RZ{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new TZ(16777215),this.specular=new TZ(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new TZ(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=SJ,this.normalScale=new RY(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mq,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class L5 extends RZ{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new TZ(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new TZ(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=SJ,this.normalScale=new RY(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class O5 extends RZ{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=SJ,this.normalScale=new RY(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class N5 extends RZ{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new TZ(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new TZ(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=SJ,this.normalScale=new RY(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mq,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class z5 extends RZ{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new TZ(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=SJ,this.normalScale=new RY(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class U5 extends N2{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function H5(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function G5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function V5(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function W5(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,s=0;s!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[s++]=e[r+n]}return i}function q5(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let s=a[r];if(void 0!==s)if(Array.isArray(s))do{s=a[r],void 0!==s&&(t.push(a.time),n.push.apply(n,s)),a=e[i++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[r],void 0!==s&&(t.push(a.time),s.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{s=a[r],void 0!==s&&(t.push(a.time),n.push(s)),a=e[i++]}while(void 0!==a)}const X5={convertArray:H5,isTypedArray:G5,getKeyframeOrder:V5,sortedArray:W5,flattenJSON:q5,subclip:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const a=e.clone();a.name=t;const s=[];for(let l=0;l<a.tracks.length;++l){const e=a.tracks[l],t=e.getValueSize(),o=[],c=[];for(let a=0;a<e.times.length;++a){const s=e.times[a]*i;if(!(s<n||s>=r)){o.push(e.times[a]);for(let n=0;n<t;++n)c.push(e.values[a*t+n])}}0!==o.length&&(e.times=H5(o,e.times.constructor),e.values=H5(c,e.values.constructor),s.push(e))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let s=0;s<i;++s){const t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=t.times.length-1;let h;if(a<=t.times[0]){const e=o,n=l-o;h=t.values.slice(e,n)}else if(a>=t.times[d]){const e=d*l+o,n=e+l-o;h=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=o,r=l-o;e.evaluate(a),h=e.resultBuffer.slice(n,r)}if("quaternion"===r){(new cK).fromArray(h).normalize().conjugate().toArray(h)}const p=i.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===r)cK.multiplyQuaternionsFlat(i.values,t,h,0,i.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)i.values[t+n]-=h[n]}}}return e.blendMode=fJ,e}};class J5{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(e>=i)break e;{const s=t[1];e<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0}}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let a=0;a!==r;++a)t[a]=n[i+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Y5 extends J5{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:uJ,endingEnd:uJ}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case dJ:i=e,s=2*t-n;break;case hJ:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case dJ:a=e,o=2*n-t;break;case hJ:a=1,o=n+r[1]-r[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,x=h*m-h*f;for(let b=0;b!==s;++b)i[b]=g*a[c+b]+v*a[l+b]+y*a[o+b]+x*a[u+b];return i}}class K5 extends J5{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(r-t),u=1-c;for(let d=0;d!==s;++d)i[d]=a[l+d]*u+a[o+d]*c;return i}}class Z5 extends J5{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Q5{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=H5(t,this.TimeBufferType),this.values=H5(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:H5(e.times,Array),values:H5(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Z5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new K5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Y5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case oJ:t=this.InterpolantFactoryMethodDiscrete;break;case lJ:t=this.InterpolantFactoryMethodLinear;break;case cJ:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return oJ;case this.InterpolantFactoryMethodLinear:return lJ;case this.InterpolantFactoryMethodSmooth:return cJ}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==i;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,a),e=!1;break}a=t}if(void 0!==r&&G5(r))for(let s=0,o=r.length;s!==o;++s){const t=r[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===cJ,i=e.length-1;let a=1;for(let s=1;s<i;++s){let i=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(r)i=!0;else{const e=s*n,r=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[a+s]){i=!0;break}}}if(i){if(s!==a){e[a]=e[s];const r=s*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,s=0;s!==n;++s)t[r+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Q5.prototype.TimeBufferType=Float32Array,Q5.prototype.ValueBufferType=Float32Array,Q5.prototype.DefaultInterpolation=lJ;class $5 extends Q5{}$5.prototype.ValueTypeName="bool",$5.prototype.ValueBufferType=Array,$5.prototype.DefaultInterpolation=oJ,$5.prototype.InterpolantFactoryMethodLinear=void 0,$5.prototype.InterpolantFactoryMethodSmooth=void 0;class e4 extends Q5{}e4.prototype.ValueTypeName="color";class t4 extends Q5{}t4.prototype.ValueTypeName="number";class n4 extends J5{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(r-t);let l=e*s;for(let c=l+s;l!==c;l+=4)cK.slerpFlat(i,0,a,l-s,a,l,o);return i}}class r4 extends Q5{InterpolantFactoryMethodLinear(e){return new n4(this.times,this.values,this.getValueSize(),e)}}r4.prototype.ValueTypeName="quaternion",r4.prototype.DefaultInterpolation=lJ,r4.prototype.InterpolantFactoryMethodSmooth=void 0;class i4 extends Q5{}i4.prototype.ValueTypeName="string",i4.prototype.ValueBufferType=Array,i4.prototype.DefaultInterpolation=oJ,i4.prototype.InterpolantFactoryMethodLinear=void 0,i4.prototype.InterpolantFactoryMethodSmooth=void 0;class a4 extends Q5{}a4.prototype.ValueTypeName="vector";class s4{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pJ;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=SY(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,s=n.length;a!==s;++a)t.push(o4(n[a]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,a=n.length;i!==a;++i)t.push(Q5.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let s=0;s<i;s++){let e=[],o=[];e.push((s+i-1)%i,s,(s+1)%i),o.push(0,1,0);const l=V5(e);e=W5(e,1,l),o=W5(o,1,l),r||0!==e[0]||(e.push(i),o.push(o[0])),a.push(new t4(".morphTargetInfluences["+t[s].name+"]",e,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){const t=e[s],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const a=[];for(const s in r)a.push(this.CreateFromMorphTargetSequence(s,r[s],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],s=[];q5(n,a,s,r),0!==a.length&&i.push(new e(t,a,s))}},r=[],i=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],a=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),a.push(r.morphTarget===i?1:0)}r.push(new t4(".morphTargetInfluence["+i+"]",t,a))}o=t.length*a}else{const i=".bones["+t[c].name+"]";n(a4,i+".position",e,"pos",r),n(r4,i+".quaternion",e,"rot",r),n(a4,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,o,r,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function o4(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return t4;case"vector":case"vector2":case"vector3":case"vector4":return a4;case"color":return e4;case"quaternion":return r4;case"bool":case"boolean":return $5;case"string":return i4}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];q5(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const l4={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class c4{constructor(e,t,n){const r=this;let i,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==r.onStart&&r.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const u4=new c4;class d4{constructor(e){this.manager=void 0!==e?e:u4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}d4.DEFAULT_MATERIAL_NAME="__DEFAULT";const h4={};class p4 extends Error{constructor(e,t){super(e),this.response=t}}class f4 extends d4{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=l4.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==h4[e])return void h4[e].push({onLoad:t,onProgress:n,onError:r});h4[e]=[],h4[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=h4[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=i?parseInt(i):0,s=0!==a;let o=0;const l=new ReadableStream({start(e){!function t(){r.read().then((r=>{let{done:i,value:l}=r;if(i)e.close();else{o+=l.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new p4('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,s)));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{l4.add(e,t);const n=h4[e];delete h4[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=h4[e];if(void 0===n)throw this.manager.itemError(e),t;delete h4[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class m4 extends d4{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new f4(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(Zie){r?r(Zie):console.error(Zie),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=s4.parse(e[n]);t.push(r)}return t}}class g4 extends d4{constructor(e){super(e)}load(e,t,n,r){const i=this,a=[],s=new a3,o=new f4(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const n=i.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=$q),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,r)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)c(u);else o.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=$q),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,r);return s}}class v4 extends d4{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=l4.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const s=LY("img");function o(){c(),l4.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}class y4 extends d4{constructor(e){super(e)}load(e,t,n,r){const i=new BQ;i.colorSpace=EJ;const a=new v4(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(e[n],(function(e){i.images[n]=e,s++,6===s&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let l=0;l<e.length;++l)o(l);return i}}class x4 extends d4{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new c2,s=new f4(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,(function(e){let n;try{n=i.parse(e)}catch(s){if(void 0===r)return void console.error(s);r(s)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:qq,a.wrapT=void 0!==n.wrapT?n.wrapT:qq,a.magFilter=void 0!==n.magFilter?n.magFilter:$q,a.minFilter=void 0!==n.minFilter?n.minFilter:$q,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?a.colorSpace=n.colorSpace:void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=nX),1===n.mipmapCount&&(a.minFilter=$q),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)}),n,r),a}}class b4 extends d4{constructor(e){super(e)}load(e,t,n,r){const i=new eK,a=new v4(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class w4 extends dZ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new TZ(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class S4 extends w4{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dZ.DEFAULT_UP),this.updateMatrix(),this.groundColor=new TZ(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const _4=new zK,A4=new uK,E4=new uK;class C4{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new RY(512,512),this.map=null,this.mapPass=null,this.matrix=new zK,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new HQ,this._frameExtents=new RY(1,1),this._viewportCount=1,this._viewports=[new tK(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;A4.setFromMatrixPosition(e.matrixWorld),t.position.copy(A4),E4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(E4),t.updateMatrixWorld(),_4.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_4),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(_4)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class M4 extends C4{constructor(){super(new RQ(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*wY*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class T4 extends w4{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dZ.DEFAULT_UP),this.updateMatrix(),this.target=new dZ,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new M4}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const k4=new zK,P4=new uK,R4=new uK;class D4 extends C4{constructor(){super(new RQ(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new RY(4,2),this._viewportCount=6,this._viewports=[new tK(2,1,1,1),new tK(0,1,1,1),new tK(3,1,1,1),new tK(1,1,1,1),new tK(3,0,1,1),new tK(1,0,1,1)],this._cubeDirections=[new uK(1,0,0),new uK(-1,0,0),new uK(0,0,1),new uK(0,0,-1),new uK(0,1,0),new uK(0,-1,0)],this._cubeUps=[new uK(0,1,0),new uK(0,1,0),new uK(0,1,0),new uK(0,1,0),new uK(0,0,1),new uK(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),P4.setFromMatrixPosition(e.matrixWorld),n.position.copy(P4),R4.copy(n.position),R4.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(R4),n.updateMatrixWorld(),r.makeTranslation(-P4.x,-P4.y,-P4.z),k4.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(k4)}}class I4 extends w4{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new D4}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class B4 extends C4{constructor(){super(new n$(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class j4 extends w4{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dZ.DEFAULT_UP),this.updateMatrix(),this.target=new dZ,this.shadow=new B4}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class F4 extends w4{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class L4 extends w4{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class O4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new uK)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class N4 extends w4{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O4;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class z4 extends d4{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,a=new f4(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(Zie){r?r(Zie):console.error(Zie),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=z4.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new TZ).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new TZ).setHex(t.value);break;case"v2":r.uniforms[i].value=(new RY).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new uK).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new tK).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new DY).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new zK).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new RY).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new RY).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:D5,SpriteMaterial:I1,RawShaderMaterial:I5,ShaderMaterial:kQ,PointsMaterial:K2,MeshPhysicalMaterial:j5,MeshStandardMaterial:B5,MeshPhongMaterial:F5,MeshToonMaterial:L5,MeshNormalMaterial:O5,MeshLambertMaterial:N5,MeshDepthMaterial:h1,MeshDistanceMaterial:p1,MeshBasicMaterial:DZ,MeshMatcapMaterial:z5,LineDashedMaterial:U5,LineBasicMaterial:N2,Material:RZ}[e]}}class U4{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(Zie){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class H4 extends iQ{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class G4 extends d4{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new f4(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(Zie){r?r(Zie):console.error(Zie),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,i.buffer),s=FY(i.type,a),o=new P1(s,i.stride);return o.uuid=i.uuid,t[r]=o,o}const i=e.isInstancedBufferGeometry?new H4:new iQ,a=e.data.index;if(void 0!==a){const e=FY(a.type,a.array);i.setIndex(new zZ(e,1))}const s=e.data.attributes;for(const u in s){const t=s[u];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new D1(i,t.itemSize,t.offset,t.normalized)}else{const e=FY(t.type,t.array);n=new(t.isInstancedBufferAttribute?p2:zZ)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),i.setAttribute(u,n)}const o=e.data.morphAttributes;if(o)for(const u in o){const t=o[u],n=[];for(let i=0,a=t.length;i<a;i++){const a=t[i];let s;if(a.isInterleavedBufferAttribute){const t=r(e.data,a.data);s=new D1(t,a.itemSize,a.offset,a.normalized)}else{const e=FY(a.type,a.array);s=new zZ(e,a.itemSize,a.normalized)}void 0!==a.name&&(s.name=a.name),n.push(s)}i.morphAttributes[u]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,d=l.length;u!==d;++u){const e=l[u];i.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new uK;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new RK(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class V4 extends d4{constructor(e){super(e)}load(e,t,n,r){const i=this,a=""===this.path?U4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new f4(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){let a=null;try{a=JSON.parse(n)}catch(o){return void 0!==r&&r(o),void console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message)}const s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(a,t)}),n,r)}async loadAsync(e,t){const n=""===this.path?U4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new f4(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),a=JSON.parse(i),s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,r,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new G3).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let i=0,a=e.length;i<a;i++){const t=(new h2).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new G4;for(let i=0,a=e.length;i<a;i++){let a;const s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;default:s.type in R5?a=R5[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new z4;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=s4.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function a(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:FY(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new c4(t);i=new v4(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=a(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new c2(n.data,n.width,n.height)))}r[n.uuid]=new ZY(e)}else{const e=a(n.url);r[n.uuid]=new ZY(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"===typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:FY(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new v4(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new c2(r.data,r.width,r.height)))}n[r.uuid]=new ZY(e)}else{const e=await i(r.url);n[r.uuid]=new ZY(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){const a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=t[a.image],o=s.data;let l;Array.isArray(o)?(l=new BQ,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new c2:new eK,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,W4)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],q4),l.wrapT=n(a.wrap[1],q4)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,X4)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,X4)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,n,r,i){let a,s,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new k1,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new TZ(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new T1(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new M1(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new RQ(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new n$(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new F4(e.color,e.intensity);break;case"DirectionalLight":a=new j4(e.color,e.intensity);break;case"PointLight":a=new I4(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new L4(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new T4(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new S4(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new N4).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),o=c(e.material),a=new o2(s,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),o=c(e.material),a=new SQ(s,o);break;case"InstancedMesh":s=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;a=new w2(s,o,t),a.instanceMatrix=new p2(new Float32Array(n.array),16),void 0!==r&&(a.instanceColor=new p2(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":s=l(e.geometry),o=c(e.material),a=new O2(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,o),a.geometry=s,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map((e=>{const t=new pK;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const n=new RK;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}})),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":a=new Z1;break;case"Line":a=new W2(l(e.geometry),c(e.material));break;case"LineLoop":a=new Y2(l(e.geometry),c(e.material));break;case"LineSegments":a=new J2(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new t3(l(e.geometry),c(e.material));break;case"Sprite":a=new X1(c(e.material));break;case"Group":a=new x1;break;case"Bone":a=new l2;break;default:a=new dZ}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const W4={UVMapping:Nq,CubeReflectionMapping:zq,CubeRefractionMapping:Uq,EquirectangularReflectionMapping:Hq,EquirectangularRefractionMapping:Gq,CubeUVReflectionMapping:Vq},q4={RepeatWrapping:Wq,ClampToEdgeWrapping:qq,MirroredRepeatWrapping:Xq},X4={NearestFilter:Jq,NearestMipmapNearestFilter:Yq,NearestMipmapLinearFilter:Zq,LinearFilter:$q,LinearMipmapNearestFilter:eX,LinearMipmapLinearFilter:nX};class J4 extends d4{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=l4.get(e);if(void 0!==a)return i.manager.itemStart(e),a.then?void a.then((n=>{t&&t(n),i.manager.itemEnd(e)})).catch((e=>{r&&r(e)})):(setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a);const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader;const o=fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){return l4.add(e,n),t&&t(n),i.manager.itemEnd(e),n})).catch((function(t){r&&r(t),l4.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)}));l4.add(e,o),i.manager.itemStart(e)}}let Y4;class K4{static getContext(){return void 0===Y4&&(Y4=new(window.AudioContext||window.webkitAudioContext)),Y4}static setContext(e){Y4=e}}class Z4 extends d4{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new f4(this.manager);function s(t){r?r(t):console.error(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){try{const n=e.slice(0);K4.getContext().decodeAudioData(n,(function(e){t(e)})).catch(s)}catch(Zie){s(Zie)}}),n,r)}}const Q4=new zK,$4=new zK,e6=new zK;class t6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new RQ,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new RQ,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,e6.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(bY*t.fov*.5)/t.zoom;let a,s;$4.elements[12]=-n,Q4.elements[12]=n,a=-i*t.aspect+r,s=i*t.aspect+r,e6.elements[0]=2*t.near/(s-a),e6.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(e6),a=-i*t.aspect-r,s=i*t.aspect-r,e6.elements[0]=2*t.near/(s-a),e6.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(e6)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply($4),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Q4)}}class n6{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=r6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=r6();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function r6(){return("undefined"===typeof performance?Date:performance).now()}const i6=new uK,a6=new cK,s6=new uK,o6=new uK;class l6 extends dZ{constructor(){super(),this.type="AudioListener",this.context=K4.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new n6}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(i6,a6,s6),o6.set(0,0,-1).applyQuaternion(a6),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(i6.x,e),t.positionY.linearRampToValueAtTime(i6.y,e),t.positionZ.linearRampToValueAtTime(i6.z,e),t.forwardX.linearRampToValueAtTime(o6.x,e),t.forwardY.linearRampToValueAtTime(o6.y,e),t.forwardZ.linearRampToValueAtTime(o6.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(i6.x,i6.y,i6.z),t.setOrientation(o6.x,o6.y,o6.z,n.x,n.y,n.z)}}class c6 extends dZ{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const u6=new uK,d6=new cK,h6=new uK,p6=new uK;class f6 extends c6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(u6,d6,h6),p6.set(0,0,1).applyQuaternion(d6);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(u6.x,e),t.positionY.linearRampToValueAtTime(u6.y,e),t.positionZ.linearRampToValueAtTime(u6.z,e),t.orientationX.linearRampToValueAtTime(p6.x,e),t.orientationY.linearRampToValueAtTime(p6.y,e),t.orientationZ.linearRampToValueAtTime(p6.z,e)}else t.setPosition(u6.x,u6.y,u6.z),t.setOrientation(p6.x,p6.y,p6.z)}}class m6{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class g6{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){s.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let a=0;a!==i;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){cK.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;cK.multiplyQuaternionsFlat(e,a,e,t,e,n),cK.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]*a+e[n+s]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const v6="\\[\\]\\.:\\/",y6=new RegExp("["+v6+"]","g"),x6="[^"+v6+"]",b6="[^"+v6.replace("\\.","")+"]",w6=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",x6)+/(WCOD+)?/.source.replace("WCOD",b6)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",x6)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",x6)+"$"),S6=["material","materials","bones","map"];class _6{constructor(e,t,n){this.path=t,this.parsedPath=n||_6.parseTrackName(t),this.node=_6.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new _6.Composite(e,t,n):new _6(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(y6,"")}static parseTrackName(e){const t=w6.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==S6.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=_6.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_6.Composite=class{constructor(e,t,n){const r=n||_6.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},_6.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},_6.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},_6.prototype.GetterByBindingType=[_6.prototype._getValue_direct,_6.prototype._getValue_array,_6.prototype._getValue_arrayElement,_6.prototype._getValue_toArray],_6.prototype.SetterByBindingTypeAndVersioning=[[_6.prototype._setValue_direct,_6.prototype._setValue_direct_setNeedsUpdate,_6.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_6.prototype._setValue_array,_6.prototype._setValue_array_setNeedsUpdate,_6.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_6.prototype._setValue_arrayElement,_6.prototype._setValue_arrayElement_setNeedsUpdate,_6.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_6.prototype._setValue_fromArray,_6.prototype._setValue_fromArray_setNeedsUpdate,_6.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class A6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=SY(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length;let s,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=o++,t[d]=h,e.push(u);for(let e=0,t=a;e!==t;++e)i[e].push(new _6(u,n[e],r[e]))}else if(h<l){s=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[d]=o,e[o]=u;for(let e=0,t=a;e!==t;++e){const t=i[e],a=t[o];let s=t[h];t[h]=a,void 0===s&&(s=new _6(u,n[e],r[e])),t[o]=s}}else e[h]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=i){const a=i++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<i){const s=--i,o=e[s],c=--a,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[c];t[l]=r,t[s]=i,t.pop()}}else{const i=--a,s=e[i];i>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,a.push(e),s.push(t),i.push(u);for(let d=c,h=o.length;d!==h;++d){const n=o[d];u[d]=new _6(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=n,a[n]=o,a.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}}class E6{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,s=new Array(a),o={endingStart:uJ,endingEnd:uJ};for(let l=0;l!==a;++l){const e=i[l].createInterpolant(null);s[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=aJ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=i,o[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===fJ)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=n===sJ;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===iJ){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=dJ,r.endingEnd=dJ):(r.endingStart=e?this.zeroSlopeAtStart?dJ:uJ:hJ,r.endingEnd=t?this.zeroSlopeAtEnd?dJ:uJ:hJ)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=i,o[0]=t,s[1]=i+e,o[1]=n,this}}const C6=new Float32Array(1);class M6 extends vY{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==i;++u){const e=r[u],i=e.name;let l=c[i];if(void 0!==l)++l.referenceCount,a[u]=l;else{if(l=a[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,i));continue}const r=t&&t._propertyBindings[u].binding.parsedPath;l=new g6(_6.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,i),a[u]=l}s[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,s=a[i],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[i],0===Object.keys(s).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new K5(new Float32Array(2),new Float32Array(2),1,C6),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"===typeof e?s4.findByName(r,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:pJ),void 0!==o){const e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new E6(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?s4.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,a)}const s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class T6{constructor(e){this.value=e}clone(){return new T6(void 0===this.value.clone?this.value:this.value.clone())}}let k6=0;class P6 extends vY{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:k6++}),this.name="",this.usage=rY,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class R6 extends P1{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class D6{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class I6{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new NK(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new ZK,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return j6(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(B6),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=e.length;r<i;r++)j6(e[r],this,n,t);return n.sort(B6),n}}function B6(e,t){return e.distance-t.distance}function j6(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)j6(r[e],t,n,!0)}}class F6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(_Y(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class L6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const O6=new RY;class N6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new RY(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RY(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=O6.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,O6).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const z6=new uK,U6=new uK;class H6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){z6.subVectors(e,this.start),U6.subVectors(this.end,this.start);const n=U6.dot(U6);let r=U6.dot(z6)/n;return t&&(r=_Y(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const G6=new uK;class V6 extends dZ{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new iQ,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){const e=a/o*Math.PI*2,t=s/o*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new YZ(r,3));const i=new N2({fog:!1,toneMapped:!1});this.cone=new J2(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),G6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(G6),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const W6=new uK,q6=new zK,X6=new zK;class J6 extends J2{constructor(e){const t=Y6(e),n=new iQ,r=[],i=[],a=new TZ(0,0,1),s=new TZ(0,1,0);for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new YZ(r,3)),n.setAttribute("color",new YZ(i,3));super(n,new N2({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");X6.copy(this.root.matrixWorld).invert();for(let i=0,a=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(q6.multiplyMatrices(X6,e.matrixWorld),W6.setFromMatrixPosition(q6),r.setXYZ(a,W6.x,W6.y,W6.z),q6.multiplyMatrices(X6,e.parent.matrixWorld),W6.setFromMatrixPosition(q6),r.setXYZ(a+1,W6.x,W6.y,W6.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Y6(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Y6(e.children[n]));return t}class K6 extends SQ{constructor(e,t,n){super(new A5(t,4,2),new DZ({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Z6=new uK,Q6=new TZ,$6=new TZ;class e8 extends dZ{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new w5(t);r.rotateY(.5*Math.PI),this.material=new DZ({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new zZ(a,3)),this.add(new SQ(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Q6.copy(this.light.color),$6.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Q6:$6;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Z6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class t8 extends J2{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new TZ(n),r=new TZ(r);const i=t/2,a=e/t,s=e/2,o=[],l=[];for(let u=0,d=0,h=-s;u<=t;u++,h+=a){o.push(-s,0,h,s,0,h),o.push(h,0,-s,h,0,s);const e=u===i?n:r;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const c=new iQ;c.setAttribute("position",new YZ(o,3)),c.setAttribute("color",new YZ(l,3));super(c,new N2({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class n8 extends J2{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;i=new TZ(i),a=new TZ(a);const s=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;s.push(0,0,0),s.push(r,0,l);const u=1&c?i:a;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?i:a,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l;s.push(i,0,a),o.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l,s.push(i,0,a),o.push(t.r,t.g,t.b)}}const l=new iQ;l.setAttribute("position",new YZ(s,3)),l.setAttribute("color",new YZ(o,3));super(l,new N2({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const r8=new uK,i8=new uK,a8=new uK;class s8 extends dZ{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new iQ;r.setAttribute("position",new YZ([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new N2({fog:!1,toneMapped:!1});this.lightPlane=new W2(r,i),this.add(this.lightPlane),r=new iQ,r.setAttribute("position",new YZ([0,0,0,0,0,1],3)),this.targetLine=new W2(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),r8.setFromMatrixPosition(this.light.matrixWorld),i8.setFromMatrixPosition(this.light.target.matrixWorld),a8.subVectors(i8,r8),this.lightPlane.lookAt(i8),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(i8),this.targetLine.scale.z=a8.length()}}const o8=new uK,l8=new PQ;class c8 extends J2{constructor(e){const t=new iQ,n=new N2({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function s(e,t){o(e),o(t)}function o(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new YZ(r,3)),t.setAttribute("color",new YZ(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new TZ(16755200),c=new TZ(16711680),u=new TZ(43775),d=new TZ(16777215),h=new TZ(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,r,i){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;l8.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),u8("c",t,e,l8,0,0,-1),u8("t",t,e,l8,0,0,1),u8("n1",t,e,l8,-1,-1,-1),u8("n2",t,e,l8,1,-1,-1),u8("n3",t,e,l8,-1,1,-1),u8("n4",t,e,l8,1,1,-1),u8("f1",t,e,l8,-1,-1,1),u8("f2",t,e,l8,1,-1,1),u8("f3",t,e,l8,-1,1,1),u8("f4",t,e,l8,1,1,1),u8("u1",t,e,l8,.7,1.1,-1),u8("u2",t,e,l8,-.7,1.1,-1),u8("u3",t,e,l8,0,2,-1),u8("cf1",t,e,l8,-1,0,1),u8("cf2",t,e,l8,1,0,1),u8("cf3",t,e,l8,0,-1,1),u8("cf4",t,e,l8,0,1,1),u8("cn1",t,e,l8,-1,0,-1),u8("cn2",t,e,l8,1,0,-1),u8("cn3",t,e,l8,0,-1,-1),u8("cn4",t,e,l8,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function u8(e,t,n,r,i,a,s){o8.set(i,a,s).unproject(r);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],o8.x,o8.y,o8.z)}}const d8=new pK;class h8 extends J2{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new iQ;i.setIndex(new zZ(n,1)),i.setAttribute("position",new zZ(r,3)),super(i,new N2({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&d8.setFromObject(this.object),d8.isEmpty())return;const t=d8.min,n=d8.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class p8 extends J2{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new iQ;r.setIndex(new zZ(n,1)),r.setAttribute("position",new YZ([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new N2({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class f8 extends W2{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new iQ;r.setAttribute("position",new YZ([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new N2({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const i=new iQ;i.setAttribute("position",new YZ([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new SQ(i,new DZ({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const m8=new uK;let g8,v8;class y8 extends dZ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uK(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uK(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*i;super(),this.type="ArrowHelper",void 0===g8&&(g8=new iQ,g8.setAttribute("position",new YZ([0,0,0,0,1,0],3)),v8=new B3(0,.5,1,5,1),v8.translate(0,-.5,0)),this.position.copy(t),this.line=new W2(g8,new N2({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new SQ(v8,new DZ({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{m8.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(m8,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class x8 extends J2{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new iQ;n.setAttribute("position",new YZ(t,3)),n.setAttribute("color",new YZ([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new N2({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new TZ,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class b8{constructor(){this.type="ShapePath",this.color=new TZ,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new P3,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],s=t[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],o=-o,s=t[i],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return r}const n=m5.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,a,s;const o=[];if(1===r.length)return a=r[0],s=new G3,s.curves=a.curves,o.push(s),o;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let d,h,p=[],f=0;u[f]=void 0,p[f]=[];for(let m=0,g=r.length;m<g;m++)a=r[m],d=a.getPoints(),i=n(d),i=e?!i:i,i?(!l&&u[f]&&f++,u[f]={s:new G3,p:d},u[f].s.curves=a.curves,l&&f++,p[f]=[]):p[f].push({h:a,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new G3;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let t=0,r=u.length;t<r;t++)c[t]=[];for(let r=0,i=u.length;r<i;r++){const i=p[r];for(let a=0;a<i.length;a++){const s=i[a];let o=!0;for(let i=0;i<u.length;i++)t(s.p,u[i].p)&&(r!==i&&n++,o?(o=!1,c[i].push(s)):e=!0);o&&c[r].push(s)}}n>0&&!1===e&&(p=c)}for(let m=0,g=u.length;m<g;m++){s=u[m].s,o.push(s),h=p[m];for(let e=0,t=h.length;e<t;e++)s.holes.push(h[e].h)}return o}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:DW}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=DW);var w8=__webpack_require__(7205);function S8(e){let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,a={setState:r,getState:i,subscribe:(e,r,a)=>r||a?function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=r(t);function o(){const n=r(t);if(!a(s,n)){const t=s;e(s=n,t)}}return n.add(o),()=>n.delete(o)}(e,r,a):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,a),a}const _8="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;function A8(e){const t="function"===typeof e?S8(e):e,n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,i]=(0,r.useReducer)((e=>e+1),0),a=t.getState(),s=(0,r.useRef)(a),o=(0,r.useRef)(e),l=(0,r.useRef)(n),c=(0,r.useRef)(!1),u=(0,r.useRef)();let d;void 0===u.current&&(u.current=e(a));let h=!1;(s.current!==a||o.current!==e||l.current!==n||c.current)&&(d=e(a),h=!n(u.current,d)),_8((()=>{h&&(u.current=d),s.current=a,o.current=e,l.current=n,c.current=!1}));const p=(0,r.useRef)(a);_8((()=>{const e=()=>{try{const e=t.getState(),n=o.current(e);l.current(u.current,n)||(s.current=e,u.current=n,i())}catch(e){c.current=!0,i()}},n=t.subscribe(e);return t.getState()!==p.current&&e(),n}),[]);const f=h?d:u.current;return(0,r.useDebugValue)(f),f};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}const E8=[];function C8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function M8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const s of E8)if(C8(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:t,equal:r.equal,remove:()=>{const e=E8.indexOf(i);-1!==e&&E8.splice(e,1)},promise:(a=e,"object"===typeof a&&"function"===typeof a.then?e:e(...t)).then((e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))})).catch((e=>i.error=e))};var a;if(E8.push(i),!n)throw i.promise}const T8=(e,t,n)=>M8(e,t,!1,n);var k8=__webpack_require__(2016),P8=__webpack_require__.n(k8),R8=__webpack_require__(8784);const D8=["args","attach"],I8=["args","children"],B8=["args","children"],j8=["children","key","ref"],F8=["children","key","ref"],L8=["params"],O8=["events","size"];const N8={},z8=e=>{Object.assign(N8,e)};var U8,H8;const G8=e=>"colorSpace"in e||"outputColorSpace"in e,V8=()=>{var e;return null!=(e=N8.ColorManagement)?e:null},W8=e=>e&&e.isOrthographicCamera,q8="undefined"!==typeof window&&(null!=(U8=window.document)&&U8.createElement||"ReactNative"===(null==(H8=window.navigator)?void 0:H8.product))?r.useLayoutEffect:r.useEffect;function X8(e){const t=r.useRef(e);return q8((()=>{t.current=e}),[e]),t}function J8(e){let{set:t}=e;return q8((()=>(t(new Promise((()=>null))),()=>t(!1))),[t]),null}class Y8 extends r.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Y8.getDerivedStateFromError=()=>({error:!0});const K8="__default",Z8=new Map,Q8=e=>e&&!!e.memoized&&!!e.changes;function $8(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const e9=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function t9(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const n9={obj:e=>e===Object(e)&&!n9.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:r="reference",strict:i=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(n9.str(e)||n9.num(e)||n9.boo(e))return e===t;const a=n9.obj(e);if(a&&"reference"===r)return e===t;const s=n9.arr(e);if(s&&"reference"===n)return e===t;if((s||a)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(a&&"shallow"===n&&"shallow"===r){for(o in i?t:e)if(!n9.equ(e[o],t[o],{strict:i,objects:"reference"}))return!1}else for(o in i?t:e)if(e[o]!==t[o])return!1;if(n9.und(o)){if(s&&0===e.length&&0===t.length)return!0;if(a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function r9(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function i9(e,t){return e.__r3f=(0,c.A)({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t),e}function a9(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce(((e,t)=>e[t]),e),{target:n,key:i}}return{target:n,key:t}}const s9=/-\d+$/;function o9(e,t,n){if(n9.str(n)){if(s9.test(n)){const t=n.replace(s9,""),{target:r,key:i}=a9(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=a9(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function l9(e,t,n){var r,i;if(n9.str(n)){const{target:r,key:i}=a9(e,n),a=t.__r3f.previousAttach;void 0===a?delete r[i]:r[i]=a}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function c9(e,t){let{children:n,key:r,ref:i}=t,a=y(t,j8),s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{children:o,key:l,ref:u}=s,d=y(s,F8),h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const p=e.__r3f,f=Object.entries(a),m=[];if(h){const e=Object.keys(d);for(let t=0;t<e.length;t++)a.hasOwnProperty(e[t])||f.unshift([e[t],K8+"remove"])}f.forEach((t=>{let[n,r]=t;var i;if(null!=(i=e.__r3f)&&i.primitive&&"object"===n)return;if(n9.equ(r,d[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return m.push([n,r,!0,[]]);let s=[];n.includes("-")&&(s=n.split("-")),m.push([n,r,!1,s]);for(const e in a){const t=a[e];e.startsWith("".concat(n,"-"))&&m.push([e,t,!1,e.split("-")])}}));const g=(0,c.A)({},a);return null!=p&&p.memoizedProps&&null!=p&&p.memoizedProps.args&&(g.args=p.memoizedProps.args),null!=p&&p.memoizedProps&&null!=p&&p.memoizedProps.attach&&(g.attach=p.memoizedProps.attach),{memoized:g,changes:m}}const u9="undefined"!==typeof process&&!1;function d9(e,t){var n;const r=e.__r3f,i=null==r?void 0:r.root,a=null==i||null==i.getState?void 0:i.getState(),{memoized:s,changes:o}=Q8(t)?t:c9(e,t),l=null==r?void 0:r.eventCount;e.__r3f&&(e.__r3f.memoizedProps=s);for(let d=0;d<o.length;d++){let[t,n,i,s]=o[d];if(G8(e)){const e=3001,r="srgb",i="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?r:i):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?r:i)}let l=e,h=l[t];if(s.length&&(h=s.reduce(((e,t)=>e[t]),e),!h||!h.set)){const[n,...r]=s.reverse();l=r.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===K8+"remove")if(l.constructor){let e=Z8.get(l.constructor);e||(e=new l.constructor,Z8.set(l.constructor,e)),n=e[t]}else n=0;if(i&&r)n?r.handlers[t]=n:delete r.handlers[t],r.eventCount=Object.keys(r.handlers).length;else if(h&&h.set&&(h.copy||h instanceof ZK)){if(Array.isArray(n))h.fromArray?h.fromArray(n):h.set(...n);else if(h.copy&&n&&n.constructor&&(u9?h.constructor.name===n.constructor.name:h.constructor===n.constructor))h.copy(n);else if(void 0!==n){var c;const e=null==(c=h)?void 0:c.isColor;!e&&h.setScalar?h.setScalar(n):h instanceof ZK&&n instanceof ZK?h.mask=n.mask:h.set(n),!V8()&&a&&!a.linear&&e&&h.convertSRGBToLinear()}}else{var u;if(l[t]=n,null!=(u=l[t])&&u.isTexture&&l[t].format===gX&&l[t].type===iX&&a){const e=l[t];G8(e)&&G8(a.gl)?e.colorSpace=a.gl.outputColorSpace:e.encoding=a.gl.outputEncoding}}h9(e)}if(r&&r.parent&&e.raycast&&l!==r.eventCount){const t=t9(e).getState().internal,n=t.interaction.indexOf(e);n>-1&&t.interaction.splice(n,1),r.eventCount&&t.interaction.push(e)}return!(1===o.length&&"onUpdate"===o[0][0])&&o.length&&null!=(n=e.__r3f)&&n.parent&&p9(e),e}function h9(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function p9(e){null==e.onUpdate||e.onUpdate(e)}function f9(e,t){e.manual||(W8(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function m9(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function g9(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function v9(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(m9(e)),null!=r&&r.eventCount){const n=(0,c.A)((0,c.A)({},e),{},{intersections:t});null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(a){const{onPointerMissed:s,internal:o}=e.getState();o.lastEvent.current=a;const l="onPointerMove"===i,u="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,d=function(t,n){const r=e.getState(),i=new Set,a=[],s=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<s.length;e++){const t=e9(s[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let o=s.flatMap((function(e){const n=e9(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=e9(e.object),r=e9(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=m9(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(o=r.events.filter(o,r));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push((0,c.A)((0,c.A)({},e),{},{eventObject:t})),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(m9(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),h=u?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(o.initialClick=[a.offsetX,a.offsetY],o.initialHits=d.map((e=>e.eventObject))),u&&!d.length&&h<=2&&(r(a,o.interaction),s&&s(a)),l&&n(d),function(t,r,i,a){const s=e.getState();if(t.length){const e={stopped:!1};for(const o of t){const l=e9(o.object)||s,{raycaster:u,pointer:d,camera:h,internal:p}=l,f=new uK(d.x,d.y,0).unproject(h),m=e=>{var t,n;return null!=(t=null==(n=p.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},g=e=>{const t={intersection:o,target:r.target};p.capturedMap.has(e)?p.capturedMap.get(e).set(o.eventObject,t):p.capturedMap.set(e,new Map([[o.eventObject,t]])),r.target.setPointerCapture(e)},v=e=>{const t=p.capturedMap.get(e);t&&g9(p.capturedMap,o.eventObject,t,e)};let y={};for(let e in r){let t=r[e];"function"!==typeof t&&(y[e]=t)}let x=(0,c.A)((0,c.A)((0,c.A)({},o),y),{},{pointer:d,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:f,ray:u.ray,camera:h,stopPropagation(){const i="pointerId"in r&&p.capturedMap.get(r.pointerId);(!i||i.has(o.eventObject))&&(x.stopped=e.stopped=!0,p.hovered.size&&Array.from(p.hovered.values()).find((e=>e.eventObject===o.eventObject)))&&n([...t.slice(0,t.indexOf(o)),o])},target:{hasPointerCapture:m,setPointerCapture:g,releasePointerCapture:v},currentTarget:{hasPointerCapture:m,setPointerCapture:g,releasePointerCapture:v},nativeEvent:r});if(a(x),!0===e.stopped)break}}}(d,a,h,(function(e){const t=e.eventObject,n=t.__r3f,s=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const t=m9(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{const n=s[i];n?u&&!o.initialHits.includes(t)||(r(a,o.interaction.filter((e=>!o.initialHits.includes(e)))),n(e)):u&&o.initialHits.includes(t)&&r(a,o.interaction.filter((e=>!o.initialHits.includes(e))))}}))}}}}const y9=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],x9=e=>!(null==e||!e.render),b9=r.createContext(null),w9=(e,t)=>{const n=A8(((n,i)=>{const a=new uK,s=new uK,o=new uK;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().size;const{width:r,height:l,top:c,left:u}=n,d=r/l;t.isVector3?o.copy(t):o.set(...t);const h=e.getWorldPosition(a).distanceTo(o);if(W8(e))return{width:r/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:h,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,i=n*(r/l);return{width:i,height:n,top:c,left:u,factor:r/i,distance:h,aspect:d}}}let u;const d=e=>n((t=>({performance:(0,c.A)((0,c.A)({},t.performance),{},{current:e})}))),h=new RY,p={set:n,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(i(),t)},advance:(e,n)=>t(e,n,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new n6,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=i();u&&clearTimeout(u),e.performance.current!==e.performance.min&&d(e.performance.min),u=setTimeout((()=>d(i().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n((t=>(0,c.A)((0,c.A)({},t),{},{events:(0,c.A)((0,c.A)({},t.events),e)}))),setSize:(e,t,r,a,o)=>{const u=i().camera,d={width:e,height:t,top:a||0,left:o||0,updateStyle:r};n((e=>({size:d,viewport:(0,c.A)((0,c.A)({},e.viewport),l(u,s,d))})))},setDpr:e=>n((t=>{const n=$8(e);return{viewport:(0,c.A)((0,c.A)({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}})),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:r.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return p})),i=n.getState();let a=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe((()=>{const{camera:e,size:t,viewport:r,gl:i,set:l}=n.getState();if(t.width!==a.width||t.height!==a.height||r.dpr!==s){var u;a=t,s=r.dpr,f9(e,t),i.setPixelRatio(r.dpr);const n=null!=(u=t.updateStyle)?u:"undefined"!==typeof HTMLCanvasElement&&i.domElement instanceof HTMLCanvasElement;i.setSize(t.width,t.height,n)}e!==o&&(o=e,l((t=>({viewport:(0,c.A)((0,c.A)({},t.viewport),t.viewport.getCurrentViewport(e))}))))})),n.subscribe((t=>e(t))),n};let S9,_9=new Set,A9=new Set,E9=new Set;function C9(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function M9(e,t){switch(e){case"before":return C9(_9,t);case"after":return C9(A9,t);case"tail":return C9(E9,t)}}let T9,k9;function P9(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),T9=t.internal.subscribers,S9=0;S9<T9.length;S9++)k9=T9[S9],k9.ref.current(k9.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function R9(){const e=r.useContext(b9);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function D9(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return R9()(e,t)}function I9(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=R9(),r=n.getState().internal.subscribe,i=X8(e);return q8((()=>r(i,t,n)),[t,r,n]),null}const B9=new WeakMap;function j9(e,t){return function(n){let r=B9.get(n);r||(r=new n,B9.set(n,r)),e&&e(r);for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return Promise.all(a.map((e=>new Promise(((n,i)=>r.load(e,(e=>{e.scene&&Object.assign(e,r9(e.scene)),n(e)}),t,(t=>i(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message))))))))))}}function F9(e,t,n,r){const i=Array.isArray(t)?t:[t],a=T8(j9(n,r),[e,...i],{equal:n9.equ});return Array.isArray(t)?a:a[0]}F9.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t,n)=>{M8(e,t,!0,n)})(j9(n),[e,...r])},F9.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)E8.splice(0,E8.length);else{const t=E8.find((t=>C8(e,t.keys,t.equal)));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const L9=new Map,{invalidate:O9,advance:N9}=function(e){let t,n,r,i=!1,a=!1;function s(o){n=requestAnimationFrame(s),i=!0,t=0,M9("before",o),a=!0;for(const n of e.values()){var l;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(l=r.gl.xr)&&l.isPresenting||(t+=P9(o,r))}if(a=!1,M9("after",o),0===t)return M9("tail",o),i=!1,cancelAnimationFrame(n)}return{loop:s,invalidate:function t(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var o;if(!n)return e.forEach((e=>t(e.store.getState(),r)));null!=(o=n.gl.xr)&&o.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=r>1?Math.min(60,n.internal.frames+r):a?2:1,i||(i=!0,requestAnimationFrame(s)))},advance:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n&&M9("before",t),r)P9(t,r,i);else for(const a of e.values())P9(t,a.store.getState());n&&M9("after",t)}}}(L9),{reconciler:z9,applyProps:U9}=function(e,t){function n(e,t,n){let r,{args:i=[],attach:a}=t,s=y(t,D8),o="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===s.object)throw new Error("R3F: Primitives without 'object' are invalid!");r=i9(s.object,{type:e,root:n,attach:a,primitive:!0})}else{const t=N8[o];if(!t)throw new Error("R3F: ".concat(o," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");r=i9(new t(...i),{type:e,root:n,attach:a,memoizedProps:{args:i}})}return void 0===r.__r3f.attach&&(r.isBufferGeometry?r.__r3f.attach="geometry":r.isMaterial&&(r.__r3f.attach="material")),"inject"!==o&&d9(r,s),r}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?o9(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||i9(t,{}),t.__r3f.parent=e,p9(t),h9(t))}function i(e,t,n){let r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)o9(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});const i=e.children.filter((e=>e!==t)),a=i.indexOf(n);e.children=[...i.slice(0,a),t,...i.slice(a)],r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||i9(t,{}),t.__r3f.parent=e,p9(t),h9(t)}}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach((e=>s(t,e,n)))}function s(e,t,n){if(t){var r,i,s;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(i=t.__r3f)&&i.attach)l9(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{g9(n.capturedMap,t,e,r)}))}(t9(t),t)}const c=null==(s=t.__r3f)?void 0:s.primitive,u=!c&&(void 0===n?null!==t.dispose:n);var l;if(!c)a(null==(l=t.__r3f)?void 0:l.objects,t,u),a(t.children,t,u);if(delete t.__r3f,u&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(Zie){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,R8.unstable_scheduleCallback)(R8.unstable_IdlePriority,e):e()}h9(e)}}const o=()=>{},l=P8()({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&s(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i}=r,a=y(r,I8),{args:s=[],children:o}=n,l=y(n,B8);if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==s[t])))return[!0];const c=c9(e,a,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,t,i,a,o,l){let[c,u]=t;c?function(e,t,i,a){var o;const l=null==(o=e.__r3f)?void 0:o.parent;if(!l)return;const c=n(t,i,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&r(c,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>r(c,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||s(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),r(l,c),c.raycast&&c.__r3f.eventCount&&t9(c).getState().internal.interaction.push(c);[a,a.alternate].forEach((e=>{null!==e&&(e.stateNode=c,e.ref&&("function"===typeof e.ref?e.ref(c):e.ref.current=c))}))}(e,i,o,l):d9(e,u)},commitMount(e,t,n,r){var i;const a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&t9(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>i9(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&l9(r,e,n),e.isObject3D&&(e.visible=!1),h9(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&o9(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),h9(e)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>t?t():w8.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&n9.fun(performance.now)?performance.now:n9.fun(Date.now)?Date.now:()=>0,scheduleTimeout:n9.fun(setTimeout)?setTimeout:void 0,cancelTimeout:n9.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:d9}}(0,(function(){var e;const t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return w8.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return w8.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return w8.ContinuousEventPriority;default:return w8.DefaultEventPriority}})),H9={objects:"shallow",strict:!1},G9=(e,t)=>{const n="function"===typeof e?e(t):e;return x9(n)?n:new E1((0,c.A)({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function V9(e){const t=L9.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i="function"===typeof reportError?reportError:console.error,a=r||w9(O9,N9),s=n||z9.createContainer(a,w8.ConcurrentRoot,null,!1,null,"",i,null);let o;t||L9.set(e,{fiber:s,store:a});let l,u=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:r,scene:i,events:s,onCreated:d,shadows:h=!1,linear:p=!1,flat:f=!1,legacy:m=!1,orthographic:g=!1,frameloop:v="always",dpr:x=[1,2],performance:b,raycaster:w,camera:S,onPointerMissed:_}=t,A=a.getState(),E=A.gl;A.gl||A.set({gl:E=G9(n,e)});let C=A.raycaster;C||A.set({raycaster:C=new I6});const M=w||{},{params:T}=M,k=y(M,L8);if(n9.equ(k,C,H9)||U9(C,(0,c.A)({},k)),n9.equ(T,C.params,H9)||U9(C,{params:(0,c.A)((0,c.A)({},C.params),T)}),!A.camera||A.camera===l&&!n9.equ(l,S,H9)){l=S;const e=S instanceof PQ,t=e?S:g?new n$(0,0,0,0,.1,1e3):new RQ(75,0,.1,1e3);e||(t.position.z=5,S&&(U9(t,S),("aspect"in S||"left"in S||"right"in S||"bottom"in S||"top"in S)&&(t.manual=!0,t.updateProjectionMatrix())),A.camera||null!=S&&S.rotation||t.lookAt(0,0,0)),A.set({camera:t}),C.camera=t}if(!A.scene){let e;null!=i&&i.isScene?e=i:(e=new k1,i&&U9(e,i)),A.set({scene:i9(e)})}if(!A.xr){var P;const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&N9(e,!0,n,t)},t=()=>{const t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||O9(t)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(P=E.xr)?void 0:P.addEventListener)&&n.connect(),A.set({xr:n})}if(E.shadowMap){const e=E.shadowMap.enabled,t=E.shadowMap.type;if(E.shadowMap.enabled=!!h,n9.boo(h))E.shadowMap.type=UW;else if(n9.str(h)){var R;const e={basic:NW,percentage:zW,soft:UW,variance:HW};E.shadowMap.type=null!=(R=e[h])?R:UW}else n9.obj(h)&&Object.assign(E.shadowMap,h);e===E.shadowMap.enabled&&t===E.shadowMap.type||(E.shadowMap.needsUpdate=!0)}const D=V8();if(D&&("enabled"in D?D.enabled=!m:"legacyMode"in D&&(D.legacyMode=m)),!u){U9(E,{outputEncoding:p?3e3:3001,toneMapping:f?Pq:Bq})}A.legacy!==m&&A.set((()=>({legacy:m}))),A.linear!==p&&A.set((()=>({linear:p}))),A.flat!==f&&A.set((()=>({flat:f}))),!n||n9.fun(n)||x9(n)||n9.equ(n,E,H9)||U9(E,n),s&&!A.events.handlers&&A.set({events:s(a)});const I=function(e,t){const n="undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:r,top:i,left:a,updateStyle:s=n}=t;return{width:e,height:r,top:i,left:a,updateStyle:s}}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:r,top:i,left:a}=e.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:a,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,r);return n9.equ(I,A.size,H9)||A.setSize(I.width,I.height,I.updateStyle,I.top,I.left),x&&A.viewport.dpr!==$8(x)&&A.setDpr(x),A.frameloop!==v&&A.setFrameloop(v),A.onPointerMissed||A.set({onPointerMissed:_}),b&&!n9.equ(b,A.performance,H9)&&A.set((e=>({performance:(0,c.A)((0,c.A)({},e.performance),b)}))),o=d,u=!0,this},render(t){return u||this.configure(),z9.updateContainer((0,ur.jsx)(W9,{store:a,children:t,onCreated:o,rootElement:e}),s,null,(()=>{})),a},unmount(){q9(e)}}}function W9(e){let{store:t,children:n,onCreated:r,rootElement:i}=e;return q8((()=>{const e=t.getState();e.set((e=>({internal:(0,c.A)((0,c.A)({},e.internal),{},{active:!0})}))),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(i)}),[]),(0,ur.jsx)(b9.Provider,{value:t,children:n})}function q9(e,t){const n=L9.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),z9.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,a,s;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(s=i.gl)&&s.xr&&i.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(i),L9.delete(e),t&&t(e)}catch(Zie){}}),500)}))}}function X9(e){let{state:t={},children:n,container:i}=e;const{events:a,size:s}=t,o=y(t,O8),l=R9(),[u]=r.useState((()=>new I6)),[d]=r.useState((()=>new RY)),h=r.useCallback(((e,t)=>{const n=(0,c.A)({},e);let r;if(Object.keys(e).forEach((r=>{(y9.includes(r)||e[r]!==t[r]&&t[r])&&delete n[r]})),t&&s){const n=t.camera;r=e.viewport.getCurrentViewport(n,new uK,s),n!==e.camera&&f9(n,s)}return(0,c.A)((0,c.A)({},n),{},{scene:i,raycaster:u,pointer:d,mouse:d,previousRoot:l,events:(0,c.A)((0,c.A)((0,c.A)({},e.events),null==t?void 0:t.events),a),size:(0,c.A)((0,c.A)({},e.size),s),viewport:(0,c.A)((0,c.A)({},e.viewport),r)},o)}),[t]),[p]=r.useState((()=>{const e=l.getState(),t=A8(((t,n)=>(0,c.A)((0,c.A)((0,c.A)({},e),{},{scene:i,raycaster:u,pointer:d,mouse:d,previousRoot:l,events:(0,c.A)((0,c.A)({},e.events),a),size:(0,c.A)((0,c.A)({},e.size),s)},o),{},{set:t,get:n,setEvents:e=>t((t=>(0,c.A)((0,c.A)({},t),{},{events:(0,c.A)((0,c.A)({},t.events),e)})))})));return t}));return r.useEffect((()=>{const e=l.subscribe((e=>p.setState((t=>h(e,t)))));return()=>{e()}}),[h]),r.useEffect((()=>{p.setState((e=>h(l.getState(),e)))}),[h]),r.useEffect((()=>()=>{p.destroy()}),[]),(0,ur.jsx)(ur.Fragment,{children:z9.createPortal((0,ur.jsx)(b9.Provider,{value:p,children:n}),p,null)})}z9.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:r.version});r.unstable_act;const J9={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Y9(e){const{handlePointer:t}=v9(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(J9).reduce(((e,n)=>(0,c.A)((0,c.A)({},e),{},{[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r((e=>({events:(0,c.A)((0,c.A)({},e.events),{},{connected:t})}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((e=>{let[n,r]=e;const[i,a]=J9[n];t.addEventListener(i,r,{passive:a})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((e=>{let[t,r]=e;if(n&&n.connected instanceof HTMLElement){const[e]=J9[t];n.connected.removeEventListener(e,r)}})),t((e=>({events:(0,c.A)((0,c.A)({},e.events),{},{connected:void 0})}))))}}}function K9(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];window.clearTimeout(n),n=window.setTimeout((()=>e(...i)),t)}}function Z9(){let{debounce:e,scroll:t,polyfill:n,offsetSize:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const a=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=(0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,d=(0,r.useRef)(!1);(0,r.useEffect)((()=>(d.current=!0,()=>{d.current=!1})));const[h,p,f]=(0,r.useMemo)((()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:r,bottom:a,right:s,x:c,y:u}=l.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:r,bottom:a,right:s,x:c,y:u};l.current.element instanceof HTMLElement&&i&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),d.current&&!e7(l.current.lastBounds,h)&&o(l.current.lastBounds=h)};return[e,u?K9(e,u):e,c?K9(e,c):e]}),[o,i,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",f,!0))),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new a(f),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach((e=>e.addEventListener("scroll",f,{capture:!0,passive:!0}))),l.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,t){(0,r.useEffect)((()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[e,t])}(f,!!t),function(e){(0,r.useEffect)((()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])}(p),(0,r.useEffect)((()=>{m(),g()}),[t,f,p]),(0,r.useEffect)((()=>m),[]),[e=>{!e||e===l.current.element||(m(),l.current.element=e,l.current.scrollContainers=Q9(e),g())},s,h]}function Q9(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...Q9(e.parentElement)]}const $9=["x","y","top","bottom","left","right","width","height"],e7=(e,t)=>$9.every((n=>e[n]===t[n]));var t7,n7,r7=Object.defineProperty,i7=Object.defineProperties,a7=Object.getOwnPropertyDescriptors,s7=Object.getOwnPropertySymbols,o7=Object.prototype.hasOwnProperty,l7=Object.prototype.propertyIsEnumerable,c7=(e,t,n)=>t in e?r7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u7=(e,t)=>{for(var n in t||(t={}))o7.call(t,n)&&c7(e,n,t[n]);if(s7)for(var n of s7(t))l7.call(t,n)&&c7(e,n,t[n]);return e};"undefined"===typeof window||!(null==(t7=window.document)?void 0:t7.createElement)&&"ReactNative"!==(null==(n7=window.navigator)?void 0:n7.product)?r.useEffect:r.useLayoutEffect;function d7(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=d7(r,t,n);if(e)return e;r=t?null:r.sibling}}function h7(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const p7=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return p7.apply(this,arguments);console.error=p7};const f7=h7(r.createContext(null));class m7 extends r.Component{render(){return r.createElement(f7.Provider,{value:this._reactInternals},this.props.children)}}function g7(){const e=r.useContext(f7);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=r.useId(),n=r.useMemo((()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=d7(n,!1,(e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}}));if(e)return e}}),[e,t]);return n}function v7(){const e=function(){const e=g7(),[t]=r.useState((()=>new Map));t.clear();let n=e;for(;n;){if(n.type&&"object"===typeof n.type){const e=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;e&&e!==f7&&!t.has(e)&&t.set(e,r.useContext(h7(e)))}n=n.return}return t}();return r.useMemo((()=>Array.from(e.keys()).reduce(((t,n)=>i=>{return r.createElement(t,null,r.createElement(n.Provider,(a=u7({},i),s={value:e.get(n)},i7(a,a7(s)))));var a,s}),(e=>r.createElement(m7,u7({},e))))),[e])}const y7=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"],x7=r.forwardRef((function(e,t){let{children:i,fallback:a,resize:s,style:o,gl:l,events:u=Y9,eventSource:d,eventPrefix:h,shadows:p,linear:f,flat:m,legacy:g,orthographic:v,frameloop:x,dpr:b,performance:w,raycaster:S,camera:_,scene:A,onPointerMissed:E,onCreated:C}=e,M=y(e,y7);r.useMemo((()=>z8(n)),[]);const T=v7(),[k,P]=Z9((0,c.A)({scroll:!0,debounce:{scroll:50,resize:0}},s)),R=r.useRef(null),D=r.useRef(null);r.useImperativeHandle(t,(()=>R.current));const I=X8(E),[B,j]=r.useState(!1),[F,L]=r.useState(!1);if(B)throw B;if(F)throw F;const O=r.useRef(null);q8((()=>{const e=R.current;P.width>0&&P.height>0&&e&&(O.current||(O.current=V9(e)),O.current.configure({gl:l,events:u,shadows:p,linear:f,flat:m,legacy:g,orthographic:v,frameloop:x,dpr:b,performance:w,raycaster:S,camera:_,scene:A,size:P,onPointerMissed:function(){return null==I.current?void 0:I.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(d?(t=d)&&t.hasOwnProperty("current")?d.current:d:D.current),h&&e.setEvents({compute:(e,t)=>{const n=e[h+"X"],r=e[h+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==C||C(e)}}),O.current.render((0,ur.jsx)(T,{children:(0,ur.jsx)(Y8,{set:L,children:(0,ur.jsx)(r.Suspense,{fallback:(0,ur.jsx)(J8,{set:j}),children:null!=i?i:null})})})))})),r.useEffect((()=>{const e=R.current;if(e)return()=>q9(e)}),[]);const N=d?"none":"auto";return(0,ur.jsx)("div",(0,c.A)((0,c.A)({ref:D,style:(0,c.A)({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:N},o)},M),{},{children:(0,ur.jsx)("div",{ref:k,style:{width:"100%",height:"100%"},children:(0,ur.jsx)("canvas",{ref:R,style:{display:"block"},children:a})})}))})),b7=r.forwardRef((function(e,t){return(0,ur.jsx)(m7,{children:(0,ur.jsx)(x7,(0,c.A)((0,c.A)({},e),{},{ref:t}))})}));var w7=Object.defineProperty,S7=(e,t,n)=>(((e,t,n)=>{t in e?w7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class _7{constructor(){S7(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}var A7=Object.defineProperty,E7=(e,t,n)=>(((e,t,n)=>{t in e?A7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const C7=new NK,M7=new NQ,T7=Math.cos(Math.PI/180*70),k7=(e,t)=>(e%t+t)%t;class P7 extends _7{constructor(e,t){super(),E7(this,"object"),E7(this,"domElement"),E7(this,"enabled",!0),E7(this,"target",new uK),E7(this,"minDistance",0),E7(this,"maxDistance",1/0),E7(this,"minZoom",0),E7(this,"maxZoom",1/0),E7(this,"minPolarAngle",0),E7(this,"maxPolarAngle",Math.PI),E7(this,"minAzimuthAngle",-1/0),E7(this,"maxAzimuthAngle",1/0),E7(this,"enableDamping",!1),E7(this,"dampingFactor",.05),E7(this,"enableZoom",!0),E7(this,"zoomSpeed",1),E7(this,"enableRotate",!0),E7(this,"rotateSpeed",1),E7(this,"enablePan",!0),E7(this,"panSpeed",1),E7(this,"screenSpacePanning",!0),E7(this,"keyPanSpeed",7),E7(this,"zoomToCursor",!1),E7(this,"autoRotate",!1),E7(this,"autoRotateSpeed",2),E7(this,"reverseOrbit",!1),E7(this,"reverseHorizontalOrbit",!1),E7(this,"reverseVerticalOrbit",!1),E7(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),E7(this,"mouseButtons",{LEFT:IW.ROTATE,MIDDLE:IW.DOLLY,RIGHT:IW.PAN}),E7(this,"touches",{ONE:BW.ROTATE,TWO:BW.DOLLY_PAN}),E7(this,"target0"),E7(this,"position0"),E7(this,"zoom0"),E7(this,"_domElementKeyEvents",null),E7(this,"getPolarAngle"),E7(this,"getAzimuthalAngle"),E7(this,"setPolarAngle"),E7(this,"setAzimuthalAngle"),E7(this,"getDistance"),E7(this,"getZoomScale"),E7(this,"listenToKeyEvents"),E7(this,"stopListenToKeyEvents"),E7(this,"saveState"),E7(this,"reset"),E7(this,"update"),E7(this,"connect"),E7(this,"dispose"),E7(this,"dollyIn"),E7(this,"dollyOut"),E7(this,"getScale"),E7(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=k7(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=k7(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",K),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",K),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),o=s.NONE},this.update=(()=>{const t=new uK,i=new uK(0,1,0),a=(new cK).setFromUnitVectors(e.up,i),p=a.clone().invert(),f=new uK,m=new cK,g=2*Math.PI;return function(){const v=n.object.position;a.setFromUnitVectors(e.up,i),p.copy(a).invert(),t.copy(v).sub(n.target),t.applyQuaternion(a),c.setFromVector3(t),n.autoRotate&&o===s.NONE&&T(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let y=n.minAzimuthAngle,x=n.maxAzimuthAngle;isFinite(y)&&isFinite(x)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),x<-Math.PI?x+=g:x>Math.PI&&(x-=g),c.theta=y<=x?Math.max(y,Math.min(x,c.theta)):c.theta>(y+x)/2?Math.max(y,c.theta):Math.min(x,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.zoomToCursor&&A||n.object.isOrthographicCamera?c.radius=L(c.radius):c.radius=L(c.radius*d),t.setFromSpherical(c),t.applyQuaternion(p),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0));let b=!1;if(n.zoomToCursor&&A){let r=null;if(n.object instanceof RQ&&n.object.isPerspectiveCamera){const e=t.length();r=L(e*d);const i=e-r;n.object.position.addScaledVector(S,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new uK(_.x,_.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),b=!0;const i=new uK(_.x,_.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(C7.origin.copy(n.object.position),C7.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(C7.direction))<T7?e.lookAt(n.target):(M7.setFromNormalAndCoplanarPoint(n.object.up,n.target),C7.intersectPlane(M7,n.target))))}else n.object instanceof n$&&n.object.isOrthographicCamera&&(b=1!==d,b&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix()));return d=1,A=!1,!!(b||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),f.copy(n.object.position),m.copy(n.object.quaternion),b=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Z),n.domElement.addEventListener("pointerdown",q),n.domElement.addEventListener("pointercancel",J),n.domElement.addEventListener("wheel",Y)},this.dispose=()=>{var e,t,r,i,a,s;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",Z),null==(t=n.domElement)||t.removeEventListener("pointerdown",q),null==(r=n.domElement)||r.removeEventListener("pointercancel",J),null==(i=n.domElement)||i.removeEventListener("wheel",Y),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointermove",X),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointerup",J),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",K)};const n=this,r={type:"change"},i={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=s.NONE;const l=1e-6,c=new F6,u=new F6;let d=1;const h=new uK,p=new RY,f=new RY,m=new RY,g=new RY,v=new RY,y=new RY,x=new RY,b=new RY,w=new RY,S=new uK,_=new RY;let A=!1;const E=[],C={};function M(){return Math.pow(.95,n.zoomSpeed)}function T(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function k(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const P=(()=>{const e=new uK;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}})(),R=(()=>{const e=new uK;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}})(),D=(()=>{const e=new uK;return function(t,r){const i=n.domElement;if(i&&n.object instanceof RQ&&n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),P(2*t*s/i.clientHeight,n.object.matrix),R(2*r*s/i.clientHeight,n.object.matrix)}else i&&n.object instanceof n$&&n.object.isOrthographicCamera?(P(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),R(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(e){n.object instanceof RQ&&n.object.isPerspectiveCamera||n.object instanceof n$&&n.object.isOrthographicCamera?d=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function B(e){I(d/e)}function j(e){I(d*e)}function F(e){if(!n.zoomToCursor||!n.domElement)return;A=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,a=t.width,s=t.height;_.x=r/a*2-1,_.y=-i/s*2+1,S.set(_.x,_.y,1).unproject(n.object).sub(n.object.position).normalize()}function L(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function O(e){p.set(e.clientX,e.clientY)}function N(e){g.set(e.clientX,e.clientY)}function z(){if(1==E.length)p.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);p.set(e,t)}}function U(){if(1==E.length)g.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);g.set(e,t)}}function H(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);x.set(0,n)}function G(e){if(1==E.length)f.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);f.set(n,r)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(T(2*Math.PI*m.x/t.clientHeight),k(2*Math.PI*m.y/t.clientHeight)),p.copy(f)}function V(e){if(1==E.length)v.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}y.subVectors(v,g).multiplyScalar(n.panSpeed),D(y.x,y.y),g.copy(v)}function W(e){const t=$(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);b.set(0,a),w.set(0,Math.pow(b.y/x.y,n.zoomSpeed)),B(w.y),x.copy(b)}function q(e){var t,r;!1!==n.enabled&&(0===E.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",X),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",J)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),E.length){case 1:switch(n.touches.ONE){case BW.ROTATE:if(!1===n.enableRotate)return;z(),o=s.TOUCH_ROTATE;break;case BW.PAN:if(!1===n.enablePan)return;U(),o=s.TOUCH_PAN;break;default:o=s.NONE}break;case 2:switch(n.touches.TWO){case BW.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&H(),n.enablePan&&U(),o=s.TOUCH_DOLLY_PAN;break;case BW.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&H(),n.enableRotate&&z(),o=s.TOUCH_DOLLY_ROTATE;break;default:o=s.NONE}break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case IW.DOLLY:if(!1===n.enableZoom)return;!function(e){F(e),x.set(e.clientX,e.clientY)}(e),o=s.DOLLY;break;case IW.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;N(e),o=s.PAN}else{if(!1===n.enableRotate)return;O(e),o=s.ROTATE}break;case IW.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),o=s.ROTATE}else{if(!1===n.enablePan)return;N(e),o=s.PAN}break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(i)}(e))}function X(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),o){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;G(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;V(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&W(e),n.enablePan&&V(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&W(e),n.enableRotate&&G(e)}(e),n.update();break;default:o=s.NONE}}(e):function(e){if(!1===n.enabled)return;switch(o){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(T(2*Math.PI*m.x/t.clientHeight),k(2*Math.PI*m.y/t.clientHeight)),p.copy(f),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),w.subVectors(b,x),w.y>0?B(M()):w.y<0&&j(M()),x.copy(b),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),D(y.x,y.y),g.copy(v),n.update()}(e)}}(e))}function J(e){var t,r,i;!function(e){delete C[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}(e),0===E.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",X),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",J)),n.dispatchEvent(a),o=s.NONE}function Y(e){!1===n.enabled||!1===n.enableZoom||o!==s.NONE&&o!==s.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){F(e),e.deltaY<0?j(M()):e.deltaY>0&&B(M()),n.update()}(e),n.dispatchEvent(a))}function K(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:D(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:D(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:D(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:D(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Z(e){!1!==n.enabled&&e.preventDefault()}function Q(e){let t=C[e.pointerId];void 0===t&&(t=new RY,C[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return C[t.pointerId]}this.dollyIn=function(){j(arguments.length>0&&void 0!==arguments[0]?arguments[0]:M()),n.update()},this.dollyOut=function(){B(arguments.length>0&&void 0!==arguments[0]?arguments[0]:M()),n.update()},this.getScale=()=>d,this.setScale=e=>{I(e),n.update()},this.getZoomScale=()=>M(),void 0!==t&&this.connect(t),this.update()}}const R7=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],D7=r.forwardRef(((e,t)=>{let{makeDefault:n,camera:i,regress:a,domElement:s,enableDamping:o=!0,keyEvents:l=!1,onChange:c,onStart:u,onEnd:d}=e,h=y(e,R7);const p=D9((e=>e.invalidate)),f=D9((e=>e.camera)),m=D9((e=>e.gl)),g=D9((e=>e.events)),v=D9((e=>e.setEvents)),x=D9((e=>e.set)),b=D9((e=>e.get)),w=D9((e=>e.performance)),S=i||f,_=s||g.connected||m.domElement,A=r.useMemo((()=>new P7(S)),[S]);return I9((()=>{A.enabled&&A.update()}),-1),r.useEffect((()=>(l&&A.connect(!0===l?_:l),A.connect(_),()=>{A.dispose()})),[l,_,a,A,p]),r.useEffect((()=>{const e=e=>{p(),a&&w.regress(),c&&c(e)},t=e=>{u&&u(e)},n=e=>{d&&d(e)};return A.addEventListener("change",e),A.addEventListener("start",t),A.addEventListener("end",n),()=>{A.removeEventListener("start",t),A.removeEventListener("end",n),A.removeEventListener("change",e)}}),[c,u,d,A,p,v]),r.useEffect((()=>{if(n){const e=b().controls;return x({controls:A}),()=>x({controls:e})}}),[n,A]),r.createElement("primitive",wt({ref:t,object:A,enableDamping:o},h))}));function I7(e){let{speaking:t,mood:n,appearance:i}=e;const a=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)({left:null,right:null}),p=(0,r.useRef)({t:0,closing:!1}),f=(0,r.useRef)({x:0,y:0}),m=(null===i||void 0===i?void 0:i.skinColor)||"#ffdbca",g=(null===i||void 0===i?void 0:i.eyeColor)||"#5a8fd3",v=(null===i||void 0===i?void 0:i.hairColor)||"#5d3a3a",y=(null===i||void 0===i?void 0:i.lipColor)||"#d45a7a";I9(((e,r)=>{const{mouse:i}=e;f.current.y=.35*i.x,f.current.x=.2*-i.y,a.current.rotation.y+=.4*(f.current.y-a.current.rotation.y)*r*10,a.current.rotation.x+=.4*(f.current.x-a.current.rotation.x)*r*10;const c="sad"===n?-.03:"laugh"===n?.04:0;[s.current,o.current].forEach(((e,t)=>{e&&(e.position.y=.16+c,e.position.x=0===t?-.19:.19,e.position.z=.47)})),[l.current,u.current].forEach(((e,t)=>{e&&(e.position.y=.16+c+-.015*i.y,e.position.x=(0===t?-.19:.19)+.015*i.x,e.position.z=.515)})),p.current.t-=r,p.current.t<=0&&(p.current.t=2+4*Math.random(),p.current.closing=!0);const m=s.current.scale.y,g=m+((p.current.closing?.08:1)-m)*Math.min(1,12*r);s.current.scale.y=g,o.current.scale.y=g,l.current.scale.y=g,u.current.scale.y=g,p.current.closing&&g<.2&&(p.current.closing=!1);const v=h.current.left,y=h.current.right;if(v&&y){const e="sad"===n?.25:"laugh"===n?-.2:0;v.rotation.z=.2+e,y.rotation.z=-.2-e,v.position.y=.32+("laugh"===n?.02:0),y.position.y=.32+("laugh"===n?.02:0)}const x=t?.16:.03,b=t?6:1.5,w=e.clock.getElapsedTime();d.current.scale.y=.16+Math.abs(Math.sin(w*b))*x,d.current.scale.x=.9+("laugh"===n?.2:"sad"===n?-.1:0)}));const x=(0,r.useMemo)((()=>({color:m,roughness:.4,metalness:.02,emissive:"#110000",emissiveIntensity:.02,clearcoat:.1,clearcoatRoughness:.3,sheen:.2,sheenColor:"#ffb6c1",sheenRoughness:.8,ior:1.4,transmission:.02,thickness:.5})),[m]),b=(0,r.useMemo)((()=>({color:"#ffffff",roughness:.2,metalness:0,clearcoat:.2,clearcoatRoughness:.3})),[]),w=(0,r.useMemo)((()=>({color:g,roughness:.15,metalness:.1,clearcoat:.3,clearcoatRoughness:.2})),[g]),S=(0,r.useMemo)((()=>({color:"#0a0a0a",roughness:.01,metalness:.5})),[]),_=(0,r.useMemo)((()=>({color:y,roughness:.3,metalness:.1,clearcoat:.3,clearcoatRoughness:.2,sheen:.5,sheenColor:"#ff9eb5",sheenRoughness:.3})),[y]),A=(0,r.useMemo)((()=>({color:v,roughness:.8,metalness:.05})),[v]),E=(0,r.useMemo)((()=>({color:v,roughness:.4,metalness:.15,sheen:.3,sheenColor:"#fff",sheenRoughness:.8})),[v]),C=(0,r.useMemo)((()=>({color:"#ffb3c6",transparent:!0,opacity:.25,blending:YW})),[]),M=(0,r.useMemo)((()=>{const e=[];for(let t=0;t<12;t++){const n=.05*(t-5.5),r=.1*Math.abs(n);e.push({position:[n,.3,.5-r],rotation:[0,0,.3*n],size:[.08-.01*Math.abs(n),.1,.02]})}for(let t=0;t<8;t++){const n=t%2===0?-1:1,r=(.35+.03*t)*n;e.push({position:[r,.25,.3-.02*t],rotation:[0,.2*n,.1*n],size:[.06,.25,.03]})}return e}),[]);return(0,ur.jsxs)("group",{ref:a,children:[(0,ur.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,position:[0,.08,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.6,64,64]}),(0,ur.jsx)("meshPhysicalMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("mesh",{position:[0,.22,-.15],scale:[1.05,.75,1.02],children:[(0,ur.jsx)("sphereGeometry",{args:[.62,36,36]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},E))]}),M.map(((e,t)=>(0,ur.jsxs)("mesh",{position:e.position,rotation:e.rotation,children:[(0,ur.jsx)("boxGeometry",{args:e.size}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},E))]},t))),(0,ur.jsx)("group",{position:[0,.1,-.3],children:(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.5,.6,.7,16,1,!0]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)((0,c.A)({},E),{},{side:WW}))]})}),(0,ur.jsxs)("mesh",{position:[-.28,-.02,.46],children:[(0,ur.jsx)("circleGeometry",{args:[.08,24]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},C))]}),(0,ur.jsxs)("mesh",{position:[.28,-.02,.46],children:[(0,ur.jsx)("circleGeometry",{args:[.08,24]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},C))]}),(0,ur.jsxs)("mesh",{ref:s,children:[(0,ur.jsx)("sphereGeometry",{args:[.095,32,32]}),(0,ur.jsx)("meshPhysicalMaterial",(0,c.A)({},b))]}),(0,ur.jsxs)("mesh",{ref:o,children:[(0,ur.jsx)("sphereGeometry",{args:[.095,32,32]}),(0,ur.jsx)("meshPhysicalMaterial",(0,c.A)({},b))]}),(0,ur.jsxs)("mesh",{ref:l,children:[(0,ur.jsx)("circleGeometry",{args:[.06,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]}),(0,ur.jsxs)("mesh",{ref:u,children:[(0,ur.jsx)("circleGeometry",{args:[.06,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]}),(0,ur.jsxs)("mesh",{position:[-.19,.16,.535],children:[(0,ur.jsx)("circleGeometry",{args:[.022,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},S))]}),(0,ur.jsxs)("mesh",{position:[.19,.16,.535],children:[(0,ur.jsx)("circleGeometry",{args:[.022,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},S))]}),(0,ur.jsx)("group",{position:[-.19,.24,.47],children:[0,.05,-.05].map(((e,t)=>(0,ur.jsxs)("mesh",{position:[e,0,0],rotation:[0,0,.15+2*e],children:[(0,ur.jsx)("cylinderGeometry",{args:[.005,.002,.04,6]}),(0,ur.jsx)("meshStandardMaterial",{color:v})]},t)))}),(0,ur.jsx)("group",{position:[.19,.24,.47],children:[0,.05,-.05].map(((e,t)=>(0,ur.jsxs)("mesh",{position:[e,0,0],rotation:[0,0,-.15-2*e],children:[(0,ur.jsx)("cylinderGeometry",{args:[.005,.002,.04,6]}),(0,ur.jsx)("meshStandardMaterial",{color:v})]},t)))}),(0,ur.jsxs)("mesh",{ref:e=>h.current.left=e,position:[-.2,.33,.45],rotation:[0,0,.2],children:[(0,ur.jsx)("boxGeometry",{args:[.16,.015,.03]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},A))]}),(0,ur.jsxs)("mesh",{ref:e=>h.current.right=e,position:[.2,.33,.45],rotation:[0,0,-.2],children:[(0,ur.jsx)("boxGeometry",{args:[.16,.015,.03]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},A))]}),(0,ur.jsxs)("group",{position:[0,.06,.52],children:[(0,ur.jsxs)("mesh",{position:[0,0,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.025,16,16]}),(0,ur.jsx)("meshPhysicalMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("mesh",{position:[-.02,-.01,-.01],children:[(0,ur.jsx)("sphereGeometry",{args:[.008,10,10]}),(0,ur.jsx)("meshStandardMaterial",{color:"#c88",opacity:.4,transparent:!0})]}),(0,ur.jsxs)("mesh",{position:[.02,-.01,-.01],children:[(0,ur.jsx)("sphereGeometry",{args:[.008,10,10]}),(0,ur.jsx)("meshStandardMaterial",{color:"#c88",opacity:.4,transparent:!0})]})]}),(0,ur.jsxs)("mesh",{ref:d,position:[0,-.1,.555],rotation:[0,0,Math.PI],children:[(0,ur.jsx)("torusGeometry",{args:[.12,.022,8,64,.85*Math.PI]}),(0,ur.jsx)("meshPhysicalMaterial",(0,c.A)({},_))]}),(0,ur.jsxs)("mesh",{position:[0,-.13,.54],rotation:[0,0,0],children:[(0,ur.jsx)("torusGeometry",{args:[.1,.016,8,64,.8*Math.PI]}),(0,ur.jsx)("meshPhysicalMaterial",(0,c.A)({},_))]}),(0,ur.jsxs)("group",{children:[(0,ur.jsxs)("mesh",{position:[-.16,.19,.54],children:[(0,ur.jsx)("circleGeometry",{args:[.01,12]}),(0,ur.jsx)("meshBasicMaterial",{color:"#fff",transparent:!0,opacity:.8})]}),(0,ur.jsxs)("mesh",{position:[.16,.19,.54],children:[(0,ur.jsx)("circleGeometry",{args:[.01,12]}),(0,ur.jsx)("meshBasicMaterial",{color:"#fff",transparent:!0,opacity:.8})]})]}),(0,ur.jsxs)("mesh",{position:[-.58,.16,0],rotation:[0,0,.1],children:[(0,ur.jsx)("sphereGeometry",{args:[.08,24,24]}),(0,ur.jsx)("meshPhysicalMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("mesh",{position:[.58,.16,0],rotation:[0,0,-.1],children:[(0,ur.jsx)("sphereGeometry",{args:[.08,24,24]}),(0,ur.jsx)("meshPhysicalMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("group",{position:[-.35,.2,-.1],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.04,.05,.6,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},E))]}),(0,ur.jsxs)("mesh",{position:[0,-.3,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.05,12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},E))]})]}),(0,ur.jsxs)("group",{position:[.35,.2,-.1],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.04,.05,.6,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},E))]}),(0,ur.jsxs)("mesh",{position:[0,-.3,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.05,12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},E))]})]}),(0,ur.jsxs)("mesh",{position:[-.19,.215,.49],rotation:[0,0,.1],children:[(0,ur.jsx)("torusGeometry",{args:[.095,.003,8,48,.7*Math.PI]}),(0,ur.jsx)("meshStandardMaterial",{color:"#222"})]}),(0,ur.jsxs)("mesh",{position:[.19,.215,.49],rotation:[0,0,-.1],children:[(0,ur.jsx)("torusGeometry",{args:[.095,.003,8,48,.7*Math.PI]}),(0,ur.jsx)("meshStandardMaterial",{color:"#222"})]})]})}function B7(e){let{speaking:t,mood:n="smile",appearance:r}=e;return(0,ur.jsxs)(b7,{shadows:!0,camera:{position:[0,0,2.2],fov:35},style:{width:"100%",height:"100%"},gl:{antialias:!0,powerPreference:"high-performance"},children:[(0,ur.jsx)("color",{attach:"background",args:["#f0f0f0"]}),(0,ur.jsx)("ambientLight",{intensity:.75,color:"#fff5e6"}),(0,ur.jsx)("directionalLight",{position:[2,2,2],intensity:1.2,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10,color:16773344}),(0,ur.jsx)("directionalLight",{position:[-2,1.5,-1.5],intensity:.5,color:11194623}),(0,ur.jsx)("directionalLight",{position:[0,-1,1],intensity:.3,color:16769264}),(0,ur.jsx)("hemisphereLight",{color:"#ffffff",groundColor:"#b4b4b4",intensity:.5}),(0,ur.jsx)("group",{position:[0,-.2,0],children:(0,ur.jsx)(I7,{speaking:t,mood:n,appearance:r})}),(0,ur.jsx)(D7,{enableZoom:!1,enablePan:!1,maxPolarAngle:Math.PI/2.3,minPolarAngle:Math.PI/3.5,enableDamping:!0,dampingFactor:.05})]})}function j7(e){let{speaking:t,mood:n}=e;const i=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)({left:null,right:null}),h=(0,r.useRef)({t:0,closing:!1}),p=(0,r.useRef)({x:0,y:0}),f="#3a2718";I9(((e,r)=>{const{mouse:c}=e;p.current.y=.35*c.x,p.current.x=.2*-c.y,i.current.rotation.y+=.4*(p.current.y-i.current.rotation.y)*r*10,i.current.rotation.x+=.4*(p.current.x-i.current.rotation.x)*r*10;const f="sad"===n?-.02:"laugh"===n?.03:0;[a.current,s.current].forEach(((e,t)=>{e&&(e.position.y=.1+f,e.position.x=0===t?-.15:.15,e.position.z=.45)})),[o.current,l.current].forEach(((e,t)=>{e&&(e.position.y=.1+f+-.01*c.y,e.position.x=(0===t?-.15:.15)+.01*c.x,e.position.z=.48)})),h.current.t-=r,h.current.t<=0&&(h.current.t=3+5*Math.random(),h.current.closing=!0);const m=a.current.scale.y,g=m+((h.current.closing?.05:1)-m)*Math.min(1,15*r);a.current.scale.y=g,s.current.scale.y=g,o.current.scale.y=g,l.current.scale.y=g,h.current.closing&&g<.1&&(h.current.closing=!1);const v=d.current.left,y=d.current.right;if(v&&y){const e="sad"===n?.15:"laugh"===n?-.15:0;v.rotation.z=.15+e,y.rotation.z=-.15-e,v.position.y=.25+("laugh"===n?.03:0),y.position.y=.25+("laugh"===n?.03:0)}const x=t?.25:.05,b=t?8:2,w=e.clock.getElapsedTime();u.current.scale.y=.2+Math.abs(Math.sin(w*b))*x,u.current.scale.x=.8+("laugh"===n?.3:"sad"===n?-.15:0)}));const m=(0,r.useMemo)((()=>({color:"#ffdbac",roughness:.8,flatShading:!0})),[]),g=(0,r.useMemo)((()=>({color:"#ffffff",flatShading:!0})),[]),v=(0,r.useMemo)((()=>({color:"#000000",flatShading:!0})),[]),y=(0,r.useMemo)((()=>({color:"#ff6b6b",flatShading:!0})),[]),x=(0,r.useMemo)((()=>({color:f,flatShading:!0})),[]),b=(0,r.useMemo)((()=>({color:f,flatShading:!0})),[]),w=(0,r.useMemo)((()=>({color:"#ff0000",flatShading:!0})),[]),S=(0,r.useMemo)((()=>({color:"#ffff00",flatShading:!0})),[]);return(0,ur.jsxs)("group",{ref:i,children:[(0,ur.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,position:[0,.2,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.5,32,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("group",{position:[0,.45,-.1],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("sphereGeometry",{args:[.4,16,16,0,2*Math.PI,0,.6*Math.PI]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},b))]}),[{pos:[-.15,.1,.35],rot:[.3,-.2,0],scale:[.8,1.2,.8]},{pos:[.15,.1,.35],rot:[.3,.2,0],scale:[.8,1.2,.8]},{pos:[-.25,0,.3],rot:[.1,-.4,0],scale:[.7,1,.7]},{pos:[.25,0,.3],rot:[.1,.4,0],scale:[.7,1,.7]},{pos:[0,.15,.4],rot:[.5,0,0],scale:[.6,1.5,.6]}].map(((e,t)=>(0,ur.jsxs)("mesh",{position:e.pos,rotation:e.rot,scale:e.scale,children:[(0,ur.jsx)("coneGeometry",{args:[.1,.2,4]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},b))]},t)))]}),(0,ur.jsxs)("mesh",{ref:a,children:[(0,ur.jsx)("circleGeometry",{args:[.08,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("mesh",{ref:s,children:[(0,ur.jsx)("circleGeometry",{args:[.08,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("mesh",{ref:o,children:[(0,ur.jsx)("circleGeometry",{args:[.04,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{ref:l,children:[(0,ur.jsx)("circleGeometry",{args:[.04,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{ref:e=>d.current.left=e,position:[-.15,.25,.45],rotation:[0,0,.15],children:[(0,ur.jsx)("boxGeometry",{args:[.12,.03,.03]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("mesh",{ref:e=>d.current.right=e,position:[.15,.25,.45],rotation:[0,0,-.15],children:[(0,ur.jsx)("boxGeometry",{args:[.12,.03,.03]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("mesh",{position:[0,.05,.5],children:[(0,ur.jsx)("sphereGeometry",{args:[.03,12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("mesh",{ref:u,position:[0,-.1,.48],children:[(0,ur.jsx)("circleGeometry",{args:[.1,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]}),(0,ur.jsxs)("mesh",{position:[-.2,-.02,.42],children:[(0,ur.jsx)("circleGeometry",{args:[.06,12]}),(0,ur.jsx)("meshStandardMaterial",{color:"#ffb3c6",transparent:!0,opacity:.3})]}),(0,ur.jsxs)("mesh",{position:[.2,-.02,.42],children:[(0,ur.jsx)("circleGeometry",{args:[.06,12]}),(0,ur.jsx)("meshStandardMaterial",{color:"#ffb3c6",transparent:!0,opacity:.3})]}),(0,ur.jsxs)("group",{position:[0,-.4,0],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.5,.6,.5,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]}),(0,ur.jsxs)("mesh",{position:[-.45,0,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.2,16,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]}),(0,ur.jsxs)("mesh",{position:[.45,0,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.2,16,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]})]}),(0,ur.jsxs)("group",{position:[0,-.7,0],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.4,.5,.3,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},S))]}),(0,ur.jsxs)("mesh",{position:[-.15,-.2,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.15,.15,.1,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("mesh",{position:[.15,-.2,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.15,.15,.1,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]})]}),(0,ur.jsxs)("group",{position:[0,-.5,0],children:[(0,ur.jsxs)("mesh",{position:[-.6,.1,0],rotation:[0,0,.3],children:[(0,ur.jsx)("cylinderGeometry",{args:[.08,.08,.5,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("mesh",{position:[.6,.1,0],rotation:[0,0,-.3],children:[(0,ur.jsx)("cylinderGeometry",{args:[.08,.08,.5,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]})]}),(0,ur.jsxs)("group",{position:[0,-.9,0],children:[(0,ur.jsxs)("mesh",{position:[-.15,-.3,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.1,.1,.6,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("mesh",{position:[.15,-.3,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.1,.1,.6,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]})]})]})}function F7(e){let{speaking:t,mood:n="normal",appearance:r}=e;return(0,ur.jsxs)(b7,{camera:{position:[0,0,3],fov:45},style:{width:"100%",height:"100%"},gl:{antialias:!0},children:[(0,ur.jsx)("color",{attach:"background",args:["#87CEEB"]}),(0,ur.jsx)("ambientLight",{intensity:.8}),(0,ur.jsx)("directionalLight",{position:[3,2,5],intensity:1,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,ur.jsx)("group",{position:[0,.2,0],children:(0,ur.jsx)(j7,{speaking:t,mood:n})}),(0,ur.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-1.5,0],children:[(0,ur.jsx)("planeGeometry",{args:[10,10]}),(0,ur.jsx)("meshStandardMaterial",{color:"#4CAF50"})]}),(0,ur.jsx)(D7,{enableZoom:!0,enablePan:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,enableDamping:!0,dampingFactor:.05})]})}function L7(e){let{speaking:t,mood:n,isSSJ:i}=e;const a=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)({left:null,right:null}),p=(0,r.useRef)({t:0,closing:!1}),f=(0,r.useRef)({x:0,y:0}),m=i?"#FFD700":"#000000";I9(((e,r)=>{const{mouse:i}=e;f.current.y=.35*i.x,f.current.x=.2*-i.y,a.current.rotation.y+=.4*(f.current.y-a.current.rotation.y)*r*10,a.current.rotation.x+=.4*(f.current.x-a.current.rotation.x)*r*10;const c="angry"===n?-.02:"happy"===n?.03:0;[s.current,o.current].forEach(((e,t)=>{e&&(e.position.y=.12+c,e.position.x=0===t?-.18:.18,e.position.z=.45)})),[l.current,u.current].forEach(((e,t)=>{e&&(e.position.y=.12+c+-.01*i.y,e.position.x=(0===t?-.18:.18)+.01*i.x,e.position.z=.48)})),p.current.t-=r,p.current.t<=0&&(p.current.t=3+4*Math.random(),p.current.closing=!0);const m=s.current.scale.y,g=m+((p.current.closing?.05:1)-m)*Math.min(1,15*r);s.current.scale.y=g,o.current.scale.y=g,l.current.scale.y=g,u.current.scale.y=g,p.current.closing&&g<.1&&(p.current.closing=!1);const v=h.current.left,y=h.current.right;if(v&&y){const e="angry"===n?.2:"happy"===n?-.15:0;v.rotation.z=.15+e,y.rotation.z=-.15-e,v.position.y=.28+("happy"===n?.02:0),y.position.y=.28+("happy"===n?.02:0)}const x=t?.2:.05,b=t?8:2,w=e.clock.getElapsedTime();d.current.scale.y=.15+Math.abs(Math.sin(w*b))*x,d.current.scale.x=.8+("happy"===n?.3:"angry"===n?-.1:0)}));const g=(0,r.useMemo)((()=>({color:"#FFD8A8",roughness:.8,flatShading:!0})),[]),v=(0,r.useMemo)((()=>({color:"#FFFFFF",flatShading:!0})),[]),y=(0,r.useMemo)((()=>({color:"#000000",flatShading:!0})),[]),x=(0,r.useMemo)((()=>({color:"#FF6B6B",flatShading:!0})),[]),b=(0,r.useMemo)((()=>({color:m,roughness:.8,flatShading:!0})),[m]),w=(0,r.useMemo)((()=>({color:"#FF6600",flatShading:!0})),[]),S=(0,r.useMemo)((()=>({color:"#0066CC",flatShading:!0})),[]),_=(0,r.useMemo)((()=>({color:"#0066CC",flatShading:!0})),[]),A=(0,r.useMemo)((()=>({color:"#990000",flatShading:!0})),[]),E=(0,r.useMemo)((()=>({color:"#660000",flatShading:!0})),[]),C=(0,r.useMemo)((()=>[{pos:[0,.65,.1],rot:[0,0,0],scale:[1,1.5,1]},{pos:[-.3,.6,0],rot:[0,.5,-.3],scale:[.8,1.2,.8]},{pos:[.3,.6,0],rot:[0,-.5,.3],scale:[.8,1.2,.8]},{pos:[-.2,.5,-.2],rot:[.2,.3,-.2],scale:[.7,1,.7]},{pos:[.2,.5,-.2],rot:[.2,-.3,.2],scale:[.7,1,.7]},{pos:[0,.7,-.1],rot:[.3,0,0],scale:[.6,1.5,.6]}]),[]);return(0,ur.jsxs)("group",{ref:a,children:[(0,ur.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,position:[0,.3,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.5,32,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),C.map(((e,t)=>(0,ur.jsxs)("mesh",{position:e.pos,rotation:e.rot,scale:e.scale,children:[(0,ur.jsx)("coneGeometry",{args:[.15,.3,4]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},b))]},t))),(0,ur.jsxs)("mesh",{ref:s,children:[(0,ur.jsx)("circleGeometry",{args:[.1,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{ref:o,children:[(0,ur.jsx)("circleGeometry",{args:[.1,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{ref:l,children:[(0,ur.jsx)("circleGeometry",{args:[.05,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]}),(0,ur.jsxs)("mesh",{ref:u,children:[(0,ur.jsx)("circleGeometry",{args:[.05,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]}),(0,ur.jsxs)("mesh",{ref:e=>h.current.left=e,position:[-.18,.28,.45],rotation:[0,0,.15],children:[(0,ur.jsx)("boxGeometry",{args:[.15,.03,.03]}),(0,ur.jsx)("meshStandardMaterial",{color:m})]}),(0,ur.jsxs)("mesh",{ref:e=>h.current.right=e,position:[.18,.28,.45],rotation:[0,0,-.15],children:[(0,ur.jsx)("boxGeometry",{args:[.15,.03,.03]}),(0,ur.jsx)("meshStandardMaterial",{color:m})]}),(0,ur.jsxs)("mesh",{position:[0,.1,.5],children:[(0,ur.jsx)("sphereGeometry",{args:[.04,12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("mesh",{ref:d,position:[0,-.05,.48],children:[(0,ur.jsx)("circleGeometry",{args:[.12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("mesh",{position:[0,-.2,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.2,.25,.3,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("group",{position:[0,-.5,0],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.6,.7,.6,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]}),(0,ur.jsxs)("mesh",{position:[-.7,-.2,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.12,.12,.15,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},_))]}),(0,ur.jsxs)("mesh",{position:[.7,-.2,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.12,.12,.15,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},_))]})]}),(0,ur.jsxs)("group",{position:[0,-.9,0],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.5,.6,.4,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},S))]}),(0,ur.jsxs)("mesh",{position:[0,-.2,0],children:[(0,ur.jsx)("torusGeometry",{args:[.55,.05,16,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},E))]})]}),(0,ur.jsxs)("group",{position:[0,-1.2,0],children:[(0,ur.jsxs)("mesh",{position:[-.2,-.1,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.15,.15,.4,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},A))]}),(0,ur.jsxs)("mesh",{position:[.2,-.1,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.15,.15,.4,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},A))]})]})]})}function O7(e){let{speaking:t,mood:n="normal",isSSJ:r=!1}=e;return(0,ur.jsxs)(b7,{camera:{position:[0,0,4],fov:45},style:{width:"100%",height:"100%"},gl:{antialias:!0},children:[(0,ur.jsx)("color",{attach:"background",args:["#87CEEB"]}),(0,ur.jsx)("ambientLight",{intensity:.8}),(0,ur.jsx)("directionalLight",{position:[3,2,5],intensity:1,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,ur.jsx)("group",{position:[0,.5,0],children:(0,ur.jsx)(L7,{speaking:t,mood:n,isSSJ:r})}),(0,ur.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-1.5,0],children:[(0,ur.jsx)("planeGeometry",{args:[10,10]}),(0,ur.jsx)("meshStandardMaterial",{color:"#4CAF50"})]}),(0,ur.jsx)(D7,{enableZoom:!0,enablePan:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,enableDamping:!0,dampingFactor:.05})]})}function N7(e){let{speaking:t,mood:n}=e;const i=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)({left:null,right:null}),h=(0,r.useRef)({t:0,closing:!1}),p=(0,r.useRef)({x:0,y:0});I9(((e,r)=>{const{mouse:c}=e;p.current.y=.25*c.x,p.current.x=.15*-c.y,i.current.rotation.y+=.3*(p.current.y-i.current.rotation.y)*r*10,i.current.rotation.x+=.3*(p.current.x-i.current.rotation.x)*r*10;const f="serious"===n?-.01:"smiling"===n?.02:0;[a.current,s.current].forEach(((e,t)=>{e&&(e.position.y=.1+f,e.position.x=0===t?-.18:.18,e.position.z=.45)})),[o.current,l.current].forEach(((e,t)=>{e&&(e.position.y=.1+f+-.008*c.y,e.position.x=(0===t?-.18:.18)+.008*c.x,e.position.z=.48)})),h.current.t-=r,h.current.t<=0&&(h.current.t=4+3*Math.random(),h.current.closing=!0);const m=a.current.scale.y,g=m+((h.current.closing?.05:1)-m)*Math.min(1,10*r);a.current.scale.y=g,s.current.scale.y=g,o.current.scale.y=g,l.current.scale.y=g,h.current.closing&&g<.1&&(h.current.closing=!1);const v=d.current.left,y=d.current.right;if(v&&y){const e="serious"===n?.1:"smiling"===n?-.1:0;v.rotation.z=.1+e,y.rotation.z=-.1-e,v.position.y=.25+("smiling"===n?.01:0),y.position.y=.25+("smiling"===n?.01:0)}const x=t?.15:.03,b=t?6:1.5,w=e.clock.getElapsedTime();u.current.scale.y=.1+Math.abs(Math.sin(w*b))*x,u.current.scale.x=.8+("smiling"===n?.2:"serious"===n?-.05:0)}));const f=(0,r.useMemo)((()=>({color:"#D2B48C",roughness:.6,metalness:.1})),[]),m=(0,r.useMemo)((()=>({color:"#FFFFFF",roughness:.3})),[]),g=(0,r.useMemo)((()=>({color:"#3A3A3A",roughness:.2})),[]),v=(0,r.useMemo)((()=>({color:"#8B4513",roughness:.5})),[]),y=(0,r.useMemo)((()=>({color:"#808080",roughness:.7})),[]),x=(0,r.useMemo)((()=>({color:"#FFFFFF",roughness:.5})),[]),b=(0,r.useMemo)((()=>({color:"#4169E1",roughness:.4})),[]),w=(0,r.useMemo)((()=>{const e=new iQ,t=[new uK(-.2,-.1,.45),new uK(0,-.15,.48),new uK(.2,-.1,.45),new uK(.15,0,.47),new uK(-.15,0,.47)];return e.setFromPoints(t),e}),[]);return(0,ur.jsxs)("group",{ref:i,children:[(0,ur.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,position:[0,.3,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.5,32,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},f))]}),(0,ur.jsxs)("mesh",{ref:a,children:[(0,ur.jsx)("circleGeometry",{args:[.08,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("mesh",{ref:s,children:[(0,ur.jsx)("circleGeometry",{args:[.08,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("mesh",{ref:o,children:[(0,ur.jsx)("circleGeometry",{args:[.04,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("mesh",{ref:l,children:[(0,ur.jsx)("circleGeometry",{args:[.04,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("mesh",{ref:e=>d.current.left=e,position:[-.15,.25,.45],rotation:[0,0,.1],children:[(0,ur.jsx)("boxGeometry",{args:[.12,.02,.02]}),(0,ur.jsx)("meshStandardMaterial",{color:"#333333"})]}),(0,ur.jsxs)("mesh",{ref:e=>d.current.right=e,position:[.15,.25,.45],rotation:[0,0,-.1],children:[(0,ur.jsx)("boxGeometry",{args:[.12,.02,.02]}),(0,ur.jsx)("meshStandardMaterial",{color:"#333333"})]}),(0,ur.jsxs)("mesh",{position:[0,.05,.5],children:[(0,ur.jsx)("sphereGeometry",{args:[.05,12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},f))]}),(0,ur.jsxs)("mesh",{ref:u,position:[0,-.1,.48],children:[(0,ur.jsx)("circleGeometry",{args:[.1,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{position:[0,-.05,.46],children:[(0,ur.jsx)("primitive",{object:w,attach:"geometry"}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)((0,c.A)({},y),{},{side:WW}))]}),(0,ur.jsxs)("mesh",{position:[0,0,.48],rotation:[0,0,0],children:[(0,ur.jsx)("boxGeometry",{args:[.25,.03,.02]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]}),(0,ur.jsx)("group",{position:[0,-.5,0],children:(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.5,.6,.8,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]})}),(0,ur.jsx)("group",{position:[0,-.3,0],children:(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.55,.65,.5,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},b))]})}),(0,ur.jsxs)("mesh",{position:[0,-.2,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.2,.25,.3,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},f))]})]})}function z7(e){let{speaking:t,mood:n="neutral"}=e;return(0,ur.jsxs)(b7,{camera:{position:[0,0,3],fov:45},style:{width:"100%",height:"100%"},gl:{antialias:!0},children:[(0,ur.jsx)("color",{attach:"background",args:["#F5F5F5"]}),(0,ur.jsx)("ambientLight",{intensity:.7}),(0,ur.jsx)("directionalLight",{position:[3,2,5],intensity:1.2,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,ur.jsx)("group",{position:[0,.2,0],children:(0,ur.jsx)(N7,{speaking:t,mood:n})}),(0,ur.jsx)(D7,{enableZoom:!0,enablePan:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,enableDamping:!0,dampingFactor:.05})]})}function U7(e){let{speaking:t,mood:n}=e;const i=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)({left:null,right:null}),h=(0,r.useRef)({t:0,closing:!1}),p=(0,r.useRef)({x:0,y:0}),f=(0,r.useRef)(),m="#00FF00";I9(((e,r)=>{const{mouse:c}=e;p.current.y=.35*c.x,p.current.x=.2*-c.y,i.current.rotation.y+=.4*(p.current.y-i.current.rotation.y)*r*10,i.current.rotation.x+=.4*(p.current.x-i.current.rotation.x)*r*10;const m="angry"===n?-.02:"excited"===n?.03:0;[a.current,s.current].forEach(((e,t)=>{e&&(e.position.y=.1+m,e.position.x=0===t?-.15:.15,e.position.z=.45)})),[o.current,l.current].forEach(((e,t)=>{e&&(e.position.y=.1+m+-.01*c.y,e.position.x=(0===t?-.15:.15)+.01*c.x,e.position.z=.48)})),h.current.t-=r,h.current.t<=0&&(h.current.t=3+3*Math.random(),h.current.closing=!0);const g=a.current.scale.y,v=g+((h.current.closing?.05:1)-g)*Math.min(1,20*r);a.current.scale.y=v,s.current.scale.y=v,o.current.scale.y=v,l.current.scale.y=v,h.current.closing&&v<.1&&(h.current.closing=!1);const y=d.current.left,x=d.current.right;if(y&&x){const e="angry"===n?.15:"excited"===n?-.1:0;y.rotation.z=.1+e,x.rotation.z=-.1-e,y.position.y=.22+("excited"===n?.02:0),x.position.y=.22+("excited"===n?.02:0)}const b=t?.2:.05,w=t?8:2,S=e.clock.getElapsedTime();u.current.scale.y=.12+Math.abs(Math.sin(S*w))*b,u.current.scale.x=.8+("excited"===n?.3:"angry"===n?-.1:0),f.current&&(f.current.material.emissiveIntensity=.5+.3*Math.sin(3*S))}));const g=(0,r.useMemo)((()=>({color:"#FFD699",roughness:.8,flatShading:!0})),[]),v=(0,r.useMemo)((()=>({color:"#FFFFFF",flatShading:!0})),[]),y=(0,r.useMemo)((()=>({color:"#000000",flatShading:!0})),[]),x=(0,r.useMemo)((()=>({color:"#FF6B6B",flatShading:!0})),[]),b=(0,r.useMemo)((()=>({color:"#FFFFFF",flatShading:!0})),[]),w=(0,r.useMemo)((()=>({color:"#006600",flatShading:!0})),[]),S=(0,r.useMemo)((()=>({color:m,emissive:m,emissiveIntensity:.5,flatShading:!0})),[]),_=(0,r.useMemo)((()=>[{pos:[0,.35,.1],rot:[0,0,0],scale:[.8,1.2,.8]},{pos:[-.2,.35,0],rot:[0,.3,-.2],scale:[.7,1,.7]},{pos:[.2,.35,0],rot:[0,-.3,.2],scale:[.7,1,.7]}]),[]);return(0,ur.jsxs)("group",{ref:i,children:[(0,ur.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,position:[0,.2,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.45,32,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),_.map(((e,t)=>(0,ur.jsxs)("mesh",{position:e.pos,rotation:e.rot,scale:e.scale,children:[(0,ur.jsx)("coneGeometry",{args:[.1,.2,4]}),(0,ur.jsx)("meshStandardMaterial",{color:"#000000",flatShading:!0})]},t))),(0,ur.jsxs)("mesh",{ref:a,children:[(0,ur.jsx)("circleGeometry",{args:[.07,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{ref:s,children:[(0,ur.jsx)("circleGeometry",{args:[.07,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{ref:o,children:[(0,ur.jsx)("circleGeometry",{args:[.035,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]}),(0,ur.jsxs)("mesh",{ref:l,children:[(0,ur.jsx)("circleGeometry",{args:[.035,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]}),(0,ur.jsxs)("mesh",{ref:e=>d.current.left=e,position:[-.13,.22,.45],rotation:[0,0,.1],children:[(0,ur.jsx)("boxGeometry",{args:[.1,.02,.02]}),(0,ur.jsx)("meshStandardMaterial",{color:"#000000"})]}),(0,ur.jsxs)("mesh",{ref:e=>d.current.right=e,position:[.13,.22,.45],rotation:[0,0,-.1],children:[(0,ur.jsx)("boxGeometry",{args:[.1,.02,.02]}),(0,ur.jsx)("meshStandardMaterial",{color:"#000000"})]}),(0,ur.jsxs)("mesh",{position:[0,.05,.48],children:[(0,ur.jsx)("sphereGeometry",{args:[.03,12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("mesh",{ref:u,position:[0,-.1,.45],children:[(0,ur.jsx)("circleGeometry",{args:[.09,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]}),(0,ur.jsx)("group",{position:[0,-.4,0],children:(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.4,.5,.6,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},b))]})}),(0,ur.jsx)("group",{position:[0,-.8,0],children:(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.35,.45,.5,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]})}),(0,ur.jsxs)("group",{position:[-.45,-.3,0],rotation:[0,0,.3],children:[(0,ur.jsxs)("mesh",{ref:f,children:[(0,ur.jsx)("torusGeometry",{args:[.08,.02,16,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},S))]}),(0,ur.jsxs)("mesh",{position:[0,0,0],children:[(0,ur.jsx)("boxGeometry",{args:[.1,.05,.05]}),(0,ur.jsx)("meshStandardMaterial",{color:"#000000"})]})]})]})}function H7(e){let{speaking:t,mood:n="neutral"}=e;return(0,ur.jsxs)(b7,{camera:{position:[0,0,3],fov:45},style:{width:"100%",height:"100%"},gl:{antialias:!0},children:[(0,ur.jsx)("color",{attach:"background",args:["#87CEEB"]}),(0,ur.jsx)("ambientLight",{intensity:.8}),(0,ur.jsx)("directionalLight",{position:[3,2,5],intensity:1,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,ur.jsx)("group",{position:[0,.2,0],children:(0,ur.jsx)(U7,{speaking:t,mood:n})}),(0,ur.jsx)(D7,{enableZoom:!0,enablePan:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,enableDamping:!0,dampingFactor:.05})]})}const G7=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],V7=new uK,W7=new uK,q7=new uK,X7=new RY;function J7(e,t,n){const r=V7.setFromMatrixPosition(e.matrixWorld);r.project(t);const i=n.width/2,a=n.height/2;return[r.x*i+i,-r.y*a+a]}const Y7=e=>Math.abs(e)<1e-10?0:e;function K7(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="matrix3d(";for(let i=0;16!==i;i++)r+=Y7(t[i]*e.elements[i])+(15!==i?",":")");return n+r}const Z7=(Q7=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>K7(e,Q7));var Q7;const $7=(e,t)=>{return K7(e,[1/(n=t),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};const eee=r.forwardRef(((e,t)=>{let{children:n,eps:i=.001,style:s,className:o,prepend:l,center:u,fullscreen:d,portal:h,distanceFactor:p,sprite:f=!1,transform:m=!1,occlude:g,onOcclude:v,castShadow:x,receiveShadow:b,material:w,geometry:S,zIndexRange:_=[16777271,0],calculatePosition:A=J7,as:E="div",wrapperClass:C,pointerEvents:M="auto"}=e,T=y(e,G7);const{gl:k,camera:P,scene:R,size:D,raycaster:I,events:B,viewport:j}=D9(),[F]=r.useState((()=>document.createElement(E))),L=r.useRef(),O=r.useRef(null),N=r.useRef(0),z=r.useRef([0,0]),U=r.useRef(null),H=r.useRef(null),G=(null==h?void 0:h.current)||B.connected||k.domElement.parentNode,V=r.useRef(null),W=r.useRef(!1),q=r.useMemo((()=>g&&"blending"!==g||Array.isArray(g)&&g.length&&function(e){return e&&"object"===typeof e&&"current"in e}(g[0])),[g]);r.useLayoutEffect((()=>{const e=k.domElement;g&&"blending"===g?(e.style.zIndex="".concat(Math.floor(_[0]/2)),e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[g]),r.useLayoutEffect((()=>{if(O.current){const e=L.current=a.createRoot(F);if(R.updateMatrixWorld(),m)F.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=A(O.current,P,D);F.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return G&&(l?G.prepend(F):G.appendChild(F)),()=>{G&&G.removeChild(F),e.unmount()}}}),[G,m]),r.useLayoutEffect((()=>{C&&(F.className=C)}),[C]);const X=r.useMemo((()=>m?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,c.A)((0,c.A)({position:"absolute",transform:u?"translate3d(-50%,-50%,0)":"none"},d&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height}),s)),[s,u,d,D,m]),J=r.useMemo((()=>({position:"absolute",pointerEvents:M})),[M]);r.useLayoutEffect((()=>{var e,i;(W.current=!1,m)?null==(e=L.current)||e.render(r.createElement("div",{ref:U,style:X},r.createElement("div",{ref:H,style:J},r.createElement("div",{ref:t,className:o,style:s,children:n})))):null==(i=L.current)||i.render(r.createElement("div",{ref:t,style:X,className:o,children:n}))}));const Y=r.useRef(!0);I9((e=>{if(O.current){P.updateMatrixWorld(),O.current.updateWorldMatrix(!0,!1);const e=m?z.current:A(O.current,P,D);if(m||Math.abs(N.current-P.zoom)>i||Math.abs(z.current[0]-e[0])>i||Math.abs(z.current[1]-e[1])>i){const t=function(e,t){const n=V7.setFromMatrixPosition(e.matrixWorld),r=W7.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),a=t.getWorldDirection(q7);return i.angleTo(a)>Math.PI/2}(O.current,P);let n=!1;q&&(Array.isArray(g)?n=g.map((e=>e.current)):"blending"!==g&&(n=[R]));const r=Y.current;if(n){const e=function(e,t,n,r){const i=V7.setFromMatrixPosition(e.matrixWorld),a=i.clone();a.project(t),X7.set(a.x,a.y),n.setFromCamera(X7,t);const s=n.intersectObjects(r,!0);if(s.length){const e=s[0].distance;return i.distanceTo(n.ray.origin)<e}return!0}(O.current,P,I,n);Y.current=e&&!t}else Y.current=!t;r!==Y.current&&(v?v(!Y.current):F.style.display=Y.current?"block":"none");const i=Math.floor(_[0]/2),a=g?q?[_[0],i]:[i-1,0]:_;if(F.style.zIndex="".concat(function(e,t,n){if(t instanceof RQ||t instanceof n$){const r=V7.setFromMatrixPosition(e.matrixWorld),i=W7.setFromMatrixPosition(t.matrixWorld),a=r.distanceTo(i),s=(n[1]-n[0])/(t.far-t.near),o=n[1]-s*t.far;return Math.round(s*a+o)}}(O.current,P,a)),m){const[e,t]=[D.width/2,D.height/2],n=P.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:i,left:a,bottom:s,right:o}=P,l=Z7(P.matrixWorldInverse),c=r?"scale(".concat(n,")translate(").concat(Y7(-(o+a)/2),"px,").concat(Y7((i+s)/2),"px)"):"translateZ(".concat(n,"px)");let u=O.current.matrixWorld;f&&(u=P.matrixWorldInverse.clone().transpose().copyPosition(u).scale(O.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),F.style.width=D.width+"px",F.style.height=D.height+"px",F.style.perspective=r?"":"".concat(n,"px"),U.current&&H.current&&(U.current.style.transform="".concat(c).concat(l,"translate(").concat(e,"px,").concat(t,"px)"),H.current.style.transform=$7(u,1/((p||10)/400)))}else{const t=void 0===p?1:function(e,t){if(t instanceof n$)return t.zoom;if(t instanceof RQ){const n=V7.setFromMatrixPosition(e.matrixWorld),r=W7.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,a=n.distanceTo(r);return 1/(2*Math.tan(i/2)*a)}return 1}(O.current,P)*p;F.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(t,")")}z.current=e,N.current=P.zoom}}if(!q&&V.current&&!W.current)if(m){if(U.current){const e=U.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=P;if(t||S)T.scale&&(Array.isArray(T.scale)?T.scale instanceof uK?V.current.scale.copy(T.scale.clone().divideScalar(1)):V.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):V.current.scale.setScalar(1/T.scale));else{const t=(p||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;V.current.scale.set(n,r,1)}W.current=!0}}}else{const t=F.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/j.factor,n=t.clientWidth*e,r=t.clientHeight*e;V.current.scale.set(n,r,1),W.current=!0}V.current.lookAt(e.camera.position)}}));const K=r.useMemo((()=>({vertexShader:m?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[m]);return r.createElement("group",wt({},T,{ref:O}),g&&!q&&r.createElement("mesh",{castShadow:x,receiveShadow:b,ref:V},S||r.createElement("planeGeometry",null),w||r.createElement("shaderMaterial",{side:WW,vertexShader:K.vertexShader,fragmentShader:K.fragmentShader})))}));function tee(e){let{speaking:t,mood:n,showBlindfold:i}=e;const a=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)(),p=(0,r.useRef)({t:0,closing:!1}),f=(0,r.useRef)({x:0,y:0}),m="#7EC8E3";I9(((e,r)=>{const{mouse:c}=e;if(f.current.y=.35*c.x,f.current.x=.2*-c.y,a.current.rotation.y+=.4*(f.current.y-a.current.rotation.y)*r*10,a.current.rotation.x+=.4*(f.current.x-a.current.rotation.x)*r*10,!i){const e="serious"===n?-.01:"smirking"===n?.02:0;[s.current,o.current].forEach(((t,n)=>{t&&(t.position.y=.12+e,t.position.x=0===n?-.18:.18,t.position.z=.45)})),[l.current,u.current].forEach(((t,n)=>{t&&(t.position.y=.12+e+-.01*c.y,t.position.x=(0===n?-.18:.18)+.01*c.x,t.position.z=.48)})),p.current.t-=r,p.current.t<=0&&(p.current.t=4+3*Math.random(),p.current.closing=!0);const t=s.current.scale.y,i=15,a=t+((p.current.closing?.05:1)-t)*Math.min(1,i*r);s.current.scale.y=a,o.current.scale.y=a,l.current.scale.y=a,u.current.scale.y=a,p.current.closing&&a<.1&&(p.current.closing=!1)}const h=t?.15:.03,m=t?6:1.5,g=e.clock.getElapsedTime();d.current.scale.y=.1+Math.abs(Math.sin(g*m))*h,d.current.scale.x=.8+("smirking"===n?.3:"serious"===n?-.1:0)}));const g=(0,r.useMemo)((()=>({color:"#FFE4C4",roughness:.6,metalness:.1})),[]),v=(0,r.useMemo)((()=>({color:"#FFFFFF",roughness:.3})),[]),y=(0,r.useMemo)((()=>({color:m,emissive:m,emissiveIntensity:.5,roughness:.2})),[]),x=(0,r.useMemo)((()=>({color:"#FF6B6B",roughness:.5})),[]),b=(0,r.useMemo)((()=>({color:"#FFFFFF",roughness:.7})),[]),w=(0,r.useMemo)((()=>({color:"#000000",roughness:.8})),[]),S=(0,r.useMemo)((()=>({color:"#2C3E50",roughness:.5})),[]),_=(0,r.useMemo)((()=>[{pos:[0,.5,.1],rot:[0,0,0],scale:[1,1.5,1]},{pos:[-.3,.45,0],rot:[0,.5,-.3],scale:[.8,1.2,.8]},{pos:[.3,.45,0],rot:[0,-.5,.3],scale:[.8,1.2,.8]},{pos:[-.2,.4,-.2],rot:[.2,.3,-.2],scale:[.7,1,.7]},{pos:[.2,.4,-.2],rot:[.2,-.3,.2],scale:[.7,1,.7]}]),[]);return(0,ur.jsxs)("group",{ref:a,children:[(0,ur.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,position:[0,.3,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.5,32,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),_.map(((e,t)=>(0,ur.jsxs)("mesh",{position:e.pos,rotation:e.rot,scale:e.scale,children:[(0,ur.jsx)("coneGeometry",{args:[.15,.3,4]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},b))]},t))),!i&&(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsxs)("mesh",{ref:s,children:[(0,ur.jsx)("circleGeometry",{args:[.1,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{ref:o,children:[(0,ur.jsx)("circleGeometry",{args:[.1,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{ref:l,children:[(0,ur.jsx)("circleGeometry",{args:[.06,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]}),(0,ur.jsxs)("mesh",{ref:u,children:[(0,ur.jsx)("circleGeometry",{args:[.06,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]})]}),i&&(0,ur.jsxs)("mesh",{ref:h,position:[0,.15,.45],children:[(0,ur.jsx)("boxGeometry",{args:[.6,.1,.05]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]}),(0,ur.jsxs)("mesh",{ref:d,position:[0,-.1,.48],children:[(0,ur.jsx)("circleGeometry",{args:[.12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]}),(0,ur.jsx)("group",{position:[0,-.5,0],children:(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.5,.6,.8,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},S))]})})]})}function nee(e){let{speaking:t,mood:n="smirking",showBlindfold:i=!0}=e;const[a,s]=(0,r.useState)(i);return(0,ur.jsxs)(b7,{camera:{position:[0,0,3],fov:45},style:{width:"100%",height:"100%"},gl:{antialias:!0},children:[(0,ur.jsx)("color",{attach:"background",args:["#F0F8FF"]}),(0,ur.jsx)("ambientLight",{intensity:.7}),(0,ur.jsx)("directionalLight",{position:[3,2,5],intensity:1.2,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,ur.jsx)("group",{position:[0,.2,0],children:(0,ur.jsx)(tee,{speaking:t,mood:n,showBlindfold:a})}),(0,ur.jsx)(eee,{position:[0,-2,0],children:(0,ur.jsx)("button",{onClick:()=>s(!a),style:{padding:"8px 16px",background:"#2C3E50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:a?"Remove Blindfold":"Wear Blindfold"})}),(0,ur.jsx)(D7,{enableZoom:!0,enablePan:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,enableDamping:!0,dampingFactor:.05})]})}function ree(e){let{speaking:t,mood:n}=e;const i=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)({t:0,closing:!1}),p=(0,r.useRef)({x:0,y:0});I9(((e,r)=>{const{mouse:c}=e;p.current.y=.25*c.x,p.current.x=.15*-c.y,i.current.rotation.y+=.3*(p.current.y-i.current.rotation.y)*r*10,i.current.rotation.x+=.3*(p.current.x-i.current.rotation.x)*r*10;const d="serious"===n?-.01:"smiling"===n?.02:0;[a.current,s.current].forEach(((e,t)=>{e&&(e.position.y=.1+d,e.position.x=0===t?-.18:.18,e.position.z=.45)})),[o.current,l.current].forEach(((e,t)=>{e&&(e.position.y=.1+d+-.008*c.y,e.position.x=(0===t?-.18:.18)+.008*c.x,e.position.z=.48)})),h.current.t-=r,h.current.t<=0&&(h.current.t=4+3*Math.random(),h.current.closing=!0);const f=a.current.scale.y,m=f+((h.current.closing?.05:1)-f)*Math.min(1,12*r);a.current.scale.y=m,s.current.scale.y=m,o.current.scale.y=m,l.current.scale.y=m,h.current.closing&&m<.1&&(h.current.closing=!1);const g=t?.15:.03,v=t?6:1.5,y=e.clock.getElapsedTime();u.current.scale.y=.1+Math.abs(Math.sin(y*v))*g,u.current.scale.x=.8+("smiling"===n?.2:"serious"===n?-.05:0)}));const f=(0,r.useMemo)((()=>({color:"#F5D0B8",roughness:.6,metalness:.1})),[]),m=(0,r.useMemo)((()=>({color:"#FFFFFF",roughness:.3})),[]),g=(0,r.useMemo)((()=>({color:"#3A3A3A",roughness:.2})),[]),v=(0,r.useMemo)((()=>({color:"#8B4513",roughness:.5})),[]),y=(0,r.useMemo)((()=>({color:"#A0522D",roughness:.7})),[]),x=(0,r.useMemo)((()=>({color:"#333333",transparent:!0,opacity:.8,metalness:.3})),[]),b=(0,r.useMemo)((()=>({color:"#4682B4",roughness:.5})),[]),w=(0,r.useMemo)((()=>({color:"#FFFFFF",roughness:.4})),[]),S=(0,r.useMemo)((()=>{const e=new G3;return e.moveTo(-.4,.3),e.lineTo(.4,.3),e.lineTo(.3,.5),e.lineTo(-.3,.5),e.lineTo(-.4,.3),new _5(e)}),[]);return(0,ur.jsxs)("group",{ref:i,children:[(0,ur.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,position:[0,.3,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.5,32,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},f))]}),(0,ur.jsxs)("mesh",{position:[0,.4,.1],children:[(0,ur.jsx)("primitive",{object:S,attach:"geometry"}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},y))]}),(0,ur.jsxs)("mesh",{ref:a,children:[(0,ur.jsx)("circleGeometry",{args:[.07,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("mesh",{ref:s,children:[(0,ur.jsx)("circleGeometry",{args:[.07,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},m))]}),(0,ur.jsxs)("mesh",{ref:o,children:[(0,ur.jsx)("circleGeometry",{args:[.035,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("mesh",{ref:l,children:[(0,ur.jsx)("circleGeometry",{args:[.035,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},g))]}),(0,ur.jsxs)("group",{ref:d,position:[0,.1,.46],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("torusGeometry",{args:[.1,.01,16,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("mesh",{position:[.2,0,0],children:[(0,ur.jsx)("torusGeometry",{args:[.1,.01,16,32]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]}),(0,ur.jsxs)("mesh",{position:[.1,0,0],children:[(0,ur.jsx)("boxGeometry",{args:[.2,.02,.01]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},x))]})]}),(0,ur.jsxs)("mesh",{position:[0,0,.5],children:[(0,ur.jsx)("sphereGeometry",{args:[.05,12,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},f))]}),(0,ur.jsxs)("mesh",{ref:u,position:[0,-.15,.48],children:[(0,ur.jsx)("circleGeometry",{args:[.1,12]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},v))]}),(0,ur.jsxs)("mesh",{position:[0,-.2,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.2,.25,.3,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},f))]}),(0,ur.jsxs)("mesh",{position:[0,-.35,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.25,.3,.1,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},w))]}),(0,ur.jsx)("group",{position:[0,-.6,0],children:(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.5,.6,.6,16]}),(0,ur.jsx)("meshStandardMaterial",(0,c.A)({},b))]})})]})}function iee(e){let{speaking:t,mood:n="neutral"}=e;return(0,ur.jsxs)(b7,{camera:{position:[0,0,3],fov:45},style:{width:"100%",height:"100%"},gl:{antialias:!0},children:[(0,ur.jsx)("color",{attach:"background",args:["#F5F5F5"]}),(0,ur.jsx)("ambientLight",{intensity:.7}),(0,ur.jsx)("directionalLight",{position:[3,2,5],intensity:1.2,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,ur.jsx)("group",{position:[0,.2,0],children:(0,ur.jsx)(ree,{speaking:t,mood:n})}),(0,ur.jsx)(D7,{enableZoom:!0,enablePan:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,enableDamping:!0,dampingFactor:.05})]})}function aee(e){let{speaking:t=!1,mood:n="neutral"}=e;const i=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useRef)(),u=(0,r.useRef)({t:0,closing:!1}),d=(0,r.useRef)({x:0,y:0}),h=(0,r.useMemo)((()=>new B5({color:"#D2B48C",roughness:.7,metalness:.1})),[]),p=(0,r.useMemo)((()=>new B5({color:"#333333",roughness:.8,metalness:.05,transparent:!0,opacity:.25})),[]),f=(0,r.useMemo)((()=>new B5({color:"#FFFFFF",roughness:.2,metalness:.05})),[]),m=(0,r.useMemo)((()=>new B5({color:"#3A2718",roughness:.1,metalness:.3})),[]),g=(0,r.useMemo)((()=>new B5({color:"#C68C53",roughness:.6,metalness:.2})),[]),v=(0,r.useMemo)((()=>new j5({color:"#222222",transmission:.6,roughness:.1,metalness:.8,clearcoat:1,clearcoatRoughness:.1,ior:1.5})),[]);I9(((e,r)=>{const{mouse:h}=e;d.current.y=PY.lerp(d.current.y,.15*h.x,.1),d.current.x=PY.lerp(d.current.x,.1*-h.y,.1),i.current.rotation.set(PY.lerp(i.current.rotation.x,d.current.x,.3),PY.lerp(i.current.rotation.y,d.current.y,.3),0);[o.current,l.current].forEach(((e,t)=>{if(!e)return;const n=0===t?-.18:.18;e.position.x=n+.015*h.x,e.position.y=.1+.015*h.y*.7})),u.current.t-=r,u.current.t<=0&&(u.current.t=2.5+3*Math.random(),u.current.closing=!0);const p=u.current.closing?.02:1,f=PY.lerp(a.current.scale.y,p,18*r);[a.current,s.current].forEach((e=>{e&&(e.scale.y=f)})),u.current.closing&&f<.1&&(u.current.closing=!1);const m="smiling"===n?.9:.8;if(t){const t=e.clock.getElapsedTime();c.current.scale.y=m+.15*Math.sin(8*t)}else c.current.scale.y=m}));const y=(0,r.useMemo)((()=>{const e=new G3;return e.moveTo(-.4,.35),e.bezierCurveTo(-.4,.4,-.2,.45,0,.45),e.bezierCurveTo(.2,.45,.4,.4,.4,.35),e.lineTo(.35,.5),e.lineTo(-.35,.5),new y5(e,{depth:.1,bevelEnabled:!1})}),[]);return(0,ur.jsxs)("group",{ref:i,children:[(0,ur.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,children:[(0,ur.jsx)("sphereGeometry",{args:[.5,64,64]}),(0,ur.jsx)("primitive",{object:h,attach:"material"})]}),(0,ur.jsxs)("mesh",{position:[0,0,.01],children:[(0,ur.jsx)("sphereGeometry",{args:[.502,64,64]}),(0,ur.jsx)("primitive",{object:p,attach:"material"})]}),(0,ur.jsxs)("group",{position:[0,.1,.45],children:[(0,ur.jsxs)("mesh",{ref:a,position:[-.18,0,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.07,32,32]}),(0,ur.jsx)("primitive",{object:f,attach:"material"})]}),(0,ur.jsxs)("mesh",{ref:s,position:[.18,0,0],children:[(0,ur.jsx)("sphereGeometry",{args:[.07,32,32]}),(0,ur.jsx)("primitive",{object:f,attach:"material"})]}),(0,ur.jsxs)("mesh",{ref:o,position:[-.18,0,.07],children:[(0,ur.jsx)("circleGeometry",{args:[.035,32]}),(0,ur.jsx)("primitive",{object:m,attach:"material"})]}),(0,ur.jsxs)("mesh",{ref:l,position:[.18,0,.07],children:[(0,ur.jsx)("circleGeometry",{args:[.035,32]}),(0,ur.jsx)("primitive",{object:m,attach:"material"})]})]}),(0,ur.jsxs)("group",{position:[0,.1,.48],children:[(0,ur.jsxs)("mesh",{rotation:[0,0,.1],children:[(0,ur.jsx)("torusGeometry",{args:[.1,.008,16,32]}),(0,ur.jsx)("primitive",{object:v,attach:"material"})]}),(0,ur.jsxs)("mesh",{rotation:[0,0,-.1],position:[.2,0,0],children:[(0,ur.jsx)("torusGeometry",{args:[.1,.008,16,32]}),(0,ur.jsx)("primitive",{object:v,attach:"material"})]}),(0,ur.jsxs)("mesh",{position:[.1,0,0],children:[(0,ur.jsx)("boxGeometry",{args:[.2,.008,.008]}),(0,ur.jsx)("primitive",{object:v,attach:"material"})]})]}),(0,ur.jsxs)("mesh",{position:[0,0,.5],children:[(0,ur.jsx)("sphereGeometry",{args:[.05,32,32]}),(0,ur.jsx)("primitive",{object:h,attach:"material"})]}),(0,ur.jsxs)("mesh",{ref:c,position:[0,-.15,.48],children:[(0,ur.jsx)("sphereGeometry",{args:[.1,32,32,0,2*Math.PI,0,.5*Math.PI]}),(0,ur.jsx)("primitive",{object:g,attach:"material"})]}),(0,ur.jsxs)("mesh",{position:[0,.45,.05],rotation:[.1,0,0],children:[(0,ur.jsx)("primitive",{object:y,attach:"geometry"}),(0,ur.jsx)("meshStandardMaterial",{color:"#2B1B0E",roughness:.8})]}),(0,ur.jsxs)("mesh",{position:[0,-.25,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.22,.25,.4,32]}),(0,ur.jsx)("primitive",{object:h,attach:"material"})]}),(0,ur.jsxs)("mesh",{position:[0,-.5,0],children:[(0,ur.jsx)("cylinderGeometry",{args:[.25,.3,.2,32]}),(0,ur.jsx)("meshStandardMaterial",{color:"#1A1A1A",roughness:.6})]}),(0,ur.jsxs)("group",{position:[0,-.7,0],children:[(0,ur.jsxs)("mesh",{children:[(0,ur.jsx)("cylinderGeometry",{args:[.55,.6,.6,32]}),(0,ur.jsx)("meshStandardMaterial",{color:"#2D2D2D",roughness:.5})]}),(0,ur.jsxs)("mesh",{position:[0,.3,.3],rotation:[.2,0,0],children:[(0,ur.jsx)("boxGeometry",{args:[.6,.02,.2]}),(0,ur.jsx)("meshStandardMaterial",{color:"#1A1A1A"})]})]})]})}function see(){const{gl:e}=D9();return(0,r.useEffect)((()=>{e.toneMapping=Bq,"outputColorSpace"in e?e.outputColorSpace=EJ:e.outputEncoding=xJ}),[e]),null}function oee(e){let{speaking:t=!1,mood:n="neutral"}=e;return(0,ur.jsxs)(b7,{shadows:!0,camera:{position:[0,0,2.5],fov:45},gl:{antialias:!0,powerPreference:"high-performance"},style:{width:"100%",height:"100%"},children:[(0,ur.jsx)(see,{}),(0,ur.jsx)("ambientLight",{intensity:.5,color:"#FFFFFF"}),(0,ur.jsx)("directionalLight",{position:[3,2,5],intensity:2,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}),(0,ur.jsx)("directionalLight",{position:[-3,1,-2],intensity:.8,color:"#AACCFF"}),(0,ur.jsx)("directionalLight",{position:[0,-1,1],intensity:.5,color:"#FFEEDD"}),(0,ur.jsx)("fog",{attach:"fog",args:["#FFFFFF",5,15]}),(0,ur.jsx)("group",{position:[0,-.3,0],children:(0,ur.jsx)(aee,{speaking:t,mood:n})}),(0,ur.jsxs)("mesh",{position:[0,0,-5],rotation:[0,0,0],children:[(0,ur.jsx)("planeGeometry",{args:[10,10]}),(0,ur.jsx)("meshStandardMaterial",{color:"#F8F8F8",roughness:.3})]}),(0,ur.jsxs)("mesh",{position:[0,-1.5,0],rotation:[-Math.PI/2,0,0],children:[(0,ur.jsx)("planeGeometry",{args:[10,10]}),(0,ur.jsx)("meshStandardMaterial",{color:"#E0E0E0",roughness:.2})]}),(0,ur.jsx)(D7,{enableZoom:!0,enablePan:!0,maxPolarAngle:.6*Math.PI,minPolarAngle:.4*Math.PI,maxDistance:5,minDistance:1.5,enableDamping:!0,dampingFactor:.05})]})}const lee=(0,r.forwardRef)((function(e,t){let{url:n,speaking:i,mood:a,onSpeakStart:s,onSpeakEnd:o}=e;const l=(0,r.useRef)(null),c=(0,r.useRef)(null);return(0,r.useEffect)((()=>{let e,t=!1;return(async()=>{try{if(!n)return;const s=await Promise.all([__webpack_require__.e(610),__webpack_require__.e(212)]).then(__webpack_require__.bind(__webpack_require__,4610)),o=(null===s||void 0===s?void 0:s.default)||(null===s||void 0===s?void 0:s.TalkingHead);if(!o)throw new Error("TalkingHead not exported");const u=l.current,d=(null===u||void 0===u?void 0:u.clientWidth)||800,h=(null===u||void 0===u?void 0:u.clientHeight)||400;try{e=new o({container:u,width:d,height:h,transparent:!0})}catch(r){try{e=new o(u)}catch(i){}}if(!e)throw new Error("Failed to create TalkingHead instance");if(c.current=e,"function"===typeof e.showAvatar?await e.showAvatar(n):"function"===typeof e.load&&await e.load(n),t)return;"function"===typeof e.lookAhead&&e.lookAhead(),a&&"function"===typeof e.setMood&&e.setMood(a)}catch(Zie){}})(),()=>{t=!0;try{const e=c.current;null!==e&&void 0!==e&&e.dispose&&e.dispose(),c.current=null}catch(e){}}}),[n,a]),(0,r.useEffect)((()=>{try{const e=c.current;e&&"function"===typeof e.setMood&&a&&e.setMood(a)}catch(e){}}),[a]),(0,r.useEffect)((()=>{try{const e=c.current;if(!e)return;i&&"function"===typeof e.speakingStart&&e.speakingStart(),i||"function"!==typeof e.speakingStop||e.speakingStop()}catch(e){}}),[i]),(0,r.useImperativeHandle)(t,(()=>({async speakText(e){const t=c.current;if(t&&e)try{if(s&&s(),"function"===typeof t.speakText){const n=t.speakText(e);if(n&&"function"===typeof n.then)await n;else{const t=Math.max(1,e.split(/\s+/).length/2.5);await new Promise((e=>setTimeout(e,1e3*t)))}}else{"function"===typeof t.speakingStart&&t.speakingStart();const n=Math.max(1,e.split(/\s+/).length/2.5);await new Promise((e=>setTimeout(e,1e3*n))),"function"===typeof t.speakingStop&&t.speakingStop()}}finally{o&&o()}},stop(){const e=c.current;try{null!==e&&void 0!==e&&e.stop&&e.stop()}catch(t){}try{null!==e&&void 0!==e&&e.speakingStop&&e.speakingStop()}catch(n){}o&&o()}})),[s,o]),(0,ur.jsx)("div",{ref:l,style:{width:"100%",height:"100%"}})})),cee=lee,uee=new WeakMap;class dee extends d4{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new f4(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(const o in t.attributeTypes){const e=t.attributeTypes[o];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=e.name)}const n=JSON.stringify(t);if(uee.has(e)){const t=uee.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,a=e.byteLength,s=this._getWorker(i,a).then((n=>(r=n,new Promise(((n,a)=>{r._callbacks[i]={resolve:n,reject:a},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return s.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),uee.set(e,{key:n,promise:s}),s}_createGeometry(e){const t=new iQ;e.index&&t.setIndex(new zZ(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,a=r.array,s=r.itemSize;t.setAttribute(i,new zZ(a,s))}return t}_loadLibrary(e,t){const n=new f4(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=hee.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function hee(){let e,t;function n(e,t,n,r,i,a){const s=a.num_components(),o=n.num_points()*s,l=o*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,c,l,u);const d=new i(e.HEAPF32.buffer,u,o).slice();return e._free(u),{name:r,array:d,itemSize:s}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=i.buffer,a=i.taskConfig;t.then((e=>{const t=e.draco,s=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(r),r.byteLength);try{const e=function(e,t,r,i){const a=i.attributeIDs,s=i.attributeTypes;let o,l;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,l=t.DecodeBufferToMesh(r,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,l=t.DecodeBufferToPointCloud(r,o)}if(!l.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const d in a){const r=self[s[d]];let l,c;if(i.useUniqueIDs)c=a[d],l=t.GetAttributeByUniqueId(o,c);else{if(c=t.GetAttributeId(o,e[a[d]]),-1===c)continue;l=t.GetAttribute(o,c)}u.attributes.push(n(e,t,o,d,r,l))}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const r=n.num_faces(),i=3*r,a=4*i,s=e._malloc(a);t.GetTrianglesUInt32Array(n,a,s);const o=new Uint32Array(e.HEAPF32.buffer,s,i).slice();return e._free(s),{array:o,itemSize:1}}(e,t,o));return e.destroy(o),u}(t,s,o,a),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(l){console.error(l),self.postMessage({type:"error",id:i.id,error:l.message})}finally{t.destroy(o),t.destroy(s)}}))}}}let pee;const fee=()=>{if(pee)return pee;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const i=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const r=e.charCodeAt(t);n[t]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}(r),{}).then((e=>{n=e.instance,n.exports.__wasm_call_ctors()}));function a(e,t,r,i,a,s){const o=n.exports.sbrk,l=r+3&-4,c=o(l*i),u=o(a.length),d=new Uint8Array(n.exports.memory.buffer);d.set(a,u);const h=e(c,r,i,u,a.length);if(0===h&&s&&s(c,l,i),t.set(d.subarray(c,c+r*i)),o(c-o(0)),0!==h)throw new Error("Malformed buffer data: ".concat(h))}const s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},o={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return pee={ready:i,supported:!0,decodeVertexBuffer(e,t,r,i,o){a(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[s[o]])},decodeIndexBuffer(e,t,r,i){a(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence(e,t,r,i){a(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer(e,t,r,i,l,c){a(n.exports[o[l]],e,t,r,i,n.exports[s[c]])}},pee};function mee(e,t){if(t===mJ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===vJ||t===gJ){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(n)if(t===vJ)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2===0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(i),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const gee=(()=>parseInt(DW.replace(/\D+/g,"")))();function vee(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(Zie){return t}}const yee="srgb",xee="srgb-linear";class bee extends d4{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Cee(e)})),this.register((function(e){return new Mee(e)})),this.register((function(e){return new Fee(e)})),this.register((function(e){return new Lee(e)})),this.register((function(e){return new Oee(e)})),this.register((function(e){return new kee(e)})),this.register((function(e){return new Pee(e)})),this.register((function(e){return new Ree(e)})),this.register((function(e){return new Dee(e)})),this.register((function(e){return new Eee(e)})),this.register((function(e){return new Iee(e)})),this.register((function(e){return new Tee(e)})),this.register((function(e){return new jee(e)})),this.register((function(e){return new Bee(e)})),this.register((function(e){return new _ee(e)})),this.register((function(e){return new Nee(e)})),this.register((function(e){return new zee(e)}))}load(e,t,n,r){const i=this;let a;if(""!==this.resourcePath)a=this.resourcePath;else if(""!==this.path){const t=U4.extractUrlBase(e);a=U4.resolveURL(t,this.path)}else a=U4.extractUrlBase(e);this.manager.itemStart(e);const s=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},o=new f4(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),s)}catch(Zie){s(Zie)}}),n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const a={},s={};if("string"===typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(vee(new Uint8Array(e.slice(0,4)))===Uee){try{a[See.KHR_BINARY_GLTF]=new Vee(e)}catch(l){return void(r&&r(l))}i=JSON.parse(a[See.KHR_BINARY_GLTF].content)}else i=JSON.parse(vee(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const o=new gte(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});o.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const e=this.pluginCallbacks[c](o);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[e.name]=e,a[e.name]=!0}if(i.extensionsUsed)for(let c=0;c<i.extensionsUsed.length;++c){const e=i.extensionsUsed[c],t=i.extensionsRequired||[];switch(e){case See.KHR_MATERIALS_UNLIT:a[e]=new Aee;break;case See.KHR_DRACO_MESH_COMPRESSION:a[e]=new Wee(i,this.dracoLoader);break;case See.KHR_TEXTURE_TRANSFORM:a[e]=new qee;break;case See.KHR_MESH_QUANTIZATION:a[e]=new Xee;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}o.setExtensions(a),o.setPlugins(s),o.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function wee(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const See={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class _ee{constructor(e){this.parser=e,this.name=See.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let s;const o=new TZ(16777215);void 0!==a.color&&o.setRGB(a.color[0],a.color[1],a.color[2],xee);const l=void 0!==a.range?a.range:0;switch(a.type){case"directional":s=new j4(o),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new I4(o),s.distance=l;break;case"spot":s=new T4(o),s.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,s.angle=a.spot.outerConeAngle,s.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return s.position.set(0,0,0),s.decay=2,ute(s,a),void 0!==a.intensity&&(s.intensity=a.intensity),s.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(s),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class Aee{constructor(){this.name=See.KHR_MATERIALS_UNLIT}getMaterialType(){return DZ}extendParams(e,t,n){const r=[];e.color=new TZ(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],xee),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,yee))}return Promise.all(r)}}class Eee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class Cee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new RY(e,e)}return Promise.all(i)}}class Mee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class Tee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class kee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new TZ(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(void 0!==a.sheenColorFactor){const e=a.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],xee)}return void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,yee)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}class Pee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class Ree{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const s=a.attenuationColor||[1,1,1];return t.attenuationColor=(new TZ).setRGB(s[0],s[1],s[2],xee),Promise.all(i)}}class Dee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class Iee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return t.specularColor=(new TZ).setRGB(s[0],s[1],s[2],xee),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,yee)),Promise.all(i)}}class Bee{constructor(e){this.parser=e,this.name=See.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return t.bumpScale=void 0!==a.bumpFactor?a.bumpFactor:1,void 0!==a.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(i)}}class jee{constructor(e){this.parser=e,this.name=See.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?j5:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}class Fee{constructor(e){this.parser=e,this.name=See.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}class Lee{constructor(e){this.parser=e,this.name=See.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],s=r.images[a.source];let o=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(o=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Oee{constructor(e){this.parser=e,this.name=See.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],s=r.images[a.source];let o=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(o=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Nee{constructor(e){this.name=See.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,a=e.count,s=e.byteStride,o=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(a,s,o,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(a*s);return i.decodeGltfBuffer(new Uint8Array(t),a,s,o,e.mode,e.filter),t}))}))}return null}}class zee{constructor(e){this.name=See.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const o of r.primitives)if(o.mode!==Zee.TRIANGLES&&o.mode!==Zee.TRIANGLE_STRIP&&o.mode!==Zee.TRIANGLE_FAN&&void 0!==o.mode)return null;const i=n.extensions[this.name].attributes,a=[],s={};for(const o in i)a.push(this.parser.getDependency("accessor",i[o]).then((e=>(s[o]=e,s[o]))));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(const a of n){const e=new zK,t=new uK,n=new cK,o=new uK(1,1,1),l=new w2(a.geometry,a.material,r);for(let i=0;i<r;i++)s.TRANSLATION&&t.fromBufferAttribute(s.TRANSLATION,i),s.ROTATION&&n.fromBufferAttribute(s.ROTATION,i),s.SCALE&&o.fromBufferAttribute(s.SCALE,i),l.setMatrixAt(i,e.compose(t,n,o));for(const r in s)if("_COLOR_0"===r){const e=s[r];l.instanceColor=new p2(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==r&&"ROTATION"!==r&&"SCALE"!==r&&a.geometry.setAttribute(r,s[r]);dZ.prototype.copy.call(l,a),this.parser.assignFinalMaterial(l),i.push(l)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]})))}}const Uee="glTF",Hee=1313821514,Gee=5130562;class Vee{constructor(e){this.name=See.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:vee(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Uee)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===Hee){const n=new Uint8Array(e,12+i,t);this.content=vee(n)}else if(n===Gee){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Wee{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=See.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},l={};for(const c in a){const e=nte[c]||c.toLowerCase();s[e]=a[c]}for(const c in e.attributes){const t=nte[c]||c.toLowerCase();if(void 0!==a[c]){const r=n.accessors[e.attributes[c]],i=Qee[r.componentType];l[t]=i.name,o[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t,n){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=o[t];void 0!==r&&(n.normalized=r)}t(e)}),s,l,xee,n)}))}))}}class qee{constructor(){this.name=See.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class Xee{constructor(){this.name=See.KHR_MESH_QUANTIZATION}}class Jee extends J5{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let a=0;a!==r;a++)t[a]=n[i+a];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,c=r-t,u=(n-t)/c,d=u*u,h=d*u,p=e*l,f=p-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+u;for(let x=0;x!==s;x++){const e=a[f+x+s],t=a[f+x+o]*c,n=a[p+x+s],r=a[p+x]*c;i[x]=v*e+y*t+m*n+g*r}return i}}const Yee=new cK;class Kee extends Jee{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return Yee.fromArray(i).normalize().toArray(i),i}}const Zee={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Qee={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$ee={9728:Jq,9729:$q,9984:Yq,9985:eX,9986:Zq,9987:nX},ete={33071:qq,33648:Xq,10497:Wq},tte={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nte=(0,c.A)((0,c.A)({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},gee>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{},{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),rte={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ite={CUBICSPLINE:void 0,LINEAR:lJ,STEP:oJ},ate="OPAQUE",ste="MASK",ote="BLEND";function lte(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new B5({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:GW})),e.DefaultMaterial}function cte(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function ute(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function dte(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function hte(e){let t;const n=e.extensions&&e.extensions[See.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+pte(n.attributes):e.indices+":"+pte(e.attributes)+":"+e.mode,void 0!==e.targets)for(let r=0,i=e.targets.length;r<i;r++)t+=":"+pte(e.targets[r]);return t}function pte(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function fte(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const mte=new zK;class gte{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new wee,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||r&&i<98?this.textureLoader=new b4(this.options.manager):this.textureLoader=new J4(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new f4(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return cte(i,a,r),ute(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){for(const e of a.scenes)e.updateMatrixWorld();e(a)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,a]of e.children.entries())i(a,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[See.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(U4.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=tte[r.type],t=Qee[r.componentType],n=!0===r.normalized,i=new t(r.count*e);return Promise.resolve(new zZ(i,e,n))}const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],a=tte[r.type],s=Qee[r.componentType],o=s.BYTES_PER_ELEMENT,l=o*a,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;let h,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(h=new s(i,e*u,r.count*u/o),l=new P1(h,u/o),t.cache.add(n,l)),p=new D1(l,a,c%u/o,d)}else h=null===i?new s(r.count*a):new s(i,c,r.count*a),p=new zZ(h,a,d);if(void 0!==r.sparse){const t=tte.SCALAR,n=Qee[r.sparse.indices.componentType],o=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],o,r.sparse.count*t),u=new s(e[2],l,r.sparse.count*a);null!==i&&(p=new zZ(p.array.slice(),p.itemSize,p.normalized));for(let e=0,r=c.length;e<r;e++){const t=c[e];if(p.setX(t,u[e*a]),a>=2&&p.setY(t,u[e*a+1]),a>=3&&p.setZ(t,u[e*a+2]),a>=4&&p.setW(t,u[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let a=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(a=e)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,n){const r=this,i=this.json,a=i.textures[e],s=i.images[t],o=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||s.name||"",""===t.name&&"string"===typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);const n=(i.samplers||{})[a.sampler]||{};return t.magFilter=$ee[n.magFilter]||$q,t.minFilter=$ee[n.minFilter]||nX,t.wrapS=ete[n.wrapS]||Wq,t.wrapT=ete[n.wrapT]||Wq,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[o]=l,l}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const a=r.images[e],s=self.URL||self.webkitURL;let o=a.uri||"",l=!1;if(void 0!==a.bufferView)o=n.getDependency("bufferView",a.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:a.mimeType});return o=s.createObjectURL(t),o}));else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(o).then((function(e){return new Promise((function(n,r){let a=n;!0===t.isImageBitmapLoader&&(a=function(e){const t=new eK(e);t.needsUpdate=!0,n(t)}),t.load(U4.resolveURL(e,i.path),a,void 0,r)}))})).then((function(e){var t;return!0===l&&s.revokeObjectURL(o),ute(e,a),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[See.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[See.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(a);a=i.extensions[See.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),i.associations.set(a,t)}}return void 0!==r&&("number"===typeof r&&(r=3001===r?yee:xee),"colorSpace"in a?a.colorSpace=r:a.encoding=r===yee?3001:3e3),e[t]=a,a}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new K2,RZ.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new N2,RZ.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||a){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),a&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return B5}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let a;const s={},o=[];if((i.extensions||{})[See.KHR_MATERIALS_UNLIT]){const e=r[See.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),o.push(e.extendParams(s,i,t))}else{const n=i.pbrMetallicRoughness||{};if(s.color=new TZ(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],xee),s.opacity=e[3]}void 0!==n.baseColorTexture&&o.push(t.assignTexture(s,"map",n.baseColorTexture,yee)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),o.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),o.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===i.doubleSided&&(s.side=WW);const l=i.alphaMode||ate;if(l===ote?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===ste&&(s.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&a!==DZ&&(o.push(t.assignTexture(s,"normalMap",i.normalTexture)),s.normalScale=new RY(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==i.occlusionTexture&&a!==DZ&&(o.push(t.assignTexture(s,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(s.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&a!==DZ){const e=i.emissiveFactor;s.emissive=(new TZ).setRGB(e[0],e[1],e[2],xee)}return void 0!==i.emissiveTexture&&a!==DZ&&o.push(t.assignTexture(s,"emissiveMap",i.emissiveTexture,yee)),Promise.all(o).then((function(){const n=new a(s);return i.name&&(n.name=i.name),ute(n,i),t.associations.set(n,{materials:e}),i.extensions&&cte(r,n,i),n}))}createUniqueName(e){const t=_6.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[See.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return vte(n,e,t)}))}const a=[];for(let s=0,o=e.length;s<o;s++){const n=e[s],o=hte(n),l=r[o];if(l)a.push(l.promise);else{let e;e=n.extensions&&n.extensions[See.KHR_DRACO_MESH_COMPRESSION]?i(n):vte(new iQ,n,t),r[o]={primitive:n,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,s=[];for(let o=0,l=a.length;o<l;o++){const e=void 0===a[o].material?lte(this.cache):this.getDependency("material",a[o].material);s.push(e)}return s.push(t.loadGeometries(a)),Promise.all(s).then((function(n){const s=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let u=0,d=o.length;u<d;u++){const n=o[u],c=a[u];let d;const h=s[u];if(c.mode===Zee.TRIANGLES||c.mode===Zee.TRIANGLE_STRIP||c.mode===Zee.TRIANGLE_FAN||void 0===c.mode)d=!0===i.isSkinnedMesh?new o2(n,h):new SQ(n,h),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),c.mode===Zee.TRIANGLE_STRIP?d.geometry=mee(d.geometry,gJ):c.mode===Zee.TRIANGLE_FAN&&(d.geometry=mee(d.geometry,vJ));else if(c.mode===Zee.LINES)d=new J2(n,h);else if(c.mode===Zee.LINE_STRIP)d=new W2(n,h);else if(c.mode===Zee.LINE_LOOP)d=new Y2(n,h);else{if(c.mode!==Zee.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);d=new t3(n,h)}Object.keys(d.geometry.morphAttributes).length>0&&dte(d,i),d.name=t.createUniqueName(i.name||"mesh_"+e),ute(d,i),c.extensions&&cte(r,d,c),t.assignFinalMaterial(d),l.push(d)}for(let r=0,i=l.length;r<i;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return i.extensions&&cte(r,l[0],i),l[0];const c=new x1;i.extensions&&cte(r,c,i),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new RQ(PY.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new n$(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ute(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),r=e,i=[],a=[];for(let s=0,o=r.length;s<o;s++){const e=r[s];if(e){i.push(e);const t=new zK;null!==n&&t.fromArray(n.array,16*s),a.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}return new h2(i,a)}))}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,a=[],s=[],o=[],l=[],c=[];for(let u=0,d=r.channels.length;u<d;u++){const e=r.channels[u],t=r.samplers[e.sampler],n=e.target,i=n.node,d=void 0!==r.parameters?r.parameters[t.input]:t.input,h=void 0!==r.parameters?r.parameters[t.output]:t.output;void 0!==n.node&&(a.push(this.getDependency("node",i)),s.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",h)),l.push(t),c.push(n))}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(o),Promise.all(l),Promise.all(c)]).then((function(e){const t=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=[];for(let i=0,c=t.length;i<c;i++){const e=t[i],c=r[i],u=a[i],d=s[i],h=o[i];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=n._createAnimationTracks(e,c,u,d,h);if(p)for(let t=0;t<p.length;t++)l.push(p[t])}return new s4(i,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],a=n.children||[];for(let o=0,l=a.length;o<l;o++)i.push(t.getDependency("node",a[o]));const s=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),s]).then((function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,mte)}));for(let i=0,a=n.length;i<a;i++)t.add(n[i]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",s=[],o=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return o&&s.push(o),void 0!==i.camera&&s.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){s.push(e)})),this.nodeCache[e]=Promise.all(s).then((function(t){let s;if(s=!0===i.isBone?new l2:t.length>1?new x1:1===t.length?t[0]:new dZ,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(i.name&&(s.userData.name=i.name,s.name=a),ute(s,i),i.extensions&&cte(n,s,i),void 0!==i.matrix){const e=new zK;e.fromArray(i.matrix),s.applyMatrix4(e)}else void 0!==i.translation&&s.position.fromArray(i.translation),void 0!==i.rotation&&s.quaternion.fromArray(i.rotation),void 0!==i.scale&&s.scale.fromArray(i.scale);return r.associations.has(s)||r.associations.set(s,{}),r.associations.get(s).nodes=e,s})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new x1;n.name&&(i.name=r.createUniqueName(n.name)),ute(i,n),n.extensions&&cte(t,i,n);const a=n.nodes||[],s=[];for(let o=0,l=a.length;o<l;o++)s.push(r.getDependency("node",a[o]));return Promise.all(s).then((function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{const t=new Map;for(const[n,i]of r.associations)(n instanceof RZ||n instanceof eK)&&t.set(n,i);return e.traverse((e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)})),t})(i),i}))}_createAnimationTracks(e,t,n,r,i){const a=[],s=e.name?e.name:e.uuid,o=[];let l;switch(rte[i.path]===rte.weights?e.traverse((function(e){e.morphTargetInfluences&&o.push(e.name?e.name:e.uuid)})):o.push(s),rte[i.path]){case rte.weights:l=t4;break;case rte.rotation:l=r4;break;case rte.position:case rte.scale:l=a4;break;default:if(1===n.itemSize)l=t4;else l=a4}const c=void 0!==r.interpolation?ite[r.interpolation]:lJ,u=this._getArrayFromAccessor(n);for(let d=0,h=o.length;d<h;d++){const e=new l(o[d]+"."+rte[i.path],t.array,u,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(e),a.push(e)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=fte(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof r4?Kee:Jee)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function vte(e,t,n){const r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const s in r){const t=nte[s]||s.toLowerCase();t in e.attributes||i.push(a(r[s],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return ute(e,t),function(e,t,n){const r=t.attributes,i=new pK;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new uK(t[0],t[1],t[2]),new uK(a[0],a[1],a[2])),e.normalized){const t=fte(Qee[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new uK,t=new uK;for(let r=0,i=a.length;r<i;r++){const i=a[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],a=r.min,s=r.max;if(void 0!==a&&void 0!==s){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),r.normalized){const e=fte(Qee[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const s=new RK;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,a=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);const s=[],o=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;s.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;o.push(t)}if(a){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then((function(t){const n=t[0],s=t[1],o=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=s),a&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}let yte=null,xte="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function bte(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return r=>{n&&n(r),e&&(yte||(yte=new dee),yte.setDecoderPath("string"===typeof e?e:xte),r.setDRACOLoader(yte)),t&&r.setMeshoptDecoder(fee())}}const wte=(e,t,n,r)=>F9(bee,e,bte(t,n,r));wte.preload=(e,t,n,r)=>F9.preload(bee,e,bte(t,n,r)),wte.clear=e=>F9.clear(bee,e),wte.setDecoderPath=e=>{xte=e};var Ste=function(e){return e[e.NONE=0]="NONE",e[e.START=1]="START",e[e.ACTIVE=2]="ACTIVE",e}(Ste||{});const _te=e=>e&&e.isOrthographicCamera,Ate=e=>e&&e.isBox3,Ete=e=>1-Math.exp(-5*e)+.007*e,Cte=r.createContext(null);function Mte(e){let{children:t,maxDuration:n=1,margin:i=1.2,observe:a,fit:s,clip:o,interpolateFunc:l=Ete,onFit:c}=e;const u=r.useRef(null),{camera:d,size:h,invalidate:p}=D9(),f=D9((e=>e.controls)),m=r.useRef(c);m.current=c;const g=r.useRef({camPos:new uK,camRot:new cK,camZoom:1}),v=r.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),y=r.useRef(Ste.NONE),x=r.useRef(0),[b]=r.useState((()=>new pK)),w=r.useMemo((()=>{function e(){const e=b.getSize(new uK),t=b.getCenter(new uK),n=Math.max(e.x,e.y,e.z),r=_te(d)?4*n:n/(2*Math.atan(Math.PI*d.fov/360)),a=_te(d)?4*n:r/d.aspect,s=i*Math.max(r,a);return{box:b,size:e,center:t,distance:s}}return{getSize:e,refresh(e){if(Ate(e))b.copy(e);else{const t=e||u.current;if(!t)return this;t.updateWorldMatrix(!0,!0),b.setFromObject(t)}if(b.isEmpty()){const e=d.position.length()||10;b.setFromCenterAndSize(new uK,new uK(e,e,e))}return g.current.camPos.copy(d.position),g.current.camRot.copy(d.quaternion),_te(d)&&(g.current.camZoom=d.zoom),v.current.camPos=void 0,v.current.camRot=void 0,v.current.camZoom=void 0,v.current.camUp=void 0,v.current.target=void 0,this},reset(){const{center:t,distance:n}=e(),r=d.position.clone().sub(t).normalize();v.current.camPos=t.clone().addScaledVector(r,n),v.current.target=t.clone();const i=(new zK).lookAt(v.current.camPos,v.current.target,d.up);return v.current.camRot=(new cK).setFromRotationMatrix(i),y.current=Ste.START,x.current=0,this},moveTo(e){return v.current.camPos=Array.isArray(e)?new uK(...e):e.clone(),y.current=Ste.START,x.current=0,this},lookAt(e){let{target:t,up:n}=e;v.current.target=Array.isArray(t)?new uK(...t):t.clone(),v.current.camUp=n?Array.isArray(n)?new uK(...n):n.clone():d.up.clone();const r=(new zK).lookAt(v.current.camPos||d.position,v.current.target,v.current.camUp);return v.current.camRot=(new cK).setFromRotationMatrix(r),y.current=Ste.START,x.current=0,this},to(e){let{position:t,target:n}=e;return this.moveTo(t).lookAt({target:n})},fit(){if(!_te(d))return this.reset();let e=0,t=0;const n=[new uK(b.min.x,b.min.y,b.min.z),new uK(b.min.x,b.max.y,b.min.z),new uK(b.min.x,b.min.y,b.max.z),new uK(b.min.x,b.max.y,b.max.z),new uK(b.max.x,b.max.y,b.max.z),new uK(b.max.x,b.max.y,b.min.z),new uK(b.max.x,b.min.y,b.max.z),new uK(b.max.x,b.min.y,b.min.z)],r=v.current.camPos||d.position,a=v.current.target||(null==f?void 0:f.target),s=v.current.camUp||d.up,o=a?(new zK).lookAt(r,a,s).setPosition(r).invert():d.matrixWorldInverse;for(const i of n)i.applyMatrix4(o),e=Math.max(e,Math.abs(i.y)),t=Math.max(t,Math.abs(i.x));e*=2,t*=2;const l=(d.top-d.bottom)/e,c=(d.right-d.left)/t;return v.current.camZoom=Math.min(l,c)/i,y.current=Ste.START,x.current=0,m.current&&m.current(this.getSize()),this},clip(){const{distance:t}=e();return d.near=t/100,d.far=100*t,d.updateProjectionMatrix(),f&&(f.maxDistance=10*t,f.update()),p(),this}}}),[b,d,f,i,p]);r.useLayoutEffect((()=>{if(f){const e=()=>{if(f&&v.current.target&&y.current!==Ste.NONE){const e=(new uK).setFromMatrixColumn(d.matrix,2),t=g.current.camPos.distanceTo(f.target),n=(v.current.camPos||g.current.camPos).distanceTo(v.current.target),r=(1-x.current)*t+x.current*n;f.target.copy(d.position).addScaledVector(e,-r),f.update()}y.current=Ste.NONE};return f.addEventListener("start",e),()=>f.removeEventListener("start",e)}}),[f]);const S=r.useRef(0);return r.useLayoutEffect((()=>{(a||0===S.current++)&&(w.refresh(),s&&w.reset().fit(),o&&w.clip())}),[h,o,s,a,d,f]),I9(((e,t)=>{if(y.current===Ste.START)y.current=Ste.ACTIVE,p();else if(y.current===Ste.ACTIVE){if(x.current+=t/n,x.current>=1)v.current.camPos&&d.position.copy(v.current.camPos),v.current.camRot&&d.quaternion.copy(v.current.camRot),v.current.camUp&&d.up.copy(v.current.camUp),v.current.camZoom&&_te(d)&&(d.zoom=v.current.camZoom),d.updateMatrixWorld(),d.updateProjectionMatrix(),f&&v.current.target&&(f.target.copy(v.current.target),f.update()),y.current=Ste.NONE;else{const e=l(x.current);v.current.camPos&&d.position.lerpVectors(g.current.camPos,v.current.camPos,e),v.current.camRot&&d.quaternion.slerpQuaternions(g.current.camRot,v.current.camRot,e),v.current.camUp&&d.up.set(0,1,0).applyQuaternion(d.quaternion),v.current.camZoom&&_te(d)&&(d.zoom=(1-e)*g.current.camZoom+e*v.current.camZoom),d.updateMatrixWorld(),d.updateProjectionMatrix()}p()}})),r.createElement("group",{ref:u},r.createElement(Cte.Provider,{value:w},t))}const Tte=["children","disable","disableX","disableY","disableZ","left","right","top","bottom","front","back","onCentered","precise","cacheKey"],kte=r.forwardRef((function(e,t){let{children:n,disable:i,disableX:a,disableY:s,disableZ:o,left:l,right:c,top:u,bottom:d,front:h,back:p,onCentered:f,precise:m=!0,cacheKey:g=0}=e,v=y(e,Tte);const x=r.useRef(null),b=r.useRef(null),w=r.useRef(null);return r.useLayoutEffect((()=>{b.current.matrixWorld.identity();const e=(new pK).setFromObject(w.current,m),t=new uK,n=new RK,r=e.max.x-e.min.x,g=e.max.y-e.min.y,v=e.max.z-e.min.z;e.getCenter(t),e.getBoundingSphere(n);const y=u?g/2:d?-g/2:0,S=l?-r/2:c?r/2:0,_=h?v/2:p?-v/2:0;b.current.position.set(i||a?0:-t.x+S,i||s?0:-t.y+y,i||o?0:-t.z+_),"undefined"!==typeof f&&f({parent:x.current.parent,container:x.current,width:r,height:g,depth:v,boundingBox:e,boundingSphere:n,center:t,verticalAlignment:y,horizontalAlignment:S,depthAlignment:_})}),[g,f,u,l,h,i,a,s,o,m,c,d,p]),r.useImperativeHandle(t,(()=>x.current),[]),r.createElement("group",wt({ref:x},v),r.createElement("group",{ref:b},r.createElement("group",{ref:w},n)))}));class Pte extends SQ{constructor(e,t){var n,r;const i=(e=>e&&e.isCubeTexture)(e),a=(null!=(r=i?null==(n=e.image[0])?void 0:n.width:e.image.width)?r:1024)/4,s=Math.floor(Math.log2(a)),o=Math.pow(2,s),l=3*Math.max(o,112),c=4*o,u=[i?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/l),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/c),"#define CUBEUV_MAX_MIP ".concat(s,".0")].join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <".concat(gee>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n        "),d={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}};super(new b5(1,16),new kQ({uniforms:d,fragmentShader:u,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:WW}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class Rte extends x4{constructor(e){super(e),this.type=dX}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let r=e.pos,i=-1,a=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=o.indexOf("\n"))&&a<t&&r<e.byteLength;)s+=o,a+=o.length,r+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=a+i+1),s+o.slice(0,i))},r=function(e,t,n,r){const i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*a,n[r+1]=e[t+1]*a,n[r+2]=e[t+2]*a,n[r+3]=1},i=function(e,t,n,r){const i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=LZ.toHalfFloat(Math.min(e[t+0]*a,65504)),n[r+1]=LZ.toHalfFloat(Math.min(e[t+1]*a,65504)),n[r+2]=LZ.toHalfFloat(Math.min(e[t+2]*a,65504)),n[r+3]=LZ.toHalfFloat(1)},a=new Uint8Array(e);a.pos=0;const s=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,o={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=n(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),o.valid|=1,o.programtype=c[1],o.string+=l+"\n";l=n(e),!1!==l;)if(o.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(r))&&(o.gamma=parseFloat(c[1])),(c=l.match(i))&&(o.exposure=parseFloat(c[1])),(c=l.match(a))&&(o.valid|=2,o.format=c[1]),(c=l.match(s))&&(o.valid|=4,o.height=parseInt(c[1],10),o.width=parseInt(c[2],10)),2&o.valid&&4&o.valid)break}else o.comments+=l+"\n";return 2&o.valid||t(3,"missing format specifier"),4&o.valid||t(3,"missing image size specifier"),o}(a),o=s.width,l=s.height,c=function(e,n,r){const i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);i!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const a=new Uint8Array(4*n*r);a.length||t(4,"unable to allocate buffer space");let s=0,o=0;const l=4*i,c=new Uint8Array(4),u=new Uint8Array(l);let d=r;for(;d>0&&o<e.byteLength;){o+4>e.byteLength&&t(1),c[0]=e[o++],c[1]=e[o++],c[2]=e[o++],c[3]=e[o++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==i||t(3,"bad rgbe scanline format");let n,r=0;for(;r<l&&o<e.byteLength;){n=e[o++];const i=n>128;if(i&&(n-=128),(0===n||r+n>l)&&t(3,"bad scanline data"),i){const t=e[o++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(o,o+n),r),r+=n,o+=n}const h=i;for(let e=0;e<h;e++){let t=0;a[s]=u[e+t],t+=i,a[s+1]=u[e+t],t+=i,a[s+2]=u[e+t],t+=i,a[s+3]=u[e+t],s+=4}d--}return a}(a.subarray(a.pos),o,l);let u,d,h;switch(this.type){case uX:h=c.length/4;const e=new Float32Array(4*h);for(let n=0;n<h;n++)r(c,4*n,e,4*n);u=e,d=uX;break;case dX:h=c.length/4;const t=new Uint16Array(4*h);for(let n=0;n<h;n++)i(c,4*n,t,4*n);u=t,d=dX;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:o,height:l,data:u,header:s.string,gamma:s.gamma,exposure:s.exposure,type:d}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){switch(e.type){case uX:case dX:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=$q,e.magFilter=$q,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,r)}}var Dte=Uint8Array,Ite=Uint16Array,Bte=Uint32Array,jte=new Dte([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fte=new Dte([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Lte=new Dte([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ote=function(e,t){for(var n=new Ite(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Bte(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},Nte=Ote(jte,2),zte=Nte[0],Ute=Nte[1];zte[28]=258,Ute[258]=28;for(var Hte=Ote(Fte,0),Gte=Hte[0],Vte=(Hte[1],new Ite(32768)),Wte=0;Wte<32768;++Wte){var qte=(43690&Wte)>>>1|(21845&Wte)<<1;qte=(61680&(qte=(52428&qte)>>>2|(13107&qte)<<2))>>>4|(3855&qte)<<4,Vte[Wte]=((65280&qte)>>>8|(255&qte)<<8)>>>1}var Xte=function(e,t,n){for(var r=e.length,i=0,a=new Ite(t);i<r;++i)++a[e[i]-1];var s,o=new Ite(t);for(i=0;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;if(n){s=new Ite(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],d=o[e[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)s[Vte[d]>>>l]=c}else for(s=new Ite(r),i=0;i<r;++i)e[i]&&(s[i]=Vte[o[e[i]-1]++]>>>15-e[i]);return s},Jte=new Dte(288);for(Wte=0;Wte<144;++Wte)Jte[Wte]=8;for(Wte=144;Wte<256;++Wte)Jte[Wte]=9;for(Wte=256;Wte<280;++Wte)Jte[Wte]=7;for(Wte=280;Wte<288;++Wte)Jte[Wte]=8;var Yte=new Dte(32);for(Wte=0;Wte<32;++Wte)Yte[Wte]=5;var Kte=Xte(Jte,9,1),Zte=Xte(Yte,5,1),Qte=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},$te=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},ene=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},tne=function(e){return(e/8|0)+(7&e&&1)},nne=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof Ite?Ite:e instanceof Bte?Bte:Dte)(n-t);return r.set(e.subarray(t,n)),r},rne=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new Dte(0);var i=!t||n,a=!n||n.i;n||(n={}),t||(t=new Dte(3*r));var s=function(e){var n=t.length;if(e>n){var r=new Dte(Math.max(2*n,e));r.set(t),t=r}},o=n.f||0,l=n.p||0,c=n.b||0,u=n.l,d=n.d,h=n.m,p=n.n,f=8*r;do{if(!u){n.f=o=$te(e,l,1);var m=$te(e,l+1,3);if(l+=3,!m){var g=e[(M=tne(l)+4)-4]|e[M-3]<<8,v=M+g;if(v>r){if(a)throw"unexpected EOF";break}i&&s(c+g),t.set(e.subarray(M,v),c),n.b=c+=g,n.p=l=8*v;continue}if(1==m)u=Kte,d=Zte,h=9,p=5;else{if(2!=m)throw"invalid block type";var y=$te(e,l,31)+257,x=$te(e,l+10,15)+4,b=y+$te(e,l+5,31)+1;l+=14;for(var w=new Dte(b),S=new Dte(19),_=0;_<x;++_)S[Lte[_]]=$te(e,l+3*_,7);l+=3*x;var A=Qte(S),E=(1<<A)-1,C=Xte(S,A,1);for(_=0;_<b;){var M,T=C[$te(e,l,E)];if(l+=15&T,(M=T>>>4)<16)w[_++]=M;else{var k=0,P=0;for(16==M?(P=3+$te(e,l,3),l+=2,k=w[_-1]):17==M?(P=3+$te(e,l,7),l+=3):18==M&&(P=11+$te(e,l,127),l+=7);P--;)w[_++]=k}}var R=w.subarray(0,y),D=w.subarray(y);h=Qte(R),p=Qte(D),u=Xte(R,h,1),d=Xte(D,p,1)}if(l>f){if(a)throw"unexpected EOF";break}}i&&s(c+131072);for(var I=(1<<h)-1,B=(1<<p)-1,j=l;;j=l){var F=(k=u[ene(e,l)&I])>>>4;if((l+=15&k)>f){if(a)throw"unexpected EOF";break}if(!k)throw"invalid length/literal";if(F<256)t[c++]=F;else{if(256==F){j=l,u=null;break}var L=F-254;if(F>264){var O=jte[_=F-257];L=$te(e,l,(1<<O)-1)+zte[_],l+=O}var N=d[ene(e,l)&B],z=N>>>4;if(!N)throw"invalid distance";l+=15&N;D=Gte[z];if(z>3){O=Fte[z];D+=ene(e,l)&(1<<O)-1,l+=O}if(l>f){if(a)throw"unexpected EOF";break}i&&s(c+131072);for(var U=c+L;c<U;c+=4)t[c]=t[c-D],t[c+1]=t[c+1-D],t[c+2]=t[c+2-D],t[c+3]=t[c+3-D];c=U}}n.l=u,n.p=j,n.b=c,u&&(o=1,n.m=h,n.d=d,n.n=p)}while(!o);return c==t.length?t:nne(t,0,c)},ine=new Dte(0),ane=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function sne(e,t){return rne((ane(e),e.subarray(2,-4)),t)}var one="undefined"!=typeof TextDecoder&&new TextDecoder;try{one.decode(ine,{stream:!0}),1}catch(Zie){}const lne=gee>=152;class cne extends x4{constructor(e){super(e),this.type=dX}parse(e){const t=65536,n=14,r=65537,i=16384,a=Math.pow(2.7182818,2.2);const s={l:0,c:0,lc:0};function o(e,t,n,r,i){for(;n<e;)t=t<<8|U(r,i),n+=8;n-=e,s.l=t>>n&(1<<e)-1,s.c=t,s.lc=n}const l=new Array(59);function c(e,t,n,i,a,c,u){for(var d=n,h=0,p=0;a<=c;a++){if(d.value-n.value>i)return!1;o(6,h,p,e,d);var f=s.l;if(h=s.c,p=s.lc,u[a]=f,63==f){if(d.value-n.value>i)throw"Something wrong with hufUnpackEncTable";o(8,h,p,e,d);var m=s.l+6;if(h=s.c,p=s.lc,a+m>c+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)u[a++]=0;a--}else if(f>=59){if(a+(m=f-59+2)>c+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)u[a++]=0;a--}}!function(e){for(var t=0;t<=58;++t)l[t]=0;for(t=0;t<r;++t)l[e[t]]+=1;var n=0;for(t=58;t>0;--t){var i=n+l[t]>>1;l[t]=n,n=i}for(t=0;t<r;++t){var a=e[t];a>0&&(e[t]=a|l[a]++<<6)}}(u)}function u(e){return 63&e}function d(e){return e>>6}const h={c:0,lc:0};function p(e,t,n,r){e=e<<8|U(n,r),t+=8,h.c=e,h.lc=t}const f={c:0,lc:0};function m(e,t,n,r,i,a,s,o,l,c){if(e==t){r<8&&(p(n,r,i,s),n=h.c,r=h.lc);var u=n>>(r-=8);u=new Uint8Array([u])[0];if(l.value+u>c)return!1;for(var d=o[l.value-1];u-- >0;)o[l.value++]=d}else{if(!(l.value<c))return!1;o[l.value++]=e}f.c=n,f.lc=r}function g(e){return 65535&e}function v(e){var t=g(e);return t>32767?t-65536:t}const y={a:0,b:0};function x(e,t){var n=v(e),r=v(t),i=n+(1&r)+(r>>1),a=i,s=i-r;y.a=a,y.b=s}function b(e,t){var n=g(e),r=g(t),i=n-(r>>1)&65535,a=r+i-32768&65535;y.a=a,y.b=i}function w(e,t,n,r,i,a,s){for(var o,l=s<16384,c=n>i?i:n,u=1;u<=c;)u<<=1;for(o=u>>=1,u>>=1;u>=1;){for(var d,h,p,f,m=0,g=m+a*(i-o),v=a*u,w=a*o,S=r*u,_=r*o;m<=g;m+=w){for(var A=m,E=m+r*(n-o);A<=E;A+=_){var C=A+S,M=(T=A+v)+S;l?(x(e[A+t],e[T+t]),d=y.a,p=y.b,x(e[C+t],e[M+t]),h=y.a,f=y.b,x(d,h),e[A+t]=y.a,e[C+t]=y.b,x(p,f),e[T+t]=y.a,e[M+t]=y.b):(b(e[A+t],e[T+t]),d=y.a,p=y.b,b(e[C+t],e[M+t]),h=y.a,f=y.b,b(d,h),e[A+t]=y.a,e[C+t]=y.b,b(p,f),e[T+t]=y.a,e[M+t]=y.b)}if(n&u){var T=A+v;l?x(e[A+t],e[T+t]):b(e[A+t],e[T+t]),d=y.a,e[T+t]=y.b,e[A+t]=d}}if(i&u)for(A=m,E=m+r*(n-o);A<=E;A+=_){C=A+S;l?x(e[A+t],e[C+t]):b(e[A+t],e[C+t]),d=y.a,e[C+t]=y.b,e[A+t]=d}o=u,u>>=1}return m}function S(e,t,a,s,o,l){var g=a.value,v=z(t,a),y=z(t,a);a.value+=4;var x=z(t,a);if(a.value+=4,v<0||v>=r||y<0||y>=r)throw"Something wrong with HUF_ENCSIZE";var b=new Array(r),w=new Array(i);if(function(e){for(var t=0;t<i;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(w),c(e,0,a,s-(a.value-g),v,y,b),x>8*(s-(a.value-g)))throw"Something wrong with hufUncompress";!function(e,t,r,i){for(;t<=r;t++){var a=d(e[t]),s=u(e[t]);if(a>>s)throw"Invalid table entry";if(s>n){if((h=i[a>>s-n]).len)throw"Invalid table entry";if(h.lit++,h.p){var o=h.p;h.p=new Array(h.lit);for(var l=0;l<h.lit-1;++l)h.p[l]=o[l]}else h.p=new Array(1);h.p[h.lit-1]=t}else if(s){var c=0;for(l=1<<n-s;l>0;l--){var h;if((h=i[(a<<n-s)+c]).len||h.p)throw"Invalid table entry";h.len=s,h.lit=t,c++}}}}(b,v,y,w),function(e,t,r,i,a,s,o,l,c,g){for(var v=0,y=0,x=l,b=Math.trunc(a.value+(s+7)/8);a.value<b;)for(p(v,y,r,a),v=h.c,y=h.lc;y>=n;)if((A=t[v>>y-n&16383]).len)y-=A.len,m(A.lit,o,v,y,r,0,a,c,g,x),v=f.c,y=f.lc;else{if(!A.p)throw"hufDecode issues";var w;for(w=0;w<A.lit;w++){for(var S=u(e[A.p[w]]);y<S&&a.value<b;)p(v,y,r,a),v=h.c,y=h.lc;if(y>=S&&d(e[A.p[w]])==(v>>y-S&(1<<S)-1)){y-=S,m(A.p[w],o,v,y,r,0,a,c,g,x),v=f.c,y=f.lc;break}}if(w==A.lit)throw"hufDecode issues"}var _=8-s&7;for(v>>=_,y-=_;y>0;){var A;if(!(A=t[v<<n-y&16383]).len)throw"hufDecode issues";y-=A.len,m(A.lit,o,v,y,r,0,a,c,g,x),v=f.c,y=f.lc}}(b,w,e,0,a,x,y,l,o,{value:0})}function _(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function A(e,t){for(var n=0,r=Math.floor((e.length+1)/2),i=0,a=e.length-1;!(i>a)&&(t[i++]=e[n++],!(i>a));)t[i++]=e[r++]}function E(e){for(var t=e.byteLength,n=new Array,r=0,i=new DataView(e);t>0;){var a=i.getInt8(r++);if(a<0){t-=(o=-a)+1;for(var s=0;s<o;s++)n.push(i.getUint8(r++))}else{var o=a;t-=2;var l=i.getUint8(r++);for(s=0;s<o+1;s++)n.push(l)}}return n}function C(e,t,n){for(var r,i=1;i<64;)65280==(r=t[e.value])?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}function M(e,t){t[0]=q(e[0]),t[1]=q(e[1]),t[2]=q(e[5]),t[3]=q(e[6]),t[4]=q(e[14]),t[5]=q(e[15]),t[6]=q(e[27]),t[7]=q(e[28]),t[8]=q(e[2]),t[9]=q(e[4]),t[10]=q(e[7]),t[11]=q(e[13]),t[12]=q(e[16]),t[13]=q(e[26]),t[14]=q(e[29]),t[15]=q(e[42]),t[16]=q(e[3]),t[17]=q(e[8]),t[18]=q(e[12]),t[19]=q(e[17]),t[20]=q(e[25]),t[21]=q(e[30]),t[22]=q(e[41]),t[23]=q(e[43]),t[24]=q(e[9]),t[25]=q(e[11]),t[26]=q(e[18]),t[27]=q(e[24]),t[28]=q(e[31]),t[29]=q(e[40]),t[30]=q(e[44]),t[31]=q(e[53]),t[32]=q(e[10]),t[33]=q(e[19]),t[34]=q(e[23]),t[35]=q(e[32]),t[36]=q(e[39]),t[37]=q(e[45]),t[38]=q(e[52]),t[39]=q(e[54]),t[40]=q(e[20]),t[41]=q(e[22]),t[42]=q(e[33]),t[43]=q(e[38]),t[44]=q(e[46]),t[45]=q(e[51]),t[46]=q(e[55]),t[47]=q(e[60]),t[48]=q(e[21]),t[49]=q(e[34]),t[50]=q(e[37]),t[51]=q(e[47]),t[52]=q(e[50]),t[53]=q(e[56]),t[54]=q(e[59]),t[55]=q(e[61]),t[56]=q(e[35]),t[57]=q(e[36]),t[58]=q(e[48]),t[59]=q(e[49]),t[60]=q(e[57]),t[61]=q(e[58]),t[62]=q(e[62]),t[63]=q(e[63])}function T(e){const t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),a=.5*Math.cos(.981746875),s=.5*Math.cos(3*3.14159/8),o=.5*Math.cos(1.374445625);for(var l=new Array(4),c=new Array(4),u=new Array(4),d=new Array(4),h=0;h<8;++h){var p=8*h;l[0]=r*e[p+2],l[1]=s*e[p+2],l[2]=r*e[p+6],l[3]=s*e[p+6],c[0]=n*e[p+1]+i*e[p+3]+a*e[p+5]+o*e[p+7],c[1]=i*e[p+1]-o*e[p+3]-n*e[p+5]-a*e[p+7],c[2]=a*e[p+1]-n*e[p+3]+o*e[p+5]+i*e[p+7],c[3]=o*e[p+1]-a*e[p+3]+i*e[p+5]-n*e[p+7],u[0]=t*(e[p+0]+e[p+4]),u[3]=t*(e[p+0]-e[p+4]),u[1]=l[0]+l[3],u[2]=l[1]-l[2],d[0]=u[0]+u[1],d[1]=u[3]+u[2],d[2]=u[3]-u[2],d[3]=u[0]-u[1],e[p+0]=d[0]+c[0],e[p+1]=d[1]+c[1],e[p+2]=d[2]+c[2],e[p+3]=d[3]+c[3],e[p+4]=d[3]-c[3],e[p+5]=d[2]-c[2],e[p+6]=d[1]-c[1],e[p+7]=d[0]-c[0]}for(var f=0;f<8;++f)l[0]=r*e[16+f],l[1]=s*e[16+f],l[2]=r*e[48+f],l[3]=s*e[48+f],c[0]=n*e[8+f]+i*e[24+f]+a*e[40+f]+o*e[56+f],c[1]=i*e[8+f]-o*e[24+f]-n*e[40+f]-a*e[56+f],c[2]=a*e[8+f]-n*e[24+f]+o*e[40+f]+i*e[56+f],c[3]=o*e[8+f]-a*e[24+f]+i*e[40+f]-n*e[56+f],u[0]=t*(e[f]+e[32+f]),u[3]=t*(e[f]-e[32+f]),u[1]=l[0]+l[3],u[2]=l[1]-l[2],d[0]=u[0]+u[1],d[1]=u[3]+u[2],d[2]=u[3]-u[2],d[3]=u[0]-u[1],e[0+f]=d[0]+c[0],e[8+f]=d[1]+c[1],e[16+f]=d[2]+c[2],e[24+f]=d[3]+c[3],e[32+f]=d[3]-c[3],e[40+f]=d[2]-c[2],e[48+f]=d[1]-c[1],e[56+f]=d[0]-c[0]}function k(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}}function P(e,t,n){for(var r=0;r<64;++r)t[n+r]=LZ.toHalfFloat(R(e[r]))}function R(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(a,Math.abs(e)-1)}function D(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function I(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(E(t)),r=new Uint8Array(n.length);return _(n),A(n,r),new DataView(r.buffer)}function B(e){var t=sne(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return _(t),A(t,n),new DataView(n.buffer)}function j(e){for(var n=e.viewer,r={value:e.offset.value},i=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),a=new Uint8Array(8192),s=0,o=new Array(e.channels),l=0;l<e.channels;l++)o[l]={},o[l].start=s,o[l].end=o[l].start,o[l].nx=e.width,o[l].ny=e.lines,o[l].size=e.type,s+=o[l].nx*o[l].ny*o[l].size;var c=X(n,r),u=X(n,r);if(u>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(c<=u)for(l=0;l<u-c+1;l++)a[l+c]=H(n,r);var d=new Uint16Array(t),h=function(e,n){for(var r=0,i=0;i<t;++i)(0==i||e[i>>3]&1<<(7&i))&&(n[r++]=i);for(var a=r-1;r<t;)n[r++]=0;return a}(a,d),p=z(n,r);S(e.array,n,r,p,i,s);for(l=0;l<e.channels;++l)for(var f=o[l],m=0;m<o[l].size;++m)w(i,f.start+m,f.nx,f.size,f.ny,f.nx*f.size,h);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(d,i,s);for(var g=0,v=new Uint8Array(i.buffer.byteLength),y=0;y<e.lines;y++)for(var x=0;x<e.channels;x++){var b=(f=o[x]).nx*f.size,_=new Uint8Array(i.buffer,2*f.end,2*b);v.set(_,g),g+=2*b,f.end+=b}return new DataView(v.buffer)}function F(e){var t=sne(e.array.slice(e.offset.value,e.offset.value+e.size));const n=e.lines*e.channels*e.width,r=1==e.type?new Uint16Array(n):new Uint32Array(n);let i=0,a=0;const s=new Array(4);for(let o=0;o<e.lines;o++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:s[0]=i,s[1]=s[0]+e.width,i=s[1]+e.width;for(let i=0;i<e.width;++i){n+=t[s[0]++]<<8|t[s[1]++],r[a]=n,a++}break;case 2:s[0]=i,s[1]=s[0]+e.width,s[2]=s[1]+e.width,i=s[2]+e.width;for(let i=0;i<e.width;++i){n+=t[s[0]++]<<24|t[s[1]++]<<16|t[s[2]++]<<8,r[a]=n,a++}}}return new DataView(r.buffer)}function L(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:G(t,n),unknownUncompressedSize:G(t,n),unknownCompressedSize:G(t,n),acCompressedSize:G(t,n),dcCompressedSize:G(t,n),rleCompressedSize:G(t,n),rleUncompressedSize:G(t,n),rleRawSize:G(t,n),totalAcUncompressedCount:G(t,n),totalDcUncompressedCount:G(t,n),acCompression:G(t,n)};if(i.version<2)throw"EXRLoader.parse: "+$.compression+" version "+i.version+" is unsupported";for(var a=new Array,s=X(t,n)-2;s>0;){var o=O(t.buffer,n),l=H(t,n),c=l>>2&3,u=new Int8Array([(l>>4)-1])[0],d=H(t,n);a.push({name:o,index:u,type:d,compression:c}),s-=o.length+3}for(var h=$.channels,p=new Array(e.channels),f=0;f<e.channels;++f){var m=p[f]={},g=h[f];m.name=g.name,m.compression=0,m.decoded=!1,m.type=g.pixelType,m.pLinear=g.pLinear,m.width=e.width,m.height=e.lines}for(var v={idx:new Array(3)},y=0;y<e.channels;++y)for(m=p[y],f=0;f<a.length;++f){var x=a[f];m.name==x.name&&(m.compression=x.compression,x.index>=0&&(v.idx[x.index]=y),m.offset=y)}if(i.acCompressedSize>0)switch(i.acCompression){case 0:var b=new Uint16Array(i.totalAcUncompressedCount);S(e.array,t,n,i.acCompressedSize,b,i.totalAcUncompressedCount);break;case 1:var w=sne(e.array.slice(n.value,n.value+i.totalAcUncompressedCount));b=new Uint16Array(w.buffer);n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var _={array:e.array,offset:n,size:i.dcCompressedSize},A=new Uint16Array(B(_).buffer);n.value+=i.dcCompressedSize}if(i.rleRawSize>0){var R=E((w=sne(e.array.slice(n.value,n.value+i.rleCompressedSize))).buffer);n.value+=i.rleCompressedSize}var D=0,I=new Array(p.length);for(f=0;f<I.length;++f)I[f]=new Array;for(var j=0;j<e.lines;++j)for(var F=0;F<p.length;++F)I[F].push(D),D+=p[F].width*e.type*2;!function(e,t,n,r,i,a){var s=new DataView(a.buffer),o=n[e.idx[0]].width,l=n[e.idx[0]].height,c=Math.floor(o/8),u=Math.ceil(o/8),d=Math.ceil(l/8),h=o-8*(u-1),p=l-8*(d-1),f={value:0},m=new Array(3),g=new Array(3),v=new Array(3),y=new Array(3),x=new Array(3);for(let C=0;C<3;++C)x[C]=t[e.idx[C]],m[C]=C<1?0:m[C-1]+u*d,g[C]=new Float32Array(64),v[C]=new Uint16Array(64),y[C]=new Uint16Array(64*u);for(let D=0;D<d;++D){var b=8;D==d-1&&(b=p);var w=8;for(let e=0;e<u;++e){e==u-1&&(w=h);for(let e=0;e<3;++e)v[e].fill(0),v[e][0]=i[m[e]++],C(f,r,v[e]),M(v[e],g[e]),T(g[e]);k(g);for(let t=0;t<3;++t)P(g[t],y[t],64*e)}let t=0;for(let r=0;r<3;++r){const i=n[e.idx[r]].type;for(let e=8*D;e<8*D+b;++e){t=x[r][e];for(let n=0;n<c;++n){const a=64*n+8*(7&e);s.setUint16(t+0*i,y[r][a+0],!0),s.setUint16(t+2*i,y[r][a+1],!0),s.setUint16(t+4*i,y[r][a+2],!0),s.setUint16(t+6*i,y[r][a+3],!0),s.setUint16(t+8*i,y[r][a+4],!0),s.setUint16(t+10*i,y[r][a+5],!0),s.setUint16(t+12*i,y[r][a+6],!0),s.setUint16(t+14*i,y[r][a+7],!0),t+=16*i}}if(c!=u)for(let e=8*D;e<8*D+b;++e){const t=x[r][e]+8*c*2*i,n=64*c+8*(7&e);for(let e=0;e<w;++e)s.setUint16(t+2*e*i,y[r][n+e],!0)}}}for(var S=new Uint16Array(o),_=(s=new DataView(a.buffer),0);_<3;++_){n[e.idx[_]].decoded=!0;var A=n[e.idx[_]].type;if(2==n[_].type)for(var E=0;E<l;++E){const e=x[_][E];for(var R=0;R<o;++R)S[R]=s.getUint16(e+2*R*A,!0);for(R=0;R<o;++R)s.setFloat32(e+2*R*A,q(S[R]),!0)}}}(v,I,p,b,A,r);for(f=0;f<p.length;++f){if(!(m=p[f]).decoded){if(2!==m.compression)throw"EXRLoader.parse: unsupported channel compression";var L=0,N=0;for(j=0;j<e.lines;++j){for(var z=I[f][L],U=0;U<m.width;++U){for(var V=0;V<2*m.type;++V)r[z++]=R[N+V*m.width*m.height];N++}L++}}}return new DataView(r.buffer)}function O(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function N(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function z(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function U(e,t){var n=e[t.value];return t.value=t.value+1,n}function H(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}const G=function(e,t){let n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function V(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function W(e,t){return LZ.toHalfFloat(V(e,t))}function q(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function X(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function J(e,t){return q(X(e,t))}function Y(e,t,n,r,i){return"string"===r||"stringvector"===r||"iccProfile"===r?function(e,t,n){var r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,i):"chlist"===r?function(e,t,n,r){for(var i=n.value,a=[];n.value<i+r-1;){var s=O(t,n),o=N(e,n),l=H(e,n);n.value+=3;var c=N(e,n),u=N(e,n);a.push({name:s,pixelType:o,pLinear:l,xSampling:c,ySampling:u})}return n.value+=1,a}(e,t,n,i):"chromaticities"===r?function(e,t){return{redX:V(e,t),redY:V(e,t),greenX:V(e,t),greenY:V(e,t),blueX:V(e,t),blueY:V(e,t),whiteX:V(e,t),whiteY:V(e,t)}}(e,n):"compression"===r?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][H(e,t)]}(e,n):"box2i"===r?function(e,t){return{xMin:z(e,t),yMin:z(e,t),xMax:z(e,t),yMax:z(e,t)}}(e,n):"lineOrder"===r?function(e,t){return["INCREASING_Y"][H(e,t)]}(e,n):"float"===r?V(e,n):"v2f"===r?function(e,t){return[V(e,t),V(e,t)]}(e,n):"v3f"===r?function(e,t){return[V(e,t),V(e,t),V(e,t)]}(e,n):"int"===r?N(e,n):"rational"===r?function(e,t){return[N(e,t),z(e,t)]}(e,n):"timecode"===r?function(e,t){return[z(e,t),z(e,t)]}(e,n):"preview"===r?(n.value+=i,"skipped"):void(n.value+=i)}const K=new DataView(e),Z=new Uint8Array(e),Q={value:0},$=function(e,t,n){const r={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);const i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;for(var a=!0;a;){var s=O(t,n);if(0==s)a=!1;else{var o=O(t,n),l=Y(e,t,n,o,z(e,n));void 0===l?console.warn("EXRLoader.parse: skipped unknown header attribute type '".concat(o,"'.")):r[s]=l}}if(0!=(-5&i))throw console.error("EXRHeader:",r),"THREE.EXRLoader: provided file is currently unsupported.";return r}(K,e,Q),ee=function(e,t,n,r,i){const a={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[lne?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":a.lines=1,a.uncompress=D;break;case"RLE_COMPRESSION":a.lines=1,a.uncompress=I;break;case"ZIPS_COMPRESSION":a.lines=1,a.uncompress=B;break;case"ZIP_COMPRESSION":a.lines=16,a.uncompress=B;break;case"PIZ_COMPRESSION":a.lines=32,a.uncompress=j;break;case"PXR24_COMPRESSION":a.lines=16,a.uncompress=F;break;case"DWAA_COMPRESSION":a.lines=32,a.uncompress=L;break;case"DWAB_COMPRESSION":a.lines=256,a.uncompress=L;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(a.scanlineBlockSize=a.lines,1==a.type)switch(i){case uX:a.getter=J,a.inputSize=2;break;case dX:a.getter=X,a.inputSize=2}else{if(2!=a.type)throw"EXRLoader.parse: unsupported pixelType "+a.type+" for "+e.compression+".";switch(i){case uX:a.getter=V,a.inputSize=4;break;case dX:a.getter=W,a.inputSize=4}}a.blockCount=(e.dataWindow.yMax+1)/a.scanlineBlockSize;for(var s=0;s<a.blockCount;s++)G(t,r);a.outputChannels=3==a.channels?4:a.channels;const o=a.width*a.height*a.outputChannels;switch(i){case uX:a.byteArray=new Float32Array(o),a.channels<a.outputChannels&&a.byteArray.fill(1,0,o);break;case dX:a.byteArray=new Uint16Array(o),a.channels<a.outputChannels&&a.byteArray.fill(15360,0,o);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return a.bytesPerLine=a.width*a.inputSize*a.channels,4==a.outputChannels?a.format=gX:a.format=wX,lne?a.colorSpace="srgb-linear":a.encoding=3e3,a}($,K,Z,Q,this.type),te={value:0},ne={R:0,G:1,B:2,A:3,Y:0};for(let re=0;re<ee.height/ee.scanlineBlockSize;re++){const e=z(K,Q);ee.size=z(K,Q),ee.lines=e+ee.scanlineBlockSize>ee.height?ee.height-e:ee.scanlineBlockSize;const t=ee.size<ee.lines*ee.bytesPerLine?ee.uncompress(ee):D(ee);Q.value+=ee.size;for(let n=0;n<ee.scanlineBlockSize;n++){const e=n+re*ee.scanlineBlockSize;if(e>=ee.height)break;for(let r=0;r<ee.channels;r++){const i=ne[$.channels[r].name];for(let a=0;a<ee.width;a++){te.value=(n*(ee.channels*ee.width)+r*ee.width+a)*ee.inputSize;const s=(ee.height-1-e)*(ee.width*ee.outputChannels)+a*ee.outputChannels+i;ee.byteArray[s]=ee.getter(t,te)}}}}return{header:$,width:ee.width,height:ee.height,data:ee.byteArray,format:ee.format,[lne?"colorSpace":"encoding"]:ee[lne?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){lne?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=$q,e.magFilter=$q,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)}),n,r)}}const une=(e,t,n)=>{let r;switch(e){case iX:r=new Uint8ClampedArray(t*n*4);break;case dX:r=new Uint16Array(t*n*4);break;case cX:r=new Uint32Array(t*n*4);break;case aX:r=new Int8Array(t*n*4);break;case sX:r=new Int16Array(t*n*4);break;case lX:r=new Int32Array(t*n*4);break;case uX:r=new Float32Array(t*n*4);break;default:throw new Error("Unsupported data type")}return r};let dne;class hne{constructor(e){var t,n,r,i,a,s,o,l,c,u,d,h,p,f,m,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(Zie){throw this._renderer.setRenderTarget(null),Zie}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const v={format:gX,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:void 0!==(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)?null===(n=e.renderTargetOptions)||void 0===n?void 0:n.anisotropy:1,generateMipmaps:void 0!==(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps)&&(null===(i=e.renderTargetOptions)||void 0===i?void 0:i.generateMipmaps),magFilter:void 0!==(null===(a=e.renderTargetOptions)||void 0===a?void 0:a.magFilter)?null===(s=e.renderTargetOptions)||void 0===s?void 0:s.magFilter:$q,minFilter:void 0!==(null===(o=e.renderTargetOptions)||void 0===o?void 0:o.minFilter)?null===(l=e.renderTargetOptions)||void 0===l?void 0:l.minFilter:$q,samples:void 0!==(null===(c=e.renderTargetOptions)||void 0===c?void 0:c.samples)?null===(u=e.renderTargetOptions)||void 0===u?void 0:u.samples:void 0,wrapS:void 0!==(null===(d=e.renderTargetOptions)||void 0===d?void 0:d.wrapS)?null===(h=e.renderTargetOptions)||void 0===h?void 0:h.wrapS:qq,wrapT:void 0!==(null===(p=e.renderTargetOptions)||void 0===p?void 0:p.wrapT)?null===(f=e.renderTargetOptions)||void 0===f?void 0:f.wrapT:qq};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=hne.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new k1,this._camera=new n$,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!((e,t,n,r)=>{if(void 0!==dne)return dne;const i=new rK(1,1,r);t.setRenderTarget(i);const a=new SQ(new WQ,new DZ({color:16777215}));t.render(a,n),t.setRenderTarget(null);const s=une(e,i.width,i.height);return t.readRenderTargetPixels(i,0,0,i.width,i.height,s),i.dispose(),a.geometry.dispose(),a.material.dispose(),dne=0!==s[0],dne})(this._type,this._renderer,this._camera,v)){let e;if(this._type===dX)e=this._renderer.extensions.has("EXT_color_buffer_float")?uX:void 0;void 0!==e?(console.warn("This browser does not support reading pixels from ".concat(this._type," RenderTargets, switching to ").concat(uX)),this._type=e):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new SQ(new WQ,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new rK(this.width,this.height,v),this._renderTarget.texture.mapping=void 0!==(null===(m=e.renderTargetOptions)||void 0===m?void 0:m.mapping)?null===(g=e.renderTargetOptions)||void 0===g?void 0:g.mapping:Nq}static instantiateRenderer(){const e=new E1;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=une(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new c2(this.toArray(),this.width,this.height,gX,this._type,(null===e||void 0===e?void 0:e.mapping)||Nq,(null===e||void 0===e?void 0:e.wrapS)||qq,(null===e||void 0===e?void 0:e.wrapT)||qq,(null===e||void 0===e?void 0:e.magFilter)||$q,(null===e||void 0===e?void 0:e.minFilter)||$q,(null===e||void 0===e?void 0:e.anisotropy)||1,CJ);return t.generateMipmaps=void 0!==(null===e||void 0===e?void 0:e.generateMipmaps)&&(null===e||void 0===e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof kQ&&Object.values(this.material.uniforms).forEach((e=>{e.value instanceof eK&&e.value.dispose()})),Object.values(this.material).forEach((e=>{e instanceof eK&&e.dispose()})),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class pne extends kQ{constructor(e){let{gamma:t,offsetHdr:n,offsetSdr:r,gainMapMin:i,gainMapMax:a,maxDisplayBoost:s,hdrCapacityMin:o,hdrCapacityMax:l,sdr:c,gainMap:u}=e;super({name:"GainMapDecoderMaterial",vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n",uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new uK(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:(new uK).fromArray(n)},offsetSdr:{value:(new uK).fromArray(r)},gainMapMin:{value:(new uK).fromArray(i)},gainMapMax:{value:(new uK).fromArray(a)},weightFactor:{value:(Math.log2(s)-o)/(l-o)}},blending:XW,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=s,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class fne extends Error{}class mne extends Error{}const gne=(e,t,n)=>{const r=new RegExp("".concat(t,'="([^"]*)"'),"i").exec(e);if(r)return r[1];const i=new RegExp("<".concat(t,"[^>]*>([\\s\\S]*?)</").concat(t,">"),"i").exec(e);if(i){const e=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return e&&3===e.length?e.map((e=>e.replace(/<\/?rdf:li>/g,""))):i[1].trim()}if(void 0!==n)return n;throw new Error("Can't find ".concat(t," in gainmap metadata"))};class vne{constructor(e){this.options={debug:!(!e||void 0===e.debug)&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise(((t,n)=>{const r=this.options.debug,i=new DataView(e.buffer);if(65496!==i.getUint16(0))return void n(new Error("Not a valid jpeg"));const a=i.byteLength;let s,o=2,l=0;for(;o<a;){if(++l>250)return void n(new Error("Found no marker after ".concat(l," loops \ud83d\ude35")));if(255!==i.getUint8(o))return void n(new Error("Not a valid marker at offset 0x".concat(o.toString(16),", found: 0x").concat(i.getUint8(o).toString(16))));if(s=i.getUint8(o+1),r&&console.log("Marker: ".concat(s.toString(16))),226===s){r&&console.log("Found APP2 marker (0xffe2)");const e=o+4;if(1297106432===i.getUint32(e)){const r=e+4;let a;if(18761===i.getUint16(r))a=!1;else{if(19789!==i.getUint16(r))return void n(new Error("No valid endianness marker found in TIFF header"));a=!0}if(42!==i.getUint16(r+2,!a))return void n(new Error("Not valid TIFF data! (no 0x002A marker)"));const s=i.getUint32(r+4,!a);if(s<8)return void n(new Error("Not valid TIFF data! (First offset less than 8)"));const o=r+s,l=i.getUint16(o,!a),c=o+2;let u=0;for(let e=c;e<c+12*l;e+=12)45057===i.getUint16(e,!a)&&(u=i.getUint32(e+8,!a));const d=o+2+12*l+4,h=[];for(let e=d;e<d+16*u;e+=16){const t={MPType:i.getUint32(e,!a),size:i.getUint32(e+4,!a),dataOffset:i.getUint32(e+8,!a),dependantImages:i.getUint32(e+12,!a),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=r+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,h.push(t)}if(this.options.extractNonFII&&h.length){const e=new Blob([i]),n=[];for(const t of h){if(t.isFII&&!this.options.extractFII)continue;const r=e.slice(t.start,t.end+1,"image/jpeg");n.push(r)}t(n)}}}o+=2+i.getUint16(o+2)}}))}}const yne=async e=>{const t=(e=>{let t;t="undefined"!==typeof TextDecoder?(new TextDecoder).decode(e):e.toString();let n=t.indexOf("<x:xmpmeta");for(;-1!==n;){const e=t.indexOf("x:xmpmeta>",n),r=t.slice(n,e+10);try{const e=gne(r,"hdrgm:GainMapMin","0"),t=gne(r,"hdrgm:GainMapMax"),n=gne(r,"hdrgm:Gamma","1"),i=gne(r,"hdrgm:OffsetSDR","0.015625"),a=gne(r,"hdrgm:OffsetHDR","0.015625"),s=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),o=s?s[1]:"0",l=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!l)throw new Error("Incomplete gainmap metadata");const c=l[1];return{gainMapMin:Array.isArray(e)?e.map((e=>parseFloat(e))):[parseFloat(e),parseFloat(e),parseFloat(e)],gainMapMax:Array.isArray(t)?t.map((e=>parseFloat(e))):[parseFloat(t),parseFloat(t),parseFloat(t)],gamma:Array.isArray(n)?n.map((e=>parseFloat(e))):[parseFloat(n),parseFloat(n),parseFloat(n)],offsetSdr:Array.isArray(i)?i.map((e=>parseFloat(e))):[parseFloat(i),parseFloat(i),parseFloat(i)],offsetHdr:Array.isArray(a)?a.map((e=>parseFloat(e))):[parseFloat(a),parseFloat(a),parseFloat(a)],hdrCapacityMin:parseFloat(o),hdrCapacityMax:parseFloat(c)}}catch(Zie){}n=t.indexOf("<x:xmpmeta",e)}})(e);if(!t)throw new mne("Gain map XMP metadata not found");const n=new vne({extractFII:!0,extractNonFII:!0}),r=await n.extract(e);if(2!==r.length)throw new fne("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:t}},xne=e=>new Promise(((t,n)=>{const r=document.createElement("img");r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=URL.createObjectURL(e)}));class bne extends d4{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new c4}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new pne({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new eK,sdr:new eK});return new hne({width:16,height:16,type:dX,colorSpace:CJ,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){const i=r?new Blob([r],{type:"image/jpeg"}):void 0,a=new Blob([n],{type:"image/jpeg"});let s,o,l=!1;if("undefined"===typeof createImageBitmap){const e=await Promise.all([i?xne(i):Promise.resolve(void 0),xne(a)]);o=e[0],s=e[1],l=!0}else{const e=await Promise.all([i?createImageBitmap(i,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);o=e[0],s=e[1]}const c=new eK(o||new ImageData(2,2),Nq,qq,qq,$q,rX,gX,iX,1,CJ);c.flipY=l,c.needsUpdate=!0;const u=new eK(s,Nq,qq,qq,$q,rX,gX,iX,1,EJ);u.flipY=l,u.needsUpdate=!0,e.width=s.width,e.height=s.height,e.material.gainMap=c,e.material.sdr=u,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class wne extends bne{load(e,t,n,r){let[i,a,s]=e;const o=this.prepareQuadRenderer();let l,c,u;const d=async()=>{if(l&&c&&u){try{await this.render(o,u,l,c)}catch(e){return this.manager.itemError(i),this.manager.itemError(a),this.manager.itemError(s),"function"===typeof r&&r(e),void o.disposeOnDemandRenderer()}"function"===typeof t&&t(o),this.manager.itemEnd(i),this.manager.itemEnd(a),this.manager.itemEnd(s),o.disposeOnDemandRenderer()}};let h=!0,p=0,f=0,m=!0,g=0,v=0,y=!0,x=0,b=0;const w=()=>{if("function"===typeof n){n(new ProgressEvent("progress",{lengthComputable:h&&m&&y,loaded:f+v+b,total:p+g+x}))}};this.manager.itemStart(i),this.manager.itemStart(a),this.manager.itemStart(s);const S=new f4(this._internalLoadingManager);S.setResponseType("arraybuffer"),S.setRequestHeader(this.requestHeader),S.setPath(this.path),S.setWithCredentials(this.withCredentials),S.load(i,(async e=>{if("string"===typeof e)throw new Error("Invalid sdr buffer");l=e,await d()}),(e=>{h=e.lengthComputable,f=e.loaded,p=e.total,w()}),(e=>{this.manager.itemError(i),"function"===typeof r&&r(e)}));const _=new f4(this._internalLoadingManager);_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setPath(this.path),_.setWithCredentials(this.withCredentials),_.load(a,(async e=>{if("string"===typeof e)throw new Error("Invalid gainmap buffer");c=e,await d()}),(e=>{m=e.lengthComputable,v=e.loaded,g=e.total,w()}),(e=>{this.manager.itemError(a),"function"===typeof r&&r(e)}));const A=new f4(this._internalLoadingManager);return A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(this.withCredentials),A.load(s,(async e=>{if("string"!==typeof e)throw new Error("Invalid metadata string");u=JSON.parse(e),await d()}),(e=>{y=e.lengthComputable,b=e.loaded,x=e.total,w()}),(e=>{this.manager.itemError(s),"function"===typeof r&&r(e)})),o}}class Sne extends bne{load(e,t,n,r){const i=this.prepareQuadRenderer(),a=new f4(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,(async n=>{if("string"===typeof n)throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const a=new Uint8Array(n);let s,o,l;try{const e=await yne(a);s=e.sdr,o=e.gainMap,l=e.metadata}catch(Zie){if(!(Zie instanceof mne||Zie instanceof fne))throw Zie;console.warn("Failure to reconstruct an HDR image from ".concat(e,": Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg")),l={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},s=a}try{await this.render(i,l,s,o)}catch(c){return this.manager.itemError(e),"function"===typeof r&&r(c),void i.disposeOnDemandRenderer()}"function"===typeof t&&t(i),this.manager.itemEnd(e),i.disposeOnDemandRenderer()}),n,(t=>{this.manager.itemError(e),"function"===typeof r&&r(t)})),i}}const _ne={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Ane=3e3,Ene=3001,Cne="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Mne=e=>Array.isArray(e),Tne=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function kne(){let{files:e=Tne,path:t="",preset:n,encoding:i,extensions:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=null,o=!1;n&&(Dne(n),e=_ne[n],t=Cne),o=Mne(e);const{extension:l,isCubemap:c}=Ine(e);if(s=Bne(l),!s)throw new Error("useEnvironment: Unrecognized file extension: "+e);const u=D9((e=>e.gl));(0,r.useLayoutEffect)((()=>{"webp"!==l&&"jpg"!==l&&"jpeg"!==l||u.domElement.addEventListener("webglcontextlost",(function(){F9.clear(s,o?[e]:e)}),{once:!0})}),[e,u.domElement]);const d=F9(s,o?[e]:e,(e=>{"webp"!==l&&"jpg"!==l&&"jpeg"!==l||e.setRenderer(u),null==e.setPath||e.setPath(t),a&&a(e)}));let h=o?d[0]:d;var p;"jpg"!==l&&"jpeg"!==l&&"webp"!==l||(h=null==(p=h.renderTarget)?void 0:p.texture);return h.mapping=c?zq:Hq,"colorSpace"in h?h.colorSpace=(null!==i&&void 0!==i?i:c)?"srgb":"srgb-linear":h.encoding=(null!==i&&void 0!==i?i:c)?Ene:Ane,h}const Pne={files:Tne,path:"",preset:void 0,extensions:void 0};kne.preload=e=>{const t=(0,c.A)((0,c.A)({},Pne),e);let{files:n,path:r=""}=t;const{preset:i,extensions:a}=t;i&&(Dne(i),n=_ne[i],r=Cne);const{extension:s}=Ine(n);if("webp"===s||"jpg"===s||"jpeg"===s)throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=Bne(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);F9.preload(o,Mne(n)?[n]:n,(e=>{null==e.setPath||e.setPath(r),a&&a(e)}))};const Rne={files:Tne,preset:void 0};function Dne(e){if(!(e in _ne))throw new Error("Preset must be one of: "+Object.keys(_ne).join(", "))}function Ine(e){var t;const n=Mne(e)&&6===e.length,r=Mne(e)&&3===e.length&&e.some((e=>e.endsWith("json"))),i=Mne(e)?e[0]:e;return{extension:n?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":null==(t=i.split(".").pop())||null==(t=t.split("?"))||null==(t=t.shift())?void 0:t.toLowerCase(),isCubemap:n,isGainmap:r}}function Bne(e){return"cube"===e?y4:"hdr"===e?Rte:"exr"===e?cne:"jpg"===e||"jpeg"===e?Sne:"webp"===e?wne:null}kne.clear=e=>{const t=(0,c.A)((0,c.A)({},Rne),e);let{files:n}=t;const{preset:r}=t;r&&(Dne(r),n=_ne[r]);const{extension:i}=Ine(n),a=Bne(i);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);F9.clear(a,Mne(n)?[n]:n)};const jne=["scene","background","map"],Fne=["background","scene","blur","backgroundBlurriness","backgroundIntensity","backgroundRotation","environmentIntensity","environmentRotation"],Lne=e=>{return(t=e).current&&t.current.isScene?e.current:e;var t};function One(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};var a,s,o,l;i=(0,c.A)({backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0]},i);const u=Lne(t||n),d=u.background,h=u.environment,p={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:null!==(a=null==(s=u.backgroundRotation)||null==s.clone?void 0:s.clone())&&void 0!==a?a:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:null!==(o=null==(l=u.environmentRotation)||null==l.clone?void 0:l.clone())&&void 0!==o?o:[0,0,0]};return"only"!==e&&(u.environment=r),e&&(u.background=r),U9(u,i),()=>{"only"!==e&&(u.environment=h),e&&(u.background=d),U9(u,p)}}function Nne(e){let{scene:t,background:n=!1,map:i}=e,a=y(e,jne);const s=D9((e=>e.scene));return r.useLayoutEffect((()=>{if(i)return One(n,t,s,i,a)})),null}function zne(e){let{background:t=!1,scene:n,blur:i,backgroundBlurriness:a,backgroundIntensity:s,backgroundRotation:o,environmentIntensity:l,environmentRotation:c}=e;const u=kne(y(e,Fne)),d=D9((e=>e.scene));return r.useLayoutEffect((()=>One(t,n,d,u,{backgroundBlurriness:null!==i&&void 0!==i?i:a,backgroundIntensity:s,backgroundRotation:o,environmentIntensity:l,environmentRotation:c}))),r.useEffect((()=>()=>{u.dispose()}),[u]),null}function Une(e){let{children:t,near:n=.1,far:i=1e3,resolution:a=256,frames:s=1,map:o,background:l=!1,blur:c,backgroundBlurriness:u,backgroundIntensity:d,backgroundRotation:h,environmentIntensity:p,environmentRotation:f,scene:m,files:g,path:v,preset:y,extensions:x}=e;const b=D9((e=>e.gl)),w=D9((e=>e.scene)),S=r.useRef(null),[_]=r.useState((()=>new k1)),A=r.useMemo((()=>{const e=new jQ(a);return e.texture.type=dX,e}),[a]);r.useEffect((()=>()=>{A.dispose()}),[A]),r.useLayoutEffect((()=>{if(1===s){const e=b.autoClear;b.autoClear=!0,S.current.update(b,_),b.autoClear=e}return One(l,m,w,A.texture,{backgroundBlurriness:null!==c&&void 0!==c?c:u,backgroundIntensity:d,backgroundRotation:h,environmentIntensity:p,environmentRotation:f})}),[t,_,A.texture,m,w,l,s,b]);let E=1;return I9((()=>{if(s===1/0||E<s){const e=b.autoClear;b.autoClear=!0,S.current.update(b,_),b.autoClear=e,E++}})),r.createElement(r.Fragment,null,function(e,t,n){return(0,ur.jsx)(X9,{children:e,container:t,state:n},t.uuid)}(r.createElement(r.Fragment,null,t,r.createElement("cubeCamera",{ref:S,args:[n,i,A]}),g||y?r.createElement(zne,{background:!0,files:g,preset:y,path:v,extensions:x}):o?r.createElement(Nne,{background:!0,map:o,extensions:x}):null),_))}function Hne(e){var t,n,i,a;const s=kne(e),o=e.map||s;r.useMemo((()=>z8({GroundProjectedEnvImpl:Pte})),[]),r.useEffect((()=>()=>{s.dispose()}),[s]);const l=r.useMemo((()=>[o]),[o]),c=null==(t=e.ground)?void 0:t.height,u=null==(n=e.ground)?void 0:n.radius,d=null!==(i=null==(a=e.ground)?void 0:a.scale)&&void 0!==i?i:1e3;return r.createElement(r.Fragment,null,r.createElement(Nne,wt({},e,{map:o})),r.createElement("groundProjectedEnvImpl",{args:l,scale:d,height:c,radius:u}))}function Gne(e){return e.ground?r.createElement(Hne,e):e.map?r.createElement(Nne,e):e.children?r.createElement(Une,e):r.createElement(zne,e)}const Vne={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},Wne={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},qne=["scale","frames","opacity","width","height","blur","near","far","resolution","smooth","color","depthWrite","renderOrder"],Xne=r.forwardRef(((e,t)=>{let{scale:n=10,frames:i=1/0,opacity:a=1,width:s=1,height:o=1,blur:l=1,near:u=0,far:d=10,resolution:h=512,smooth:p=!0,color:f="#000000",depthWrite:m=!1,renderOrder:g}=e,v=y(e,qne);const x=r.useRef(null),b=D9((e=>e.scene)),w=D9((e=>e.gl)),S=r.useRef(null);s*=Array.isArray(n)?n[0]:n||1,o*=Array.isArray(n)?n[1]:n||1;const[_,A,E,C,M,T,k]=r.useMemo((()=>{const e=new rK(h,h),t=new rK(h,h);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;const n=new WQ(s,o).rotateX(Math.PI/2),r=new SQ(n),i=new h1;i.depthTest=i.depthWrite=!1,i.onBeforeCompile=e=>{e.uniforms=(0,c.A)((0,c.A)({},e.uniforms),{},{ucolor:{value:new TZ(f)}}),e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const a=new kQ(Vne),l=new kQ(Wne);return l.depthTest=a.depthTest=!1,[e,n,i,r,a,l,t]}),[h,s,o,n,f]),P=e=>{C.visible=!0,C.material=M,M.uniforms.tDiffuse.value=_.texture,M.uniforms.h.value=1*e/256,w.setRenderTarget(k),w.render(C,S.current),C.material=T,T.uniforms.tDiffuse.value=k.texture,T.uniforms.v.value=1*e/256,w.setRenderTarget(_),w.render(C,S.current),C.visible=!1};let R,D,I=0;return I9((()=>{S.current&&(i===1/0||I<i)&&(I++,R=b.background,D=b.overrideMaterial,x.current.visible=!1,b.background=null,b.overrideMaterial=E,w.setRenderTarget(_),w.render(b,S.current),P(l),p&&P(.4*l),w.setRenderTarget(null),x.current.visible=!0,b.overrideMaterial=D,b.background=R)})),r.useImperativeHandle(t,(()=>x.current),[]),r.createElement("group",wt({"rotation-x":Math.PI/2},v,{ref:x}),r.createElement("mesh",{renderOrder:g,geometry:A,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},r.createElement("meshBasicMaterial",{transparent:!0,map:_.texture,opacity:a,depthWrite:m})),r.createElement("orthographicCamera",{ref:S,args:[-s/2,s/2,o/2,-o/2,u,d]}))}));var Jne=.001,Yne=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){"undefined"!==typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*Jne}get fixedDelta(){return this._fixedDelta*Jne}set fixedDelta(e){this._fixedDelta=1e3*e}get elapsed(){return this._elapsed*Jne}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Kne=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),n=new iQ;return n.setAttribute("position",new zZ(e,3)),n.setAttribute("uv",new zZ(t,2)),n})(),Zne=class e{static get fullscreenGeometry(){return Kne}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new k1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new PQ;this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(t){let n=this.screen;null!==n?n.material=t:(n=new SQ(e.fullscreenGeometry,t),n.frustumCulled=!1,null===this.scene&&(this.scene=new k1),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e){}render(e,t,n,r,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const t of Object.keys(this)){const n=this[t];(n instanceof rK||n instanceof RZ||n instanceof eK||n instanceof e)&&this[t].dispose()}null!==this.fullscreenMaterial&&this.fullscreenMaterial.dispose()}},Qne=class extends Zne{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){const a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},$ne="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",ere=class extends kQ{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new T6(null),opacity:new T6(1)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:$ne})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},tre=class extends Zne{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super("CopyPass"),this.fullscreenMaterial=new ere,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new rK(1,1,{minFilter:$q,magFilter:$q,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==iX?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":null!==e&&e.outputColorSpace===EJ&&(this.renderTarget.texture.colorSpace=EJ))}},nre=new TZ,rre=class extends Zne{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,i){const a=this.overrideClearColor,s=this.overrideClearAlpha,o=e.getClearAlpha(),l=null!==a,c=s>=0;l?(e.getClearColor(nre),e.setClearColor(a,c?s:o)):c&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(nre,o):c&&e.setClearAlpha(o)}},ire=class extends Zne{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new rre(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,i){const a=e.getContext(),s=e.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,d=1-u;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,u,4294967295),s.stencil.setClear(d),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(n),e.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},are=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.renderer=null,this.inputBuffer=this.createBuffer(t,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new tre,this.depthTexture=null,this.passes=[],this.timer=new Yne,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){const t=e.getSize(new RY),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===iX&&e.outputColorSpace===EJ&&(this.inputBuffer.texture.colorSpace=EJ,this.outputBuffer.texture.colorSpace=EJ,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const i of this.passes)i.initialize(e,n,r)}}replaceRenderer(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){const e=this.depthTexture=new M$;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=bX,e.type=fX):e.type=cX,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,r){const i=this.renderer,a=null===i?new RY:i.getDrawingBufferSize(new RY),s={minFilter:$q,magFilter:$q,stencilBuffer:t,depthBuffer:e,type:n},o=new rK(a.width,a.height,s);return r>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=r),n===iX&&null!==i&&i.outputColorSpace===EJ&&(o.texture.colorSpace=EJ),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new RY),a=r.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(i.width,i.height),e.initialize(r,a,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){const n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let r,i,a,s=this.inputBuffer,o=this.outputBuffer,l=!1;void 0===e&&(this.timer.update(),e=this.timer.getDelta());for(const c of this.passes)c.enabled&&(c.render(t,s,o,e,l),c.needsSwap&&(l&&(n.renderToScreen=c.renderToScreen,r=t.getContext(),i=t.state.buffers.stencil,i.setFunc(r.NOTEQUAL,1,4294967295),n.render(t,s,o,e,l),i.setFunc(r.EQUAL,1,4294967295)),a=s,s=o,o=a),c instanceof ire?l=!0:c instanceof Qne&&(l=!1))}setSize(e,t,n){const r=this.renderer,i=r.getSize(new RY);void 0!==e&&void 0!==t||(e=i.width,t=i.height),i.width===e&&i.height===t||r.setSize(e,t,n);const a=r.getDrawingBufferSize(new RY);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const s of this.passes)s.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Zne.fullscreenGeometry.dispose()}},sre={NONE:0,DEPTH:1,CONVOLUTION:2},ore={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},lre=class{constructor(){this.shaderParts=new Map([[ore.FRAGMENT_HEAD,null],[ore.FRAGMENT_MAIN_UV,null],[ore.FRAGMENT_MAIN_IMAGE,null],[ore.VERTEX_HEAD,null],[ore.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=sre.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=CJ}};var cre=!1,ure=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case WW:t=this.materialsFlatShadedDoubleSide;break;case VW:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case WW:t=this.materialsDoubleSide;break;case VW:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof kQ))return e.clone();const t=e.uniforms,n=new Map;for(const i in t){const e=t[i].value;e.isRenderTargetTexture&&(t[i].value=null,n.set(i,e))}const r=e.clone();for(const i of n)t[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=GW;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=VW,n})),this.materialsDoubleSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=WW,n})),this.materialsFlatShaded=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=VW,n})),this.materialsFlatShadedDoubleSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=WW,n}))}}render(e,t,n){const r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,cre){const r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const e of r)e[0].material=e[1];this.meshCount!==r.size&&r.clear()}else{const r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return cre}static set workaroundEnabled(e){cre=e}},dre=-1,hre=class extends vY{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dre,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dre,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.resizable=e,this.baseSize=new RY(1,1),this.preferredSize=new RY(t,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new RY,this.addEventListener("change",(()=>this.updateEffectiveSize())),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,n=this.effectiveSize,r=this.scale;t.width!==dre?n.width=t.width:t.height!==dre?n.width=Math.round(t.height*(e.width/Math.max(e.height,1))):n.width=Math.round(e.width*r),t.height!==dre?n.height=t.height:t.width!==dre?n.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n.height=Math.round(e.height*r)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(dre),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){this.baseSize.width===e&&this.baseSize.height===t||(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){this.preferredSize.width===e&&this.preferredSize.height===t||(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return dre}},pre=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.nextId=e}getNextId(){return this.nextId++}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.nextId=e,this}}(2),fre=(Set,{SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32}),mre=new Map([[fre.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),opacity);}"],[fre.ALPHA,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}"],[fre.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),opacity);}"],[fre.COLOR,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[fre.COLOR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),opacity);}"],[fre.COLOR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),opacity);}"],[fre.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),opacity);}"],[fre.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),opacity);}"],[fre.DIVIDE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),opacity);}"],[fre.DST,null],[fre.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),opacity);}"],[fre.HARD_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),opacity);}"],[fre.HARD_MIX,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),opacity);}"],[fre.HUE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),opacity);}"],[fre.INVERT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),opacity);}"],[fre.INVERT_RGB,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),opacity);}"],[fre.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),opacity);}"],[fre.LINEAR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[fre.LINEAR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),opacity);}"],[fre.LINEAR_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[fre.LUMINOSITY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[fre.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),opacity);}"],[fre.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),opacity);}"],[fre.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[fre.OVERLAY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),opacity);}"],[fre.PIN_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),opacity);}"],[fre.REFLECT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),opacity);}"],[fre.SATURATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[fre.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),opacity);}"],[fre.SOFT_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),opacity);}"],[fre.SRC,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[fre.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),opacity);}"],[fre.VIVID_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),opacity);}"]]),gre=class extends vY{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this._blendFunction=e,this.opacity=new T6(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return mre.get(this.blendFunction)}},vre=class extends vY{constructor(e,t){let{attributes:n=sre.NONE,blendFunction:r=fre.NORMAL,defines:i=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=o,this.defines=i,this.uniforms=a,this.extensions=s,this.blendMode=new gre(r),this.blendMode.addEventListener("change",(e=>this.setChanged())),this._inputColorSpace=CJ,this._outputColorSpace=AJ}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof rK||t instanceof RZ||t instanceof eK||t instanceof Zne)&&this[e].dispose()}}},yre={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},xre=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],bre=class extends kQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tK;super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new T6(null),texelSize:new T6(new tK),scale:new T6(1),kernel:new T6(0)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.setTexelSize(e.x,e.y),this.kernelSize=yre.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return xre[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,.5*e,.5*t)}setSize(e,t){const n=1/e,r=1/t;this.uniforms.texelSize.value.set(n,r,.5*n,.5*r)}},wre=class extends Zne{constructor(){let{kernelSize:e=yre.MEDIUM,resolutionScale:t=.5,width:n=hre.AUTO_SIZE,height:r=hre.AUTO_SIZE,resolutionX:i=n,resolutionY:a=r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("KawaseBlurPass"),this.renderTargetA=new rK(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const s=this.resolution=new hre(this,i,a,t);s.addEventListener("change",(e=>this.setSize(s.baseWidth,s.baseHeight))),this._blurMaterial=new bre,this._blurMaterial.kernelSize=e,this.copyMaterial=new ere}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let d=t;this.fullscreenMaterial=c;for(let h=0,p=u.length;h<p;++h){const t=0===(1&h)?o:l;c.kernel=u[h],c.inputBuffer=d.texture,e.setRenderTarget(t),e.render(a,s),d=t}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(a,s)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==iX?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):null!==e&&e.outputColorSpace===EJ&&(this.renderTargetA.texture.colorSpace=EJ,this.renderTargetB.texture.colorSpace=EJ))}static get AUTO_SIZE(){return hre.AUTO_SIZE}},Sre=class extends kQ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super({name:"LuminanceMaterial",defines:{THREE_REVISION:DW.replace(/\D+/g,"")},uniforms:{inputBuffer:new T6(null),threshold:new T6(0),smoothing:new T6(1),range:new T6(null)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);mask=low*high;\n#elif defined(THRESHOLD)\nmask=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=texel*mask;\n#else\ngl_FragColor=vec4(l*mask);\n#endif\n}",vertexShader:$ne}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},_re=class extends Zne{constructor(){let{renderTarget:e,luminanceRange:t,colorOutput:n,resolutionScale:r=1,width:i=hre.AUTO_SIZE,height:a=hre.AUTO_SIZE,resolutionX:s=i,resolutionY:o=a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("LuminancePass"),this.fullscreenMaterial=new Sre(n,t),this.needsSwap=!1,this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new rK(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new hre(this,s,o,r);l.addEventListener("change",(e=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){void 0!==n&&n!==iX&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Are=class extends kQ{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new T6(null),texelSize:new T6(new RY)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Ere=class extends kQ{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new T6(null),supportBuffer:new T6(null),texelSize:new T6(new RY),radius:new T6(.85)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Cre=class extends Zne{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new rK(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Are,this.upsamplingMaterial=new Ere,this.resolution=new RY}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<e;++n){const e=t.clone();e.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(e)}this.upsamplingMipmaps.push(t);for(let n=1,r=e-1;n<r;++n){const e=t.clone();e.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(e)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,n,r,i){const{scene:a,camera:s}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let d=t;this.fullscreenMaterial=o;for(let h=0,p=c.length;h<p;++h){const t=c[h];o.setSize(d.width,d.height),o.inputBuffer=d.texture,e.setRenderTarget(t),e.render(a,s),d=t}this.fullscreenMaterial=l;for(let h=u.length-1;h>=0;--h){const t=u[h];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=c[h].texture,e.setRenderTarget(t),e.render(a,s),d=t}}setSize(e,t){const n=this.resolution;n.set(e,t);let r=n.width,i=n.height;for(let a=0,s=this.downsamplingMipmaps.length;a<s;++a)r=Math.round(.5*r),i=Math.round(.5*i),this.downsamplingMipmaps[a].setSize(r,i),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(r,i)}initialize(e,t,n){if(void 0!==n){const t=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const e of t)e.texture.type=n;if(n!==iX)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(null!==e&&e.outputColorSpace===EJ)for(const e of t)e.texture.colorSpace=EJ}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},Mre=class extends vre{constructor(){let{blendFunction:e=fre.SCREEN,luminanceThreshold:t=1,luminanceSmoothing:n=.03,mipmapBlur:r=!0,intensity:i=1,radius:a=.85,levels:s=8,kernelSize:o=yre.LARGE,resolutionScale:l=.5,width:c=hre.AUTO_SIZE,height:u=hre.AUTO_SIZE,resolutionX:d=c,resolutionY:h=u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}",{blendFunction:e,uniforms:new Map([["map",new T6(null)],["intensity",new T6(i)]])}),this.renderTarget=new rK(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new wre({kernelSize:o}),this.luminancePass=new _re({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new Cre,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new hre(this,d,h,l);p.addEventListener("change",(e=>this.setSize(p.baseWidth,p.baseHeight)))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,i.renderTarget):this.blurPass.render(e,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,r)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,n){this.blurPass.initialize(e,t,n),this.luminancePass.initialize(e,t,n),this.mipmapBlurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,null!==e&&e.outputColorSpace===EJ&&(this.renderTarget.texture.colorSpace=EJ))}},Tre=0,kre=1,Pre=0,Rre=2,Dre=3,Ire=class extends kQ{constructor(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super({name:"BokehMaterial",defines:{PASS:arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"2":"1"},uniforms:{inputBuffer:new T6(null),cocBuffer:new T6(null),texelSize:new T6(new RY),kernel64:new T6(null),kernel16:new T6(null),scale:new T6(1)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;\n#else\nfloat coc=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);\n#else\nvec2 step=texelSize*coc;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",vertexShader:$ne}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.scale}setScale(e){this.scale=e}generateKernel(){const e=new Float64Array(128),t=new Float64Array(32);let n=0,r=0;for(let i=0,a=Math.sqrt(80);i<80;++i){const s=2.39996323*i,o=Math.sqrt(i)/a,l=o*Math.cos(s),c=o*Math.sin(s);i%5===0?(t[r++]=l,t[r++]=c):(e[n++]=l,e[n++]=c)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function Bre(e,t,n){return e*(t-n)-t}function jre(e,t,n){return Math.min(Math.max((e+t)/(t-n),0),1)}var Fre=class extends kQ{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new T6(null),focusDistance:new T6(0),focusRange:new T6(0),cameraNear:new T6(.3),cameraFar:new T6(1e3)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nfloat depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nfloat depth=texture2D(depthBuffer,uv).r;\n#endif\n#ifdef LOG_DEPTH\nfloat d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;\n#endif\nreturn depth;}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:$ne}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bJ;this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-Bre(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=jre(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-Bre(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=jre(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof RQ?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Lre=class extends kQ{constructor(){super({name:"MaskMaterial",uniforms:{maskTexture:new T6(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),inputBuffer:new T6(null),strength:new T6(1)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 3\nvec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);\n#elif MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:$ne}),this.colorChannel=Tre,this.maskFunction=Pre}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==iX&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},Ore=class extends Zne{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";super("ShaderPass"),this.fullscreenMaterial=e,this.input=t}setInput(e){this.input=e}render(e,t,n,r,i){const a=this.fullscreenMaterial.uniforms;null!==t&&void 0!==a&&void 0!==a[this.input]&&(a[this.input].value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}initialize(e,t,n){void 0!==n&&n!==iX&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Nre=class extends vre{constructor(e){let{blendFunction:t,worldFocusDistance:n,worldFocusRange:r,focusDistance:i=0,focalLength:a=.1,focusRange:s=a,bokehScale:o=1,resolutionScale:l=1,width:c=hre.AUTO_SIZE,height:u=hre.AUTO_SIZE,resolutionX:d=c,resolutionY:h=u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform lowp sampler2D farCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);\n#if MASK_FUNCTION == 1\nvec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);\n#else\nvec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);\n#endif\nvec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}",{blendFunction:t,attributes:sre.DEPTH,uniforms:new Map([["nearColorBuffer",new T6(null)],["farColorBuffer",new T6(null)],["nearCoCBuffer",new T6(null)],["farCoCBuffer",new T6(null)],["scale",new T6(1)]])}),this.camera=e,this.renderTarget=new rK(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Ore(new Fre(e));const p=this.cocMaterial;p.focusDistance=i,p.focusRange=s,void 0!==n&&(p.worldFocusDistance=n),void 0!==r&&(p.worldFocusRange=r),this.blurPass=new wre({resolutionScale:l,resolutionX:d,resolutionY:h,kernelSize:yre.MEDIUM}),this.maskPass=new Ore(new Lre(this.renderTargetCoC.texture));this.maskPass.fullscreenMaterial.colorChannel=kre,this.maskFunction=Dre,this.bokehNearBasePass=new Ore(new Ire(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Ore(new Ire(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Ore(new Ire(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Ore(new Ire(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const f=this.resolution=new hre(this,d,h,l);f.addEventListener("change",(e=>this.setSize(f.baseWidth,f.baseHeight))),this.bokehScale=o}set mainCamera(e){this.camera=e,this.cocMaterial.copyCameraSettings(e)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(e){this.maskFunction!==e&&(this.defines.set("MASK_FUNCTION",e.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=e,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){this.bokehNearBasePass.fullscreenMaterial.scale=e,this.bokehNearFillPass.fullscreenMaterial.scale=e,this.bokehFarBasePass.fullscreenMaterial.scale=e,this.bokehFarFillPass.fullscreenMaterial.scale=e,this.maskPass.fullscreenMaterial.strength=e,this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){const t=this.camera;return jre(-t.position.distanceTo(e),t.near,t.far)}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bJ;this.cocMaterial.depthBuffer=e,this.cocMaterial.depthPacking=t}update(e,t,n){const r=this.renderTarget,i=this.renderTargetCoC,a=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(null!==this.target){const e=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=e}this.cocPass.render(e,null,i),this.blurPass.render(e,i,a),this.maskPass.render(e,t,s),this.bokehFarBasePass.render(e,s,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t);const r=n.width,i=n.height;this.cocPass.setSize(e,t),this.blurPass.setSize(e,t),this.maskPass.setSize(e,t),this.renderTargetFar.setSize(e,t),this.renderTargetCoC.setSize(e,t),this.renderTargetMasked.setSize(e,t),this.renderTarget.setSize(r,i),this.renderTargetNear.setSize(r,i),this.renderTargetCoCBlurred.setSize(r,i),this.bokehNearBasePass.fullscreenMaterial.setSize(e,t),this.bokehNearFillPass.fullscreenMaterial.setSize(e,t),this.bokehFarBasePass.fullscreenMaterial.setSize(e,t),this.bokehFarFillPass.fullscreenMaterial.setSize(e,t)}initialize(e,t,n){this.cocPass.initialize(e,t,n),this.maskPass.initialize(e,t,n),this.bokehNearBasePass.initialize(e,t,n),this.bokehNearFillPass.initialize(e,t,n),this.bokehFarBasePass.initialize(e,t,n),this.bokehFarFillPass.initialize(e,t,n),this.blurPass.initialize(e,t,iX),e.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,null!==e&&e.outputColorSpace===EJ&&(this.renderTarget.texture.colorSpace=EJ,this.renderTargetNear.texture.colorSpace=EJ,this.renderTargetFar.texture.colorSpace=EJ,this.renderTargetMasked.texture.colorSpace=EJ))}};var zre=class extends c2{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wX,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:iX;super(function(e,t,n){const r=new Map([[wX,1],[_X,2],[gX,4]]);let i;if(r.has(t)||console.error("Invalid noise texture format"),n===iX){i=new Uint8Array(e*r.get(t));for(let e=0,t=i.length;e<t;++e)i[e]=255*Math.random()+.5}else{i=new Float32Array(e*r.get(t));for(let e=0,t=i.length;e<t;++e)i[e]=Math.random()}return i}(e*t,n,r),e,t,n,r),this.needsUpdate=!0}};var Ure=class extends Zne{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new rre,this.overrideMaterialManager=null===n?null:new ure(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new ure(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){const a=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,c=a.background,u=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;null!==o&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,s):e.render(a,s),s.layers.mask=l,a.background=c,e.shadowMap.autoUpdate=u}};var Hre={DEFAULT:0,ESKIL:1},Gre=(Math.PI,class extends kQ{constructor(e){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new T6(null),normalBuffer:new T6(null),normalDepthBuffer:new T6(null),noiseTexture:new T6(null),inverseProjectionMatrix:new T6(new zK),projectionMatrix:new T6(new zK),texelSize:new T6(new RY),cameraNearFar:new T6(new RY),distanceCutoff:new T6(new RY),proximityCutoff:new T6(new RY),noiseScale:new T6(new RY),minRadiusScale:new T6(.33),intensity:new T6(1),fade:new T6(.01),bias:new T6(0)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef NORMAL_DEPTH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}\n#else\nuniform lowp sampler2D normalBuffer;\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}\n#endif\nuniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\n#endif\n}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);\n#ifdef PERSPECTIVE_CAMERA\nfloat linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);\n#else\nfloat linearSampleDepth=sampleDepth;\n#endif\nfloat proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){\n#ifdef NORMAL_DEPTH\nvec4 normalDepth=texture2D(normalDepthBuffer,vUv);\n#else\nvec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));\n#endif\nfloat ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);\n#ifdef PERSPECTIVE_CAMERA\nfloat linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);\n#else\nfloat linearDepth=depth;\n#endif\nif(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);\n#ifdef LEGACY_INTENSITY\nao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);\n#endif\n}gl_FragColor.r=ao;}",vertexShader:"uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.copyCameraSettings(e),this.resolution=new RY,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(e){this.uniforms.normalDepthBuffer.value=e,null!==e?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(e){this.normalDepthBuffer=e}set normalBuffer(e){this.uniforms.normalBuffer.value=e}setNormalBuffer(e){this.uniforms.normalBuffer.value=e}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bJ;this.depthBuffer=e,this.depthPacking=t}set noiseTexture(e){this.uniforms.noiseTexture.value=e}setNoiseTexture(e){this.uniforms.noiseTexture.value=e}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(e){this.defines.SAMPLES_INT=e.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/e).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(e){this.samples=e}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(e){this.defines.SPIRAL_TURNS=e.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(e){this.rings=e}get intensity(){return this.uniforms.intensity.value}set intensity(e){this.uniforms.intensity.value=e,void 0===this.defines.LEGACY_INTENSITY&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(e){this.uniforms.intensity.value=e}get fade(){return this.uniforms.fade.value}set fade(e){this.uniforms.fade.value=e}getFade(){return this.uniforms.fade.value}setFade(e){this.uniforms.fade.value=e}get bias(){return this.uniforms.bias.value}set bias(e){this.uniforms.bias.value=e}getBias(){return this.uniforms.bias.value}setBias(e){this.uniforms.bias.value=e}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(e){this.uniforms.minRadiusScale.value=e}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(e){this.uniforms.minRadiusScale.value=e}updateRadius(){const e=this.r*this.resolution.height;this.defines.RADIUS=e.toFixed(11),this.defines.RADIUS_SQ=(e*e).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(e){this.r=Math.min(Math.max(e,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(e){this.radius=e}get distanceScaling(){return!0}set distanceScaling(e){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(e){this.distanceScaling=e}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-Bre(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(e){this.distanceThreshold=jre(-e,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(e){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+e,0),1)}get worldDistanceFalloff(){return-Bre(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(e){this.distanceFalloff=jre(-e,this.near,this.far)}setDistanceCutoff(e,t){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+t,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-Bre(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(e){this.proximityThreshold=jre(-e,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(e){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+e,0),1)}get worldProximityFalloff(){return-Bre(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(e){this.proximityFalloff=jre(-e,this.near,this.far)}setProximityCutoff(e,t){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+t,0),1))}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNearFar.value.set(e.near,e.far),this.uniforms.projectionMatrix.value.copy(e.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(e.projectionMatrix).invert(),e instanceof RQ?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=this.uniforms,r=n.noiseTexture.value;null!==r&&n.noiseScale.value.set(e/r.image.width,t/r.image.height),n.texelSize.value.set(1/e,1/t),this.resolution.set(e,t),this.updateRadius()}}),Vre=class extends kQ{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new T6(null),normalBuffer:new T6(null),texelSize:new T6(new RY)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\n#ifdef DOWNSAMPLE_NORMALS\nuniform lowp sampler2D normalBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);\n#ifdef DOWNSAMPLE_NORMALS\nvec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;\n#else\nvec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);\n#endif\ngl_FragColor=vec4(n[index],d[index]);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}"})}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bJ;this.depthBuffer=e,this.depthPacking=t}set normalBuffer(e){this.uniforms.normalBuffer.value=e,null!==e?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(e){this.normalBuffer=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Wre=class extends Zne{constructor(){let{normalBuffer:e=null,resolutionScale:t=.5,width:n=hre.AUTO_SIZE,height:r=hre.AUTO_SIZE,resolutionX:i=n,resolutionY:a=r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("DepthDownsamplingPass");const s=new Vre;s.normalBuffer=e,this.fullscreenMaterial=s,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new rK(1,1,{minFilter:Jq,magFilter:Jq,depthBuffer:!1,type:uX}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new hre(this,i,a,t);o.addEventListener("change",(e=>this.setSize(o.baseWidth,o.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bJ;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}render(e,t,n,r,i){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(e,t)}initialize(e,t,n){const r=e.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},qre=class extends vre{constructor(e,t){let{blendFunction:n=fre.MULTIPLY,samples:r=9,rings:i=7,normalDepthBuffer:a=null,depthAwareUpsampling:s=!0,worldDistanceThreshold:o,worldDistanceFalloff:l,worldProximityThreshold:c,worldProximityFalloff:u,distanceThreshold:d=.97,distanceFalloff:h=.03,rangeThreshold:p=5e-4,rangeFalloff:f=.001,minRadiusScale:m=.1,luminanceInfluence:g=.7,radius:v=.1825,intensity:y=1,bias:x=.025,fade:b=.01,color:w=null,resolutionScale:S=1,width:_=hre.AUTO_SIZE,height:A=hre.AUTO_SIZE,resolutionX:E=_,resolutionY:C=A}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super("SSAOEffect","uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;\n#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\n#endif\n#ifdef COLORIZE\nuniform vec3 color;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;\n#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300\nvec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);\n#else\nfloat ao=aoLinear;\n#endif\nfloat l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);\n#ifdef COLORIZE\noutputColor=vec4(1.0-ao*(1.0-color),inputColor.a);\n#else\noutputColor=vec4(vec3(1.0-ao),inputColor.a);\n#endif\n}",{blendFunction:n,attributes:sre.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new T6(null)],["normalDepthBuffer",new T6(a)],["luminanceInfluence",new T6(g)],["color",new T6(null)],["intensity",new T6(y)],["scale",new T6(0)]])}),this.renderTarget=new rK(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const M=this.resolution=new hre(this,E,C,S);M.addEventListener("change",(e=>this.setSize(M.baseWidth,M.baseHeight))),this.camera=e,this.depthDownsamplingPass=new Wre({normalBuffer:t,resolutionScale:S}),this.depthDownsamplingPass.enabled=null===a,this.ssaoPass=new Ore(new Gre(e));const T=new zre(64,64,gX);T.wrapS=T.wrapT=Wq;const k=this.ssaoMaterial;k.normalBuffer=t,k.noiseTexture=T,k.minRadiusScale=m,k.samples=r,k.radius=v,k.rings=i,k.fade=b,k.bias=x,k.distanceThreshold=d,k.distanceFalloff=h,k.proximityThreshold=p,k.proximityFalloff=f,void 0!==o&&(k.worldDistanceThreshold=o),void 0!==l&&(k.worldDistanceFalloff=l),void 0!==c&&(k.worldProximityThreshold=c),void 0!==u&&(k.worldProximityFalloff=u),null!==a&&(this.ssaoMaterial.normalDepthBuffer=a,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=s,this.color=w}set mainCamera(e){this.camera=e,this.ssaoMaterial.copyCameraSettings(e)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(e){this.ssaoMaterial.normalBuffer=e,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=e}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(e){this.ssaoMaterial.samples=e}get rings(){return this.ssaoMaterial.rings}set rings(e){this.ssaoMaterial.rings=e}get radius(){return this.ssaoMaterial.radius}set radius(e){this.ssaoMaterial.radius=e}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(e){this.depthAwareUpsampling!==e&&(e?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(e){this.depthAwareUpsampling=e}get distanceScaling(){return!0}set distanceScaling(e){}get color(){return this.uniforms.get("color").value}set color(e){const t=this.uniforms,n=this.defines;null!==e?n.has("COLORIZE")?t.get("color").value.set(e):(n.set("COLORIZE","1"),t.get("color").value=new TZ(e),this.setChanged()):n.has("COLORIZE")&&(n.delete("COLORIZE"),t.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(e){this.uniforms.get("luminanceInfluence").value=e}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getColor(){return this.color}setColor(e){this.color=e}setDistanceCutoff(e,t){this.ssaoMaterial.distanceThreshold=e,this.ssaoMaterial.distanceFalloff=t}setProximityCutoff(e,t){this.ssaoMaterial.proximityThreshold=e,this.ssaoMaterial.proximityFalloff=t}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bJ;this.depthDownsamplingPass.setDepthTexture(e,t),this.ssaoMaterial.depthBuffer=e,this.ssaoMaterial.depthPacking=t}update(e,t,n){const r=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(e),this.ssaoPass.render(e,null,r)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t);const r=n.width,i=n.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(r,i),this.renderTarget.setSize(r,i),this.depthDownsamplingPass.resolution.scale=n.scale,this.depthDownsamplingPass.setSize(e,t)}initialize(e,t,n){try{let r=this.uniforms.get("normalDepthBuffer").value;null===r&&(this.depthDownsamplingPass.initialize(e,t,n),r=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=r,this.ssaoMaterial.normalDepthBuffer=r,this.defines.set("NORMAL_DEPTH","1"))}catch(Zie){this.depthDownsamplingPass.enabled=!1}}},Xre=class extends kQ{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super({name:"EffectMaterial",defines:{THREE_REVISION:DW.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new T6(null),depthBuffer:new T6(null),resolution:new T6(new RY),texelSize:new T6(new RY),cameraNear:new T6(.3),cameraFar:new T6(1e3),aspect:new T6(1),time:new T6(0)},blending:XW,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bJ;this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(ore.FRAGMENT_HEAD,e.get(ore.FRAGMENT_HEAD)||"").replace(ore.FRAGMENT_MAIN_UV,e.get(ore.FRAGMENT_MAIN_UV)||"").replace(ore.FRAGMENT_MAIN_IMAGE,e.get(ore.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(ore.VERTEX_HEAD,e.get(ore.VERTEX_HEAD)||"").replace(ore.VERTEX_MAIN_SUPPORT,e.get(ore.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof RQ?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return ore}},Jre=(Number(DW.replace(/\D+/g,"")),255/256);new Float32Array([5.9371814131736755e-8,Jre/65536,.0038909912109375,Jre]),new Float32Array([Jre,.0038909912109375,Jre/65536,1/256**3]);function Yre(e,t,n){for(const r of t){const t="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),i=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(i,t))}}function Kre(e,t,n){let r=t.getFragmentShader(),i=t.getVertexShader();const a=void 0!==r&&/mainImage/.test(r),s=void 0!==r&&/mainUv/.test(r);if(n.attributes|=t.getAttributes(),void 0===r)throw new Error("Missing fragment shader (".concat(t.name,")"));if(s&&0!==(n.attributes&sre.CONVOLUTION))throw new Error("Effects that transform UVs are incompatible with convolution effects (".concat(t.name,")"));if(!a&&!s)throw new Error("Could not find mainImage or mainUv function (".concat(t.name,")"));{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts;let c=l.get(ore.FRAGMENT_HEAD)||"",u=l.get(ore.FRAGMENT_MAIN_UV)||"",d=l.get(ore.FRAGMENT_MAIN_IMAGE)||"",h=l.get(ore.VERTEX_HEAD)||"",p=l.get(ore.VERTEX_MAIN_SUPPORT)||"";const f=new Set,m=new Set;if(s&&(u+="\t".concat(e,"MainUv(UV);\n"),n.uvTransformation=!0),null!==i&&/mainSupport/.test(i)){const t=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);p+="\t".concat(e,"MainSupport("),p+=t?"vUv);\n":");\n";for(const e of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const t of e[1].split(/\s*,\s*/))n.varyings.add(t),f.add(t),m.add(t);for(const e of i.matchAll(o))m.add(e[1])}for(const e of r.matchAll(o))m.add(e[1]);for(const e of t.defines.keys())m.add(e.replace(/\([\w\s,]*\)/g,""));for(const e of t.uniforms.keys())m.add(e);m.delete("while"),m.delete("for"),m.delete("if"),t.uniforms.forEach(((t,r)=>n.uniforms.set(e+r.charAt(0).toUpperCase()+r.slice(1),t))),t.defines.forEach(((t,r)=>n.defines.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)));const g=new Map([["fragment",r],["vertex",i]]);Yre(e,m,n.defines),Yre(e,m,g),r=g.get("fragment"),i=g.get("vertex");const v=t.blendMode;if(n.blendModes.set(v.blendFunction,v),a){null!==t.inputColorSpace&&t.inputColorSpace!==n.colorSpace&&(d+=t.inputColorSpace===EJ?"color0 = sRGBTransferOETF(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),t.outputColorSpace!==AJ?n.colorSpace=t.outputColorSpace:null!==t.inputColorSpace&&(n.colorSpace=t.inputColorSpace);const i=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+="".concat(e,"MainImage(color0, UV, "),0!==(n.attributes&sre.DEPTH)&&i.test(r)&&(d+="depth, ",n.readDepth=!0),d+="color1);\n\t";const a=e+"BlendOpacity";n.uniforms.set(a,v.opacity),d+="color0 = blend".concat(v.blendFunction,"(color0, color1, ").concat(a,");\n\n\t"),c+="uniform float ".concat(a,";\n\n")}if(c+=r+"\n",null!==i&&(h+=i+"\n"),l.set(ore.FRAGMENT_HEAD,c),l.set(ore.FRAGMENT_MAIN_UV,u),l.set(ore.FRAGMENT_MAIN_IMAGE,d),l.set(ore.VERTEX_HEAD,h),l.set(ore.VERTEX_MAIN_SUPPORT,p),null!==t.extensions)for(const e of t.extensions)n.extensions.add(e)}}var Zre=class extends Zne{constructor(e){super("EffectPass"),this.fullscreenMaterial=new Xre(null,null,null,e),this.listener=e=>this.handleEvent(e),this.effects=[];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.setEffects(n),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort(((e,t)=>t.attributes-e.attributes));for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new lre;let t=0;for(const s of this.effects)if(s.blendMode.blendFunction===fre.DST)e.attributes|=s.getAttributes()&sre.DEPTH;else{if(0!==(e.attributes&s.getAttributes()&sre.CONVOLUTION))throw new Error("Convolution effects cannot be merged (".concat(s.name,")"));Kre("e"+t++,s,e)}let n=e.shaderParts.get(ore.FRAGMENT_HEAD),r=e.shaderParts.get(ore.FRAGMENT_MAIN_IMAGE),i=e.shaderParts.get(ore.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const s of e.blendModes.values())n+=s.getShaderCode().replace(a,"blend".concat(s.blendFunction))+"\n";0!==(e.attributes&sre.DEPTH)?(e.readDepth&&(r="float depth = readDepth(UV);\n\n\t"+r),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,e.colorSpace===EJ&&(r+="color0 = sRGBToLinear(color0);\n\t"),e.uvTransformation?(i="vec2 transformedUv = vUv;\n"+i,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(ore.FRAGMENT_HEAD,n),e.shaderParts.set(ore.FRAGMENT_MAIN_IMAGE,r),e.shaderParts.set(ore.FRAGMENT_MAIN_UV,i);for(const[s,o]of e.shaderParts)null!==o&&e.shaderParts.set(s,o.trim().replace(/^#/,"\n#"));this.skipRendering=0===t,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bJ;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,i){for(const a of this.effects)a.update(e,t,r);if(!this.skipRendering||this.renderToScreen){const i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=r*this.timeScale,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(const r of this.effects)r.initialize(e,t,n);this.updateMaterial(),void 0!==n&&n!==iX&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){if("change"===e.type)this.recompile()}},Qre=class extends Zne{constructor(e,t){let{renderTarget:n,resolutionScale:r=1,width:i=hre.AUTO_SIZE,height:a=hre.AUTO_SIZE,resolutionX:s=i,resolutionY:o=a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super("NormalPass"),this.needsSwap=!1,this.renderPass=new Ure(e,t,new O5);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new TZ(7829503),c.overrideClearAlpha=1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new rK(1,1,{minFilter:Jq,magFilter:Jq}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new hre(this,s,o,r);u.addEventListener("change",(e=>this.setSize(u.baseWidth,u.baseHeight)))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a,a)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}};new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]);new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]);eie(0,0,0,0),new Float32Array([0,0,0,0]),eie(0,0,0,1),new Float32Array([0,0,0,1]),eie(0,0,1,0),new Float32Array([0,0,1,0]),eie(0,0,1,1),new Float32Array([0,0,1,1]),eie(0,1,0,0),new Float32Array([0,1,0,0]),eie(0,1,0,1),new Float32Array([0,1,0,1]),eie(0,1,1,0),new Float32Array([0,1,1,0]),eie(0,1,1,1),new Float32Array([0,1,1,1]),eie(1,0,0,0),new Float32Array([1,0,0,0]),eie(1,0,0,1),new Float32Array([1,0,0,1]),eie(1,0,1,0),new Float32Array([1,0,1,0]),eie(1,0,1,1),new Float32Array([1,0,1,1]),eie(1,1,0,0),new Float32Array([1,1,0,0]),eie(1,1,0,1),new Float32Array([1,1,0,1]),eie(1,1,1,0),new Float32Array([1,1,1,0]),eie(1,1,1,1),new Float32Array([1,1,1,1]);function $re(e,t,n){return e+(t-e)*n}function eie(e,t,n,r){const i=$re(e,t,.75),a=$re(n,r,.75);return $re(i,a,.875)}let tie;function nie(){var e;if(void 0!==tie)return tie;try{let t;const n=document.createElement("canvas");return tie=!(!window.WebGL2RenderingContext||!(t=n.getContext("webgl2"))),t&&(null==(e=t.getExtension("WEBGL_lose_context"))||e.loseContext()),tie}catch(Zie){return tie=!1}}const rie=(0,r.createContext)(null),iie=e=>(e.getAttributes()&sre.CONVOLUTION)===sre.CONVOLUTION,aie=r.memo((0,r.forwardRef)(((e,t)=>{let{children:n,camera:i,scene:a,resolutionScale:s,enabled:o=!0,renderPriority:l=1,autoClear:c=!0,depthBuffer:u,enableNormalPass:d,stencilBuffer:h,multisampling:p=8,frameBufferType:f=dX}=e;const{gl:m,scene:g,camera:v,size:y}=D9(),x=a||g,b=i||v,[w,S,_]=(0,r.useMemo)((()=>{const e=nie(),t=new are(m,{depthBuffer:u,stencilBuffer:h,multisampling:p>0&&e?p:0,frameBufferType:f});t.addPass(new Ure(x,b));let n=null,r=null;return d&&(r=new Qre(x,b),r.enabled=!1,t.addPass(r),void 0!==s&&e&&(n=new Wre({normalBuffer:r.texture,resolutionScale:s}),n.enabled=!1,t.addPass(n))),[t,r,n]}),[b,m,u,h,p,f,x,d,s]);(0,r.useEffect)((()=>null==w?void 0:w.setSize(y.width,y.height)),[w,y]),I9(((e,t)=>{if(o){const e=m.autoClear;m.autoClear=c,h&&!c&&m.clearStencil(),w.render(t),m.autoClear=e}}),o?l:0);const A=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{var e;const t=[],n=null==(e=A.current)?void 0:e.__r3f;if(n&&w){const e=n.objects;for(let n=0;n<e.length;n++){const r=e[n];if(r instanceof vre){const i=[r];if(!iie(r)){let t=null;for(;(t=e[n+1])instanceof vre&&!iie(t);)i.push(t),n++}const a=new Zre(b,...i);t.push(a)}else r instanceof Zne&&t.push(r)}for(const n of t)null==w||w.addPass(n);S&&(S.enabled=!0),_&&(_.enabled=!0)}return()=>{for(const e of t)null==w||w.removePass(e);S&&(S.enabled=!1),_&&(_.enabled=!1)}}),[w,n,b,S,_]),(0,r.useEffect)((()=>{const e=m.toneMapping;return m.toneMapping=Pq,()=>{m.toneMapping=e}}),[m]);const E=(0,r.useMemo)((()=>({composer:w,normalPass:S,downSamplingPass:_,resolutionScale:s,camera:b,scene:x})),[w,S,_,s,b,x]);return(0,r.useImperativeHandle)(t,(()=>w),[w]),(0,ur.jsx)(rie.Provider,{value:E,children:(0,ur.jsx)("group",{ref:A,children:n})})}))),sie=(0,r.forwardRef)((function(e,t){const{camera:n,normalPass:i,downSamplingPass:a,resolutionScale:s}=(0,r.useContext)(rie),o=(0,r.useMemo)((()=>null===i&&null===a?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),{}):new qre(n,i&&!a?i.texture:null,(0,c.A)({blendFunction:fre.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:a?a.texture:null,resolutionScale:null!=s?s:1,depthAwareUpsampling:!0},e))),[n,a,i,s]);return(0,ur.jsx)("primitive",{ref:t,object:o,dispose:null})})),oie=["blendFunction","opacity"];let lie=0;const cie=new WeakMap,uie=(e,t)=>r.forwardRef((function(n,i){let{blendFunction:a=(null==t?void 0:t.blendFunction),opacity:s=(null==t?void 0:t.opacity)}=n,o=y(n,oie),l=cie.get(e);if(!l){const t="@react-three/postprocessing/".concat(e.name,"-").concat(lie++);z8({[t]:e}),cie.set(e,l=t)}const u=D9((e=>e.camera)),d=r.useMemo((()=>{var e,n;return[...null!=(e=null==t?void 0:t.args)?e:[],...null!=(n=o.args)?n:[(0,c.A)((0,c.A)({},t),o)]]}),[JSON.stringify(o)]);return(0,ur.jsx)(l,(0,c.A)((0,c.A)({camera:u,"blendMode-blendFunction":a,"blendMode-opacity-value":s},o),{},{ref:i,args:d}))})),die=uie(Mre,{blendFunction:fre.ADD}),hie=["blendFunction","worldFocusDistance","worldFocusRange","focusDistance","focusRange","focalLength","bokehScale","resolutionScale","resolutionX","resolutionY","width","height","target","depthTexture"],pie=(0,r.forwardRef)((function(e,t){let{blendFunction:n,worldFocusDistance:i,worldFocusRange:a,focusDistance:s,focusRange:o,focalLength:l,bokehScale:u,resolutionScale:d,resolutionX:h,resolutionY:p,width:f,height:m,target:g,depthTexture:v}=e,x=y(e,hie);const{camera:b}=(0,r.useContext)(rie),w=null!=g,S=(0,r.useMemo)((()=>{const e=new Nre(b,{blendFunction:n,worldFocusDistance:i,worldFocusRange:a,focusDistance:s,focusRange:o,focalLength:l,bokehScale:u,resolutionScale:d,resolutionX:h,resolutionY:p,width:f,height:m});w&&(e.target=new uK),v&&e.setDepthTexture(v.texture,v.packing);return e.maskPass.maskFunction=Rre,e}),[b,n,i,a,s,o,l,u,d,h,p,f,m,w,v]);return(0,r.useEffect)((()=>()=>{S.dispose()}),[S]),(0,ur.jsx)("primitive",(0,c.A)((0,c.A)({},x),{},{ref:t,object:S,target:g}))})),fie=uie(class extends vre{constructor(){let{blendFunction:e,eskil:t=!1,technique:n=(t?Hre.ESKIL:Hre.DEFAULT),offset:r=.5,darkness:i=.5}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",n.toFixed(0)]]),uniforms:new Map([["offset",new T6(r)],["darkness",new T6(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Hre.ESKIL}set eskil(e){this.technique=e?Hre.ESKIL:Hre.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}});function mie(e){let{url:t}=e;const{scene:n}=wte(t,!0);return(0,r.useMemo)((()=>{n&&function(e){e.traverse((e=>{const t=e.material;t&&(t.isMeshStandardMaterial||t.isMeshPhysicalMaterial)&&(t.envMapIntensity=1,/eye|cornea|pupil|iris/i.test(e.name)&&t.isMeshPhysicalMaterial&&(t.clearcoat=1,t.clearcoatRoughness=.05,t.ior=1.45,t.specularIntensity=.8,t.roughness=.1,t.metalness=0),/skin|face|head|body/i.test(e.name)&&t.isMeshPhysicalMaterial&&(t.sheen=.35,t.sheenRoughness=.6,t.metalness=0,t.roughness=.45,t.ior=1.4,t.specularIntensity=.4,t.transmission=0,t.thickness=.15),/hair/i.test(e.name)&&t.isMeshPhysicalMaterial&&(t.metalness=0,t.roughness=.35,t.clearcoat=.6,t.clearcoatRoughness=.2),t.needsUpdate=!0)}))}(n)}),[n]),(0,ur.jsx)(Mte,{fit:!0,clip:!0,observe:!0,margin:1.2,children:(0,ur.jsx)(kte,{children:(0,ur.jsx)("primitive",{object:n})})})}function gie(e){let{url:t,quality:n="high"}=e;if(!("string"===typeof t&&/\.(glb|gltf|vrm)(\?|#|$)/i.test(t)))return(0,ur.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#eee"},children:"Set a GLB/GLTF URL for cinematic render."});const i=Math.min(window.devicePixelRatio||1,"ultra"===n?2:1.5);return(0,ur.jsxs)(b7,{dpr:i,camera:{position:[0,1.5,2.4],fov:35},gl:{antialias:!0,physicallyCorrectLights:!0},onCreated:e=>{let{gl:t}=e;t.toneMappingExposure=1},shadows:!0,children:[(0,ur.jsxs)(r.Suspense,{fallback:null,children:[(0,ur.jsx)("ambientLight",{intensity:.3}),(0,ur.jsx)("directionalLight",{castShadow:!0,intensity:1.2,position:[2.2,3,1.5],"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),(0,ur.jsx)("directionalLight",{intensity:.5,position:[-2.5,1.5,-2],color:10070783}),(0,ur.jsx)("directionalLight",{intensity:.6,position:[0,2,-1.5],color:16762017}),(0,ur.jsx)(Gne,{preset:"studio"}),(0,ur.jsx)(mie,{url:t}),(0,ur.jsx)(Xne,{opacity:.35,blur:2.5,scale:10,far:4.5}),(0,ur.jsxs)(aie,{children:[(0,ur.jsx)(sie,{samples:16,radius:.15,intensity:20,luminanceInfluence:.6,color:"black"}),(0,ur.jsx)(die,{intensity:.6,luminanceThreshold:.8,luminanceSmoothing:.2,mipmapBlur:!0}),(0,ur.jsx)(pie,{focusDistance:.02,focalLength:.045,bokehScale:1.8,height:480}),(0,ur.jsx)(fie,{eskil:!1,offset:.2,darkness:.6})]})]}),(0,ur.jsx)(D7,{enablePan:!1,minDistance:1.4,maxDistance:3.2,target:[0,1.4,0]})]})}function vie(e){let{onMood:t,enabled:n,onError:i}=e;const a=(0,r.useRef)(null),[s,o]=(0,r.useState)("idle"),l=(0,r.useRef)(null),c=(0,r.useRef)(0);return(0,r.useEffect)((()=>{let e;const r=()=>{const e=l.current,n=a.current;if(!e||!n||n.readyState<2)return void(c.current=requestAnimationFrame(r));const i=performance.now();try{var s,o;const r=e.detectForVideo(n,i),a=function(e){if(!e||0===e.length)return null;const t=new Map(e.map((e=>[e.categoryName,e.score]))),n=((t.get("mouthSmileLeft")||0)+(t.get("mouthSmileRight")||0))/2,r=t.get("kiss")||0,i=((t.get("eyeSquintLeft")||0)+(t.get("eyeSquintRight")||0))/2,a=((t.get("browDownLeft")||0)+(t.get("browDownRight")||0))/2,s=((t.get("mouthFrownLeft")||0)+(t.get("mouthFrownRight")||0))/2;return r>.4?"kiss":n>.5&&i>.3?"laugh":n>.35?"smile":a>.4||s>.35?"sad":null}((null===r||void 0===r||null===(s=r.faceBlendshapes)||void 0===s||null===(o=s[0])||void 0===o?void 0:o.categories)||[]);a&&t&&t(a)}catch(u){}c.current=requestAnimationFrame(r)};return n&&(async()=>{try{o("loading");const{FaceLandmarker:t,FilesetResolver:n}=await __webpack_require__.e(277).then(__webpack_require__.bind(__webpack_require__,9277)),i=await n.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/wasm"),s=await t.createFromOptions(i,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task"},outputFaceBlendshapes:!0,runningMode:"VIDEO",numFaces:1});l.current=s,e=await navigator.mediaDevices.getUserMedia({video:{width:320,height:240}}),a.current&&(a.current.srcObject=e,await a.current.play()),o("running"),r()}catch(Zie){o("error"),i&&i(Zie)}})(),()=>{var t,n;cancelAnimationFrame(c.current),null===(t=l.current)||void 0===t||null===(n=t.close)||void 0===n||n.call(t),e&&e.getTracks().forEach((e=>e.stop())),l.current=null,o("idle")}}),[n,t,i]),(0,ur.jsxs)(pr,{children:[(0,ur.jsx)("video",{ref:a,width:0,height:0,style:{position:"absolute",opacity:0,pointerEvents:"none"}}),"error"===s&&(0,ur.jsx)(Jr,{color:"red.400",children:"Camera/Model error"})]})}function yie(){const e=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const t=e.current;if(!t)return;const n=t.getContext("2d");let r;const i=Math.min(2,window.devicePixelRatio||1),a=Array.from({length:60}).map((()=>({x:Math.random(),y:Math.random(),r:.5+1.5*Math.random(),s:.6*Math.random()+.2})));function s(){t.width=t.clientWidth*i,t.height=t.clientHeight*i}const o=()=>{s()};return s(),function e(){const{width:s,height:o}=t,l=n.createLinearGradient(0,0,s,o);l.addColorStop(0,"rgba(255, 0, 128, 0.15)"),l.addColorStop(1,"rgba(0, 200, 255, 0.12)"),n.fillStyle=l,n.fillRect(0,0,s,o);for(let t=0;t<4;t++){const e=(.2+.2*t)*s,r=(.3+t%2*.2)*o,a=120*i,l=n.createRadialGradient(e,r,0,e,r,a);l.addColorStop(0,"rgba(255,255,255,0.12)"),l.addColorStop(1,"rgba(255,255,255,0)"),n.fillStyle=l,n.beginPath(),n.arc(e,r,a,0,2*Math.PI),n.fill()}a.forEach((e=>{e.x+=.001*(Math.random()-.5),e.y+=.001*(Math.random()-.5),e.x<0&&(e.x=1),e.x>1&&(e.x=0),e.y<0&&(e.y=1),e.y>1&&(e.y=0);const t=e.x*s,r=e.y*o,a=e.r*i;n.fillStyle="rgba(255,255,255,0.25)",n.beginPath(),n.arc(t,r,a,0,2*Math.PI),n.fill()})),r=requestAnimationFrame(e)}(),window.addEventListener("resize",o),()=>{cancelAnimationFrame(r),window.removeEventListener("resize",o)}}),[]),(0,ur.jsx)("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:0},children:(0,ur.jsx)("canvas",{ref:e,style:{width:"100%",height:"100%",display:"block"}})})}function xie(e){let{active:t=!1,color:n="rgba(255,105,180,0.9)"}=e;const i=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=i.current;if(!e)return;const r=e.getContext("2d");let a;const s=Math.min(2,window.devicePixelRatio||1);function o(){e.width=e.clientWidth*s,e.height=e.clientHeight*s}let l=0;const c=()=>o();return o(),function i(){const{width:o,height:c}=e;r.clearRect(0,0,o,c);const u=c/2,d=t?.25*c:.08*c;for(let e=0;e<3;e++){const t=.8+.15*e,i=.02*l*(e+1);r.beginPath(),r.strokeStyle=n,r.lineWidth=2*s;for(let n=0;n<o;n+=2*s){const a=u+Math.sin(n/o*Math.PI*2*t+i)*d*(1-.22*e);0===n?r.moveTo(n,a):r.lineTo(n,a)}r.stroke()}l+=t?2:1,a=requestAnimationFrame(i)}(),window.addEventListener("resize",c),()=>{cancelAnimationFrame(a),window.removeEventListener("resize",c)}}),[t,n]),(0,ur.jsx)("div",{style:{position:"absolute",inset:0,pointerEvents:"none"},children:(0,ur.jsx)("canvas",{ref:i,style:{width:"100%",height:"100%"}})})}const bie=[{id:"friendly",label:"Friendly"},{id:"romantic",label:"Romantic"},{id:"caring",label:"Caring (Mom-like)"},{id:"supportive",label:"Supportive (Wife-like)"},{id:"playful",label:"Playful (GF-like)"},{id:"professional",label:"Professional"}];function wie(){var e,t,n,i,a,s,o,l,u,d,h;const p=(0,r.useMemo)((()=>"http://localhost:5000"),[]),f=m_(),m=(0,r.useCallback)((e=>"string"===typeof e&&/\.(glb|gltf|vrm)(\?|#|$)/i.test(e)),[]),[g,v]=(0,r.useState)(null),[y,x]=(0,r.useState)("friendly"),[b,w]=(0,r.useState)(""),[S,_]=(0,r.useState)([]),[A,E]=(0,r.useState)(!1),[C,M]=(0,r.useState)(!0),[T,k]=(0,r.useState)("auto"),P=(0,r.useRef)(null),[R,D]=(0,r.useState)(!1),I=(0,r.useRef)(null),[B,j]=(0,r.useState)([]),[F,L]=(0,r.useState)(""),[O,N]=(0,r.useState)(!1),z=(0,r.useRef)(null),[U,H]=(0,r.useState)(""),[G,V]=(0,r.useState)(""),[W,q]=(0,r.useState)(""),[X,J]=(0,r.useState)(""),[Y,K]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)(null),[$,ee]=(0,r.useState)(!1),[te,ne]=(0,r.useState)(""),[re,ie]=(0,r.useState)(""),[ae,se]=(0,r.useState)(""),oe=(0,r.useRef)(null),le=(0,r.useRef)(""),ce=(0,r.useRef)(null),[ue,de]=(0,r.useState)(null),he=(0,r.useRef)(null),[pe,fe]=(0,r.useState)([]),[me,ge]=(0,r.useState)(!1),ve=(0,r.useRef)(0),[ye,xe]=(0,r.useState)((()=>"1"===localStorage.getItem("assistant:enterToSend"))),[be,we]=(0,r.useState)(.7),[Se,_e]=(0,r.useState)([]),[Ae,Ee]=(0,r.useState)((()=>{try{return JSON.parse(localStorage.getItem("assistant:threads")||"[]")||[]}catch(e){return[]}})),Ce=(0,r.useCallback)((e=>{try{localStorage.setItem("assistant:threads",JSON.stringify(e))}catch(t){}Ee(e)}),[]),Me=(0,r.useMemo)((()=>[{key:"custom",label:"Custom (manual)"},{key:"friendly",label:"Friendly BFF",prompt:"You are a cheerful, supportive best friend. Keep it concise, warm, and optimistic. Encourage, never lecture.",traits:["cheerful","supportive","casual","optimistic"]},{key:"coach",label:"Productivity Coach",prompt:"You are a pragmatic productivity coach. Give short, actionable guidance, step-by-step plans, and maintain accountability.",traits:["pragmatic","direct","motivational","structured"]},{key:"romantic",label:"Romantic Partner",prompt:"You are a romantic, caring partner. Be affectionate without being explicit. Focus on emotional connection and reassurance.",traits:["affectionate","reassuring","gentle","attentive"]},{key:"ceo",label:"CEO Mentor",prompt:"You are a seasoned CEO mentor. Be concise, strategic, and data-driven. Ask clarifying questions before delivering advice.",traits:["strategic","concise","probing","data-driven"]},{key:"teacher",label:"Calm Teacher",prompt:"You are a calm, patient teacher. Explain simply, use examples, and check understanding. Prefer short chunks.",traits:["patient","clear","example-driven","encouraging"]}]),[]),Te=async e=>{try{const t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({appearance:e})});t.ok&&v(await t.json())}catch(t){}},ke=window.speechSynthesis,Pe=e=>{if(e&&ke&&(!g||!g.settings||!1!==g.settings.autoSpeak))try{var t,n,r,i,a;if(m(null===g||void 0===g||null===(t=g.appearance)||void 0===t?void 0:t.avatarUrl)&&null!==(n=P.current)&&void 0!==n&&n.speakText)return void P.current.speakText(e);const s=new SpeechSynthesisUtterance(e),o=(()=>{var e;const t=B.length?B:(null===ke||void 0===ke||null===(e=ke.getVoices)||void 0===e?void 0:e.call(ke))||[],n=t.find((e=>{var t;return e.name===(F||(null===g||void 0===g||null===(t=g.voice)||void 0===t?void 0:t.name))}));if(n)return n;const r=t.find((e=>/female|woman/i.test(e.name)))||t.find((e=>{var t;return null===(t=e.lang)||void 0===t?void 0:t.startsWith("en-")}));return r||t[0]})();o&&(s.voice=o),s.rate=Math.min(1.15,Math.max(.9,(null===g||void 0===g||null===(r=g.voice)||void 0===r?void 0:r.rate)||1)),s.pitch=Math.min(1.3,Math.max(.7,(null===g||void 0===g||null===(i=g.voice)||void 0===i?void 0:i.pitch)||1)),s.volume=Math.min(1,Math.max(.2,(null===g||void 0===g||null===(a=g.voice)||void 0===a?void 0:a.volume)||1)),s.onstart=()=>E(!0),s.onend=()=>E(!1),ke.cancel(),ke.speak(s)}catch(s){}};(0,r.useEffect)((()=>{var e;const t=window.SpeechRecognition||window.webkitSpeechRecognition;if(!t)return;const n=new t;n.lang=(null===g||void 0===g||null===(e=g.voice)||void 0===e?void 0:e.accent)||"en-US",n.interimResults=!0,n.continuous=!0,n.onresult=e=>{let t="";for(let n=e.resultIndex;n<e.results.length;n++)t+=e.results[n][0].transcript;w(t),ve.current=Date.now()},n.onend=()=>N(!1),n.onerror=()=>N(!1),z.current=n}),[g]);const Re=(0,r.useCallback)((()=>{const e=z.current;if(e)if(O){try{e.stop()}catch(t){}N(!1)}else try{e.start(),N(!0)}catch(n){}}),[O]);(0,r.useEffect)((()=>{try{ce.current=new Audio(OD),ce.current.volume=.4}catch(e){}}),[]);const De=(0,r.useCallback)((()=>{var e,t,n,r;const i=Z||RW((null===(e=S[S.length-1])||void 0===e?void 0:e.text)||""),a={speaking:A,mood:i,appearance:null===g||void 0===g?void 0:g.appearance},s=m(null===g||void 0===g||null===(t=g.appearance)||void 0===t?void 0:t.avatarUrl);switch(T){case"stylized":return(0,ur.jsx)(B7,(0,c.A)({},a));case"shinchan":return(0,ur.jsx)(F7,(0,c.A)({},a));case"goku":return(0,ur.jsx)(O7,{speaking:A,mood:i,isSSJ:!0===(null===g||void 0===g||null===(n=g.appearance)||void 0===n?void 0:n.gokuSuperSaiyan)});case"pm":return(0,ur.jsx)(z7,{speaking:A,mood:i});case"ben10":return(0,ur.jsx)(H7,{speaking:A,mood:i});case"gojo":return(0,ur.jsx)(nee,{speaking:A,mood:i,showBlindfold:!1!==(null===g||void 0===g||null===(r=g.appearance)||void 0===r?void 0:r.gojoBlindfold)});case"billgates":return(0,ur.jsx)(iee,{speaking:A,mood:i});case"sundar":return(0,ur.jsx)(oee,{speaking:A,mood:i});case"talkinghead":return s?(0,ur.jsx)(cee,{ref:P,url:g.appearance.avatarUrl,speaking:A,mood:i,onSpeakStart:()=>E(!0),onSpeakEnd:()=>E(!1)}):(0,ur.jsx)(B7,(0,c.A)({},a));case"cinematic":return s?(0,ur.jsx)(gie,{url:g.appearance.avatarUrl}):(0,ur.jsx)(B7,(0,c.A)({},a));default:return s?C?(0,ur.jsx)(gie,{url:g.appearance.avatarUrl}):(0,ur.jsx)(cee,{ref:P,url:g.appearance.avatarUrl,speaking:A,mood:i,onSpeakStart:()=>E(!0),onSpeakEnd:()=>E(!1)}):(0,ur.jsx)(B7,(0,c.A)({},a))}}),[T,C,m,Z,S,g,A]);(0,r.useEffect)((()=>{(async()=>{try{let e=localStorage.getItem("assistant:conversationId");e||(e="".concat(Date.now().toString(36)).concat(Math.random().toString(36).slice(2,8)),localStorage.setItem("assistant:conversationId",e)),I.current=e,de(e),Ee((t=>{const n=t.some((t=>t.id===e));if(n)return t;const r=[...t,{id:e,title:"Thread "+(new Date).toLocaleString()}];return Ce(r),r}))}catch(e){}})()}),[]),(0,r.useEffect)((()=>{if(ue)try{const e=localStorage.getItem("assistant:msgs:".concat(ue));if(e){const t=JSON.parse(e);Array.isArray(t)&&_(t)}}catch(e){}}),[ue]),(0,r.useEffect)((()=>{if(ue)try{localStorage.setItem("assistant:msgs:".concat(ue),JSON.stringify(S))}catch(e){}}),[S,ue]),(0,r.useEffect)((()=>{try{var e;null===(e=he.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}catch(t){}}),[S]),(0,r.useEffect)((()=>{if(!O)return;ve.current=Date.now();const e=setInterval((()=>{if(O&&Date.now()-ve.current>6e3){try{var e;null===(e=z.current)||void 0===e||e.stop()}catch(t){}N(!1)}}),1e3);return()=>clearInterval(e)}),[O]),(0,r.useEffect)((()=>{var e,t;const n=()=>{try{var e,t,n;const r=(null===(e=window.speechSynthesis)||void 0===e||null===(t=e.getVoices)||void 0===t?void 0:t.call(e))||[];j(r),!F&&null!==g&&void 0!==g&&null!==(n=g.voice)&&void 0!==n&&n.name&&L(g.voice.name)}catch(r){}};return n(),null===(e=window.speechSynthesis)||void 0===e||null===(t=e.addEventListener)||void 0===t||t.call(e,"voiceschanged",n),()=>{var e,t;return null===(e=window.speechSynthesis)||void 0===e||null===(t=e.removeEventListener)||void 0===t?void 0:t.call(e,"voiceschanged",n)}}),[g,F]),(0,r.useEffect)((()=>{(async()=>{try{var e,t,n,r,i,a;const s=await fetch("".concat(p,"/companion/profile"),{headers:{"auth-token":localStorage.getItem("token")}});if(!s.ok)throw new Error("profile load failed");const o=await s.json();v(o),x((null===o||void 0===o||null===(e=o.modes)||void 0===e?void 0:e.current)||"friendly"),H((null===o||void 0===o?void 0:o.displayName)||""),V((null===o||void 0===o||null===(t=o.appearance)||void 0===t?void 0:t.avatarUrl)||""),ne((null===o||void 0===o?void 0:o.systemPrompt)||""),ie(Array.isArray(null===o||void 0===o?void 0:o.traits)?o.traits.join(", "):""),ee(!(null===o||void 0===o||null===(n=o.settings)||void 0===n||!n.streamReplies)),we(Number(null!==(r=null===o||void 0===o||null===(i=o.settings)||void 0===i?void 0:i.temperature)&&void 0!==r?r:.7)),null!==o&&void 0!==o&&null!==(a=o.settings)&&void 0!==a&&a.autoListen&&setTimeout((()=>Re()),300)}catch(d){try{var s,o,l,c,u;const e=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({})}),t=await e.json();v(t),x((null===t||void 0===t||null===(s=t.modes)||void 0===s?void 0:s.current)||"friendly"),H((null===t||void 0===t?void 0:t.displayName)||""),V((null===t||void 0===t||null===(o=t.appearance)||void 0===o?void 0:o.avatarUrl)||""),ne((null===t||void 0===t?void 0:t.systemPrompt)||""),ie(Array.isArray(null===t||void 0===t?void 0:t.traits)?t.traits.join(", "):""),ee(!(null===t||void 0===t||null===(l=t.settings)||void 0===l||!l.streamReplies)),we(Number(null!==(c=null===t||void 0===t||null===(u=t.settings)||void 0===u?void 0:u.temperature)&&void 0!==c?c:.7))}catch(h){}}})()}),[p,Re]);const Ie=async()=>{const e=b.trim();if(!e)return;_e([]);const t={role:"user",text:e};_((e=>[...e,t])),w(""),D(!0),le.current=e;try{const t=$?"talk-stream":"talk",i=new AbortController;oe.current=i;const a=await fetch("".concat(p,"/companion/").concat(t),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({text:"[".concat(y,"] ").concat(e),assistantThreadId:I.current}),signal:i.signal});if(!a.ok)throw new Error("talk failed");let s="",o="";const l="[[CITATIONS:";if($&&a.body){const e=a.body.getReader(),t=new TextDecoder;for(;;){const{value:n,done:r}=await e.read();if(r)break;const i=t.decode(n,{stream:!0});o+=i;let a=i;const u=o.indexOf(l);if(-1!==u){a=o.slice(0,u);const e=o.slice(u),t=e.indexOf("]]");if(-1!==t){const n=e.slice(0,t+2).match(/\[\[CITATIONS:([^\]|]*)\|TEMP:([0-9.]+)\]\]/);if(n){const e=n[1]?n[1].split("|").filter(Boolean):[];_e(e)}o=e.slice(t+2)}else a=o.slice(0,u),o=e}s+=a,_((e=>{const t=e[e.length-1];if("assistant"===(null===t||void 0===t?void 0:t.role)){const n=[...e];return n[n.length-1]=(0,c.A)((0,c.A)({},t),{},{text:(t.text||"")+a}),n}return[...e,{role:"assistant",text:a}]}))}}else{var n;const e=await a.json();s=(null===e||void 0===e?void 0:e.text)||"",_e(Array.isArray(null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.citations)?e.meta.citations:[]),_((e=>[...e,{role:"assistant",text:s}]))}Pe(s);try{ce.current&&(ce.current.currentTime=0,"function"===typeof ce.current.play&&await ce.current.play())}catch(r){}}catch(Zie){f({status:"error",title:"Assistant unavailable",description:"Please try again later."})}finally{D(!1),oe.current=null}};(0,r.useEffect)((()=>{const e=e=>(e.ctrlKey||e.metaKey)&&"Enter"===e.key||ye&&"Enter"===e.key&&!e.shiftKey?(e.preventDefault(),void Ie()):void 0;return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[b,y,ye]),(0,r.useEffect)((()=>{try{localStorage.setItem("assistant:enterToSend",ye?"1":"0")}catch(e){}}),[ye]);const Be=(0,r.useCallback)((async()=>{try{const e=await fetch("".concat(p,"/companion/memories"),{headers:{"auth-token":localStorage.getItem("token")}});e.ok&&fe(await e.json())}catch(e){}}),[p]),je=(0,r.useCallback)((async(e,t)=>{try{await fetch("".concat(p,"/companion/memory"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({key:e,value:t})}),f({status:"success",title:"Memory updated"}),Be()}catch(n){}}),[p,Be,f]);return(0,ur.jsxs)(pr,{maxW:"7xl",mx:"auto",px:4,py:6,position:"relative",children:[(0,ur.jsx)(yie,{}),(0,ur.jsxs)(pr,{position:"relative",zIndex:1,children:[(0,ur.jsxs)(ao,{mb:3,spacing:2,wrap:"wrap",children:[Ae.map((e=>(0,ur.jsx)(zr,{size:"xs",variant:e.id===ue?"solid":"outline",colorScheme:"pink",onClick:()=>{de(e.id),I.current=e.id;try{const t=localStorage.getItem("assistant:msgs:".concat(e.id));_(t?JSON.parse(t):[])}catch(t){_([])}},onDoubleClick:()=>{const t=prompt("Rename thread",e.title||"");null!=t&&Ce(Ae.map((n=>n.id===e.id?(0,c.A)((0,c.A)({},n),{},{title:t}):n)))},children:e.title||"Thread"},e.id))),(0,ur.jsx)(zr,{size:"xs",onClick:()=>{const e="".concat(Date.now().toString(36)).concat(Math.random().toString(36).slice(2,8)),t=[...Ae,{id:e,title:"New Thread"}];Ce(t),de(e),I.current=e,_([])},children:"+ New"}),(0,ur.jsx)(zr,{size:"xs",colorScheme:"red",variant:"outline",onClick:()=>{if(!ue)return;const e=Ae.filter((e=>e.id!==ue));Ce(e);try{localStorage.removeItem("assistant:msgs:".concat(ue))}catch(t){}if(_([]),e[0])de(e[0].id),I.current=e[0].id;else{const e="".concat(Date.now().toString(36)).concat(Math.random().toString(36).slice(2,8));de(e),I.current=e,Ce([{id:e,title:"Thread"}])}},children:"Delete"})]}),(0,ur.jsxs)(ao,{justify:"space-between",mb:4,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(BR,{name:(null===g||void 0===g?void 0:g.displayName)||"Ava",src:(null===g||void 0===g||null===(e=g.appearance)||void 0===e?void 0:e.avatarUrl)||void 0,bg:"pink.300",boxSize:"12"}),(0,ur.jsxs)(io,{spacing:0,children:[(0,ur.jsx)(Jr,{fontSize:"lg",fontWeight:"bold",children:(null===g||void 0===g?void 0:g.displayName)||"Ava"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{colorScheme:A?"green":"gray",children:A?"Speaking":"Idle"}),(0,ur.jsx)(oo,{children:y})]})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(di,{size:"sm",value:y,onChange:e=>(async e=>{x(e);try{const t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({modes:{current:e}})});t.ok&&v(await t.json())}catch(t){}})(e.target.value),children:bie.map((e=>(0,ur.jsx)("option",{value:e.id,children:e.label},e.id)))}),(0,ur.jsx)(di,{size:"sm",value:F,onChange:e=>(async e=>{L(e);try{const t=B.find((t=>t.name===e)),n=(null===t||void 0===t?void 0:t.lang)||"en-US",r=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({voice:{name:e,accent:n}})});r.ok&&v(await r.json())}catch(t){}})(e.target.value),placeholder:"Voice",children:B.map((e=>(0,ur.jsxs)("option",{value:e.name,children:[e.name," (",e.lang,")"]},e.name)))}),(0,ur.jsxs)(di,{size:"sm",value:T,onChange:e=>k(e.target.value),children:[(0,ur.jsx)("option",{value:"auto",children:"Avatar: Auto"}),(0,ur.jsx)("option",{value:"stylized",children:"Avatar: Stylized"}),(0,ur.jsx)("option",{value:"shinchan",children:"Avatar: Shinchan"}),(0,ur.jsx)("option",{value:"goku",children:"Avatar: Goku"}),(0,ur.jsx)("option",{value:"pm",children:"Avatar: PM"}),(0,ur.jsx)("option",{value:"ben10",children:"Avatar: Ben 10"}),(0,ur.jsx)("option",{value:"gojo",children:"Avatar: Gojo"}),(0,ur.jsx)("option",{value:"billgates",children:"Avatar: Bill Gates"}),(0,ur.jsx)("option",{value:"sundar",children:"Avatar: Sundar Pichai"}),(0,ur.jsx)("option",{value:"talkinghead",children:"Avatar: TalkingHead (GLB)"}),(0,ur.jsx)("option",{value:"cinematic",children:"Avatar: Cinematic (GLB)"})]}),(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Emotion cam"}),(0,ur.jsx)(VD,{size:"sm",isChecked:Y,onChange:e=>K(e.target.checked)})]}),(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Auto speak"}),(0,ur.jsx)(VD,{size:"sm",isChecked:!1!==(null===g||void 0===g||null===(t=g.settings)||void 0===t?void 0:t.autoSpeak),onChange:async e=>{try{const t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({settings:{autoSpeak:e.target.checked}})});t.ok&&v(await t.json())}catch(t){}}})]}),(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Cinematic"}),(0,ur.jsx)(VD,{size:"sm",isChecked:C,onChange:e=>M(e.target.checked),isDisabled:"auto"!==T})]}),(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Auto listen"}),(0,ur.jsx)(VD,{size:"sm",isChecked:!(null===g||void 0===g||null===(n=g.settings)||void 0===n||!n.autoListen),onChange:async e=>{try{const t=e.target.checked,n=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({settings:{autoListen:t}})});n.ok&&v(await n.json()),t&&!O&&setTimeout((()=>Re()),300),!t&&O&&Re()}catch(t){}}})]}),(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Stream"}),(0,ur.jsx)(VD,{size:"sm",isChecked:$,onChange:async e=>{const t=e.target.checked;ee(t);try{const e=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({settings:{streamReplies:t}})});e.ok&&v(await e.json())}catch(n){}}})]}),(0,ur.jsxs)(di,{size:"sm",value:(null===g||void 0===g||null===(i=g.settings)||void 0===i?void 0:i.safetyLevel)||"medium",onChange:async e=>{try{const t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({settings:{safetyLevel:e.target.value}})});t.ok&&v(await t.json())}catch(t){}},children:[(0,ur.jsx)("option",{value:"low",children:"Safety: Low"}),(0,ur.jsx)("option",{value:"medium",children:"Safety: Medium"}),(0,ur.jsx)("option",{value:"high",children:"Safety: High"})]}),(0,ur.jsxs)(ao,{pl:2,minW:"200px",children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Creativity"}),(0,ur.jsxs)($V,{size:"sm",min:0,max:1,step:.05,value:be,onChange:async e=>{we(e);try{const t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({settings:{temperature:e}})});t.ok&&v(await t.json())}catch(t){}},children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]})]}),"goku"===T&&(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Super Saiyan"}),(0,ur.jsx)(VD,{size:"sm",isChecked:!(null===g||void 0===g||null===(a=g.appearance)||void 0===a||!a.gokuSuperSaiyan),onChange:e=>Te({gokuSuperSaiyan:e.target.checked})})]}),"gojo"===T&&(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Blindfold"}),(0,ur.jsx)(VD,{size:"sm",isChecked:!1!==(null===g||void 0===g||null===(s=g.appearance)||void 0===s?void 0:s.gojoBlindfold),onChange:e=>Te({gojoBlindfold:e.target.checked})})]})]})]}),(0,ur.jsxs)(pr,{position:"relative",h:"320px",borderWidth:"1px",borderRadius:"2xl",mb:4,overflow:"hidden",boxShadow:"xl",backdropFilter:"blur(10px)",bg:"blackAlpha.300",children:[(0,ur.jsx)(xie,{active:O||A}),(0,ur.jsx)(pr,{position:"absolute",inset:0,zIndex:1,children:De()}),Se.length>0&&(0,ur.jsxs)(ao,{spacing:2,mb:3,children:[(0,ur.jsx)(Jr,{fontSize:"sm",color:"whiteAlpha.700",children:"Citations:"}),Se.map((e=>(0,ur.jsx)(KG,{size:"sm",colorScheme:"purple",children:(0,ur.jsx)(ZG,{children:e})},e)))]}),Y&&(0,ur.jsx)(vie,{enabled:Y,onMood:Q,onError:()=>K(!1)}),A&&(0,ur.jsx)(pr,{position:"absolute",right:3,bottom:2,fontSize:"2xl",bg:"whiteAlpha.700",px:2,borderRadius:"md",children:null===(o=PW[Z||RW((null===(l=S[S.length-1])||void 0===l?void 0:l.text)||"")])||void 0===o?void 0:o.label})]}),(0,ur.jsxs)(ao,{justify:"space-between",mb:2,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(VD,{size:"sm",isChecked:ye,onChange:e=>xe(e.target.checked)}),(0,ur.jsx)(Jr,{fontSize:"sm",color:"whiteAlpha.800",children:"Press Enter to send"})]}),(0,ur.jsx)(zr,{size:"xs",variant:"ghost",onClick:()=>{ge((e=>!e)),me||Be()},children:me?"Hide Memories":"Show Memories"})]}),me&&(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"xl",p:2,mb:3,bg:"blackAlpha.300",children:[(0,ur.jsx)(Jr,{mb:2,fontWeight:"semibold",children:"Memories"}),(0,ur.jsxs)(io,{maxH:"180px",overflowY:"auto",children:[pe.map((e=>(0,ur.jsxs)(ao,{align:"flex-start",children:[(0,ur.jsx)(pr,{minW:"44%",fontSize:"sm",color:"whiteAlpha.800",children:e.key}),(0,ur.jsx)(zS,{size:"sm",rows:2,defaultValue:e.value,onBlur:t=>je(e.key,t.target.value)})]},e.key))),0===pe.length&&(0,ur.jsx)(Jr,{color:"whiteAlpha.700",fontSize:"sm",children:"No memories"})]})]}),(0,ur.jsx)(pr,{borderWidth:"1px",borderRadius:"2xl",p:3,mb:3,maxH:"40vh",overflowY:"auto",bg:"blackAlpha.400",backdropFilter:"blur(8px)",children:(0,ur.jsxs)(io,{spacing:3,children:[S.map(((e,t)=>(0,ur.jsx)(pr,{alignSelf:"user"===e.role?"flex-end":"flex-start",bg:"user"===e.role?"blue.500":"pink.500",color:"white",px:3,py:2,borderRadius:"lg",maxW:"70%",boxShadow:"md",children:(0,ur.jsx)(Jr,{whiteSpace:"pre-wrap",children:e.text})},t))),(0,ur.jsx)(pr,{ref:he}),R&&(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Br,{size:"sm",color:"pink.300"}),(0,ur.jsx)(Jr,{color:"whiteAlpha.800",children:"Assistant is typing\u2026"})]})]})}),(0,ur.jsxs)(io,{direction:{base:"column",md:"row"},spacing:4,mb:4,children:[(0,ur.jsxs)(ri,{maxW:"sm",children:[(0,ur.jsx)(CW,{fontSize:"sm",children:"Display Name"}),(0,ur.jsx)($y,{size:"sm",value:U,onChange:e=>H(e.target.value)})]}),(0,ur.jsxs)(ri,{children:[(0,ur.jsx)(CW,{fontSize:"sm",children:"Avatar URL"}),(0,ur.jsx)($y,{size:"sm",value:G,onChange:e=>V(e.target.value)})]}),(0,ur.jsxs)(io,{spacing:2,w:{base:"full",md:"xs"},children:[(0,ur.jsx)(CW,{fontSize:"xs",children:"Voice Rate"}),(0,ur.jsxs)($V,{size:"sm",min:.5,max:1.5,step:.05,value:(null===g||void 0===g||null===(u=g.voice)||void 0===u?void 0:u.rate)||1,onChange:async e=>{try{const t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({voice:{rate:e}})});t.ok&&v(await t.json())}catch(t){}},children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]}),(0,ur.jsx)(CW,{fontSize:"xs",children:"Voice Pitch"}),(0,ur.jsxs)($V,{size:"sm",min:.5,max:1.5,step:.05,value:(null===g||void 0===g||null===(d=g.voice)||void 0===d?void 0:d.pitch)||1,onChange:async e=>{try{const t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({voice:{pitch:e}})});t.ok&&v(await t.json())}catch(t){}},children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]}),(0,ur.jsx)(CW,{fontSize:"xs",children:"Voice Volume"}),(0,ur.jsxs)($V,{size:"sm",min:.2,max:1,step:.05,value:(null===g||void 0===g||null===(h=g.voice)||void 0===h?void 0:h.volume)||1,onChange:async e=>{try{const t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({voice:{volume:e}})});t.ok&&v(await t.json())}catch(t){}},children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]})]}),(0,ur.jsx)(zr,{alignSelf:"flex-end",size:"sm",colorScheme:"pink",onClick:async()=>{try{const e=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({displayName:U,appearance:{avatarUrl:G}})});if(e.ok){const t=await e.json();v(t),f({status:"success",title:"Profile updated"})}}catch(e){}},children:"Save Profile"})]}),(0,ur.jsxs)(io,{direction:{base:"column",md:"row"},spacing:4,mb:4,children:[(0,ur.jsxs)(ri,{maxW:"sm",children:[(0,ur.jsx)(CW,{fontSize:"sm",children:"Remember this (key)"}),(0,ur.jsx)($y,{size:"sm",placeholder:"e.g., my.favorite.color",value:W,onChange:e=>q(e.target.value)})]}),(0,ur.jsxs)(ri,{children:[(0,ur.jsx)(CW,{fontSize:"sm",children:"Value"}),(0,ur.jsx)($y,{size:"sm",placeholder:"e.g., teal",value:X,onChange:e=>J(e.target.value)})]}),(0,ur.jsx)(zr,{alignSelf:"flex-end",size:"sm",variant:"outline",onClick:async()=>{const e=W.trim();if(e)try{(await fetch("".concat(p,"/companion/memory"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({key:e,value:X})})).ok&&(q(""),J(""),f({status:"success",title:"Saved to memory"}))}catch(t){}},children:"Add Memory"}),(0,ur.jsx)(zr,{alignSelf:"flex-end",size:"sm",variant:"ghost",onClick:async()=>{const e=W.trim();if(e)try{await fetch("".concat(p,"/companion/memory"),{method:"DELETE",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({key:e})}),q(""),J(""),f({status:"success",title:"Memory deleted"})}catch(t){}},children:"Delete Key"}),(0,ur.jsx)(zr,{alignSelf:"flex-end",size:"sm",variant:"ghost",colorScheme:"red",onClick:async()=>{try{await fetch("".concat(p,"/companion/memory/clear"),{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),f({status:"success",title:"All memories cleared"})}catch(e){}},children:"Clear All"})]}),(0,ur.jsxs)(io,{direction:{base:"column",md:"row"},spacing:4,mb:4,children:[(0,ur.jsxs)(ri,{children:[(0,ur.jsx)(CW,{fontSize:"sm",children:"Persona System Prompt"}),(0,ur.jsx)(zS,{size:"sm",rows:3,value:te,onChange:e=>ne(e.target.value),placeholder:"Guide how your assistant should behave..."})]}),(0,ur.jsxs)(ri,{children:[(0,ur.jsx)(CW,{fontSize:"sm",children:"Traits (comma separated)"}),(0,ur.jsx)($y,{size:"sm",value:re,onChange:e=>ie(e.target.value),placeholder:"empathetic, playful, supportive"})]}),(0,ur.jsxs)(ri,{maxW:{base:"full",md:"xs"},children:[(0,ur.jsx)(CW,{fontSize:"sm",children:"Persona Preset"}),(0,ur.jsx)(di,{size:"sm",onChange:async e=>{const t=Me.find((t=>t.key===e.target.value));if(t&&"custom"!==t.key){ne(t.prompt),ie(t.traits.join(", "));try{const e=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({systemPrompt:t.prompt,traits:t.traits})});e.ok&&v(await e.json())}catch(n){}}},defaultValue:"custom",children:Me.map((e=>(0,ur.jsx)("option",{value:e.key,children:e.label},e.key)))})]}),(0,ur.jsx)(zr,{alignSelf:"flex-end",size:"sm",onClick:async()=>{try{const e=re.split(",").map((e=>e.trim())).filter(Boolean),t=await fetch("".concat(p,"/companion/profile"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({systemPrompt:te,traits:e})});t.ok&&(v(await t.json()),f({status:"success",title:"Persona updated"}))}catch(e){}},children:"Save Persona"})]}),(0,ur.jsxs)(io,{spacing:2,mb:4,children:[(0,ur.jsx)(CW,{fontSize:"sm",children:"Paste knowledge (notes, docs). We\u2019ll store as memories."}),(0,ur.jsx)(zS,{rows:4,placeholder:"Paste any text here...",value:ae,onChange:e=>se(e.target.value)}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{const e=ae.trim();if(e)try{const t=e.match(/(.|\n){1,600}/g)||[e];let n=0;for(const e of t){const t="kb.".concat(Date.now(),".").concat(n++);await fetch("".concat(p,"/companion/memory"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({key:t,value:e,tags:["kb"],weight:2})})}se(""),f({status:"success",title:"Knowledge ingested",description:"".concat(n," chunks saved")})}catch(t){}},children:"Ingest"}),(0,ur.jsx)(b_,{size:"sm",variant:"ghost",onClick:()=>se(""),children:"Clear"})]})]}),(0,ur.jsxs)(io,{spacing:2,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zS,{value:b,onChange:e=>w(e.target.value),placeholder:"Say something...",rows:2,resize:"vertical"}),(0,ur.jsx)($R,{label:O?"Stop listening":"Start voice input",hasArrow:!0,children:(0,ur.jsx)(b_,{onClick:Re,variant:"outline",colorScheme:O?"red":"pink",children:O?"Stop":"Mic"})}),(0,ur.jsx)(b_,{onClick:Ie,isDisabled:R,children:"Send"}),(0,ur.jsx)(b_,{variant:"outline",colorScheme:"red",onClick:()=>{try{var e;null===(e=oe.current)||void 0===e||e.abort()}catch(t){}D(!1)},isDisabled:!R,children:"Stop"}),(0,ur.jsx)(b_,{variant:"outline",onClick:async()=>{const e=(le.current||"").trim();if(e){_e([]),D(!0);try{_((e=>{var t;return"assistant"===(null===(t=e[e.length-1])||void 0===t?void 0:t.role)?e.slice(0,-1):e}));const n=$?"talk-stream":"talk",r=new AbortController;oe.current=r;const i=await fetch("".concat(p,"/companion/").concat(n),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({text:"[".concat(y,"] ").concat(e),assistantThreadId:I.current}),signal:r.signal});if(!i.ok)throw new Error("talk failed");let a="",s="";const o="[[CITATIONS:";if($&&i.body){const e=i.body.getReader(),t=new TextDecoder;for(;;){const{value:n,done:r}=await e.read();if(r)break;const i=t.decode(n,{stream:!0});s+=i;let l=i;const u=s.indexOf(o);if(-1!==u){l=s.slice(0,u);const e=s.slice(u),t=e.indexOf("]]");if(-1!==t){const n=e.slice(0,t+2).match(/\[\[CITATIONS:([^\]|]*)\|TEMP:([0-9.]+)\]\]/);if(n){const e=n[1]?n[1].split("|").filter(Boolean):[];_e(e)}s=e.slice(t+2)}else l=s.slice(0,u),s=e}a+=l,_((e=>{const t=e[e.length-1];if("assistant"===(null===t||void 0===t?void 0:t.role)){const n=[...e];return n[n.length-1]=(0,c.A)((0,c.A)({},t),{},{text:(t.text||"")+l}),n}return[...e,{role:"assistant",text:l}]}))}}else{const e=await i.json();a=(null===e||void 0===e?void 0:e.text)||"",_((e=>[...e,{role:"assistant",text:a}]))}Pe(a);try{ce.current&&(ce.current.currentTime=0,"function"===typeof ce.current.play&&await ce.current.play())}catch(t){}}catch(Zie){f({status:"error",title:"Assistant unavailable",description:"Please try again later."})}finally{D(!1),oe.current=null}}},isDisabled:R||!le.current,children:"Regenerate"}),(0,ur.jsx)(zr,{variant:"ghost",onClick:()=>{const e=JSON.stringify({messages:S},null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="assistant-chat-".concat(Date.now(),".json"),r.click(),URL.revokeObjectURL(n)},children:"Export JSON"}),(0,ur.jsx)(b_,{variant:"ghost",colorScheme:"red",onClick:()=>_([]),children:"Clear Chat"}),(0,ur.jsx)(zr,{variant:"ghost",onClick:async()=>{const e=[...S].reverse().find((e=>"assistant"===e.role));if(null!==e&&void 0!==e&&e.text)try{const t="note.".concat(Date.now());await fetch("".concat(p,"/companion/memory"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({key:t,value:e.text})}),f({status:"success",title:"Saved last reply to memory",description:t})}catch(t){}},children:"Remember last"}),(0,ur.jsx)(zr,{variant:"ghost",onClick:()=>{const e=S.map((e=>"".concat("user"===e.role?"You":"Assistant",": ").concat(e.text))),t=new Blob([e.join("\n\n")],{type:"text/plain"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="assistant-chat-".concat(Date.now(),".txt"),r.click(),URL.revokeObjectURL(n)},children:"Export"})]}),(0,ur.jsxs)(ao,{spacing:2,children:[["Cheer me up","Plan my day","Flirt","Write a poem"].map((e=>(0,ur.jsx)($R,{label:"Insert prompt",hasArrow:!0,children:(0,ur.jsx)(KG,{cursor:"pointer",onClick:()=>w((t=>t?t+"\n"+e:e)),colorScheme:"pink",variant:"subtle",size:"md",borderRadius:"full",children:(0,ur.jsx)(ZG,{children:e})})},e))),(0,ur.jsxs)(pr,{flex:1,textAlign:"right",color:"whiteAlpha.700",fontSize:"sm",children:["Tip: ",(0,ur.jsx)(kW,{children:"Ctrl"}),"+",(0,ur.jsx)(kW,{children:"Enter"})," to send"]})]})]})]})]})}var Sie=lr("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});function _ie(){const{hostName:e}=(0,r.useContext)(GS),t=m_(),n=(0,r.useRef)(null),i=(0,r.useRef)(null),[a,s]=(0,r.useState)("user"),[o,l]=(0,r.useState)(5),[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)(""),[f,m]=(0,r.useState)([]),[g,v]=(0,r.useState)([]),[y,x]=(0,r.useState)(""),[b,w]=(0,r.useState)(null),[S,_]=(0,r.useState)(null),[A,E]=(0,r.useState)([]),[C,M]=(0,r.useState)(!1),[T,k]=(0,r.useState)({brightness:100,contrast:100,saturate:100}),[P,R]=(0,r.useState)([]),[D,I]=(0,r.useState)({}),[B,j]=(0,r.useState)(null),[F,L]=(0,r.useState)(!1),[O,N]=(0,r.useState)(null),[z,U]=(0,r.useState)(0),[H,G]=(0,r.useState)([]),[V,W]=(0,r.useState)(!0),[q,X]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(!1),K=(0,r.useCallback)((async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:a}});n.current&&(n.current.srcObject=e)}catch(e){t({title:"Camera access failed",status:"error"})}}),[a,t]);(0,r.useEffect)((()=>{K();const e=n.current;return()=>{const t=e&&e.srcObject;try{t&&"function"===typeof t.getTracks&&t.getTracks().forEach((e=>e.stop()))}catch(n){}e&&(e.srcObject=null)}}),[K]);const Z=(0,r.useCallback)((async()=>{try{const t=await fetch(e+"/snaps/inbox",{headers:{"auth-token":localStorage.getItem("token")}}),n=await t.json();d(Array.isArray(n)?n:[])}catch(t){d([])}}),[e]);(0,r.useEffect)((()=>{Z()}),[Z]),(0,r.useEffect)((()=>{const t=u.map((e=>e._id));t.length?(async()=>{try{const n=await fetch(e+"/reactions/counts",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({snapIds:t})}),r=await n.json();I(r||{})}catch(n){I({})}})():I({})}),[u,e]);const Q=(0,r.useCallback)((async()=>{try{const t=await fetch(e+"/user/connections",{headers:{"auth-token":localStorage.getItem("token")}}),n=await t.json();m(Array.isArray(n)?n:[])}catch(t){m([])}}),[e]);(0,r.useEffect)((()=>{Q()}),[Q]);const $=(0,r.useCallback)((async()=>{try{const t=await fetch(e+"/conversation",{headers:{"auth-token":localStorage.getItem("token")}}),n=await t.json(),r=Array.isArray(n)?n.flatMap((e=>e.members||[])):[],i=new Map;r.forEach((e=>{e&&e._id&&!i.has(e._id)&&i.set(e._id,e)})),v(Array.from(i.values()))}catch(t){v([])}}),[e]);(0,r.useEffect)((()=>{$()}),[$]),(0,r.useEffect)((()=>{const e=new Map;u.forEach(((t,n)=>{var r;const i=(null===(r=t.sender)||void 0===r?void 0:r._id)||t.sender;if(!i)return;const a=1e3-n;e.set(i,(e.get(i)||0)+a)})),g.forEach((t=>{t&&t._id&&e.set(t._id,(e.get(t._id)||0)+10)}));const t=Array.from(e.entries()).sort(((e,t)=>t[1]-e[1])).slice(0,6).map((e=>{let[t]=e;const n=g.find((e=>e._id===t))||f.find((e=>e._id===t))||{_id:t,name:t};return n}));E(t)}),[u,g,f]),(0,r.useEffect)((()=>{try{const e=new URLSearchParams(window.location.search).get("to");e&&p(e)}catch(e){}}),[]);(0,r.useEffect)((()=>{if(!F)return;if(z<=0)return L(!1),N(null),void Z();const e=setTimeout((()=>U((e=>e-1))),1e3);return()=>clearTimeout(e)}),[F,z,Z]);const ee=async()=>b?new Promise((e=>{const t=new Image;t.onload=()=>{const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");r.filter="brightness(".concat(T.brightness,"%) contrast(").concat(T.contrast,"%) saturate(").concat(T.saturate,"%)"),r.drawImage(t,0,0),r.textAlign="left",r.textBaseline="top",r.font="".concat(Math.floor(Math.max(32,.06*n.width)),"px sans-serif");let i=10,a=10;const s=Math.floor(.12*n.height);P.forEach((e=>{r.fillText(e,i,a),a+=s,a>n.height-60&&(a=10,i+=s)}));const o=()=>n.toBlob((t=>e(t)),"image/jpeg",.9);if(J)try{const e=window.FaceDetector||null;if(e){return void new e({fastMode:!0,maxDetectedFaces:3}).detect(t).then((e=>{r.textAlign="center",r.textBaseline="middle";const t=Math.floor(.15*n.width);r.font="".concat(t,"px sans-serif"),e.forEach((e=>{const t=e.boundingBox.x+e.boundingBox.width/2,n=e.boundingBox.y+.35*e.boundingBox.height;r.fillText("\ud83d\udd76\ufe0f",t,n)})),o()})).catch((()=>{r.textAlign="center",r.textBaseline="middle",r.font="".concat(Math.floor(.15*n.width),"px sans-serif"),r.fillText("\ud83d\udd76\ufe0f",n.width/2,.2*n.height),o()}))}r.textAlign="center",r.textBaseline="middle",r.font="".concat(Math.floor(.15*n.width),"px sans-serif"),r.fillText("\ud83d\udd76\ufe0f",n.width/2,.2*n.height)}catch(l){}o()},t.crossOrigin="anonymous",t.src=b})):S;return(0,ur.jsxs)(pr,{p:3,children:[(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Snaps"}),b?(0,ur.jsx)("img",{src:b,alt:"preview",style:{width:"100%",borderRadius:8,background:"#000",objectFit:"contain",filter:"brightness(".concat(T.brightness,"%) contrast(").concat(T.contrast,"%) saturate(").concat(T.saturate,"%)")}}):(0,ur.jsx)("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",borderRadius:8,background:"#000"}}),(0,ur.jsx)("canvas",{ref:i,style:{display:"none"}}),(0,ur.jsxs)(ao,{children:[(0,ur.jsxs)(di,{value:a,onChange:e=>s(e.target.value),w:"40",children:[(0,ur.jsx)("option",{value:"user",children:"Front"}),(0,ur.jsx)("option",{value:"environment",children:"Back"})]}),(0,ur.jsx)(di,{value:o,onChange:e=>l(parseInt(e.target.value)),w:"36",children:[1,2,3,5,7,10].map((e=>(0,ur.jsxs)("option",{value:e,children:[e,"s"]},e)))}),(0,ur.jsxs)(di,{placeholder:"Select receiver",value:h,onChange:e=>p(e.target.value),w:"60",children:[(0,ur.jsx)("option",{value:"__ALL__",children:"All Chats"}),(0,ur.jsx)("option",{value:"__MULTI__",children:"Multi-select\u2026"}),(0,ur.jsx)("optgroup",{label:"Chats",children:g.map((e=>(0,ur.jsx)("option",{value:e._id,children:e.name||e.email||e._id},"chat-"+e._id)))}),(0,ur.jsx)("optgroup",{label:"Connections",children:f.map((e=>(0,ur.jsx)("option",{value:e._id,children:e.name||e._id},"conn-"+e._id)))})]}),(0,ur.jsx)(b_,{onClick:()=>{h&&"__ALL__"!==h&&"__MULTI__"!==h&&(window.location.href="/friend/"+h)},disabled:!h||"__ALL__"===h||"__MULTI__"===h,children:"Profile"}),(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"AI caption"}),(0,ur.jsx)(VD,{isChecked:q,onChange:e=>X(e.target.checked)})]}),(0,ur.jsxs)(ao,{pl:2,children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:"Face filter"}),(0,ur.jsx)(VD,{isChecked:J,onChange:e=>Y(e.target.checked)})]})]}),"__MULTI__"===h&&(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",mb:1,children:"Select recipients"}),(0,ur.jsx)(lI,{columns:[2,3],spacing:2,children:[...g,...f].map((e=>(0,ur.jsx)(LS,{isChecked:H.includes(e._id),onChange:t=>{G((n=>t.target.checked?[...new Set([...n,e._id])]:n.filter((t=>t!==e._id))))},children:e.name||e._id},"sel-"+e._id)))})]}),(0,ur.jsxs)(ao,{flexWrap:"wrap",children:[A.map((e=>(0,ur.jsx)(KG,{size:"lg",colorScheme:h===e._id?"purple":"gray",cursor:"pointer",onClick:()=>p(e._id),children:e.name||e._id},e._id))),b?(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(b_,{variant:"outline",onClick:()=>M((e=>!e)),children:C?"Hide Edit":"Edit"}),(0,ur.jsx)(b_,{onClick:async()=>{if("__ALL__"===h){if(!S)return;const r=g.map((e=>e._id));if(!r.length)return void t({title:"No chats to send",status:"warning"});const i=new FormData,a=await ee();i.append("file",a||S,"snap.jpg"),i.append("timer",String(o)),i.append("caption",y),r.forEach((e=>i.append("toList",e)));if(!(await fetch(e+"/snaps/bulk",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:i})).ok)return t({title:"Send failed",status:"error"});if(t({title:"Sent to all chats",status:"success"}),b)try{URL.revokeObjectURL(b)}catch(n){}w(null),_(null),x(""),Z()}else{const n=await ee();await(async n=>{if(!n)return;if(!h)return void t({title:"Select a receiver",status:"warning"});const r=new FormData;if(r.append("file",n,"snap.jpg"),r.append("timer",String(o)),B||r.append("to",h),y&&r.append("caption",y),q&&!y&&r.append("autoCaption","1"),B||"__MULTI__"!==h){const n=B?e+"/snaps/reply/"+B:e+"/snaps/send";if(!(await fetch(n,{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:r})).ok)return t({title:"Send failed",status:"error"});t({title:B?"Reply sent":"Snap sent",status:"success"})}else{const n=H.filter(Boolean);if(!n.length)return void t({title:"No recipients selected",status:"warning"});if(n.forEach((e=>r.append("toList",e))),!(await fetch(e+"/snaps/bulk",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:r})).ok)return t({title:"Send failed",status:"error"});t({title:"Sent to selected",status:"success"})}if(b)try{URL.revokeObjectURL(b)}catch(i){}w(null),_(null),x(""),j(null),G([]),Z();try{h&&"__ALL__"!==h&&"__MULTI__"!==h&&(window.location.href="/friend/"+h)}catch(a){}})(n||S)}},children:"Send"}),(0,ur.jsx)(b_,{onClick:()=>{if(b)try{URL.revokeObjectURL(b)}catch(e){}w(null),_(null),j(null)},children:"Retake"}),(0,ur.jsx)(b_,{onClick:()=>{if(S){const e=document.createElement("a");e.href=b,e.download="snap.jpg",e.click()}},children:"Save"}),(0,ur.jsx)(b_,{variant:"outline",onClick:async()=>{if(!S)return;const n=new FormData;n.append("file",S,"story.jpg");if(!(await fetch(e+"/stories/upload",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:n})).ok)return t({title:"Story upload failed",status:"error"});t({title:"Story posted",status:"success"})},children:"Post Story"}),(0,ur.jsx)(b_,{variant:"outline",onClick:async()=>{if(!S)return;const n=new FormData;n.append("file",S,"memory.jpg");if(!(await fetch(e+"/memories/upload",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:n})).ok)return t({title:"Save failed",status:"error"});t({title:"Saved to Memories",status:"success"})},children:"Save to Memories"})]}):(0,ur.jsx)(b_,{onClick:async()=>{const e=n.current,t=i.current;if(!e||!t)return;t.width=e.videoWidth,t.height=e.videoHeight;t.getContext("2d").drawImage(e,0,0),t.toBlob((async e=>{if(b)try{URL.revokeObjectURL(b)}catch(t){}_(e),w(URL.createObjectURL(e))}),"image/jpeg",.9)},children:"Capture"})]}),C&&b&&(0,ur.jsxs)(ex,{align:"stretch",p:2,borderWidth:"1px",borderRadius:"md",children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:"Filters"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{w:"24",children:"Brightness"}),(0,ur.jsxs)($V,{value:T.brightness,min:50,max:150,step:1,onChange:e=>k((t=>(0,c.A)((0,c.A)({},t),{},{brightness:e}))),children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{w:"24",children:"Contrast"}),(0,ur.jsxs)($V,{value:T.contrast,min:50,max:150,step:1,onChange:e=>k((t=>(0,c.A)((0,c.A)({},t),{},{contrast:e}))),children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{w:"24",children:"Saturate"}),(0,ur.jsxs)($V,{value:T.saturate,min:50,max:200,step:1,onChange:e=>k((t=>(0,c.A)((0,c.A)({},t),{},{saturate:e}))),children:[(0,ur.jsx)(tW,{children:(0,ur.jsx)(nW,{})}),(0,ur.jsx)(eW,{})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Jr,{w:"24",children:"Stickers"}),["\ud83d\ude0e","\ud83d\udd25","\ud83c\udf1f","\ud83c\udf89","\u2764\ufe0f","\ud83d\ude02"].map((e=>(0,ur.jsx)(b_,{size:"sm",onClick:()=>R((t=>[...t,e])),children:e},e))),(0,ur.jsx)(b_,{size:"sm",variant:"outline",onClick:()=>R([]),children:"Clear"})]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(Sie,{}),(0,ur.jsxs)(b_,{as:"label",variant:"outline",cursor:"pointer",children:["Upload Image",(0,ur.jsx)($y,{type:"file",accept:"image/*",onChange:async n=>{var r;const i=null===(r=n.target.files)||void 0===r?void 0:r[0];if(!i)return;if(!h)return void t({title:"Select a receiver",status:"warning"});if(!i.type.startsWith("image/"))return void t({title:"Only images allowed",status:"error"});if("__ALL__"===h){const r=g.map((e=>e._id));if(!r.length)return void t({title:"No chats to send",status:"warning"});const a=new FormData;a.append("file",i),a.append("timer",String(o)),r.forEach((e=>a.append("toList",e)));return(await fetch(e+"/snaps/bulk",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:a})).ok?(t({title:"Sent to all chats",status:"success"}),void(n.target.value="")):t({title:"Send failed",status:"error"})}if("__MULTI__"===h){const r=H.filter(Boolean);if(!r.length)return void t({title:"No recipients selected",status:"warning"});const a=new FormData;a.append("file",i),a.append("timer",String(o)),y&&a.append("caption",y),q&&!y&&a.append("autoCaption","1"),r.forEach((e=>a.append("toList",e)));return(await fetch(e+"/snaps/bulk",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:a})).ok?(t({title:"Sent to selected",status:"success"}),n.target.value="",void G([])):t({title:"Send failed",status:"error"})}const a=new FormData;a.append("file",i),a.append("timer",String(o)),B||a.append("to",h),y&&a.append("caption",y),q&&!y&&a.append("autoCaption","1");const s=B?e+"/snaps/reply/"+B:e+"/snaps/send";if(!(await fetch(s,{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:a})).ok)return t({title:"Send failed",status:"error"});t({title:B?"Reply sent":"Snap sent",status:"success"}),n.target.value="",j(null);try{h&&(window.location.href="/friend/"+h)}catch(l){}},display:"none"})]}),(0,ur.jsx)(b_,{variant:"outline",onClick:()=>{window.location.href="/streaks"},children:"Streaks"}),(0,ur.jsx)(b_,{variant:"outline",onClick:()=>{window.location.href="/stories"},children:"Stories"})]}),B&&(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(KG,{colorScheme:"purple",children:"Replying\u2026"}),(0,ur.jsx)(b_,{size:"xs",variant:"ghost",onClick:()=>j(null),children:"Cancel"})]}),(0,ur.jsx)($y,{placeholder:"Add a caption (optional)",value:y,onChange:e=>x(e.target.value)}),(0,ur.jsxs)(pr,{children:[(0,ur.jsxs)(ao,{justify:"space-between",mb:2,children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",children:"Inbox"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(VD,{isChecked:V,onChange:e=>W(e.target.checked)}),(0,ur.jsx)(Jr,{fontSize:"sm",children:"Unread only"}),(0,ur.jsx)(b_,{size:"sm",variant:"outline",onClick:async()=>{const n=await fetch(e+"/snaps/view-all",{method:"POST",headers:{"auth-token":localStorage.getItem("token")}});if(n.ok){const e=await n.json();t({title:"Marked ".concat(e.count||0," as viewed"),status:"success"}),Z()}else t({title:"Failed to mark all",status:"error"})},children:"Mark all viewed"})]})]}),(0,ur.jsxs)(ex,{align:"stretch",children:[(V?u.filter((e=>!e.viewedAt)):u).map((n=>{var r;return(0,ur.jsxs)(ao,{justify:"space-between",borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{colorScheme:"image"===n.mediaType?"green":"orange",children:n.mediaType}),(0,ur.jsxs)(Jr,{children:["From ",(null===(r=n.sender)||void 0===r?void 0:r.name)||n.sender]}),n.replyTo&&(0,ur.jsx)(oo,{colorScheme:"purple",children:"reply"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(b_,{size:"sm",onClick:()=>(async t=>{N(t),U(t.viewTimerSec||5),L(!0);try{await fetch(e+"/snaps/view/"+t._id,{method:"POST",headers:{"auth-token":localStorage.getItem("token")}})}catch(n){}})(n),children:"View"}),(0,ur.jsx)(b_,{size:"sm",variant:"outline",onClick:()=>{var e;p((null===(e=n.sender)||void 0===e?void 0:e._id)||n.sender||""),j(n._id),window.scrollTo({top:0,behavior:"smooth"}),t({title:"Reply ready \u2014 capture your snap",status:"info"})},children:"Reply"}),(0,ur.jsx)(b_,{size:"sm",variant:"outline",onClick:async()=>{try{await fetch(e+"/memories/from-snap",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({mediaUrl:n.mediaUrl,caption:n.caption||""})}),t({title:"Saved to Memories",status:"success"})}catch(r){t({title:"Save failed",status:"error"})}},children:"Save"}),(0,ur.jsx)(b_,{size:"sm",variant:"outline",onClick:async()=>{try{const r=await fetch(n.mediaUrl),i=await r.blob();if(b)try{URL.revokeObjectURL(b)}catch(e){}_(i),w(URL.createObjectURL(i)),window.scrollTo({top:0,behavior:"smooth"}),t({title:"Ready to forward \u2014 pick receiver and Send",status:"info"})}catch(r){t({title:"Forward failed",status:"error"})}},children:"Forward"}),(0,ur.jsx)(b_,{size:"sm",variant:"outline",onClick:async()=>{(await fetch(e+"/snaps/report/"+n._id,{method:"POST",headers:{"auth-token":localStorage.getItem("token")}})).ok?t({title:"Reported",status:"success"}):t({title:"Report failed",status:"error"})},children:"Report"}),(0,ur.jsx)(b_,{size:"sm",variant:"outline",onClick:()=>{var e;const t=(null===(e=n.sender)||void 0===e?void 0:e._id)||n.sender;t&&(window.location.href="/friend/"+t)},children:"Profile"})]}),(0,ur.jsx)(ao,{children:["\u2764\ufe0f","\ud83d\ude02","\ud83d\udd25","\ud83d\ude2e"].map((t=>{var r;return(0,ur.jsxs)(zr,{size:"xs",variant:"ghost",onClick:async()=>{await fetch(e+"/reactions/toggle",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({snapId:n._id,emoji:t})});const r=await fetch(e+"/reactions/counts",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({snapIds:[n._id]})}),i=await r.json();I((e=>(0,c.A)((0,c.A)({},e),i)))},children:[t," ",(null===(r=D[n._id])||void 0===r?void 0:r[t])||""]},t)}))})]},n._id)})),0===u.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No snaps."})]})]})]}),(0,ur.jsxs)(Nm,{isOpen:F,onClose:()=>{},isCentered:!0,children:[(0,ur.jsx)(Km,{}),(0,ur.jsxs)(Ny,{children:[(0,ur.jsx)(Uy,{children:"Snap"}),(0,ur.jsx)(Yy,{isDisabled:!0}),(0,ur.jsx)(Zy,{children:O&&(0,ur.jsxs)(ex,{children:[(0,ur.jsx)("img",{src:O.mediaUrl,alt:"snap",style:{width:"100%",borderRadius:8}}),!!O.caption&&(0,ur.jsx)(Jr,{children:O.caption}),(0,ur.jsx)(xW,{value:(z||0)/(O.viewTimerSec||5)*100,w:"100%",size:"sm",colorScheme:"purple"}),(0,ur.jsxs)(Jr,{color:"gray.500",children:[z,"s"]})]})}),(0,ur.jsx)(nx,{children:O&&!O.replayUsed&&(0,ur.jsx)(zr,{size:"sm",onClick:async()=>{try{const n=await fetch(e+"/snaps/replay/"+O._id,{method:"POST",headers:{"auth-token":localStorage.getItem("token")}});if(n.ok){const e=await n.json();U(e.timer||O.viewTimerSec||5)}else t({title:"Replay not available",status:"warning"})}catch(n){}},children:"Replay"})})]})]})]})}Sie.displayName="Spacer";const Aie=Gf(pr);function Eie(){const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)([]);(0,r.useEffect)((()=>{fetch(e+"/streaks/mine",{headers:{"auth-token":localStorage.getItem("token")}}).then((e=>e.json())).then(n).catch((()=>n([]))),fetch(e+"/streaks/leaderboard").then((e=>e.json())).then(a).catch((()=>a([])))}),[e]);return(0,ur.jsx)(Aie,{p:3,initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35},children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Streaks"}),(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",mb:1,children:"Active"}),(0,ur.jsxs)(ex,{align:"stretch",children:[t.map((t=>(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,justify:"space-between",children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)("span",{role:"img","aria-label":"fire",children:"\ud83d\udd25"}),(0,ur.jsxs)(Jr,{children:["Friend: ",t.friend]}),(0,ur.jsxs)(oo,{colorScheme:"orange",children:[t.count," days"]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(xW,{value:Math.max(0,100-t.timeLeftMs/864e3*10),w:"200px",size:"sm"}),t.hourglass&&(0,ur.jsx)("span",{role:"img","aria-label":"hourglass",children:"\u23f3"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:()=>(async t=>{await fetch(e+"/streaks/hide/"+t,{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),n((e=>e.filter((e=>e._id!==t))))})(t._id),children:"Hide"})]})]},t._id))),0===t.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No active streaks."})]})]}),(0,ur.jsxs)(pr,{children:[(0,ur.jsx)(Jr,{fontWeight:"semibold",mb:1,children:"Leaderboard"}),(0,ur.jsx)(ex,{align:"stretch",children:i.map((e=>(0,ur.jsxs)(ao,{borderWidth:"1px",borderRadius:"md",p:2,justify:"space-between",children:[(0,ur.jsxs)(Jr,{children:[e.a," \u2194 ",e.b]}),(0,ur.jsx)(oo,{colorScheme:"purple",children:e.count})]},"top-"+e._id)))})]})]})})}function Cie(){const{id:e}=xw(),t=vw(),{hostName:n}=(0,r.useContext)(GS),[i,a]=(0,r.useState)(null),[s,o]=(0,r.useState)({}),l=m_(),c=(0,r.useCallback)((async()=>{try{const t=await fetch("".concat(n,"/friend/").concat(e,"/overview"),{headers:{"auth-token":localStorage.getItem("token")}}),r=await t.json();a(r)}catch(t){a(null)}}),[n,e]);(0,r.useEffect)((()=>{c()}),[c]),(0,r.useEffect)((()=>{(async()=>{try{const e=((null===i||void 0===i?void 0:i.snaps)||[]).map((e=>e._id));if(!e.length)return;const t=await fetch(n+"/reactions/counts",{method:"POST",headers:{"auth-token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({snapIds:e})}),r=await t.json();o(r||{})}catch(e){o({})}})()}),[n,i]);if(!i)return(0,ur.jsx)(pr,{p:4,children:(0,ur.jsx)(Jr,{children:"Loading\u2026"})});const{friend:u,snaps:d=[],messages:h=[],streak:p}=i;return(0,ur.jsx)(pr,{p:4,children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(BR,{src:null===u||void 0===u?void 0:u.profilePic,name:null===u||void 0===u?void 0:u.name}),(0,ur.jsxs)(ex,{align:"start",spacing:0,children:[(0,ur.jsx)(Jr,{fontSize:"xl",fontWeight:"bold",children:(null===u||void 0===u?void 0:u.name)||e}),(0,ur.jsx)(Jr,{color:"gray.500",children:(null===u||void 0===u?void 0:u.headline)||""})]}),(0,ur.jsx)(oo,{ml:"auto",colorScheme:null!==u&&void 0!==u&&u.isOnline?"green":"gray",children:null!==u&&void 0!==u&&u.isOnline?"Online":"Offline"})]}),p&&(0,ur.jsxs)(ao,{children:[(0,ur.jsxs)(oo,{colorScheme:p.hourglass?"orange":"purple",children:["Streak ",p.count]}),(0,ur.jsxs)(Jr,{color:"gray.600",children:["Time left: ",Math.ceil((p.timeLeftMs||0)/36e5),"h"]})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{onClick:()=>t("/snaps?to="+e),children:"Send Snap"}),(0,ur.jsx)(zr,{variant:"outline",onClick:()=>t("/dashboard"),children:"Open Chat"})]}),(0,ur.jsx)(bD,{}),(0,ur.jsx)(Jr,{fontWeight:"semibold",children:"Snaps"}),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[d.map((t=>(0,ur.jsxs)(ao,{justify:"space-between",borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{colorScheme:"image"===t.mediaType?"green":"orange",children:t.mediaType}),(0,ur.jsx)(Jr,{children:String(t.sender)===String(e)?"From friend":"Sent by you"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(zr,{size:"sm",onClick:()=>window.open(t.mediaUrl,"_blank"),children:"Open"}),(0,ur.jsx)(zr,{size:"sm",variant:"outline",onClick:async()=>{if(!(await fetch(n+"/memories/from-snap",{method:"POST",headers:{"auth-token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({mediaUrl:t.mediaUrl,caption:t.caption})})).ok)return l({title:"Save failed",status:"error"});l({title:"Saved to Memories",status:"success"})},children:"Save"}),(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:()=>(async e=>{try{const t=await fetch(n+"/reactions/"+e,{headers:{"auth-token":localStorage.getItem("token")}}),r=await t.json();if(!Array.isArray(r)||0===r.length)return;const i=r.map((e=>{var t;return"".concat(e.emoji," ").concat((null===(t=e.user)||void 0===t?void 0:t.name)||"Someone")})).join(", ");alert("Reactions: "+i)}catch(t){}})(t._id),children:"See reactions"}),["\ud83d\udd25","\ud83d\ude0d","\ud83d\ude02","\ud83d\udc4d","\ud83d\ude2e"].map((e=>(0,ur.jsx)(zr,{size:"sm",variant:"ghost",onClick:async()=>{if(!(await fetch(n+"/reactions/toggle",{method:"POST",headers:{"auth-token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({snapId:t._id,emoji:e})})).ok)return l({title:"Failed",status:"error"});l({title:"Reacted",status:"success"})},children:e},e)))]})]},t._id))),d.map((e=>(0,ur.jsx)(ao,{pl:2,pb:2,children:(0,ur.jsx)(Jr,{fontSize:"sm",color:"gray.600",children:Object.entries(s[e._id]||{}).map((e=>{let[t,n]=e;return"".concat(t," ").concat(n)})).join("  ")})},e._id+":rx"))),0===d.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No snaps yet."})]}),(0,ur.jsx)(bD,{}),(0,ur.jsx)(Jr,{fontWeight:"semibold",children:"Recent Messages"}),(0,ur.jsxs)(ex,{align:"stretch",spacing:2,children:[h.map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsx)(Jr,{color:"gray.600",fontSize:"sm",children:new Date(e.createdAt).toLocaleString()}),e.text&&(0,ur.jsx)(Jr,{children:e.text}),e.imageUrl&&(0,ur.jsx)(zr,{size:"sm",onClick:()=>window.open(e.imageUrl,"_blank"),children:"Open Image"}),e.audioUrl&&(0,ur.jsx)(Jr,{children:"\ud83c\udfa4 Voice"}),e.videoUrl&&(0,ur.jsx)(Jr,{children:"\ud83c\udfac Video"})]},e._id))),0===h.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No messages yet."})]})]})})}function Mie(){const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(null),[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)([]),h=m_(),p=(0,r.useCallback)((async()=>{try{const t=await fetch(e+"/memories",{headers:{"auth-token":localStorage.getItem("token")}}),r=await t.json();n(Array.isArray(r)?r:[])}catch(t){n([])}}),[e]);(0,r.useEffect)((()=>{p()}),[p]),(0,r.useEffect)((()=>{(async()=>{try{const t=await fetch(e+"/memories/albums",{headers:{"auth-token":localStorage.getItem("token")}}),n=await t.json();d(Array.isArray(n)?n:[])}catch(t){d([])}})()}),[e]);const f=async()=>{const t=l.trim();if(t)try{const r=await fetch(e+"/memories/search?q="+encodeURIComponent(t),{headers:{"auth-token":localStorage.getItem("token")}}),i=await r.json();n(Array.isArray(i)?i:[])}catch(r){}};return(0,ur.jsx)(pr,{p:4,children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Memories"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{type:"file",accept:"image/*",onChange:e=>{var t;return a((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,ur.jsx)($y,{placeholder:"Caption (optional)",value:s,onChange:e=>o(e.target.value)}),(0,ur.jsx)(zr,{onClick:async()=>{if(!i)return;if(!i.type.startsWith("image/"))return void h({title:"Only images allowed",status:"error"});const t=new FormData;t.append("file",i),t.append("caption",s);if(!(await fetch(e+"/memories/upload",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:t})).ok)return h({title:"Upload failed",status:"error"});a(null),o(""),await p(),h({title:"Saved to Memories",status:"success"})},children:"Upload"})]}),(0,ur.jsxs)(nS,{variant:"enclosed",children:[(0,ur.jsxs)(_R,{children:[(0,ur.jsx)(AR,{children:"All"}),(0,ur.jsx)(AR,{children:"Search"}),(0,ur.jsxs)(AR,{children:["Albums ",(0,ur.jsx)(oo,{ml:2,children:u.length})]})]}),(0,ur.jsxs)(rS,{children:[(0,ur.jsx)(iS,{children:(0,ur.jsx)(lI,{columns:[2,3,4],spacing:3,children:t.map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",overflow:"hidden",children:[(0,ur.jsx)(Tx,{src:e.mediaUrl,alt:e.caption}),e.caption&&(0,ur.jsx)(pr,{p:2,children:(0,ur.jsx)(Jr,{fontSize:"sm",children:e.caption})})]},e._id)))})}),(0,ur.jsxs)(iS,{children:[(0,ur.jsxs)(ao,{mb:3,children:[(0,ur.jsx)($y,{placeholder:"Search captions or tags",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&f()}),(0,ur.jsx)(zr,{onClick:f,children:"Search"}),(0,ur.jsx)(zr,{variant:"ghost",onClick:p,children:"Reset"})]}),(0,ur.jsx)(lI,{columns:[2,3,4],spacing:3,children:t.map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",overflow:"hidden",children:[(0,ur.jsx)(Tx,{src:e.mediaUrl,alt:e.caption}),e.caption&&(0,ur.jsx)(pr,{p:2,children:(0,ur.jsx)(Jr,{fontSize:"sm",children:e.caption})})]},e._id)))})]}),(0,ur.jsx)(iS,{children:(0,ur.jsx)(lI,{columns:[1,2,3],spacing:4,children:u.map((e=>(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",overflow:"hidden",children:[(0,ur.jsx)(Tx,{src:e.cover,alt:e.key}),(0,ur.jsx)(pr,{p:2,children:(0,ur.jsxs)(Jr,{fontWeight:"semibold",children:[e.key," ",(0,ur.jsx)(oo,{ml:2,children:e.count})]})})]},e.key)))})})]})]})]})})}var Tie=Sx({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"});const kie=Gf(pr);function Pie(){var e;const{hostName:t}=(0,r.useContext)(GS),[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(0),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(0),d=(0,r.useRef)(null);(0,r.useEffect)((()=>{let e=!0;return(async()=>{try{const n=await fetch(t+"/stories/feed",{headers:{"auth-token":localStorage.getItem("token")}}),r=await n.json();e&&i(Array.isArray(r)?r:[])}catch(n){}})(),()=>{e=!1}}),[t]);const h=n[a]||null;(0,r.useEffect)((()=>{h&&(async()=>{try{await fetch(t+"/stories/view/"+h._id,{method:"POST",headers:{"auth-token":localStorage.getItem("token")}})}catch(e){}})()}),[h,t]),(0,r.useEffect)((()=>{if(clearInterval(d.current),u(0),!h)return;const e=Date.now();return d.current=setInterval((()=>{if(o)return;const t=Math.min(100,(Date.now()-e)/4e3*100);u(t),t>=100&&(clearInterval(d.current),s((e=>e+1<n.length?e+1:0)))}),50),()=>clearInterval(d.current)}),[a,h,o,n.length]);return n.length?(0,ur.jsx)(kie,{p:3,initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35},position:"relative",w:"100%",h:"calc(100vh - 80px)",bg:"black",onMouseDown:()=>l(!0),onMouseUp:()=>l(!1),onTouchStart:()=>l(!0),onTouchEnd:()=>l(!1),children:h&&(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)("img",{src:h.mediaUrl,alt:"story",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"contain"}}),(0,ur.jsxs)(ex,{position:"absolute",top:0,left:0,right:0,p:3,spacing:2,children:[(0,ur.jsx)(ao,{w:"100%",children:n.map(((e,t)=>(0,ur.jsx)(xW,{value:t<a?100:t===a?c:0,size:"xs",colorScheme:"purple",w:"100%"},t)))}),(0,ur.jsxs)(ao,{w:"100%",color:"white",textShadow:"0 0 4px rgba(0,0,0,0.8)",children:[(0,ur.jsx)(Jr,{fontWeight:"bold",children:(null===(e=h.author)||void 0===e?void 0:e.name)||"Story"}),(0,ur.jsx)(Jr,{fontSize:"sm",opacity:.8,children:new Date(h.createdAt).toLocaleString()}),(0,ur.jsx)(zr,{size:"xs",ml:"auto",onClick:async()=>{try{const e=await fetch(t+"/stories/viewers/"+h._id,{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json(),r=(Array.isArray(n)?n:[]).map((e=>e.name||"Someone"));alert("Viewers ("+r.length+"): "+r.join(", "))}catch(e){}},children:"Viewers"}),(0,ur.jsx)(b_,{size:"xs",ml:"auto",onClick:async()=>{try{const e=await fetch(t+"/stories/viewers/"+h._id,{headers:{"auth-token":localStorage.getItem("token")}}),n=await e.json(),r=(Array.isArray(n)?n:[]).map((e=>e.name||"Someone"));alert("Viewers ("+r.length+"): "+r.join(", "))}catch(e){}},children:"Viewers"}),(0,ur.jsx)(b_,{size:"xs",variant:"outline",onClick:async()=>{try{if(!(await fetch(t+"/stories/"+h._id+"/save",{method:"POST",headers:{"auth-token":localStorage.getItem("token")}})).ok)return;alert("Saved to Memories")}catch(e){}},children:"Save"})]})]}),(0,ur.jsxs)(ao,{position:"absolute",inset:0,justify:"space-between",p:2,children:[(0,ur.jsx)(Qs,{"aria-label":"prev",icon:(0,ur.jsx)(Tie,{}),onClick:()=>s((e=>(e-1+n.length)%n.length))}),(0,ur.jsx)(Qs,{"aria-label":"next",icon:(0,ur.jsx)(UD,{}),onClick:()=>s((e=>(e+1)%n.length))})]})]})}):(0,ur.jsx)(pr,{p:4,children:(0,ur.jsx)(Jr,{children:"No stories yet."})})}function Rie(){const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(null),[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),h=m_(),p=(0,r.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{const r=await fetch(e+"/spotlight/feed"+(t?"?q="+encodeURIComponent(t):"")),i=await r.json();n(Array.isArray(i)?i:[])}catch(r){n([])}}),[e]);(0,r.useEffect)((()=>{p()}),[p]);return(0,ur.jsx)(pr,{p:4,children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Discover"}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{placeholder:"Search Discover",value:u,onChange:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&p(u)}),(0,ur.jsx)(zr,{onClick:()=>p(u),children:"Search"})]}),(0,ur.jsxs)(ao,{children:[(0,ur.jsx)($y,{type:"file",accept:"image/*",onChange:e=>{var t;return a((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,ur.jsx)($y,{placeholder:"Caption",value:s,onChange:e=>o(e.target.value)}),(0,ur.jsx)($y,{placeholder:"tags comma-separated",value:l,onChange:e=>c(e.target.value)}),(0,ur.jsx)(zr,{onClick:async()=>{if(!i)return;if(!i.type.startsWith("image/"))return h({title:"Only images",status:"error"});const t=new FormData;t.append("file",i),t.append("caption",s),t.append("tags",l);if(!(await fetch(e+"/spotlight/create",{method:"POST",headers:{"auth-token":localStorage.getItem("token")},body:t})).ok)return h({title:"Post failed",status:"error"});a(null),o(""),c(""),h({title:"Posted",status:"success"}),p()},children:"Post"})]}),(0,ur.jsx)(lI,{columns:[2,3,4],spacing:3,children:t.map((t=>{var n,r;return(0,ur.jsxs)(pr,{borderWidth:"1px",borderRadius:"md",overflow:"hidden",children:[(0,ur.jsx)(Tx,{src:t.mediaUrl,alt:t.caption}),(0,ur.jsxs)(pr,{p:2,children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(Jr,{fontSize:"sm",children:(null===(n=t.author)||void 0===n?void 0:n.name)||"User"}),(0,ur.jsxs)(zr,{size:"xs",onClick:()=>(async t=>{try{await fetch(e+"/spotlight/like/"+t,{method:"POST",headers:{"auth-token":localStorage.getItem("token")}}),p(u)}catch(n){}})(t._id),children:["\u2764\ufe0f ",(null===(r=t.likes)||void 0===r?void 0:r.length)||0]})]}),t.caption&&(0,ur.jsx)(Jr,{fontSize:"sm",mt:1,children:t.caption}),(0,ur.jsx)(ao,{mt:1,wrap:"wrap",children:(t.tags||[]).map((e=>(0,ur.jsxs)(oo,{colorScheme:"purple",children:["#",e]},e)))})]})]},t._id)}))})]})})}function Die(){const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]),i=(0,r.useRef)(null),a=(0,r.useRef)(null),s=m_(),o=(0,r.useCallback)((async()=>{try{const t=await fetch(e+"/map/nearby",{headers:{"auth-token":localStorage.getItem("token")}}),r=await t.json();n(Array.isArray(r)?r:[])}catch(t){n([])}}),[e]);return(0,r.useEffect)((()=>{o()}),[o]),(0,r.useEffect)((()=>{if(!i.current)return;(async()=>(window.L||(await new Promise((e=>{const t=document.createElement("link");t.rel="stylesheet",t.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",t.onload=e,document.head.appendChild(t)})),await new Promise((e=>{const t=document.createElement("script");t.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",t.onload=e,document.body.appendChild(t)}))),window.L))().then((e=>{a.current||(a.current=e.map(i.current).setView([20,0],2),e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap"}).addTo(a.current)),a.current.eachLayer((e=>{e instanceof window.L.Marker&&a.current.removeLayer(e)})),t.forEach((e=>{var t;"number"===typeof e.lat&&"number"===typeof e.lng&&window.L.marker([e.lat,e.lng]).addTo(a.current).bindPopup("".concat((null===(t=e.user)||void 0===t?void 0:t.name)||"Friend"))}))})).catch((()=>{}))}),[t]),(0,ur.jsx)(pr,{p:4,children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsxs)(ao,{justify:"space-between",children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Map"}),(0,ur.jsx)(zr,{onClick:async()=>{if(!navigator.geolocation)return s({title:"Geolocation not supported",status:"error"});navigator.geolocation.getCurrentPosition((async t=>{const{latitude:n,longitude:r}=t.coords;await fetch(e+"/map/update",{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({lat:n,lng:r})}),o(),s({title:"Location shared",status:"success"})}),(()=>s({title:"Location denied",status:"error"})))},children:"Share my location"})]}),(0,ur.jsx)(pr,{id:"map",ref:i,style:{height:"50vh",width:"100%",borderRadius:8,overflow:"hidden"}}),t.map((e=>{var t;return(0,ur.jsx)(pr,{borderWidth:"1px",borderRadius:"md",p:2,children:(0,ur.jsxs)(Jr,{children:[(null===(t=e.user)||void 0===t?void 0:t.name)||"Friend"," \u2014 ",e.lat.toFixed(4),", ",e.lng.toFixed(4)]})},e._id)})),0===t.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No nearby friends yet."})]})})}const Iie=["className","children"];var[Bie,jie]=gr({name:"StatStylesContext",errorMessage:"useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Stat />\" "}),Fie=cr((function(e,t){const n=Rr("Stat",e),r=(0,c.A)({position:"relative",flex:"1 1 0%"},n.container),i=ft(e),{className:a,children:s}=i,o=y(i,Iie);return(0,ur.jsx)(Bie,{value:n,children:(0,ur.jsx)(lr.div,(0,c.A)((0,c.A)({ref:t},o),{},{className:x("chakra-stat",a),__css:r,children:(0,ur.jsx)("dl",{children:s})}))})}));Fie.displayName="Stat";var Lie=cr((function(e,t){const n=jie();return(0,ur.jsx)(lr.dt,(0,c.A)((0,c.A)({ref:t},e),{},{className:x("chakra-stat__label",e.className),__css:n.label}))}));Lie.displayName="StatLabel";var Oie=cr((function(e,t){const n=jie();return(0,ur.jsx)(lr.dd,(0,c.A)((0,c.A)({ref:t},e),{},{className:x("chakra-stat__number",e.className),__css:(0,c.A)((0,c.A)({},n.number),{},{fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"})}))}));Oie.displayName="StatNumber";const Nie=Gf(pr);function zie(){const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)({users:0,snaps7d:0,stories7d:0,spotlights7d:0}),[i,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{try{const t=await fetch(e+"/admin/metrics",{headers:{"auth-token":localStorage.getItem("token")}});if(403===t.status)return void a(!0);const r=await t.json();n(r||{})}catch(t){a(!0)}})()}),[e]),(0,ur.jsx)(Nie,{p:4,initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35},children:(0,ur.jsxs)(ex,{align:"stretch",spacing:4,children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Admin Dashboard"}),i&&(0,ur.jsxs)(i_,{status:"warning",children:[(0,ur.jsx)(a_,{})," Admin access required."]}),(0,ur.jsxs)(lI,{columns:[2,2,4],spacing:4,children:[(0,ur.jsxs)(Fie,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(Lie,{children:"Users"}),(0,ur.jsx)(Oie,{children:t.users||0})]}),(0,ur.jsxs)(Fie,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(Lie,{children:"Snaps (7d)"}),(0,ur.jsx)(Oie,{children:t.snaps7d||0})]}),(0,ur.jsxs)(Fie,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(Lie,{children:"Stories (7d)"}),(0,ur.jsx)(Oie,{children:t.stories7d||0})]}),(0,ur.jsxs)(Fie,{borderWidth:"1px",borderRadius:"md",p:3,children:[(0,ur.jsx)(Lie,{children:"Spotlight (7d)"}),(0,ur.jsx)(Oie,{children:t.spotlights7d||0})]})]})]})})}const Uie=Gf(pr);function Hie(){const{hostName:e}=(0,r.useContext)(GS),[t,n]=(0,r.useState)([]),i=(0,r.useCallback)((async()=>{try{const t=await fetch(e+"/snaps/sent",{headers:{"auth-token":localStorage.getItem("token")}}),r=await t.json();n(Array.isArray(r)?r:[])}catch(t){n([])}}),[e]);(0,r.useEffect)((()=>{i()}),[i]);return(0,ur.jsx)(Uie,{p:4,initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35},children:(0,ur.jsxs)(ex,{align:"stretch",spacing:3,children:[(0,ur.jsx)(Jr,{fontSize:"2xl",fontWeight:"bold",children:"Sent Snaps"}),t.map((t=>{var n;return(0,ur.jsxs)(ao,{justify:"space-between",borderWidth:"1px",borderRadius:"md",p:2,children:[(0,ur.jsxs)(ao,{children:[(0,ur.jsx)(oo,{colorScheme:"purple",children:"to"}),(0,ur.jsx)(Jr,{children:(null===(n=t.receiver)||void 0===n?void 0:n.name)||t.receiver})]}),(0,ur.jsxs)(ao,{children:[t.viewedAt?(0,ur.jsx)(oo,{colorScheme:"green",children:"Opened"}):(0,ur.jsx)(oo,{children:"Delivered"}),!t.viewedAt&&(0,ur.jsx)(b_,{size:"sm",onClick:()=>(async t=>{try{(await fetch(e+"/snaps/"+t,{method:"DELETE",headers:{"auth-token":localStorage.getItem("token")}})).ok&&i()}catch(n){}})(t._id),children:"Delete"})]})]},t._id)})),0===t.length&&(0,ur.jsx)(Jr,{color:"gray.500",children:"No sent snaps."})]})})}function Gie(e){let{size:t=22,hue:n=270}=e;const r="hsl(".concat(n,", 85%, 65%)"),i="hsl(".concat((n+60)%360,", 85%, 60%)");return(0,ur.jsxs)("svg",{width:t,height:t,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ur.jsx)("defs",{children:(0,ur.jsxs)("linearGradient",{id:"wingGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[(0,ur.jsx)("stop",{offset:"0%",stopColor:r}),(0,ur.jsx)("stop",{offset:"100%",stopColor:i})]})}),(0,ur.jsx)("rect",{x:"30",y:"22",width:"4",height:"20",rx:"2",fill:"#0ea5e9"}),(0,ur.jsx)("path",{d:"M32 32 C 18 16, 10 16, 8 28 C 6 40, 22 44, 32 36 Z",fill:"url(#wingGradient)",opacity:"0.9"}),(0,ur.jsx)("path",{d:"M32 32 C 46 16, 54 16, 56 28 C 58 40, 42 44, 32 36 Z",fill:"url(#wingGradient)",opacity:"0.95"})]})}function Vie(e){let{count:t=16}=e;const n=(0,r.useMemo)((()=>new Array(t).fill(0).map(((e,t)=>{const n=10*Math.random(),r=30+35*Math.random(),i=100*Math.random(),a=10+18*Math.random();return{id:t,delay:n,duration:r,y:i,amp:a,flap:.7+.6*Math.random(),size:18+Math.round(14*Math.random()),hue:Math.round(250+80*Math.random()),yKeyframes:[0,-a,a,0],rotateKeyframes:[-6,6,-6]}}))),[t]);return(0,ur.jsx)("div",{style:{position:"fixed",inset:0,zIndex:0,pointerEvents:"none",overflow:"hidden"},children:n.map((e=>(0,ur.jsx)(Gf.div,{initial:{x:"-10vw",y:"".concat(e.y,"vh"),opacity:0},animate:{x:["-10vw","110vw"],opacity:[0,.9,.9,0]},transition:{duration:e.duration,ease:"linear",repeat:1/0,delay:e.delay},style:{position:"absolute"},children:(0,ur.jsx)(Gf.div,{animate:{y:e.yKeyframes,rotateZ:e.rotateKeyframes,scale:[1,1.05,1]},transition:{duration:4+2*Math.random(),repeat:1/0,repeatType:"mirror",ease:"easeInOut"},style:{filter:"drop-shadow(0 2px 6px rgba(0,0,0,0.35))"},children:(0,ur.jsx)(Gf.div,{animate:{scaleX:[1,.85,1],scaleY:[1,1.05,1]},transition:{duration:.6/e.flap,repeat:1/0,repeatType:"mirror",ease:"easeInOut"},style:{originX:.5,originY:.5},children:(0,ur.jsx)(Gie,{size:e.size,hue:e.hue})})})},e.id)))})}function Wie(e){let{token:t}=e;const n=mw();return(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(Vie,{count:20}),(0,ur.jsx)(D_,{token:t}),(0,ur.jsx)(Bm,{mode:"wait",children:(0,ur.jsx)(Gf.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.25,ease:"easeOut"},style:{position:"relative",zIndex:1},children:(0,ur.jsx)(Bw,{})},n.pathname)})]})}const qie=localStorage.getItem("token"),Xie=(Jie=[{path:"/assistant",element:(0,ur.jsx)(NG,{children:(0,ur.jsxs)(VP,{theme:KP,children:[(0,ur.jsx)(D_,{token:qie}),(0,ur.jsx)(wie,{})]})})},{path:"/",element:(0,ur.jsx)(NG,{children:(0,ur.jsx)(VP,{theme:KP,children:(0,ur.jsx)(Wie,{token:qie})})}),children:[{path:"/",element:(0,ur.jsx)(vD,{})},{path:"/dashboard",element:(0,ur.jsx)(hH,{})},{path:"/profile/:id",element:(0,ur.jsx)(zG,{})},{path:"/portfolio",element:(0,ur.jsx)(qG,{})},{path:"/p/:slug",element:(0,ur.jsx)(eV,{})},{path:"/paint",element:(0,ur.jsx)(cW,{})},{path:"/meet",element:(0,ur.jsx)(dW,{})},{path:"/music",element:(0,ur.jsx)(bW,{})},{path:"/snaps",element:(0,ur.jsx)(_ie,{})},{path:"/streaks",element:(0,ur.jsx)(Eie,{})},{path:"/friend/:id",element:(0,ur.jsx)(Cie,{})},{path:"/memories",element:(0,ur.jsx)(Mie,{})},{path:"/stories",element:(0,ur.jsx)(Pie,{})},{path:"/discover",element:(0,ur.jsx)(Rie,{})},{path:"/map",element:(0,ur.jsx)(Die,{})},{path:"/admin",element:(0,ur.jsx)(zie,{})},{path:"/snaps/sent",element:(0,ur.jsx)(Hie,{})},{path:"*",element:(0,ur.jsx)(Iw,{to:"/",replace:!0})}]}],Mb({basename:null==Yie?void 0:Yie.basename,future:ZP({},null==Yie?void 0:Yie.future,{v7_prependBasename:!0}),history:Ix({window:null==Yie?void 0:Yie.window}),hydrationData:(null==Yie?void 0:Yie.hydrationData)||eR(),routes:Jie,mapRouteProperties:Fw,window:null==Yie?void 0:Yie.window}).initialize());var Jie,Yie;a.createRoot(document.getElementById("root")).render((0,ur.jsx)(r.StrictMode,{children:(0,ur.jsx)(lR,{router:Xie})})),I_(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").catch((()=>{}))}))})()})();
//# sourceMappingURL=main.da79753e.js.map